!function(a){var n={};function i(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return a[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=a,i.c=n,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=268)}({268:function(e,t,a){"use strict";a.r(t);a(269)},269:function(e,t,a){"use strict";var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r=function(){function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}}();!function(y){var P,I=y.$,e=y.calendar={},B="nx-cal-selected",O="."+B,z=y.time,b=y.$L,h=y.$M,j=z.getSFDate,Y=z.parseSFDate,u=z.getSFDateTime,T=z.parseSFDateTime,q=z.getRealJSDateTimeFromLocal,H=z.getLocalDateTime,x=y.snippet.get,L=y.utils,n="keydown.action.skuid",d=y.$.ui.keyCode,t=y.events.publish,U=function(){return y.utils.userLocale},W=function(e,t){var a=t.model,n=a.getField(t.startField),i=a.getField(t.endField);return t.updateable&&(n&&n.editable||i&&i.editable)&&e.dragAndDrop},$=function(e){for(var t=y.moment;e.length<6;)e.push(0);return t?t.tz(e,z.getUserTimeZone()).format():new Date(e[0],e[1],e[2],e[3],e[4],e[5]).toISOString()};P={month:{setup:function(h){var e,t,a,n,i,r,o,d,s,l,c,u,g,p,v,f,m=h.viewmap.month,w=U(),b=w.firstDay,x=0===w.firstDay?6:w.firstDay-1,D=new Date(h.useDate.getTime()),y=!1;for(I.each(h.settings.eventSources,function(){if(W(m,this))return!(y=!0)}),D.setDate(1),r=new Date,o=(r=H(r)).getDate(),d=r.getMonth(),s=r.getFullYear(),e=new Date(D.getTime()),t=b-D.getDay(),e.setDate(e.getDate()+(t<=0?t:t-7)),(a=new Date(D.getTime())).setMonth(a.getMonth()+1),a.setDate(a.getDate()-1),n=new Date(a.getTime()),i=x-a.getDay(),n.setDate(n.getDate()+(0<=i?i:7+i)),!h.beginRangeDate||e>h.beginRangeDate?h.prevbutton.show():h.prevbutton.hide(),!h.endRangeDate||n<h.endRangeDate?h.nextbutton.show():h.nextbutton.hide(),l=function(e){if(h.beginRangeDate>e||h.endRangeDate<e)return!0},h.navtitle.text(h.monthNames[D.getMonth()]+" "+D.getFullYear()),h.dowselect.empty().show().append(Q(h,m)),c=I('<table cellpadding="0" cellspacing="0">').addClass("nx-cal-table"),u=I("<thead>").appendTo(c),m.ctbody=I("<tbody>").appendTo(c),m.headrow=I("<tr>").appendTo(u),p=b,g=0;g<7;g++,p=6==p?0:p+1)m.dayMatrix&&!m.dayMatrix[p+""]||m.headrow.append(I("<th>").text(h.dayNames[p]));for(v=new Date(e.getTime());v<=n;){if(v.getDay()===b&&(f=I("<tr>").appendTo(m.ctbody)),!m.dayMatrix||m.dayMatrix[v.getDay()+""]){var F=I("<td>").addClass("nx-cal-month").attr("data-date",j(v)),C=I("<div>").addClass("nx-cal-month-header"),S=I("<div>").addClass("nx-cal-month-header-label").text(v.getDate());y&&F.droppable({accept:".nx-cal-event,.nx-event",drop:function(e,t){var a,n,i,r=I(this),o=t.draggable,d=o.data("eventSource"),s=d.model,l=o.data("row"),c=s.getFieldValue(l,d.startField,!0),u=s.getFieldValue(l,d.endField,!0),g=Y(r.data("date")),p=0;c&&(a=H(T(c))),u&&(n=H(T(u))),a&&n&&(p=n.getDate()-a.getDate()),a?g.setHours(a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()):g.setHours(12,0,0,0),i=new Date(g.getTime()),p&&i.setDate(i.getDate()+p),n?i.setHours(n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()):i.setHours(13,0,0,0),g=q(g),i=q(i),t.draggable.css("opacity","0.5"),h.moveEventHandler(h,d,l,g,i,!1,t.draggable,r),r.removeClass(B)},over:function(){I(this).addClass(B)},out:function(){I(this).removeClass(B)}}),C.append(S),F.append(C),v.getMonth()!==D.getMonth()&&F.addClass("nx-cal-other-month"),(h.beginRangeLocal||h.endRangeLocal)&&l(v)&&F.addClass("nx-cal-cell-inactive"),o===v.getDate()&&d===v.getMonth()&&s===v.getFullYear()&&F.addClass("nx-cal-cell-today"),f.append(F)}v.setDate(v.getDate()+1)}if(h.editor.contents.append(c),h.settings.createRecords){var k=!1;I.each(h.settings.eventSources,function(){if(this.createable)return!(k=!0)}),k&&c.on("mouseenter mouseleave",".nx-cal-month",function(e){var t=I(this);t.is(".nx-cal-cell-inactive")||("mouseenter"===e.type?t.children(".nx-cal-month-header").append(I("<div>").addClass("ui-icon ui-icon-plus nx-cal-plusbutton").click(function(){h.addEventHandler(h,q(Y(t.data("date"))))})):t.children(".nx-cal-month-header").children(".ui-icon").remove())})}var R=new Date(n.getTime());R.setDate(R.getDate()+1),h.addBoundingConditions($([e.getFullYear(),e.getMonth(),e.getDate()]),$([R.getFullYear(),R.getMonth(),R.getDate()])),h.makeFloatingHeader()},drawEvents:function(b){var x=b.viewmap.month,D={};x.ctbody.find(".nx-cal-event").remove(),I.each(b.getActiveSources(),function(){var m=this,w=W(x,m);I.each(p(m),function(){var n=this,e=m.model.getFieldValue(n,m.startField),t=m.model.getFieldValue(n,m.endField);if(!e||!t)return!0;for(var i,r,o,d,s,a=T(e),l=T(t),c=H(a),u=H(l),g=j(c),p=j(u),h=new Date(c.getTime()),v=function(){r=g===i,o=p===i,d=I("<div>").addClass("nx-cal-event nx-cal-event-month"),(f=m.color?L.mergeAsText("row",m.color,{createFields:!1},m.model,n):null)&&d.css("background-color",f),d.data({row:n,eventSource:m}),w&&d.draggable(),!r&&d.css({"border-bottom-left-radius":"0px","border-top-left-radius":"0px"}),!o&&d.css({"border-bottom-right-radius":"0px","border-top-right-radius":"0px"}),s=x.ctbody.find('[data-date="'+i+'"]');var e=D[i]=D[i]||[];e.push({elem:d,eventData:n,eventSource:m,view:x});var t=e.length,a=s.find(".nx-cal-viewmorebutton");t>x.maxEventsPerCell?(0===a.length&&(a=I("<div>").addClass("nx-cal-viewmorebutton").appendTo(s)),a.off("click.skuid"),a.on("click.skuid",function(){return function(n,e,t){var s=I('<div title="'+z.makeFormattedDate(e)+'" class="nx-cal-viewmore-popup"></div>'),l=[];I.each(t,function(e,t){var a=t.eventData,n=t.eventSource,i=t.view,r=I("<div>").addClass("nx-cal-event nx-cal-event-month"),o=new y.ui.Editor;l.push(o),o.registerModel(n.model),o.handleSave=function(e){e&&(r.empty(),E(r,a,n,i))};var d=n.color?L.mergeAsText("row",n.color,{createFields:!1},n.model,a):null;d&&r.css("background-color",d),r.data({row:a,eventSource:n}),s.append(E(r,a,n,i))}),s.on("click",".nx-cal-event",function(){var e=I(this),t=e.data("row"),a=e.data("eventSource");n.eventDetailHandler(n,t,a)}),s.dialog({resizable:!1,modal:!0,width:300,close:function(){l.forEach(function(e){return e.unregister()}),s.dialog("destroy").remove()}})}(b,s.data("date"),e)}),a.text(y.$L("skuid__view_more")+" ("+t+")")):(a.remove(),E(d,n,m,x),s.append(d)),h.setDate(h.getDate()+1)};(i=j(h))<=j(u);){var f;v()}})})},navPrevious:function(e){e.useDate.setMonth(e.useDate.getMonth()-1),e.refresh()},navNext:function(e){e.useDate.setMonth(e.useDate.getMonth()+1),e.refresh()}},week:{getFirstDayOfWeek:function(e){var t=U().firstDay,a=new Date(e.getTime());return a.setDate(a.getDate()+(t-a.getDay())),a},getLastDayOfWeek:function(e){var t=new Date(e.getTime());return t.setDate(t.getDate()+6),t},setup:function(l){var c=l.viewmap.week,e=P.week,t=!1;I.each(l.settings.eventSources,function(){if(W(c,this))return!(t=!0)});var r=l.beginRangeLocal&&l.beginRangeLocal.getHours()+l.beginRangeLocal.getMinutes()/60,o=l.endRangeLocal&&l.endRangeLocal.getHours()+l.endRangeLocal.getMinutes()/60,d=function(e,t,a){if(l.beginRangeDate>e||l.endRangeDate<e)return!0;var n=t+a/60,i=e.getTime();return!!(l.beginRangeDate&&l.beginRangeDate.getTime()===i&&l.beginRangeLocal&&n<r)||!(!l.endRangeDate||l.endRangeDate.getTime()!==i)&&(o&&n+1/c.rowsperhour>o)};c.starthour||0===c.starthour||(c.starthour=8),c.endhour||0===c.endhour||(c.endhour=18),c.rowsperhour||(c.rowsperhour=4);var a,n,i,s,u,g,p,h,v=U();s=(a=e.getFirstDayOfWeek(l.useDate)).getMonth(),i=a.getFullYear(),g=(n=e.getLastDayOfWeek(a)).getMonth(),p=i!==(u=n.getFullYear()),!l.beginRangeDate||a>l.beginRangeDate?l.prevbutton.show():l.prevbutton.hide(),!l.endRangeDate||n<l.endRangeDate?l.nextbutton.show():l.nextbutton.hide(),h=p?l.monthNames[s]+" "+a.getDate()+", "+i+" - "+l.monthNames[g]+" "+n.getDate()+", "+u:s!==g?l.monthNames[s]+" "+a.getDate()+" - "+l.monthNames[g]+" "+n.getDate()+", "+u:l.monthNames[s]+" "+a.getDate()+" - "+n.getDate()+", "+u,l.navtitle.text(h),l.hourselect.empty().show().append(G(c.starthour,c.endhour,function(e){c.starthour=e,l.refresh()},function(e){c.endhour=e,l.refresh()})),l.dowselect.empty().show().append(Q(l,c));var f,m,w=I('<table cellpadding="0" cellspacing="0">').addClass("nx-cal-table"),b=I("<thead>").appendTo(w),x=new Date(a.getTime()),D=c.groupingModel,y=c.groupingField,F=y?function(e){return D.getFieldValue(e,y,!0)}:function(e){return D.getRowId(e)};for(c.ctbody=I("<tbody>").appendTo(w),c.headrow=I("<tr>").appendTo(b),c.headrow.append(I("<th>").addClass("nx-cal-week-corner")),D&&(l.editor.registerModel(D),f=D.getRows(),m=f.length);x<=n;){if(!c.dayMatrix||c.dayMatrix[x.getDay()+""]){var C=I("<th>").text(l.dayNames[x.getDay()]+" "+x.getDate()).attr("data-date",j(x));c.useLanes?C.attr("colspan",m).addClass("nx-cal-divider-cell"):C.append(I("<div>").addClass("nx-cal-week-event-container")),c.headrow.append(C)}x.setDate(x.getDate()+1)}if(c.useLanes){c.lanesrow=I("<tr>").appendTo(b),c.lanesrow.append(I("<th>").addClass("nx-cal-week-corner")),x=new Date(a.getTime());for(;x<=n;)c.dayMatrix&&!c.dayMatrix[x.getDay()+""]||m&&I.each(f,function(e,t){var a=I("<th>").attr({"data-lane":F(t),"data-date":j(x)});a.text(D.mergeRow(t,c.groupingTemplate).text()),e===m-1&&a.addClass("nx-cal-divider-cell"),a.append(I("<div>").addClass("nx-cal-week-event-container")),c.lanesrow.append(a)}),x.setDate(x.getDate()+1)}var S,k,R,M=[],T=[];for(R=c.useLanes?function(n,i,r,o){m&&I.each(f,function(e,t){var a=I("<td>").addClass("nx-cal-week-hour").attr({"data-hour":i,"data-minutes":r,"data-date":j(o),"data-lane":F(t)});(l.beginRangeLocal||l.endRangeLocal)&&d(o,i,r)?a.addClass("nx-cal-cell-inactive"):M.push(a),e===m-1&&a.addClass("nx-cal-divider-cell"),n.append(a)})}:function(e,t,a,n){var i=I("<td>").addClass("nx-cal-week-hour").attr({"data-hour":t,"data-minutes":a,"data-date":j(n)});(l.beginRangeLocal||l.endRangeLocal)&&d(n,t,a)?i.addClass("nx-cal-cell-inactive"):M.push(i),e.append(i)},S=c.starthour;S<c.endhour;S++)for(k=0;k<c.rowsperhour;k++){var H,L,E=I("<tr>"),V=S%12,N=k*(60/c.rowsperhour),_=I("<div>");for(x=new Date(a.getTime()),0===V&&(V=12),0==N&&((H=new Date(x.getTime())).setHours(S,N,0,0),L=z.formatTime(v.timeFormat,H),_.text(L)),E.append(I("<td>").addClass("nx-cal-week-hour-label").append(_));x<=n;)c.dayMatrix&&!c.dayMatrix[x.getDay()+""]||R(E,S,N,x),x.setDate(x.getDate()+1);T.push(E)}if(M.length&&t&&I(M).droppable({accept:".nx-cal-event,.nx-event",drop:function(e,t){var a=I(this).closest("tbody").find(O);if(a.length){var n=t.draggable.data("row"),i=a.first(),r=Y(c[c.useLanes?"lanesrow":"headrow"].children().eq(i.index()).data("date"));r.setHours(i.data("hour"),i.data("minutes"),0,0);var o=new Date(r.getTime());o.setMinutes(o.getMinutes()+t.draggable.data("duration"),0,0),r=q(r),o=q(o),t.draggable.css("opacity","0.5");var d=t.draggable.data("eventSource");if(c.useLanes){var s=c.lanesrow.children().eq(i.index()).data("lane");l.moveEventHandler(l,d,n,r,o,s,t.draggable,a)}else l.moveEventHandler(l,d,n,r,o,!1,t.draggable,a);a.removeClass(B)}},over:function(e,t){for(var a=Math.ceil(t.draggable.data("duration")/(60/c.rowsperhour)),n=I(this),i=n.index(),r=n.closest("tr"),o=0;r&&o<Math.floor(a/2)&&r.prev().length;)r=r.prev(),o++;setTimeout(function(){for(var e=0;e<a;e++)r&&(r.children().eq(i).addClass(B),r=r.next())},1)},out:function(){I(this).closest("tbody").find(O).removeClass(B)}}),c.ctbody.append(T),l.settings.createRecords){var A=!1;I.each(l.settings.eventSources,function(){if(this.createable)return!(A=!0)}),A&&w.selectable({filter:"td.ui-droppable",cancel:".nx-cal-event, .nx-cal-cell-inactive, .nx-cal-week-hour-label",start:function(e){I(this).data("startselect",I(e.originalEvent.target))},selecting:function(e,t){I(this).find(O).removeClass(B);var a=I(t.selecting),n=I(this).data("startselect"),i=n.index(),r=n.closest("tr").index(),o=a.closest("tr").index(),d=I(this).find("tbody").children().slice(Math.min(r,o),Math.max(r,o)+1),s=I();d.each(function(){s=s.add(I(this).children().eq(i))}),s.addClass(B)},unselecting:function(e,t){I(this).find(O).removeClass(B);var a=I(t.unselecting),n=I(this).data("startselect"),i=n.index(),r=n.closest("tr").index(),o=a.closest("tr").index();r<o?o--:o++;var d=I(this).find("tbody").children().slice(Math.min(r,o),Math.max(r,o)+1),s=I();d.each(function(){s=s.add(I(this).children().eq(i))}),s.addClass(B)},stop:function(){var e,t,a,n,i,r,o,d=I(this).find(O),s=c.groupingModel;d.length&&(e=d.first(),t=d.last(),a=Y(c[c.useLanes?"lanesrow":"headrow"].children().eq(e.index()).data("date")),n=Y(c[c.useLanes?"lanesrow":"headrow"].children().eq(e.index()).data("date")),a.setHours(e.data("hour"),e.data("minutes"),0,0),n.setHours(t.data("hour"),t.data("minutes")+60/c.rowsperhour,0,0),a=q(a),n=q(n),c.useLanes?(i=c.lanesrow.children().eq(e.index()).data("lane"),r=(o=s.isAggregate||y?null:s.getRowById(i))?s.getRowName(o):i,l.addEventHandler(l,a,n,i,r)):l.addEventHandler(l,a,n),d.removeClass(B))}})}l.editor.contents.append(w),l.addBoundingConditions($([a.getFullYear(),a.getMonth(),a.getDate(),c.starthour]),$([n.getFullYear(),n.getMonth(),n.getDate(),c.endhour])),l.makeFloatingHeader()},drawEvents:function(e){var S=e.viewmap.week;S[S.useLanes?"lanesrow":"headrow"].find(".nx-cal-event").remove();var k=S.endhour-S.starthour,t=S.ctbody.height(),R=S[S.useLanes?"lanesrow":"headrow"].children().eq(1).width();if(0===t){var a=e.elem.closest(".ui-tabs-panel");return a.length&&a.on("tabshow",function(){e.drawEvents()}),!1}var M=t/k/60,n=[];if(S.useLanes){I.each(e.getActiveSources(),function(){var e=this;e.groupingField&&I.each(p(e),function(){n.push({source:e,data:this})})});var i=void 0,r=void 0,o=void 0,d=void 0;n.sort(function(t,a){return i=t.source,o=a.source,d=function(e){return o.model.getFieldValue(a.data,e,!0)},(r=function(e){return i.model.getFieldValue(t.data,e,!0)})(i.groupingField)?d(o.groupingField)?r(i.groupingField)<d(o.groupingField)?-1:r(i.groupingField)>d(o.groupingField)?1:r(i.startField)<d(o.startField)?-1:r(i.startField)>d(o.startField)?1:r(i.endField)>d(o.endField)?-1:r(i.endField)<d(o.endField)?1:0:-1:1});var s,l=!1,c=[],u=[];I.each(n,function(){s=this.source.model.getFieldValue(this.data,this.source.groupingField),l!=s&&(u=u.concat(e.getConflictsForSortedList(c)),c=[]),c.push(this),l=s}),n=u.concat(e.getConflictsForSortedList(c))}else n=e.getSortedEventArrayWithConflicts();I.each(n,function(){var e=this.data,t=this.source,a=this.index,n=this.conflicts,i=t.model.getFieldValue(e,t.startField,!0),r=t.model.getFieldValue(e,t.endField,!0);if(!i||!r)return!0;for(var o,d,s,l,c,u,g,p,h,v=T(i),f=T(r),m=H(v),w=H(f),b=j(m),x=j(w),D=new Date(m.getTime());(o=j(D))<=j(w);){d=b===o,s=x===o,l=I("<div>").addClass("nx-cal-event nx-cal-event-week");var y=t.color?L.mergeAsText("row",t.color,{createFields:!1},t.model,e):null;if(y&&l.css("background-color",y),(u=S.useLanes?S.lanesrow.children('[data-date="'+o+'"][data-lane="'+t.model.getFieldValue(e,t.groupingField,!0)+'"]'):S.headrow.children('[data-date="'+o+'"]')).length){if(c=u.children(".nx-cal-week-event-container"),h=S.ctbody.offset().top-c.offset().top,d){if((g=h+(60*(m.getHours()-S.starthour)+m.getMinutes())*M)<h&&(g=h,l.css({"border-top-left-radius":"0px","border-top-right-radius":"0px"})),g>=h+S.ctbody.height()){D.setDate(D.getDate()+1);continue}}else g=h,l.css({"border-top-left-radius":"0px","border-top-right-radius":"0px"});if(s){if(p=h+(60*(w.getHours()-S.starthour)+w.getMinutes())*M,h+60*k*M<p&&(p=h+60*k*M,l.css({"border-bottom-left-radius":"0px","border-bottom-right-radius":"0px"})),p<h)break}else p=h+60*k*M,l.css({"border-bottom-left-radius":"0px","border-bottom-right-radius":"0px"});2;var F=R/n,C=(w.getTime()-m.getTime())/6e4;l.css({top:g+2+"px",left:F*a+"px",width:F+(n-a-1)*F/2+"px",height:p-g-4+1+"px","z-index":a}).data({row:e,eventSource:t,duration:C}),E(l,e,t,S,M),c.append(l),t.updateable&&W(S,t)&&l.draggable({revert:"invalid"}),D.setDate(D.getDate()+1)}else D.setDate(D.getDate()+1)}})},navPrevious:function(e){e.useDate.setDate(e.useDate.getDate()-7),e.refresh()},navNext:function(e){e.useDate.setDate(e.useDate.getDate()+7),e.refresh()}},dayscheduling:{setup:function(c){var g,p,h,e,v=c.viewmap.dayscheduling,u=L.userLocale,t={};if(v.starthour||0===v.starthour||(v.starthour=8),v.endhour||0===v.endhour||(v.endhour=18),v.colsperhour||(v.colsperhour=4),v.groupheight=80,!c.beginRangeDate||c.useDate>c.beginRangeDate?c.prevbutton.show():(c.prevbutton.hide(),p=c.useDate.getTime()===c.beginRangeDate.getTime()?c.beginRangeLocal.getHours()+c.beginRangeLocal.getMinutes()/60:24,v.starthour>=v.endhour&&(v.endhour=v.starthour+1)),!c.endRangeDate||c.useDate<c.endRangeDate?c.nextbutton.show():(c.nextbutton.hide(),h=c.useDate.getTime()===c.endRangeDate.getTime()?c.endRangeLocal.getHours()+c.endRangeLocal.getMinutes()/60:0,v.endhour<=v.starthour&&(v.starthour=v.endhour-1)),c.navtitle.text(c.dayNames[c.useDate.getDay()]+" "+z.makeFormattedDateFromLocal(c.useDate)),c.hourselect.empty().show().append(G(v.starthour,v.endhour,function(e){v.starthour=e,c.refresh()},function(e){v.endhour=e,c.refresh()})),g={drop:function(e,t){var a=I(this).closest("tbody").find(O);if(a.length){var n,i=I(this).closest("tr").data("room"),r=t.draggable.data("row"),o=new Date(c.useDate.getTime()),d=a.first(),s=t.draggable.data("eventSource");o.setHours(d.data("hour"),d.data("minutes"),0,0),(n=new Date(o.getTime())).setMinutes(n.getMinutes()+t.draggable.data("duration"),0,0),o=q(o),n=q(n),t.draggable.css("opacity","0.5"),c.moveEventHandler(c,s,r,o,n,i,t.draggable,a),a.removeClass(B)}},over:function(e,t){var a=Math.ceil(t.draggable.data("duration")/(60/v.colsperhour)),n=I(this),i=0;if(!t.draggable.is(".nx-event"))for(;n&&i<Math.floor(a/2)&&n.prev().length&&n.prev().is(".ui-droppable");)n=n.prev(),i++;setTimeout(function(){for(var e=0;e<a;e++)n&&(n.addClass(B),n=n.next())},1)},out:function(){I(this).closest("tbody").find(O).removeClass(B)}},t.standard={name:"Standard View",render:function(e){var t,a,n,i,r,o=e.row,d=v.groupingModel,s=d.isAggregate,l=I("<td>").addClass("nx-cal-day-room nx-cal-day-roomtag nx-cal-divider-cell").append(I("<div>").addClass("nx-cal-day-event-container").css("height",v.groupheight+"px")),c=I("<div>").css("padding","8px").append(d.mergeRow(o,v.groupingTemplate)),u=e.element.attr("data-room",s?d.getFieldValue(o,v.groupingField,!0):d.getRowId(o)).data("row",o).append(l.append(c));for(t=v.starthour;t<v.endhour;t++)for(a=0;a<v.colsperhour;a++)n=I('<td class="nx-cal-day-room">'),i=a*(60/v.colsperhour),n.data("hour",t).data("minutes",i),a===v.colsperhour-1&&n.addClass("nx-cal-divider-cell"),(p||h)&&(void 0,r=t+i/60,p&&r<p||h&&r+1/v.colsperhour>h)?n.addClass("nx-cal-cell-inactive"):n.droppable({accept:".nx-cal-event,.nx-event",drop:g.drop,over:g.over,out:g.out}),u.append(n)},setUp:function(e){e.element.addClass("nx-cal-table");var t=I("<thead>").prependTo(e.element);v.headrow=I("<tr>").appendTo(t),v.headrow.append(I('<th width="160">').css("padding","8px").addClass("nx-cal-day-header nx-cal-divider-cell").text(v.groupingModel.label));var a=u.timeFormat,n=a.toLowerCase(),i=n.indexOf("a"),r=n.indexOf("h");-1==r&&(r=n.indexOf("k")),-1!=i&&(a=i<r?"a"+a.charAt(r):a.charAt(r)+"a");for(var o=v.starthour;o<v.endhour;o++){var d=new Date(c.useDate.getTime());d.setHours(o,0,0,0);var s=z.formatTime(a,d),l=I('<th colspan="'+v.colsperhour+'">'+s+"</th>").addClass("nx-cal-day-header nx-cal-divider-cell");v.headrow.append(l)}},tearDown:function(){},renderComplete:function(e){e.calIsReady&&c.drawEvents()},nodeType:"table",contentsNodeType:"tbody",itemNodeType:"tr"},c.list&&(c.list.conditionsBar&&c.list.conditionsBar.remove(),c.list.searchBox&&(e=c.list.searchBox.val(),c.list.searchBox.remove()),c.list.unregister()),c.list=new y.ui.List(c.editor,v.groupingModel,{views:t,pageSize:v.pageSize,listFilters:v.listFilters,showSearchBox:v.showSearchBox,showFooter:!1!==v.showFooter,searchMethod:v.searchMethod,customFilter:v.customFilter,customFilterValue:e||"",personalizationService:c.personalizationService}),I.each(v.groupingModel.fields,function(){c.list.addSearchField(this)}),c.list.calIsReady=!1,c.list.render(),c.list.calIsReady=!0,c.settings.createRecords){var a=!1;I.each(c.settings.eventSources,function(){if(this.createable)return!(a=!0)}),a&&c.list.contents.selectable({filter:"td.ui-droppable",cancel:".nx-cal-event, .nx-cal-cell-inactive, .nx-cal-day-roomtag",start:function(e){I(this).data("startselect",I(e.originalEvent.target))},selecting:function(e,t){I(this).find(O).removeClass(B);var a=I(t.selecting),n=I(this).data("startselect"),i=n.closest("tr"),r=n.index(),o=a.index();i.children().slice(Math.min(r,o),Math.max(r,o)+1).addClass(B)},unselecting:function(e,t){I(this).find(O).removeClass(B);var a=I(t.unselecting),n=I(this).data("startselect"),i=n.closest("tr"),r=n.index(),o=a.index();r<o?o--:o++,i.children().slice(Math.min(r,o),Math.max(r,o)+1).addClass(B)},stop:function(){var e=I(this).find(O);if(e.length){var t,a,n=new Date(c.useDate.getTime()),i=new Date(c.useDate.getTime()),r=e.first(),o=e.last(),d=v.groupingModel;n.setHours(r.data("hour"),r.data("minutes"),0,0),i.setHours(o.data("hour"),o.data("minutes")+60/v.colsperhour,0,0),n=q(n),i=q(i),t=r.closest("tr"),a=d.getFieldValue(t.data("row"),d.getNameField()),c.addEventHandler(c,n,i,t.data("room"),a),e.removeClass(B)}}})}var n=c.useDate,i=n.getFullYear(),r=n.getMonth(),o=n.getDate();c.addBoundingConditions($([i,r,o,v.starthour]),$([i,r,o,v.endhour])),c.makeFloatingHeader()},drawEvents:function(C){var S=C.viewmap.dayscheduling;C.list.contents.find(".nx-cal-event").remove();var e=S.headrow.children("th").first().outerWidth(),t=C.list.contents.width(),k=t-e;if(0===t){var a=C.elem.closest(".ui-tabs-panel");return a.length&&a.on("tabshow",function(){C.drawEvents()}),!1}var R=[];S.headrow.children("th").not(":first").each(function(){R.push(I(this).position().left-e)});var n=S.endhour-S.starthour,M=k/n/60,i=[];I.each(C.getActiveSources(),function(){var e=this;e.groupingField&&I.each(p(e),function(){i.push({source:e,data:this})})});var r=void 0,o=void 0,d=void 0,s=void 0;i.sort(function(t,a){return r=t.source,d=a.source,s=function(e){return d.model.getFieldValue(a.data,e,!0)},(o=function(e){return r.model.getFieldValue(t.data,e,!0)})(r.groupingField)?s(d.groupingField)?o(r.groupingField)<s(d.groupingField)?-1:o(r.groupingField)>s(d.groupingField)?1:o(r.startField)<s(d.startField)?-1:o(r.startField)>s(d.startField)?1:o(r.endField)>s(d.endField)?-1:o(r.endField)<s(d.endField)?1:0:-1:1});var l,c=!1,u=[],g=[];I.each(i,function(){l=this.source.model.getFieldValue(this.data,this.source.groupingField),c!=l&&(g=g.concat(C.getConflictsForSortedList(u)),u=[]),u.push(this),c=l}),g=g.concat(C.getConflictsForSortedList(u)),I.each(g,function(){var e=this.data,t=this.source,a=this.index,n=this.conflicts,i=t.model.getFieldValue(e,t.startField),r=t.model.getFieldValue(e,t.endField);if(!i||!r)return!0;var o=T(i),d=T(r),s=H(o),l=H(d),c=t.model.getFieldValue(e,t.groupingField),u=C.list.contents.children('[data-room="'+c+'"]');if(u.length){var g=u.children().first().children(".nx-cal-day-event-container"),p=I("<div>").addClass("nx-cal-event nx-cal-event-day"),h=t.color?L.mergeAsText("row",t.color,{createFields:!1},t.model,e):null;h&&p.css("background-color",h),p.data("row",e),p.data("eventSource",t);var v,f=s.getHours()-S.starthour;v=f<0?-1e3:f>=R.length?1+k:R[f];var m,w=l.getHours()-S.starthour;m=l.getDate()!=s.getDate()?1+k:w<0?-1e3:w>=R.length?k:R[w];var b=v+s.getMinutes()*M,x=m+l.getMinutes()*M,D=(l.getTime()-s.getTime())/6e4;if(x<=0||k<=b)return!0;b<0&&(b=0,p.css({"border-bottom-left-radius":"0px","border-top-left-radius":"0px"})),k<x&&(x=k,p.css({"border-bottom-right-radius":"0px","border-top-right-radius":"0px"}));var y=k-x+3;p.data("duration",D),p.css("left",b+3+"px");var F=S.groupheight/n;p.css({width:x-b-3+"px",top:F*a+"px",height:F+(n-a-1)*F/2+"px","z-index":a}),E(p,e,t,S,M,y),g.append(p),t.updateable&&p.draggable({revert:"invalid"})}})},navPrevious:function(e){e.useDate.setDate(e.useDate.getDate()-1),e.refresh()},navNext:function(e){e.useDate.setDate(e.useDate.getDate()+1),e.refresh()}}};var s=function(e,t,a){var n,i,r,o=!1,d=a.model,s=d.isNewRow(t),l=s&&a.createable||!s&&a.isUpdateable(),c=function(e){l&&(I("<div>").text(b("Save")).skooButton({icon:"sk-icon-save"}).click(function(){d.save(),o=!0,e.dialog("close")}).appendTo(e),I("<div>").text(b("Cancel")).skooButton({icon:"sk-icon-cancel"}).click(function(){e.dialog("close")}).appendTo(e)),(a.deleteable||s)&&I("<div>").text(b("Delete")).skooButton({icon:"sk-icon-delete"}).click(function(){d.deleteRow(t),d.save(),o=!0,e.dialog("close")}).appendTo(e)},u=a.onClickHandler;switch(!0===a.updateable?i="edit":!1===a.updateable&&(i="readonly"),a.createable&&"none"==u&&s&&(u="autopopup"),u){case"snippetthencustompopup":case"snippet":if(a.onClickSnippet){var g=x(a.onClickSnippet);g&&(n=g({eventSource:a,calendar:e,model:d,event:t,row:t}))&&L.isPromise(n)&&(r=n)}if("snippetthencustompopup"!==u)break;case"custompopup":var p,h,v;r||(r=(p=I.Deferred()).promise(),p.resolve()),r.done(function(){s=d.isNewRow(t),h=L.createPopupFromPopupXML(a.onClickPopup,{eventSource:a,model:d,row:t,event:t,component:a,mode:i}),"false"!==a.onClickPopup.attr("showdefaultbuttons")&&c(h),s&&(v=h.dialog("option","close"),h.dialog("option","close",function(){!o&&d.hasChanged&&d.cancel(),o=!1,v()}))});break;case"autopopup":var f=a.template;a.groupingField&&-1===f.indexOf("{{"+a.groupingField+"}}")&&(f+="{{"+a.groupingField+"}}"),-1===f.indexOf("{{"+a.startField+"}}")&&(f+="{{"+a.startField+"}}"),-1===f.indexOf("{{"+a.endField+"}}")&&(f+="{{"+a.endField+"}}");var m=d.getRowMergeResult(t,f).fields,w=I('<div title="'+d.getFieldValue(t,a.nameField)+'" class="nx-editor"></div>').append(y.ui.createFieldSet(m,{editor:e.editor,mode:l?"edit":"readonly"}));c(w),w.dialog({resizable:!1,modal:!0,width:500,close:function(){w.dialog("destroy").remove(),!o&&d.hasChanged&&d.cancel(),o=!1}})}},l=function(r,o,d,s,l){d||(d=new Date(o.getTime())).setMinutes(d.getMinutes()+30);var i=function(e){var t=e.model,a=e.groupingField,n=t.createRow({additionalConditions:e.conditions}),i={};s&&a&&(i[a]=s,i[L.getFieldRelationshipName(a,t.getField(a))]={Name:l}),i[e.startField]=u(o),i[e.endField]=u(d),t.getFieldValue(n,e.nameField,!0)||(i[e.nameField]=b("New_Event")),t.updateRow(n,i,{initiatorId:r.editor.id()}),r.eventDetailHandler(r,n,e)},e=[];if(I.each(r.getActiveSources(),function(){this.createable&&e.push(this)}),1<e.length){var c=I('<div title="'+b("Select_Event_Type_to_Create")+'" class="nx-editor"></div>');I.each(e,function(){var e=this,t=I("<div>").css({overflow:"auto",cursor:"pointer"}),a=I("<div>").addClass("nx-cal-event").css({height:"20px",width:"20px",float:"left",margin:"6px"}).appendTo(t),n=e.color?L.mergeAsText("model",e.color,{createFields:!1},e.model):null;n&&a.css("background-color",n),t.append(I("<div>").css("margin","8px 30px").text(this.name)).click(function(){c.dialog("close"),i(e)}),c.append(t)}),c.dialog({resizable:!1,modal:!0,width:300,close:function(){c.dialog("destroy").remove()}})}else 1===e.length&&i(e[0])};function E(e,t,a,n,i,r){if(a.renderSnippet){var o=x(a.renderSnippet);o&&o(e,t,a,n,i,r)}else e.append(a.model.mergeRow(t,a.template));return e}var c=function(e,t,a,n,i,r){var o=t.model,d={},s={initiatorId:e.editor.id()};d[t.startField]=u(n),d[t.endField]=u(i),r&&t.groupingField&&(d[t.groupingField]=r),o.updateRow(a,d,s),o.save(s)},v=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);e&&i(this,e),!1!==this.isActive&&(this.isActive=!0)}return r(t,[{key:"activate",value:function(){return this.isActive=!0,this}},{key:"deactivate",value:function(){return this.isActive=!1,this}},{key:"id",value:function(){return this._GUID}},{key:"isUpdateable",value:function(){return!0===this._updateable}},{key:"updateable",set:function(e){switch(""+e){case"false":e=!1;break;case"component":break;default:e=!0}this._updateable=e},get:function(){return this._updateable}}]),t}();function f(e,a){var i=this;i.settings=a,i.elem=e.addClass("nx-cal"),e.data("object",i),i.eventDetailHandler=a.eventDetailHandler||s,i.addEventHandler=a.addEventHandler||l,i.moveEventHandler=a.moveEventHandler||c,i.personalizationService=a.personalizationService;var r=i.personalizationService.getSettings();if(i.editor=new y.ui.Editor(e),i.editor.contents.addClass("nx-cal-main"),i.editor.handleDataRefresh=function(e){if(i.editor.messages&&i.editor.messages.empty(),e&&e.updatedModels&&e.updatedModels.length){var t=e.updatedModels,a=i.viewmap[i.currentView],n=!1;I.each(t,function(){if(this===a.groupingModel)return!(n=!0)}),n&&i.setup()}i.drawEvents()},i.editor.handleCancel=function(){y.ui.Editor.prototype.handleCancel.apply(i.editor,arguments),i.drawEvents()},i.editor.handleSave=function(e,t){y.ui.Editor.prototype.handleSave.apply(i.editor,arguments),t.totalsuccess||t.initiatorId!==i.editor.id()?i.drawEvents():y.model.cancel(I.map(a.eventSources,function(e){return e.model}))},i.nav=I("<div>").css("display","inline-block").appendTo(i.editor.header),i.monthNames=z.monthNamesShort,i.dayNames=z.dayNamesShort,i.useDate=i.settings.rememberDate&&r.useDate?new Date(r.useDate):H(new Date),i.useDate.setHours(0,0,0,0),i.settings.beginRange&&(i.beginRangeLocal=H(i.settings.beginRange),i.beginRangeDate=new Date(i.beginRangeLocal.getTime()),i.beginRangeDate.setHours(0,0,0,0),i.useDate<i.beginRangeDate&&(i.useDate=new Date(i.beginRangeDate.getTime()))),i.settings.endRange&&(i.endRangeLocal=H(i.settings.endRange),i.endRangeDate=new Date(i.endRangeLocal.getTime()),i.endRangeDate.setHours(0,0,0,0),i.useDate>i.endRangeDate&&(i.useDate=new Date(i.endRangeDate.getTime()))),i.prevbutton=I("<div>").css("display","inline-block").addClass("ui-icon ui-icon-circle-arrow-w nx-cal-header-icon").attr({role:"button",tabindex:0}).on("click "+n,function(e){"click"!==e.type&&e.which!==d.ENTER&&e.which!==d.SPACE||P[i.getCurrentView()].navPrevious(i)}),i.nextbutton=I("<div>").css("display","inline-block").addClass("ui-icon ui-icon-circle-arrow-e nx-cal-header-icon").attr({role:"button",tabindex:0}).on("click "+n,function(e){"click"!==e.type&&e.which!==d.ENTER&&e.which!==d.SPACE||P[i.getCurrentView()].navNext(i)}),i.datenav=I('<input type="text" style="position:relative; top:10px; visibility:hidden; height: 0px; width:0px; border: 0px;">').datepicker({onSelect:function(){i.useDate=i.datenav.datepicker("getDate"),i.refresh()},minDate:i.beginRangeDate,maxDate:i.endRangeDate}),i.navtitle=I("<div>").addClass("nx-cal-header-title").click(function(){i.datenav.datepicker("show")}),i.hourselect=I("<div>").css("display","inline-block"),i.dowselect=I("<div>").css("display","inline-block").css("vertical-align","middle"),i.nav.append(i.datenav,i.prevbutton,i.nextbutton,i.navtitle,i.hourselect,i.dowselect),i.currentView=a.views[0].id,i.floatingHeader=I("<div>").addClass("nx-cal-day-floatheader"),i.floatingTable=I("<table>").addClass("nx-cal-table").appendTo(i.floatingHeader),I.each(a.eventSources,function(){this.model&&i.editor.registerModel(this.model)}),1<a.views.length){var t=I("<div>"),o=[];I.each(a.views,function(){var e=this,t=e.icon,a=e.label;if(a){a=I("<div>").append(L.merge("global",a,{createFields:!1,registerFields:!1})).text()}else{switch(e.id){case"month":a="month_view";break;case"week":a="week_view";break;case"dayscheduling":a="day_scheduling_view"}a&&(a=b(a))}var n={label:a||e.id,value:e.id,icon:t};i.settings.rememberView&&e.id==r.viewId&&(i.currentView=e.id,n.isSelected=!0),o.push(n)}),t.actionSelect({items:o,onItemSelect:function(e){i.currentView=e.value,i.refresh()}}),i.editor.header.prepend(t.addClass("nx-viewswitcher").css("float","right").css("margin-left","4px"))}return i.viewmap={},I.each(a.views,function(){i.viewmap[this.id]=this}),i.refresh(),e.on("click",".nx-cal-event",function(){var e=I(this),t=e.data("row"),a=e.data("eventSource");i.eventDetailHandler(i,t,a)}),L.addResizeHandler(function(){"dayscheduling"!==i.currentView&&"week"!==i.currentView||i.drawEvents()},100),I(window).scroll(function(){var e=I(window).scrollTop(),t=i.editor.contents.offset().top,a=t+i.editor.contents.height();t<e&&e<a-40?i.floatingHeader.css({display:"block",top:e-t+"px"}):i.floatingHeader.css({display:"none"})}),i}f.prototype.activateSources=function(e){e&&e.length&&I.each(e,function(e,t){t instanceof v&&t.activate()})},f.prototype.activateSource=function(e){e&&e instanceof v&&e.activate()},f.prototype.deactivateSources=function(e){e&&e.length&&I.each(e,function(e,t){t instanceof v&&t.deactivate()})},f.prototype.deactivateSource=function(e){e&&e instanceof v&&e.deactivate()},f.prototype.getAllSources=function(){return this.settings.eventSources},f.prototype.getActiveSources=function(){return this.settings.eventSources.filter(function(e){return e.isActive})},f.prototype.setup=function(){var e=this,t={},a=e.settings,n=e.list;return a.rememberView&&(t.viewId=e.currentView),a.rememberDate&&(t.useDate=e.useDate.getTime()),e.personalizationService.updateSettings(t),e.datenav.datepicker("setDate",e.useDate),e.editor.contents.empty(),e.hourselect.hide(),e.dowselect.hide(),"dayscheduling"!==e.getCurrentView()&&n&&(n.conditionsBar&&n.conditionsBar.remove(),n.searchBox&&n.searchBox.remove(),n.unregister()),P[e.getCurrentView()].setup(e),e.elem.trigger("setup"),e},f.prototype.refresh=function(){var e=this;return this.setup(),this.loadEvents().then(function(){e.settings.component.publish("refreshed"),t("calendar.refreshed",{calendar:e})}),this},f.prototype.drawEvents=function(){return P[this.getCurrentView()].drawEvents(this),this.elem.trigger("drawevents"),this.settings.component.publish("eventsDrawn"),t("calendar.eventsDrawn",{calendar:this}),this},f.prototype.loadEvents=function(){return y.model.updateData(I.map(this.getActiveSources(),function(e){return e.model.hasChanged&&e.model.cancel(),e.model})).then(function(){return self})},f.prototype.getCurrentView=function(){return this.currentView||"week"},f.prototype.makeFloatingHeader=function(){var e=this;e.floatingHeader.detach();var t=e.editor.contents.find("thead").clone(),a=I("<tbody>"),n=I("<tr>").appendTo(a);t.children("tr").first().children("th").each(function(){for(var e=0;e<parseInt(I(this).prop("colspan"),10);e++)n.append(I("<td>").addClass("nx-cal-floating-table-cell"))}),e.floatingTable.empty().append(t,a),e.editor.contents.append(e.floatingHeader)},f.prototype.addBoundingConditions=function(s,l){I.each(this.getActiveSources(),function(e,t){var a=t.model,n=a.getDataSourceType().prop("canAutoGenerateConditionsFromFields"),i=t.maxConditionName||"_source_"+t.id()+"_startlimit_",r=t.minConditionName||"_source_"+t.id()+"_endlimit_",o=a.getConditionByName(i),d=a.getConditionByName(r);n&&(o||(o=a.addCondition({field:t.startField,name:i})),d||(d=a.addCondition({field:t.endField,name:r}))),o&&d&&(o.operator="<",o.encloseValueInQuotes=!1,d.operator=">",d.encloseValueInQuotes=!1,a.setCondition(o,l),a.setCondition(d,s))})},f.prototype.removeBoundingConditions=function(){I.each(this.getActiveSources(),function(e,t){var a=t.model,n=t.startConditionName||"_source_"+t.id()+"_startlimit_",i=t.endConditionName||"_source_"+t.id()+"_endlimit_",r=a.getConditionByName(n),o=a.getConditionByName(i);r&&a.deactivateCondition(r),o&&a.deactivateCondition(o)})},f.prototype.getSortedEventArrayWithConflicts=function(){var t=[];I.each(this.getActiveSources(),function(){var e=this;I.each(p(e),function(){t.push({source:e,data:this})})});var n=void 0,e=void 0,i=void 0,r=void 0;return t.sort(function(t,a){return n=t.source,i=a.source,r=function(e){return i.model.getFieldValue(a.data,e,!0)},(e=function(e){return n.model.getFieldValue(t.data,e,!0)})(n.startField)<r(i.startField)?-1:e(n.startField)>r(i.startField)?1:e(n.endField)>r(i.endField)?-1:e(n.endField)<r(i.endField)?1:0}),this.getConflictsForSortedList(t)},f.prototype.getConflictsForSortedList=function(e){var o=[];I.each(e,function(){var t=this,a=t.source,n=t.data;if(a.ignoreConflicts)return!0;var i=o.length;I.each(o,function(e,t){t.source.model.getFieldValue(t.data,t.source.endField)<=a.model.getFieldValue(n,a.startField)&&!t.isPlaced&&(t.index=t.index||e,t.conflicts=t.conflicts||i,t.isPlaced=!0)});for(var e=i;0<e&&o[e-1].isPlaced;e--)o.splice(e-1,1);var r=!1;I.each(o,function(e){if(this.isPlaced)return t.conflicts=i,t.index=e,o[e]=t,!(r=!0)}),r||o.push(this)});var t=o.length;return I.each(o,function(e){this.isPlaced||(this.index=this.index||e,this.conflicts=this.conflicts||t,this.isPlaced=!0)}),e};var G=function(e,t,a,n){var i=I("<div>"),r=I("<div>");return i.actionSelect({items:L.getHourOptions(0,t,e),onItemSelect:function(e){a&&a(parseInt(e.value,10))}}),r.actionSelect({items:L.getHourOptions(e+1,24,t),onItemSelect:function(e){n&&n(parseInt(e.value,10))}}),I("<div>").append(i.addClass("nx-viewswitcher").css({display:"inline-block",float:"none","margin-left":"8px"}),r.addClass("nx-viewswitcher").css({display:"inline-block",float:"none","margin-left":"0px"}))},Q=function(n,i){var r=I("<div>").addClass("nx-cal-dowpicker");return i.dayMatrix&&I.each(i.dayMatrix,function(e,t){var a=I("<div>").addClass("nx-cal-dowpicker-item").text(z.dayNamesMin[e]);t||a.addClass("off"),a.click(function(){i.dayMatrix[e]=!i.dayMatrix[e],n.setup().drawEvents()}),r.append(a)}),r},p=function(e){return e.model.getRows(e.conditions)},a={init:function(e,t){var a,n,i=I.map(e.children("sources").children(),function(e){var t=I(e),a=t.children("eventtemplate").text()||t.text()||"{{"+t.attr("namefield")+"}}",n=t.children("conditions"),i=I.map(n.children(),function(e){return new y.model.Condition(I(e))}),r=h(t.attr("model"));return new v({model:r,nameField:t.attr("namefield"),startField:t.attr("startfield"),endField:t.attr("endfield"),groupingField:t.attr("groupfield"),minConditionName:t.attr("mindatecondition"),maxConditionName:t.attr("maxdatecondition"),template:a,renderSnippet:t.attr("rendersnippet"),color:t.attr("color"),name:t.attr("name"),ignoreConflicts:"true"===t.attr("ignoreconflicts"),createable:r.createable&&"false"!==t.attr("createable"),updateable:r.updateable&&t.attr("updateable"),deleteable:r.deleteable&&"false"!==t.attr("deleteable"),onClickHandler:t.attr("eventclickhandler")||"autopopup",onClickSnippet:t.attr("onclicksnippet"),onClickPopup:t.children("onclickpopup"),_GUID:L.generateGUID(),conditions:i})}),r=I.map(e.children("views").children(),function(e){var t=I(e),a=t.attr("type"),n="true"===t.attr("hideweekends"),i={0:!n,1:!0,2:!0,3:!0,4:!0,5:!0,6:!n},r=h(t.attr("groupingmodel")),o=t.attr("groupingfield"),d=r&&(t.children("groupingtemplate").text()||"{{"+(r.getNameField()||"")+"}}"),s=t.attr("starthour")&&parseInt(t.attr("starthour"),10),l=t.attr("endhour")&&parseInt(t.attr("endhour"),10),c=t.attr("divisionsperhour")&&parseInt(t.attr("divisionsperhour"),10),u=t.attr("maxeventspercell");return{id:a,groupingTemplate:d,groupingModel:r,groupingField:o,dayMatrix:i,listFilters:t.children("filters"),showSearchBox:"false"!==t.attr("searchbox"),searchMethod:t.attr("searchmethod")||"client",customFilter:t.attr("searchsnippet")&&x(t.attr("searchsnippet")),pageSize:t.attr("pagesize"),useLanes:"true"===t.attr("uselanes"),starthour:s,endhour:l,colsperhour:c,rowsperhour:c,dragAndDrop:"false"!==t.attr("dragdrop"),maxEventsPerCell:u}});if(e.attr("rangemodel")){var o=h(e.attr("rangemodel")),d=o&&o.getFirstRow(),s=e.attr("rangestartfield"),l=e.attr("rangeendfield");d&&s&&l&&(a=T(o.getFieldValue(d,s,!0)),n=T(o.getFieldValue(d,l,!0)))}var c=new f(this,{eventSources:i,views:r,createRecords:"false"!==e.attr("allowcreate"),rememberDate:"false"!==e.attr("rememberdate"),rememberView:"false"!==e.attr("rememberview"),beginRange:a,endRange:n,component:t,personalizationService:t.getPersonalizationService()}),u="_tzChangeEventHandler",g=y.component.Component.prototype,p=function(){y.events.unsubscribe(t[u])};return t&&(t.unregister=function(){g.unregister.apply(t,arguments),c.editor.unregister(),p()},t.unrender=function(){g.unrender.apply(t,arguments),p()},t[u]=y.events.subscribe("ui.timeZoneChanged",function(){c.refresh()})),this.data("object",c),this}};e.Calendar=f,e.EventSource=v,L.registerPlugin("calendar",a),y.componentType.register("calendar",function(e,t,a){e.calendar(t,a)}),y.componentType.register("skoocal",function(e,t,a){e.calendar(t,a)})}(skuid)}});