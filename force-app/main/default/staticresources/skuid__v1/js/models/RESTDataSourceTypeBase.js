!function(n){var r={};function o(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=n,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=53)}({53:function(e,t,n){"use strict";var h,p,x,q,l,P,a,r,o,i,s,d,_,N,f,y,u;h=skuid,p=h.$,x=p.extend,q=h.utils,l=q.makeXMLDoc,P=q.parseAsJSONIfString,a=h.dataSource,r=a.utils,o=r.REST,i=a.core||(a.core={}),s=h.model,d=q.contains,_=q.getObjectProperty,N=q.hasObjectProperty,f="rest.methods",y="x-entityname",(u=function e(n){p.each(["name"],function(e,t){if(!n[t])throw"Missing Required Property Error: "+t}),x(this,n),this.properties=x(!0,{},e.prototype.properties),n.extendedProperties&&(x(!0,this.properties,n.extendedProperties),delete this.extendedProperties),a.DataSourceType.prototype.constructor.call(this,this),delete this.getModelProperties}).prototype=new a.DataSourceType(!1),(u.constructor=u).prototype=x(!0,u.prototype,{_NEW_ID_PREFIX:"__skuid_new__",_FAKE_ID_PREFIX:"__skuid__",_DEFAULT_ID_FIELD:"id",buildEntityMetadataRequest:function(e){var t=e.model,n=new s.Model(t);return e.ignorePathToContent&&delete n.pathToContent,n.path=e.path||"",e.targetEntity&&e.targetEntity!==n.dataSource.name&&(n.objectName=e.targetEntity),n},buildSaveRequests:function(e){var a=this,i=h.$M(e.id),s=[],t={insert:e.inserts,update:e.updates,delete:e.deletes};return p.each(t,function(r,e){var o=a.getMethod(i,r);e&&o&&p.each(e,function(e,t){var n=function(e,t,n){return{type:e,originalRecordId:n,originalRecord:i.getRecordById(n).get(),method:t,model:i,row:i.getRowById(n),request:{url:t.url,method:t.verb,contentType:t.contentType}}}(r,o,e);"delete"!==r&&function(e,t){var n=e.method,r=e.request,o="autoprefix"===n.changeMapping,a=(n.sendDataAs||"").toLowerCase(),i={};p.each(t,function(e,t){i[(o?n.changeMappingPrefix:"")+e]=t}),n.contentType===h.constants.MIME_TYPES.FORM_URL_ENCODED?r.data=q.param(i):"headerperfield"===a?r.headers=i:"queryparamperfield"===a?r.url+=(d(r.url,"?")?"&":"?")+q.param(i):r.data=i}(n,t),a.coerceRequest(n),s.push(n)})}),s},coerceRequest:function(){},getEntityMetadata:function(t){var n=this;return p.when.all(p.map(t.entities,function(e){return n.getModelMetadata(e,t)}))},getModelMetadata:function(e,t){var s=this,n=e,r=t.dataSource;r&&!n.dataSource&&(n.dataSource=r);var d=s.getEntityMetadataCacheKey(n);return s.queryEntityMetadata(n,t).then(function(e){if(!e)return[];var t=(e.extensions||(e.extensions={})).rest||(e.rest={}),n=e.accessible=!!q.size(s.getMethod(e,"query")),r=e.createable=!!q.size(s.getMethod(e,"insert")),o=e.updateable=!!q.size(s.getMethod(e,"update")),a=e.deleteable=!!q.size(s.getMethod(e,"delete")),i=e.searchable=!!q.size(s.getMethod(e,"search"));return e.readonly=(n||i)&&!r&&!o&&!a,t.entityName=e.objectName=d,e})},getEntityMetadataCacheKey:function(e){return"string"==typeof e?e:e.objectName||_(e,"extensions.rest.entityName")},shouldIgnoreCache:function(e){return(e=e||{}).ignoreCache||!1},getEntityMetadataLoadingMessageFromBreadcrumb:function(){return"Loading Data Source metadata..."},getEntityList:function(){return p.Deferred().resolve([]).promise()},searchableEntities:function(n){n=n||{};var t=p.Deferred(),r=this,o=[];return r.getEntityList(n).then(function(e){p.each(e,function(e,t){r.queryEntityMetadata(t.value,n).then(function(e){e.methods.search&&o.push(t)})}),t.resolve(o)}),t.promise()},search:function(a,i,s){var d=this,u=[];return p.each(a.returning,function(e,t){var n=!1,r=i&&i[e],o=s[t.modelName];o.extensions.rest={entityName:e},p.each(o.conditions,function(e,t){"__global_search"===t.name&&(n=!0,t.value!==a.query&&(t.value=a.query))}),n||o.addCondition({name:"__global_search",sourceType:"param",sourceParam:"search",value:a.query,operator:"=",encloseValueInQuotes:!1,inactive:!1}),d.searchProperties&&r&&p.each(d.searchProperties(r).conditions,function(e,t){o.addCondition(t)}),u.push(o)}),d.load(u,{dataSource:h.dataSource.getDataSource(a.dataSourceName),loadAllMetadata:!0,performingSearch:!0,ignoreCache:!0}).then(function(e){return e})},getExtendedModelProperties:function(){return{basic:[],advanced:[],customTabs:[]}},getMethod:function(e,t){return this.getMethods(e)[t]||{}},getMethods:function(e){return _(e,"extensions."+f)||e.methods||{}},getModelProperties:function(n,e,r){var o=this,t=h.builder.core,a=t.getUnsavedChangesWarningProperty({component:n}),i=n.state,s=i.attr(y),d=void 0!==s,u=t.getCoreModelBasicProperties({component:n,propViewer:e,isDataSourceLocked:d}),c=[];!1!==this.prop("composer.hasEntityOptions")&&u.push({id:y,label:"Model Entity",type:"entity",dataSourceName:r.name,readonly:!!i.attr(y),showLabelInTextInput:!0,onChange:function(e,t){o.onSelectEntity&&o.onSelectEntity(e,t,n,r),n.save().refresh()}}),u.push(t.getModelQueryOnPageLoadProperty({component:n,propViewer:e}),t.getAsyncLoadProperty({component:n}),t.getCreateDefaultRowProperty()),a&&c.push(a),c.push(t.getDeferFieldRenderingProperty(!0));var l=this.getExtendedModelProperties(s,i,n,r),p=[],f=Array.prototype.push;return q.grab(l,"basic","length")&&f.apply(u,l.basic),p.push({name:"Basic",props:u}),q.grab(l,"advanced","length")&&f.apply(c,l.advanced),p.push({name:"Advanced",props:c}),q.grab(l,"customTabs","length")&&f.apply(p,l.customTabs),o.coerceModelPropertyTabs(p),p},coerceModelPropertyTabs:function(){},handleSaveResult:function(e){var v,S=this,b=[],M=[],R=[],E=[];return e.map(function(e){var t,n,r,o=e.operation,a=e.requestContext,i=a.type,s=a.method,d=s.receiveDataAs||"recordinbody",u=e.response,c=u?P(u.body):null,l=u?u.headers:null,p=e.error,f={errors:E,messages:[],source:o.id},h=e.isSuccess,y=s.successIf,g=s.successField,m=s.successValue;h&&("responsefieldispresent"===y?h=N(c,g):"responsefieldistrue"===y?h=!0===_(c,g,!0):"responsefieldequals"===y?h=_(c,g,!0)===m:"responseheaderispresent"===y?h=N(l,g,!0):"responseheaderequals"===y?h=_(l,g)===m:"responsebodyequals"===y?h=c===m:"responsebodyisempty"===y&&(h=q.isUndefined(c)||null===c)),(f.success=h)||(v=!0,p?E.push({message:p,severity:"ERROR"}):(t=S.generateErrorMessage(u))&&E.push({message:t,severity:"ERROR"})),"insert"===i?(f.oldId=a.originalRecordId,h&&(n=s.createdRecordIdLocation,x(r={},a.originalRecord),"recordinbody"===d?x(r,c):"idinbodyfield"===d?f.id=_(c,n):"idinheader"===d&&(f.id=_(l,n)),f.record=r),S.coerceSaveResultObject(f,a),M.push(f)):"update"===i?(f.id=a.originalRecordId,"recordinbody"===d&&(f.record=c),S.coerceSaveResultObject(f,a),R.push(f)):"delete"===i&&(f.id=a.originalRecordId,b.push(f))}),{deleteResults:b,globalErrors:[],insertResults:M,totalsuccess:!v,updateResults:R}},parseSuccessfulLoadResponse:r.parseSuccessfulLoadResponseWithSynonyms,parseSuccessfulSaveResponse:r.parseSuccessfulSaveResponseWithSynonyms,getPaginationToken:function(){},coerceSaveResultObject:function(){},initialize:function(e){if(e&&e.fields&&e.fields.length){var t,n,r,o,a=this,i=a.getEntityMetadataCacheKey(e),s=e.getDataSource&&e.getDataSource(),d=s&&s.getCachedEntityMetadata(i);if(!d)return;t=d&&d.getFieldsList&&d.getFieldsList()||[],n=e.fields,o=(r=e.extensions||(e.extensions={})).rest||(r.rest={});var u=p.map(n,function(e){return e.id});p.each(t,function(e,t){0<=u.indexOf(t.id)||!1!==t.omittable||n.push({id:t.id})}),p.each(n,function(e,t){a.updateFieldMetadata(t,t.id,d)}),o.methods=d&&d.getExtensions&&d.getExtensions(f)}return e},load:function(e,n){var r=this,o=n.dataSource;return n.ignoreCache=r.shouldIgnoreCache(n),o.authenticate().then(function(){return p.when.all(p.map(e,function(t){if(!1!==t.doQuery)return r.loadSingleModel(t,n);var e=p.extend({},n,{entities:[t]});return o.getEntityMetadata(e).then(function(e){return r.createNewModelWithMetadata(t,e,n)})}))})},getEntityFieldsMap:function(e){var t=this.prop("x-metadata"),n=q.grab(t,e,"fields");return n&&q.keyBy(n,"id")},createNewModelWithMetadata:function(e,t){var n=t._unwrap(),r=n.fields.reduce(function(e,t){return e[t.id]=t,e},{}),o=x({},n,{fields:p.map(e.fields,function(e){return e.uiOnly?p.extend(!0,{},e):p.extend(!0,{},r[e.id],e)})});return o.extensions&&e.extensions&&(o.objectName=o.extensions.entityname=e.extensions.entityname,o.extensions.rest&&e.extensions.rest&&(o.extensions.rest.entityName=e.extensions.rest.entityName,o.objectName||(o.objectName=o.extensions.rest.entityName))),o},loadSingleModel:function(n,t){var r,o,a,i,s,d,u,c=this,l=p.extend({},t,{entities:[n]});return n.dataSource.getEntityMetadata(l).then(function(e){if(s=e._unwrap(),r=e.getExtensions("rest.entityName"),a=e.getExtensions(f),i=a&&(t.performingSearch?a.search:a.query),d={url:i.url,method:i.verb,contentType:i.contentType},u={type:t.performingSearch?"search":"query",method:i,model:n,request:d,addOnly:l.addOnly},o=c.createNewModelWithMetadata(n,e,t),!i)throw'No query method found for "'+r+'"';return c.preLoadHook(u)}).then(function(){return c.coerceRequest(u),u.addOnly&&n.paginationToken&&c.applyPaginationToken(u.request,n.paginationToken),c.makeRequest(n,u)}).then(function(e){o.data=c.parseSuccessfulLoadResponse(e,i,o,n,s.fields);var t=c.getPaginationToken(e,i,o,n);return t?(o.canRetrieveMoreRows=!0,n.paginationToken=t):(o.canRetrieveMoreRows=!1,delete n.paginationToken),c.postLoadHook(o,u)}).then(function(){return t.performingSearch?{request:{dataSource:n.dataSource},results:[{label:n.label,objectName:n.objectName,objectMapKey:n.objectMapKey,modelName:n.id,records:o.data}]}:!n.deferFieldRendering&&u.method.additionalRequests?p.when.all(o.data.map(function(e,t){return c.makeAdditionalQueries(n,e,i,o).then(function(e){o.data[t]=e.row})})).then(function(){return o}):o})},applyPaginationToken:function(){},preLoadHook:function(){},postLoadHook:function(){},preSaveHook:function(){return r.deferrable()},postSaveHook:function(){},makeAdditionalQueries:function(n,r,e,t){var o=p.Deferred(),a=this,i=e||n.extensions.rest.methods.query;return t&&(n.fields=t.fields),i.additionalRequests&&i.additionalRequests.map(function(e){var t={type:"query",method:e,model:n,request:{url:e.url,method:e.verb,contentType:e.contentType},row:r};a.coerceRequest(t),a.makeRequest(n,t).then(function(e){r.__additionalRequestMade=!0,a.parseAdditionalQueries(e,n,r,t),h.events.publish("rest.deferred.loaded",[r]),o.resolve({row:r,model:n})})}),o.promise()},parseAdditionalQueries:function(e,t,n,r){var o=q.parseAsJSONIfString(e.body);t.fields.forEach(function(e){e.defer&&-1<p.inArray(e.id,r.method.fields)&&(n[e.id]=_(o,e.path))})},onSelectEntity:function(e,t,n,r){var o=e,a=r.getCachedEntityMetadata(o),i=a.getFieldsList().filter(function(e){return!1===e.omittable}),s=_(a.getExtensions(),"rest.defaultConditions"),d=n.state,u=d.children("fields").empty(),c=d.children("conditions").empty();i&&0<i.length&&u.append(i.map(function(e){return l('<field id="'+e.id+'" />')})),s&&0<s.length&&c.append(s.map(function(e){var r=l('<condition value="" />');return p.each(e,function(e,t){if("picklistEntries"===e){var n=l("<picklistentries/>");n.append(p.map(t,function(e){return l("<entry/>").attr(e)})),r.append(n)}else r.attr(e,t)}),r})),this.prop("composer.rebuildPropsOnSelectEntity")?n.refresh().rebuildProps():n.refresh()},processEntityMetadataRequest:function(e){var t=x(!0,{extensions:{rest:{}}},e.result),n=t.extensions.rest,r=t.methods,o=t.defaultConditions;return delete t.methods,n.methods=r,o&&(delete t.defaultConditions,n.defaultConditions=o),t},processModelXMLExtensions:function(e,t){var n=t.attr(y);e.extensions.rest={entityName:n},e.objectName=n},properties:{composer:{canFieldsBeSelected:function(e){var t=e.model,n=t.attr(y)||t.attr("sobject"),r=t.attr("datasource")||t.attr("service"),o=a.get(r);return!(!1===(o&&o.getDataSourceType()).prop("composer.hasEntityOptions")||!n)||"Select an Entity for this Model"},rebuildPropsOnSelectEntity:!0},canAutoGenerateConditionsFromFields:!1,canConditionsBeGrouped:!1,showSearchFields:!1,canFieldsBeIndividuallySearched:!1,canServerSearch:!1,supportsServerSideSort:!1},queryEntityMetadata:function(){},save:function(e){var s=this,r=p.Deferred();return p.each(e.operations,function(e,o){var t,n=s.buildSaveRequests(o),a=[],i=[];p.each(n,function(e,t){var n,r=s.preSaveHook(t).then(function(){return s.makeRequest(t.model,t)}).then(function(e){return(n=e).body=s.parseSuccessfulSaveResponse(e,t),s.postSaveHook(e,t)}).then(function(){i.push({operation:o,requestContext:t,response:n,isSuccess:!0})}).catch(function(e){i.push({operation:o,requestContext:t,error:e,isSuccess:!1})});a.push(r)}),p.when.all(a).always(function(){t=s.handleSaveResult(i),r.resolve(t)})}),r.promise()},updateFieldMetadata:function(e,t,n){if(!e.overrideMetadata&&(t||(t=e.id),t)){var r,o,a=n&&n.getField&&n.getField(t);a&&(r=e.id,o=e.name,x(!0,e,a),r&&(e.id=r),o&&(e.name=o))}},parseResponseBodyAsJSON:P,processErrorObject:o.processErrorObject,populateBreadcrumbFromEntityMetadata:o.populateBreadcrumbFromEntityMetadata,makeRequest:o.makeRequest,generateErrorMessage:o.generateErrorMessage,getConditionSourceProperties:o.getConditionSourceProperties,getIdField:o.getIdField,getNameField:o.getNameField,getRowId:o.getRowId,getRowName:o.getRowName,setDefaultConditionState:o.setDefaultConditionState}),x(i,{RESTDataSourceTypeBase:u})}});