!function(i){var n={};function o(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return i[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=i,o.c=n,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(i,n,function(e){return t[e]}.bind(null,n));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=65)}({1:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.apiVersionsArray=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e};t.isValidApiVersion=function(e){return a.default.hasOwnProperty(e)};var o,r=i(2),a=(o=r)&&o.__esModule?o:{default:o};t.apiVersionsArray=Object.keys(a.default).map(function(e){return n({id:e},a.default[e])});t.default=a.default},14:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SCHEMA={auth_provider:{auth_method:"skuid__Auth_Method__c",authorize_endpoint_url:"skuid__Authorize_Endpoint_URL__c",client_id:"skuid__Client_Id__c",client_secret:"skuid__Client_Secret__c",custom_callback_url:"skuid__Custom_Callback_URL__c",id:"Id",name:"Name",oauth_grant_type:"skuid__OAuth_Grant_Type__c",oauth_provider_type:"skuid__Type__c",request_headers:"skuid__Request_Headers__c",token_endpoint_url:"skuid__Token_Endpoint_URL__c",token_request_body_parameters:"skuid__Token_Request_Body_Parameters__c",default_scopes:"skuid__Default_Scopes__c"},auth_provider_credential:{id:"Id",auth_provider_id:"skuid__Auth_Provider__c",auth_provider_name:"Auth_Provider_Name__ui",user_id:"skuid__User__c",access_token:"skuid__Access_Token__c",access_token_issued:"skuid__Access_Token_Issued__c",access_token_expiration:"skuid__Access_Token_Expiration__c",refresh_token:"skuid__Refresh_Token__c"},component_pack:{active:"skuid__Active__c",api_version:"skuid__API_Version__c",id:"Id",load_order:"skuid__Load_Order__c",name:"Name",resource_name:"skuid__Resource_Name__c",type:"skuid__Type__c"},data_service:{host:"skuid__Host__c",id:"Id",name:"Name",port:"skuid__Port__c",version:"skuid__Version__c",is_active:"skuid__Active__c"},data_source:{authentication:"skuid__Authentication__c",auth_request_body:"skuid__Auth_Request_Body__c",auth_request_body_content_type:"skuid__Auth_Request_Body_Content_Type__c",auth_request_headers:"skuid__Auth_Request_Headers__c",auth_request_verb:"skuid__Auth_Request_Verb__c",auth_url:"skuid__Authentication_URL__c",credential_source:"skuid__Credential_Source__c",data_service_id:"skuid__Data_Service_Id__c",data_service:"skuid__Data_Service__r",external_id:"skuid__External_Id__c",id:"Id",is_active:"skuid__Active__c",name:"Name",password:"skuid__Password__c",request_body_parameters:"skuid__Request_Body_Parameters__c",request_headers:"skuid__Request_Headers__c",request_url_parameters:"skuid__Request_URL_Parameters__c",url:"skuid__URL__c",username:"skuid__Username__c",use_proxy:"skuid__Use_Apex_Proxy__c",type:"skuid__Adapter_Name__c"},data_source_credential:{id:"Id",password:"skuid__Password__c",user_id:"skuid__Applies_To__c",username:"skuid__Username__c"},page:{api_version:"skuid__API_Version__c",composer_settings:"skuid__Composer_Settings__c",id:"Id",is_master_page:"skuid__IsMaster__c",master_page:"skuid__MasterPage__r",master_page_id:"skuid__MasterPage__c",max_auto_saves:"skuid__Max_Auto_Saves__c",module:"skuid__Module__c",name:"Name",updated_at:"LastModifiedDate"},page_version:{api_version:"skuid__API_Version__c",description:"skuid__Description__c",id:"Id"},profile:{id:"Id",name:"Name"},static_resource:{id:"Id",name:"Name",namespace:"NamespacePrefix",content_type:"ContentType"},theme:{id:"Id",name:"Name",resource_name:"skuid__Resource_Name__c",resource_namespace:"skuid__Resource_Namespace__c",type:"skuid__Type__c",version_date:"skuid__Skuid_Version_Date__c",active:"skuid__Active__c"}}},2:function(e){e.exports={v1:{id:"v1",isLegacy:!0,isLatest:!0,path:"v1",released:!0},v2:{id:"v2",path:"next",released:!1}}},4:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),d=r(i(5)),o=r(i(6));function r(e){return e&&e.__esModule?e:{default:e}}var p=skuid.utils,h=skuid.$L,m=skuid.$,g=p.getDefaultImageUrl,f=p.encodeHTML,s=p.isString,a=function(){function c(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var e=this,n=e.fileController=this.initializeFileController(t,i),o=n.uploadMethod,r=n.dataSource,a=n.row,s=n.model,l=n.canCreateOrUpdateImage,u=n.canUpload;if(!n.initialized){if(n.isNewRow)var d=skuid.events.subscribe("models.saved",function(e){s&&s.id in e.models&&(s.isRowNew(a)||(t.empty(),new(skuid.platform.FileComponent||c)(t,i),skuid.events.unsubscribe(d)))});return t.text(n.error),!1}t.data("object",e).addClass("nx-fileupload"),e.elem=t,e.options=i,e.buttonText=i.label||h("Upload"),e.dataSource=r,e.canCreateOrUpdateImage=l,e.uploadMethod=o,e.canUpload=u,t.off("imageuploadcomplete imageuploadstarted mouseenter mouseleave click drop dragleave dragenter dragover"),e.instantiateUploader(),e.initialSetup()}return n(c,[{key:"instantiateUploader",value:function(){var e,t,i=this,n=i.fileController,o=n.canCreateOrUpdateImage,r=n.fieldName,a=n.saveTo,s=n.model,l=n.row,u=i.canUpload;(o||"field"===a)&&(i.uploader=new d.default(n),u?(i.uploader.attach(i),l&&s.getRowId(l)&&i.uploader.setSource({row:l,model:s},i.elem,r)):i.elem.text((e=p.isApiEnabled(),t=p.isFileAPISupported(),e||t?e&&!t?"Your browser does not support HTML5 file uploads.":!e&&t?"You do not have permission to upload files using the API.":void 0:"You either do not have permission to upload files using the API, or your browser does not support HTML5 file uploads."))),i.uploader&&u||(i.canCreateOrUpdateImage=n.canCreateOrUpdateImage=!1)}},{key:"initialSetup",value:function(){var s=this,l=this,e=l.elem,u=l.uploadMethod,t=l.canCreateOrUpdateImage,i=this.fileController,n=i.fileId,d=i.displayAs,o=i.deletable,r=i.model,a=i.editable;if(l.status=m("<div>").addClass("nx-fileupload-status").css({float:"none",display:"inline-block"}).appendTo(e).hide(),l.statustext=m("<div>").appendTo(l.status),"filename"===d||u.forceStoreAsFileName){var c=void 0,p=void 0;if(!1!==t&&l.uploader&&(p=m("<div>"),l.progressParentDiv=p,skuid.mobile?(p.addClass("sm-button").css("display","inline-block"),c=new skuid.mobile.ui.Button({icon:"fa-plus",label:l.buttonText,element:p,iconColor:"green"}),p.on("tap",function(){l.uploader.pickFile()})):p.text(l.buttonText).css("vertical-align","top").skooButton({icon:"sk-icon-upload"}).click(function(e){e.stopPropagation(),l.uploader.pickFile()}),p.appendTo(e)),skuid.mobile||(l.status.addClass("nx-actionselect nx-status").css({"margin-left":"4px","word-break":"break-all"}),l.statustext.addClass("nx-actionselect-text")),r&&r.updateable&&o){if(skuid.mobile){l.deletebutton=m('<div class="sm-button">');var f=new skuid.mobile.ui.Button({icon:"fa-minus",element:l.deletebutton,iconColor:"red"});l.deletebutton.on("tap",function(){f.startProcessing(),l.deleteImage()}),e.on("imagedeletecomplete",function(){f.stopProcessing()})}else l.deletebutton=m('<div class="sk-icon inline sk-icon-delete">').css({border:"3px solid #EEE","vertical-align":"top","background-color":"#EEE","margin-top":"3px",cursor:"pointer"}),l.deletebutton.click(function(){l.deleteImage()});l.deletebutton.css("display","inline-block").appendTo(e)}e.on("imageuploadstarted",function(e,t){s.fileController.supportsDragAndDrop||(s.fileName=t.fileName),s.setStatus(skuid.label.merge(h("Uploading"),t.fileName||"")),l.status.off("click.skuid"),c&&c.startProcessing()}),c&&e.on("imageuploadcomplete",function(){c.stopProcessing()})}else"image"===d&&((l.progressParentDiv=e).children(".nx-edithover").remove(),e.addClass("nx-attachmentimage"),l.defaultImageSrc=g(l.options.defaultImage||"person"),l.image=m("<img>").addClass("nx-attachmentimage-image").css("max-width","100%").appendTo(e),!1!==t&&e.on("mouseenter",function(){a&&l.uploader&&l.elem.append(m("<div>").addClass("nx-edithover sk-icon inline sk-icon-edit").css({"background-color":"white",opacity:"0.8",border:"4px solid white"}).click(function(e){l.elem.find(".nx-error").remove(),l.uploader&&l.uploader.pickFile(),e.stopPropagation()})),u.needsFieldContext&&!n||!o||l.imageError||e.append(m("<div>").addClass("nx-edithover sk-icon inline sk-icon-delete").css({cursor:"pointer","background-color":"white",opacity:"0.8",border:"4px solid white",left:"4px"}).click(function(e){l.elem.find(".nx-error").remove(),l.deleteImage(),e.stopPropagation()}))}).on("mouseleave",function(){l.elem.find("div.nx-edithover").remove()}));e.on("imageuploadcomplete",function(e,t){l.fileController.uploadFinished(t);var i,n=t&&(t.newFileId||t.newAttachmentId),o=l.fileController,r=o.fileId,a=o.fileName;n&&l.draw(),t&&t.message?(i={text:t.message,hideIn:4},r&&a&&"image"!==d&&(i.complete=function(){s.setStatus(a)}),s.setStatus(i)):u.needsFieldContext||s.setStatus({text:h("Upload_Successful"),hideIn:2})}),l.draw()}},{key:"draw",value:function(){var n=this,o=n.uploadMethod,e=this.fileController,r=e.fileId,a=e.fileName,t=e.displayAs,i=e.fieldName,s=e.deletable,l=e.cacheBuster,u=n.elem,d=l?"&cachebuster="+l:"";n.imageError=!1;var c=function(){if(r){var t,i=m("<img>").css({"max-height":"600px","max-width":"800px"}),e=n.image&&n.image.attr("src");e?i.attr("src",e):o.getSrc&&o.getSrc({context:{id:r},component:n.fileController.getComponent(),paramString:d,dataSource:o.dataSource}).then(function(e){t=e,i.attr("src",e)},function(){i.attr("src","")}),i.load(function(){var e=m("<div>").attr("title",f(a)).append(i).dialog({close:function(){m(this).remove()},modal:!0,width:"auto",resizable:!1,open:function(){m(".ui-widget-overlay").on("click",function(){e.dialog("close")})},dialogClass:"nx-imageview"})}),i.error(function(){t&&skuid.dataSource.utils.downloadWithLink(a,t)})}};if("filename"===t||(o||{}).forceStoreAsFileName)r&&a&&i?(n.setStatus(a),n.status.off("click.skuid").on("click.skuid",function(){c()}),s&&n.deletebutton&&n.deletebutton.show()):(n.deletebutton&&n.deletebutton.hide(),n.status.hide());else if("image"===t){if(r||!o.needsFieldContext){var p={};r&&(p.id=r),o.getSrc&&o.getSrc({context:p,component:n.fileController.getComponent(),paramString:d,dataSource:o.dataSource}).then(function(e){n.image.attr("src",e)},function(){n.image.attr("src","")})}else n.imageError=!0,n.defaultImageSrc&&n.image.attr("src",n.defaultImageSrc);n.image.error(function(){n.imageError||(n.imageError=!0,n.defaultImageSrc&&n.image.attr("src",n.defaultImageSrc))}),u.off("click.skuid").on("click.skuid",function(){c()}),n.status&&n.status.hide()}}},{key:"setStatus",value:function(e){var t,i,n,o=this,r=o.status,a=o.statustext;e&&(s(e)?t=e:(t=e.text,i=e.hideIn,n=e.complete)),r&&a&&(o.statusTimeout&&clearTimeout(o.statusTimeout),skuid.ui.setStatus(r,a,t),0<=i&&(o.statusTimeout=setTimeout(function(){r.animate({opacity:0},{duration:2e3,complete:n||function(){r.hide()}})},1e3*i)))}},{key:"deleteImage",value:function(){var t=this,i=this.fileController.fileId,n=skuid.$.Deferred();return this.fileController.deleteFile({startHook:function(){t.setStatus(h("Deleting"))},endHook:function(e){e&&e.message?t.setStatus({text:e.message,hideIn:2,complete:function(){return t.draw()}}):(t.elem.trigger("imagedeletecomplete",{oldFileId:i}),t.draw()),n.resolve()}}),n.promise()}},{key:"unregister",value:function(){this.elem&&this.elem.remove&&this.elem.remove(),this.uploader&&this.uploader.unregister(this)}},{key:"initializeFileController",value:function(e,t){return new o.default({component:t.component,element:e,context:t.context,model:t.model,row:t.row,dataSource:t.datasource,idField:t.idField,field:t.field,saveTo:t.saveTo,storeAs:t.storeAs,displayAs:t.displayAs,editable:t.editable,deletable:t.deletable,fileName:t.filename,description:t.description,maxFileSize:t.maxFileSize,enforceMaxFileSize:t.enforceMaxFileSize,cacheBuster:t.cacheBuster,snippetName:t.snippetName,autoRefreshModelsOnUpload:t.autoRefreshModelsOnUpload,uploadSuccessActions:t.onUploadSuccessActions,uploadFailureActions:t.onUploadFailureActions,label:t.label})}}]),c}();t.default=a,p.FileComponent=a},5:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}();var o=skuid.utils,f=skuid.$,h=o._ie,r=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.fileController=e,this.uploadMethod=e.uploadMethod,this.canUpload=e.canUpload,this.fileName=e.fileName,this.fileNameOverride=e.fileNameOverride,this.description=e.description,this._GUID=e._GUID,this.progressDiv=f("<div>").addClass("nx-file-progress"),this.dragAndDrop=e.supportsDragAndDrop,e.supportsDragAndDrop?this.iframe=f('<input style="display:none;" type="file" id="'+o.generateUniqueId()+'" multiple>'):this.iframe=f('<iframe style="display:none;" src="" frameborder="0">')}return n(t,[{key:"setSource",value:function(e,t,i){var n=this.uploadMethod;if(!this.dragAndDrop){var o=this.description||"",r=this.fileNameOverride;n&&n.getIframeSrc&&this.iframe.attr("src",n.getIframeSrc(e,t,i,{description:o,fileNameOverride:r}))}}},{key:"pickFile",value:function(){this.dragAndDrop?this.iframe.click():this.iframe.contents().find("input[type=file]").click()}},{key:"startProgress",value:function(){this.fileComponent.progressParentDiv&&this.fileComponent.progressParentDiv.append(this.progressDiv)}},{key:"handleProgress",value:function(e){if(this.fileComponent.progressParentDiv){var t=Math.round(e.loaded/e.total*100);t<100&&this.progressDiv.css("width",t+"%")}}},{key:"endProgress",value:function(){var e=this;this.fileComponent.progressParentDiv&&(this.progressDiv.css("width","100%"),setTimeout(function(){return e.progressDiv.detach()},1e3))}},{key:"uploadFile",value:function(e){var t=this,i=this.fileController,n=this.fileController.element;return i.uploadFile(e,{startHook:function(e){t.startProgress(),n.trigger("imageuploadstarted",e)},progressHook:function(e){t.handleProgress(e)},endHook:function(e){t.endProgress(),n.trigger("imageuploadcomplete",e)}})}},{key:"attach",value:function(e){var t,i,n,o,r,a=this,s=this,l=this.fileController,u=e.elem,d="nx-file-dropping",c=!1;if(s.iframe.appendTo(u),s.element=u,s.fileComponent=e,s.dragAndDrop){i=f(document.body),n=f("<div>").addClass("nx-file-droppable").text(e.buttonText),o=function(e){e.preventDefault();var t=e.originalEvent.dataTransfer?e.originalEvent.dataTransfer.files:e.target.files;l.handleUpload(t,{startHook:function(e){a.startProgress(),u.trigger("imageuploadstarted",e)},progressHook:function(e){a.handleProgress(e)},endHook:function(e){a.endProgress(),u.trigger("imageuploadcomplete",e)}})};var p=function(){r&&clearTimeout(r),r=setTimeout(function(){n.detach(),c=!1,n.removeClass(d)},100)};s.iframe.on("click",function(e){this.value=null,e.stopPropagation()}).on("change",o),u.on("dragover",function(e){h||e.stopPropagation(),e.preventDefault(),e.originalEvent.dataTransfer.dropEffect="copy"}).on("dragenter",function(e){h&&(e.stopPropagation(),e.preventDefault(),p()),n.addClass(d),h&&(c||(u.append(n),c=!0))}).on("dragleave",function(e){h&&(e.stopPropagation(),e.preventDefault()),n.removeClass(d)}).on("drop",o),i.on("dragenter."+s._GUID,function(e){e.preventDefault(),h?(c||(u.append(n),c=!0),p()):(t=e.target,u.append(n))}).on("dragover."+s._GUID,function(e){e.preventDefault(),h&&p()}).on("dragleave."+s._GUID,function(e){h||t!==e.target||(n.detach(),n.removeClass(d))}).on("drop."+s._GUID,function(e){return e.preventDefault(),e.stopPropagation(),n.detach(),n.removeClass(d),t=null,!1})}}},{key:"unregister",value:function(e){var t=e.options._GUID;f(document.body).off("dragenter."+t+" dragleave."+t+" drop."+t)}}]),t}();t.default=r},6:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}();var o=skuid,I=o.$L,N=o.utils,A=o.$,T=N.isFileAPISupported(),r=function(){function P(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,P),this.initialized=!1;var t=e.component,i=e.context,n="object"===x(e.model)?e.model:skuid.$M(e.model),o=t?A(t.xmlDefinition):void 0,r=o?t.createConditionsFromXml(o):null,a=e.row||P.getRow(n,i,r),s=e.dataSource,l=n?n.getDataSource():skuid.dataSource.get(s),u=e.saveTo,d="field"===u,c=e.idField,p=e.storeAs,f=e.deletable||e.deleteable,h=e.editable,m=e.fileName,g=e.fileName,_=void 0,v=void 0,k=void 0,b=void 0,y=T&&(!function(e){if(!e)return!0;var t=e.getDataSourceType();return!!t&&t.isDataSourceNativeSalesforce(e)}(l)||N.isApiEnabled()&&N.userInfo.isAuthenticated);if(!n&&!e.model&&i&&i.model&&(n=i.model),t&&(this.component=t,this._GUID=t._GUID),this.model=n,this.row=a,this.dataSource=l,this.storeAs=p,this.saveTo=u,this._deletable=f,this.editable=h,this.idField=c,this.xmlDef=o,this.dataSourceName=s,this.autoRefreshModelsOnUpload=e.autoRefreshModelsOnUpload,this.field=e.field,this.displayAs=e.displayAs,this.element=e.element,this.cacheBuster=e.cacheBuster,this.description=e.description,this.snippetName=e.snippetName,this.enforceMaxFileSize=!!e.enforceMaxFileSize,this.maxFileSize=parseInt(e.maxFileSize,10),this.defaultMaxFileSizeMessage=I("Error_Exceeds_Max_File_Size"),this.uploadSuccessActions=e.uploadSuccessActions,this.uploadFailureActions=e.uploadFailureActions,l||d)if(b=l.getUploadMethod(p),d&&(b={}),b||d)if(this.uploadMethod=b,n||!b.needsRecordContext)if(!b.needsRecordContext||a){var S=!0;if(b.needsRecordContext){if(!n.accessible)return void this.addError("You do not have permission to upload files to this record.");if(n.isRowNew(a))return this.addError("This record must be saved before you can upload files."),void(this.isNewRow=!0)}if(b.needsFieldContext){if(!(k=c))return void this.addError("No image field was specified");_=n.getFieldValue(a,k),v=this.getFileId(b,k,n,a),m=this.getFileName(b,k,n,a);var w=n.getField(k);S=n.accessible&&(h||f)&&(n.updateable&&w.editable||_)}this.canUpload=!1,this.supportsDragAndDrop=y,b.supportsIframeUpload&&b.supportsIframeUpload()?this.canUpload=!0:y&&(this.canUpload=!0),this.fieldValue=_,this.fileId=v,this.fileName=m,this.fileNameOverride=g,this.fieldName=k,this.canCreateOrUpdateImage=S,this.initialized=!0}else this.addError("No record found for file component.");else this.addError("This upload method requires a record context, but could not find one.");else this.addError(skuid.label.merge(I("Error_Could_Not_Find_Upload_Method"),p));else this.addError(skuid.label.merge(I("Error_Invalid_File_Upload_Data_Source"),s))}return n(P,[{key:"addError",value:function(e){this.error=e}},{key:"shouldSaveToField",value:function(){return"field"===this.saveTo}},{key:"getFileId",value:function(e,t,i,n){var o=e.getFileIdField&&e.getFileIdField(t);return i.getFieldValue(n,o)}},{key:"getFileName",value:function(e,t,i,n){var o=e.getFileNameField&&e.getFileNameField(t);return i.getFieldValue(n,o)}},{key:"handleUpload",value:function(){var t=this,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if("field"===this.saveTo){n.startHook&&n.startHook({fileName:i[0].name});var o=this.model,r=this.row,a=this.field,e=new FileReader;return e.onload=function(e){var t={};t[a]=e.target.result,o.updateRow(r,t),n.endHook&&n.endHook({newFileName:i[0].name})},void e.readAsText(i[0])}if(i.length){var s=void 0;Array.from(i).forEach(function(e){s=s?s.then(function(){return t.uploadFile(e,n)}):t.uploadFile(e,n)})}return!1}},{key:"uploadFile",value:function(e){var t=this,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=skuid.$.Deferred(),o=this.dataSource,r=this.getOptions(),a=this.getComponent(),s=function(e){i.startHook&&i.startHook(e)},l=function(e){i.endHook&&i.endHook(e),e&&e.message?n.reject(e.message):n.resolve()},u=function(e){i.progressHook&&i.progressHook(e)};if(this.enforceMaxFileSize&&e.size>this.maxFileSize){var d=skuid.label.merge(this.defaultMaxFileSizeMessage,e.name,function(t){var e=[{value:"000000000",label:"GB"},{value:"000000",label:"MB"},{value:"000",label:"KB"},{value:"",label:"B"}].find(function(e){return t.endsWith(e.value)});return""+t.substring(0,t.length-e.value.length)+e.label}(""+this.maxFileSize));i.endHook({message:d})}else o.authenticate().then(function(){t.uploadMethod.upload(e,a,r,s,l,u)},function(e){i.endHook({message:e})});return n.promise()}},{key:"uploadFinished",value:function(e){var n=this,o=void 0,t=e&&(e.newFileId||e.newAttachmentId),i=new Date;this.cacheBuster=i.getTime(),e&&e.newFileName&&this.uploadMethod.needsFieldContext&&(this.fileName=e.newFileName),t&&(this.fileId=t,this.fieldValue=e.newFieldValue||e.newImageId,this.syncModel()),e&&e.message?(this.fileId&&this.fileName&&"image"===this.displayAs&&!this.fileId&&this.fileName&&(this.fileName=""),this.uploadFailureActions&&skuid.actions.runActionsNode(this.uploadFailureActions,this,{model:this.model,row:this.row,$Error:{Message:e.message}})):(this.uploadMethod.needsFieldContext||this.uploadMethod.canRunPostUploadSnippet&&this.snippetName&&skuid.snippet.get(this.snippetName)(e),this.uploadMethod.relatedObjectName&&this.autoRefreshModelsOnUpload&&(o=[],skuid.model.list().forEach(function(e){var t=e.objectName===n.uploadMethod.relatedObjectName,i=e.dataSource===n.uploadMethod.dataSource;t&&i&&(o.push(e),e.cancel())}),skuid.model.updateData(o)),this.uploadSuccessActions&&skuid.actions.runActionsNode(this.uploadSuccessActions,this,{model:this.model,row:this.row,apiExtensions:{$Result:{body:e&&e.body?e.body:{}}}}))}},{key:"deleteFile",value:function(){var t=this,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=function(e){e&&e.message||(t.fileId=null,t.fileName=null,t.fieldValue=null,t.syncModel()),i.endHook&&i.endHook(e)};this.dataSource.authenticate().then(function(){return i.startHook&&i.startHook(),t.uploadMethod.deleteFile({context:{model:t.model,row:t.row},component:t.getComponent(),dataSource:t.uploadMethod.dataSource})}).then(n).catch(function(e){return n({message:e})})}},{key:"syncModel",value:function(){var e={},t=this.model,i=this.row,n={},o=this.uploadMethod,r=o.getFileIdField&&o.getFileIdField(this.fieldName),a=o.getFileNameField&&o.getFileNameField(this.fieldName),s={};t&&i&&(e[t.getRowId(i)]=n,this.fieldName&&(this.fieldValue===i[this.fieldName]&&this.fileId===t.getFieldValue(i,r,!0)||(n[this.fieldName]=this.fieldValue),N.setObjectProperty(s,r,this.fileId),N.setObjectProperty(s,a,this.fileName),this.fieldValue?(A.each(s,function(e,t){n[e]=t}),A.extend(i,n)):(delete i[this.fieldName],A.each(s,function(e){return delete i[e]})),N.size(n)&&t.notifyFieldsOfChange(e,{initiatorId:this._GUID})))}},{key:"getComponent",value:function(){return{model:this.model,row:this.row,ownerIdField:this.ownerIdField,fieldValue:this.fieldValue,fieldName:this.fieldName,fileId:this.fileId,fileName:this.fileName,options:this.getOptions()}}},{key:"getOptions",value:function(){return{filename:this.fileName,fileNameOverride:this.fileNameOverride,description:this.description,storeAs:this.storeAs,saveTo:this.saveTo,uploadMethod:this.uploadMethod,field:this.field,saveToModel:this.model&&this.model.id,model:this.model,row:this.row,displayAs:this.displayAs,autoRefreshModelsOnUpload:this.autoRefreshModelsOnUpload,idField:this.idField,deletable:this.deletable,editable:this.editable,_GUID:this._GUID,cacheBuster:this.cacheBuster,xmlDef:this.xmlDef}}},{key:"deletable",get:function(){return this._deletable}},{key:"deleteable",get:function(){return this._deletable}}],[{key:"getRow",value:function(e,t,i){var n=void 0;return e&&e.data&&(n=i&&i.length?e.getRows(i,t):t&&e&&t.model&&t.row&&t.model===e?[t.row]:e.getRows(null,t)),n&&n.length?n[0]:null}}]),P}();t.default=r},65:function(e,t,i){"use strict";i.r(t);i(9),i(66)},66:function(e,t,i){"use strict";var n=i(1),s=l(n),o=l(i(7)),r=i(14),a=i(67);function l(e){return e&&e.__esModule?e:{default:e}}var d=skuid.$,u="salesforce",c="skuid__Module__c",p="v1",f={},h={},m=!1,g=!0,_=null;function v(){return skuid.utils}function k(){var e;return(e=skuid.utils).resolve.apply(e,arguments)}function b(){var e=v().apps;return e?e.apps:null}function y(){return v().apps.tabs}function S(n){return d.map(n.tabs,function(e){var t=y()[e],i=n.url&&n.url.slice(-20);return i&&(i=-1===i.indexOf("tsid=")?"":(-1===t.url.indexOf("?")?"?":"&")+i),{label:t.label,link:t.url+i}})}function w(){var e,t=[],i=b(),n=y();return i&&n&&(d.each(i,function(){if(this.isSelected)return e=this,!1}),e&&(t=S(e))),t}function P(e){var t=b();if(!t)return[];e||(e={});var i,n,o=[],r={},a=[],s=e.selectedAppFirst,l=e.withTabs;return d.each(t,function(e,t){if(s&&t.isSelected)n=t;else{var i=t.sortOrder;-1<i&&!r[i]?r[i]=t:a.push(t)}}),(i=Object.keys(r)).sort(function(e,t){return e-t}),n&&o.push(n),d.each(i,function(e,t){o.push(r[t])}),a.length&&o.concat(a),d.map(o,function(e){var t=l?S(e):null;return{label:e.label,link:e.url,items:t}})}function x(){return P({selectedAppFirst:!0})}function I(){return P({withTabs:!0})}function N(){return[{label:"My Profile",link:"/_ui/core/userprofile/UserProfilePage"},{label:"My Settings",link:"/ui/setup/Setup?setupid=PersonalSetup"},{label:"My Data Source Credentials",link:"/apex/skuid__CredentialsManagement"},{label:"My Apps",link:null,items:x},{label:"Salesforce Setup",link:"/setup/forcecomHomepage.apexp?setupid=ForceCom"},{label:"Developer Console",link:"/_ui/common/apex/debug/ApexCSIPage",window:"blank"},{label:"Logout",link:A()}]}function A(){var e=B("prefix"),t="";return e&&(t=v().endsWith(e,"/s")?e.substring(0,e.length-2):e),t+"/secur/logout.jsp"}function T(){return"https://"+skuid.settings.site("instance").toLowerCase()+".salesforce.com/services/apexrest/skuid"}function C(){return T()+"/api/v1/auth/token"}var F={RICHTEXT:{edit:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=d("<div>").append(d('<div class="nx-spinner">')),n=e.value,t=e.field||e.editor||e.component,o=e.onChange,r=e.onCreated,a=e.afterInit,s=i;return d.when(t).then(function(){for(;!t&&s.length;)s=s.parent(),t=s.data("object")||s.data("component")||s.data("editor");return t}).then(function(t){t&&t._richtextInstanceAPI&&(t._richtextInstanceAPI.destroy(),delete t._richtextInstanceAPI);var e=t&&t.getParentPage({root:!0})||i.closest(".nx-page").data("component").getParentPage({root:!0})||skuid.component.getByType("skuidpage")[0];if(e)return e.teleportLightningComponent({type:"lightning:inputRichText",attributes:{value:n,onblur:{run:function(){var e=this._richtextInstanceAPI.get("v.value");if(void 0===e)throw"Unable to get value from Rich Text component.";o&&o(e)}.bind(t)}},children:[{type:"lightning:insertImageButton"}]},i).then(function(e){t._richtextInstanceAPI=e})}).then(function(){i.find("> .nx-spinner").remove(),r&&r(),a&&a()}),i},destroy:function(e){var t=e.field||e.editor||e.component,i=t&&t._richtextInstanceAPI;i&&(i.destroy(),delete t._richtextInstanceAPI)}}};function O(e){var t,i=skuid.page.sitePrefix||"",n=s.default[e.apiVersion||p].path,o=void 0,r=void 0,a=void 0;if(i&&!i.startsWith("/")&&(i="/"+i),v().isObject(e)){if(e.type&&"external"===e.type)return e.url||e.path;o=e.name||e.resource,r=e.namespace||e.ns,a=e.nestedPath||e.path}else o=e;return"skuid"===r&&(o?o.startsWith("js/")&&!a?(a=o,o=n):o.match(/(\.js|\.css)$/i)&&(o=(o=v().capitalizeFirst(o)).replace(/\.js$/i,"JS").replace(/\.css$/i,"CSS")):!o&&a&&a.startsWith("js/")&&(o=n)),t=window.$A.get("$Resource."+(r?r+"__":"")+o),a?v().combineUrls(t,a):t}function M(e){var t=e.split("__"),i=2===t.length,n=i?t[0]:null,o=i?t[1]:t[0],r=(null===_&&skuid.settings&&skuid.settings.site&&(_=skuid.settings.site("namespace")),_);return"$Label."+(i&&n!==r?n+"."+o:"c."+o)}function U(e){return d.when(skuid.remote.promisify.apply(null,[skuid.remote(),e].concat(Array.prototype.slice.call(arguments,1))))}function D(t){var e=h[t];if(e)return e;for(var i=arguments.length,n=Array(1<i?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];return h[t]=U.apply(void 0,[t].concat(n)).then(function(e){return delete h[t],e}).catch(function(e){throw delete h[t],e})}var R={checkNetwork:function(){return U("checkNetwork").catch(function(e){if(v().isString(e)){if(-1<e.indexOf("Logged in?"))return;if(-1<e.indexOf("Could not find an action"))return}throw e})},getDataSourceTypes:function(){return skuid.remote().getDataSourceTypes?D("getDataSourceTypes"):k(skuid.dataSource.listAllTypes().map(function(e){return{label:e.name,value:e.name}}))},getToken:function(){return D("getToken")},componentPack:function(e){return v().isUndefined(e)&&(e=null),U("componentPackService",e)},events:function(){var e=skuid.events,t=e.Event,i=e.EventParameter;return k([{name:"force:closeQuickAction",label:"Lightning: Close Quick Action"},{name:"force:showToast",label:"Lightning: Show Toast Message",parameters:[{name:"title",label:"Title",displayType:"TEXT"},{name:"message",label:"Message",displayType:"TEXT",metadata:{required:!0}},{name:"duration",label:"Duration (milliseconds)",displayType:"INTEGER",metadata:{defaultValue:"5000"}},{name:"type",label:"Type",displayType:"PICKLIST",metadata:{defaultValue:"other",required:!0,picklistEntries:[{label:"Error",value:"error"},{label:"Warning",value:"warning"},{label:"Success",value:"success"},{label:"Info",value:"info"},{label:"Other",value:"other"}]}},{name:"mode",label:"Remains visible until",displayType:"PICKLIST",metadata:{defaultValue:"dismissible",required:!0,picklistEntries:[{label:"User closes OR duration elapses",value:"dismissible"},{label:"Duration elapses - no close button.",value:"pester"},{label:"Until user closes - duration is ignored.",value:"sticky"}]}},{name:"key",label:"Icon",displayType:"TEXT"}]}].map(function(e){return new t(e.name,e.label,(e.parameters||[]).map(function(e){return new i(e.name,e.label,e.displayType,e.metadata)}),{scope:skuid.constants.EVENT_SCOPES.GLOBAL,subscribable:!1})}))},labels:function(e){return function(i){var a=d.Deferred(),s=0,l=40,u=500;return i&&i.length&&(window.$A.get("{!"+i.map(M).join("}{!")+"}"),function e(){var n={},o=!1,r=[];if(i.forEach(function(e){var t=M(e),i=window.$A.get("{!"+t+"}");i?i===t+" does not exist."?(n[e]="",r.push(e)):n[e]=i:o||(o=!0)}),o)l<=s?a.reject("Could not find all requested labels."):(s++,setTimeout(e,u));else{if(r.length){var t=window.$A.get("e.force:showToast");t.setParams({title:"Skuid: Unable to retrieve labels",type:"error",message:"The following requested labels could not be retrieved: "+r.join(", ")}),t.fire()}a.resolve(n)}}()),a.promise()}(e)},meta:function(e){return U("metaService",JSON.stringify(e))},page:function(e,t){return v().isUndefined(t)&&(t=null),U("pageService",e,t).then(function(e){var t=e.masterPageName,i=e.pageAPIVersion,n=e.pageId,o=e.pageLastModifiedDate,r=e.pageLayout;return{metadata:{pageAPIVersion:i,pageName:e.pageName,pageId:n,pageLastModifiedDate:o,masterPageName:t,namespace:e.namespace},xml:r}})},personalization:function(e){return U("personalizationService",JSON.stringify(e))},serviceModstamps:function(){return U("loaderServiceModstamps")},theme:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:p;return U("themeService",JSON.stringify({themeToRequest:e,pageApiVersion:t}))}};var E=void 0;function L(t){var i=skuid.utils.getCacheTimestamp(),n=skuid.storage.getDb("iconsCache"),e=void 0;return n?e=k(n):(e=E||skuid.storage.createDb("iconsCache","IndexedDB",[{name:"svgStrings"}]),E||(E=e)),e.then(function(e){return(n=e).svgStrings.get(t)}).then(function(e){return e&&e.modstamp<i?e.string:v().getBodyOfZIPResourceFile("IconsSVG","skuid",t+"/"+t+".min.svg").then(function(e){return n.svgStrings.add(t,{string:e,modstamp:(new Date).getTime()}),e})})}function j(){return u}function V(){return!0}function H(e){return e&&!0===v().grab(e,"extensions",u,"nativeUiAutoSync")}skuid.events.subscribeOnce("page.rendered",function(){skuid.events.subscribe("models.saved",function(e){var t=["insertResults","updateResults","deleteResults"],i=!1,n=0,o=void 0,r=void 0,a=void 0;e:for(;n<t.length;n++)if((r=e[t[n]])&&r.length)for(o=0;o<r.length;o++)if((a=r[o]).success&&H(skuid.$M(a.source))){i=!0;break e}i&&(m=!0,window.$A.get("e.force:refreshView").fire(),m=!1)})});var B=function(e){return skuid.settings.site(e)};skuid.events.subscribeOnce("skuid.settings.added:site",function(){var e=B("runningOnForceSite"),t=B("baseUrl"),i=B("prefix");v()._setAttachmentBaseUrl(v().combineUrls(t||"","/servlet/servlet.FileDownload?file=blah")),e&&d.extend(skuid.page,{baseUrl:t,runningOnForceSite:e,sitePrefix:i})}),skuid.platform={attemptLogin:function(e){var t,i,n,o=d.Deferred(),r=!1,a=window.Visualforce,s=function(){r||(r=!0,window.confirm('You need to log in again, your session has expired.\n\nPress "OK" to go to the login page now.\n\nPress "Cancel" to remain on this page. Refresh your browser to go to the login page.')&&window.location.reload())};return e?(s(),o.reject()):(t=d.Deferred(),i=setTimeout(t.reject,5e3),n=d('<iframe src="/apex/" width="0" height="0"/>').css("display","none").appendTo(document.body).load(function(){clearTimeout(i),n.remove(),t.resolve()}),t.promise()).then(function(){return d.when.all(d.map(a.remoting.Manager.providers,function(e){return function(e){var t=d.Deferred(),i=setTimeout(t.reject,5e3);return e.refresh(function(){clearTimeout(i),t.resolve()}),t.promise()}(e)}))}).then(function(){o.resolve()},function(){s(),o.reject()}),o.promise()},FileComponent:o.default,get:function(e){return f[e]},getActions:function(){return[{name:"user-logout",label:"Logout",getProperties:function(){return[]},run:function(){window.location.href=A()}}]},getAuthUrl:function(){return T()+"/api/v1/auth/check"},getBasePreviewUrl:function(e,t){var i="/skuid/ui.app?"+(skuid.mobile?"type=Mobile&":"")+"page="+e[r.SCHEMA.page.name];return t&&(i+="&"+t.substring(-1<d.inArray(t.charAt(0),["&","?"])?1:0)),i},getBaseXmlEditorUrl:function(e){return"/apex/skuid__PageXMLEdit?id="+e[r.SCHEMA.page.id]},getBodiesOfZIPResourceFilesWithAjax:function(e,t){var a=[],s=skuid.$,l={};return s.each(v().parseAsJSONIfString(e),function(e,t){var i,n=l[e]={},o=e.split("__"),r=void 0;2===o.length&&(r=o.shift()),i=O({namespace:r,resource:o[0]}),t.forEach(function(t){a.push(s.ajax({cache:!0,method:"GET",url:i+"/"+t}).then(function(e){n[t]=e}))})}),s.when.all(a).then(function(){t(l,{status:"SUCCESS"})}).catch(function(e){t(null,{message:v().isString(e)?e:e.message})})},getDefaultDataService:function(){return d.Deferred().resolve({PLINY_WARDEN_HOST:"gateway-us.skuid.net",PLINY_WARDEN_PORT:"443",PLINY_WARDEN_VERSION:"0.2.4"})},getDefaultDataSourceName:j,getDefaultDataSourceTypeName:function(){return u},getDocsBaseUrl:function(){return"https://docs.skuid.com/latest/"+skuid.version.id+"/en/"},getPageNavigateUrl:function(){return window.location.pathname},getEntityFieldName:function(e,t){return r.SCHEMA[e][t]},getEntityFieldNames:function(e){return r.SCHEMA[e]},getLayoutFields:function(){return["skuid__Layout__c","skuid__Layout2__c","skuid__Layout3__c","skuid__Layout4__c","skuid__Layout5__c"]},getLogoutUrl:A,getMaxProxyRequestPayload:function(){return 65e4},getName:function(){return"lightning"},getNavigationItemSourceTypes:function(){return[{value:"sftabs",label:"Salesforce Tabs for Current App",items:w},{value:"sfapps",label:"Salesforce Apps",items:x},{value:"sfappswithtabs",label:"Salesforce Apps with Tabs",items:I},{value:"sfusermenu",label:"Salesforce User Menu",items:N}]},getOAuthRedirectUri:function(){return window.location.origin+"/skuid/oauthcallback.app"},getOAuthProxyUri:function(){return window.location.origin+"/skuid/oauthproxy.app"},getPageAPIVersions:function(){return n.apiVersionsArray},getPageComposeUrlById:function(e){return"/apex/skuid__PageBuilder?id="+e},getPageComposeUrlByName:function(e,t){return"/apex/skuid__PageBuilder?pagename="+e+(t?"&pagemodule="+t:"")},getPublicKeyEndpoint:function(){return C()},getRenderers:function(){return F},getResourceUrl:O,getSiteResourceUrl:function(e){return O(e)},getTokenURL:C,handleLightningRefreshViewEvent:function(){if(!m){var e=skuid.dataSource.get(u);e&&e.reloadModels(H)}},hasFeature:function(e){return skuid.features&&skuid.features.hasOwnProperty(e)},isPlatformSessionError:function(e,t){var i=!1;return t.name===j()&&(e&&-1!==e.indexOf("Logged in?")?i=!0:e&&-1!==e.indexOf("Page not allowed for the profile")?i=!0:e&&-1!==e.indexOf("Remoting request invalid")&&(i=!0)),i},preloadIconSetDependencies:function(e){return g?function(e){return d.get({cache:!0,dataType:"xml",url:O({ns:"skuid",name:"IconsSVG",path:e+"/"+e+".min.svg"})})}(e).catch(function(){return g=!1,skuid.runtime.cache.set("canAccessIconsViaAJAX",!1),L(e)}):L(e)},recordUsage:function(){},requiresClientSideModelLoading:V,requiresSerializedProxyRequests:V,services:R,set:function(e,t){f[e]=t}},skuid.platform.builder={getProtectedModules:function(){return skuid.builder.core.protectedModules},getPageModule:function(e,t){return e.getFieldValue(t,c,!0)||""},getPageIncludeTypes:function(){return[{label:"Skuid Page",value:"skuid"},{label:"Page Assignment",value:"assignment"}]},getModuleEntries:function(e){return skuid.$.map(e.getField(c).picklistEntries,function(e){return{value:e.value,label:e.label,disabled:!1===e.active,defaultValue:e.defaultValue}})},getAvailableComponentPacks:function(){return skuid.builder.core.availablePacks},getPageSelectProperty:function(t){return{id:t.id,type:"autocomplete",sobject:"skuid__Page__c",dataSource:t.dataSource,fieldsToReturn:["Name","skuid__Module__c","skuid__API_Version__c"],fieldsToSearch:["Name","skuid__Module__c"],displayTemplate:"{{Name}}{{#skuid__Module__c}} ({{skuid__Module__c}}){{/skuid__Module__c}}",valueTemplates:t.valueTemplates||{pagename:"{{Name}}",module:"{{skuid__Module__c}}"},order:"Name",filter:function(e){return e&&e.length?e.filter(function(e){return"Skuid"!==e.skuid__Module__c&&(!t.sameVersionOnly||e.skuid__API_Version__c===p)}):e},label:t.label,helptext:t.helptext,required:!0,onChange:t.onChange||function(){}}},getStaticResourceProperty:function(e){return{id:e.id,type:"autocomplete",sobject:"StaticResource",fieldsToReturn:["Name","NamespacePrefix","ContentType"],fieldsToSearch:["Name","NamespacePrefix"],displayTemplate:"{{Name}}{{#ContentType}} ({{ContentType}}){{/ContentType}}",valueTemplates:e.valueTemplates,order:"Name",label:"Resource Name",helptext:e.helptext,required:e.required||!1,onChange:e.onChange||function(){}}},getNestedPathProperty:function(t){return{id:t.id||"filepath",type:"filepath",label:"File Path (within ZIP Static Resources)",helptext:"The desired file's relative location within Static Resources that are .zip files. Do not use unless your Static Resource is a ZIP file.",divisionSize:"2",getResourceName:function(){var e=t.state.attr(t.nameProperty).split("__");return e[e.length-1]},getResourceNamespace:function(){return t.state.attr(t.namespaceProperty)||null},onChange:t.onChange||function(){}}}},skuid.platform.themeBuilder={getThemeData:function(e,t){var i=d.Deferred();return skuid.ThemeComposerController.bootstrap(JSON.stringify({resourceName:e.Name,resourceNamespace:e.NamespacePrefix}),function(e){t&&t(e),i.resolve(e)},{escape:!1}),i.promise()},getThemeResourceUrl:function(e){return skuid.platform.getResourceUrl(e)},getResource:function(e,t){return v().getBodyOfZIPResourceFile(e.Name,e.NamespacePrefix,t)},saveTheme:function(e,t,i){var n={Id:e.resourceId||i.Id,Body:t};return new skuid.sfdc.api.SObject("StaticResource",n).update()}},skuid.sfdc.search=function(){var t=skuid.dataSource.get(u),e=arguments;function i(){return t.search.apply(t,e)}return t?i():skuid.loader.service.loadDataSourceAndDependencies(u).then(function(e){return t=e,i()})},(0,a.exposeLightningApis)(skuid)},67:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.exposeLightningApis=function(n){var e=n.lightning;e||(e=n.lightning={});e.hasOwnProperty(o)||Object.defineProperty(e,o,{get:function(){for(var e=n.component.getByType("skuidpage"),t=0;t<e.length;t++){var i=e[t].getLightningWorkspaceApi();if(i)return i}throw Error("Lightning Workspace API is not defined.")}})};var o="workspaceAPI"},7:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),s=function e(t,i,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,i);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,i,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0},r=i(4),l=(n=r)&&n.__esModule?n:{default:n};var u=skuid.$,d=skuid.utils,c=skuid.constants.LOG_LEVELS,a=function(e){function a(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,t))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,l.default),o(a,[{key:"instantiateUploader",value:function(){this.shouldUseLightningUploader()||s(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"instantiateUploader",this).call(this)}},{key:"initialSetup",value:function(){if(this.shouldUseLightningUploader()){var o=this,e=o.fileController,t=o.elem,i=e.model,n=e.row,r=e.component.getParentPage({root:!0});o._lightningComponent&&(o._lightningComponent.destroy(),o._lightningComponent=void 0),o.destroyFlag=!1,u.when().then(function(){return t.empty(),r.teleportLightningComponent("lightning:fileUpload",{label:o.buttonText,recordId:a.getRecordIdForLightningFileUpload(i,n),onuploadfinished:function(e,t){var i=t.getParam("files"),n=!0;i.length&&0<i.length?i.forEach(function(e){e.documentId||(n=!1)}):n=!1,n?o.fileController.uploadFinished():o.fileController.uploadFinished({message:"Error uploading file."})}},t)}).then(function(e){o._lightningComponent=e,!0===o.destroyFlag&&(o._lightningComponent.destroy(),o.destroyFlag=!1)}).catch(function(e){d.log(e,c.WARNING),t.text("Error generating Lightning File component")})}else s(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"initialSetup",this).call(this)}},{key:"draw",value:function(){this.shouldUseLightningUploader()||s(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"draw",this).call(this)}},{key:"unregister",value:function(){s(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"unregister",this).call(this),this.shouldUseLightningUploader()&&(this._lightningComponent?(this._lightningComponent.destroy(),this.destroyFlag=!1):this.destroyFlag=!0)}},{key:"shouldUseLightningUploader",value:function(){if(void 0!==this.useLightningUploader)return this.useLightningUploader;var e=this.fileController.xmlDef,t=!(!e||"true"!==e.attr("uselightninguploader")),i=!(!e||!e.parents("popup").length);return this.useLightningUploader=!(!(this.uploadMethod&&this.uploadMethod.supportsLightningUploader&&d.inPlatform(skuid.constants.LIGHTNING)&&t)||i)}}],[{key:"getRecordIdForLightningFileUpload",value:function(e,t){return e&&t?e.getRowId(t):d.userInfo.userId}}]),a}();t.default=a},9:function(e,t,i){"use strict";!function(p){var f,h,m,g=p.$,e=p.sfdc.weblink={};function _(e){e&&(e instanceof Array?e.length&&g.each(e,function(){f.push(this)}):f.push(this))}function v(e){return e in h}function t(){f=[],h={},m={}}t(),e.get=function t(e){var i,n,o=e.weblinkName,r=e.objectName,a=e.namespacePrefix,s=e.callback,l=g.Deferred();if(o&&r&&g.each(f,function(e,t){if(t.Name===o&&t.PageOrSobjectType===r){if(a===t.NamespacePrefix)return n=t,!1;t.NamespacePrefix&&(i=t)}}),!n&&i&&(n=i),n||!0===e.didQuery||v(r))l.resolve(),s&&s(n);else{var u,d=m[r],c=!1;d||(d=m[r]=[],c=!0),d.push(e),u={objectNames:[r]},p.page.language&&(u.languages=[p.page.language]),c&&p.remote.promisify(p.remote(),"getWeblinks",JSON.stringify(u)).then(function(e){h[r]=1,e&&e.length&&_(e),d.forEach(function(e){e.didQuery=!0,t(e)}),delete m[r]}).catch(function(){l.resolve(),d.length&&d.forEach(function(e){e.callback&&e.callback(null)}),delete m[r]})}return l},e.getLabel=function(e){var t=e.Localization;return t&&t.records?t.records[0].Value:e.MasterLabel},e.getAllForObject=function(e){var t=[];return f.length&&g.each(f,function(){this.PageOrSobjectType===e&&t.push(this)}),t},e.add=_,e.haveQueriedForObject=v,e.resetCaches=t}(skuid)}});