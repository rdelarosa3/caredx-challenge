!function(n){var a={};function i(e){if(a[e])return a[e].exports;var t=a[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=n,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=348)}({348:function(e,t,n){"use strict";!function(s){var T=s.$,i=T.map,I=T.each,O=s.utils,u=O.parseAsJSONIfString,d=T.isPlainObject,e=s.dataSource,x=e.utils,t=s.constants,n=t.DISPLAY_TYPES,a=t.HTTP_VERBS,p=O.grab,r="AmazonDynamoDB",y="application/json",o=n.ARRAY,c=n.BOOLEAN,l=n.DOUBLE,f=n.NUMBER,m=a.POST,b={S:"TEXT",N:l,BOOL:c,B:"TEXT",NS:o,SS:o,L:o,M:"OBJECT",NULL:c},S={},N=O.setObjectProperty,v=O.getObjectProperty;S[f]="N",S[l]="N",S[c]="BOOL",S.TEXT="S",S[o]="L",S.OBJECT="M";var P={S:!0,N:!0,B:!0};function h(e,t,n,a){var i,r={method:e};return n&&(r.body=n),a&&(i=t.getCacheProperty(JSON.stringify(r)))?T.when(u(i)):s.ajax.direct({url:"/core/data/aws",type:"POST",body:r,contentType:"application/json",headers:{"x-skuid-data-source-name":t.name}}).then(function(e){return a&&t.setPersistentCacheProperty(JSON.stringify(r),e.body),u(e.body)},function(e){var t=e.status;try{var n=JSON.parse(e.body);n&&n.message&&(t+=": "+n.message)}catch(e){}throw t})}function E(){var e=0;return function(){return e++}}function A(e){return e&&(e.dynamotype||S[e.displaytype])||"S"}function M(n,e){var t=i(e.fieldsMap,function(e){if(e.key)return e.id}),a="";return I(t.sort(),function(e,t){a+=JSON.stringify({v:n[t]})}),a}if(!e.getDataSourceType(r)){var g={"=":"=","!=":"<>",gt:">",lt:"<",gte:">=",lte:"<="};new e.core.RESTDataSourceTypeBase({name:r,updateFieldMetadata:function(){},coerceRequest:function(e){var t=e.type,u=e.model,n=u?u.getDataSource().name:null,a=e.request,r=e.row,i=this.getEntityMetadataCacheKey(u),o="delete"===t,s="query"===t,d="insert"===t,c="update"===t,l={},f=function(){var i={},r={},o={},t=[];return{addSubName:function(e,t,n,a){return o[n]=1,i[t]?i[t]:a?e:(r[e]=t,i[t]=e)},getMap:function(){return r},getFinalMap:function(){return T.each(t,function(e,t){delete r[t]}),r},getInverseMap:function(){return i},candidateForRemoval:function(e){t.push(e)},getFieldsAccountedFor:function(){return o}}}(),p={},y="",m={TableName:i,ExpressionAttributeNames:f,ExpressionAttributeValues:p},b=E();if(s&&(a.data=k(e,m)),d&&(I(a.data,function(e,t){if(O.isObject(t))return K(e,t,l,u);var n=u.fieldsMap[e];if(n){var a={},i=A(n);t=P[i]?t+"":t,a[n.dynamotype||"S"]=t,l[e]=a}}),m.Item=l,e.ItemJustAdded=l,a.data={method:"putItem",body:m}),(c||o)&&(I(u.fields,function(e,t){if(t.key){var n={},a=t.dynamotype||"S",i=r[t.id];i=P[a]?i+"":i,n[a]=i,l[t.id]=n}}),m.Key=l),c){var v=O.getModelFieldIdChanges(a.data),h={},g={};I(v,function(e,t){var n=":arg"+b(),a=u.fieldsMap[e];if(a){var i=function(a,i,r){var o="";return I(O.getUnescapedParts(a),function(e,t){var n="#subName"+r();o&&(o+="."),n=i.addSubName(n,t,a),o+=n}),o}(e,f,b),r={},o=a.dynamotype||S[a.displaytype]||"S";r[o]=P[o]?t+"":t,p[n]=r,1<i.split(".").length?(N(h,i,n),g[i]=e):(y=y?y+", ":"SET ",y+=i+" = "+n)}}),m.UpdateExpression=y,m.ReturnValues="ALL_NEW",Object.keys(h).length&&(m.UpdateExpression=q(h,g,function(e,t){return B(e),(e.originalItemPayloadDigest||{})[M(t,e)]}(u,r),m,b)),a.data={method:"updateItem",body:m}}o&&(a.data={method:"deleteItem",body:m}),m.ExpressionAttributeNames=m.ExpressionAttributeNames.getFinalMap(),a.data.body&&(a.data.body=x.trimEmptyParameters(a.data.body)),T.extend(a,{headers:{"x-skuid-data-source-name":n},method:"POST",url:"/core/data/aws"})},getConditionSourceProperties:function(e,t){var n=s.builder.core;return"propsonly"===t.renderMode?n.getConditionParameterProperties(e,{url:t.url}):[]},getExtendedModelProperties:function(e,t,n,a){var i=s.builder.core.createDSTSpecificProp,r=a.getCachedEntityMetadata(e),o=p(r,"_m","secondaryIndexNames")?function(e){var t=[];if(e)return e.forEach(function(e){t.push({label:e,value:e})}),t}(r._m.secondaryIndexNames):null,u=[{label:"Primary Index",value:""}];if(o)return{basic:[i({id:"indexby",type:"picklist",label:"Query by Index",picklistEntries:u=u.concat(o),defaultValue:"",helptext:"If querying by a secondary index, please specify the IndexName you are querying against."},a.dataSourceType,n)]}},getRowId:M,getPaginationToken:function(e){return u(e.body).LastEvaluatedKey},applyPaginationToken:function(e,t){p(e,"data","body")&&(e.data.body.ExclusiveStartKey=t)},parseSuccessfulLoadResponse:function(e,t,n,a){var i=u(e.body),r=t.pathToContent,o=r?O.getObjectProperty(i,r):i;return n.originalItemPayload=o,this.getKeyFieldsFromMetadata(a,n),T.isArray(o)?o.map(function(e){return _(e,a.fieldsMap)}):[]},postSaveHook:function(e,t){var n,a=e.body,i=t.model;B(i);var r=i.originalItemPayloadDigest||{};"update"===t.type?r[M(n=_(a.Attributes,i.fieldsMap),i)]=n:"insert"===t.type?(r[M(n=_(t.ItemJustAdded,i.fieldsMap),i)]=n,delete t.ItemJustAdded):"delete"===t.type&&delete r[t.originalRecordId]},getKeyFieldsFromMetadata:function(t,e){e.fields&&t.fields&&I(e.fields,function(e,n){n.key&&I(t.fields,function(e,t){if(n.id===t.id)return T.extend(t,n),-1})})},getEntityList:function(e){return h("listTables",e.dataSource).then(function(e){return i(e.TableNames,function(e){return{value:e,label:e}})})},setDefaultConditionState:function(e){e.sourceType="fieldvalue",e.type="fieldvalue",e.operator="=",e.encloseValueInQuotes=!0},queryEntityMetadata:function(d,e){var c,l,f=this.getEntityMetadataCacheKey(d);return f?T.when.all([h("describeTable",e.dataSource,{TableName:f},!0).then(function(e){c=e}),h("scan",e.dataSource,{TableName:f,Limit:25},!0).then(function(e){l=e})]).then(function(){var e=c.Table.AttributeDefinitions,r=[],o={},t=function(e,t){var n=t.Table.KeySchema,a=t.Table.GlobalSecondaryIndexes,i=t.Table.LocalSecondaryIndexes,r=[],o={};return a&&a.forEach(function(e){r.push(e.IndexName),R(e,o),n=n.concat(e.KeySchema)}),i&&i.forEach(function(e){r.push(e.IndexName),R(e,o),n=n.concat(e.KeySchema)}),n=O.keyBy(n,"AttributeName"),{secondaryIndexNames:r,secondaryIndexNameToFieldMap:o,keySchema:n}}(0,c),u=t.keySchema,n=t.secondaryIndexNames,a=t.secondaryIndexNameToFieldMap;p(d,"fields","length")&&I(d.fields,function(e,t){o[t.id]=t,r.push(t)}),I(e,function(e,t){var n=t.AttributeName,a=u[n],i=o[n];i?(T.extend(i,{omittable:!1,dynamotype:t.AttributeType,createable:!0,editable:!1,key:a&&a.KeyType,required:!0}),i.label||(i.label=t.AttributeName),i.displaytype||(i.displaytype=b[t.AttributeType])):(i={id:t.AttributeName,label:t.AttributeName,displaytype:b[t.AttributeType],dynamotype:t.AttributeType,createable:!0,editable:!1,filterable:!0,groupable:!1,omittable:!1,key:a&&a.KeyType,required:!0},r.push(i)),i.accessible=!0});var i=T.map(l.Items,function(e){return _(e,{},!0)}),s={};return T.each(i,function(e,t){T.each(t,function(e,t){s[e]||(s[e]=t)})}),T.each(s,function(e,t){if(!u[e]){var n=o[e],a=b[t];if(n){var i={dynamotype:t,displaytype:a,createable:!0,editable:!0,required:!1};T.each(i,function(e,t){O.isUndefined(n[e])&&(n[e]=t)})}else(function(e,t){var n=!0;return e.filter(function(e){0!=(e.id===t).length&&(n=!1)}),n})(r,e)&&r.push({id:e,displaytype:a,createable:!0,editable:!0,filterable:!0,required:!1,label:e,dynamotype:t})}}),function(e,t){for(var n in e)e[n].indexesFound=[],t[e[n].id]&&(e[n].indexesFound=t[e[n].id])}(r,a),{secondaryIndexNames:n,secondaryIndexNameToFieldMap:a,label:f,labelPlural:f,fields:r,methods:{query:{url:"",verb:m,contentType:y,pathToContent:"Items"},insert:{url:"",verb:m,contentType:y,receiveDataAs:"recordinbody",successIf:"requestsucceeds",successField:"ok",successValue:"true"},update:{url:"",verb:m,contentType:y,receiveDataAs:"recordinbody",successIf:"requestsucceeds"},delete:{url:"",verb:m,contentType:y,successIf:"requestsucceeds"}}}}):T.Deferred().reject("No Entity was selected for this Model.").promise()},shouldIgnoreCache:function(){return!1},extendedProperties:{composer:{unomittableFields:!0,hasEntityOptions:!0,modelConditionLabel:"Condition",modelConditionsLabel:"Conditions",canFieldsBeSelected:function(){return!0},validConditionOperators:function(e,t){var n=e.find("field#"+t.attr("field")),a=e.attr("x-entityname"),i=s.dataSource.getDataSource(e.attr("datasource")),r=["","=","!=","gt","lt","gte","lte","in","not in","starts with","contains","does not contain","does not start with"];if(!i||!n.length||!a)return r;var o=i.entityMetadataCache[a];if(!o)return r;var u=o.getField(t.attr("field"));return u&&u.key?"HASH"===u.key?["="]:["=","gt","lt","gte","lte","starts with"]:r}},runtime:{metadataSource:"hybrid"},canConditionsBeGrouped:!1,canAutoGenerateConditionsFromFields:!0,initializeConditionLogic:!1,hasDefaultSearch:!0,canServerSearch:!0}})}function j(e,t,n,a){return a?"!="===n?"attribute_exists("+e+")":"attribute_not_exists("+e+")":g[n=n||"="]?e+" "+g[n]+" "+t:"contains"===n?"contains ("+e+", "+t+")":"does not contain"===n?"NOT (contains ("+e+", "+t+") ) ":"starts with"===n?"begins_with ("+e+", "+t+")":"does not start with"===n?"NOT (begins_with ("+e+", "+t+") ) ":"in"===n?e+" IN ("+t.join(", ")+")":"not in"===n?"NOT ("+e+" IN ("+t.join(", ")+") ) ":void 0}function F(p,y,m,b){var v=!0,e=p&&p.conditions||[],t=m.FilterExpression||"",h=m.KeyConditionExpression||"",g=m.ExpressionAttributeValues,x=m.ExpressionAttributeNames,n=p.conditionLogic||"",S=[],N=C(p),E=s.model.getCustomPropertyValue(p,"indexby");return I(e,function(e,t){var n=t.field,a=y[n],i=!!p.fieldsMap[n]&&N[n],r=t.operator,o="blank"===t.type,u="multiple"===t.type;if(O.isObject(y[n])&&y[n].hasMultipleOfSameField&&(a=y[n].values.shift()),!t.inactive&&void 0!==a&&i){var s,d=[],c={},l=A(i);o||(u?I(a,function(e,t){var n=":arg"+b();(c={})[l]=P[l]?t+"":t,g[n]=c,d.push(n)}):(s=":arg"+b(),(c={})[l]=P[l]?a+"":a,g[s]=c));var f=D(n,x,b,m,!0);i.key&&function(t,e){var n=!1;if(!e&&t)throw"Model's specified index does not contain a field key in use.";return t?e.forEach(function(e){e===t&&(n=!0)}):n=!0,n}(E,i.indexesFound)?(v=!1,h.length&&(h+=" AND "),h+=j(f,s,r)):S.push({order:e+1,expression:j(f,s||d,r,o)})}}),S.length&&(t=function(e,t){var n=e.length;if(!t)return T.map(e,function(e){return e.expression}).join(" AND ");for(;0<n;n--)t=t.replace(e[n-1].order," "+e[n-1].expression+" ");return t}(S,n)),m.FilterExpression=t,m.KeyConditionExpression=h,E&&(m.IndexName=E),v}function C(e){var t=e.objectName,n=e.dataSource,a=p(n,"entityMetadataCache",t);return a?a.getFieldsMap():{}}function k(e,n){var t=e.model,a=t&&t.conditions,i=E(),r=!0,o=function(e,a){var i={};return I(e,function(e,t){var n;t.inactive||(t.value&&"multiple"!==t.type?n=O.mergeAsTextInContext(t.value,a):t.values&&t.values.length&&(n=T.map(t.values,function(e){return O.mergeAsTextInContext(e,a)})),n&&(i.hasOwnProperty(t.field)?O.isObject(i[t.field])&&i[t.field].hasMultipleOfSameField?i[t.field].values.push(n):i[t.field]={hasMultipleOfSameField:!0,values:[i[t.field],n]}:i[t.field||t.name]=n))}),i}(a,e),u=n.ExpressionAttributeNames;T.isEmptyObject(o)||(r=F(t,o,n,i));var s=o.__default_searchbox;s&&function(o,e,t,u,s,d){var c,l=!0,f=u.FilterExpression||"",p=u.ExpressionAttributeValues,y=u.ExpressionAttributeNames,m=C(e);I(e.fieldsMap,function(e){var t=m[e],n=":arg"+s(),a={},i=A(t);if("S"===i&&!(1<O.getUnescapedParts(e).length)&&(d||!t.key)){a[i]=o,p[n]=a;var r=D(e,y,s,u);f.length&&l?(f="("+f+") AND (",c=!0):l||(f+=" OR "),l=!1,f+="contains ("+r+", "+n+")"}}),c&&(f+=")"),u.FilterExpression=f}(s,t,0,n,i,r);var d=u.getFieldsAccountedFor();return T.each(t.fields,function(e,t){d[t.id]||D(t.id,u,i,n)}),0|t.recordsLimit&&(n.Limit=0|t.recordsLimit),{method:r?"scan":"query",body:n}}function D(a,i,r,e,o){var u="";return I(O.getUnescapedParts(a),function(e,t){var n="#subName"+r();u&&(u+="."),n=i.addSubName(n,t,a,!o),u+=n}),function(e,t,n,a){var i=e.ProjectionExpression,r=t,o=O.getUnescapedParts(n)[0];-1!==t.indexOf(".")&&(r=t.split(".")[0]);if(a.addSubName(r,o,n),i){var u=T.map(i.split(","),function(e){return e.trim()});-1===u.indexOf(r)&&(e.ProjectionExpression+=", "+r)}else e.ProjectionExpression=r}(e,u,a,i),u}function L(e,o){if(e){x.safeEach(e,function n(a,e,i){var t=!1;O.isObject(e)||(t=!0);var r=[].concat(i=i||[]);o(a,e,r,t),x.safeEach(e,function(e,t){(r=[].concat(i)).push(a),n(e,t,r)})})}}function w(e,t,n){v(e,t)||N(e,t,n)}function _(e,n,a){var i={};return n=n||{},I(e,function(e,t){!function n(a,e,t,i,r,o){var u=O.escapeFieldName(e);i&&(i+=".");i+=u;var s=Object.keys(t)[0];r&&r[i]&&!r[i].dynamotype&&(r[i].dynamotype=s);if(!d(t[s]))return o?w(a,i,s):N(a,i,"N"===s?parseFloat(t[s]):t[s]);if(o)return w(a,i,"M");I(t[s],function(e,t){n(a,e,t,i,r,o)})}(i,e,t,"",n,a)}),i}function q(e,a,i,r,o){var t=r.UpdateExpression,u=Object.keys(a);return t+T.map(e,function(e,t){var n=u.filter(function(e){return 0===e.indexOf(t+".")});return function(e,t,n,a,i,d,r){if(!t.length)return;var c="",l={},f={},o=d.ExpressionAttributeValues;f[e]=a,T.each(t,function(e,t){var r=function(e,t,n){var a=t[e],i=O.getUnescapedParts(a),r="",o=[];for(var u in i.pop(),i)r&&(r+="."),r+=i[u],O.isUndefined(O.getObjectProperty(n,r))||o.push(i[u]);return o}(t,n,i),o=[],u=t.split("."),s="";T.each(u,function(e,t){var n,a,i=e===u.length-1;if(o.push(t),!r[e]||i)return r[e]||i?i?(s=o.join("."),n=O.getObjectProperty(f,s),c=c?c+", ":"SET ",void(c+=o.join(".")+" = "+n)):void 0:(s=o.join("."),a=O.getObjectProperty(f,s),function(e,t,n,a){if(!a[e]){var r={},o=n.ExpressionAttributeValues,i=n.ExpressionAttributeNames,u=i.getMap();a[e]=r;var s=[],d=[];L(t,function(e,t,n,a){var i=n.length?n.join("."):"";d.push(e),a&&(s.push(t),i&&(i+="."),function(e,t,n){if(O.isObject(e))for(var a=e,i=0;i<t.length;i++){var r=t[i],o=i===t.length-1;if(a&&a[r]&&!o)a=a[r];else{if(o)return a[r]=n;a[r]={},a=a[r]}}}(r,function(t,e){var n=e.split(".");return T.map(n,function(e){return["M",t[e]]})}(u,i+=e),o[t]))}),T.each(d,function(e,t){i.candidateForRemoval(t)}),T.each(s,function(e,t){delete o[t]})}}(s,a,d,l),!1)})}),O.size(l)&&(c&&(c+=", "),c+=T.map(l,function(e,t){var n=":arg"+r();return o[n]=e,"SET "+t+" = "+n}).join(", "));return c}(t,n,a,e,i,r,o)}).filter(function(e){return!!e}).join(", ")}function B(a){a.originalItemPayload?(a.originalItemPayloadDigest={},T.each(a.originalItemPayload,function(e,t){var n=_(t);a.originalItemPayloadDigest[M(n,a)]=n}),delete a.originalItemPayload):a.originalItemPayloadDigest||(a.originalItemPayloadDigest={})}function K(s,e,t,d){var c=[];L(e,function(e,t,n,a){if(a){var i=[s].concat(n).concat(e).join("."),r=A(d.fieldsMap[i]),o={};o[r]=P[r]?t+"":t;var u={fieldId:i,changes:o};c.push(u)}}),function(e,o){e&&T.each(e,function(e,t){var n=t.fieldId.split("."),a=n.splice(-1),i=t.changes,r=T.map(n,function(e){return[e,"M"]}).concat([a]).join(".");N(o,r,i)})}(c,t)}function R(t,n){var a=[];t.KeySchema.forEach(function(e){a.push(e.AttributeName)}),a.forEach(function(e){n[e]?n[e].push(t.IndexName):n[e]=[t.IndexName]})}}(skuid)}});