!function(i){var o={};function a(e){if(o[e])return o[e].exports;var t=o[e]={i:e,l:!1,exports:{}};return i[e].call(t.exports,t,t.exports,a),t.l=!0,t.exports}a.m=i,a.c=o,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(i,o,function(e){return t[e]}.bind(null,o));return i},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=354)}({354:function(e,t,i){"use strict";!function(o){var c=o.$,p=c.Deferred,u=o.utils,d=u.mergeAsTextInContext,e=o.dataSource,t=e.utils,b=t.safeEach,i="AmazonSNS",a=o.constants.HTTP_VERBS.POST;function y(e,t){var i={url:"/core/data/aws",type:"POST",headers:{"x-skuid-data-source-name":e}};return t&&(i.body=t,i.contentType="application/json"),o.ajax.direct(i).then(function(e){return e.body},function(t){try{return JSON.parse(t.body).message}catch(e){return t.status}})}e.getDataSourceType(i)||new e.core.RESTDataSourceTypeBase({name:i,coerceRequest:function(e){var t,i=e.type,o=e.model,a=e.row,n=this.getEntityMetadataCacheKey(o),r="query"===i,l="insert"===i,s="delete"===i,u=e.request;r?"Topic"===n?u.data={method:"listTopics"}:"Subscription"===n&&(u.data={},(t=o?o.getConditionByName("topic"):null)&&!t.inactive&&t.value?(u.data.body={TopicArn:t.value},u.data.method="listSubscriptionsByTopic"):u.data.method="listSubscriptions"):l?"Topic"===n&&(u.data={method:"createTopic",body:{Name:a.Name||"New Topic"}}):s&&"Topic"===n&&(u.data={method:"deleteTopic",body:{TopicArn:a.TopicArn}}),c.extend(u,{headers:{"x-skuid-data-source-name":o.getDataSource().name},method:"POST",url:"/core/data/aws"})},getPaginationToken:function(e){return u.parseAsJSONIfString(e.body).NextToken},applyPaginationToken:function(e,t){u.setObjectProperty(e,"data.body.NextToken",t)},parseSuccessfulLoadResponse:function(e,t,i,o){var a=u.parseAsJSONIfString(e.body),n=t.pathToContent,r=n?u.getObjectProperty(a,n):a,l=u.getObjectProperty(i,"extensions.rest.entityName");function s(e){var t=function(e){return e.split(":")}(e);return t[t.length-1]}return a.NextToken?(i.canRetrieveMoreRows=!0,o.NextToken=a.NextToken):(i.canRetrieveMoreRows=!1,delete o.NextToken),b(r,function(e,t){var i=t["Topic"===l?"TopicArn":"SubscriptionArn"],o=i.split(":");t.Region=o[3],t.Id=i,"Topic"===l?t.Name=s(i):"Subscription"===l&&(t.TopicName=s(t.TopicArn))}),r},createActions:function(){var e=function(e,t,i,o){var a=p(),n=d(e.attr("subject"),i),r=d(e.attr("topicarn"),i),l=d(e.attr("number"),i),s=d(e.attr("messagetype"),i),u={method:"publish",body:{Message:d(e.attr("message"),i)}};if(n&&(u.body.Subject=n),r)u.body.TopicArn=r;else{if(!l)return a.reject("No Target specified");u.body.PhoneNumber=l}return s&&(u.body.MessageAttributes={"AWS.SNS.SMS.SMSType":{DataType:"String",StringValue:s}}),u.body.Message?y(o.name,u):a.reject("No Message specified")};return{"sns-subscribe":{builderProps:[{id:"protocol",type:"picklist",picklistEntries:[{value:"-",label:"Standard",disabled:!0},{label:"Email",value:"email",defaultValue:!0},{label:"SMS",value:"sms",defaultValue:!1},{value:"-",label:"",disabled:!0},{value:"-",label:"Advanced",disabled:!0},{label:"HTTP",value:"http",defaultValue:!1},{label:"HTTPS",value:"https",defaultValue:!1},{label:"Email (JSON)",value:"email-json",defaultValue:!1},{label:"Amazon SQS",value:"sqs",defaultValue:!1},{label:"Application",value:"application",defaultValue:!1},{label:"Amazon Lambda",value:"lambda",defaultValue:!1}]},{label:"Endpoint",id:"endpoint",type:"template",location:"attribute",displayAs:"input",helptext:"The way in which one is subscribing to an SNS topic. For SMS, remember to include a country code number.",value:""},{label:"Topic ARN",id:"topicarn",type:"template",location:"attribute",displayAs:"input",helptext:"The ARN of the topic one is subscribing to."}],runtimeExecution:function(e,t,i,o){var a={method:"subscribe",body:{}},n=p();return a.body={Protocol:e.attr("protocol"),Endpoint:d(e.attr("endpoint"),i),TopicArn:d(e.attr("topicarn"),i)},a.body.Protocol?a.body.Endpoint?a.body.TopicArn?y(o.name,a):n.reject("No Topic ARN specified"):n.reject("No Endpoint specified"):n.reject("No protocol specified")},label:"Subscribe to Topic"},"sns-publish":{builderProps:[{id:"message",type:"template",location:"attribute",value:""},{id:"subject",type:"template",location:"attribute",value:""},{label:"Topic ARN",id:"topicarn",type:"template",location:"attribute",displayAs:"input",value:"{{ARN}}"},{label:"Message Type",id:"messagetype",type:"picklist",picklistEntries:[{label:"Transactional",value:"Transactional",defaultValue:!0},{label:"Promotional",value:"Promotional",defaultValue:!1}]}],runtimeExecution:e,label:"Publish to Topic"},"sns-unsubscribe":{builderProps:[{label:"Subscription ARN",id:"subscriptionarn",type:"template",location:"attribute",displayAs:"input",value:"{{ARN}}"}],runtimeExecution:function(e,t,i,o){var a={method:"unsubscribe",body:{}},n=e.attr("subscriptionarn");return n?(a.body.SubscriptionArn=d(n,i),y(o.name,a)):p().reject("No Subscription ARN specified.").promise()},label:"Unsubscribe from Topic"},"sns-sms":{builderProps:[{label:"Message",id:"message",type:"template",location:"attribute",value:""},{label:"Phone Number",id:"number",type:"template",location:"attribute",value:"",displayAs:"input",helptext:"IMPORTANT: This Phone Number must have previously been subscribed to at least one Topic in order for one-off SMS Messages to be sent to it."},{label:"Message Type",id:"messagetype",type:"picklist",picklistEntries:[{label:"Transactional",value:"Transactional",defaultValue:!0},{label:"Promotional",value:"Promotional",defaultValue:!1}]}],runtimeExecution:e,label:"Send Text to Number"}}},getActions:t.getActionsStatic,queryEntityMetadata:t.queryEntityMetadataStatic,getEntityList:t.getEntityListStatic,extendedProperties:{composer:{unomittableFields:!0,hasEntityOptions:!0},hasDefaultSearch:!1,canServerSearch:!1,"x-metadata":{__skuid_fieldDefaults:{"*":{displaytype:"TEXT",writeable:!1,filterable:!1}},Topic:{label:"Topic",labelPlural:"Topics",idFields:["TopicArn"],fields:[{id:"TopicArn"},{id:"Region",helptext:"The AWS Region in which the topic was created."},{id:"Name",createable:!0,omittable:!1}],methods:{query:{pathToContent:"Topics",url:"",verb:a,contentType:"application/json"},insert:{url:"",verb:a,contentType:"application/json",successIf:"requestsucceeds"},delete:{url:"",verb:a,contentType:"application/json"}}},Subscription:{label:"Subscription",labelPlural:"Subscriptions",idFields:["SubscriptionArn"],fields:[{id:"SubscriptionArn",helptext:"The Subscription's ARN."},{id:"TopicArn",helptext:"The ARN of the subscription's topic."},{id:"TopicName",helptext:"The ARN of the subscription's topic."},{id:"Endpoint",helptext:"The Subscription's endpoint (format depends on the protocol)."},{id:"Owner",helptext:"The Subscription's owner."},{id:"Protocol",helptext:"The Subscription's protocol."},{id:"Region",helptext:"The AWS Region in which the topic was created."}],methods:{query:{pathToContent:"Subscriptions",url:"",verb:a,contentType:"application/json"}},defaultConditions:[{sourcetype:"param",sourceparam:"topic",name:"topic",label:"Topic",state:"filterableoff",value:""}]}}}})}(skuid)}});