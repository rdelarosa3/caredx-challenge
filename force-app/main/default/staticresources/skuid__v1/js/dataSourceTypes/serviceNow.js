!function(i){var a={};function r(e){if(a[e])return a[e].exports;var t=a[e]={i:e,l:!1,exports:{}};return i[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}r.m=i,r.c=a,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(i,a,function(e){return t[e]}.bind(null,a));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=371)}({371:function(e,t,i){"use strict";var a,l,d,r,o,y,s,n,u,c,p,f,m,b,T,_,v,g,h,C,I,S,E,q,k,A,P,O,R,w,M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};a=skuid,l=a.$,d=a.utils,r=a.dataSource,o=d.parseAsJSONIfString,y=r.utils,s=a.constants,n=s.DISPLAY_TYPES,u=s.HTTP_VERBS,c="ServiceNow",p=n.STRING,f=n.BOOLEAN,m=n.DATETIME,b=n.NUMBER,T=n.ID,_=s.MIME_TYPES.JSON,v=u.GET,g=u.POST,h=u.DELETE,C="query",I={},S="_sk_table",E=d.grab,q="?sysparm_limit=",k={CATALOGS:"Catalogs",CATALOG:"Catalog",CATEGORIES:"Categories",CATEGORY:"Category",ITEMS:"Items",ITEM:"Item",CART:"Cart",ITEMSINCART:"Items In Cart"},A=function(t,a,i,r){var s=l.Deferred();return!1!==r&&I[a]?y.deferrable(I[a]):t.authenticate().then(function(){var e={url:a=d.combineUrls(t.serviceUrl||"",a)};return i?(r=!1,e.method="POST",e.data=i,e.body=i,e.contentType=_):e.method="GET",t.makeRequest(t.createHTTPRequest(e))}).then(function(e){if(!(e=o(e))||!e.body)throw"Failed to connect to ServiceNow";var t,i=o(e.body);if(!i.result)throw"Bad request made to ServiceNow";if(i.result?t=i.result:i.nextPageToken&&(t=i.nextPageToken),!t)throw"No result in response";return!1!==r&&(I[a]=t),s.resolve(t),s.promise()})},P=function(e){var i=function(e){var t={};return l.each(e,function(e){t[e]={displayType:{type:void 0,certainty:0,emptyValCount:0}}}),t}(e[0]),t=0;return e.map(function(e){t++,l.each(e,function(e,t){if("object"===(void 0===t?"undefined":M(t)))delete i[e];else if("string"==typeof t)if(t.match(/(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})/)){if(i[e].displayType.type===m||void 0===i[e].displayType.type)return i[e].displayType.certainty++,void(void 0===i[e].displayType.type&&(i[e].displayType.type=m));i[e].displayType.certainty=1}else if("true"===t.toLowerCase()||"false"===t.toLowerCase()){if(i[e].displayType.type===f||void 0===i[e].displayType.type)return i[e].displayType.certainty++,void(void 0===i[e].displayType.type&&(i[e].displayType.type=f));i[e].displayType.certainty=1}else if("sys_id"===e.toLowerCase()){if(i[e].displayType.type===T||void 0===i[e].displayType.type)return i[e].displayType.certainty++,void(void 0===i[e].displayType.type&&(i[e].displayType.type=T));i[e].displayType.certainty=1}else if(""===t){if(i[e])return void i[e].displayType.emptyValCount++}else{if(i[e].displayType.type===p||void 0===i[e].displayType.type)return i[e].displayType.certainty++,void(void 0===i[e].displayType.type&&(i[e].displayType.type=p));i[e].displayType.certainty=1}})}),l.each(i,function(e){"OBJECT"===i[e].displayType.type&&delete i[e],void 0===i[e].displayType.type&&(i[e].displayType.type=p),i[e].displayType.emptyValCount>.5*t&&(i[e].displayType.type=p),i[e].displayType.emptyValCount+i[e].displayType.certainty<t&&(i[e].displayType.type=p)}),i},O=function(e){return e.pagination={pagable:!0},e},R=function(e){return e+=q+151},w=function(e){var t=e.split("_");return t.pop(),t.pop(),e=t.join("_"),e=y.makeLabelFromId(e+"s")},r.getDataSourceType(c)||new r.core.RESTDataSourceTypeBase({name:c,coerceRequest:function(e){var t=e.model;switch(this.getEntityMetadataCacheKey(t)){case"CATALOGS":!function(e){var t=e.request,i=t.url;e.type===C&&(i=R(i),t.url=i)}(e);break;case"CATALOG":break;case"CATEGORIES":!function(e){var t=e.model,i=e.request,a=i.url;e.type===C&&(a=R(a),O(t),i.url=a)}(e);break;case"CATEGORY":break;case"ITEMS":!function(e){var t=e.model,i=e.request,a=i.url;e.type===C&&(a=R(a),O(t),i.url=a)}(e);break;case"ITEM":break;case"ITEMSINCART":!function(e){var t=e.model,i=e.request,a=i.url;e.type===C&&(a=R(a),O(t),i.url=a)}(e);break;case"CART":case"USER":break;default:!function(e){var t=e.model,i=e.request,a=i.url,r=e.type,s=y.getModelMergeConditions(t,e).sysId;r===C&&(s?a=a.concat("/",s):(a=R(a),t=O(t)),i.url=a)}(e)}},parseSuccessfulLoadResponse:function(e,t,i,a){var r=o(e.body),s=t.pathToContent,n=s?d.getObjectProperty(r,s):r;if(n=o(n),"ITEMSINCART"!=a.objectName?n.length||(n=[n]):n=function(e){var t=[],i=[],a=[],r=[],s=[];return E(e,"","items")&&(i=e[""].items),E(e,"weekly","items")&&(a=e.weekly.items),E(e,"monthly","items")&&(r=e.monthly.items),E(e,"yearly","items")&&(s=e.yearly.items),t=t.concat(i,a,r,s)}(n),E(a,"pagination","pagable")&&n&&(a.paginationToken?a.paginationToken+=n.length:a.paginationToken=n.length),E(r,"errors","length"))throw"Model "+a.label+' had an error: "'+r.errors[0].message+'"';return y.safeEach(n,function(e,t){y.applySynonym(t,i)}),n},createActions:function(){return{"add-item-to-cart":{label:"Add Item to Cart",builderProps:[{label:"Item SysId",id:"sysId",type:"string"},{label:"Quantity",id:"quantity",type:"string"}],runtimeExecution:function(e,t,i){var a=i.model.dataSource,r=d.mergeAsDataInContext(e.attr("sysId"),i),s=d.mergeAsDataInContext(e.attr("quantity"),i),n=a.serviceUrl+"/sn_sc/servicecatalog/items/"+r+"/add_to_cart",l={sysparm_quantity:s},o=a.createHTTPRequest({url:n,method:"POST",body:l});return r&&s?a.makeRequest(o):d.reject("You must specify both the item to be added and the quantity desired.")}},"submit-order":{label:"Submit Order",runtimeExecution:function(e,t,i){var a=i.model.dataSource,r=a.serviceUrl+"/sn_sc/servicecatalog/cart/submit_order",s=a.createHTTPRequest({url:r,method:"POST"});return a.makeRequest(s)}}}},getEntityList:function(e){var i=e.dataSource,a="/now/table/sys_db_object",t=i.getCacheProperty(a);return t||A(i,a).then(function(e){e=function(e){var i=[];return e.forEach(function(e){var t={};t.label=e.label+" (Table)",t.value=e.name+S,e=t,i.push(e)}),i}(e);var t=l.map(k,function(e,t){return{value:t,label:e}});return t=t.concat(l.map(e,function(e){return{value:e.value,label:e.label}})),i.setPersistentCacheProperty(a,t),t})},queryEntityMetadata:function(e,t){var a=this.getEntityMetadataCacheKey(e);if(!a)return d.reject("No Entity was selected for this Model.");var r,s=function(e){if(-1===e.indexOf(S))return!1;var t=e.split(S);return t.pop(),t.join(""),t}(a);if(s){var n={fields:[]},i="now/table/"+s+q+"10";return A(t.dataSource,i).then(function(e){e.length||(e=[e]),r=P(e)}).then(function(){var i={};return l.each(r,function(e,t){i[e]=t.displayType.type}),l.each(i,function(e,t){var i=t,a=y.makeLabelFromId(e);n.fields.push({id:e,displaytype:i,createable:!0,editable:!0,filterable:!0,required:!1,label:a})}),n.label=w(a),n.labelPlural=w(a),n.methods={query:{url:"now/table/"+s,verb:v,contentType:_,pathToContent:"result"},insert:{url:"now/table/"+s,verb:g,contentType:_,pathToContent:"result"},update:{url:"",verb:g,contentType:_,pathToContent:"result"},delete:{url:"",verb:g,contentType:_,pathToContent:"result"}},n.defaultConditions=[{sourcetype:"param",sourceparam:"sysId",name:"SysId",label:"SysId",state:"filterableon",type:"fieldvalue",required:!0,value:""}],n.fields.length?l.Deferred().resolve(n):d.reject("A table must have data in order to identify fields. Is your table empty?")})}return n=function(e){var t={};switch(e){case"CATALOG":t.idFields=["sys_id"],t.nameField="title",t.label="Service Catalogs",t.labelPlural="Catalogs",t.fields=[{id:"title"},{id:"sys_id",displaytype:T},{id:"has_categories",displaytype:f},{id:"has_items",displaytype:f},{id:"description"},{id:"desktop_image"}],t.methods={query:{url:"/sn_sc/servicecatalog/catalogs/{{sysId}}",verb:v,contentType:_,pathToContent:"result"}},t.defaultConditions=[{sourcetype:"param",sourceparam:"sysId",name:"SysId",label:"SysId",state:"filterableon",type:"fieldvalue",required:!1,value:""}];break;case"CATALOGS":t.idFields=["sys_id"],t.nameField="title",t.label="Service Catalogs",t.labelPlural="Catalogs",t.fields=[{id:"title"},{id:"sys_id",displaytype:T},{id:"has_categories",displaytype:f},{id:"has_items",displaytype:f},{id:"description"},{id:"desktop_image"}],t.methods={query:{url:"/sn_sc/servicecatalog/catalogs",verb:v,contentType:_,pathToContent:"result"}},t.defaultConditions=null;break;case"CATEGORIES":t.idFields=["sys_id"],t.nameField="title",t.label="Categories By Catalog",t.labelPlural="Categories",t.fields=[{id:"title"},{id:"description"},{id:"full_description"},{id:"icon"},{id:"header_icon"},{id:"homepage_image"},{id:"sys_id",displaytype:T}],t.methods={query:{url:"/sn_sc/servicecatalog/catalogs/{{sysId}}/categories",verb:v,contentType:_,pathToContent:"result"}},t.defaultConditions=[{sourcetype:"param",sourceparam:"sysId",name:"SysId",label:"SysId",state:"filterableon",type:"fieldvalue",required:!0,value:""}];break;case"CATEGORY":t.idFields=["sys_id"],t.nameField="title",t.label="Category By SysID",t.labelPlural="Categories",t.fields=[{id:"title"},{id:"description"},{id:"full_description"},{id:"icon"},{id:"header_icon"},{id:"homepage_image"},{id:"sys_id",displaytype:T}],t.methods={query:{url:"/sn_sc/servicecatalog/categories/{{sysId}}",verb:v,contentType:_,pathToContent:"result"}},t.defaultConditions=[{sourcetype:"param",sourceparam:"sysId",name:"SysId",label:"SysId",state:"filterableon",type:"fieldvalue",required:!0,value:""}];break;case"ITEMS":t.idFields=["sys_id"],t.nameField="name",t.label="Items List",t.labelPlural="Items",t.fields=[{id:"sys_id"},{id:"short_description"},{id:"name"},{id:"icon"},{id:"description"},{id:"show_price",displaytype:f},{id:"type"},{id:"category_sysID",synonym:"category.sys_id",displaytype:T},{id:"category_title",synonym:"category.title"}],t.methods={query:{url:"/sn_sc/servicecatalog/items",verb:v,contentType:_,pathToContent:"result"}};break;case"ITEM":t.idFields=["sys_id"],t.nameField="name",t.label="Item By SysId",t.labelPlural="Items",t.fields=[{id:"short_description"},{id:"icon"},{id:"description"},{id:"show_price",displaytype:f},{id:"recurring_price"},{id:"type"},{id:"local_currency"},{id:"sys_id",displaytype:T},{id:"recurring_price_currency"},{id:"localized_price"},{id:"price"},{id:"recurring_frequency"},{id:"category_sysID",synonym:"category.sys_id",displaytype:T},{id:"category_title",synonym:"category.title"},{id:"price_currency"}],t.methods={query:{url:"/sn_sc/servicecatalog/items/{{sysId}}",verb:v,contentType:_,pathToContent:"result"}},t.defaultConditions=[{sourcetype:"param",sourceparam:"sysId",name:"SysId",label:"SysId",state:"filterableon",type:"fieldvalue",required:!0,value:""}];break;case"CART":t.idFields=["cart_id"],t.label="Cart",t.fields=[{id:"cart_id",displaytype:T},{id:"subtotal_price"},{id:"subtotal_recurring_frequency"},{id:"subtotal_recurring_price"},{id:"total_title"},{id:"show_subtotal_price"},{id:"subtotal_title"}],t.methods={query:{url:"/sn_sc/servicecatalog/cart",verb:v,contentType:_,pathToContent:"result"}},t.defaultConditions=null;break;case"ITEMSINCART":t.idFields=["cart_id"],t.label="Items In Cart",t.nameField="item_name",t.fields=[{id:"cart_item_id",displaytype:T},{id:"catalog_item_id",displaytype:T},{id:"delivery_time"},{id:"item_name"},{id:"localized_price"},{id:"localized_recurring_price"},{id:"name"},{id:"order_guide"},{id:"picture"},{id:"price"},{id:"quantity"},{id:"recurring_frequency"},{id:"recurring_price"},{id:"recurring_subtotal"},{id:"recurring_subtotal_price"},{id:"short_description"},{id:"show_price",displaytype:f},{id:"show_quantity",displaytype:f},{id:"show_recurring_price",displaytype:f},{id:"subtotal",displaytype:b},{id:"subtotal_price"},{id:"sys_class_name"},{id:"sys_id"}],t.methods={query:{url:"/sn_sc/servicecatalog/cart",verb:v,contentType:_,pathToContent:"result"},delete:{url:"/sn_sc/servicecatalog/cart/{{cart_item_id}}",verb:h,contentType:_}},t.defaultConditions=null;break;case"USER":t.idFields=["user_name"],t.nameField="user_name",t.label="User Roles",t.fields=[{id:"user_name"},{id:"from_role"},{id:"from_group"}],t.methods={query:{url:"/global/user_role_inheritance?user_sysid={{userId}}",verb:v,contentType:_,pathToContent:"result"}},t.defaultConditions=[{sourcetype:"param",sourceparam:"userId",name:"UserId",label:"UserId",state:"filterableon",type:"fieldvalue",required:!0,value:""}];break;default:return t=null}return t.fields.forEach(function(e){e.label||(e.label=y.makeLabelFromId(e.id)),e.displaytype||(e.displaytype=p),e.editable||(e.editable=!1),e.creatable||(e.creatable=!1),e.accessible||(e.accessible=!0)}),t}(a),l.Deferred().resolve(n)},getActions:y.getActionsStatic,extendedProperties:{composer:{unomittableFields:!0,rebuildPropsOnSelectEntity:!0},hasDefaultSearch:!0,canServerSearch:!0,hasGlobalSearchEntities:!0,"x-metadata":{__skuid_fieldDefaults:{"*":{displaytype:p,editable:!0,createable:!0,accessible:!0,filterable:!0,sortable:!0}}}},getPaginationToken:function(e,t,i,a){var r=o(e&&e.body);if(a.pagination&&a.paginationToken&&r.result&&151===r.result.length)return a.paginationToken--,r.result.pop(),a.paginationToken},applyPaginationToken:function(e,t){e.url+="&sysparm_offset="+t}})}});