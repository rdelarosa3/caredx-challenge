!function(n){var i={};function r(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}r.m=n,r.c=i,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=205)}([function(e){e.exports={date:"1612394257000",id:"v1",major:12,minor:4,patch:20,build:0,number:"12.4.20.0",name:"Spark Update 3 (12.4.20.0)",path:"v1"}},,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),u=a(n(5)),r=a(n(6));function a(e){return e&&e.__esModule?e:{default:e}}var f=skuid.utils,h=skuid.$L,g=skuid.$,m=f.getDefaultImageUrl,p=f.encodeHTML,s=f.isString,o=function(){function d(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d);var e=this,i=e.fileController=this.initializeFileController(t,n),r=i.uploadMethod,a=i.dataSource,o=i.row,s=i.model,l=i.canCreateOrUpdateImage,c=i.canUpload;if(!i.initialized){if(i.isNewRow)var u=skuid.events.subscribe("models.saved",function(e){s&&s.id in e.models&&(s.isRowNew(o)||(t.empty(),new(skuid.platform.FileComponent||d)(t,n),skuid.events.unsubscribe(u)))});return t.text(i.error),!1}t.data("object",e).addClass("nx-fileupload"),e.elem=t,e.options=n,e.buttonText=n.label||h("Upload"),e.dataSource=a,e.canCreateOrUpdateImage=l,e.uploadMethod=r,e.canUpload=c,t.off("imageuploadcomplete imageuploadstarted mouseenter mouseleave click drop dragleave dragenter dragover"),e.instantiateUploader(),e.initialSetup()}return i(d,[{key:"instantiateUploader",value:function(){var e,t,n=this,i=n.fileController,r=i.canCreateOrUpdateImage,a=i.fieldName,o=i.saveTo,s=i.model,l=i.row,c=n.canUpload;(r||"field"===o)&&(n.uploader=new u.default(i),c?(n.uploader.attach(n),l&&s.getRowId(l)&&n.uploader.setSource({row:l,model:s},n.elem,a)):n.elem.text((e=f.isApiEnabled(),t=f.isFileAPISupported(),e||t?e&&!t?"Your browser does not support HTML5 file uploads.":!e&&t?"You do not have permission to upload files using the API.":void 0:"You either do not have permission to upload files using the API, or your browser does not support HTML5 file uploads."))),n.uploader&&c||(n.canCreateOrUpdateImage=i.canCreateOrUpdateImage=!1)}},{key:"initialSetup",value:function(){var s=this,l=this,e=l.elem,c=l.uploadMethod,t=l.canCreateOrUpdateImage,n=this.fileController,i=n.fileId,u=n.displayAs,r=n.deletable,a=n.model,o=n.editable;if(l.status=g("<div>").addClass("nx-fileupload-status").css({float:"none",display:"inline-block"}).appendTo(e).hide(),l.statustext=g("<div>").appendTo(l.status),"filename"===u||c.forceStoreAsFileName){var d=void 0,f=void 0;if(!1!==t&&l.uploader&&(f=g("<div>"),l.progressParentDiv=f,skuid.mobile?(f.addClass("sm-button").css("display","inline-block"),d=new skuid.mobile.ui.Button({icon:"fa-plus",label:l.buttonText,element:f,iconColor:"green"}),f.on("tap",function(){l.uploader.pickFile()})):f.text(l.buttonText).css("vertical-align","top").skooButton({icon:"sk-icon-upload"}).click(function(e){e.stopPropagation(),l.uploader.pickFile()}),f.appendTo(e)),skuid.mobile||(l.status.addClass("nx-actionselect nx-status").css({"margin-left":"4px","word-break":"break-all"}),l.statustext.addClass("nx-actionselect-text")),a&&a.updateable&&r){if(skuid.mobile){l.deletebutton=g('<div class="sm-button">');var p=new skuid.mobile.ui.Button({icon:"fa-minus",element:l.deletebutton,iconColor:"red"});l.deletebutton.on("tap",function(){p.startProcessing(),l.deleteImage()}),e.on("imagedeletecomplete",function(){p.stopProcessing()})}else l.deletebutton=g('<div class="sk-icon inline sk-icon-delete">').css({border:"3px solid #EEE","vertical-align":"top","background-color":"#EEE","margin-top":"3px",cursor:"pointer"}),l.deletebutton.click(function(){l.deleteImage()});l.deletebutton.css("display","inline-block").appendTo(e)}e.on("imageuploadstarted",function(e,t){s.fileController.supportsDragAndDrop||(s.fileName=t.fileName),s.setStatus(skuid.label.merge(h("Uploading"),t.fileName||"")),l.status.off("click.skuid"),d&&d.startProcessing()}),d&&e.on("imageuploadcomplete",function(){d.stopProcessing()})}else"image"===u&&((l.progressParentDiv=e).children(".nx-edithover").remove(),e.addClass("nx-attachmentimage"),l.defaultImageSrc=m(l.options.defaultImage||"person"),l.image=g("<img>").addClass("nx-attachmentimage-image").css("max-width","100%").appendTo(e),!1!==t&&e.on("mouseenter",function(){o&&l.uploader&&l.elem.append(g("<div>").addClass("nx-edithover sk-icon inline sk-icon-edit").css({"background-color":"white",opacity:"0.8",border:"4px solid white"}).click(function(e){l.elem.find(".nx-error").remove(),l.uploader&&l.uploader.pickFile(),e.stopPropagation()})),c.needsFieldContext&&!i||!r||l.imageError||e.append(g("<div>").addClass("nx-edithover sk-icon inline sk-icon-delete").css({cursor:"pointer","background-color":"white",opacity:"0.8",border:"4px solid white",left:"4px"}).click(function(e){l.elem.find(".nx-error").remove(),l.deleteImage(),e.stopPropagation()}))}).on("mouseleave",function(){l.elem.find("div.nx-edithover").remove()}));e.on("imageuploadcomplete",function(e,t){l.fileController.uploadFinished(t);var n,i=t&&(t.newFileId||t.newAttachmentId),r=l.fileController,a=r.fileId,o=r.fileName;i&&l.draw(),t&&t.message?(n={text:t.message,hideIn:4},a&&o&&"image"!==u&&(n.complete=function(){s.setStatus(o)}),s.setStatus(n)):c.needsFieldContext||s.setStatus({text:h("Upload_Successful"),hideIn:2})}),l.draw()}},{key:"draw",value:function(){var i=this,r=i.uploadMethod,e=this.fileController,a=e.fileId,o=e.fileName,t=e.displayAs,n=e.fieldName,s=e.deletable,l=e.cacheBuster,c=i.elem,u=l?"&cachebuster="+l:"";i.imageError=!1;var d=function(){if(a){var t,n=g("<img>").css({"max-height":"600px","max-width":"800px"}),e=i.image&&i.image.attr("src");e?n.attr("src",e):r.getSrc&&r.getSrc({context:{id:a},component:i.fileController.getComponent(),paramString:u,dataSource:r.dataSource}).then(function(e){t=e,n.attr("src",e)},function(){n.attr("src","")}),n.load(function(){var e=g("<div>").attr("title",p(o)).append(n).dialog({close:function(){g(this).remove()},modal:!0,width:"auto",resizable:!1,open:function(){g(".ui-widget-overlay").on("click",function(){e.dialog("close")})},dialogClass:"nx-imageview"})}),n.error(function(){t&&skuid.dataSource.utils.downloadWithLink(o,t)})}};if("filename"===t||(r||{}).forceStoreAsFileName)a&&o&&n?(i.setStatus(o),i.status.off("click.skuid").on("click.skuid",function(){d()}),s&&i.deletebutton&&i.deletebutton.show()):(i.deletebutton&&i.deletebutton.hide(),i.status.hide());else if("image"===t){if(a||!r.needsFieldContext){var f={};a&&(f.id=a),r.getSrc&&r.getSrc({context:f,component:i.fileController.getComponent(),paramString:u,dataSource:r.dataSource}).then(function(e){i.image.attr("src",e)},function(){i.image.attr("src","")})}else i.imageError=!0,i.defaultImageSrc&&i.image.attr("src",i.defaultImageSrc);i.image.error(function(){i.imageError||(i.imageError=!0,i.defaultImageSrc&&i.image.attr("src",i.defaultImageSrc))}),c.off("click.skuid").on("click.skuid",function(){d()}),i.status&&i.status.hide()}}},{key:"setStatus",value:function(e){var t,n,i,r=this,a=r.status,o=r.statustext;e&&(s(e)?t=e:(t=e.text,n=e.hideIn,i=e.complete)),a&&o&&(r.statusTimeout&&clearTimeout(r.statusTimeout),skuid.ui.setStatus(a,o,t),0<=n&&(r.statusTimeout=setTimeout(function(){a.animate({opacity:0},{duration:2e3,complete:i||function(){a.hide()}})},1e3*n)))}},{key:"deleteImage",value:function(){var t=this,n=this.fileController.fileId,i=skuid.$.Deferred();return this.fileController.deleteFile({startHook:function(){t.setStatus(h("Deleting"))},endHook:function(e){e&&e.message?t.setStatus({text:e.message,hideIn:2,complete:function(){return t.draw()}}):(t.elem.trigger("imagedeletecomplete",{oldFileId:n}),t.draw()),i.resolve()}}),i.promise()}},{key:"unregister",value:function(){this.elem&&this.elem.remove&&this.elem.remove(),this.uploader&&this.uploader.unregister(this)}},{key:"initializeFileController",value:function(e,t){return new r.default({component:t.component,element:e,context:t.context,model:t.model,row:t.row,dataSource:t.datasource,idField:t.idField,field:t.field,saveTo:t.saveTo,storeAs:t.storeAs,displayAs:t.displayAs,editable:t.editable,deletable:t.deletable,fileName:t.filename,description:t.description,maxFileSize:t.maxFileSize,enforceMaxFileSize:t.enforceMaxFileSize,cacheBuster:t.cacheBuster,snippetName:t.snippetName,autoRefreshModelsOnUpload:t.autoRefreshModelsOnUpload,uploadSuccessActions:t.onUploadSuccessActions,uploadFailureActions:t.onUploadFailureActions,label:t.label})}}]),d}();t.default=o,f.FileComponent=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();var r=skuid.utils,p=skuid.$,h=r._ie,a=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.fileController=e,this.uploadMethod=e.uploadMethod,this.canUpload=e.canUpload,this.fileName=e.fileName,this.fileNameOverride=e.fileNameOverride,this.description=e.description,this._GUID=e._GUID,this.progressDiv=p("<div>").addClass("nx-file-progress"),this.dragAndDrop=e.supportsDragAndDrop,e.supportsDragAndDrop?this.iframe=p('<input style="display:none;" type="file" id="'+r.generateUniqueId()+'" multiple>'):this.iframe=p('<iframe style="display:none;" src="" frameborder="0">')}return i(t,[{key:"setSource",value:function(e,t,n){var i=this.uploadMethod;if(!this.dragAndDrop){var r=this.description||"",a=this.fileNameOverride;i&&i.getIframeSrc&&this.iframe.attr("src",i.getIframeSrc(e,t,n,{description:r,fileNameOverride:a}))}}},{key:"pickFile",value:function(){this.dragAndDrop?this.iframe.click():this.iframe.contents().find("input[type=file]").click()}},{key:"startProgress",value:function(){this.fileComponent.progressParentDiv&&this.fileComponent.progressParentDiv.append(this.progressDiv)}},{key:"handleProgress",value:function(e){if(this.fileComponent.progressParentDiv){var t=Math.round(e.loaded/e.total*100);t<100&&this.progressDiv.css("width",t+"%")}}},{key:"endProgress",value:function(){var e=this;this.fileComponent.progressParentDiv&&(this.progressDiv.css("width","100%"),setTimeout(function(){return e.progressDiv.detach()},1e3))}},{key:"uploadFile",value:function(e){var t=this,n=this.fileController,i=this.fileController.element;return n.uploadFile(e,{startHook:function(e){t.startProgress(),i.trigger("imageuploadstarted",e)},progressHook:function(e){t.handleProgress(e)},endHook:function(e){t.endProgress(),i.trigger("imageuploadcomplete",e)}})}},{key:"attach",value:function(e){var t,n,i,r,a,o=this,s=this,l=this.fileController,c=e.elem,u="nx-file-dropping",d=!1;if(s.iframe.appendTo(c),s.element=c,s.fileComponent=e,s.dragAndDrop){n=p(document.body),i=p("<div>").addClass("nx-file-droppable").text(e.buttonText),r=function(e){e.preventDefault();var t=e.originalEvent.dataTransfer?e.originalEvent.dataTransfer.files:e.target.files;l.handleUpload(t,{startHook:function(e){o.startProgress(),c.trigger("imageuploadstarted",e)},progressHook:function(e){o.handleProgress(e)},endHook:function(e){o.endProgress(),c.trigger("imageuploadcomplete",e)}})};var f=function(){a&&clearTimeout(a),a=setTimeout(function(){i.detach(),d=!1,i.removeClass(u)},100)};s.iframe.on("click",function(e){this.value=null,e.stopPropagation()}).on("change",r),c.on("dragover",function(e){h||e.stopPropagation(),e.preventDefault(),e.originalEvent.dataTransfer.dropEffect="copy"}).on("dragenter",function(e){h&&(e.stopPropagation(),e.preventDefault(),f()),i.addClass(u),h&&(d||(c.append(i),d=!0))}).on("dragleave",function(e){h&&(e.stopPropagation(),e.preventDefault()),i.removeClass(u)}).on("drop",r),n.on("dragenter."+s._GUID,function(e){e.preventDefault(),h?(d||(c.append(i),d=!0),f()):(t=e.target,c.append(i))}).on("dragover."+s._GUID,function(e){e.preventDefault(),h&&f()}).on("dragleave."+s._GUID,function(e){h||t!==e.target||(i.detach(),i.removeClass(u))}).on("drop."+s._GUID,function(e){return e.preventDefault(),e.stopPropagation(),i.detach(),i.removeClass(u),t=null,!1})}}},{key:"unregister",value:function(e){var t=e.options._GUID;p(document.body).off("dragenter."+t+" dragleave."+t+" drop."+t)}}]),t}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();var r=skuid,x=r.$L,D=r.utils,R=r.$,E=D.isFileAPISupported(),a=function(){function k(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,k),this.initialized=!1;var t=e.component,n=e.context,i="object"===T(e.model)?e.model:skuid.$M(e.model),r=t?R(t.xmlDefinition):void 0,a=r?t.createConditionsFromXml(r):null,o=e.row||k.getRow(i,n,a),s=e.dataSource,l=i?i.getDataSource():skuid.dataSource.get(s),c=e.saveTo,u="field"===c,d=e.idField,f=e.storeAs,p=e.deletable||e.deleteable,h=e.editable,g=e.fileName,m=e.fileName,v=void 0,y=void 0,b=void 0,S=void 0,w=E&&(!function(e){if(!e)return!0;var t=e.getDataSourceType();return!!t&&t.isDataSourceNativeSalesforce(e)}(l)||D.isApiEnabled()&&D.userInfo.isAuthenticated);if(!i&&!e.model&&n&&n.model&&(i=n.model),t&&(this.component=t,this._GUID=t._GUID),this.model=i,this.row=o,this.dataSource=l,this.storeAs=f,this.saveTo=c,this._deletable=p,this.editable=h,this.idField=d,this.xmlDef=r,this.dataSourceName=s,this.autoRefreshModelsOnUpload=e.autoRefreshModelsOnUpload,this.field=e.field,this.displayAs=e.displayAs,this.element=e.element,this.cacheBuster=e.cacheBuster,this.description=e.description,this.snippetName=e.snippetName,this.enforceMaxFileSize=!!e.enforceMaxFileSize,this.maxFileSize=parseInt(e.maxFileSize,10),this.defaultMaxFileSizeMessage=x("Error_Exceeds_Max_File_Size"),this.uploadSuccessActions=e.uploadSuccessActions,this.uploadFailureActions=e.uploadFailureActions,l||u)if(S=l.getUploadMethod(f),u&&(S={}),S||u)if(this.uploadMethod=S,i||!S.needsRecordContext)if(!S.needsRecordContext||o){var C=!0;if(S.needsRecordContext){if(!i.accessible)return void this.addError("You do not have permission to upload files to this record.");if(i.isRowNew(o))return this.addError("This record must be saved before you can upload files."),void(this.isNewRow=!0)}if(S.needsFieldContext){if(!(b=d))return void this.addError("No image field was specified");v=i.getFieldValue(o,b),y=this.getFileId(S,b,i,o),g=this.getFileName(S,b,i,o);var I=i.getField(b);C=i.accessible&&(h||p)&&(i.updateable&&I.editable||v)}this.canUpload=!1,this.supportsDragAndDrop=w,S.supportsIframeUpload&&S.supportsIframeUpload()?this.canUpload=!0:w&&(this.canUpload=!0),this.fieldValue=v,this.fileId=y,this.fileName=g,this.fileNameOverride=m,this.fieldName=b,this.canCreateOrUpdateImage=C,this.initialized=!0}else this.addError("No record found for file component.");else this.addError("This upload method requires a record context, but could not find one.");else this.addError(skuid.label.merge(x("Error_Could_Not_Find_Upload_Method"),f));else this.addError(skuid.label.merge(x("Error_Invalid_File_Upload_Data_Source"),s))}return i(k,[{key:"addError",value:function(e){this.error=e}},{key:"shouldSaveToField",value:function(){return"field"===this.saveTo}},{key:"getFileId",value:function(e,t,n,i){var r=e.getFileIdField&&e.getFileIdField(t);return n.getFieldValue(i,r)}},{key:"getFileName",value:function(e,t,n,i){var r=e.getFileNameField&&e.getFileNameField(t);return n.getFieldValue(i,r)}},{key:"handleUpload",value:function(){var t=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if("field"===this.saveTo){i.startHook&&i.startHook({fileName:n[0].name});var r=this.model,a=this.row,o=this.field,e=new FileReader;return e.onload=function(e){var t={};t[o]=e.target.result,r.updateRow(a,t),i.endHook&&i.endHook({newFileName:n[0].name})},void e.readAsText(n[0])}if(n.length){var s=void 0;Array.from(n).forEach(function(e){s=s?s.then(function(){return t.uploadFile(e,i)}):t.uploadFile(e,i)})}return!1}},{key:"uploadFile",value:function(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=skuid.$.Deferred(),r=this.dataSource,a=this.getOptions(),o=this.getComponent(),s=function(e){n.startHook&&n.startHook(e)},l=function(e){n.endHook&&n.endHook(e),e&&e.message?i.reject(e.message):i.resolve()},c=function(e){n.progressHook&&n.progressHook(e)};if(this.enforceMaxFileSize&&e.size>this.maxFileSize){var u=skuid.label.merge(this.defaultMaxFileSizeMessage,e.name,function(t){var e=[{value:"000000000",label:"GB"},{value:"000000",label:"MB"},{value:"000",label:"KB"},{value:"",label:"B"}].find(function(e){return t.endsWith(e.value)});return""+t.substring(0,t.length-e.value.length)+e.label}(""+this.maxFileSize));n.endHook({message:u})}else r.authenticate().then(function(){t.uploadMethod.upload(e,o,a,s,l,c)},function(e){n.endHook({message:e})});return i.promise()}},{key:"uploadFinished",value:function(e){var i=this,r=void 0,t=e&&(e.newFileId||e.newAttachmentId),n=new Date;this.cacheBuster=n.getTime(),e&&e.newFileName&&this.uploadMethod.needsFieldContext&&(this.fileName=e.newFileName),t&&(this.fileId=t,this.fieldValue=e.newFieldValue||e.newImageId,this.syncModel()),e&&e.message?(this.fileId&&this.fileName&&"image"===this.displayAs&&!this.fileId&&this.fileName&&(this.fileName=""),this.uploadFailureActions&&skuid.actions.runActionsNode(this.uploadFailureActions,this,{model:this.model,row:this.row,$Error:{Message:e.message}})):(this.uploadMethod.needsFieldContext||this.uploadMethod.canRunPostUploadSnippet&&this.snippetName&&skuid.snippet.get(this.snippetName)(e),this.uploadMethod.relatedObjectName&&this.autoRefreshModelsOnUpload&&(r=[],skuid.model.list().forEach(function(e){var t=e.objectName===i.uploadMethod.relatedObjectName,n=e.dataSource===i.uploadMethod.dataSource;t&&n&&(r.push(e),e.cancel())}),skuid.model.updateData(r)),this.uploadSuccessActions&&skuid.actions.runActionsNode(this.uploadSuccessActions,this,{model:this.model,row:this.row,apiExtensions:{$Result:{body:e&&e.body?e.body:{}}}}))}},{key:"deleteFile",value:function(){var t=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=function(e){e&&e.message||(t.fileId=null,t.fileName=null,t.fieldValue=null,t.syncModel()),n.endHook&&n.endHook(e)};this.dataSource.authenticate().then(function(){return n.startHook&&n.startHook(),t.uploadMethod.deleteFile({context:{model:t.model,row:t.row},component:t.getComponent(),dataSource:t.uploadMethod.dataSource})}).then(i).catch(function(e){return i({message:e})})}},{key:"syncModel",value:function(){var e={},t=this.model,n=this.row,i={},r=this.uploadMethod,a=r.getFileIdField&&r.getFileIdField(this.fieldName),o=r.getFileNameField&&r.getFileNameField(this.fieldName),s={};t&&n&&(e[t.getRowId(n)]=i,this.fieldName&&(this.fieldValue===n[this.fieldName]&&this.fileId===t.getFieldValue(n,a,!0)||(i[this.fieldName]=this.fieldValue),D.setObjectProperty(s,a,this.fileId),D.setObjectProperty(s,o,this.fileName),this.fieldValue?(R.each(s,function(e,t){i[e]=t}),R.extend(n,i)):(delete n[this.fieldName],R.each(s,function(e){return delete n[e]})),D.size(i)&&t.notifyFieldsOfChange(e,{initiatorId:this._GUID})))}},{key:"getComponent",value:function(){return{model:this.model,row:this.row,ownerIdField:this.ownerIdField,fieldValue:this.fieldValue,fieldName:this.fieldName,fileId:this.fileId,fileName:this.fileName,options:this.getOptions()}}},{key:"getOptions",value:function(){return{filename:this.fileName,fileNameOverride:this.fileNameOverride,description:this.description,storeAs:this.storeAs,saveTo:this.saveTo,uploadMethod:this.uploadMethod,field:this.field,saveToModel:this.model&&this.model.id,model:this.model,row:this.row,displayAs:this.displayAs,autoRefreshModelsOnUpload:this.autoRefreshModelsOnUpload,idField:this.idField,deletable:this.deletable,editable:this.editable,_GUID:this._GUID,cacheBuster:this.cacheBuster,xmlDef:this.xmlDef}}},{key:"deletable",get:function(){return this._deletable}},{key:"deleteable",get:function(){return this._deletable}}],[{key:"getRow",value:function(e,t,n){var i=void 0;return e&&e.data&&(i=n&&n.length?e.getRows(n,t):t&&e&&t.model&&t.row&&t.model===e?[t.row]:e.getRows(null,t)),i&&i.length?i[0]:null}}]),k}();t.default=a},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"refreshAPIToken",value:function(){var i=this;return skuid.platform.services.getToken().then(function(e){var t=e.token,n=i.extractJWTPayload(t).exp;return i.apiToken={expiration:n,jwt:t}})}},{key:"extractJWTPayload",value:function(e){var t=e.split(".");if(3!=t.length)throw new Error("JWT not formatted correctly");var n,i,r=void 0;try{n=t[1],i=(n+"===".slice((n.length+3)%4)).replace(/-/g,"+").replace(/_/g,"/"),r=atob(i)}catch(e){throw new Error("Error decoding JWT payload")}var a=void 0;try{a=JSON.parse(r)}catch(e){throw new Error("Error parsing JWT payload")}return a}},{key:"getAPIToken",value:function(){var e=this.apiToken;return e&&this.isValid(e)?skuid.utils.resolve(e):this.refreshAPIToken()}},{key:"isValid",value:function(e){var t=void 0;return(t=skuid.utils.isString(e)?this.extractJWTPayload(e).exp:e.expiration)&&t>Date.now()/1e3}}]),e}();t.default=new r},,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var v,y,b,s,S,w,C;skuid,v=skuid.$,y=v(document.body),b=skuid.utils,s="sk-pagepanel",S="nx-page-withpanels",w=function(e){return" "+s+"-"+e},C=function(e){return" "+S+"-"+e},skuid.componentType.register("panel",function(n,i,u){var e=u.context,d="true"===i.attr("closeonpageclick"),f=v('<div class="nx-page-clickcatcher">'),t=i.attr("uniqueid"),r=i.children("interactions").first(),p=u.origin=i.attr("origin")||"left",h=u.getParentPage(),a=u.behavior=i.attr("behavior")||"overlay",g="left"===u.origin||"right"===u.origin,m=!g;u.size=i.attr("size")||"270px",u._open=!1,n.addClass(s+w(a)+w(p));var o={};o["overflow-"+(m?"x":"y")]=b._oniOS()?"scroll":"auto",o[m?"height":"width"]=u.size,n.css(o),u.createChildComponents(i.find("components").first().children(),n,e),r.length&&skuid.interactions.enableInteractions(n,{interactionsDef:r,component:u,context:e}),u.toggle=function(e){if(e!==u._open){var t,n=u.behavior,i=h.getContentElement(),r=h.getElement(),a=u.element,o=a[m?"outerHeight":"outerWidth"](!0)+"px",s="reveal"===n?i:r,l="right"===u.origin||"bottom"===u.origin?"-":"",c=m?"0,"+l+o+",0":l+o+",0,0";e=void 0!==e?e:!u._open,a[e?"addClass":"removeClass"](w("open")),"overlay"!==n&&"reveal"!==n||(a.addClass(w("animatable")),a.one("transitionend.skuid",function(){a.removeClass(w("animatable"))})),"reveal"!==n&&"push"!==n||(e?(v.each(h.panel.getAll(),function(e,t){t.id()!==u.id()&&t.close()}),(g||"push"===n)&&(t=y.scrollTop(),s.one("transitionend.skuid",function(){i.scrollTop(t),a.css("z-index",2)}))):t=i.scrollTop(),i.toggleClass(C("pushed"),e),e?(r.addClass(S+" "+C(p)),i.scrollTop(t),b._oniOS()&&i.css("overflow","scroll"),a.css("opacity",""),g?y.css("overflow-x","hidden"):(i["top"===u.origin?"append":"prepend"]('<div class="sk-slidingpanelhelper" style="height: '+o+'">'),"top"!==u.origin&&o&&i.scrollTop(i.scrollTop()+parseFloat(o)))):((g||"push"===n)&&(y.scrollTop(t),g||a.css({top:t+"px","z-index":1})),s.one("transitionend.skuid",function(){u._open||(a.css({opacity:0,top:"","z-index":""}),v.each(h.panel.getAll(),function(e,t){return"overlay"===t.behavior||"reveal"===t.behavior}),r.removeClass(S+" "+C(p)),b._oniOS()&&i.css("overflow",""))}),g?s.one("transitionend.skuid",function(){u._open||y.css("overflow-x","")}):v(".sk-slidingpanelhelper").remove()),e?s.css("transform","translate3d("+c+")"):(s.css("transform",""),s.one("transitionend.skuid",function(){u._open||a.css("z-index","-100")}))),e?d&&(i.append(f),s.one("transitionend.skuid",function(){u._open&&f.one("click.skuid",function(){f.remove(),a.css("z-index",""),u.close()})})):f.remove(),u._open=e}},u.close=function(){u.toggle(!1)},u.open=function(){u.toggle(!0)},u.isOpen=function(){return u._open},u.unregister=function(){skuid.component.Component.prototype.unregister.call(u),h.panel._detachById(t)},u.updateContext=function(e){var t=i.children("interactions").first();n.empty(),u.unregisterChildComponents(),u.createChildComponents(i.find("components").first().children(),n,e),t.length&&(skuid.interactions.disableInteractions(n),skuid.interactions.enableInteractions(n,{interactionsDef:t,component:u,context:e})),u.context=e},setTimeout(function(){u.toggle(!0)},0)})},,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=skuid.$,r=t.BaseProp={id:"_id",namespace:"_namespace",node:"_node",pageApi:"_pageAPI",type:"_type"},s=r.id,l=r.namespace,c=r.node,u=r.type,a=skuid.utils,d=a.getObjectProperty,h=a.generateGUID,g=a.generateUniqueId,m=a.isObject,v=a.ingestConstructorArguments,y="_getNodeCallback",b="_eventService";function S(e,t){var n={};return function e(t,n,i){var r=Object.keys(t);if(0<r.length)for(var a=r.length-1;0<=a;a--){var o=r[a],s=Object.prototype.toString.call(t[o]);if("[object Array]"===s){var l=i+h();n[l]=t[o],t[o]=l}else"[object Object]"===s&&e(t[o],n)}}(t,n,"personalMerge-"),p.extend(!0,e,t),function e(t,n){var i=Object.keys(t);if(0<i.length)for(var r=i.length-1;0<=r;r--){var a=i[r],o=Object.prototype.toString.call(t[a]);"[object Object]"===o?e(t[a],n):n[t[a]]&&(t[a]=n[t[a]])}}(e,n),e}function w(e){if(void 0!==e)return JSON.parse(JSON.stringify(e))}t.PersonalizationsElementBase=function(){function a(e,t,n,i){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),v(this,(o(r={},b,new skuid.events.EventService),o(r,y,e),o(r,s,i),o(r,l,t),o(r,u,n),r))}return i(a,[{key:"getNode",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=this[c];if(!t){var n=!0===e.createNodes;(t=this[y]({createNodes:n}))&&(this[c]=t)}return t}},{key:"getSetting",value:function(e){var t=this.getNode()||{};return w(e?d(t,e):t)}},{key:"getSettings",value:function(){return this.getSetting()}},{key:"updateSettings",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=p.isEmptyObject(e),i=t.createNodes,r=void 0===i?!n:i,a=t.deferUpdate,o=void 0!==a&&a,s=t.deepMerge,l=void 0===s||s,c=t.removeNulls,u=void 0!==c&&c,d=this.getNode({createNodes:r});d&&"object"===(void 0===e?"undefined":f(e))&&(e=w(e),!1!==l?S(d,e):p.extend(d,e),!0===u&&function e(t){for(var n=Object.keys(t),i=n.length;i--;){var r=n[i],a=t[r];null===a?delete t[r]:m(a)&&(e(a),0===Object.keys(a).length&&delete t[r])}}(d),!0!==o&&this[b].publish("updated"))}},{key:"deleteSetting",value:function(e){var t=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).deferUpdate,n=void 0!==t&&t;if("string"==typeof e){for(var i=g({prefix:"sep"}),r={},a=(e=e.replace(/\\\./g,i)).split("."),o=a.length,s=r,l=0;l<o;l++){var c=a[l].replace(i,".");s[c]=l===o-1?null:{},s=s[c]}this.updateSettings(r,{removeNulls:!0,createNodes:!1,deferUpdate:n})}}},{key:"reset",value:function(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).deferUpdate,t=void 0!==e&&e,n=this.getSettings(),i=Object.keys(n).reduce(function(e,t){return(e[t]=null)||e},{});this.updateSettings(i,{removeNulls:!0,createNodes:!1,deferUpdate:t})}},{key:"subscribe",value:function(){var e;return(e=this[b]).subscribe.apply(e,arguments)}},{key:"namespace",get:function(){return this[l]}},{key:"type",get:function(){return this[u]}},{key:"id",get:function(){return this[s]}}],[{key:"prune",value:function(e,t,n){for(var i=e[t]||{},r=Object.keys(i),a=r.length;a--;){for(var o=r[a],s=i[o],l=Object.keys(s),c=l.length;c--;){var u=l[c];n(u,s)||delete s[u]}Object.keys(s).length||delete i[o]}}}]),a}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=skuid.$,f=t.ModelIdType={toString:function(){return"m"}},p=t.UniqueIdType={toString:function(){return"u"}},h=(o(i={},f,"m"),o(i,p,"u"),i),s="_defaultToken",g="_b'gosh",m="_pageXML",l=new XMLSerializer;function v(){return l.serializeToString.apply(l,arguments)}function y(e){if(!skuid.utils.isString(e)||0==e.length)return"";for(var t=0,n=e.length;n--;){t=(t<<5)-t+e.charCodeAt(n)}return skuid.utils.compressInt(t)}var c=function(){function i(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),skuid.utils.ingestConstructorArguments(this,(o(t={},g,n),o(t,m,e),t))}return a(i,[{key:"getDefaultToken",value:function(){var r=this,e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).doNotCache,t=function(){var e=r[m][0],t="uniqueid",n=e.getAttribute(t);n&&e.removeAttribute(t);var i=y(v(r[m][0]));return n&&e.setAttribute(t,n),i};return void 0!==e&&e?t():this[s]||(this[s]=t())}},{key:"getVersionToken",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:p,n=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).doNotCache,i=void 0!==n&&n;if(e){if(skuid.utils.isNumber(e)&&(e=e.toString()),!skuid.utils.isString(e))throw Error("memberId must be a string");var r=this[g],a=this[m],o=h[t],s=o+"#"+e;if(!r[s]||i){var l=d.escapeSelector("t"+e).slice(1),c=d(t===f?"> models > model[id='"+l+"']":"[uniqueid='"+l+"']",a);if(!c[0])return!1;var u=o+y(v(c[0]));if(i)return u;r[s]=u}return r[s]}}},{key:"validateVersionToken",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:p;return t===this.getVersionToken(e,n)}}]),i}();(t.default=c,skuid.utils.runningTests())&&r(skuid.testing.__internals,{PersonalizationElementDiffChecker:c,ModelIdType:f,UniqueIdType:p})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);n(206),n(207),n(208),n(209),n(210),n(211),n(212),n(213),n(214),n(215),n(216),n(217),n(218),n(219),n(220),n(221),n(222),n(4),n(224),n(226),n(227),n(228),n(229),n(230),n(37),n(231),n(232),n(233),n(234),n(236),n(237),n(238),n(239),n(240),n(241),n(242),n(243),n(244),n(245),n(246),n(247),n(248),n(249),n(250),n(252),n(253),n(254),n(258),n(259),n(260),n(261),n(262),n(263),n(265),n(266),n(267)},function(e,t,n){"use strict";!function(e){var n={};function t(e,t){n[e]=t}function i(e){return n[e]}e.snippet={registerSnippet:t,register:t,getSnippet:i,get:i,unregister:function(e){delete n[e]}}}(skuid)},function(e,t,n){"use strict";var i,r=n(0),a=(i=r)&&i.__esModule?i:{default:i};skuid.version=a.default,skuid.snippet.register("skuid.getPageAPIVersionPicklistEntries",function(){return skuid.platform.getPageAPIVersions().map(function(e){var t=e.id;return{active:!0,defaultValue:!!e.isDefault,label:t,value:t}})})},function(e,t,n){"use strict";skuid.constants={ACTION_SEQUENCE_TYPES:{REUSABLE:"reusable",EVENT_TRIGGERED:"event-triggered",HOTKEY_TRIGGERED:"hotkey-triggered",VOICE_COMMAND:"voice-command"},ACTION_TYPES:{PAGE_REDIRECT:"pageredirect",PLATFORM_ACTION:"platform-action",REDIRECT:"redirect"},AGGREGATION_TYPES:{SUM:"sum",AVERAGE:"avg",MAXIMUM:"max",MINIMUM:"min",MEDIAN:"med",COUNT:"count"},ALPHABET:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",CORDOVA:"cordova",DATASOURCE:{SEARCH_CONDITION:"__default_searchbox",GLOBAL_SEARCH_CONDITION:"search"},DATE_KEYWORDS:{NOW:"NOW",YESTERDAY:"YESTERDAY",TODAY:"TODAY",TOMORROW:"TOMORROW",LAST_90_DAYS:"LAST_90_DAYS",NEXT_90_DAYS:"NEXT_90_DAYS",LAST_N_DAYS:"LAST_N_DAYS",NEXT_N_DAYS:"NEXT_N_DAYS",N_DAYS_AGO:"N_DAYS_AGO",LAST_WEEK:"LAST_WEEK",THIS_WEEK:"THIS_WEEK",NEXT_WEEK:"NEXT_WEEK",LAST_N_WEEKS:"LAST_N_WEEKS",NEXT_N_WEEKS:"NEXT_N_WEEKS",N_WEEKS_AGO:"N_WEEKS_AGO",LAST_MONTH:"LAST_MONTH",THIS_MONTH:"THIS_MONTH",NEXT_MONTH:"NEXT_MONTH",LAST_N_MONTHS:"LAST_N_MONTHS",NEXT_N_MONTHS:"NEXT_N_MONTHS",N_MONTHS_AGO:"N_MONTHS_AGO",LAST_QUARTER:"LAST_QUARTER",THIS_QUARTER:"THIS_QUARTER",NEXT_QUARTER:"NEXT_QUARTER",LAST_N_QUARTERS:"LAST_N_QUARTERS",NEXT_N_QUARTERS:"NEXT_N_QUARTERS",N_QUARTERS_AGO:"N_QUARTERS_AGO",LAST_YEAR:"LAST_YEAR",THIS_YEAR:"THIS_YEAR",NEXT_YEAR:"NEXT_YEAR",LAST_N_YEARS:"LAST_N_YEARS",NEXT_N_YEARS:"NEXT_N_YEARS",N_YEARS_AGO:"N_YEARS_AGO"},DATE_STORAGE_FORMAT:"YYYY-MM-DD",DIGITS:"1234567890",DISPLAY_TYPES:{ADDRESS:"ADDRESS",ANYTYPE:"ANYTYPE",ARRAY:"ARRAY",BASE64:"BASE64",BOOLEAN:"BOOLEAN",BUTTON:"BUTTON",BUTTONGROUP:"BUTTONGROUP",COMBOBOX:"COMBOBOX",CURRENCY:"CURRENCY",CUSTOM:"CUSTOM",DATE:"DATE",DATETIME:"DATETIME",DOUBLE:"DOUBLE",EMAIL:"EMAIL",ENCRYPTEDSTRING:"ENCRYPTEDSTRING",FORMULA:"FORMULA",ID:"ID",IMAGE:"IMAGE",INTEGER:"INTEGER",LOCATION:"LOCATION",MULTIBUTTONGROUP:"MULTIBUTTONGROUP",MULTIPICKLIST:"MULTIPICKLIST",NUMBER:"NUMBER",OBJECT:"OBJECT",PHONE:"PHONE",PICKLIST:"PICKLIST",PERCENT:"PERCENT",REFERENCE:"REFERENCE",STRING:"STRING",TEXT:"TEXT",TEXTAREA:"TEXTAREA",RICHTEXT:"RICHTEXT",TIME:"TIME",URL:"URL",UUID:"UUID"},ENVIRONMENTS:{DEV:"development",PROD:"production",TEST:"test"},EVENT_SCOPES:{COMPONENT:"component",MODEL:"model",PAGE:"page",SKUID:"skuid",GLOBAL:"global"},FIELD_TYPES:{BUTTON:"BUTTON",CHILDREL:"CHILDREL",COMBO:"COMBO",FILE:"FILE",IMAGE:"IMAGE"},FLEX:{DIRECTION:{"x-axis":"row","y-axis":"column",auto:null},ALIGNMENT:{top:"flex-start",middle:"center",bottom:"flex-end",stretch:"stretch",baseline:"baseline",auto:"auto"},JUSTIFY:{left:"flex-start",center:"center",right:"flex-end",justify:"space-between",spaced:"space-around",auto:null}},HTTP_VERBS:{GET:"GET",PATCH:"PATCH",POST:"POST",PUT:"PUT",DELETE:"DELETE",MERGE:"MERGE"},JS_TYPES:{BOOLEAN:"boolean",NUMBER:"number",STRING:"string",OBJECT:"object",FUNCTION:"function",UNDEFINED:"undefined"},LIGHTNING:"lightning",LOCAL:"local",LOG_LEVELS:{ERROR:"error",WARNING:"warning",INFO:"info"},MAPPED_STYLE_SETTINGS_TOKEN_NAME:"styleSettingVariantNameMappings",MEDIA_QUERY_BREAKPOINTS:{medium:1024,small:480},MERGE_CONTEXTS:{GLOBAL:"global",MODEL:"model",ROW:"row"},MIME_TYPES:{JSON:"application/json",ZIP:"application/zip",FORM_URL_ENCODED:"application/x-www-form-urlencoded"},NATIVE:"skuid-platform",SALESFORCE:"salesforce",VALUE_SOURCES:{BLANK:"blank",DS_USER_INFO:"datasourceuserinfo",FIELD_VALUE:"fieldvalue",FORMULA:"formula",MODEL_MERGE:"modelmerge",PARAM:"param",USER_INFO:"userinfo"},VISUALFORCE:"visualforce",WEB_ICON_SET_LABELS:{"font-awesome":"Font Awesome 4","foundation-icons":"Foundation","icons8-win10":"Icons8 Windows 10",ionicons:"Ion","material-icons":"Material","lightning-icons":"Lightning Design"},WEB_ICON_SET_PREFIXES:["font-awesome","foundation-icons","icons8-win10","ionicons","material-icons","lightning-icons"]}},function(e,t,n){"use strict";var o=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();!function(n,t){var i,e=n.themeSettings={},r=n.utils;e.load=function(e){i=new a(t.extend({},n.utils.parseAsJSONIfString(e))),n.events.publish("ui.themeSettings.loaded")},e.getAll=function(){return i&&i.getAll()},e.getThemeSettings=function(){return i};var a=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.themeSettingsMap=e,this._id=n.utils.rfc4122v4GUID()}return o(t,[{key:"getAll",value:function(){return this.themeSettingsMap}},{key:"setAll",value:function(e){this.themeSettingsMap=e}},{key:"get",value:function(e){return r.getObjectProperty(this.themeSettingsMap,e)}},{key:"set",value:function(e,t){r.setObjectProperty(this.themeSettingsMap,e,t)}},{key:"unset",value:function(e){n.utils.unsetObjectProperty(this.themeSettingsMap,e)}},{key:"getId",value:function(){return this._id}}]),t}();e.ThemeSettings=a}(skuid,skuid.$)},function(e,t,n){"use strict";!function(c,u,o){var d=c.webfonts={attemptedToLoadFonts:!1,fontsloaded:!1},s="/resource/skuid__Fonts/";function f(){return c.utils}u.extend(d,{haveFontsLoaded:function(){return d.fontsloaded},load:function(e){function t(){var e=window.sforce,t=e&&e._consoleApiUrl,n=function(){c.events.publish("ui.fontsloaded")};d.fontsloaded=!0,t?c.load.js(t).always(function(){n()}):n()}e=f().parseAsJSONIfString(e);var n,i,r,a=d.processFontConfig(e&&e.fontConfig),o=e?e.cssResources:null,s=f().getSafeRelativeUrl,l=u("link#themeLink")[0];if(a.custom||a.google||a.typekit?(a.active=t,a.inactive=t,d.attemptedToLoadFonts=!0,WebFont.load(a)):t(),o)for(i=0;i<o.length;i++)n=o[i],r=null,f().isString(n)?r=n:"static"===n.type?(r=c.platform.themeBuilder.getThemeResourceUrl(n),u("body").find('link[href="'+r.substring(r.indexOf("force.com")).replace("force.com","")+'"]').remove()):r=n.url||n.path,r&&f().loadCSS(s(r),{insertAfter:l})},processFontConfig:function(e){e===o&&(e={});var t=f().size,i=f().getSafeRelativeUrl,n=u.extend({},e),r=n.custom,a=f().inPlatform(c.constants.LIGHTNING);return r!==o&&(a&&r.localurls&&r.localurls.length&&(r.localurls.forEach(function(e,t){r.urls[t]=e}),delete r.localurls),r.urls&&r.urls.length&&r.urls.forEach(function(e,t){var n=e;n=function(e){return f().startsWith(e,s)}(e)?c.platform.getResourceUrl({name:"Fonts",ns:"skuid",path:e.substring(s.length),modstamp:c.version?c.version.date:null}):i(e),r.urls[t]=n}),t(r)&&r.families!==o&&r.families.length||delete n.custom),(r=n.google)!==o&&(t(r)&&r.families!==o&&r.families.length||delete n.google),(r=n.typekit)!==o&&(t(r)&&r.id!==o&&"string"==typeof r.id||delete n.typekit),n}})}(skuid,skuid.$)},function(e,t,n){"use strict";var i,a;i=skuid,(a=skuid.$).fn.skootip=function(e,t){var r,n={position:{my:"center bottom",at:"center top-10",collision:"fit",using:function(e,t){a(this).css({top:e.top,left:e.left});var n=e.left+t.element.width/2,i=t.target.left+t.target.width/2;r=Math.floor(i-n-4)}},show:{delay:700},open:function(e,t){var n=a("<div>").addClass("sk-hastooltip").css("left",r+"px");t.tooltip.append(n)}};return e&&this.attr("title",e),t&&a.extend(!0,n,t),i.utils._oniOS()?this:this.tooltip(n)}},function(e,t,n){"use strict";var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};!function(t){var e=t.events,n=e.subscribeOnce,i=e.getComponentEvent,r=e.getRegisteredComponentEvents,a=e.registerComponentEvents,o={};function s(i){for(var e=arguments.length,r=Array(1<e?e-1:0),t=1;t<e;t++)r[t-1]=arguments[t];return function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.apply(void 0,r.concat(t))}}l(t.events,{subscribeOnce:function(){var e=n.apply(void 0,arguments);return t.utils.isPromise(e)?t.$.when(e):e},getComponentEvent:s(i,o),getRegisteredComponentEvents:s(r,o),registerComponentEvents:s(a,o,t)})}(skuid)},function(e,t,n){"use strict";!function(g,m,c){var u=g.data={},v={},y=g.constants.DISPLAY_TYPES.REFERENCE,a=0,s=0;function b(){return g.utils}function l(e,t){var n=e[t],i=v[e];i||(i=v[n]={}),m.extend(i,e)}function d(e){var r={},h={};return m.each(e,function(n,e){var i,c=e.objectType,u=e.dataSourceName,d=e.idField,f=e.fields,t=e.records,p=r[n]={};m.each(t,function(e,r){var a,t={},o={},s=0,l={};m.each(f,function(e,t){o[t]=1,s++}),s&&((a=v[r])&&m.each(o,function(e){var t=b().getObjectProperty(a,e);b().isUndefined(t)||(l[e]=t,delete o[e],s--)}),s&&(m.each(g.model.list(),function(e,n){if(n.data&&n.data.length&&(n.objectName===c&&(a=n.getRowById(r))&&m.each(o,function(e){e in a&&(l[e]=n.getFieldValue(a,e,!0),delete o[e],s--)}),s)){var i={},t=n.fields;t&&t.length&&m.each(t,function(e,n){var t=n.referenceTo;n.displaytype===y&&t&&t.length&&m.each(t,function(e,t){if(t.objectName===c)return i[n.id]=n.rel,!1})}),b().size(i)&&m.each(i,function(t,i){if(m.each(n.data,function(e,n){if(b().getObjectProperty(n,t)===r&&(m.each(o,function(e){var t=b().getObjectProperty(n,i+"."+e);b().isUndefined(t)||(l[e]=t,delete o[e],s--)}),!s))return!1}),!s)return!1})}}),s&&((i=h[c])||(i=h[n]={objectType:c,dataSourceName:u,idField:d,fields:{},records:[]}),i.records.push(r),i.fields[d]=1,m.each(o,function(e){i.fields[e]=1})))),m.extend(t,l),p[r]={record:t,isDone:0===s}})}),{data:r,serverRequests:h}}function e(e){try{window[e]}catch(e){return{getItem:function(){},setItem:function(){}}}return window[e]}function f(e){var n=[];m.each(e,function(e,t){n.push([e,t])}),n.sort(function(e,t){return e[1]-t[1]});var i=[];return m.each(n,function(e,t){i.push(t[0])}),i}u.get=function(e){var n,t,i=d(e),r=i.serverRequests,o=i.data;return b().size(r)?(n=a++,t=m.map(r,function(e){var t=new g.model.Model({conditions:[{field:e.idField,operator:"IN",type:"multiple",values:e.records}],dataSource:g.dataSource.get(e.dataSourceName),doClone:!1,doQuery:!0,fields:m.map(e.fields,function(e,t){return{id:t}}),id:"data_req_"+b().generateGUID(),objectName:e.objectType,recordsLimit:e.records.length});return t.calloutIterator=n,t.lastSuccessfulCallout=function(){return s},t}),r={},g.model.load(t).then(function(){return m.each(t,function(e,t){var r=t.getIdField(),n=t.getKeyPrefix(),a=o[n];m.each(t.data,function(e,t){"attributes"in t&&delete t.attributes;var n=t[r],i=a[n];i||(i=a[n]={}),m.extend(i,t),i.isDone=!0,l(t,r)})}),s=t[0].lastSuccessfulCallout,o})):m.Deferred().resolve(o)},u.getSync=function(e){var t=d(e);return b().size(t.serverRequests)?null:t.data},u.add=l,u.localStorage=e("localStorage"),u.sessionStorage=e("sessionStorage");var p="TIME_CACHED_REPO";function t(o){var r,s={},n={},a={},l={};return{setItem:function(e,t,n){if(l[e]!==t||n){var i=c.compress(t);if(i&&!(45e6<=i.length)){var r=!1;for(s=s||JSON.parse(this.getItem(p)||"{}");!r;)try{u[o].setItem(e,i),e!==p&&(s[e]=Date.now(),l[e]=t),r=!0}catch(e){if(!(-1<e.name.toLowerCase().indexOf("quota")))throw e;var a=f(s)[0];if(!a)throw e;u[o].removeItem(a),delete s[a]}e!==p&&this.setItem(p,JSON.stringify(s))}}},batchSetItem:function(e,t){var n=this;if(a[e]!==t){a[e]=t,l[e]=t;var i=function(){m.each(a,function(e,t){n.setItem(e,t,!0),delete a[e]})};if(!r){if(g.utils.runningTests())return r=m.when().then(function(){i(),r=void 0});r=setTimeout(function(){i(),r=void 0},500)}}},getItem:function(e){if(l[e])return l[e];var t=g.data[o].getItem(e);e!==p&&(s[e]=Date.now(),this.batchSetItem(p,JSON.stringify(s)));var n=c.decompress(t)||t;return l[e]=n},getItemJSON:function(e){var t=this.getItem(e);return n[t]?n[t]:n[t]=b().parseAsJSONIfString(t)},removeItem:function(e){u[o].removeItem(e);var t=l[e];t&&delete n[t],delete l[e],delete s[e],this.batchSetItem(p,JSON.stringify(s))},clear:function(){u[o].clear(),this._internals.inMemCache=l={},this._internals.timeCache=s={},this._internals.jsonParsedCache=n={}},_internals:{timeCache:s,jsonParsedCache:n,updatesToMake:a,inMemCache:l,TIME_CACHED_KEY:p}}}u.v2={localStorage:t("localStorage"),sessionStorage:t("sessionStorage")}}(skuid,skuid.$,window.LZString)},function(e,t,n){"use strict";!function(f,u){var s,t,n=f.time={},l=(new Date).getTimezoneOffset(),c=(new Date).getTimezoneOffset(),d=!1,p="moment",h=function(e){return void 0===e};function a(e){return"[object Date]"===Object.prototype.toString.call(e)}function g(){if(t)return t;var e=window.Intl&&window.Intl.DateTimeFormat&&window.Intl.DateTimeFormat();return e&&(e=e.resolved?e.resolved.timeZone:e.resolvedOptions?e.resolvedOptions().timeZone:null),!e&&f[p]&&(e=f[p].tz.guess()),t=e}function m(){return f.utils.loadJS(f.platform.getResourceUrl({ns:"skuid",path:"js/lib/moment.js"}))}function i(){var t=function(e){return f.settings.get("userLocale",e)};f[p].updateLocale("sk-user-locale",{months:t("monthNames"),monthsShort:t("monthNamesShort"),weekdays:t("dayNames"),weekdaysShort:t("dayNamesShort"),weekdaysMin:t("dayNamesMin"),meridiem:function(e){return e<12?t("amPm")[0]:t("amPm")[1]}})}function v(e){if(!e)return!1;if(a(e))return e;var t=e.split&&e.split("T"),n=t&&t.length&&t[0].split("-");return!(!n||3!==n.length)&&new Date(n[0],n[1]-1,n[2])}function r(e){if(e){if(a(e)){var t=e.getMonth()-0+1+"",n=e.getDate()+"";return 1===t.length&&(t="0"+t),1===n.length&&(n="0"+n),e.getFullYear()+"-"+t+"-"+n}return f.utils.isString(e)&&3===e.split("-").length?e:null}return null}function o(e){return y(k(e))}function y(e){return e?u.datepicker.formatDate(f.utils.userLocale.dateFormat,e):""}var b=/^(\d{4}|[+\-]\d{6})(?:-(\d{2})(?:-(\d{2}))?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;function S(e){var t=f.utils;if(!e&&0!==e)return!1;var n,i=Date.parse,r=[1,4,5,6,7,10,11],a=0;if(n=b.exec(e)){for(var o,s=0;o=r[s];++s)n[o]=+n[o]||0;return n[2]=(+n[2]||1)-1,n[3]=+n[3]||1,"Z"===n[8]||t.isUndefined(n[9])||(a=60*n[10]+n[11],"+"===n[9]&&(a=0-a)),Date.UTC(n[1],n[2],n[3],n[4],n[5]+a,n[6],n[7])}return t.isString(e)&&-1!==e.split(":")[0].indexOf("N_")?NaN:i?i(e):NaN}function w(e){if(a(e))return e;var t=S(e);return!isNaN(t)&&!1!==t&&new Date(t)}function C(e){return d?f[p].tz.zone(s).offset(e):c}function I(e){return d?f[p].tz.zone(g()).offset(e):l}function k(e){if(!e)return!1;var t=e.getTime(),n=new Date(t);return n.setMinutes(n.getMinutes()-(C(t)-I(t))),n}function T(e){if(!e)return!1;var t=e.getTime(),n=new Date(t);return n.setMinutes(e.getMinutes()+(C(t)-I(t))),n}function x(n,e){if(!e&&0!==e)return"";f.utils.isString(e)&&(e=w(e));var i,r=function(e){var t=i+1<n.length&&n.charAt(i+1)===e;return t&&i++,t},t=function(e){return e.getHours()%12},a=function(e,t,n){var i=""+t;if(r(e))for(;i.length<n;)i="0"+i;return i},o="",s=!1;if(e)for(i=0;i<n.length;i++)if(s)"'"!==n.charAt(i)||r("'")?o+=n.charAt(i):s=!1;else switch(n.charAt(i)){case"a":o+=R(e);break;case"h":var l=t(e);0===l&&(l=12),o+=a("h",l,2);break;case"K":o+=a("h",t(e),2);break;case"k":o+=a("k",e.getHours()+1,2);break;case"H":o+=a("H",e.getHours(),2);break;case"m":o+=a("m",e.getMinutes(),2);break;case"s":o+=a("s",e.getSeconds(),2);break;case"S":o+=a("S",e.getMilliseconds(),3);break;case"Z":var c=I(e),u=Math.floor(Math.abs(c)/60),d=Math.abs(c)-60*u;u<10&&(u="0"+u),d<10&&(d="0"+d),o+=(c<0?"+":"-")+u+d;break;case"'":r("'")?o+="'":s=!0;break;default:o+=n.charAt(i)}return o}function D(e,t){var n,i,r=f.utils,a=r.isUndefined;return e||0===e?(r.isString(e)?(e=(i=(n=b.exec(e))&&!a(n[3])&&a(n[4]))?v(e):w(e))&&!i&&(e=k(e)):r.isNumber(e)&&(e=new Date(e)),e&&r.isDate(e)?(t&&(e=Date.prototype[t].call(e)),e):null):null}function R(e){var t=f.time.amPm,n=D(e,"getHours");return null!==n?11<n?t[1]:t[0]:null}u.each({getYear:"getFullYear",getDay:"getDate",getHour:"getHours",getMinute:"getMinutes",getSecond:"getSeconds",getMillisecond:"getMilliseconds",getUTCYear:"getUTCFullYear",getUTCDay:"getUTCDate",getUTCHour:"getUTCHours",getUTCMinute:"getUTCMinutes",getUTCSecond:"getUTCSeconds"},function(e,t){n[e]=function(e){return D(e,t)}});var E="YEAR",A="QUARTER",F="MONTH",P="WEEK",O="DAY",N="HOUR",_="MINUTE",M="SECOND";function L(e,t,n){n=n||{};var i,r,a=(t=t||{}).years||0,o=t.quarters||0,s=(t.months||0)+3*o,l=t.weeks||0,c=t.days||0,u=(t.hours||0)+24*c+168*l,d=t.minutes||0,f=t.seconds||0,p=t.milliseconds||0,h=n.baseDate,g=n.useDeviceTimeZone||n.useDeviceTimezone;switch(r=h?new Date(h.getTime()):g?new Date:k(new Date),e){case E:r.setMonth(0);case A:r.setMonth(r.getMonth()-r.getMonth()%3);case F:r.setDate(1);case O:r.setHours(0);case N:r.setMinutes(0);case _:r.setSeconds(0);case M:r.setMilliseconds(0);break;case P:r.setHours(-24*r.getDay()),r.setMinutes(0),r.setSeconds(0),r.setMilliseconds(0)}return a&&r.setFullYear(r.getFullYear()+a),s&&(i=(r.getMonth()+s)%12,r.setMonth(r.getMonth()+s),r.getMonth()>i&&r.setDate(-r.getDate())),u&&r.setHours(r.getHours()+u),d&&r.setMinutes(r.getMinutes()+d),f&&r.setSeconds(r.getSeconds()+f),p&&r.setMilliseconds(r.getMilliseconds()+p),h||g||(r=T(r)),r}var e=f.constants.DATE_KEYWORDS,U=e.NOW,j=e.YESTERDAY,B=e.TODAY,V=e.TOMORROW,z=e.LAST_90_DAYS,G=e.NEXT_90_DAYS,H=e.LAST_N_DAYS,q=e.NEXT_N_DAYS,$=e.N_DAYS_AGO,W=e.LAST_WEEK,Y=e.THIS_WEEK,K=e.NEXT_WEEK,X=e.LAST_N_WEEKS,J=e.NEXT_N_WEEKS,Q=e.N_WEEKS_AGO,Z=e.LAST_MONTH,ee=e.THIS_MONTH,te=e.NEXT_MONTH,ne=e.LAST_N_MONTHS,ie=e.NEXT_N_MONTHS,re=e.N_MONTHS_AGO,ae=e.LAST_QUARTER,oe=e.THIS_QUARTER,se=e.NEXT_QUARTER,le=e.LAST_N_QUARTERS,ce=e.NEXT_N_QUARTERS,ue=e.N_QUARTERS_AGO,de=e.LAST_YEAR,fe=e.THIS_YEAR,pe=e.NEXT_YEAR,he=e.LAST_N_YEARS,ge=e.NEXT_N_YEARS,me=e.N_YEARS_AGO;function ve(e){if("string"!=typeof e||0===e.length)return e;var t,n,i,r=L,a=function(e){return r(O,e)},o=function(e){return r(P,e)},s=function(e){return r(F,e)},l=function(e){return r(A,e)},c=function(e){return r(E,e)};switch(e=e.split(":"),u.isNumeric(e[1])&&(i=parseInt(e[1])),e[0]){case U:t=n=new Date;break;case j:t=a({days:-1}),n=a();break;case B:t=a(),n=a({days:1});break;case V:t=a({days:1}),n=a({days:2});break;case z:t=a({days:-90}),n=a();break;case G:t=a({days:1}),n=a({days:91});break;case H:if(!i)return e;t=a({days:-i}),n=a();break;case q:if(!i)return e;t=a({days:1}),n=a({days:i+1});break;case $:if(!i)return e;t=a({days:-i}),n=a({days:1-i});break;case W:t=o({weeks:-1}),n=o();break;case Y:t=o(),n=o({weeks:1});break;case K:t=o({weeks:1}),n=o({weeks:2});break;case X:if(!i)return e;t=o({weeks:-i}),n=o();break;case J:if(!i)return e;t=o({weeks:1}),n=o({weeks:1+i});break;case Q:if(!i)return e;t=o({weeks:-i}),n=o({weeks:1-i});break;case Z:t=s({months:-1}),n=s();break;case ee:t=s(),n=s({months:1});break;case te:t=s({months:1}),n=s({months:2});break;case ne:if(!i)return e;t=s({months:-i}),n=s();break;case ie:if(!i)return e;t=s({months:1}),n=s({months:1+i});break;case re:if(!i)return e;t=s({months:-i}),n=s({months:1-i});break;case ae:t=l({quarters:-1}),n=l();break;case oe:t=l(),n=l({quarters:1});break;case se:t=l({quarters:1}),n=l({quarters:2});break;case le:if(!i)return e;t=l({quarters:-i}),n=l();break;case ce:if(!i)return e;t=l({quarters:1}),n=l({quarters:1+i});break;case ue:if(!i)return e;t=l({quarters:-i}),n=l({quarters:1-i});break;case de:t=c({years:-1}),n=c();break;case fe:t=c(),n=c({years:1});break;case pe:t=c({years:1}),n=c({years:2});break;case he:if(!i)return e;t=c({years:-i}),n=c();break;case ge:if(!i)return e;t=c({years:1}),n=c({years:1+i});break;case me:if(!i)return e;t=c({years:-i}),n=c({years:1-i});break;default:return e[0]}return[t,n]}u.extend(n,{formatDate:function(e,t){if(void 0===t||void 0===e)return"";var n,i,r=f.utils.isString;return i=r(t)&&!r(e)&&a(e)?(n=e,t):(r(t)&&(t=w(t)),n=t,e),u.datepicker.formatDate(i,n)},formatTime:x,getAnchoredDate:L,getDayName:function(e){var t=D(e,"getDay");return null!==t?f.time.dayNames[t]:null},getDayNameShort:function(e){var t=D(e,"getDay");return null!==t?f.time.dayNamesShort[t]:null},getDayOfWeek:function(e){var t=D(e,"getDay");return null!==t?1+t:null},getEndOfDateForUserTimezone:function(e){var t=new Date,n=e.split("-");return t.setFullYear(n[0],n[1]-1,n[2]),t.setHours(23,59,59,999),T(t)},getLocalDateTime:k,getMonth:function(e){var t=D(e,"getMonth");return null!==t?1+t:null},getMonthName:function(e){var t=D(e,"getMonth");return null!==t?f.time.monthNames[t]:null},getMonthNameShort:function(e){var t=D(e,"getMonth");return null!==t?f.time.monthNamesShort[t]:null},getParseDateTimeResult:S,getPeriod:R,getRealJSDateTimeFromLocal:T,getSFDate:r,getSFDateTime:function(e){return e&&"function"==typeof e.toISOString?e.toISOString():e&&f.utils.isString(e)?e:null},getStartOfDateForUserTimezone:function(e){var t=new Date,n=e.split("-");return t.setFullYear(n[0],n[1]-1,n[2]),t.setHours(0,0,0,0),T(t)},getUTCDayOfWeek:function(e){var t=D(e,"getUTCDay");return null!==t?1+t:null},getUTCMonth:function(e){var t=D(e,"getUTCMonth");return null!==t?1+t:null},makeFormattedDate:function(e){return e?1===(t=f.utils.isDate(e)?r(e):e).split(" ").length?y(v(t)):o(v(t)):"";var t},makeFormattedDateFromJS:o,makeFormattedDateFromLocal:y,makeFormattedLongDateTime:function(e){if(e){var t=k(a(e)?e:w(e)),n=f.utils.userLocale;if(t)return n.showTimeBeforeDate?x(n.timeFormat,t)+" "+y(t):y(t)+" "+x(n.timeFormat,t)}return""},parseDateString:w,parseDateTimeString:w,parseSFDate:v,parseSFDateTime:function(e){return w(e)},resolveDateKeyword:ve,resolveDateTimeValue:function(e,t){t||(t={});var n=f.utils,i=t.fieldType,r=t.useLocalTimeZone?k:function(e){return e},a=f.constants.DISPLAY_TYPES,o=a.DATE,s=a.DATETIME,l=void 0;if(n.isDate(e))return e;if(n.isNumber(e))return new Date(e);if(n.isString(e)){switch(i||(0<=e.indexOf("T")?s:o)){case o:l=v(e);break;case s:l=r(w(e))}if(l)return l;if(l=ve(e),u.isArray(l))return r(l[0])}return null},roundedNow:function(){var e=new Date;return e.setMilliseconds(0),e},initializeMomentLocale:function(){var e,t=f.utils;return(e=f[p]?t.resolve():m()).then(function(){i(),f.events.subscribe("skuid.settings.modified:userLocale",i)}).catch(function(){throw"Unable to initialize moment locale information."}),e.promise()},setUserTimeZone:function(t,n){if(h(t))throw"A valid TimeZone Id is required.";var e=s,i=c,r=g(),a=!h(n)&&i!==n||e!==t,o=f.utils.resolve;return a?((h(r)?l===n:r===t)||f[p]?o():m()).then(function(){return function(){var e=f[p];d=!h(e),s=t,c=e?e.tz.zone(s).offset(new Date):h(n)?c:n}(),f.events.publish("ui.timeZoneChanged",[{oldTimeZone:e,newTimeZone:t}]),{changed:!0}}).catch(function(){throw"Unable to load information for timezone."}):o({changed:!1})},getUserTimeZone:function(){return s},getDeviceTimeZone:g,setUserTimeZoneOffset:function(e){c=e}})}(skuid,skuid.$)},function(e,t,n){"use strict";!function(u,d){var e=u.label={},i={},a={},r=void 0;function s(e,t){if(e in i)return i[e];if(!r&&Object.keys(i).length&&(r={},d.each(i,function(e,t){e&&(r[e.toLowerCase()]=t)})),r&&e in r)return r[e];if(-1===e.indexOf("__")){var n="skuid__"+e;if(n in i)return i[n];if(r&&n in r)return r[n]}return t||""}d.extend(e,{add:function(e){d.extend(i,e)},read:s,labelize:function(e,t,n){var i=u.label.parse(e,t,n),r=i[0],a=i[1],o="";return d(a).each(function(e){o+=this;var t=r[e];t&&(o+=s(t.substring(t.indexOf(".")+1,t.length-1)))}),o},merge:function(e){var t="string"==typeof e,n=t?e:e.template,i=(t?Array.prototype.slice.call(arguments,1):e.data)||[],r=e&&e.leftMerge,a=e&&e.rightMerge,o=u.label.parse(n,r,a),s=o[0],l=o[1],c="";return d(l).each(function(e){c+=this;var t=s[e];t&&(c+=i[t.substring(1,t.length-1)])}),c},parse:function(e,t,n){t||(t="{"),n||(n="}");var i=t+"__"+n,r=i in a?a[i]:a[i]=new RegExp("\\"+t+"[^"+t+"\\"+n+"]+\\"+n,"g");return[e.match(r)||[],e.split(r)]},getAll:function(){return i},map:i}),u.$L=s}(skuid,skuid.$)},function(e,t,n){"use strict";!function(e){var t=e.currency={},d=e.$,f=e.utils,n={AED:".",AFN:"",ALL:"Lek",AMD:"",AOA:"Kz",ARS:"$",AWG:"f",AUD:"$",BSD:"$",BBD:"$",BYR:"p.",BZD:"BZ$",BMD:"$",BOB:"$b",BAM:"KM",BWP:"P",BRL:"R$",BND:"$",BDT:"",BGN:"",BHD:"..",BIF:"Fr",BOV:"-",BRB:"",BTN:"Nu.",CAD:"$",KYD:"$",CLP:"$",CNY:"",COP:"$",CRC:"c",HRK:"kn",CZK:"Kc",CDF:"Fr",CLF:"UF",CUP:"$",CVE:"Esc",DKK:"kr",DOP:"RD$",DJF:"Fr",DZD:".",ERN:"Nfk",ETB:"Br",XCD:"$",EGP:"",SVC:"$",EEK:"kr",EUR:"",FKP:"",FJD:"$",GBP:"",GHC:"c",GIP:"",GTQ:"Q",GGP:"",GYD:"$",GEL:"",GHS:"",GMD:"D",GNF:"Fr",HTG:"G",HNL:"L",HKD:"$",HUF:"Ft",ISK:"kr",IDR:"Rp",IMP:"",ILS:"",INR:"",IQD:".",IRR:"",JMD:"J$",JPY:"",JEP:"",JOD:".",KES:"Sh",KGS:"",KHR:"",KMF:"Fr",KPW:"",KRW:"",KWD:".",KZT:"",LAK:"",LKR:"",LSL:"L",LYD:".",LVL:"Ls",LBP:"",LRD:"$",LTL:"Lt",MYR:"RM",MXN:"$",MZN:"MT",MAD:". .",MDL:"L",MGA:"Ar",MKD:"",MMK:"Ks",MNT:"",MOP:"P",MRO:"UM",MUR:"",MVR:".",MWK:"MK",MXV:"$",NGN:"",NPR:"",NAD:"$",ANG:"f",NZD:"$",NIO:"C$",NOK:"kr",OMR:"..",PGK:"K",PHP:"",PKR:"",PAB:"B/.",PYG:"Gs",PEN:"S/.",PLN:"zl",QAR:".",RSD:".",RUB:"",RWF:"Fr",RON:"lei",SHP:"",SGD:"$",SBD:"$",SOS:"S",ZAR:"R",SEK:"kr",CHF:"CHF",SRD:"$",SYP:"",SAR:".",SCR:"",SDG:"..",SLL:"Le",SSP:"",STD:"Db",SZL:"L",THB:"",TJS:"",TMT:"m",TND:".",TOP:"T$",TZS:"Sh",TWD:"NT$",TTD:"TT$",TRY:"TL",TRL:"",TVD:"$",USD:"$",UYU:"$U",UAH:"",UGX:"Sh",UZS:"",VND:"",VUV:"Vt",VEF:"Bs",WST:"T",XAF:"Fr",XOF:"Fr",XPF:"Fr",YER:"",ZMK:"ZK",ZWL:"Z$",ZWD:"Z$"};function p(e){var t=n[e];return t||"$"}d.extend(t,{getConversionRates:function(){return f.conversionRates||[]},getDisplayValue:function(e,t){t||(t={});var n,i,r,a=f.userLocale,o=f.userInfo.defaultCurrency,s=t.decimalPlaces||0,l=t.decimalsSeparator||a.decimalsSeparator||".",c=t.thousandsSeparator||a.thousandsSeparator||",",u=t.recordCurrency;return e||0===e||(e=""),""!==(i=e)&&(i=d.number(e,s,l,c),f.isMultiCurrencyOrganization?(i=u+" "+i,u&&u!=o&&(n=f.convertCurrency(e,u,o))&&n!=e&&(i+=" ("+o+" "+d.number(n,s,l,c)+")")):((r=p(o)).match(/^(\$?[a-zA-Z\.\/]+\$?)/)&&(r+=" "),i="-"===i.charAt(0)?"-"+r+i.slice(1):r+i)),i},getSymbol:p})}(skuid)},function(e,t,n){"use strict";var i,r,a,o;i=skuid,r=skuid.$,a=i.componentType={},o={},r.extend(a,{get:function(e){if(e)return o[e]},register:function(e,t){(o[e]=t).type=e,t.events&&i.events.registerComponentEvents(e,t.events)},unregister:function(e){e&&(i.utils.isString(e)&&e in o?delete o[e]:e instanceof Array&&r.each(e,function(e,t){t&&t in o&&delete o[t]}))},list:function(){return r.map(o,function(e){return e})},map:function(){return o},getAll:function(){return Object.keys(o)}})},function(e,t,n){"use strict";var E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(d,h){var u=h(document.body),e=d.component={},g=d.events,m=d.utils,t=d.constants,f={},p={},v={},y={},b=function(e){return"There is no Skuid Component Type called '"+e+"'"},s="childComponents",S="_skuidComponentEventProperties",w="_skuidComponentEventSubscriptions",C="_crEventSubscriptions",I="_eventService",k="_skuidProperties",T=t.EVENT_SCOPES,n=t.LOG_LEVELS,i=n.WARNING,c=n.ERROR;function l(e,t){var i,r,a,o=[],n=e.is("conditions")?e.children():e.children("conditions").first().children(),s=e.attr("rowid");n&&(t&&(a=t.model,r=t.rows,i=t.row||r&&r.length&&r[0]||null),n.each(function(){var e=new d.model.Condition(h(this)),t=e.mergeField;if("contextrow"==e.type){var n=s;!n&&i&&a&&(n=a.getFieldValue(i,t,!0)),n&&(e.value=n)}else"contextrows"==e.type&&a&&r&&r.length&&(e.values=r.map(function(e){return a.getFieldValue(e,t,!0)}));o.push(e)}));return o}function x(e){var t=e.type(),n=e.id();!t||t in y||(y[t]=[]),y[t].push(e),v[e.getFullyQualifiedId()]=f[n]=e,p[n]||(p[n]=[]),p[n].push(e)}function r(e,t){if(!0===(2<arguments.length&&void 0!==arguments[2]&&arguments[2]))return p[e]||[];var n=m.getFullyQualifiedId(e,t),i=v[n]||f[e];return t&&i&&i.getParentPageId()!==t?void 0:i}function D(e,t,n,i){var r=void 0,a=void 0;if(1==arguments.length){var o=arguments[0];e=o.element,t=o.xmlDefinition||o.definition,n=o.type||t&&t.componentType,r=o.context,i=o.options,a=o.state}if(i||(i={}),!n&&!t)throw"Either a Component Type or XML Definition must be provided.";if(e?e.jquery||(e=h(e)):e=h("<div>"),t&&(t instanceof d.$||m.isString(t)||t instanceof Element?(m.isString(t)&&(t=m.makeXMLDoc(t)),t.jquery||(t=h(t)),t.length&&(t=t.first()),n||(n=t.prop("tagName")),t.attr("uniqueid")&&(i.uniqueId=t.attr("uniqueid")),t.attr("cssclass")&&e.addClass(t.attr("cssclass"))):t.uniqueId=i.uniqueId=t.uniqueId||m.generateUniqueId()),d.componentType.get(n)){var s,l,c,u=new R(e,n,h.extend(i,{state:a}));return t&&(t instanceof h&&(u.xmlDefinition=u.definition=t,s=t.attr(u.modelAttributeName())),t instanceof h||(t.context=r||t.context,t.uniqueId||(t.uniqueId=u.id()),u.set(t))),s&&(l=d.$M(s)),l&&(c=l.loadAsync),i.ignoreConditionalRendering?u.render({context:r,xmlDefinition:t}):u.conditionallyRender({context:r,xmlDefinition:t}),c&&!u.onlyRenderOnce&&u.needsModelMetadata()&&l.subscribeOnce("loaded.async",function(){u.rerender()}),u}return b(n)}function a(e,t,i,r,n){var a=[],o=[],s=(n=n||{}).parentComponent;return h.each(e,function(e){var t=s&&s.get&&s.get("uniqueId");t&&(this.attr?this.attr("uniqueId",this.attr("uniqueId")||t+"__"+(s.childComponents.length+e)):this.uniqueId=this.uniqueId=this.uniqueId||t+"__"+(s.childComponents.length+e));var n=D({definition:this,context:i,state:r});n&&n instanceof R&&(n.element&&o.push(n.element),a.push(n))}),t&&(t.append(o),h.each(o,function(){h(this).trigger("attach")})),a}function R(e,t,n){n||(n={});var i,r=this,a=d.componentType.get(t),o=a.cpi;o&&((i=a._cpiKeys)||(i=a._cpiKeys=Object.keys(o))),n.state&&h.extend(r,n.state),r.element=e,r._componentType=t,r._GUID=n.uniqueId||e.prop("id")||m.generateUniqueId(),r._shortcuts={},r[I]=new g.EventService,r[k]={},r[S]={},r[w]=[],r[s]=[],r.isRendered=!1,e.prop("id")!==r.id()&&e.prop("id",r.id()),e.attr("data-rendered","false").data({rendered:!1,component:r}),r._cpi={},i&&i.forEach(function(e){r._cpi[e]=function(){return o[e].apply(r,arguments)}}),x(r)}R.prototype={id:function(){return this._GUID},getFullyQualifiedId:function(){var e=this[k];return e.qid||(e.qid=m.getFullyQualifiedId(this.id(),this.getParentPageId())),e.qid},getId:function(){return this.id()},type:function(){return this._componentType},getType:function(){return this.type()},setType:function(e){return this._componentType=e,this},_getCPI:function(){return this._cpi},getCPI:function(){var t=this._cpi,e=m.grab(d.componentType.get(this.type()),"schema","access","cpi","public"),n={};return e&&e.length&&e.forEach(function(e){n[e]=t[e]}),n},getElement:function(){return this.element},getPersonalizationService:function(){var e="_personalizationService",t=this[e];return t||(t=this[e]=d.personalization.createComponentService(this)),t},setParentPageId:function(e){return this[k].parentPageId=this._parentPageId=e,this},getParentPage:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return f[this.getParentPageId(e)]},getParentPageId:function(){var n,i,r,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},a=this,o=e.root,t=a[k],s=a._parentPageId||t.parentPageId,l=t.rootParentPageId;return o?l||(t.rootParentPageId=c()):s||(t.parentPageId=c());function c(){if((r=y.skuidpage)&&1===r.length)return r[0].id();if(o&&(i=a.getParentPage()),i||(n=a.getParentComponent())&&(i=n.getParentPage()),!i){var e=a.element.parent().closest(".nx-page");e.length&&e.data("component")&&(i=e.data("component"))}if(i||"skuidpage"!==a.getType()||a.isInclude||(i=a),i||(i=r[0]),o)for(;"skuidpage"!==(t=i).getType()||t.getParentPage()!==t;)i=i.getParentPage();var t;return i.id()}},setParentComponent:function(e){return this._parentComponent=e,this},getParentComponent:function(){return this._parentComponent},getParentComponentId:function(){return this._parentComponent&&this._parentComponent.id()},render:function(e){var t,n,i=this,r=i.getType(),a=d.componentType.get(r);function o(){i.isBeingRendered=!1,i.set("rendered",!0),i.isRendered=!0,i.element.attr("data-rendered","true").data("rendered",!0),i.publish("rendered",!0)}function s(e){i.isBeingRendered=!1,i.set("rendered",!1),i.isRendered=!1,i.element.attr("data-rendered","false").data("rendered",!1);var t,n=e&&e.message?e.message:e;d.utils.isString(n)&&(n="There was a problem rendering a component of type "+i.getType()+": "+n),t=d.component.getByType("skuidpage"),"skuidpage"===i.getType()?i.addProblem(n):t&&t.length&&t[0].addProblem(n),i.publish("rendered",!1),m.log(e,c)}if(e||(e={}),!a)return b(r);if(e.context&&(i.context=e.context),e.xmlDefinition?i.xmlDefinition=i.definition=t=e.xmlDefinition:t=i.xmlDefinition,i.element.empty&&a&&!a.onlyRenderOnce&&!1!==a.emptyBeforeRender&&i.element.empty(),i.get("enableConditions")&&d.utils.conditionallyDo(function(){i.set("disabled",!1)},function(){i.set("disabled",!0)},i.get("enableConditions"),i.element),i.get("selectedConditions")&&d.utils.conditionallyDo(function(){i.set("selected",!0)},function(){i.set("selected",!1)},i.get("selectedConditions"),i.element),!i.isBeingRendered&&(!i.isRendered||i.isRendered&&!a.onlyRenderOnce)){var l;switch(i.isBeingRendered=!0,void 0===a?"undefined":E(a)){case"function":l=a;break;case"object":if("render"in a){l=a.render;break}default:throw"Invalid Component Type definition. Component Type must be a JavaScript Object with a render() method."}try{n=l.call(a,i.element,t,i)}catch(e){s(e)}n&&d.utils.isPromise(n)?n.then(o,s):o()}return i.get("afterCreateFunction")&&i.get("afterCreateFunction")(i),i},unrender:function(){var e=this,t=e.getType(),n=d.componentType.get(t);return"function"==typeof e.beforeUnrender&&e.beforeUnrender(),e.element.data&&h.each(e.element.data(),function(e,t){"component"!==e&&"object"!==e&&t&&"object"===(void 0===t?"undefined":E(t))&&t.widget&&t.widget._destroy&&t.widget._destroy()}),e.unsubscribeAll(),e.unregisterChildComponents(),e.element.empty&&n&&!n.onlyRenderOnce?e.element.removeAttr("style").empty():n&&n.onlyRenderOnce&&e.xmlDefinition.attr("domid")&&u.append(e.element.children().hide().detach()),e.element.attr("data-rendered","false").data("rendered",!1),e.set("rendered",!1),e.isRendered=!1,e.publish("rendered",!1),"function"==typeof e.afterUnrender&&e.afterUnrender(),e},rerender:function(){return this.unrender().render()},unregisterChildComponents:function(){var e=this[s];return e.forEach(function(e){m.removeEventSubscriptions(e.element),e.unregister&&e.unregister()}),e.length=0,this},conditionallyRender:function(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},a=this;return r.pageComponent||(r.pageComponent=a.getParentPage()),m.conditionallyRender(function(e,t,n,i){a.render(r),i&&i.eventSubscriptions&&(a[C]=(a[C]||[]).concat(i.eventSubscriptions)),i&&i.event&&i.event.userInitiated&&g.publish("ui.reflow",[{component:a}])},function(e,t,n,i){i&&i.event&&i.event.userInitiated&&g.publish("ui.reflow",[{component:a}]),a.unrender()},a.xmlDefinition,a.element,a.id(),r),a},createConditionsFromXml:function(e,t){var n,i=this,r=e||i.xmlDefinition,a=i.element;if(n=l(r,t&&t.context||i&&i.context),a){var o=r.attr("controllingcomponent")||i._controllingComponent;o&&(a.controllingComponent=d.component.getById(o)),a.conditions=n}return n},addProblem:function(n){var i=this;h(function(){var e=i.getParentPage(),t=i.id();!e||e.id()===t&&t||e.addProblem(n)})},addProblems:function(n){var i=this;h(function(){var e=i.getParentPage(),t=i.id();!e||e.id()===t&&t||e.addProblems(n)})},unregister:function(e){this.publish("beforeUnregister"),e=h.extend({removeElement:!0},e);var t,n,i=this,r=i.id(),a=i.getFullyQualifiedId(),o=i.getType(),s=d.componentType.get(o),l=y[o],c=p[r];-1<(t=c.indexOf(i))&&c.splice(t,1),f[r]===i&&(delete f[r],0<c.length&&(f[r]=c[0])),v[a]===i&&delete v[a],-1!==(n=l.indexOf(i))&&l.splice(n,1),i.unregisterChildComponents({removeElement:!1}),[C,w].forEach(function(e){var t=i[e];t&&t.length&&t.forEach(function(e){e.unsubscribe()})}),s&&s.onlyRenderOnce&&i.xmlDefinition.attr("domid")&&u.append(i.element.children().hide().detach()),e.removeElement&&this.element.remove(),this.get("styleNode")&&this.get("styleNode").remove()},createChildComponent:function(e,t,n,i){return this.createChildComponents([e],t,n,i)[0]},createChildComponents:function(e,t,n,i){i||(i={}),i._parentComponent=this,i._parentPageId=i._parentPageId||this._parentPageId||this.getParentPageId();var r=a(e,t,n,i,{parentComponent:this});return Array.prototype.push.apply(this[s],r),r},getChildComponents:function(){return this[s]},getChildComponent:function(t){var e=this.getChildComponents().filter(function(e){return e.getId()===t});return 0<e.length?e[0]:null},modelAttributeName:function(){return"model"},needsModelMetadata:function(){return!1},get:function(e){return m.getObjectProperty(this[k],e)},has:function(e){return m.hasObjectProperty(this[k],e)},set:function(n,e){var i=this[k],r=this,a=this.getState(),o=m.setObjectProperty;"string"!=typeof n?Object.keys(n).forEach(function(e){var t=n[e];a[e]!==t&&(o(i,e,t),r.publish("stateChange:"+e,Array.isArray(t)?[t]:t,{scope:T.COMPONENT,provideDefaultData:!1}))}):r.get(n)!==e&&(o(i,n,e),r.publish("stateChange:"+n,Array.isArray(e)?[e]:e,{scope:T.COMPONENT,provideDefaultData:!1}));return this},getState:function(){return this[k]},unset:function(){var t=this[k];return Array.prototype.forEach.call(arguments,function(e){e&&h.isArray(e)?e.forEach(function(e){m.unsetObjectProperty(t,e)}):m.unsetObjectProperty(t,e)}),this},bind:function(t,n,i){var r=this;i=i||t,r.set(t,r.get(t)||n.get(i)),n.set(i,r.get(t)||n.get(i)),r.subscribeChange(t,function(e){n.set(i,e)}),n.subscribeChange(i,function(e){r.set(t,e)})},bindMultiple:function(e,t){var n=this;e.forEach(function(e){n.bind(e,t)})},subscribeChange:function(e,t){return this.subscribe("stateChange:"+e,t)},storeSubscription:function(e){return this[w].push(e),this},publish:function(e,t,n){n||(n={});var i,r,a=n.channel,o=this.getType(),s=!1!==n.qualifyEventName?o+"."+e:e,l="skuidpage"===o,c=l?null:this.getParentPage(),u=this[I],d=m.rfc4122v4GUID(),f={scope:T.COMPONENT,uniqueId:d},p={uniqueId:d};return m.isUndefined(t)&&!1!==n.provideDefaultData&&(t={component:this}),i=h.isArray(t)?t:[t],r=n&&n.scope?n.scope:T.PAGE,p.scope=r,a&&(p.channel=a,f.channel=a),m.setObjectProperty(this[S],e,t),u.publish(e,i,f),r!==T.COMPONENT&&(!l&&c&&c.publish(s,i,f),r!==T.SKUID&&r!==T.GLOBAL||g.publish(s,i,p)),this},subscribe:function(e,t,n){var i,r={scope:T.COMPONENT};return n&&n.channel&&(r.channel=n.channel),i=this[I].subscribe(e,t,r),this.storeSubscription(i),i},subscribeToPageEvent:function(e,t,n){var i,r={scope:T.PAGE};return n&&n.channel&&(r.channel=n.channel),i=this.getParentPage().subscribe(e,t,r),this.storeSubscription(i),i},unsubscribe:function(e){for(var t=this[w],n=t.length-1,i=this[I];0<=n;n--)if(t[n].id===e.id){t.splice(n,1),i.unsubscribe(e);break}return this},countEventSubscribers:function(e){return this[I].count(e)},once:function(t,n,e){var i,r=h.Deferred(),a=this[S],o=!(e&&!1===e.cache),s=m.getObjectProperty(a,t),l=this,c=this[I],u=function(e){n&&n(l,e),r.resolve(l,e)};return o&&s?u(s):(i=c.subscribeOnce(t,function(e){m.setObjectProperty(a,t,e),u(e)}),this.storeSubscription(i)),r.promise()},subscribeOnce:function(e,t){return this.once(e,t,{cache:!1})},unsubscribeAll:function(){var e=this[w];return e.length&&(e.forEach(function(e){e.unsubscribe()}),e.length=0),this},shortcut:function(e){var t=this,n=this._shortcuts[e];return n||(n=this._shortcuts[e]=function(){return t[e].apply(t,arguments)}),n},getChildComponentsOfType:function(t){return this.getChildComponents().filter(function(e){return e.getType()===t})}},h.extend(e,{Component:R,createConditionsFromXml:l,getByType:function(e){if(e){var t=y[e];return t||{}}return y},getAll:function(){return h.map(f,function(e){return e})},getById:r,factory:D,register:x,createChildComponents:function(){return m.log('"skuid.component.createChildComponents" is deprecated. Use the skuid.component.Component instance method instead: https://docs.skuid.com/latest/en/skuid/api/skuid_component.html#skuid.component.createChildComponents',i),a.apply(null,arguments)}}),d.$C=r}(skuid,skuid.$)},function(e,t,n){"use strict";var i,r=n(0),c=(i=r)&&i.__esModule?i:{default:i};!function(d,f){var e=d.ajax={},o={};function p(){return d.utils}function n(e){var t=e.url;if(0===t.indexOf("/")){var n=p().inPlatform(d.constants.CORDOVA)&&d.native.instanceUrl;n&&t.indexOf(n)<0&&(e.url=d.utils.combineUrls(n,t))}}function h(e){var t,n,i=e.modelDataSource,r=d.dataSource.get(i),a={_foundCache:!1};return r&&r.isAuthenticated()&&function(e){return e.idempotent||"GET"===e.method}(e)?(t=function(e){return function(e){var t,n,i=0;if(0===e.length)return i;for(t=0,n=e.length;t<n;t++)i=(i<<5)-i+e.charCodeAt(t),i|=0;return i}([e.modelDataSource||"",e.url,e.method||"GET",p().size(e.headers)?JSON.stringify(e.headers):"{}",e.body||""].join(" - "))}(e),(n=o[t])?a._foundCache=!0:(n=o[t]=f.Deferred(),a.deferred=function(){return n}),a.promise=function(){return n.promise()}):(n=f.Deferred(),a.deferred=function(){return n}),a.markComplete=function(){t&&delete o[t]},a.wasFound=function(){return a._foundCache},a.promise=function(){return n.promise()},a}function l(e){for(var t,n=/^(.*?):[ \t]*([^\r\n]*)$/gm,i={};t=n.exec(e);)i[t[1]]=t[2];return i}f.extend(e,{proxy:function(t,e){var n,i,r,a=t.body,o=f.extend({},t.headers),s=p().isString,l=d.platform,c="function"!=typeof l.requiresSerializedProxyRequests||l.requiresSerializedProxyRequests();function u(){d.remote().proxy(c?JSON.stringify(t):t,function(e,t){n.markComplete(),(e=p().parseAsJSONIfString(e))&&(r=e.setCookies),r&&r.length&&(f.cookie.raw=!0,f.each(r,function(e,n){var t,i={};f.each(["path","secure","domain"],function(e,t){t in n&&(i[t]=n[t])}),"expires"in n&&(t=n.expires,i.expires=!1===p().isNumber(t)?d.time.parseDateTimeString(t):parseInt(t,10)),f.cookie(n.name,n.value,i)}),f.cookie.raw=!1),e&&!e.error&&0!==e.statusCode&&(!e.statusCode||e.statusCode<400)?i.resolve(e):(!e&&t&&t.message&&(e={statusCode:0,status:"",error:t.message}),i.reject(e))},e)}return delete t.originalRequest,t.contentType&&(o["Content-Type"]=t.contentType),t.headers=o,n=h(t),delete t.idempotent,n.wasFound()?n.promise():(i=n.deferred(),e||(e={}),e.escape=!1,!a||s(a)||a instanceof FormData||a instanceof Blob||(t.body=JSON.stringify(a)),c&&a instanceof Blob?p().readFileAsBase64(a).then(function(e){t.body=e,u()},function(e){i.reject(e)}):u(),i.promise())},direct:function(r){var a,e=r.body,o=h(r),t=d.offline,s=d.storage;return n(r),o.wasFound()?o.promise():(a=o.deferred(),!e||p().isString(e)||e instanceof FormData||e instanceof Blob?r.data=e:r.data=JSON.stringify(e),delete r.originalRequest,delete r.idempotent,f.extend(r,function(t){return{xhr:function(){var e=f.ajaxSettings.xhr();return e.upload&&e.upload.addEventListener("progress",function(e){t.notify(e)},!1),e}}}(a)),r.offline&&t.networkDown()?s.getDb(c.default.id).getTable("queries").get(r.url).then(function(e){return e.data}):(f.ajax(r).then(function(e,t,n){var i={statusCode:n.status,body:e,status:n.statusText,headers:l(n.getAllResponseHeaders())};r.offline&&s.getDb(c.default.id).getTable("queries").add(r.url,{data:i}),o.markComplete(),a.resolve(i)}).catch(function(e){var t={statusCode:e.status,body:e.responseText,status:e.statusText,headers:l(e.getAllResponseHeaders())};o.markComplete(),a.reject(t)}),a.promise()))},getResponseHeaderObject:l,getErrorMessage:function(e,t){var n,i,r=t?t+": ":"",a=p().isString,o=e&&!a(e)?e.response||e.body:e;if(o)try{(n=p().parseAsJSONIfString(o))&&(n.message&&a(n.message)?i=n.message:n[0]&&n[0].message&&(i=n[0].message),i&&(r+=i),a(n)&&(r+=n))}catch(e){a(o)&&(r+=o)}return r}})}(skuid,skuid.$)},function(e,t,n){"use strict";!function(c,u){var p=c.constants.FLEX,e=c.responsive={config:{resizeWaitTime:100}},t=!1;function h(){return c.utils.getCSSSizeObj.apply(this,arguments)}function g(e){return c.themeSettings.getThemeSettings().spacing(e)}function d(e,t){var n,i,r,a,o,s,l,c,u,d,f;(t=t||{}).columnGutter&&(o=h(t.columnGutter))&&(s=o.number/2+o.unit),t.rowGutter&&(l=h(t.rowGutter))&&(c=l.number+l.unit),(c||s)&&e.css({margin:(c||"0")+" "+(s||"0")+" 0 "+(s||"0")}),"top"===t.verticalAlign?e.css({"-webkit-justify-content":"flex-start","justify-content":"flex-start"}):"center"===t.verticalAlign?e.css({"-webkit-justify-content":"flex-start","justify-content":"center"}):"bottom"===t.verticalAlign&&e.css({"-webkit-justify-content":"flex-start","justify-content":"flex-end"}),"specified"===t.behavior?e.css({width:t.width,"-webkit-flex":"none",flex:"none"}):"fit"===t.behavior?e.css({width:"","-webkit-flex":"none",flex:"none"}):(d=h(t.minWidth),f=h(t.maxWidth),u=h(t.parentMinWidth),n=t.relativeSize||1,i=t.relativeSize||1,d?r=d.number+d.unit:u&&(r=u.number*(t.relativeSize||1)+u.unit),a=n+" "+i+" "+r,e.css({"-webkit-flex":a,flex:a,width:"","max-width":f.unit?f.number+f.unit:void 0}))}function n(e){e.css({margin:"",width:"","-webkit-flex":"none",flex:"none","-webkit-justify-content":"","justify-content":""})}u(window).on("resize orientationchange",function(){!1!==t&&clearTimeout(t),t=setTimeout(c.responsive.handleResize,c.responsive.config.resizeWaitTime)}),u.extend(e,{handleResize:function(){c.events.publish("ui.reflow"),c.events.publish("ui.resize")},prepareDivision:d,prepareFlexDivision:function(e,t){var n,i,r,a,o,s=g((t=t||{}).columnGutter),l=g(t.rowGutter),c=t.relativeSize||1,u=c,d=c,f=p.ALIGNMENT[t.alignSelf];(l||s)&&(o=(l||"0")+" "+(s||"0")+" 0 "+(s||"0")),a=h(t.minWidth),r=h(t.parentMinWidth),a?n=a.number+a.unit:r&&(n=r.number*(t.relativeSize||1)+r.unit),i=u+" "+d+" "+n,e.css({flex:i,alignSelf:f,margin:o,width:null,maxWidth:t.maxWidth})},prepareGrid:function(e,t){var n,i,r,a;if(t.columnGutter&&(n=h(t.columnGutter))&&(i=n.number/2*-1+n.unit),t.rowGutter&&(r=h(t.rowGutter))&&(a=-1*r.number+r.unit),i||a?e.css({margin:(a||"0")+" "+(i||"0")+" 0 "+(i||"0")}):e.css({margin:""}),"rigid"===t.layoutMode&&t.precision&&e.children().length>t.precision&&!e.children(".sm-grid-division-filler").length)for(var o=0;o<t.precision;o++){var s=c.mobile?"sm-card sm-grid-division sm-grid-division-filler":"sk-card sk-grid-division sk-grid-division-filler",l=u("<article>").addClass(s);d(l,{parentMinWidth:t.minWidth,columnGutter:t.columnGutter,rowGutter:t.rowGutter}),e.append(l)}},prepareFlexGrid:function(e,t){e.css({flexDirection:p.DIRECTION[t.flexDirection],justifyContent:p.JUSTIFY[t.justifyContent],alignItems:p.ALIGNMENT[t.alignItems]})},processGrid:function(e){var t,n=parseInt(e.data("voffset"),10),i=parseInt(e.data("vpercent"),10),o=parseInt(e.data("precision"),10);if((n||0===n)&&i||0===i?(t=(e.offsetParent().outerHeight()-n)*(i/100),e.addClass("sm-grid-fixed-vertical").css("height",t+"px")):e.removeClass("sm-grid-fixed-vertical").css("height",""),o){var s,l=0;e.children(".sm-grid-division-forcewrap").remove(),u.each(e.children(".sm-grid-division"),function(){var e,t=u(this),n=t.data("size"),i=t.data("component"),r=i&&i.xmlDefinition&&i.xmlDefinition.attr("type"),a=t[0].offsetTop;e=(!r||"specified"!==r&&"fit"!==r)&&parseInt(n,10)||1,a!==s&&(l=0),o<(l+=e)&&(t.before(u("<div>").addClass("sm-grid-division-forcewrap")),a=t[0].offsetTop,l=e),s=a})}},unMakeDivision:n,unMakeGrid:function(e){e.css({margin:""}),u.each(e.children(),function(){n(this)})}})}(skuid,skuid.$)},function(e,t,n){"use strict";!function(s,l){var e=s.region={},c=s.utils,u={},d={},f={};function a(e,t){var n=c.getFullyQualifiedId(e,t);return f[n]||u[n]||d[e]}function o(e,t){e.unregisterChildComponents().createChildComponents(t.children(),e.element,e.context)}l.extend(e,{get:a,list:function(){return l.map(d,function(e){return e})},map:function(){return d},mapByRegionId:function(){return u},register:function(e,t,n){if(2!==arguments.length||s.component.getById(t)||t===s.page.pageComponentId?1===arguments.length&&(n=s.page.name,t=s.page.pageComponentId):(n=arguments[1],t=s.page.pageComponentId),!e)return!1;e&&s.utils.isString(e)&&(e=s.utils.makeXMLDoc(e)),e.jquery||(e=l(e));var i=e.attr("uniqueid"),r=e.attr("regionid");n&&("__header"!==i&&"__footer"!==i||(i+=n));var a=c.getFullyQualifiedId(i,t),o=c.getFullyQualifiedId(r,t);f[a]=d[i]={parentPageId:t,xmlDefinition:e},r&&(u[o]=f[a])},unregisterAll:function(n){var e=function(t){return Object.keys(t).forEach(function(e){return function(e){return!n||e===n}(t[e].parentPageId)&&delete t[e]})};e(d),e(f),e(u)},setContent:o,setContentByIds:function(e,t,n){2===arguments.length&&(n=t,t=void 0);var i=s.$C(e,t),r=a(n,t);r&&o(i,r.xmlDefinition.children("components").first())}})}(skuid,skuid.$)},function(e,t,n){"use strict";var Et=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ft=n(223);!function(Te){Te.utils||(Te.utils={});var l,t,o,c,xe=Te.$,De=Te.utils,y=xe.extend,Re=Te.time,Ee=xe.inArray,e={}.toString,b=Te.constants,u=Te.currency,d=xe.ui.keyCode,C="_crEventSubscriptions",n=b.MERGE_CONTEXTS,Ae=n.GLOBAL,S=n.MODEL,Fe=n.ROW,$="fieldvalue",i=[",",'"',"\n"],r=b.LOG_LEVELS,a=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,s=/^([and|or|\d|\(|\)]+)$/,Pe=/\{{2,3}[^\{\}]+\}{2,3}/g,f=b.JS_TYPES,p=f.BOOLEAN,h=f.NUMBER,g=f.STRING,Oe=f.OBJECT,m=f.FUNCTION,v=f.UNDEFINED,w=b.DISPLAY_TYPES,Ne=w.BOOLEAN,I=w.INTEGER,k=w.NUMBER,T=w.PERCENT,x=w.CURRENCY,D=w.DOUBLE,_e=w.DATE,R=w.DATETIME,E=w.ID,A=w.REFERENCE,F="nodata",P={createFields:!1,registerFields:!1},O={createFields:!0,registerFields:!1},Me={global:1,model:1,row:1},Le=[I,k,T,x,D],Ue=[_e,R],N={defaultcurrency:"defaultCurrency",federationid:"federationId",firstname:"firstName",lastname:"lastName",organizationid:"organizationId",organizationname:"organizationName",profileid:"profileId",profilename:"profileName",sessionid:"sessionId",userid:"userId",username:"userName",userroleid:"userRoleId",usertype:"userType"},_={includes:1,excludes:1,in:1,"not in":1},M=function(){return Te.platform.getLayoutFields()},L=function(){return Te.dataSource.getType(b.SALESFORCE)},U=function(){for(var e=3,t=document.createElement("div"),n=t.getElementsByTagName("i");t.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e",n[0];);return e<=4&&!window.ActiveXObject&&"ActiveXObject"in window?11:4<e?e:void 0}(),j="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz_-".split(""),B=window.location.host,V=Date.now(),je=yt({prefix:"sk-merge"}),Be=",";function z(){return Te.page.name}function G(){return Te.platform.getName()}function H(e){var t=G();return xe.isArray(e)?-1!==e.indexOf(t):t===e}function W(){return Te.utils.userInfo}function q(){return B}function Y(e,t,n,i){return Te.platform.getResourceUrl({name:e,namespace:t,nestedPath:n,modstamp:i})}function K(e){var t=e&&He(e,"/"),n=Te.page.sitePrefix;return n&&we(n,"/s")&&(n=n.substring(0,n.length-2)),n&&"null"!==n&&t&&!He(e,n)?n+e:e}function X(e){if(e&&e.length)return e.charAt(0).toUpperCase()+e.slice(1)}function J(){return Q.apply(this,["/"].concat(Array.prototype.slice.apply(arguments)))}function Q(r,e){var t=xe.isArray(e)?e:Array.prototype.slice.call(arguments,1);return r||(r=""),t.reduce(function(e,t){if(!t)return e;if(!e)return t;var n=we(e,r),i=He(t,r);return n||i?n&&i?e+t.substring(r.length):e+t:e+r+t},"")}function Z(e){if(e&&De.isString(e))try{e=JSON.parse(e)}catch(e){}return e}function ee(e,t,n,i){i||(i=P);var r=n&&n.model?n.row?Fe:S:Ae,a=xe("<div>"),o=e.attr(t);if(void 0!==o)return r===Fe?a.append(ot(Fe,o,i,n.model,n.row)):r===S?a.append(ot(S,o,i,n.model)):a.append(ot(Ae,o,i)),a.text()}function te(t,n,i){if(!t)return null;n||(n={}),i||(i={});var a=xe("<div>").attr("title",ee(t,"title",n,{createFields:!0,registerFields:!1})),r=[],o=[],e=!0,s=!0;n.popup=a,"false"!==t.attr("modal")&&!1!==i.modal||(e=!1),"false"!==t.attr("resizable")&&!1!==i.resizable||(s=!1),t.children("components").first().children().each(function(){var e=Te.component.factory({definition:this,context:n});r.push(e.element),o.push(e)});var l=void 0,c=void 0;return a.append(r).dialog({close:function(){o&&xe.each(o,function(){this.unregister&&this.unregister()}),a.dialog("destroy").remove(),i.close&&i.close.apply(this);var e=t.children("afterclose");e.length&&Te.actions.runActionsNode(e,null,n),Te.events.unsubscribe(l),xe(window).off(c)},open:function(){var r=a.parent();function e(e){var t=window.innerHeight,n=parseInt(.85*t,10),i=function(){a.css({"overflow-y":"auto",maxHeight:n-r.find(".ui-dialog-titlebar").outerHeight()+"px"}),a.find(".popup-content-padding").length||a.append(xe('<div class="popup-content-padding">').css({height:"15px"})),r.css({maxHeight:n+"px",top:parseInt(.05*t,10)+"px",position:"fixed"})};r.innerHeight()>n?i():e&&i()}e(i.resizeImmediatelyAndIgnoreDifference),c="resize."+mt(),xe(window).on(c,function(){e(!0)}),l=Te.events.subscribe("skuid.includepanel.loadcomplete",function(){e(!0)}),r.find(".ui-dialog-titlebar-close .ui-icon").after(xe(Te.ui.createIcon(t.attr("closeicon")||"sk-icon-close")).css({left:"0",display:"inline-block"})).remove(),i.open&&i.open.apply(this)},beforeClose:function(){i.beforeClose&&i.beforeClose.apply(this)},modal:e,resizable:s,width:t.attr("width")||"600px",buttons:i.buttons||[]}),a}function ne(e){e||(e={});var t,n,i,r,a={registerFields:!1,nl2br:!1},o=e.fieldMetadata;if(o&&(i=o.rel,r=o.id),!("template"in e||"fieldMetadata"in e))throw"skuid.utils.calculateReferenceText: Either fieldMetadata or a template must be provided.";if(e.template){var s=r.indexOf(".");n=r&&-1!=s?r.substring(0,s+1):"",t=e.template,a.fieldPrefix=n+i+"."}else{var l,c;if(o.ref&&-1!=o.ref.indexOf(",")||o.referenceTo&&2<=o.referenceTo.length){if(e.targetObject){var u=e.targetObject.split(".");l=u[u.length-1]}else l=o.referenceTo[0].objectName;c="Name"}else l=o.ref,c=e.model.getDataSource().getNameField(l||e.model.objectName);t=i?(-1!=r.indexOf(".")&&(i=r.substring(0,r.lastIndexOf(".")+1)+i),"{{"+i+"."+c+"}}"):"{{"+c+"}}"}return e.model.getRowMergeResult(e.row,t,a)}function ie(e,t){var n=e.split(".");n.pop();var i=n.join(".");return t.displaytype===A?(i?i+".":"")+t.rel:i}function re(e){var t=e.referenceTo;return t&&t[0]}function ae(e,t,n){var i=re(t),r=i&&qe(i.objectName,n);if(r)return ie(e,t)+"."+r}function oe(e){var t=N[e]||e,n=W();return"ismulticurrencyorganization"===e?Te.utils.isMultiCurrencyOrganization:t in n?n[t]:void 0}function se(e,n,t){var i,r=!0;if(t||(t={}),e?(i=e.toLowerCase().replace(/\s+/g,""),s.test(i)||(r=!1)):r=!1,!r)throw"Invalid Condition Logic: "+e;return t.customAndString&&(i=i.replace(/and/g,t.customAndString)),t.customOrString&&(i=i.replace(/or/g,t.customOrString)),i.replace(/\d+/g,function(e){var t=0|e;return t<1||t>n.length?e:n[t-1]})}var le={"!=":function(e,t){return e!==t},"=":function(e,t){return e===t},gt:function(e,t){return t<e},lt:function(e,t){return e<t},gte:function(e,t){return t<=e},lte:function(e,t){return e<=t},"starts with":function(e,t){return He(e,t,!0)},"does not start with":function(e,t){return!He(e,t,!0)},"ends with":function(e,t){return we(e,t,!0)},"does not end with":function(e,t){return!we(e,t,!0)},contains:function(e,t){return Ce(e,t,!0)},"does not contain":function(e,t){return!Ce(e,t,!0)},includes:function(e,t){return-1!==Ee(t,e.split(";"))},excludes:function(e,t){return-1===Ee(t,e.split(";"))}},ce={"!=":function(e,t){return e<t[0]||e>=t[1]},"=":function(e,t){return e>=t[0]&&e<t[1]},gt:function(e,t){return e>=t[1]},lt:function(e,t){return e<t[0]},gte:function(e,t){return e>=t[0]},lte:function(e,t){return e<t[1]}};function ue(e){var t=e.left,n=e.right,i=e.op,r=e.displaytype,a=le[i]||le["="],o=r===_e,s=r===R,l=Re.resolveDateKeyword,c=o?function(e){return Re.getRealJSDateTimeFromLocal(Re.parseSFDate(e))}:Re.parseSFDateTime;if(o||s){if((void 0===t?"undefined":At(t))===g&&(t=c(t)),!t)return!1;t=t.getTime(),(void 0===n?"undefined":At(n))===g&&(n=c(n)||n),(void 0===n?"undefined":At(n))===g?(n=l(n),xe.isArray(n)?(n[0]=n[0].getTime(),n[1]=n[1].getTime(),a=ce[i]||ce["="]):(t=e.left,n=e.right)):n=n.getTime()}return a(t,n)}function de(O){var N=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},_=!0,M=!1,L=!1,U=N.context,e=N.logicType||"and",j=N.pageComponent,B=void 0,V=void 0,z=void 0,G=void 0,H=void 0,q=void 0;U&&(V=U.model,z=U.row,G=U.rows),"custom"===e?(q=N.logic,B=[]):"or"===e?L=!0:M=!0,O instanceof Array||(O=[O]);var t=function(){var e,n=O[H],t=n.type||$,i=n.value,r=n.values,a=void 0,o=void 0,s=void 0,l=void 0,c=n.operator,u=void 0,d=void 0,f=void 0,p=void 0,h=!0,g=void 0,m=n.sourceType||$,v=m===$,y=n.sourceProperty;if(v||we(m,"property")){if(n.fieldModel){if((f=Te.$M(n.fieldModel))&&f.data)if(N.row&&f.containsRow(N.row))g=N.row;else if(U&&U.row&&f.containsRow(U.row))g=U.row;else if(f.data.length)g=f.data[0],n.fieldRow=f.getRowId(g);else if(v)return"deactivate"===(p=n.noSourceRowBehavior||"deactivate")?"continue":"skipandrender"===p?{v:!0}:{v:!1}}else N.row&&(g=N.row,N.model&&(f=N.model));"function"==typeof g&&(g=g()),f&&(o=f.getField(n.field))}if(v)s=f?f.getFieldValue(g,n.field,!0):Ve(g,n.field);else if("userinfo"===m)s=oe(n.sourceUserInfoType);else if("userhaspermission"===m){var b=W().namedPermissions,S=n.permissionNamespace,w=b?b[S]:[];s=w&&w.includes(i),"!="!==c&&(c="="),i=!0}else if("param"===m)s=j?j.getParameter(n.sourceParam):Te.page.params[n.sourceParam];else if("snippet"===m){var C=Te.snippet.get(n.sourceSnippet);s=!C||C(),c="=",i=!0}else if("feature"===m)s=Te.platform.hasFeature&&Te.platform.hasFeature(i),"!="!==c&&(c="="),i=!0;else if("datasourceuserinfo"===m){var I=n.dataSourceName,k=Te.dataSource.getDataSource(I),T=k&&k.getDataSourceType();s=T&&T.evaluateUserInfoConditionSourceType?T.evaluateUserInfoConditionSourceType(k,n.sourceDataSourceTypeUserInfo):k&&k.getUserInfoProperty(n.sourceDataSourceTypeUserInfo)}else"nofeature"===m?(s=Te.platform.hasFeature&&Te.platform.hasFeature(i),i=!(c="=")):we(m,"property")&&y&&f?["hasRows","hasNoRows"].includes(y)?(s=!(!f.data||!f.data.length),i="hasRows"===y,c="=",t=$):"rowproperty"===m?g?(t||(t=$),i||!1===i||0===i||(i=!0),c||(c="="),"isCloned"===y?s=f.isRowUnsavedClone(g):"isNew"===y?s=f.isNewRow(g):"isSaved"===y?s=!f.isNewRow(g):"hasChanged"===y?s=f.isRowChanged(g):"isMarkedForDeletion"===y?s=f.isRowMarkedForDeletion(g):"rowid"===y&&(s=f.getRowId(g))):h=!1:("data.length"===y&&(i=parseInt(i,10)),s=Ve(f,y)):"connection"===m&&n.connection&&("online"===n.connection?s=!Te.offline.networkDown():"offline"===n.connection&&(s=Te.offline.networkDown()),c="=",i=!0);if((e=null===s||""===s||void 0===s)&&(s=""),"userinfo"===t?i=oe(n.userInfoType):"datasourceuserinfo"===t?i=f?f.getDataSource().getUserInfoProperty(n.userInfoType):void 0:"param"===t&&(i=j?j.getParameter(i):Te.page.params[i]),U)if(u=n.mergeField,"contextrow"===t&&z)ve(d=u?V.getFieldValue(z,u,!0):V.getRowId(z))||(i=d);else if("contextrows"===t&&G){for(var x={},D=0;D<G.length;D++){var R=G[D];ve(d=u?V.getFieldValue(R,u,!0):V.getRowId(R))||d in x||(x[d]=1)}r=Object.keys(x)}if("blank"===t)"!="===c?e&&(h=!1):e||(h=!1);else if(["multiple","contextrows"].includes(t)){if(r&&r instanceof Array){var E="includes"===c,A=r.length;if("in"===c&&-1===Ee(s,r))h=!1;else if("not in"===c&&-1!==Ee(s,r))h=!1;else if("includes"===c||"excludes"===c)if((l=s.split(";")).length){for(var F=0;F<r.length;F++)if(l.includes(r[F])){if(!E){h=!1;break}}else if(E){h=!1;break}}else E&&A&&(h=!1)}}else if("group"===t)h=de(n.subConditions||[],Et({},N,{logicType:n.subConditionLogic?"custom":void 0,logic:n.subConditionLogic}));else if(a=o&&o.displaytype,ze(i)&&-1<xe.inArray(a,Le)&&(i=parseInt(i,10)),n.isChildRel){var P=n.childRelName&&Ve(g,n.childRelName+".records");h=!(!P||!P.length)&&P.reduce(function(e,t){return e||ue({left:Ve(t,n.field),op:c,right:i,displaytype:a})},!1)}else ue({left:s,op:c,right:i,displaytype:a})||(h=!1);if(M&&!h)return _=!1,"break";if(L){if(_=h)return"break"}else q&&B.push(h)};e:for(H=0;H<O.length;H++){var n=t();switch(n){case"continue":continue;case"break":break e;default:if("object"===(void 0===n?"undefined":At(n)))return n.v}}return q&&B&&B.length&&(_=function(e,t){return Te.formula.evaluate(se(e,t,{customAndString:"&&",customOrString:"||"}))}(q,B)),_}function fe(e,t,n,i){return de(t,{row:e,model:i,context:n})}function pe(e){return!isNaN(e-0)}function Ve(e,t){if(e&&t){for(var n,i,r,a=ft(t),o=0;o<a.length;){if(n=a[o],!e)return;if(e instanceof Array&&"length"!==n){r=null;try{i=parseInt(n,10)}catch(e){r=e}if((r||isNaN(n))&&e.length){e=e[0];continue}if(0<=i){e=e[i],o++;continue}}e=e[n],o++}return e}}function he(e,t){if(e&&t){for(var n=ft(t),i=0,r=!1;i<n.length;){if(!(e&&n[i]in e))return!1;e=e[n[i++]],r=!0}return r}return!1}function ge(e){return ze(e)?e&&String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):e}function ze(e){return(void 0===e?"undefined":At(e))===g||e instanceof String}function me(e){return(void 0===e?"undefined":At(e))===m}function ve(e){return(void 0===e?"undefined":At(e))===v}function ye(e){return null!==e&&(void 0===e?"undefined":At(e))===Oe}function Ge(e){return e&&e.replace(/(\r\n|\n|\r)/gm,"<br>")}function be(e){return e&&ze(e)?e.toLocaleLowerCase?e.toLocaleLowerCase():e.toLowerCase():e}function Se(e,t,n,i){return!!(e&&t&&n)&&(i&&(t=be(t),n=be(n)),e(t,n))}function we(e,t,n){return Se(function(e,t){return-1!==e.indexOf(t,e.length-t.length)},e,t,n)}function He(e,t,n){return Se(function(e,t){return 0===e.lastIndexOf(t,0)},e,t,n)}function Ce(e,t,n){return Se(function(e,t){return-1!==e.indexOf(t)},e,t,n)}function Ie(e,t){t||(t={});var r,n,i,a=xe.Deferred(),o=!t||!1!==t.cache,s=function(e){var i={},r=t&&!0===t.json;xe.each(e,function(e,t){var n=i[e]={};xe.each(t,function(e,t){n[e]=r?Z(t):t})}),a.resolve(i)};return o&&(l||(l={}),r={},xe.each(e,function(e,t){var n,i=l[e];return i?(n=r[e]={},xe.each(t,function(e,t){if(!i[t])return r=!1;n[t]=i[t]}),!!r):r=!1})),r?s(r):(i=JSON.stringify(e),c||(c={}),(n=c[i])||(n=c[i]=xe.Deferred(),Te.remote().getBodiesOfZIPResourceFiles(i,function(e){delete c[i],(e=Z(e))&&!e.error?(o&&xe.each(e,function(e,t){var n=l[e];n||(n=l[e]={}),xe.each(t,function(e,t){n[e]=t})}),n.resolve(e)):n.reject(e&&e.error?e.error:e)},{escape:!1,buffer:!1!==t.buffer})),n.done(s)),a.promise()}function ke(e,t,n,i){var r={},a=(t?t+"__":"")+e;return r[a]=[n],Ie(r,i).then(function(e){var t=e[a];if(t&&t[n]){if(t=t[n],i&&!0===i.json&&ze(t))try{t=JSON.parse(t)}catch(e){throw"Unable to parse body of file at path: "+n}return t}throw"ZIP resource contained no file at path: "+n})}function qe(e,t){var n=t&&t.dataSourceType||Te.dataSource.getType("salesforce");return n&&n.getNameField(e,t)}function $e(e,t){return Te.load.js(e,t)}function We(e,t,n,i){return i||"MULTIPICKLIST"!==t?t===E||"Id"===n||we(n,".Id")?"=":"exact"===e?"=":e:"="===e||"exact"===e?"=":"includes"}function Ye(e,o){o||(o={});var s={},l=st(),t=function e(t){if(t instanceof Array)for(var n=0;n<t.length;n++){var i=t[n];if("name"===i[0]||"&"===i[0]||"#"===i[0]||"^"===i[0]){var r,a=i[1];""!==a&&(r=l[a],o.ignoreGlobals&&(r||-1!==a.indexOf("$")||-1!==a.indexOf("Model."))||o.ignoreFunctions&&"function"==typeof r||(s[a]=1))}5<=i.length&&i[4]instanceof Array&&e(i[4])}};return t(Te.Mustache.parse(e,["{{","}}"])),t(Te.Mustache.parse(e,["{{{","}}}"])),Object.keys(s)}function Ke(e){if(null!==e)switch(void 0===e?"undefined":At(e)){case p:return Ne;case h:return e%1==0?I:D;case Oe:if(e){if(e instanceof Array)return"ARRAY";if(e instanceof Date)return R}return"OBJECT";case g:if(Date.parse(e)){if(-1!==e.indexOf("T"))return R;if(3===e.split("-").length)return _e}else if(Ce(e,"://"))return"URL";try{if(!isNaN(+e))return-1!==e.indexOf(".")?D:I}catch(e){return"STRING"}}return"STRING"}function Xe(){var n=this;return function(e,t){return ge(n.Model?Te.$M(n.Model.id).getRowId(n):n.Id||"")+Be+"value="+t(e)}}function Je(){return function(e){return Te.label.read(e)}}function Qe(t){for(var e=new RegExp(je+".*?"+Be+"value=([\\s\\S]*?)"+je,"g"),n=[],i=void 0;null!==(i=e.exec(t));){var r=i[0],a=i[1];r&&a&&n.push({match:r,value:a})}return n.forEach(function(e){t=t.replace(e.match,e.value)}),t}function Ze(){return function(e,t){var n=t(e),i=-1===e.indexOf("{{{");return n=Qe(n),i&&(n=xe("<div>").html(n).text()),encodeURIComponent(n)}}function et(){var r=this;return function(e,t){var n=t(e),i=-1===e.indexOf("{{{");return n=Qe(n),i&&(n=xe("<div>").html(n).text(),r.__mergeSettings.asText||(n=ge(n))),decodeURIComponent(n)}}function tt(){return function(e,t){return t(e).replace(/\\/g,"\\\\").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/"/g,'\\"').replace(/'/g,"\\'")}}function nt(e,t,n,i){n||(n={});var r=n.model,a=n.row,o=i||O;return o.apiExtensions=y({},o.apiExtensions,n),a&&r?e(Fe,t,o,r,a):r?e(S,t,o,r):e(Ae,t,o)}function it(e,t,n,i,r){return n||(n={}),n.asData=!0,t?lt(e,t,n,i,r):null}function rt(e,t,n){return nt(at,e,t,n)}function at(e,t,n,i,r){return n||(n={}),void 0===n.nl2br&&(n.nl2br=!1),n.asText=!0,t?lt(e,t,n,i,r):""}function ot(e,t,n,i,r){var a=lt(e,t,n,i,r);return ye(a)&&a.merges?a.merges:a}function st(e){e||(e={});var t=e.mode||Ae,n=e.model,i=e.row,r=e.__mergeSettings,a=H(b.CORDOVA),o=e.apiExtensions,s=W(),l=e.pageComponent||n&&n.getParentPage&&n.getParentPage()||Te.component.getByType("skuidpage")[0],c=l?l.getPageRecord():null,u=Te.page,d=window.sforce?sforce.connection:{},f=y({},o,{$Api:{SessionId:d.sessionId||Te.utils.userInfo.sessionId,OrganizationId:s.organizationId,UserId:s.userId,PartnerServerUrl:d.partnerServerUrl,EnterpriseServerUrl:d.enterpriseServerUrl,PartnerServerUrls:d.partnerServerUrls,EnterpriseServerUrls:d.enterpriseServerUrls,Session_Id:d.sessionId||Te.utils.userInfo.sessionId,Organization_Id:s.organizationId,User_Id:s.userId,Partner_Server_Url:d.partnerServerUrl,Enterprise_Server_Url:d.enterpriseServerUrl,Partner_Server_Urls:d.partnerServerUrls,Enterprise_Server_Urls:d.enterpriseServerUrls},$Label:Te.label.map,$Model:Te.model.map(),$Native:{InSkuidNative:a,IOS:!!a&&Te.native.isIOS(),Android:!!a&&Te.native.isAndroid(),Location:s.location||{}},$Page:{Id:c?c.Id:u.id,Name:c?c.Name:u.name},$Param:l?y({},u.params,l.getPageParameters()):u.params,$Platform:{AuthUrl:Te.platform.getAuthUrl(),Name:G(),TokenUrl:Te.platform.getTokenURL(),TokenURL:Te.platform.getTokenURL()},$Site:{CurrentSiteUrl:u.currentSiteUrl,Prefix:u.sitePrefix,SSO:Te.settings.login?{LoginHeading:Te.settings.login("ssoHeading"),LoginSubHeading:Te.settings.login("ssoSubHeading")}:{}},$User:s,$Network:{Connected:"connected"===Te.offline.state,Disconnected:"disconnected"===Te.offline.state},$CurlyOpen:"{",$CurlyClose:"}",SkuidField:Xe,SkuidLabel:Je,__mergeSettings:r,urlEncode:Ze,encodeUrl:Ze,urlDecode:et,decodeUrl:et,escapeJS:tt,escapeLiterals:tt});if(t!==S&&t!==Fe||y(f,{Model:{conditions:n.conditions,Data:n.data,data:n.data,Label:n.label,label:n.label,LabelPlural:n.labelPlural,labelPlural:n.labelPlural,fields:n.fields,Fields:n.fieldsMap,fieldsMap:n.fieldsMap,KeyPrefix:n.keyPrefix,keyPrefix:n.keyPrefix,ObjectName:n.objectName,objectName:n.objectName,id:n.id,updateable:n.updateable,createable:n.createable,deleteable:n.deleteable}}),t===Fe){var p=n.data.indexOf(i)+1,h=n.getRecordForRow(i),g=1===p,m=p===n.data.length,v={first:g,last:m,index:p};h&&(v.Record={id:h.getId(),index:p,isFirst:g,isLast:m,isNew:h.isNew(),isClone:h.isClone(),isMarkedForDeletion:h.isMoribund(),data:h&&h.get()}),y(f,v,i)}return f}function lt(e,t,v,y,b){var n=arguments[0];if(null!==n&&(void 0===n?"undefined":At(n))===Oe&&(e=n.mode,t=n.template,v=n.options,y=n.model,b=n.row),b&&"function"==typeof b&&(b=b()),b||"row"!==e||(y&&y.data&&y.data.length?b=y.data[0]:e="model"),y||"model"!==e||(e="global"),!t&&""!==t)throw"Required argument 'template' was not provided.";if(!(e&&e.toLowerCase()in Me))throw"Invalid merge mode. Valid modes are: global,model,row.";e=e.toLowerCase(),v||(v={});var i=v,r=i.apiExtensions,a=i.pageComponent,o=i.outputType;if(!0===v.evaluateFormulas)return Te.formula.evaluate(t,{apiExtensions:r,model:y,pageComponent:a,row:b},{outputType:o});var s,l,c,u,S,d,f,p,h,g,m,w,C,I,k,T,x,D,R,E,A,F,P,O,N,_,M,L,U,j,B,V,z,G,H,q,$,W,Y,K,X,J,Q,Z,ee,te=y,ne=te?te.fieldsMap:null,ie=!0===v.asText,re=!0===v.asData,ae=!0===v.coerceToJSType,oe=ie||re?!1!==v.allowHTML:!0===v.allowHTML,se=v.nl2br,le=!1!==v.createFields,ce=le&&!1!==v.registerFields,ue={fields:[]},de=function(e){return[(e+="").match(Pe)||[],e.split(Pe)]}(t),fe=de[0],pe=de[1],he=1===fe.length&&""===pe.join(""),ge="",me=v.parentRow||null,ve=v.childRelName||!1,ye=-1,be=pe.length;if(fe.length)h=st({apiExtensions:r,mode:e,model:te,pageComponent:a,row:b,__mergeSettings:{asText:ie}});else if(ie||re)return oe?t:De.encodeHTML(t);if(re){if(he&&1===(D=Ye(fe[0])).length){if(He(I=D[0],"$Label."))return Te.$L(I.substring(7));if(null==(R=Ve(h,I)))return null;if(!ae)return R;if(I.match(/\.data\.\d+\./)?(k=I.split("."),U=He(I,"$Model."),C=k.splice(0,U?4:3),w=!!(C=U?Te.$M(C[1]):te)&&C.getField(k.join("."))):te&&(w=te.getField(I)),!w)return R;if(Q=w.displaytype,K=-1<Ee(Q,Le),W=Q===Ne,Y=-1<Ee(Q,Ue),K)return""===R?R:window.parseFloat(R);if(W){if(ze(R)){if("true"===R.toLowerCase())return!0;if("false"===R.toLowerCase())return!1}return!!R}return Y?Q===_e?Te.time.getRealJSDateTimeFromLocal(Te.time.parseSFDate(R)):Te.time.parseSFDateTime(R):R}ie=!0}for(;0<be;)if(be--,ge+=pe[++ye],J=fe[ye]){if(G="{{{"===J.substring(0,3),E=(I=J.substring(G?3:2,J.lastIndexOf(G?"}}}":"}}"))).charAt(0),z=(j=-1!==["#","/","^"].indexOf(E))||-1!==["&","!"].indexOf(E),V="/"===E,B=j&&!V,L=He(I,"$System")||He(I,"$Date")||He(I,"$Time"),H=!(Z=x=f=null),He(I,"$Label.")){ge+="{{#SkuidLabel}}"+I.substring(7)+"{{/SkuidLabel}}";continue}if(v.fieldPrefix&&(J="{{"+(I=z?E+v.fieldPrefix+I.substr(1):v.fieldPrefix+I)+"}}"),-1!==I.indexOf(".records")&&j&&(B?s=(ve=I.substring(1,I.indexOf(".records"))).startsWith("$Model."):V&&(s=ve=!1)),L){if(q=Re.getLocalDateTime(new Date),"$System.Now"===I)I=G?Re.getSFDateTime(q):Re.makeFormattedLongDateTime(q);else if(1===(g=I.split(".")).length)I="$Date"===I?Re.makeFormattedDateFromLocal(q):Re.formatTime(wt().timeFormat,q);else switch(g[1]){case"Year":I=q.getFullYear();break;case"Month":I=q.getMonth()+1;break;case"Day":I=q.getDate();break;case"DayOfWeek":I=q.getDay();break;case"Hour":I=q.getHours();break;case"Minute":I=q.getMinutes()+1;break;case"Second":I=q.getSeconds();break;case"Millisecond":I=q.getMilliseconds();break;case"Period":I=Re.getPeriod(q)}ge+=I;continue}if(le&&!G&&"&"!==E&&(!j||-1!==I.indexOf(".records"))){if(H=!1,"$System.Now"===I){ge+=Re.makeFormattedLongDateTime(new Date);continue}if(null!==(A=I.match(/^[#/]?\$Model\.([^.]+)\.data\.(\d+)\.(.+)/))&&(O=Te.$M(A[1]),_=A[2],F=A[3],P=O&&O.fieldsMap,N=O&&O.getRows()[_],ve&&(ve=F.substring(0,F.indexOf(".records")))),j||null!==(T=(null!==A?F:I).match(/(.+)\.records\.(\d+)\.(.+)/))&&(ve=T[1],l=T[2],x=T[3],u=A&&O?(c=O,N||null):(c=y,b),(d=(S=c.getFieldValue(u,ve))&&S.records?S.records:null)&&d[l]&&(f=c.getRowId(d[l]))),null!==A?Z={isSectionChar:j,childRelName:ve,fieldsMap:P,fieldName:x||!j&&F||I,mode:Fe,model:O,row:N,childRowId:f,token:J}:s?Z={isSectionChar:j,childRelName:ve,fieldsMap:P,fieldName:I,mode:Fe,model:O,row:N,token:J}:e!==Ae&&(p=ve&&me||b,!f&&ve&&ne[ve]&&"childRelationship"===ne[ve].type&&(f=y.getChildIdFromRow(b,ve)),Z={isSectionChar:j,childRelName:ve,fieldsMap:ne,fieldName:x||I,mode:e,model:y,row:p,childRowId:f,token:J}),Z&&(H=null!==(ee=ct(Z)))){ge+=ee;continue}}if(I){ge+=!ie||j||le&&H&&!G?"{{"+I+"}}":"{{{"+I+"}}}";continue}ge+=J}m=oe||ie&&!0!==se||!1===se,X=Te.Mustache.render(ge,h),M=m?X:Ge(X);var Se=0,we=[],Ce=[];if(le){var Ie=new RegExp(je+"([\\s\\S]*?)"+je,"g"),ke=M.match(Ie);null!==ke&&ke.length&&(Se+=ke.length,ke.forEach(function(e){var t=new RegExp(je,"g"),n=e.replace(t,"").split(Be).reduce(function(e,t){var n=t.split("="),i=function(e){return Array.isArray(e)?e:Array.from(e)}(n),r=i[0],a=i.slice(1);return a=a.join("="),e[r]=a,e},{}),i=n.model,r=n.field,a=n.parentfield,o=n.parentrowid,s=n.rowid,l=n.value,c=void 0,u=void 0,d=void 0,f=void 0,p=void 0,h=i&&Te.$M(i)||y;!s&&b&&(s=h.getRowId(b));if(b&&me)c=b;else if(a&&o&&s){S=h.dataMap[o]&&h.dataMap[o][a],f=S&&S.records?S.records:null;var g=h.getIdFieldForChildRelationship(a);try{var m=JSON.parse(s);s=m[g]}catch(e){}f&&xe.each(f,function(e,t){if(g&&s&&t[g]===s)return c=t,!1})}else h&&(c=h.dataMap[s]);r&&c?(u={fieldId:r,editable:!1,register:ce},a&&(u.fieldContext=a),v.noLink&&(u.noLink=!0),d=new Te.ui.Field(c,h,null,u),we.push(d),d.render(),ue.fields.push(d),p=ie?"{fieldValues."+(Ce.push(d.element.text())-1)+"}":'<span class="nx-merge">'+(we.length-1)+"</span>",M=M.replace(e,p),ie&&d.unregister()):M=ie?(p="{fieldValues."+(Ce.push(l)-1)+"}",M.replace(e,p)):M.replace(e,"")}))}return ie?(X=le&&Se?(Te.Mustache.parse(M,["",""]),Te.Mustache.render(M,{fieldValues:Ce})):M,oe?X:De.encodeHTML(X)):(($=xe('<div class="nx-template">').html(M)).find(".nx-merge").toArray().forEach(function(e){var t=xe(e).text(),n=we[t];xe(e).replaceWith(n.element)}),ue.merges=$,ue)}function ct(e){var t=e.isSectionChar,n=e.childRelName,i=e.fieldsMap,r=e.fieldName,a=t&&n&&i&&n in i&&"childRelationship"===i[n].type,o=e.mode,s=e.model,l=e.row,c=e.token,u=s&&l?s.getRowId(l):null,d=e.childRowId,f=null,p=void 0;return!a&&(n&&!t?(p=i[n].subFieldsMap)&&r in p||"Id"===r:i&&r in i||"Id"===r)&&(f=je+(s?"model="+s.id:"")+Be+"field="+r,f+=o===Fe?n?Be+"parentfield="+n+(u?Be+"parentrowid="+u:"")+Be+"rowid="+(d?d+Be+"value="+c:"{{#SkuidField}}"+c+"{{/SkuidField}}")+je:(l&&u?Be+"rowid="+u:"")+Be+"value="+c+je:(n?Be+"parentfield="+n:"")+Be+"rowid={{#SkuidField}}"+c+"{{/SkuidField}}"+je),f}function ut(e){return e&&"function"==typeof e.then}function dt(e){if(!e)return"";if(e.jquery){if(!e.length)return"";e=e[0]}return e.xml?e.xml:(new XMLSerializer).serializeToString(e)}function ft(e,t){t||(t=".");var n=["\\\\","\\"+t,t];return e.indexOf(".")<0?[e]:e.indexOf("\\")<0?e.split("."):function t(e,n){var a,i=n[0],o=[],s=[],l=i&&i.substring(1);if(1===n.length)return e.split(i);e.split(i).forEach(function(e){o.push(t(e,n.slice(1,n.length)))});a=o.length;xe.each(o,function(i,e){if(e.length){var r=e.length;xe.each(e,function(e,t){if(e===r-1&&i!==a-1){var n=t+l+o[i+1][0];for(o[i+1].shift();o[i+2]&&!o[i+1].length;)n+=l+o[++i+1][0],o[i+1].shift();s.push(n)}else s.push(t)})}});return s}(e,n)}function pt(e,t){return["\\",t||"."].reduce(function(e,t){return e.split(t).join("\\"+t)},e)}function ht(e){if(e&&e.eventType){var t,n=e.eventType,i=e.delay||400,r=e.callback;(e.context||xe(window)).on(n,function(){clearTimeout(t),t=setTimeout(function(){r&&r()},i)})}}function gt(){return Te.runtime.incrementGlobalCounter()}function mt(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}function vt(e){for(var t="";t=j[63&e]+t,0!==(e>>>=6););return t}function yt(e){var t=""+vt(Date.now());return(1===arguments.length?e.prefix:"sk")+"-"+t.substring(0,t.length-2)+"-"+gt()}var bt={};function St(n,i,e,a){var r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},t=r.context||{},o=e&&e.attr,s=o?e.attr("logictype"):null,l=o?e.attr("logic"):null,c=o?e.children():null,f=[],u=c?Te.$M(c.attr("fieldmodel")):null,p=r.row?r.row:t.row,h=r.model?r.model:t.model,d=!1,g=Te.events.subscribe,m=r.eventSubscriptions,v=r.pageComponent,y=r.renderOverride,b=r.uniqueid;function S(e){return y&&y.override?!0===y.doRender:de(e,{context:t,logic:l,logicType:s,model:h,pageComponent:v,row:p})}function w(e){if(e?(e.userInitiated=!0,r.event=e):"event"in r&&delete r.event,!d){d=!0;var t=void 0;t=S(f)?n(r):i(r),r.component&&e&&e.name&&(ut(t)||(t=It()),t.then(function(){return r.component.publish("handled."+e.name)})),d=!1}}return u&&(h=u,p=p&&h.getRowById(h.getRowId(p))),m||(m=r.eventSubscriptions=[]),function r(){f.length=0;var e=a&&a.data(C),u={},t=void 0,n=void 0,d=!1;if(m.length){if(xe.each(m,function(e,t){Te.events.unsubscribe(t)}),e&&e.length)for(t=e.length-1;0<=t;t--){n=e[t];for(var i=0;i<m.length;i++)n===m[i]&&e.splice(t,1)}m.length=0}c&&c.each(function(){var e=new Te.model.Condition(xe(this));f.push(e)}),f.length&&(xe.each(f,function(e,t){var n,i,r=function(e){var t=h&&p&&h.id&&(!e.fieldModel||e.fieldModel===h.id),n=t?h.id:e.fieldModel?e.fieldModel:h?h.id:null,i=n?Te.$M(n):null,r=t?p:e.fieldRow?e.fieldRow:p||null,a=void 0,o=void 0;return r&&ye(r)&&i?a=i.getRowId(r):me(r)?(o=r())&&(a=i.getRowId(o)):a=r,{modelId:n,rowId:a}}(t),a=r.modelId,o=r.rowId,s=t.field,l=a&&Te.model.getModel(a),c=t.sourceType;a&&((n=u[a])||(n=u[a]={}),o?(i=n[o])||(i=n[o]={}):"fieldvalue"===c&&(n.__conditionsNeedRows=!0),"hasChanged"===t.sourceProperty?"modelproperty"===c?n.__any=!0:i&&(i.__any=!0):i&&s&&(l&&l.isRelationshipField(s)&&(s=l.getReferenceFieldNameFromRelationshipField(s)),i[s]||(i[s]=1))),"connection"===c&&(d=!0)}),d&&(m.push(g("network.connected",w)),m.push(g("network.disconnected",w))),m.push(g("row.updated",function(t){var e,n=u[t.modelId],i=!1;n&&((e=n[t.rowId])&&(xe.each(e,function(e){if(he(t.updates,e))return!(i=!0)}),!i&&e.__any&&(i=!t.rowHadPriorChanges)),i||(n.__any?i=!t.modelHadPriorChanges:n.__conditionsNeedRows&&(delete n.__conditionsNeedRows,r(),i=!0))),i&&w({name:"row.updated",data:t})})),m.push(g("row.created",function(e){var t=u[e.modelId];t&&(t[e.rowId]=e.row,w({name:"row.created",data:e}))})),m.push(g("row.deleted",function(e){e.modelId in u&&w({name:"row.deleted",data:e})})),m.push(g("row.undeleted",function(e){e.modelId in u&&w({name:"row.undeleted",data:e})})),m.push(g("models.saved",function(n){var i=!1;xe.each(u,function(e,r){if(e in n.models){i=!0;var t=n.insertResults;t&&t.length&&xe.each(t,function(e,t){var n=t.oldId,i=t.id;t.success&&n&&i&&n!==i&&n in r&&(r[i]=r[n],delete r[n])})}}),i&&w({name:"models.saved",data:n})})),m.push(g("models.cancelled",function(t){xe.each(u,function(e){if(e in t.models)return w({name:"models.cancelled",data:t}),!1})})),m.push(g("models.loaded",function(t){xe.each(u,function(e){if(e in t.models)return w({name:"models.loaded",data:t}),!1})}))),m.push(g("actions.conditionaloverride",function(e){b===e.componentId&&w({name:"actions.conditionaloverride"})})),m.length&&(e?Array.prototype.push.apply(e,m):a&&a.data(C,m))}(),y&&y.override&&y.doRender||f.length&&S(f)||!f.length?n(r):i(r)}function wt(){return Te.utils.userLocale}function Ct(){return Te.settings&&Te.settings.skuidApp&&"development"===Te.settings.skuidApp("coreMode")||!Te.version?V:Te.version.date}function It(e){return ut(e)?e:Te.$.Deferred().resolve(e).promise()}function kt(e){var t=this;if(t._GUID="SelectItem-"+gt(),!e)throw"You must provide a configuration object when creating a new SelectItem.";if(!("value"in e))throw"Value is required.";y(t,e),"label"in e||(t.label=t.value),t.isSelected||(t.isSelected=!1)}function Tt(){this.items=[],this.itemsMap={},this.selectedIndex=this.selectedKey=!1}function xt(e){e||(e={});this._get=e.get,this._set=e.set,this.key=this._createKey({id:e.id,type:e.type})}function Dt(){var e,t=De.generateUniqueId({prefix:"kvs"});this.__id=t,e=this.__getPropName("s"),this[e]={}}function Rt(e,t){var n=this;return n.element=e,n.options=t||{},n.editor=new Te.ui.Editor(e,{showHeader:!1,showMessages:!1,customContentClass:"nx-editor-contents-template"}),t.model&&(n.model=t.model,n.editor.registerModel(n.model)),!n.conditions&&t.conditions&&(n.conditions=t.conditions),t.controllingComponent||(n.editor.handleSave=function(e){e&&n.render()},n.editor.handleCancel=function(){n.render()},n.editor.handleDataRefresh=function(){n.render()},n.editor.handleChange=function(){n.render()}),n.render(),n}kt.prototype.id=function(){return this._GUID},Tt.prototype={getItems:function(){return this.items},addItem:function(e,t){var n,i=this,r=i.items;if(!e._GUID)throw"Invalid SelectItem.";if(-1!==Ee(e,r))throw"Item is already in the List.";e.isSelected&&!1!==i.selectedIndex&&(r[i.selectedIndex].isSelected=!1),t?r.unshift(e):r.push(e),n=t?0:r.length-1,e.isSelected?(i.selectedIndex=n,i.selectedKey=e.value):t&&!1!==i.selectedIndex&&i.selectedIndex++,i.itemsMap[e.value]=e,!1===i.selectedIndex&&(i.selectedIndex=n,i.selectedKey=e.value,e.isSelected=!0)},getSelected:function(){return!1===this.selectedIndex?null:this.items[this.selectedIndex]},addItems:function(e,t){var n=this;e&&xe.each(e,function(){n.addItem(this,t)})},size:function(){return this.items?this.items.length:0},removeItemAtIndex:function(e){this._validateIndex(e);var t=this.items[e],n=t.isSelected;t&&(t.value&&t.value in this.itemsMap&&delete this.itemsMap[t.value],this.items.splice(e,1),t.isSelected=!1),!1!==n&&(this.selectedIndex=!1,this.selectedKey=!1,0<this.size()&&this.selectItemAtIndex(0))},getItemAtIndex:function(e){return this.items[e]},getItemById:function(e){return xe.grep(this.items,function(){return this.id()===e})},selectItemAtIndex:function(e){if(this._validateIndex(e),!1!==this.selectedIndex){if(e===this.selectedIndex)return!0;this.items[this.selectedIndex].isSelected=!1}this.items[e].isSelected=!0,this.selectedIndex=e,this.selectedKey=this.items[e].value},unselectItemAtIndex:function(e){this._validateIndex(e),e===this.selectedIndex&&(this.items[e].isSelected=!1,this.selectedIndex=!1,this.selectedKey=!1)},_getItemIndex:function(e){var t;if(-1!==(t=pe(e)?e:this.indexOf(e)))return t;throw"Invalid Item"},selectItem:function(e){this.selectItemAtIndex(this._getItemIndex(e))},unselectItem:function(e){this.unselectItemAtIndex(this._getItemIndex(e))},removeItem:function(e){this.removeItemAtIndex(this._getItemIndex(e))},indexOf:function(e){return!(e instanceof kt)&&e.value&&e.value in this.itemsMap&&(e=this.itemsMap[e.value]),e?Ee(e,this.items):-1},contains:function(e){return-1!==this.indexOf(e)},_validateIndex:function(e){if(e>=this.size()||e<0)throw"Invalid Index";return!0}},xt.prototype={_createKey:function(e){if(e&&e.id)switch(e.type){case"component":return"skuid.component("+e.id+")";case"model":return"skuid.model("+e.id+")";default:return At(e.type)===g?e.type+"("+e.id+")":e.id}},getSettings:function(){var e=this.key,t=this._get();return e&&t&&e in t?y(!0,{},t[e]):{}},updateSettings:function(e,t){var n=this.key,i=this._get(),r=y(!0,{},i[n],e);if(t&&!0===t.removeNulls){var a=0;!function n(i){var e,t;if(!(200<a)){for(e in t=[],i)t.push(e);xe.each(t,function(e,t){void 0===i[t]||null===i[t]?delete i[t]:At(i[t])===Oe&&(a++,n(i[t]),a--)})}}(r)}i[n]=r,this._set(i)}},Dt.prototype={get:function(e){var t=this.__getPropName("s"),n=this[t]||{};return n.hasOwnProperty(e)?n[e]:void 0},set:function(e,t){var n={};n[e]=t,this.extend(n)},extend:function(e){var t=this.__getPropName("s"),n=Object.getPrototypeOf(this),i=this[t]||(this[t]={});xe.each(e,function(e,t){if(n[e])return!0;i[e]=t})},__getPropName:function(e){return"__"+this.__id+"_"+e}},Rt.prototype={unregister:function(){this.editor&&this.model&&this.editor.unregister()},render:function(){var n=this,i=n.model,e=n.options,r=e.templateBody||"",t=e.component,a=e.context,o=n.conditions,s=void 0,l={allowHTML:e.allowHTML,pageComponent:t?t.getParentPage():void 0,registerFields:!1};void 0!==a&&(l.apiExtensions=a),n.editor.contents.empty(),i?(s=o&&o.length?i.getRows(o,a):a&&i&&a.model&&a.row&&a.model===i?[a.row]:i.getRows(null,a),!e.isMultiRow&&s&&s.length?(s&&1<s.length&&!0===e.onlyShowFirstRow&&(s=[s[0]]),xe.each(s,function(e,t){t&&n.editor.contents.append(i.mergeRow(t,r,l))})):n.editor.contents.append(i.mergeModel(r,l))):n.editor.contents.append(ot(Ae,r,l))}},y(De,{addResizeHandler:function(e,t){ht({eventType:"resize orientationchange",delay:t,callback:e})},adjustValueBasedOnQuotedness:function(e,t){var n=e;return void 0!==e&&(t?n=e.toString():"false"===e?n=!1:"true"===e?n=!0:pe(e)&&!1!==e&&!0!==e&&(n=-1!==e.toString().indexOf(".")?parseFloat(e):parseInt(e,10))),n},applyURLParametersToURL:function(n,e){return xe.each(e,function(e,t){-1!==n.indexOf("?")?n+="&"+e+"="+t:n+="?"+e+"="+t}),n},areConditionsMet:de,areArraysEqual:function(e,n){return e.length==n.length&&e.every(function(e,t){return e===n[t]})},calculateReferenceMerges:ne,calculateReferenceText:function(e){return ne(e).merges.text()},canUseSessionStorage:function(){if("nodata"===F)try{F="sessionStorage"in Te.data&&null!==Te.data.sessionStorage}catch(e){F=!1}return F},capitalizeFirst:X,clamp:function(e,t,n){return Math.min(n,Math.max(t,e))},combineStrings:function(e,t,n){e||(e=""),t||(t=""),n||(n="");var i=e.length,r=t.length,a=n.length;return(i&&we(e,n)?e.substring(0,i-a):e)+(i&&r?n:"")+(r&&He(t,n)?t.substring(a,r):t)},combineUrls:J,compressInt:vt,conditionallyDo:St,conditionallyRender:function(t,n,i,r,a,o){var e=i?i.attr("uniqueid"):"";return o||(o={}),e&&!bt[e]&&(bt[e]={override:!1,doRender:!0}),o.renderOverride=bt[e],o.uniqueid=e,St(function(){var e;return!r.data("rendered")&&(e=t(i,r,a,o),r.data("rendered",!0),e)},function(){var e,t=r.data("rendered");return!(!t&&void 0!==t)&&(e=n(i,r,a,o),r.data("rendered",!1),e)},o.renderConditions?o.renderConditions:i&&i.children?i.children("renderconditions"):null,o.eventParentElement||r,o)},contains:Ce,convertCurrency:function(e,t,n){var i,r=u.getConversionRates(),a=Te.utils.conversionRatesMap;if(!r||!r.length)return e;if(i=r[0].IsoCode,a||(a=Te.utils.conversionRatesMap={},xe.each(r,function(e,t){a[t.IsoCode]=t})),a&&a[t]&&a[n]){var o=a[n],s=Math.pow(10,6);if(t!==i){var l=a[t];e=Math.round(e/l.ConversionRate*s)/s}return Math.round(e*o.ConversionRate*s)/s}},createMapForArray:function(e,t,a,o){return Te.utils.isString(t)&&(t=[t]),e&&xe.each(e,function(){var r=this;r[a]={},xe.each(t,function(e,t){r[t]&&r[t].length&&xe.each(r[t],function(e,n){var i;xe.each(o instanceof Array?o:[o],function(e,t){(i=n[t])&&"undefined"!=i&&(r[a][i]=n)})})})}),e},createPopupFromPopupXML:te,createPopupFromAction:function(e,t,n){return te(e.children("popup").first(),t,n)},createSearchSubConditions:function(d,f,e,t,n){n||(n={});var i,r=n.delimiter||" ",p=n.searchOperator||"contains",h=1,g=n.processOnClient,m=d.dataSource.getDataSourceType();return f.subConditions=[],f.subConditionLogic="",i=n.tokenize?e.split(r):[e],xe.each(i,function(e){var c=this+"",u=[];if(!c)return!0;xe.each(t,function(e,t){var n=t.searchOperator||p,i=d.getField?d.getField(t.id):t;i||(i=t);var r=!(!i||!i.displaytype)&&i.displaytype,a=r===A?ae(t.id,t,d.getDataSource()):t.id,o=a&&d.getField(a);if(a&&(!o||!1!==o.filterable)||!m.fieldIsFilterableWhenSearchingReferenceFieldOptions||m.fieldIsFilterableWhenSearchingReferenceFieldOptions(o)){var s={name:"__default_searchbox_subcondition",type:"fieldvalue",field:a,inactive:!1,isChildRel:t.isChildRel,childRelName:t.childRelName};if(s.operator=We(n,r,a,g),g||"MULTIPICKLIST"!==r)if(r===E||"Id"===a||we(a,".Id")){if(!c||18!==c.length&&15!==c.length)return!0;s.value=c}else s.value=c;else"="===s.operator||"exact"===s.operator?s.value=c:s.values=[c];if(r===A){var l=d.getField(a);l&&l.targetObjects&&(s.fieldTargetObjects=l.targetObjects)}else t.targetObjects&&(s.fieldTargetObjects=t.targetObjects);f.subConditions.push(s),u.push(h),h++}}),f.subConditionLogic+="("+u.join(" OR ")+")",e<i.length-1&&(f.subConditionLogic+=" AND ")}),f},debounce:function(t,n,i){var r=null;return function(){var e=arguments;clearTimeout(r),r=setTimeout(function(){t.apply(i||this,e)},n)}},decodeHTML:function(e){return ze(e)?e&&xe("<div/>").html(e).text():e},decodeXML:function(e){return e.replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&")},delay:function(e){var t=xe.Deferred();return setTimeout(function(){t.resolve()},e||0),t.promise()},delayEventCallback:ht,delayInputCallback:function(e,a,t){var o,s,l,c,u,n="change keydown";l=(t=t||{}).delayTime||400,(s=t.dataPropertyName)?e.data(s,e.val()):o=e.val(),n+=U?9===U?" selectionchange keyup":U<9?" keyup":" keyup input":" keyup input",e.on(n,function(e){var t=xe(this);if(!t.prop("disabled")){var n=t.val(),i=function(){if(clearTimeout(c),u&&Te.events.unsubscribe(u),s&&(o=t.data(s)),n===t.val()&&n!==o){var e=o;s?t.data(s,n):o=n,a&&a(n,e)}};clearTimeout(c),u&&Te.events.unsubscribe(u);var r="keydown"===e.type&&(e.which===d.ENTER||e.which===d.TAB||e.metaKey||e.ctrlKey);"change"===e.type||r?i():"keydown"!==e.type&&(u=Te.events.subscribe("skuid.ui.commitUserInput",i),c=setTimeout(i,l))}})},deparam:function(e){if(!e||!e.length)return{};Ce(e,"?")&&(e=e.substr(e.indexOf("?")+1));for(var t,n=e.split("&"),i={},r=0;r<n.length;++r)2==(t=n[r].split("=")).length&&(i[decodeURIComponent(t[0])]=decodeURIComponent(t[1].replace(/\+/g," ")));return i},doArraysIntersect:function(e,t){for(var n=0;n<e.length;n++)if(-1<Ee(e[n],t))return!0},doesRowMeetConditions:fe,downloadBase64StringAsFile:function(e,t){var n=Te.utils._ie;if(!(n&&n<10)){for(var i=atob(e),r=new Array(i.length),a=0;a<i.length;a++)r[a]=i.charCodeAt(a);var o=new Uint8Array(r),s=new Blob([o],{type:"octet/stream"});s.size<=1||Te.utils.saveAs(s,t)}},downloadStringAsFile:function(e,t,n){var i,r,a,o=Te.utils._ie;if(o&&o<10)throw"File download is not supported for this browser.";if(ze(e))return i=n||(H(b.LIGHTNING)?"application/octet-stream":"text/csv"),r=new Blob([e],{type:i}),a=Te.utils.saveAs(r,t),Te.events.publish("filedownload",[{data:r,filename:t}]),a},encodeHTML:ge,endsWith:we,escapeCSVCell:function(n){return void 0!==n?(-1<n.indexOf('"')&&(n=n.replace(/"/g,'""')),xe.each(i,function(e,t){if(-1<n.indexOf(t))return n='"'+n+'"',!1})):n="",n},escapeFieldName:pt,escapeSelector:function(e){return e&&e.replace(/\./g,"\\.")},escapeSingleQuotes:function(e){return e&&e.replace(/'/g,"\\'")},extractFieldsFromTemplate:Ye,filterRowsByConditions:function(e,t,n,i){return e&&e.length?t&&t.length?e.filter(function(e){return fe(e,t,n,i)}):e:[]},filterByDataSourceAndEntity:function(t,n){return function(e){return e.attr("datasource")===t&&e.attr("x-entityname")===n}},generateGUID:gt,generateUniqueId:yt,getAPIDescribeLayout:function(e){var t=L();return t&&t.getAPIDescribeLayout(e)},getAPIDescribeSObject:function(e){var t=L();return t&&t.getAPIDescribeSObject(e)},getBodiesOfZIPResourceFiles:Ie,getBodyOfStaticResource:function(e){var t={};return t[e]=[""],Ie(t,{buffer:!1})},getBodyOfZIPResourceFile:ke,getCacheTimestamp:Ct,getCSSSizeObj:function(e,t){var n;return t=t||{},e&&(n=e.toString().match(/^([\d]*\.?[\d]+)([^\d]*)$/)),!!n&&(n[1]=0<=n[1].indexOf(".")?parseFloat(n[1]):parseInt(n[1],10),{original:n[0],number:n[1],unit:n[2]?n[2]:t.defaultUnit||"px"})},getContextToUse:function(e,t,n){var i={},r=n&&n.mode||"row";return e&&e.context&&y(i,e.context),t&&(y(i,t),t.rows&&(i.rows=t.rows)),i.model||(e&&e.model?i.model=e.model:e&&e.list&&e.list.model&&(i.model=e.list.model)),i.row||(i.item&&i.item.row?i.row=i.item.row:!e||!e.row||e instanceof Te.model.Model?e&&e.item&&e.item.row&&(i.row=e.item.row):i.row=e.row),i.list||e&&e.list&&(i.list=e.list),i.editor||e&&e.editor&&(i.editor=e.editor),"model"===r&&(i.row=void 0,i.list=void 0,i.rows=void 0),i},getCurrentDomain:q,getDefaultImageUrl:function(e){var t=Te.platform.getDefaultImagePath?Te.platform.getDefaultImagePath():"";return"skuidlogo"===e?Y(t,"skuid","skuidlogolarge.png",Te.version.date):Y(J(t,"DefaultPhotos"),"skuid",("org"===e?"Org":"Profile")+".jpg",Te.version.date)},getDisplayTypeOfEntity:Ke,getFieldReference:ae,getFieldRelationshipName:ie,getFullyQualifiedId:function(e,t){return e&&t&&e!==t&&!e.startsWith(t)?t+"-"+e:e},getHourOptions:function(e,t,n){var i,r=wt().timeFormat,a=r.toLowerCase(),o=a.indexOf("a"),s=a.indexOf("h"),l=[],c=new Date;for(-1!=o&&(r=o<s?"a"+r.charAt(s):r.charAt(s)+"a"),t=t||24,i=e=e||0;i<=t;i++)c.setHours(i,0,0,0),l.push({value:i,label:Re.formatTime(r,c),isSelected:n===i});return l},getInvokable:function(e,t){return me(t)?function(){return t.apply(e,arguments)}:function(){return e[t].apply(e,arguments)}},getJSONBodiesOfZIPResourceFiles:function(e,t){return Ie(e,y({json:!0},t))},getJSONBodyOfZIPResourceFile:function(e,t,n,i){return ke(e,t,n,y({json:!0},i))},getLayoutFields:M,getLocalVisualforceDomain:function(e){var t,n,i,r,a=!e;return o&&a?o:(e||(e=q()),t="c"===(i=(n=e.split("."))[0])||we(i,"--c")?e:(Ce(i,"--")?((r=i.split("--")).pop(),r.push("c"),n[0]=r.join("--")):n[0]="c",n.join(".")),a&&(o=t),t)},getMergeApi:st,getMergeResult:lt,getModelFieldIdChanges:function(e){var n={};return xe.each(e,function(e,t){!function n(e,t,i,r){var a=i?i+".":i;a+=pt(e),xe.isPlainObject(t)?xe.each(t,function(e,t){n(e,t,a,r)}):r[a]=t}(e,t,"",n)}),n},getNameField:qe,getObjectProperty:Ve,getRowCurrency:function(e){var t,n="CurrencyIsoCode",i=e.model,r=e.row,a=e.field,o=a.lastIndexOf("."),s=i.isAggregate,l=-1!==o?a.substring(0,o+1):"";return s?t=u.getConversionRates()[0].IsoCode:(t=i.getFieldValue(r,l+n,!0))||(t=i.getFieldValue(r,n,!0)),t},getSafeRelativeUrl:K,getSearchOperatorForDisplayType:We,getCurrentSkuidPageName:z,getStaticResourceUrl:Y,determineIfInSkuidNamespace:function(){return we(q().split(".")[0],"--skuid")},getTargetObject:re,getUnescapedParts:ft,getUrlFromAttachmentId:function(e){return(t||"")+"?file="+e+"&retURL="+encodeURIComponent(location.pathname+location.search)},getUserInfoPropValue:oe,getWindowLocation:function(){return window.location},getXML:dt,grab:function(){var e=Array.prototype.slice.call(arguments||[]),t=e.shift(),n=e[0],i=0;for(xe.isArray(n)&&(e=n);i<e.length;i++){try{t=t[e[i]]}catch(e){return}if(ve(t))return}return t},hasObjectProperty:he,highlightSFTab:function(e){var t,n=xe(".bodyDiv"),i=xe("ul#tabBar"),r=i.children("li.zen-active, li.active"),a=r.find("span.zen-assistiveText, span.assistiveText").detach(),o=Te.utils.sfTabs[e];r.removeClass("zen-active primaryPalette primaryPalette active").find("a").attr("title",function(e,t){return t.replace(" - Selected","")}),e&&o&&(t=i.children("li").has('a[href="'+e+'"]')),t.length&&(t.first().addClass("zen-active active primaryPalette").find("a").attr("title",function(e,t){return t+" - Selected"}).after(a),o.color&&(t.css({"background-color":"#"+o.color,"border-color":"#"+o.color}),n.css("border-top-color","#"+o.color)))},ifElse:function(e,t,n){return e?t:n},innerXML:function(e){var t=dt(e&&e.length?e[0]:e),n=t.length,i=t.indexOf("/>");return n<4||i===t.length-2?"":t.substring(t.indexOf(">")+1,t.lastIndexOf("<"))},inPlatform:H,ingestConstructorArguments:function(n,e,t){e&&xe.each(e,function(e,t){if(ve(t))throw new Error("Required constructor argument not provided for "+n.constructor.name+", missing argument: "+String(e));n[e]=t}),t&&xe.each(t,function(e,t){ve(t)||(n[e]=t)})},insertAtIndex:function(e,t,n){n<=0?e.prepend(t):e.children().eq(n-1).after(t)},isApiEnabled:function(){return W().isApiEnabled},isBlank:function(e){return 0!==e&&"boolean"!=typeof e&&!e},isDate:function(e){return"[object Date]"===Object.prototype.toString.call(e)},isExactlyNaN:function(e){return e!=e},isFunction:me,isFileAPISupported:function(){return window.File&&window.FileReader&&window.FileList&&window.Blob&&window.XMLHttpRequest},isMultiValueOperator:function(e){return e&&e.toLowerCase()in _},isInteger:function(e){return Number.isInteger(parseFloat(e))},isNumber:pe,isPromise:ut,isString:ze,isUndefined:ve,isObject:ye,joinStrings:Q,keyBy:function(e,t){for(var n,i,r=xe.isArray(t)?t.length:0,a=0,o={};a<e.length;a++)if(n=e[a],0<r)for(i=0;i<r;i++)n.hasOwnProperty(t[i])&&(o[n[t[i]]]=n);else n.hasOwnProperty(t)&&(o[n[t]]=n);return o},loadJS:$e,loadRichTextApi:function e(t){var n;Te.CKEDITOR?t(Te.CKEDITOR):e.loading?e.loading.done(function(){t(Te.CKEDITOR)}):(e.loading=xe.Deferred(),$e(Y("CKEditor","skuid","ckeditor.js",Ct()),function(){n=Te.CKEDITOR=window.CKEDITOR,e.configured||(e.configured=!0,n.disableAutoInline=!0),t(n),e.loading.resolve()}))},loadCSS:function(e,t){return ye(e)?t=y(e,t):t.href=e,H(b.CORDOVA)&&He(t.href,"/")&&(t.href=t.href.substring(1)),Te.load.css(t,t.callback)},log:function(e,t){var n=window&&window.console;if(n)switch(!t&&e instanceof Error&&(t="error"),t){case r.ERROR:n.error(e);break;case r.WARNING:n.warn(e);break;default:n.log(e)}},lowercase:be,makeConditionLogicString:se,makeXMLDoc:function(e){return ze(e)?xe(xe.parseXML(e)).children().first():xe(e).children().first()},merge:ot,mergeArrays:function(e,t){Array.prototype.push.apply(e,t)},mergeAsDataInContext:function(e,t,n){return nt(it,e,t,n)},mergeAsTextInContext:rt,mergeAsText:at,mergeInContext:function(e,t,n){return nt(ot,e,t,n)},mergeNodeProperty:ee,modelLookup:function(e,t,n,i){var r,a,o,s,l=Te.$M(e),c=Ke(i);return n||(i=n=null),l&&((r=n&&l.getField(n))&&(a=r.displaytype),a&&c&&a!==c&&(a===I?i=parseInt(i,10):a===D&&(i=parseFloat(i))),o=l.getRows(),n&&(o=o.filter(function(e){return l.getFieldValue(e,n,!0)===i}))),o&&o.length&&(s=l.getFieldValue(o[0],t,!0)),s},niceExpand:function(e,t,n,i){n=n||0;var r,a,o,s=e.scrollParent(),l=s[0],c=l.scrollTop,u=l.clientHeight,d=c+u;if(!i&&xe(t).is(":visible"))t.hide();else if(t.show(),r=e[0].offsetHeight,d-1<=(a=(o=e[0].offsetTop-n)+r)){var f=Math.min(a-u+18,o);c<f&&(U||s.animate({scrollTop:f},500))}},nl2br:Ge,onPageBuilder:function(){return"PageBuilder"===z()},outerHTML:function(e){return e.outerHTML||(t=e,(i=document.createElement("div")).appendChild(t.cloneNode(!0)),n=i.innerHTML,i=null,n);var t,n,i},param:function(e){return xe.map(e,function(e,t){return encodeURIComponent(t)+"="+encodeURIComponent(e)}).join("&")},parseAsJSONIfString:Z,parseAsXMLIfString:function(e){if(e&&De.isString(e))try{e=xe.parseXML(e)}catch(e){}return e},processStylesNode:function(e,t,d){t.element&&(t=t.element);var f={},p={},h=[];(d=d||{}).removeInlineStyles&&t.removeAttr("style"),e.find("styleitem").each(function(){var e,t,n=xe(this),i=n.attr("property"),r=n.attr("value"),a=n.attr("type"),o=n.attr("datasource"),s=Te.dataSource.get(o),l="background-image";if("background"===a&&"image"===n.attr("bgtype"))(!d.whitelist||d.whitelist&&-1!==d.whitelist.indexOf(l))&&(e=n.attr("bg-source"),(t=s&&s.getImageSource(e))&&t.getSrc&&h.push(t.getSrc({context:{},mergeSettings:{},dataSource:t.dataSource,xmlDef:n,prefix:"bg-"}).then(function(e){p[l]=e?"url("+e+")":""},function(){p[l]=""})));else if(i&&(!d.whitelist||d.whitelist&&-1!==d.whitelist.indexOf(i))){if("modelmerge"===n.attr("valuesource")){var c=Te.$M(n.attr("mergemodel")),u=n.attr("mergefield");c&&u&&c.getField(u)&&(r=c.getFieldValue(c.getFirstRow(),u,!0))}f[i]=r||""}}),xe.isEmptyObject(f)||t.css(f),xe.when.all(h).then(function(){xe.isEmptyObject(p)||t.css(p)})},readFileAsBase64:function(e){var n=xe.Deferred(),t=new FileReader;return t.onload=function(e){var t=e.target.result;t?n.resolve(t.substring(t.indexOf(",")+1)):n.reject("No Content Found")},t.onerror=function(e){n.reject(e)},t.readAsDataURL(e),n.promise()},redirect:function(e){if(e){var t=e.model,n=e.row,i=e.url,r=e.title||"",a=e.window,o=y(P,e.mergeSettings||{}),s=!(!window.sforce||!sforce.one)&&sforce.one,l=!!(window.sforce&&sforce.console&&sforce.console.isInConsole())&&sforce.console,c=i&&He(i,"/"),u=t&&n?t.getRowId(n):null,d="blank"===a,f=H(Te.constants.LIGHTNING);if(i)if(i=rt(i,{model:t,row:n,$Input:e.$Input},o),f)c&&!d?window.$A.get("e.force:navigateToURL").setParams({url:i}).fire():window.open(i);else if(s)s.navigateToURL(i,d);else if(l)c?(t&&n&&(He(i,"/"+u)||He(i,"/"+u.substring(0,15)))&&t.getRowById(u)&&(r=t.getNameFieldValueForRow(n)),Te.ui.openConsoleTabForUrl(i,r)):window.open(i);else if(H(b.CORDOVA))if(-1<i.indexOf("/ui/page/preview")){var p=i.split("/");-1<(i=p[p.length-1]).indexOf("?")?i=i.substring(0,i.indexOf("?"))+".html"+i.substring(i.indexOf("?")):i+=".html",window.location=i}else-1===i.indexOf("/")&&-1<i.indexOf(".html")?window.location=i:window.open(i);else c&&(i=K(i)),d?window.open(i):"parent"===a?parent.location=i:"top"!==a||f?window.location=i:window.top.location.href=i}},registerBlurHandler:function(n,i){var r=xe(document);r.on("click.skuidBlur",function e(t){xe(t.target).closest(n).length||(r.off("click.skuidBlur",e),i())})},registerPlugin:function(t,n){xe.fn[t]=function(e){return n[e]?n[e].apply(this,Array.prototype.slice.call(arguments,1)):(void 0===e?"undefined":At(e))!==Oe&&e?void xe.error("Method "+e+" does not exist on jQuery."+t):n.init.apply(this,arguments)}},reject:function(e){return Te.$.Deferred().reject(e).promise()},removeAllAttrsExcept:function(n,e,t){var i={};xe.each(e,function(e,t){i[t]=!0});var r=xe.map(n[0].attributes,function(e){return e.name});xe.each(r,function(e,t){i[t]||n.removeAttr(t)}),t||n.empty()},removeEventSubscriptions:function(e){e&&e.data(C)&&(xe.each(e.data(C),function(){Te.events.unsubscribe(this)}),e.removeData(C))},removeScriptTags:function(e){return e&&ze(e)?e.replace(a,""):e},renameFileWhileKeepingExtension:function(e,t){var n=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).maxlen||null;if(t){var i="",r=e.split(".");return t=t.replace(/[^a-z0-9\.\-\_]\s*/gi,""),1<r.length&&(i="."+r.pop()),n?t.substring(0,n-i.length)+i:t+i}return e},resolve:It,rfc4122v4GUID:mt,runPromiseReturningFunctionsInSeries:function(e){var n=e[0]();return xe.each(e,function(e,t){e&&(n=n.then(function(){return t()}))}),n},runningTests:function(){return Te.environment===b.ENVIRONMENTS.TEST},scrollTo:function(e,t){t=t||0;var n=e.scrollParent(),i=n[0].clientHeight,r=e[0].offsetHeight,a=e[0].offsetTop+r-t-i+18;U||n.animate({scrollTop:a},500)},sessionStorage:function(e,t){return function(e,t,n){if(!ve(e)){var i=De["canUse"+X(n)]();return ve(t)?i?Te.data[n].getItem(e):xe.cookie(e):i?(Te.data[n].setItem(e,t),t):xe.cookie(e,t)}}(e,t,"sessionStorage")},setObjectProperty:function(e,t,n){if(e&&t){for(var i,r,a,o=ft(t),s=0,l=o.length-1;s<l&&(i=o[s],e);){if(e instanceof Array){a=null;try{r=parseInt(i,10)}catch(e){a=e}!a&&!isNaN(i)&&0<=r&&(e=e[r])}else e=!ve(e[i])&&ye(e[i])?e[i]:e[i]={};s++}e&&(e instanceof Array&&isNaN(o[l])?e.push(n):e[o[l]]=n)}},size:function(e){if(ve(e)||null===e)return 0;if(xe.isPlainObject(e)){var t,n=0;for(t in e)e.hasOwnProperty(t)&&n++;return n}return xe.isArray(e)||ze(e)?e.length:pe(e)?e.toString().replace(/\D/g,"").length:0},startsWith:He,substringLeft:function(e,t){return e&&t&&(void 0===e?"undefined":At(e))===g&&e.length>t?e.substring(0,t):e},substringRight:function(e,t){return e&&t&&(void 0===e?"undefined":At(e))===g&&e.length>t?e.substring(e.length-t,e.length):e},toArray:function(e){return e instanceof Array?e:[e]},toClass:e,unsetObjectProperty:function(e,t){if(e&&t){for(var n,i,r,a=ft(t),o=0,s=a.length-1;o<s&&(n=a[o],e);){if(e instanceof Array){r=null;try{i=parseInt(n,10)}catch(e){r=e}!r&&!isNaN(n)&&0<=i&&(e=e[i])}else{if(!(n in e))throw"No property at this location.";e=e[n]}o++}e&&(xe.isArray(e)&&!isNaN(a[s])?e.splice(a[s],1):delete e[a[s]])}},uppercase:function(e){return e&&ze(e)?e.toLocaleUpperCase?e.toLocaleUpperCase():e.toUpperCase():e},writeXmlToPageLayoutFields:function(e,t,n){var i,r=M();if(i=e?ze(e)?e:""+dt(e):"",r.length){for(var a,o,s,l,c,u="",d=0,f=0,p=i.length,h=0,g=0,m={};g<r.length&&h<p;){if(a=r[g],s=d+(o=t.getField(a).length)<=p,u=i.substring(d,s?d+o:p),l=!1,s&&u.length&&""!==xe.trim(u))for(c=u.length-1;-1<c;c--)if(""===xe.trim(u[c]))l=!1;else{if(l){f=c+1;break}l=!0}else f=u.length;t.updateRow(n,a,u.substring(0,f)),d+=f,h+=o,g++}for(;g<r.length;)m[a=r[g]]=null,g++;if(t.updateRow(n,m),h<p)throw"The total number of characters in this Page's Layout ("+p+") exceeds the maximum number of characters available for each Page ("+h+"). Please split out some of your content into other Pages, and then include these Pages within this Page."}},XMLToJSON:function e(t){if(!(t instanceof Node))return t;var n={};if(1===t.nodeType){if(0<t.attributes.length){n.$={};for(var i=0;i<t.attributes.length;i++){var r=t.attributes.item(i);n.$[r.nodeName]=r.nodeValue}}}else 3===t.nodeType&&(n=t.nodeValue);if(t.hasChildNodes()&&1===t.childNodes.length&&3===t.childNodes[0].nodeType)n=t.childNodes[0].nodeValue;else if(t.hasChildNodes())for(var a=0;a<t.childNodes.length;a++){var o=t.childNodes.item(a),s=o.nodeName;if(void 0===n[s])n[s]=e(o);else{if(void 0===n[s].push){var l=n[s];n[s]=[],n[s].push(l)}n[s].push(e(o))}}return n},_getRenderOverride:function(e){return bt[e]},_ie:U,_inIframe:function(){try{return window.self!==window.top}catch(e){return!0}},_oniOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream},_setAttachmentBaseUrl:function(e){e&&(t=e.substring(0,e.indexOf("?")))},_setCurrentDomain:function(e){B=e},KeyValueService:xt,KeyValueStore:Dt,SelectList:Tt,SelectItem:kt,TemplateComponent:Rt,saveAs:function(){Ft.saveAs.apply(this,arguments)}})}(window.skuid)},function(e,t,n){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0});var s=window||void 0,r=s.document,l=function(){return s.URL||s.webkitURL||s},c=r.createElementNS("http://www.w3.org/1999/xhtml","a"),u="download"in c,d=/constructor/i.test(s.HTMLElement)||s.safari,f=/CriOS\/[\d]+/.test(navigator.userAgent),p=function(e){(s.setImmediate||s.setTimeout)(function(){throw e},0)},h=function(e){setTimeout(function(){"string"==typeof e?l().revokeObjectURL(e):e.remove()},4e4)},g=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},a=function(e,t,n){n||(e=g(e));var i,r=this,a="application/octet-stream"===e.type,o=function(){!function(e,t,n){for(var i=(t=[].concat(t)).length;i--;){var r=e["on"+t[i]];if("function"==typeof r)try{r.call(e,n||e)}catch(e){p(e)}}}(r,"writestart progress write writeend".split(" "))};if(r.readyState=r.INIT,u)return i=l().createObjectURL(e),void setTimeout(function(){c.href=i,c.download=t,function(e){var t;try{t=new MouseEvent("click")}catch(e){(t=document.createEvent("MouseEvent")).initEvent("click",!0,!1)}e.dispatchEvent(t)}(c),o(),h(i),r.readyState=r.DONE});!function(){if((f||a&&d)&&s.FileReader){var t=new FileReader;return t.onloadend=function(){var e=f?t.result:t.result.replace(/^data:[^;]*;/,"data:attachment/file;");s.open(e,"_blank")||(s.location.href=e),e=void 0,r.readyState=r.DONE,o()},t.readAsDataURL(e),r.readyState=r.INIT}i||(i=l().createObjectURL(e)),a?s.location.href=i:s.open(i,"_blank")||(s.location.href=i);r.readyState=r.DONE,o(),h(i)}()},o=a.prototype;i="undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=g(e)),navigator.msSaveOrOpenBlob(e,t)}:function(e,t,n){return new a(e,t||e.name||"download",n)},o.abort=function(){},o.readyState=o.INIT=0,o.WRITING=1,o.DONE=2,o.error=o.onwritestart=o.onprogress=o.onwrite=o.onabort=o.onerror=o.onwriteend=null;t.saveAs=i},function(e,t,n){"use strict";var i,r=n(225),a=(i=r)&&i.__esModule?i:{default:i};skuid.utils.addSessionWarningCheck=function(e,t,n){return new a.default(e,t,n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();var a=skuid.$L,f=skuid.$,r=skuid.utils,p="<br/>",o=function(){function d(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),this.sessionWarningCheckTimeout,this.showingSessionWarning=!1,this.pageComponent=n,this.sessionWarningCheck(e,t)}return i(d,[{key:"sessionWarningCheck",value:function(e,t){var r=this;clearTimeout(this.sessionWarningCheckTimeout);var n=e?d.getMillisecondsFromNow(e)-18e4:0;n<0?this.showWarning(e,t):(this.unregister(),this.sessionWarningCheckTimeout=setTimeout(function(){skuid.platform.checkSessionExpiration().then(function(e){var t=d.getExpiresResponseResult(e),n=t.expires,i=t.absoluteExpires;return r.sessionWarningCheck(n,i)})},n))}},{key:"clickContinue",value:function(){var r=this;return this.popup.dialog("close"),skuid.platform.forceSessionActivity&&skuid.platform.forceSessionActivity().then(function(e){var t=d.getExpiresResponseResult(e),n=t.expires,i=t.absoluteExpires;if(i<=n)throw new Error("Cannot Renew Session. Using Login Flow");r.sessionWarningCheck(n,i)}).catch(function(){var e=skuid.utils.userInfo,t=e.sessionLoginType,n=e.sessionSSOConfigId,i=!!n&&!!t&&"saml2"==t;window.addEventListener("message",function e(t){t.origin===window.location.origin&&"login_success"===t.data&&(r.sessionWarningCheck(null,null),window.removeEventListener("message",e))}),i?skuid.platform.openLoginWindow({sso_login:"/auth/saml/sp/"+n+"/login?next="+encodeURIComponent("/ui/login?noredirect=true")}):skuid.platform.openLoginWindow()}),this}},{key:"unregister",value:function(){this.popup&&this.popup.dialog("destroy"),this.popup=null,this.showingSessionWarning=!1,clearTimeout(this.sessionWarningCheckTimeout),clearInterval(this.sessionCountDownInterval)}},{key:"showLoggedOut",value:function(){var e=this,t=a("login","Log In");this.createDialog({title:"Session Expired",modal:!0,expireMessage:f("<div>").text("Your session has expired."),instructions:f("<div>").html(p+'Press "'+t+'" to open the login page in a new window.'+p+p+"\n\t\t\t\t(You may need to disable pop-up blocking for this site.)"+p+p),bottomButton:f("<div>").text(t).skooButton().click(function(){e.clickContinue()}),beforeClose:function(){return!1}})}},{key:"showWarning",value:function(e,t){var n=this;if(!this.showingSessionWarning){this.popup&&(this.popup.dialog("destroy"),this.popup=null);var s=this,i=a("continue","Continue"),l=f("<div>"),c=f("<div>").html(p+'Click the "'+i+'" button below to renew your session and continue working.'+p+p),u=f("<div>").text(i).skooButton().click(function(){n.clickContinue()}),r=function(e,t){var n=d.isExpired(e),i=d.getExpiration(e),r=i.minutes,a=i.seconds,o=d.getExpiration(t).minutes;l.text(0<r?"Your session will expire in "+r+" minute"+(1===r?"":"s")+".":"Your session will expire in "+a+" second"+(1===a?"":"s")+"."),n?(s.unregister(),s.showLoggedOut()):(o<=1||r===o)&&(c.html(p+"Your session has reached maximum renewals. You will be able to log in and start a new one once the current session has expired."+p+p),u.hide())};this.createDialog({title:"Session Warning",modal:!1,expireMessage:l,instructions:c,bottomButton:u,beforeClose:function(){n.unregister()}}),clearTimeout(s.sessionWarningCheckTimeout),s.showingSessionWarning=!0,r(e,t),s.sessionCountDownInterval=setInterval(function(){return r(e,t)},1e3)}}},{key:"createDialog",value:function(e){var t=e.expireMessage,n=e.instructions,i=e.bottomButton,r=e.title,a=e.modal,o=e.beforeClose;this.popup=this.popup||f("<div>").append(t,n,i),this.popup.dialog({title:r,modal:a,draggable:!1,resizeable:!1,width:300,beforeClose:o,open:function(){f(this).parent().children().children(".ui-dialog-titlebar-close").hide()}}).parent().css({position:"fixed",left:"inherit",top:"inherit",right:"20px",bottom:"20px"})}}],[{key:"getMillisecondsFromNow",value:function(e){var t=new Date;return new Date(e).getTime()-t.getTime()}},{key:"getExpiration",value:function(e){var t=d.getMillisecondsFromNow(e),n=Math.floor(t/1e3);return{seconds:n,minutes:Math.floor(n/60)}}},{key:"isExpired",value:function(e){return d.getExpiration(e).seconds<=0}},{key:"getExpiresResponseResult",value:function(e){var t=new Date,n=new Date;return n.setDate(t.getDate()+1),r.isObject(e)?e:{expires:e,absoluteExpires:n.toISOString()}}}]),d}();t.default=o},function(e,t,n){"use strict";var i,r,s,a,o,l,c,u=n(0),d=(i=u)&&i.__esModule?i:{default:i};r=skuid,s=r.$,a=r.utils,l=function(e,t){for(var n=!1,i=0;i<e.length;i++){if(!e[i].inactive){n=!0;break}}if(n)return(t?t+"_":"")+s.map(e,function(e){var t,n="",i=e.encloseValueInQuotes;if(t=e.values&&e.values.length?e.values.join(","):i?"'"+e.value+"'":e.value,!e.inactive)return e.name?n+=e.name:e.field?n+=e.field:"param"===e.sourceType&&(n+=e.sourceParam),n+=e.operator+(t||"")}).sort().join("&")},c=[{name:"dataSourceMetadata",expires:!0,expiresDate:o=function(){var e=new Date;return e.setDate(e.getDate()+7),e.getTime()}},{name:"entityData",expires:!0,expiresDate:o,buildIdField:function(e){var t,n=e.dataSource.name,i=e.data,r=e.objectName,a=i.fields&&i.fields.length?function(n){var e=s.map(n,function(e){return e.id});return s.map(e,function(t){var e=n.find(function(e){return e.id===t});if(s.isArray(e)&&(e=e[0]),!e||!e.idField&&!e.uiOnly)return t}).sort().join(",")}(i.fields):"null",o=i.orderByClause?i.orderByClause.replace(" ",""):"null";return a||(a="null"),e.conditions&&e.conditions.length&&(t=l(e.conditions,i.conditionLogic)),n+"--"+r+"--"+(t=t||"null")+"--"+a+"--"+o},buildRow:function(e){var t,n=a.isString(e.dataSource)?e.dataSource:e.dataSource.name,i=e.data,r=e.objectName;return e.conditions&&e.conditions.length&&(t=l(e.conditions,i.conditionLogic)),s.extend(e,{id:this.buildIdField(e),data:e.data,dataSource:n,objectName:r,conditions:t,fields:i.fields,recordsLimit:e.data.recordsLimit,orderBy:i.orderByClause})}},{name:"entityMetadata",expires:!0,expiresDate:o,buildIdField:function(e){return e.dataSource.name+"--"+e.objectName}},{name:"pages",indexes:[{id:"name"},{id:"route"}],expires:!0,expiresDate:o,buildRow:function(e){return s.extend(e,{id:e.id,name:e.name,data:e.data})}},{name:"queries",expires:!0,expiresDate:o,buildRow:function(e){return s.extend(e,{id:e.id,data:e.data})}},{name:"saves",expires:!0,expiresDate:o,buildRow:function(e){return s.extend(e,{id:e.id,data:e.data})}},{name:"syncedSaves",expires:!0,expiresDate:o,buildRow:function(e){return s.extend(e,{id:e.id,data:e.data})}}],r.storage.registerVersionedSchemas(d.default.id,c)},function(e,t,n){"use strict";!function(f){var p=f.$,i=f.settings={},h=f.utils,r=h.KeyValueStore,a=i.__stores={};function g(e){var t=a[e];return t instanceof r?t:void 0}p.extend(f.settings,{init:function(e,t){var n;1===arguments.length?t=e:(n=t,(t={})[e]=n),p.each(t,function(e,t){var n;if(i[e]){if(!((n=a[e])instanceof r))return!0}else n=new r,i[e]=n.get.bind(n),a[e]=n;n.extend(t),f.events.publish("skuid.settings.added:"+e)})},get:function(e,t){var n,i;if(h.isString(e))return 1===arguments.length&&(e=(n=e.match(/^([^.]*)\.?(.*)?/))[1],t=n[2]),(i=g(e))?t?i.get(t):i:void 0},set:function(e,t,n){if(!h.isString(e))throw"Invalid namespace";var i,r,a,o,s,l,c={},u={},d={};s=(o="skuid.settings.modified:"+e)+".",2===arguments.length&&(e=(r=e.match(/^([^.]*)\.?(.*)?/))[1],(a=r[2])?d[a]=t:d=t),3===arguments.length&&h.isString(t)&&!h.isObject(n)&&(d[t]=n),i=g(e),p.each(d,function(e,t){(l=i.get(e))!==t&&(c[e]=t,u[e]=l)}),i.extend(d),p.each(d,function(e,t){f.events.publish(s+e,[{event:s+e,newValue:t,previousValue:u[e]}])}),f.events.publish(o,[{event:o,values:d,newValues:c,previousValues:u}])},__getStore:g,__getStores:function(){return p.map(Object.getOwnPropertyNames(a),g)}})}(window.skuid)},function(e,t,n){"use strict";!function(i){var n=i.$,e=n.extend,r=i.formula={},a=function(){return i.time},o=i.utils,t=i.constants,s=t.LOG_LEVELS.WARNING,l=t.JS_TYPES,c=l.BOOLEAN,u=l.NUMBER,d=l.STRING,f="date",p=t.DISPLAY_TYPES,h=p.BOOLEAN,g=p.INTEGER,m=p.NUMBER,v=p.PERCENT,y=p.CURRENCY,b=p.DOUBLE,S=p.DATE,w=p.DATETIME,C=!1,I={};function k(e){return e=e.toUpperCase(),I[e]}function T(){var e=n.map(I,function(e){var t=e._getIsDeprecated(),n=e.getLocalName(),i=e.getFullName(),r=e.getNamespace(),a=e.getDefaultBuilderState(),o=null!==r;if(!t)return{label:n.toUpperCase()+(o?" (custom - "+r+")":""),value:a||i+"()",isCustom:o,formula:e}});return e.sort(function(e,t){var n=e.formula,i=t.formula,r=n.getLocalName().toUpperCase(),a=i.getLocalName().toUpperCase(),o=(n.getNamespace()||"").toUpperCase(),s=(i.getNamespace()||"").toUpperCase();return r<a?-1:a<r?1:o<s?-1:1}),e}function x(n,i){return o.isUndefined(i)&&(i=0),function(){var e=Array.prototype.slice.call(arguments),t=e[i];return o.isDate(t)&&(e[i]=a().getLocalDateTime(t)),n.apply(window,e)}}function D(e){var t=1,n=arguments.length,i=n%2==0,r=n-(i?2:1);if(n<3)throw"The CASE function requires at least 3 parameters.";for(;t<r;t+=2)if(e===arguments[t])return arguments[t+1];return i?arguments[n-1]:void 0}function R(e){var t,n=Array.prototype.slice.call(arguments,1),i=n.length;if(!o.isString(e)||!i)return!1;for(t=0;t<i;t++)if(-1!==e.indexOf(n[t]))return!0;return!1}function E(e){var t,n=Array.prototype.slice.call(arguments,1),i=n.length;if(!o.isString(e)||!i)return!1;for(t=0;t<i;t++)if(-1===e.indexOf(n[t]))return!1;return!0}var A={logical:{or:function(e,t){return e||t},and:function(e,t){return e&&t},"!=":function(e,t){return o.isDate(e)&&o.isDate(t)?e.getTime()!=t.getTime():e!=t},"=":function(e,t){return o.isDate(e)&&o.isDate(t)?e.getTime()===t.getTime():e===t},"<":function(e,t){return e<t},"<=":function(e,t){return e<=t},">":function(e,t){return t<e},">=":function(e,t){return t<=e}},algebraic:{"+":function(e,t){return e+t},"-":function(e,t){return e-t},"*":function(e,t){return e*t},"/":function(e,t){return e/t},"%":function(e,t){return e%t}},unary:{"+":function(e){return+e},"-":function(e){return-e},"!":function(e){return!e}}};function F(e,r,t){return t||(t={}),function(e,t){var n=i.time;switch(t){case g:return parseInt(e,10);case y:case m:case v:case b:return parseFloat(e);case h:return(!o.isString(e)||"false"!==e.trim().toLowerCase())&&(null==e?e:!!e);case S:return o.isDate(e)&&(e=n.getLocalDateTime(e)),n.getSFDate(e);case w:return n.getSFDateTime(e)}return e}(s(e),t.outputType);function s(e){var t=e.class.major,n=e.class.minor;return"expression"===t?function(e,t){var n,i,r,a,o=t.params;"operational"===e?(n=s(o.head),o.operations?o.operations.forEach(function(e){n=l(n,e)}):o.operation&&(n=l(n,o.operation))):((a=(o.name||"").toUpperCase()).startsWith("C_")&&!a.startsWith("C__")&&(a="C__"+a.substring(2)),i=k(a),r=i&&o.arguments.map(function(e){return s(e)}),n=i&&i.evaluate(r));void 0===n&&(n=null);return n}(n,e):function(e,t){var n,i=t.params.value;null==i&&(i="");switch(e){case"keyword":switch(i.toLowerCase()){case"true":return!0;case"false":return!1;case"nan":return NaN;default:return null}case"number":return parseFloat(i);case"merge":n=o.mergeInContext("{{"+i+"}}",r,{asData:!0,apiExtensions:r.apiExtensions,coerceToJSType:!0,pageComponent:r.pageComponent});break;default:n=i}void 0===n&&(n=null);return n}(n,e)}function l(e,t){var n=t.operator,i=A[n.class.minor][n.params.symbol],r=t.operand,a=i&&r&&s(r);return void 0===e&&(e=null),void 0===a&&(a=null),i&&i(e,a)}}function P(e){try{this.__root=r.parser.parse(e)}catch(e){this.__error=e}}P.prototype={getTokenTree:function(){return this.__root||{}},getError:function(){return this.__error},evaluate:function(e,t){if(!this.__error)return F(this.__root,e,t)}},n(document.body).one("pageload",function(){i.builder&&i.builder.core&&(i.builder.core.formula={getFormulasAsItems:T})});var O=1,N="_prop"+O++,_="_prop"+O++,M="_prop"+O++,L="_prop"+O++,U="_prop"+O++,j="_prop"+O++,B="_prop"+O++,V="_prop"+O++;function z(e,t,n){if(!(this instanceof z))return new z(e,t,n);n=n||{};var i=C?null:n.namespace||"c",r=((C?"":i+"__")+e).toUpperCase();if(!o.isString(e)||!o.isFunction(t))throw"Bad Formula Initialization: both forumula formulaName and formula function must be defined";this[N]=e,this[_]=i,this[L]=n.argCount||n.numArgs,this[U]=n.returnType,this[j]=t,this[M]=r,this[B]=n.defaultBuilderState||n.defaultState,this[V]=n.deprecated||!1,I[r]=this}z.prototype={evaluate:function(e){var t=this[j];if(t)return 1===arguments.length&&n.isArray(e)||(e=arguments),t.apply(this,e)},getLocalName:function(){return this[N]},getNamespace:function(){return this[_]},getArgumentCount:function(){return this[L]},getReturnType:function(){return this[U]},getFullName:function(){return this[M]},getDefaultBuilderState:function(){return this[B]},_getIsDeprecated:function(){return this[V]},register:function(){!function(e){var t=e.getFullName();if(I[t]&&I[t]!==e)throw'A formula with the name "'+t+'" was already registered.';I[t]=e}(this)},unregister:function(){!function(e){var t=e.getFullName();I[t]&&delete I[t]}(this)},getFunction:function(){return o.log("Formula.getFunction is deprecated. Use Formula.evaluate instead.",s),this[j]},getName:function(){return o.log("Formula.getName is deprecated. Use Formula.getLocalName instead.",s),this.getFullName()},getNumArgs:function(){return o.log("Formula.getNumArgs is deprecated. Use Formula.getArgumentCount instead.",s),this.getArgumentCount()}},C=!0,n.each({ABS:{state:"ABS(number)",type:u,func:Math.abs},AMPM:{state:"AMPM(datetime)",type:f,func:x(a().getPeriod)},CASE:{state:"CASE(testValue, case1, result1, case2, result2, ..., default)",func:D},CEIL:{state:"CEIL(val)",type:f,func:Math.ceil},COMBINE_STRINGS:{state:"COMBINE_STRINGS(startString,endString,separator)",type:d,args:3,func:o.combineStrings,deprecated:!0},CONTAINS:{state:"CONTAINS(stringToExamine,stringToLookFor)",type:c,args:2,func:o.contains},CONTAINS_ALL:{state:"CONTAINS_ALL(stringToExamine, stringToLookFor1, stringToLookFor2, ...)",type:c,func:E},CONTAINS_ANY:{state:"CONTAINS_ANY(stringToExamine, stringToLookFor1, stringToLookFor2, ...)",type:c,func:R},ENDS_WITH:{state:"ENDS_WITH(stringToExamine,stringToLookFor)",type:c,args:2,func:o.endsWith},TODAY:{type:f,state:"TODAY()",args:0,func:function(){var e=new Date;return e.setHours(0,0,0,0),e}},DAY:{state:"DAY(date)",type:f,func:x(a().getDay)},DAY_NAME:{state:"DAY_NAME(date)",type:f,func:x(a().getDayName)},DAY_NAME_SHORT:{state:"DAY_NAME_SHORT(date)",type:f,func:x(a().getDayNameShort)},DAY_OF_WEEK:{state:"DAY_OF_WEEK(date)",type:f,func:x(a().getDayOfWeek)},DAY_OF_WEEK_UTC:{state:"DAY_OF_WEEK_UTC(date)",type:f,func:x(a().getUTCDayOfWeek)},FLOOR:{state:"FLOOR(val)",type:u,func:Math.floor},FORMAT_DATE:{state:"FORMAT_DATE(format,date)",type:f,args:2,func:x(a().formatDate,1)},FORMAT_TIME:{state:"FORMAT_TIME(format,datetime)",type:f,args:2,func:x(a().formatTime,1)},HOUR:{state:"HOUR(datetime)",type:f,func:x(a().getHour)},HOUR_UTC:{state:"HOUR_UTC(datetime)",type:f,func:a().getUTCHour},IF:{state:"IF(logic_test,value_if_true,value_if_false)",type:c,args:3,func:o.ifElse},ISBLANK:{state:"ISBLANK(val)",type:c,func:o.isBlank},JOIN_TEXT:{state:"JOIN_TEXT(separator,firstString,secondString,etcString)",type:d,args:3,func:o.joinStrings},LEFT:{state:"LEFT(string,numChars)",type:d,args:2,func:o.substringLeft},LEN:{state:"LEN(string)",type:d,func:o.size},LOWER:{state:"LOWER(string)",type:d,func:o.lowercase},MILLISECOND:{state:"MILLISECOND(datetime)",type:f,func:x(a().getMillisecond)},MINUTE:{state:"MINUTE(datetime)",type:f,func:x(a().getMinute)},MINUTE_UTC:{state:"MINUTE_UTC(datetime)",type:f,func:a().getUTCMinute},MODEL_LOOKUP:{state:"MODEL_LOOKUP(Lookup_Model_Id,Model_Field_To_Return,Model_Field_To_Search,Search_Value)",args:4,func:o.modelLookup},MONTH:{state:"MONTH(date)",type:f,func:x(a().getMonth)},MONTH_UTC:{state:"MONTH_UTC(date)",type:f,func:a().getUTCMonth},MONTH_NAME:{state:"MONTH_NAME(date)",type:f,func:x(a().getMonthName)},MONTH_NAME_SHORT:{state:"MONTH_NAME_SHORT(date)",type:f,func:x(a().getMonthNameShort)},NOT:{state:"NOT(val)",type:c,func:function(e){return!0!==e}},NOW:{type:f,state:"NOW()",args:0,func:a().roundedNow},RIGHT:{state:"RIGHT(string,numChars)",type:d,args:2,func:o.substringRight},ROUND:{state:"ROUND(val)",type:u,func:Math.round},SECOND:{state:"SECOND(datetime)",type:f,func:x(a().getSecond)},SECOND_UTC:{state:"SECOND_UTC(datetime)",type:f,func:a().getUTCSecond},STARTS_WITH:{state:"STARTS_WITH(stringToExamine,stringToLookFor)",type:c,args:2,func:o.startsWith},TIMESTAMP:{state:"TIMESTAMP(dateTimeValue)",type:u,args:1,func:function(e){return e&&e.getTime?e.getTime():0}},UPPER:{state:"UPPER(string)",type:d,func:o.uppercase},VALUE:{state:"VALUE(text)",type:d,func:window.parseFloat},YEAR:{state:"YEAR(date)",type:f,func:x(a().getYear)},YEAR_UTC:{state:"YEAR_UTC(date)",type:f,func:a().getUTCYear}},function(e,t){new z(e,t.func,{argCount:t.args,returnType:t.type,defaultBuilderState:t.state,deprecated:t.deprecated})}),C=!1,n.extend(r,{CompiledFormula:P,FormulaFunction:z,evaluate:function(e,t,n){return n||(n={}),F(r.parser.parse(e),t,n)},get:k,map:function(){return e({},I)},Formula:z}),i.utils.runningTests()&&(r.internalFunctions={CASE:D,CONTAINS_ALL:E,CONTAINS_ANY:R})}(window.skuid)},function(e,t){(function(){!function(e){"use strict";function jn(e,t,n,i){this.message=e,this.expected=t,this.found=n,this.location=i,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,jn)}!function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}(jn,Error),jn.buildMessage=function(e,t){var n,a={literal:function(e){return'"'+r(e.text)+'"'},class:function(e){var t,n="";for(t=0;t<e.parts.length;t++)n+=e.parts[t]instanceof Array?o(e.parts[t][0])+"-"+o(e.parts[t][1]):o(e.parts[t]);return"["+(e.inverted?"^":"")+n+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};function i(e){return e.charCodeAt(0).toString(16).toUpperCase()}function r(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+i(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+i(e)})}function o(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+i(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+i(e)})}return"Expected "+function(e){var t,n,i,r=new Array(e.length);for(t=0;t<e.length;t++)r[t]=(i=e[t],a[i.type](i));if(r.sort(),0<r.length){for(n=t=1;t<r.length;t++)r[t-1]!==r[t]&&(r[n]=r[t],n++);r.length=n}switch(r.length){case 1:return r[0];case 2:return r[0]+" or "+r[1];default:return r.slice(0,-1).join(", ")+", or "+r[r.length-1]}}(e)+" but "+((n=t)?'"'+r(n)+'"':"end of input")+" found."},e.skuid.formula.parser={SyntaxError:jn,parse:function(C,e){e=void 0!==e?e:{};var t,I={},n={Expression:hn},i=hn,a=function(e){return e},o=function(){return Ln("keyword","null")},s='"',l=ln('"',!1),c=/^[^"\\]/,u=cn(['"',"\\"],!0,!1),d=function(e){return Ln("string",e.join(""))},f="'",p=ln("'",!1),h=/^[^'\\]/,g=cn(["'","\\"],!0,!1),m="\\",v=ln("\\",!1),y=/^[1-7]/,b=cn([["1","7"]],!1,!1),S=/^[0-7]/,w=cn([["0","7"]],!1,!1),k=function(e){var t=parseInt(e,8),n="";return 256<=t&&(t=parseInt(e.substring(0,2),8),n=e.substring(2,3)),String.fromCharCode(t)+n},T="\\x",x=ln("\\x",!1),D=/^[0-9a-f]/i,R=cn([["0","9"],["a","f"]],!1,!0),E=function(e){var t=parseInt(e,16);return String.fromCharCode(t)},A="\\u",F=ln("\\u",!1),P="\\n",O=ln("\\n",!1),N=function(){return"\n"},_="\\\n",M=ln("\\\n",!1),L=function(){return""},U="\\r",j=ln("\\r",!1),B=function(){return"\r"},V="\\t",z=ln("\\t",!1),G=function(){return"\t"},H="\\b",q=ln("\\b",!1),$=function(){return"\b"},W="\\f",Y=ln("\\f",!1),K=function(){return"\f"},X="\\v",J=ln("\\v",!1),Q=function(){return"\v"},Z="\\0",ee=ln("\\0",!1),te=function(){return"\0"},ne="\\\\",ie=ln("\\\\",!1),re=function(){return"\\"},ae="\\'",oe=ln("\\'",!1),se=function(){return"'"},le='\\"',ce=ln('\\"',!1),ue=function(){return'"'},de=/^[0-9]/,fe=cn([["0","9"]],!1,!1),pe=".",he=ln(".",!1),ge=function(e){return Ln("number",parseFloat(e))},me="date",ve=ln("date",!0),ye="-",be=ln("-",!1),Se="T",we=ln("T",!1),Ce=":",Ie=ln(":",!1),ke=function(e,t,n,i,r,a,o){return o},Te=function(e,t,n,i,r,a,o){return{second:a,millisecond:o||"0"}},xe=function(e,t,n,i,r,a){return a||(a={second:"0",millisecond:"0"}),{hour:i,minute:r,second:a.second,millisecond:a.millisecond}},De="Z",Re=ln("Z",!1),Ee="+00:00",Ae=ln("+00:00",!1),Fe="+",Pe=ln("+",!1),Oe="0",Ne=ln("0",!1),_e=function(e,t,n,i,r){var a=0,o=0,s=0,l=0;e=parseInt(e),t=parseInt(t),n=parseInt(n),(t<1||12<t)&&sn("A Valid Date");var c,u=new Date(e,t,1);return u.setDate(0),(n<1||n>u.getDate())&&sn("A Valid Date"),i&&(a=parseInt(i.hour),o=parseInt(i.minute),s=parseInt(i.second),l=parseInt(i.millisecond),(23<a||59<o||59<s||999<l)&&sn("A Valid Date")),c=r?new Date(Date.UTC(e,t-1,n,a,o,s,l)):skuid.time.getRealJSDateTimeFromLocal(new Date(e,t-1,n,a,o,s,l)),Ln("date",new Date(c))},Me="true",Le=ln("true",!0),Ue="false",je=ln("false",!0),Be="null",Ve=ln("null",!0),ze="undefined",Ge=ln("undefined",!0),He="nan",qe=ln("nan",!0),$e=/^[a-z0-9_]/i,We=cn([["a","z"],["0","9"],"_"],!1,!0),Ye=function(e){return Ln("keyword",e)},Ke="{{{",Xe=ln("{{{",!1),Je=/^[\/#\^]/,Qe=cn(["/","#","^"],!1,!1),Ze=/^[^{}]/,et=cn(["{","}"],!0,!1),tt="}}}",nt=ln("}}}",!1),it=function(e){return e},rt="{{",at=ln("{{",!1),ot="}}",st=ln("}}",!1),lt=function(e){return Ln("merge",e)},ct="(",ut=ln("(",!1),dt=",",ft=ln(",",!1),pt=function(e,t,n){return n},ht=function(e,t,n){return[t].concat(n)},gt=")",mt=ln(")",!1),vt=function(e,t){return Mn("function",{name:e,arguments:t||[]})},yt=function(e){return Ln("identifier",e)},bt=function(e,t,n){return{operator:t,operand:n}},St=function(e,t){return Mn("operational",{head:e,operations:t})},wt="|",Ct=ln("|",!1),It=function(e){return e},kt="or",Tt=ln("or",!0),xt=function(){return Un("logical","or")},Dt="&",Rt=ln("&",!1),Et="and",At=ln("and",!0),Ft=function(){return Un("logical","and")},Pt="!",Ot=ln("!",!1),Nt="=",_t=ln("=",!1),Mt=function(e){return Un("logical",e)},Lt=/^[<>]/,Ut=cn(["<",">"],!1,!1),jt=/^[\-+]/,Bt=cn(["-","+"],!1,!1),Vt=function(e){return Un("algebraic",e)},zt=/^[\/%*]/,Gt=cn(["/","%","*"],!1,!1),Ht=function(e){return{operator:e}},qt=function(e,t){return Mn("operational",{head:t,operation:e,unary:!0})},$t=/^[\-+!]/,Wt=cn(["-","+","!"],!1,!1),Yt=function(e){return Un("unary",e)},Kt=function(e){return e},r=/^[ \f\n\r\t\x0B\xA0\u1680\u180E\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]/,Xt=cn([" ","\f","\n","\r","\t","\v","","","",["",""],"\u2028","\u2029","","","","\ufeff"],!1,!1),Jt=/^[a-z]/i,Qt=cn([["a","z"]],!1,!0),Zt=0,en=0,tn=[{line:1,column:1}],nn=0,rn=[],an=0,on={};if("startRule"in e){if(!(e.startRule in n))throw new Error("Can't start parsing from rule \""+e.startRule+'".');i=n[e.startRule]}function sn(e,t){throw t=void 0!==t?t:dn(en,Zt),pn([function(e){return{type:"other",description:e}}(e)],C.substring(en,Zt),t)}function ln(e,t){return{type:"literal",text:e,ignoreCase:t}}function cn(e,t,n){return{type:"class",parts:e,inverted:t,ignoreCase:n}}function un(e){var t,n=tn[e];if(n)return n;for(t=e-1;!tn[t];)t--;for(n={line:(n=tn[t]).line,column:n.column};t<e;)10===C.charCodeAt(t)?(n.line++,n.column=1):n.column++,t++;return tn[e]=n}function dn(e,t){var n=un(e),i=un(t);return{start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:i.line,column:i.column}}}function fn(e){Zt<nn||(nn<Zt&&(nn=Zt,rn=[]),rn.push(e))}function pn(e,t,n){return new jn(jn.buildMessage(e,t),e,t,n)}function hn(){var e,t,n,i=29*Zt+0,r=on[i];return r?(Zt=r.nextPos,r.result):(e=Zt,(e=(t=Pn())!==I&&(n=bn())!==I&&Pn()!==I?(en=e,t=a(n)):(Zt=e,I))===I&&(e=Zt,(e=(t=Pn())!==I&&(n=vn())!==I&&Pn()!==I?(en=e,t=a(n)):(Zt=e,I))===I&&(e=Zt,(e=(t=Pn())!==I&&(n=gn())!==I&&Pn()!==I?(en=e,t=a(n)):(Zt=e,I))===I&&(e=Zt,(t=Pn())!==I&&(en=e,t=o()),e=t))),on[i]={nextPos:Zt,result:e},e)}function gn(){var e,t=29*Zt+1,n=on[t];return n?(Zt=n.nextPos,n.result):((e=function(){var e,t,n,i,r=29*Zt+2,a=on[r];if(a)return Zt=a.nextPos,a.result;if(e=Zt,34===C.charCodeAt(Zt)?(t=s,Zt++):(t=I,0===an&&fn(l)),t!==I){for(n=[],(i=mn())===I&&(c.test(C.charAt(Zt))?(i=C.charAt(Zt),Zt++):(i=I,0===an&&fn(u)));i!==I;)n.push(i),(i=mn())===I&&(c.test(C.charAt(Zt))?(i=C.charAt(Zt),Zt++):(i=I,0===an&&fn(u)));e=n!==I?(34===C.charCodeAt(Zt)?(i=s,Zt++):(i=I,0===an&&fn(l)),i!==I?(en=e,t=d(n)):(Zt=e,I)):(Zt=e,I)}else Zt=e,e=I;if(e===I)if(e=Zt,39===C.charCodeAt(Zt)?(t=f,Zt++):(t=I,0===an&&fn(p)),t!==I){for(n=[],(i=mn())===I&&(h.test(C.charAt(Zt))?(i=C.charAt(Zt),Zt++):(i=I,0===an&&fn(g)));i!==I;)n.push(i),(i=mn())===I&&(h.test(C.charAt(Zt))?(i=C.charAt(Zt),Zt++):(i=I,0===an&&fn(g)));e=n!==I?(39===C.charCodeAt(Zt)?(i=f,Zt++):(i=I,0===an&&fn(p)),i!==I?(en=e,t=d(n)):(Zt=e,I)):(Zt=e,I)}else Zt=e,e=I;return on[r]={nextPos:Zt,result:e},e}())===I&&(e=function(){var e,t,n,i,r,a,o=29*Zt+4,s=on[o];if(s)return Zt=s.nextPos,s.result;for(i=n=t=e=Zt,r=[],de.test(C.charAt(Zt))?(a=C.charAt(Zt),Zt++):(a=I,0===an&&fn(fe));a!==I;)r.push(a),de.test(C.charAt(Zt))?(a=C.charAt(Zt),Zt++):(a=I,0===an&&fn(fe));if((i=r!==I?(46===C.charCodeAt(Zt)?(a=pe,Zt++):(a=I,0===an&&fn(he)),a!==I?r=[r,a]:(Zt=i,I)):(Zt=i,I))===I&&(i=null),i!==I){if(r=[],de.test(C.charAt(Zt))?(a=C.charAt(Zt),Zt++):(a=I,0===an&&fn(fe)),a!==I)for(;a!==I;)r.push(a),de.test(C.charAt(Zt))?(a=C.charAt(Zt),Zt++):(a=I,0===an&&fn(fe));else r=I;n=r!==I?i=[i,r]:(Zt=n,I)}else Zt=n,n=I;return(t=n!==I?C.substring(t,Zt):n)!==I&&(en=e,t=ge(t)),e=t,on[o]={nextPos:Zt,result:e},e}())===I&&(e=function(){var e,t,n,i,r,a,o,s,l,c,u,d,f,p,h,g,m,v,y,b,S=29*Zt+5,w=on[S];if(w)return Zt=w.nextPos,w.result;if(e=Zt,C.substr(Zt,4).toLowerCase()===me?(t=C.substr(Zt,4),Zt+=4):(t=I,0===an&&fn(ve)),t!==I)if(Pn()!==I)if(i=n=Zt,de.test(C.charAt(Zt))?(r=C.charAt(Zt),Zt++):(r=I,0===an&&fn(fe)),i=r!==I?(de.test(C.charAt(Zt))?(a=C.charAt(Zt),Zt++):(a=I,0===an&&fn(fe)),a!==I?(de.test(C.charAt(Zt))?(o=C.charAt(Zt),Zt++):(o=I,0===an&&fn(fe)),o!==I?(de.test(C.charAt(Zt))?(s=C.charAt(Zt),Zt++):(s=I,0===an&&fn(fe)),s!==I?r=[r,a,o,s]:(Zt=i,I)):(Zt=i,I)):(Zt=i,I)):(Zt=i,I),(n=i!==I?C.substring(n,Zt):i)!==I)if(45===C.charCodeAt(Zt)?(i=ye,Zt++):(i=I,0===an&&fn(be)),i!==I)if(a=r=Zt,de.test(C.charAt(Zt))?(o=C.charAt(Zt),Zt++):(o=I,0===an&&fn(fe)),a=o!==I?(de.test(C.charAt(Zt))?(s=C.charAt(Zt),Zt++):(s=I,0===an&&fn(fe)),s===I&&(s=null),s!==I?o=[o,s]:(Zt=a,I)):(Zt=a,I),(r=a!==I?C.substring(r,Zt):a)!==I)if(45===C.charCodeAt(Zt)?(a=ye,Zt++):(a=I,0===an&&fn(be)),a!==I)if(s=o=Zt,de.test(C.charAt(Zt))?(l=C.charAt(Zt),Zt++):(l=I,0===an&&fn(fe)),s=l!==I?(de.test(C.charAt(Zt))?(c=C.charAt(Zt),Zt++):(c=I,0===an&&fn(fe)),c===I&&(c=null),c!==I?l=[l,c]:(Zt=s,I)):(Zt=s,I),(o=s!==I?C.substring(o,Zt):s)!==I){if(s=Zt,84===C.charCodeAt(Zt)?(l=Se,Zt++):(l=I,0===an&&fn(we)),l!==I)if(u=c=Zt,de.test(C.charAt(Zt))?(d=C.charAt(Zt),Zt++):(d=I,0===an&&fn(fe)),u=d!==I?(de.test(C.charAt(Zt))?(f=C.charAt(Zt),Zt++):(f=I,0===an&&fn(fe)),f!==I?d=[d,f]:(Zt=u,I)):(Zt=u,I),(c=u!==I?C.substring(c,Zt):u)!==I)if(58===C.charCodeAt(Zt)?(u=Ce,Zt++):(u=I,0===an&&fn(Ie)),u!==I)if(f=d=Zt,de.test(C.charAt(Zt))?(p=C.charAt(Zt),Zt++):(p=I,0===an&&fn(fe)),f=p!==I?(de.test(C.charAt(Zt))?(h=C.charAt(Zt),Zt++):(h=I,0===an&&fn(fe)),h!==I?p=[p,h]:(Zt=f,I)):(Zt=f,I),(d=f!==I?C.substring(d,Zt):f)!==I){if(f=Zt,58===C.charCodeAt(Zt)?(p=Ce,Zt++):(p=I,0===an&&fn(Ie)),p!==I)if(g=h=Zt,de.test(C.charAt(Zt))?(m=C.charAt(Zt),Zt++):(m=I,0===an&&fn(fe)),g=m!==I?(de.test(C.charAt(Zt))?(v=C.charAt(Zt),Zt++):(v=I,0===an&&fn(fe)),v!==I?m=[m,v]:(Zt=g,I)):(Zt=g,I),(h=g!==I?C.substring(h,Zt):g)!==I){if(g=Zt,46===C.charCodeAt(Zt)?(m=pe,Zt++):(m=I,0===an&&fn(he)),m!==I){if(v=Zt,y=[],de.test(C.charAt(Zt))?(b=C.charAt(Zt),Zt++):(b=I,0===an&&fn(fe)),b!==I)for(;b!==I;)y.push(b),de.test(C.charAt(Zt))?(b=C.charAt(Zt),Zt++):(b=I,0===an&&fn(fe));else y=I;v=y!==I?C.substring(v,Zt):y,g=v!==I?(en=g,m=ke(n,r,o,c,d,h,v)):(Zt=g,I)}else Zt=g,g=I;g===I&&(g=null),f=g!==I?(en=f,p=Te(n,r,o,c,d,h,g)):(Zt=f,I)}else Zt=f,f=I;else Zt=f,f=I;f===I&&(f=null),s=f!==I?(en=s,l=xe(n,r,o,c,d,f)):(Zt=s,I)}else Zt=s,s=I;else Zt=s,s=I;else Zt=s,s=I;else Zt=s,s=I;if(s===I&&(s=null),s!==I){if(l=Zt,90===C.charCodeAt(Zt)?(c=De,Zt++):(c=I,0===an&&fn(Re)),c===I&&(C.substr(Zt,6)===Ee?(c=Ee,Zt+=6):(c=I,0===an&&fn(Ae)),c===I))if(c=Zt,43===C.charCodeAt(Zt)?(u=Fe,Zt++):(u=I,0===an&&fn(Pe)),u!==I){if(d=[],48===C.charCodeAt(Zt)?(f=Oe,Zt++):(f=I,0===an&&fn(Ne)),f!==I)for(;f!==I;)d.push(f),48===C.charCodeAt(Zt)?(f=Oe,Zt++):(f=I,0===an&&fn(Ne));else d=I;c=d!==I?u=[u,d]:(Zt=c,I)}else Zt=c,c=I;c===I&&(c=null),l=c!==I?C.substring(l,Zt):c,e=l!==I?(en=e,t=_e(n,r,o,s,l)):(Zt=e,I)}else Zt=e,e=I}else Zt=e,e=I;else Zt=e,e=I;else Zt=e,e=I;else Zt=e,e=I;else Zt=e,e=I;else Zt=e,e=I;else Zt=e,e=I;return on[S]={nextPos:Zt,result:e},e}())===I&&(e=function(){var e,t,n,i,r=29*Zt+6,a=on[r];return a?(Zt=a.nextPos,a.result):(e=Zt,C.substr(Zt,4).toLowerCase()===Me?(t=C.substr(Zt,4),Zt+=4):(t=I,0===an&&fn(Le)),t===I&&(C.substr(Zt,5).toLowerCase()===Ue?(t=C.substr(Zt,5),Zt+=5):(t=I,0===an&&fn(je)),t===I&&(C.substr(Zt,4).toLowerCase()===Be?(t=C.substr(Zt,4),Zt+=4):(t=I,0===an&&fn(Ve)),t===I&&(C.substr(Zt,9).toLowerCase()===ze?(t=C.substr(Zt,9),Zt+=9):(t=I,0===an&&fn(Ge)),t===I&&(C.substr(Zt,3).toLowerCase()===He?(t=C.substr(Zt,3),Zt+=3):(t=I,0===an&&fn(qe)))))),e=t!==I?(n=Zt,an++,$e.test(C.charAt(Zt))?(i=C.charAt(Zt),Zt++):(i=I,0===an&&fn(We)),an--,(n=i===I?void 0:(Zt=n,I))!==I?(en=e,t=Ye(t)):(Zt=e,I)):(Zt=e,I),on[r]={nextPos:Zt,result:e},e)}())===I&&(e=function(){var e,t,n,i,r,a,o,s,l=29*Zt+7,c=on[l];if(c)return Zt=c.nextPos,c.result;if(n=t=e=Zt,C.substr(Zt,3)===Ke?(i=Ke,Zt+=3):(i=I,0===an&&fn(Xe)),(n=i!==I?(r=Pn())!==I?i=[i,r]:(Zt=n,I):(Zt=n,I))!==I)if(i=Zt,an++,Je.test(C.charAt(Zt))?(r=C.charAt(Zt),Zt++):(r=I,0===an&&fn(Qe)),an--,(i=r===I?void 0:(Zt=i,I))!==I){if(r=Zt,a=[],Ze.test(C.charAt(Zt))?(o=C.charAt(Zt),Zt++):(o=I,0===an&&fn(et)),o!==I)for(;o!==I;)a.push(o),Ze.test(C.charAt(Zt))?(o=C.charAt(Zt),Zt++):(o=I,0===an&&fn(et));else a=I;r=a!==I?C.substring(r,Zt):a,t=r!==I?(a=Zt,o=Pn(),(a=o!==I?(C.substr(Zt,3)===tt?(s=tt,Zt+=3):(s=I,0===an&&fn(nt)),s!==I?o=[o,s]:(Zt=a,I)):(Zt=a,I))!==I?(en=t,n=it(r)):(Zt=t,I)):(Zt=t,I)}else Zt=t,t=I;else Zt=t,t=I;if(t===I)if(n=t=Zt,C.substr(Zt,2)===rt?(i=rt,Zt+=2):(i=I,0===an&&fn(at)),(n=i!==I&&(r=Pn())!==I?i=[i,r]:(Zt=n,I))!==I)if(i=Zt,an++,Je.test(C.charAt(Zt))?(r=C.charAt(Zt),Zt++):(r=I,0===an&&fn(Qe)),an--,(i=r===I?void 0:(Zt=i,I))!==I){if(r=Zt,a=[],Ze.test(C.charAt(Zt))?(o=C.charAt(Zt),Zt++):(o=I,0===an&&fn(et)),o!==I)for(;o!==I;)a.push(o),Ze.test(C.charAt(Zt))?(o=C.charAt(Zt),Zt++):(o=I,0===an&&fn(et));else a=I;r=a!==I?C.substring(r,Zt):a,t=r!==I?(a=Zt,o=Pn(),(a=o!==I?(C.substr(Zt,2)===ot?(s=ot,Zt+=2):(s=I,0===an&&fn(st)),s!==I?o=[o,s]:(Zt=a,I)):(Zt=a,I))!==I?(en=t,n=it(r)):(Zt=t,I)):(Zt=t,I)}else Zt=t,t=I;else Zt=t,t=I;return t!==I&&(en=e,t=lt(t)),e=t,on[l]={nextPos:Zt,result:e},e}()),on[t]={nextPos:Zt,result:e},e)}function mn(){var e,t,n,i,r,a,o,s,l=29*Zt+3,c=on[l];return c?(Zt=c.nextPos,c.result):(e=Zt,92===C.charCodeAt(Zt)?(t=m,Zt++):(t=I,0===an&&fn(v)),(e=t!==I?(i=n=Zt,y.test(C.charAt(Zt))?(r=C.charAt(Zt),Zt++):(r=I,0===an&&fn(b)),(i=r!==I?(S.test(C.charAt(Zt))?(a=C.charAt(Zt),Zt++):(a=I,0===an&&fn(w)),a===I&&(a=null),a!==I?(S.test(C.charAt(Zt))?(o=C.charAt(Zt),Zt++):(o=I,0===an&&fn(w)),o===I&&(o=null),o!==I?(S.test(C.charAt(Zt))?(s=C.charAt(Zt),Zt++):(s=I,0===an&&fn(w)),s===I&&(s=null),s!==I?r=[r,a,o,s]:(Zt=i,I)):(Zt=i,I)):(Zt=i,I)):(Zt=i,I))===I&&(i=Zt,S.test(C.charAt(Zt))?(r=C.charAt(Zt),Zt++):(r=I,0===an&&fn(w)),i=r!==I?(S.test(C.charAt(Zt))?(a=C.charAt(Zt),Zt++):(a=I,0===an&&fn(w)),a!==I?(S.test(C.charAt(Zt))?(o=C.charAt(Zt),Zt++):(o=I,0===an&&fn(w)),o===I&&(o=null),o!==I?r=[r,a,o]:(Zt=i,I)):(Zt=i,I)):(Zt=i,I)),(n=i!==I?C.substring(n,Zt):i)!==I?(en=e,t=k(n)):(Zt=e,I)):(Zt=e,I))===I&&(e=Zt,C.substr(Zt,2)===T?(t=T,Zt+=2):(t=I,0===an&&fn(x)),(e=t!==I?(i=n=Zt,D.test(C.charAt(Zt))?(r=C.charAt(Zt),Zt++):(r=I,0===an&&fn(R)),(n=(i=r!==I?(D.test(C.charAt(Zt))?(a=C.charAt(Zt),Zt++):(a=I,0===an&&fn(R)),a!==I?r=[r,a]:(Zt=i,I)):(Zt=i,I))!==I?C.substring(n,Zt):i)!==I?(en=e,t=E(n)):(Zt=e,I)):(Zt=e,I))===I&&(e=Zt,C.substr(Zt,2)===A?(t=A,Zt+=2):(t=I,0===an&&fn(F)),(e=t!==I?(i=n=Zt,D.test(C.charAt(Zt))?(r=C.charAt(Zt),Zt++):(r=I,0===an&&fn(R)),(n=(i=r!==I?(D.test(C.charAt(Zt))?(a=C.charAt(Zt),Zt++):(a=I,0===an&&fn(R)),a!==I?(D.test(C.charAt(Zt))?(o=C.charAt(Zt),Zt++):(o=I,0===an&&fn(R)),o!==I?(D.test(C.charAt(Zt))?(s=C.charAt(Zt),Zt++):(s=I,0===an&&fn(R)),s!==I?r=[r,a,o,s]:(Zt=i,I)):(Zt=i,I)):(Zt=i,I)):(Zt=i,I))!==I?C.substring(n,Zt):i)!==I?(en=e,t=E(n)):(Zt=e,I)):(Zt=e,I))===I&&(e=Zt,C.substr(Zt,2)===P?(t=P,Zt+=2):(t=I,0===an&&fn(O)),t!==I&&(en=e,t=N()),(e=t)===I&&(e=Zt,C.substr(Zt,2)===_?(t=_,Zt+=2):(t=I,0===an&&fn(M)),t!==I&&(en=e,t=L()),(e=t)===I&&(e=Zt,C.substr(Zt,2)===U?(t=U,Zt+=2):(t=I,0===an&&fn(j)),t!==I&&(en=e,t=B()),(e=t)===I&&(e=Zt,C.substr(Zt,2)===V?(t=V,Zt+=2):(t=I,0===an&&fn(z)),t!==I&&(en=e,t=G()),(e=t)===I&&(e=Zt,C.substr(Zt,2)===H?(t=H,Zt+=2):(t=I,0===an&&fn(q)),t!==I&&(en=e,t=$()),(e=t)===I&&(e=Zt,C.substr(Zt,2)===W?(t=W,Zt+=2):(t=I,0===an&&fn(Y)),t!==I&&(en=e,t=K()),(e=t)===I&&(e=Zt,C.substr(Zt,2)===X?(t=X,Zt+=2):(t=I,0===an&&fn(J)),t!==I&&(en=e,t=Q()),(e=t)===I&&(e=Zt,C.substr(Zt,2)===Z?(t=Z,Zt+=2):(t=I,0===an&&fn(ee)),t!==I&&(en=e,t=te()),(e=t)===I&&(e=Zt,C.substr(Zt,2)===ne?(t=ne,Zt+=2):(t=I,0===an&&fn(ie)),t!==I&&(en=e,t=re()),(e=t)===I&&(e=Zt,C.substr(Zt,2)===ae?(t=ae,Zt+=2):(t=I,0===an&&fn(oe)),t!==I&&(en=e,t=se()),(e=t)===I&&(e=Zt,C.substr(Zt,2)===le?(t=le,Zt+=2):(t=I,0===an&&fn(ce)),t!==I&&(en=e,t=ue()),e=t))))))))))))),on[l]={nextPos:Zt,result:e},e)}function vn(){var e,t,n,i,r,a,o,s,l,c,u=29*Zt+8,d=on[u];if(d)return Zt=d.nextPos,d.result;if(t=e=Zt,(t=(n=function(){var e,t,n,i,r,a,o=29*Zt+9,s=on[o];if(s)return Zt=s.nextPos,s.result;if(e=Zt,(t=On())!==I){for(n=[],i=Zt,46===C.charCodeAt(Zt)?(r=pe,Zt++):(r=I,0===an&&fn(he)),i=r!==I&&(a=On())!==I?r=[r,a]:(Zt=i,I);i!==I;)n.push(i),i=Zt,46===C.charCodeAt(Zt)?(r=pe,Zt++):(r=I,0===an&&fn(he)),i=r!==I&&(a=On())!==I?r=[r,a]:(Zt=i,I);e=n!==I?t=[t,n]:(Zt=e,I)}else Zt=e,e=I;return on[o]={nextPos:Zt,result:e},e}())!==I?C.substring(t,Zt):n)!==I)if((n=Pn())!==I)if(40===C.charCodeAt(Zt)?(i=ct,Zt++):(i=I,0===an&&fn(ut)),i!==I)if(Pn()!==I){if(r=Zt,(a=yn())!==I)if(Pn()!==I){for(o=[],s=Zt,44===C.charCodeAt(Zt)?(l=dt,Zt++):(l=I,0===an&&fn(ft)),s=l!==I&&Pn()!==I&&(c=yn())!==I&&Pn()!==I?(en=s,l=pt(t,a,c)):(Zt=s,I);s!==I;)o.push(s),s=Zt,44===C.charCodeAt(Zt)?(l=dt,Zt++):(l=I,0===an&&fn(ft)),s=l!==I&&Pn()!==I&&(c=yn())!==I&&Pn()!==I?(en=s,l=pt(t,a,c)):(Zt=s,I);r=o!==I?(en=r,a=ht(t,a,o)):(Zt=r,I)}else Zt=r,r=I;else Zt=r,r=I;r===I&&(r=null),e=r!==I?(41===C.charCodeAt(Zt)?(a=gt,Zt++):(a=I,0===an&&fn(mt)),a!==I?(en=e,t=vt(t,r)):(Zt=e,I)):(Zt=e,I)}else Zt=e,e=I;else Zt=e,e=I;else Zt=e,e=I;else Zt=e,e=I;return on[u]={nextPos:Zt,result:e},e}function yn(){var e,t,n,i,r,a=29*Zt+10,o=on[a];return o?(Zt=o.nextPos,o.result):((e=bn())===I&&(e=gn())===I&&(e=Zt,(e=Pn()!==I?(t=Zt,(t=(n=On())!==I?C.substring(t,Zt):n)!==I&&(n=Pn())!==I?(i=Zt,an++,40===C.charCodeAt(Zt)?(r=ct,Zt++):(r=I,0===an&&fn(ut)),an--,(i=r===I?void 0:(Zt=i,I))!==I?(en=e,yt(t)):(Zt=e,I)):(Zt=e,I)):(Zt=e,I))===I&&(e=vn())),on[a]={nextPos:Zt,result:e},e)}function bn(){var e,t,n,i,r,a,o=29*Zt+11,s=on[o];if(s)return Zt=s.nextPos,s.result;if(e=Zt,(t=wn())!==I){if(n=[],i=Zt,(i=(r=Sn())!==I&&(a=wn())!==I?(en=i,r=bt(t,r,a)):(Zt=i,I))!==I)for(;i!==I;)n.push(i),i=Zt,i=(r=Sn())!==I&&(a=wn())!==I?(en=i,r=bt(t,r,a)):(Zt=i,I);else n=I;e=n!==I?(en=e,t=St(t,n)):(Zt=e,I)}else Zt=e,e=I;return e===I&&(e=wn()),on[o]={nextPos:Zt,result:e},e}function Sn(){var e,t,n,i,r,a=29*Zt+12,o=on[a];if(o)return Zt=o.nextPos,o.result;if(e=Zt,Pn()!==I){if(n=t=Zt,124===C.charCodeAt(Zt)?(i=wt,Zt++):(i=I,0===an&&fn(Ct)),(n=i!==I?C.substring(n,Zt):i)!==I){for(i=[],124===C.charCodeAt(Zt)?(r=wt,Zt++):(r=I,0===an&&fn(Ct));r!==I;)i.push(r),124===C.charCodeAt(Zt)?(r=wt,Zt++):(r=I,0===an&&fn(Ct));t=i!==I?(en=t,n=It(n)):(Zt=t,I)}else Zt=t,t=I;t===I&&(C.substr(Zt,2).toLowerCase()===kt?(t=C.substr(Zt,2),Zt+=2):(t=I,0===an&&fn(Tt))),e=t!==I&&(n=Pn())!==I?(en=e,xt()):(Zt=e,I)}else Zt=e,e=I;return on[a]={nextPos:Zt,result:e},e}function wn(){var e,t,n,i,r,a,o=29*Zt+13,s=on[o];if(s)return Zt=s.nextPos,s.result;if(e=Zt,(t=In())!==I){if(n=[],i=Zt,(i=(r=Cn())!==I&&(a=In())!==I?(en=i,r=bt(t,r,a)):(Zt=i,I))!==I)for(;i!==I;)n.push(i),i=Zt,i=(r=Cn())!==I&&(a=In())!==I?(en=i,r=bt(t,r,a)):(Zt=i,I);else n=I;e=n!==I?(en=e,t=St(t,n)):(Zt=e,I)}else Zt=e,e=I;return e===I&&(e=In()),on[o]={nextPos:Zt,result:e},e}function Cn(){var e,t,n,i,r,a=29*Zt+14,o=on[a];if(o)return Zt=o.nextPos,o.result;if(e=Zt,Pn()!==I){if(n=t=Zt,38===C.charCodeAt(Zt)?(i=Dt,Zt++):(i=I,0===an&&fn(Rt)),(n=i!==I?C.substring(n,Zt):i)!==I){for(i=[],38===C.charCodeAt(Zt)?(r=Dt,Zt++):(r=I,0===an&&fn(Rt));r!==I;)i.push(r),38===C.charCodeAt(Zt)?(r=Dt,Zt++):(r=I,0===an&&fn(Rt));t=i!==I?(en=t,n=It(n)):(Zt=t,I)}else Zt=t,t=I;t===I&&(C.substr(Zt,3).toLowerCase()===Et?(t=C.substr(Zt,3),Zt+=3):(t=I,0===an&&fn(At))),e=t!==I&&(n=Pn())!==I?(en=e,Ft()):(Zt=e,I)}else Zt=e,e=I;return on[a]={nextPos:Zt,result:e},e}function In(){var e,t,n,i,r,a,o=29*Zt+15,s=on[o];if(s)return Zt=s.nextPos,s.result;if(e=Zt,(t=Tn())!==I){if(n=[],i=Zt,(i=(r=kn())!==I&&(a=Tn())!==I?(en=i,r=bt(t,r,a)):(Zt=i,I))!==I)for(;i!==I;)n.push(i),i=Zt,i=(r=kn())!==I&&(a=Tn())!==I?(en=i,r=bt(t,r,a)):(Zt=i,I);else n=I;e=n!==I?(en=e,t=St(t,n)):(Zt=e,I)}else Zt=e,e=I;return e===I&&(e=Tn()),on[o]={nextPos:Zt,result:e},e}function kn(){var e,t,n,i,r,a,o=29*Zt+16,s=on[o];if(s)return Zt=s.nextPos,s.result;if(e=Zt,Pn()!==I){if(i=n=t=Zt,33===C.charCodeAt(Zt)?(r=Pt,Zt++):(r=I,0===an&&fn(Ot)),r===I&&(r=null),(n=(i=r!==I?(61===C.charCodeAt(Zt)?(a=Nt,Zt++):(a=I,0===an&&fn(_t)),a!==I?r=[r,a]:(Zt=i,I)):(Zt=i,I))!==I?C.substring(n,Zt):i)!==I){for(i=[],61===C.charCodeAt(Zt)?(r=Nt,Zt++):(r=I,0===an&&fn(_t));r!==I;)i.push(r),61===C.charCodeAt(Zt)?(r=Nt,Zt++):(r=I,0===an&&fn(_t));t=i!==I?(en=t,n=It(n)):(Zt=t,I)}else Zt=t,t=I;e=t!==I&&(n=Pn())!==I?(en=e,Mt(t)):(Zt=e,I)}else Zt=e,e=I;return on[o]={nextPos:Zt,result:e},e}function Tn(){var e,t,n,i,r,a,o=29*Zt+17,s=on[o];if(s)return Zt=s.nextPos,s.result;if(e=Zt,(t=Dn())!==I){if(n=[],i=Zt,(i=(r=xn())!==I&&(a=Dn())!==I?(en=i,r=bt(t,r,a)):(Zt=i,I))!==I)for(;i!==I;)n.push(i),i=Zt,i=(r=xn())!==I&&(a=Dn())!==I?(en=i,r=bt(t,r,a)):(Zt=i,I);else n=I;e=n!==I?(en=e,t=St(t,n)):(Zt=e,I)}else Zt=e,e=I;return e===I&&(e=Dn()),on[o]={nextPos:Zt,result:e},e}function xn(){var e,t,n,i,r,a=29*Zt+18,o=on[a];return o?(Zt=o.nextPos,o.result):(e=Zt,e=Pn()!==I?(n=t=Zt,Lt.test(C.charAt(Zt))?(i=C.charAt(Zt),Zt++):(i=I,0===an&&fn(Ut)),(t=(n=i!==I?(61===C.charCodeAt(Zt)?(r=Nt,Zt++):(r=I,0===an&&fn(_t)),r===I&&(r=null),r!==I?i=[i,r]:(Zt=n,I)):(Zt=n,I))!==I?C.substring(t,Zt):n)!==I&&(n=Pn())!==I?(en=e,Mt(t)):(Zt=e,I)):(Zt=e,I),on[a]={nextPos:Zt,result:e},e)}function Dn(){var e,t,n,i,r,a,o=29*Zt+19,s=on[o];if(s)return Zt=s.nextPos,s.result;if(e=Zt,(t=En())!==I){if(n=[],i=Zt,(i=(r=Rn())!==I&&(a=En())!==I?(en=i,r=bt(t,r,a)):(Zt=i,I))!==I)for(;i!==I;)n.push(i),i=Zt,i=(r=Rn())!==I&&(a=En())!==I?(en=i,r=bt(t,r,a)):(Zt=i,I);else n=I;e=n!==I?(en=e,t=St(t,n)):(Zt=e,I)}else Zt=e,e=I;return e===I&&(e=En()),on[o]={nextPos:Zt,result:e},e}function Rn(){var e,t,n,i=29*Zt+20,r=on[i];return r?(Zt=r.nextPos,r.result):(e=Zt,e=Pn()!==I?(t=Zt,jt.test(C.charAt(Zt))?(n=C.charAt(Zt),Zt++):(n=I,0===an&&fn(Bt)),(t=n!==I?C.substring(t,Zt):n)!==I&&(n=Pn())!==I?(en=e,Vt(t)):(Zt=e,I)):(Zt=e,I),on[i]={nextPos:Zt,result:e},e)}function En(){var e,t,n,i,r,a,o=29*Zt+21,s=on[o];if(s)return Zt=s.nextPos,s.result;if(e=Zt,(t=Fn())!==I){if(n=[],i=Zt,(i=(r=An())!==I&&(a=Fn())!==I?(en=i,r=bt(t,r,a)):(Zt=i,I))!==I)for(;i!==I;)n.push(i),i=Zt,i=(r=An())!==I&&(a=Fn())!==I?(en=i,r=bt(t,r,a)):(Zt=i,I);else n=I;e=n!==I?(en=e,t=St(t,n)):(Zt=e,I)}else Zt=e,e=I;return e===I&&(e=Fn()),on[o]={nextPos:Zt,result:e},e}function An(){var e,t,n,i=29*Zt+22,r=on[i];return r?(Zt=r.nextPos,r.result):(e=Zt,e=Pn()!==I?(t=Zt,zt.test(C.charAt(Zt))?(n=C.charAt(Zt),Zt++):(n=I,0===an&&fn(Gt)),(t=n!==I?C.substring(t,Zt):n)!==I&&(n=Pn())!==I?(en=e,Vt(t)):(Zt=e,I)):(Zt=e,I),on[i]={nextPos:Zt,result:e},e)}function Fn(){var e,t,n,i=29*Zt+23,r=on[i];return r?(Zt=r.nextPos,r.result):(t=e=Zt,(n=function(){var e,t,n,i=29*Zt+24,r=on[i];return r?(Zt=r.nextPos,r.result):(e=Zt,e=Pn()!==I?(t=Zt,$t.test(C.charAt(Zt))?(n=C.charAt(Zt),Zt++):(n=I,0===an&&fn(Wt)),(t=n!==I?C.substring(t,Zt):n)!==I&&(n=Pn())!==I?(en=e,Yt(t)):(Zt=e,I)):(Zt=e,I),on[i]={nextPos:Zt,result:e},e)}())!==I&&(en=t,n=Ht(n)),(e=(t=n)!==I&&(n=Fn())!==I?(en=e,t=qt(t,n)):(Zt=e,I))===I&&(e=function(){var e,t,n,i,r=29*Zt+25,a=on[r];return a?(Zt=a.nextPos,a.result):(e=Zt,40===C.charCodeAt(Zt)?(t=ct,Zt++):(t=I,0===an&&fn(ut)),(e=t!==I?Pn()!==I&&(n=hn())!==I&&Pn()!==I?(41===C.charCodeAt(Zt)?(i=gt,Zt++):(i=I,0===an&&fn(mt)),i!==I?(en=e,t=Kt(n)):(Zt=e,I)):(Zt=e,I):(Zt=e,I))===I&&(e=function(){var e,t=29*Zt+26,n=on[t];return n?(Zt=n.nextPos,n.result):((e=gn())===I&&(e=vn()),on[t]={nextPos:Zt,result:e},e)}()),on[r]={nextPos:Zt,result:e},e)}()),on[i]={nextPos:Zt,result:e},e)}function Pn(){var e,t,n=29*Zt+27,i=on[n];if(i)return Zt=i.nextPos,i.result;for(e=[],r.test(C.charAt(Zt))?(t=C.charAt(Zt),Zt++):(t=I,0===an&&fn(Xt));t!==I;)e.push(t),r.test(C.charAt(Zt))?(t=C.charAt(Zt),Zt++):(t=I,0===an&&fn(Xt));return on[n]={nextPos:Zt,result:e},e}function On(){var e,t,n,i,r=29*Zt+28,a=on[r];if(a)return Zt=a.nextPos,a.result;if(e=Zt,t=[],Jt.test(C.charAt(Zt))?(n=C.charAt(Zt),Zt++):(n=I,0===an&&fn(Qt)),n!==I)for(;n!==I;)t.push(n),Jt.test(C.charAt(Zt))?(n=C.charAt(Zt),Zt++):(n=I,0===an&&fn(Qt));else t=I;if(t!==I){for(n=[],$e.test(C.charAt(Zt))?(i=C.charAt(Zt),Zt++):(i=I,0===an&&fn(We));i!==I;)n.push(i),$e.test(C.charAt(Zt))?(i=C.charAt(Zt),Zt++):(i=I,0===an&&fn(We));e=n!==I?t=[t,n]:(Zt=e,I)}else Zt=e,e=I;return on[r]={nextPos:Zt,result:e},e}function Nn(e,t,n){this.class={major:e,minor:t},this.params=n}function _n(e,t,n){return new Nn(e,t,n)}function Mn(e,t){return _n("expression",e,t)}function Ln(e,t){return _n("literal",e,{value:t})}function Un(e,t){return _n("operator",e,{symbol:t})}if(Nn.prototype.is=function(e,t){return this.class.major===e&&this.class.minor===t},(t=i())!==I&&Zt===C.length)return t;throw t!==I&&Zt<C.length&&fn({type:"end"}),pn(rn,nn<C.length?C.charAt(nn):null,nn<C.length?dn(nn,nn+1):dn(nn,nn))}}}(this)}).call(window)},function(e,t,n){"use strict";!function(a,o){var s=a.page={_parametersByPage:{}},l=o.extend,c=a.utils,r="preventUnloadIfUnsavedChanges";function i(e){var t,n,i,r=l({},s.params,c.deparam(window.location.search));return e&&(c.isString(e)?(t=e,n=a.$C(t)):t=(n=e).id()),n&&(i=n.getPageParameters()),i||(i=s._parametersByPage[t]),i&&(r=l({},i,r)),r}function u(){var n=[],e=a.component.getByType("skuidpage"),i={};return e&&e.length&&e.forEach(function(e){var t=e.problems;t&&t.length&&t.forEach(function(e){var t;e&&(t=c.isString(e)?e:e.message),t&&!t[i]&&n.push(e)})}),n}l(s,{getAllProblems:u,getParameter:function(e,t){if("string"==typeof e){var n=i(t);return e in n?n[e]:n[e.toLowerCase()]}},getParameters:i,displayProblem:function(e){var t,n="_uniqueProblemMessages",i=this[n],r=e.message;return i||(i=this[n]={}),!(!s.problemsContainer||e.isDisplayed||i[r]||((t=o("<div>").addClass("nx-problem").appendTo(s.problemsContainer)).text(t.index()-0+1+". "+e.message),e.isDisplayed=!0,i[r]=e,0))},updateProblemsWrapper:function(){s.rebuildPageProblems({justUpdateWrapper:!0})},rebuildPageProblems:function(e){var t=u(),n=s.problemsWrapper,i=!!e&&!0===e.justUpdateWrapper;n&&(i||s.problemsContainer.empty(),t.length?(i||o.each(t,function(){this.isDisplayed=!1,s.displayProblem(this)}),n.css("display","block"),s.problemsIndicator.text(a.label.merge(a.$L("Skuid_Page_Problems"),t.length)).append(o("<div>").append(o('<div class="ui-icon ui-icon-close">')).addClass("nx-page-problems-dismiss").on("click",function(){n.hide()}))):n.css("display","none"))},getUnloadMessage:function(n){var i,e=n&&n.getModels();return o.each(e,function(e,t){if(t.hasChanged&&t[r]&&n[r])return i=a.$L("Unsaved_Changes_Warning"),!1}),i},params:c.deparam(window.location.search)})}(skuid,skuid.$)},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(m,v){var e=(m.sfdc={}).api={},n=v.extend,y=m.utils,b='Parameter "type" expected, e.g. "POST", "GET"',S='Parameter "url" expected, e.g. "/sobjects/Account", "/query/?q=select+Name+from+Account"',s="Missing object property: ",w=e.version="48.0",C="/services/data/v",I={},k={},t={StaticResource:{fields:{Name:{required:!0},Description:{required:!1},Body:{required:!0},CacheControl:{required:!0,defaultValue:"Public"},ContentType:{required:!0,defaultValue:"text/plain"}}},ApexPage:{fields:{Name:{required:!0},Markup:{required:!0},MasterLabel:{required:!0},ApiVersion:{required:!0,defaultValue:e.version}}},ApexClass:{fields:{Name:{required:!0},Body:{required:!0},ApiVersion:{required:!0,defaultValue:e.version}}}};function l(r){r||(r={});var e,t,n,i,a=r.type,o=r.url,s=r.data,l=!s&&!0===r.cache,c=r.dataSource||m.dataSource.get(m.platform.getDefaultDataSourceName()),u=function(e){if(!e)return!0;var t=e.dataSourceType;return!!t&&!!t.isDataSourceNativeSalesforce&&t.isDataSourceNativeSalesforce(e)}(c),d=u&&y.inPlatform(m.constants.VISUALFORCE),f=function(e){var t=function(e,t){return t?e:e&&e.body?y.parseAsJSONIfString(e.body):e}(e,d);return r.success&&r.success(t),t},p=function(e,t,n){if(e.responseJSON||(e.responseJSON=e.body),r.error)r.error(e,t,n);else{var i=e.responseJSON[0];window.alert("There was an error performing this "+a+" request:\n\nError code: "+i.errorCode+"\nMessage: "+i.message+"\n")}return e};if(!a)throw b;if(!o)throw S;var h=c&&c.name||"";t=a+" "+o+(h?" "+h:"");var g=u?y.getSafeRelativeUrl(C+w+o):y.combineUrls(C+w,o);return e={url:g,dataType:"json",headers:{"Content-Type":"application/json"},success:f,error:p},t in k?l?(n=k[t],(e=v.Deferred()).done(f).resolve(n),e.promise()):void delete k[t]:!s&&t in I?I[t].done(f).fail(p):(r.crossDomain&&(e.crossDomain=!0),i=d?(e.type=a,e.headers.Authorization="Bearer "+m.utils.userInfo.sessionId,s&&(e.data=JSON.stringify(s)),v.ajax(e)):(e.method=a,e.contentType="application/json",e.url=y.combineUrls(c.serviceUrl,e.url),s&&(e.body=JSON.stringify(s)),c.authenticate().then(function(){return c.makeRequest(c.createHTTPRequest(e))}).then(e.success,e.error)),s||((I[t]=i).always(function(){delete I[t]}),l&&i.done(function(e){k[t]=e})),i)}function i(e,t){this._type=e,"object"===(void 0===t?"undefined":r(t))&&n(this,t)}i.prototype={insert:function(){return function(r){r||(r={});var i=this,e=i.getFields(),a=i.getType(),o={},t=r.useToolingApi||"ApexClass"===a;return e&&v.each(e,function(e,t){var n=i[e];if(t.required&&(void 0===n||""===n)){if(!t.defaultValue)throw s+e;n=i[e]=t.defaultValue}o[e]=n}),l({type:"POST",url:"/"+(t?"tooling/":"")+"sobjects/"+a,data:o,success:function(e){e.success&&(i.Id=e.id,r.success&&r.success(e))},error:function(e,t,n){if(r.error)r.error(e,t,n);else{var i=e.responseJSON;i&&i.length&&window.alert("Unable to create new "+a+" due to error:\n\nError code: "+i[0].errorCode+"\nMessage: "+i[0].message)}}})}.apply(this,arguments)},update:function(){return function(r){r||(r={});var a=this,e=a.getFields(),o=a.getType(),n={};return e&&v.each(e,function(e){var t=a[e];void 0!==t&&(n[e]=t)}),l({type:"PATCH",url:"/"+(r.useToolingApi?"tooling/":"")+"sobjects/"+o+"/"+a.Id,data:n,success:r.success,error:function(e,t,n){if(r.error)r.error(e,t,n);else{var i=e.responseJSON;i&&i.length&&window.alert("Unable to update "+o+" with Id "+a.Id+" due to error:\n\nError code: "+i[0].errorCode+"\nMessage: "+i[0].message)}}})}.apply(this,arguments)},delete:function(){return function(e){e||(e={});var t=this.getType(),n=e.useToolingApi||"ApexClass"===t;if(!this.Id)throw s+"Id";return l({type:"DELETE",url:"/"+(n?"tooling/":"")+"sobjects/"+t+"/"+this.Id,success:e.success,error:e.error})}.apply(this,arguments)},get:function(e){return this[e]},set:function(e,t){y.isString(e)?this[e]=t:n(this,e)},getType:function(){return this._type},getFields:function(){var e=t[this.getType()];return e?e.fields:null},getField:function(e){var t=this.getFields();return t?t[e]:null}},n(e,{getCachedResult:function(e){e||(e={});var t,n=e.type,i=e.url,r=e.data,a=e.dataSource,o=a&&a.name;if(!n)throw b;if(!i)throw S;if(t=n+" "+i+(o?" "+o:""),!r&&t in k)return k[t]},makeRequest:l,query:function(e,r){return r||(r={}),l({type:"GET",url:"/"+(r.useToolingApi?"tooling/":"")+"query/?q="+encodeURIComponent(e),success:r.success,dataSource:r.dataSource,error:function(e,t,n){if(r.error)r.error(e,t,n);else{var i=e.responseJSON;i&&i.length&&window.alert("There was an error performing this query: "+i[0].message)}}})},escapeMetadataBody:function(e){return window.btoa(window.unescape(encodeURIComponent(e)))},SObject:i})}(skuid,skuid.$)},function(e,t,n){"use strict";var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};!function(C,I){var b,S=I(document.body),w=C.utils,e=C.component,k=C.constants,r=e.Component,T=C.events,t=T.Event,x="actionSequences",D=k.EVENT_SCOPES,R=k.MERGE_CONTEXTS.GLOBAL,n="contentElement",i="panelsElement",E="serverSideModelCache",a="originalTopPadding";function A(e,t,n){var i=void 0,r=void 0,a=void 0;!e||t.isInclude||t.isReplace||C.mobile||!n||(a=C.settings&&C.settings.globalFeedback?(r=C.settings.globalFeedback("position"),i=C.settings.globalFeedback("enabled"),C.settings.site("runningOnForceSite")):(r=e.globalFeedbackPosition,i=e.globalFeedbackEnabled,e.runningOnForceSite),!i||a&&!C.utils.userInfo.isAuthenticated||I(".sk-feedback").length||(t.globalFeedback=new C.globalFeedback.GlobalFeedback({position:r,pageComponent:t,element:S})))}function F(e){return e._getCPI().isUserPageAdmin()&&!e.isInclude&&!e.isReplace&&!C.mobile}function P(e){return e.has("isPageInclude")||e.set("isPageInclude",e.getElement().parent().hasClass("nx-include-panel")),e.get("isPageInclude")}b={getPageAPI:function(){return C},addProblem:function(e,t){var n=this.problems;C.utils.isString(e)&&(e={message:e}),C.page.displayProblem(e)&&n.push(e),!0!==t&&C.page.updateProblemsWrapper(),C.utils.runningTests()&&C.events.publish("pageProblem.created",e)},addProblems:function(e){var n=this;e instanceof Array?I.each(e,function(e,t){n.addProblem(t,!0)}):n.addProblem(e,!0),C.page.updateProblemsWrapper()},removeProblem:function(e){var t,n=this.problems;if(n&&n.length&&n instanceof Array)for(t=n.length-1;0<=t;t--)if(n[t]===e)return n.splice(t,1)[0]},removeProblems:function(){this.problems.length=0,C.page.updateProblemsWrapper()},unregisterChildComponents:function(){var e=this;return e.childComponents.length&&I.each(e.childComponents,function(){this.unregister()}),I.each(e.getModels(),function(){C.platform.getName()===k.VISUALFORCE&&C.utils.isUndefined(this.processOnClient)&&(e.has(E)||e.set(E,[]),e.get(E).push(this)),this.unregister()}),e.globalFeedback&&e.globalFeedback.unregister(),e.getParentPage()===e&&C.actions.runAction("closeAllPopups"),e},unregister:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=[];if(C.page.rebuildPageProblems(),e.initiatorId){var n=C.component.getById(e.initiatorId);n&&(t=n.get(x).map(function(e){return e.getId()}))}(this.get(x)||[]).forEach(function(e){t.includes(e.getId())||e.unregister()}),C.runtime.unregisterPage(this.id());var i=(this.getPageRecord()||{}).Name;return i||(i=(this.getPageParameters()||{}).page),i&&C.runtime.unregisterPage(i),r.prototype.unregister.call(this)},getPageRecord:function(){return this._pageRecord},getParameter:function(e){if("string"==typeof e){var t=C.page.getParameters(this);return e in t?t[e]:t[e.toLowerCase()]}},getPageParameters:function(){var e=this._pageParameters;return e||(e=this._pageParameters=C.page._parametersByPage[this.id()]),e},setPageParameters:function(e){var t=this._pageParameters;return t||(t=this._pageParameters=C.page._parametersByPage[this.id()]={}),I.extend(t,e),this},getContentElement:function(){return this.has(n)||this.set(n,I('<div class="nx-page-content">')),this.get(n)},getPanelsElement:function(){return this.has(i)||this.set(i,P(this)?this.getParentPage().getPanelsElement():I('<div class="nx-page-panels">')),this.get(i)},getOriginalTopPadding:function(){var e;return this.has(a)||(e=this.getContentElement(),this.set(a,C.utils.getCSSSizeObj(e.css("padding-top")||"0px"))),this.get(a)}},C.componentType.register("skuidpage",{label:"Skuid Page",onlyRenderOnce:!0,render:function(e,t,a){var n,o,i,r,s,l,c,u,d,f=C?C.page:null,p=a.preventUnloadIfUnsavedChanges="yes"===t.attr("unsavedchangeswarning"),h=t.attr("hideeditbutton"),g={},m=a._getCPI(),v=C.utils.resolve;function y(){return function(e,n,t,i){return I.when.all(I.map(i,function(e){return e._createDefaultRowIfNeeded()})).then(function(){I.each(i,function(e,t){t._cloneRowsIfNeeded(n)}),I.each(t,function(e,t){delete t.realToFakeIdMap}),C.utils._oniOS()&&C.utils._inIframe()&&I(function(){S.removeClass("sk-scrollfix-ios-body"),I("html").removeClass("sk-scrollfix-ios-html"),S.addClass("sk-scrollfix-ios-body"),I("html").addClass("sk-scrollfix-ios-html")}),"Theme4d"===C.platform.get("SFUITheme")&&S.addClass("sk-body-nopadding")})}(0,a,c,u)}return w.inPlatform(k.CORDOVA)?I("head").append('<meta id="sk-meta-viewport" name="viewport" content="initial-scale=1, width=device-width, height=device-height, viewport-fit=cover">'):"true"!==t.attr("useviewportmeta")||C.mobile||I("#sk-meta-viewport").length||I("head").append('<meta id="sk-meta-viewport" name="viewport" content="width=device-width, initial-scale=1">'),a.problems=[],I.extend(a,b),n=a.getContentElement(),o=a.getPanelsElement(),a.getModels=m.getModels,a.getModel=m.getModel,a.panel={create:function(e,t,n){var i=e.attr("uniqueid");return g[i]=a.createChildComponents(e,o,n)[0],g[i]},createFromAction:function(e,t,n){var i=e.children("panel").first(),r=i.attr("uniqueid");return g[r]=a.createChildComponents(i,o,n)[0],g[r]},getById:function(e){return g[e]},_detachById:function(e){g[e]&&delete g[e]},getAll:function(){return I.extend({},g)},closeAll:function(){I.each(g,function(){this.close()})}},function(e,t,n){!e._unsavedChangesHandler&&n&&(e._unsavedChangesHandler=!0,I(window).on("beforeunload.skuid",function(){return e.getUnloadMessage(t)}))}(f,a,p),C.utils.processStylesNode(t.children("styles"),n),function(e,t){if("true"===t||!F(e))return;var n=w.onPageBuilder(),i=e.getPageRecord(),r=i&&i.Id,a=e.getElement(),o=void 0,s=void 0;n||w.inPlatform(k.CORDOVA)||(o=I("<div>").addClass("skuidEditBtnContainer"),(s=I("<div>").addClass("skuidEditBtn").appendTo(o)).attr("id","edit-button-"+(i&&i.Name)),I("<div>").addClass("inline sk-icon sk-icon-configure").css("margin-right","4px").appendTo(s),I("<div>").addClass("skuidEditButtonLabel").text(C.$L("Edit_Page")).appendTo(s),o.css("display","block").on("mouseover",function(){o.stop().animate({width:"90px"},400)}).on("mouseleave",function(){o.stop().animate({width:"16px"},400)}).on("click",function(){window.open(C.platform.getPageComposeUrlById(r),"_blank")}).appendTo(a))}(a,h),function(e,t){if(!F(t))return;var n,i,r,a=e.getAllProblems(),o=t.getContentElement();e.problemsIndicator?n=e.problemsWrapper:(n=I("<div>").addClass("nx-page-problems-wrapper clearfix"),i=I("<div>").addClass("nx-page-problems-indicator nx-error").css({display:"inline-block","text-align":"left",padding:"7px"}).click(function(){r.toggle()}),r=I('<div class="nx-page-problems-container">').css({display:"none","white-space":"wrap"}),I.extend(e,{problemsIndicator:i,problemsWrapper:n,problemsContainer:r}),n.append(i,r),o.prepend(n)),a.length?I.each(a,function(){e.displayProblem(this)}):n.css("display","none")}(f,a),a.set(x,C.actionSequences.initializeActionSequences(a)),(r=t.children("models").children()).length&&r.each(function(){var e={_parentPageId:a.id()};a.isReplace&&(e.processOnClient=!0),new C.model.Model(I(this),e).register()}),a._pageRecord&&(!C.page.modstamp||C.page.modstamp<a._pageRecord.LastModifiedDate)&&(C.page.modstamp=a._pageRecord.LastModifiedDate),a.has(E)&&(l=a.get(E),I.each(l,function(){this.register()}),a.unset(E)),i=[],c=a.getModels(),u=[],d=[],I.each(c,function(e,t){t.initialize({createDefaultRowIfNeeded:!1,cloneRowsIfNeeded:!1,pageComponent:a}),!t.processOnClient||!t.doQuery&&t.hasMetadataLoaded()?(t.errors&&t.errors.length&&a.addProblems(t.errors),u.push(t)):(t.loadAsync?d:i).push(t)}),I.holdReady(!0),C.offline.populateMetadata().then(function(){return s=(i.length?C.model.load(i,null,{pageComponent:a}):v()).then(y,y).then(function(){return!0===C.webfonts.haveFontsLoaded()?v():T.subscribeOnce("ui.fontsloaded")}).then(function(){return function(e,t,n){var i,r,a,o,s,l,c=t._pageRecord?t._pageRecord.Name:"",u=C.region.get("__header"+c,t.id()),d=C.region.get("__footer"+c,t.id()),f=n.children("components").first().children(),p=n.children("interactions").first(),h=t.getElement(),g=t.getContentElement(),m=t.getPanelsElement(),v=n.attr("title");function y(e){l="mousedown"===e.type,t.set("usingMouse",l,{renderOnChange:!1})}function b(e){!l&&e.target&&e.target.classList&&e.target.classList.add("sk-focus-keyboard")}function S(e){e.target&&e.target.classList&&e.target.classList.remove("sk-focus-keyboard")}function w(e,t){h[0].addEventListener(e,t)}C.utils.inPlatform([k.NATIVE,k.VISUALFORCE])&&v&&!t.isInclude&&(document.title=C.utils.mergeAsText(R,v)),!0!==t.get("loading.stopped")?((t.isReplace||t.isInclude)&&t.previousPageComponent&&t.previousPageComponent.unrender().unregister({initiatorId:t.getId(),removeElement:!1}),i={_parentPageId:t.id()},s=t.context,u&&t.createChildComponents(u.xmlDefinition.children("components").first().children(),g,s,i),t.createChildComponents(f,g,s,i),d&&t.createChildComponents(d.xmlDefinition.children("components").first().children(),g,s,i),e.updateProblemsWrapper(),g.css("display","block"),h.css("display","block"),C.events.publish("ui.resize"),h.find(".nx-field > :input:visible:not(.hasDatepicker)").first().focus(),a=I('a.zen-trigger[title="Publisher Type Overflow Menu"]'),o=a.next(),a.click(function(){o.toggle()}),o.click(function(){o.hide()}),p.length&&C.interactions.enableInteractions(g,{interactionsDef:p,component:t}),P(t)?h.append(g):h.append(g,m),l=!0,w("keydown",y),w("mousedown",y),w("focusin",b),w("focusout",S),t.isInclude||!C.platform.checkSessionExpiration||t.get("checking.session")||!C.utils.userInfo.isAuthenticated||"Login"===t.getPageRecord().Id||C.offline.networkDown()||(t.set("checking.session",!0),C.utils.addSessionWarningCheck(C.utils.userInfo.sessionExpireTime,C.utils.userInfo.sessionAbsoluteExpireTime,t)),A(e,t,"false"!==n.attr("globalfeedbackenabled")),r={page:t,component:t},t.publish("page.rendered",r,{qualifyEventName:!1,scope:D.SKUID}),t.publish("ui.reflow",r,{buffer:10,qualifyEventName:!1,scope:D.SKUID}),I.holdReady(!1),t.element.trigger("pageload")):I.holdReady(!1)}(f,a,t)}),I.each(d,function(){this.load(null,{pageComponent:a})}),a.subscribeOnce("stop.loading",function(){a.set("loading.stopped",!0),s.reject&&s.reject()}),s.promise()})},cpi:{$M:function(e){var t=this._getCPI().getModels(e);if(t.length)return t[0]},getModel:function(e){return this._getCPI().$M(e)},getModels:function(e){var t=this.getId();return e?[C.model.getModel(w.getFullyQualifiedId(e,t))]:C.model.list(t)},$C:function(e){return this.getChildComponent(e)},getComponent:function(e){return this._getCPI().$C(e)},createPopup:function(e){if(e.isInk)return C.utils.createPopupFromPopupXML(e,e.context)},isUserPageAdmin:function(){return C.page&&C.page.editable&&!C.page.runningOnForceSite}}}),T.register([new t("page.rendered","Skuid Page: Rendered")]),w.runningTests()&&o(C.page,{setupGlobalFeedbackButton:A})}(skuid,skuid.$)},function(e,t,n){"use strict";!function(v){var n=v.$.extend,e=v.dataSource||(v.dataSource={}),i={},y=v.$,b=v.utils,t=function(e){if(!1!==e){n(this,e);var t=this.name;if(!t)throw"Data Source Type name is required.";i.hasOwnProperty(t)||(i[t]=this)}};function r(e){return i[e||v.platform.getDefaultDataSourceTypeName()]}function a(){return n({},i)}n(t.prototype,{prop:function(e){return this.properties?v.utils.getObjectProperty(this.properties,e):null},getActions:function(){return v.$.Deferred().resolve({})},runAction:function(t,r,a,o,s){var l=v.$;return o=o||{},s.getActions(s).then(function(e){var n={};v.utils.isFunction(e)&&(e=e(s)),l.isArray(e)?l.each(e,function(e,t){t.disabled||(n[t.name]=t)}):n=e;var i=n[t];return i?o.rows&&!o.row?l.when.all(l.map(o.rows,function(e){var t=l.extend({},o);return t.row=e,i.runtimeExecution(r,a,t,s)})):i.runtimeExecution(r,a,o,s):v.utils.reject("Invalid Data Source Action.")})},getNameFieldURLForReferenceField:function(e,t,n,i){var r,a=e.options.fieldXML,o={model:e.model,row:e.row},s=e.model.getDataSourceType(),l=a&&a.attr("redirecttype")||i,c=b.inPlatform(v.constants.NATIVE),u={},d="page"===l&&a.attr("page"),f="route"===l&&a.attr("route"),p="customurl"===l&&a.attr("window")||"self",h="customurl"===l&&a.attr("rooturl"),g='<a href="',m=!1;if("none"!==l&&l){if("datasourcedefault"===l&&s.getNameFieldURLForReferenceField&&s.getNameFieldURLForReferenceField!==this.getNameFieldURLForReferenceField)return s.getNameFieldURLForReferenceField(e,t,n,i);if("datasourcedefault"!==l)return y.each(a.children("params").children(),function(e,t){var n=y(t);u[n.attr("key")]=b.mergeAsTextInContext(n.attr("value"),o,{createFields:!1,registerFields:!1})}),c&&(d||f)&&(g+='#" onclick="skuid.loader.load('+b.encodeHTML(JSON.stringify({isReplace:!0,pageName:d,parameters:u,routeName:f}))+")",m=!0),"customurl"===l&&(r=b.mergeAsTextInContext(b.applyURLParametersToURL(h,u),o),"self"===p?g+=r:"blank"===p&&(g+=b.encodeHTML(r)+'" target="_blank'),m=!0),m?g+='" tabindex="-1">'+n+"</a>":void 0}},getNameFieldURLForTextField:function(e,t,n){return this.getNameFieldURLForReferenceField(e,n,t,"datasourcedefault")},getDefaultFieldsForReferenceField:function(e,t,n){if(!!(n&&n.dataSourceType&&n.dataSourceType.getNameField))return[v.utils.getFieldReference(e,t,n)]},modelsCanSearch:function(){return!1!==this.prop("canFieldsBeIndividuallySearched")||this.prop("hasDefaultSearch")&&this.prop("canServerSearch")},getValidFieldFunctionsForField:function(){return[]},getDisplayTypeForFieldFunction:function(t,e){var n=this.getValidFieldFunctionsForField(e);if(n.length){var i=n.find(function(e){return e.value===t});return i&&i.dt}},getFieldFunctionProperty:function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},r=e.state,a=v.builder.core,o=i.isCondition,s=this.getValidFieldFunctionsForField(n,i);if(s.length){var l=s.find(function(e){return e.defaultValue})||s[0];return{id:o?"fieldfunction":"function",type:"picklist",label:"Function",helptext:"The function to use",defaultValue:l.value,picklistEntries:s,onChange:function(n){if(!o){var i=void 0;y.each(s,function(e,t){if(t.value==n)return i=t.abbrev,!1}),void 0!==i&&r.attr("name",a.getDefaultAliasName(r.attr("id"),i))}o&&r.attr("value",""),e.save().refresh().rebuildProps(t)}}}},supportsVoiceCommands:function(){for(var e=["voiceCommands","voiceCommands.methods","voiceCommands.methods.beginConversation","voiceCommands.methods.conversationKillSwitch","voiceCommands.props","voiceCommands.props.page","voiceCommands.props.actionSequence","voiceCommands.props.actionSequence.topLevelProps","voiceCommands.props.actionSequence.shouldHaveInputs"],t=0;t<e.length;t++)if(!v.utils.getObjectProperty(this,e[t]))return!1;return!0},getPageParametersForVoiceCommands:function(n){var e=v.utils.getObjectProperty(this,"voiceCommands.props.page");if(!e)return{};var t=e(),i={};return y.each(t,function(e,t){i[t.id]=n.attr(t.id)}),i},clientSideCacheIsEnabled:function(){return!1},dataSourceProvidesLanguageDetails:function(){return!1}}),n(e,{DataSourceType:t,getAllTypes:a,getAllDataSourceTypes:a,listAllTypes:function(){return y.map(i,function(e){return e}).sort(function(e,t){var n=e.label?e.label:e.name,i=t.label?t.label:t.name;return n.localeCompare(i)})},mapTypes:a,mapDataSourceTypes:a,getType:r,getDataSourceType:r,libraries:{skuid:{}},skipMetadataWhenQueryingFields:function(){return!1}})}(skuid)},function(e,t,n){"use strict";var B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w=i(n(235)),V=i(n(8)),C=i(n(0));function i(e){return e&&e.__esModule?e:{default:e}}!function(R){var e=R.dataSource||(R.dataSource={}),a={},E=R.utils,p=R.data,A=R.$,F=A.extend,P=R.constants,O=P.MIME_TYPES.FORM_URL_ENCODED,i=P.SALESFORCE,N=E.isString,_=E.mergeAsTextInContext,h=E.contains,g=E.isUndefined,M=E.startsWith,m="skuidDataSourceMetadata",r="actionsMetadata",L={},n="skuidOAuth",U=t("$Auth",["BasicAuth","Client_Id","Client_Secret","Password","Username"]),v=t("$User",["Email","FederationId","FirstName","Id","LastName","Username"]),o={firstname:"firstName",lastname:"lastName",userid:"userId",username:"userName"};function t(t,e){var n={};return e.forEach(function(e){n[e]="{{"+t+"."+e+"}}"}),n}function j(e,t){var n=e.authentication,i=e.name,r=n.authMethod;return r?E.startsWith(r,"oauth")?i+(t?"::"+t:""):"apex"===r?i:void 0:n.url}function s(e){return a[e||R.platform.getDefaultDataSourceName()]}function l(){return F({},a)}function c(){var i=0<arguments.length&&void 0!==arguments[0]&&arguments[0],r={};return A.map(a,function(e){var t=e.getDataSourceTypeName(),n=r[t];n||(n=r[t]=i?[]:{}),i?n.push(e):n[e.name]=e}),r}function u(){return A.map(a,function(e){return e}).sort(function(e,t){var n=e.label||e.name,i=t.label||t.name;return n.localeCompare(i)})}function d(){return JSON.parse(p.localStorage.getItem(n)||"{}")}function f(e){F(this,e)}function y(e){F(this,e)}function b(e){var t=e.name,n=e.dataSourceTypeName;F(this,e),this.customConfig&&(this._c=this.customConfig,delete this.customConfig),this.dataSourceType=R.dataSource.getType(n||R.platform.getDefaultDataSourceTypeName()),this.entityMetadataCache={},this._cache={},this._hasBatchCaches={},this.dataSourceType&&this.dataSourceType.initializeDataSource&&this.dataSourceType.initializeDataSource(this),a.hasOwnProperty(t)||(a[t]=this)}function S(e){return e&&0!==e.length?1<e.length?e:1===e.length?e[0]:void 0:null}b.prototype={save:function(e){var t=R.offline,n=this.dataSourceType.prop("neverCache");return t.isEnabled()&&t.networkDown()&&!n?t.save(e,{dataSource:this}):this.dataSourceType.save(e,{dataSource:this})},load:function(a,o){o=o||{};var s=this,t=R.offline,l=R.storage,n=s.dataSourceType.prop("neverCache");return t.isEnabled()&&t.networkDown()&&!n?t.load(a,F({},o,{dataSource:s})):s.dataSourceType.load(a,F({},o,{dataSource:s})).then(function(e){return!t.isEnabled()||n?e:A.when.all(A.map(e,function(t){var n=a.filter(function(e){return e.id===t.id})[0];if(!n||!1!==n.doQuery){var i=A.extend({},t);n&&!i.fields&&(i.fields=n.fields),n&&!i.conditions&&(i.conditions=n.conditions);try{i=JSON.parse(JSON.stringify(i))}catch(e){i.data=n?n.getRawRows():A.map(i.data,function(e,t){delete t.__skuid_record__})}var r=function(e){return{dataSource:s,objectName:i.objectName||n&&n.objectName,data:e,conditions:i.conditions}};return o.addOnly?l.getDb(C.default.id).getTable("entityData").get({objectName:i.objectName||n&&n.objectName,dataSource:s,conditions:i.conditions,data:i}).then(function(e){if(void 0===e)return l.getDb(C.default.id).getTable("entityData").add(null,r(i));var t=e.data,n=(t=void 0===t?{}:t).data;return n&&E.mergeArrays(n,i.data),l.getDb(C.default.id).getTable("entityData").add(null,r(e.data))}):l.getDb(C.default.id).getTable("entityData").add(null,r(i))}})).then(function(){return e})})},getRowId:function(e,t){var n;try{n=this.dataSourceType.getRowId(e,t,this)}catch(e){}return(g(n)||null===n)&&(n=E.generateUniqueId()),n},getIdField:function(e){var t=this.getIdFields(e);return t&&t.length?t[0]:null},getIdFields:function(e){var t=this.dataSourceType;if(t){if(t.getIdFields)return t.getIdFields(e,this);if(t.getIdField){var n=t.getIdField(e,this);if(n)return[n]}}return[]},getIdFieldForChildRelationship:function(e,t){var n=this.dataSourceType;return n&&n.getIdFieldForChildRelationship?n.getIdFieldForChildRelationship(e,t):null},getKeyPrefix:function(e,t){var n=this.dataSourceType.getKeyPrefix;return n&&n(e,t,this)||e+"__"+this.name},getValueKeyPrefix:function(e,t,n){var i=this.dataSourceType.getValueKeyPrefix;return i&&i(e,t,n,this)||t+"__"+this.name},getRowName:function(e,t){return this.dataSourceType.getRowName(e,t,this)},getNameField:function(e,t){return this.dataSourceType.getNameField(e,this,t)},getNameFields:function(e,t){return this.dataSourceType.getNameFields?this.dataSourceType.getNameFields(e,this,t):[this.getNameField(e,t)]},getConditionSourceProperties:function(e,t){var n=this.dataSourceType.getConditionSourceProperties;return n&&n(e,t)},getDataSourceType:function(){return this.dataSourceType},getDataSourceTypeName:function(){return this.dataSourceType&&this.dataSourceType.name},getEntityList:function(){return this.dataSourceType.getEntityList({dataSource:this})},search:function(e,t,n){var i=this;return e.dataSource||(e.dataSource=this),i.authenticate().then(function(){return i.dataSourceType.search(e,t,n)})},searchableEntities:function(){return this.dataSourceType.searchableEntities()},getFieldFunctionProperty:function(e,t,n,i){return this.dataSourceType.getFieldFunctionProperty(e,t,n,i)},getDisplayTypeForFieldFunction:function(e,t){return this.dataSourceType.getDisplayTypeForFieldFunction(e,t)},getValidFieldFunctionsForField:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this.dataSourceType.getValidFieldFunctionsForField(e,t)},getFieldRenderers:function(){return!!this.dataSourceType.fieldRenderers&&this.dataSourceType.fieldRenderers()},getReferenceFieldRelationshipName:function(e,t){var n=this.dataSourceType.getReferenceFieldRelationshipName;if(n)return n(e,t)},getActions:function(e,t){var n=this,i=n._cacheService().getCachedValue(r);return i?(E.isFunction(i)&&(i=i(n,e,t)),A.Deferred().resolve(i).promise()):n.dataSourceType.getActions(n,e,t).then(function(e){return n._cacheService().setCachedValue(r,e),e})},_cacheService:function(){var r=this,a="inMemoryOnly",i="sessionStorage",o="localStorage";function s(e){var t=r._cache[e];return t||(t=r._cache[e]={})}function l(e,t,n){var i=s(n=n||a);E.setObjectProperty(i,e,t)}function c(e,t){e=e||o;var n=r._cache[e];return n||(n=r._cache[e]=function(e){return u(e)[r.name]}(e)||{}),t?E.getObjectProperty(n,t):n}function u(e){return e!==i&&(e=o),JSON.parse(p[e].getItem(m)||"{}")}function d(e,t){e!==i&&(e=o);var n=u(e);n[r.name]=t,p[e].setItem(m,JSON.stringify(n))}function f(e,t){var n=function(e){var t=s(a);return E.getObjectProperty(t,e)}(e);return g(n)&&(n=c(t,e)),n}return{setPersistentCachedValue:function(e,t,n){l(e,t,n);var i=c(n);return E.setObjectProperty(i,e,t),d(n,i),r},setPersistentCachedValues:function(e,n){var i=c(n);return A.each(e,function(e,t){l(e,t,n),i[e]=t}),d(n,i),r},setCachedValue:function(e,t){return l(e,t),r},setCachedValues:function(e){return A.each(e,function(e,t){l(e,t)}),r},batchCacheValue:function(e,t,n){r._hasBatchCaches[n||o]=!0,l(e,t,n||o)},persistBatchedCaches:function(e){e=e||o,r._hasBatchCaches[e]&&(function(e){d(e,c(e))}(e),r._hasBatchCaches[e]=!1)},getCachedValue:f,getCachedValues:function(e,t){var n={};return e.forEach(function(e){n[e]=f(e,t)}),n}}},batchCacheProperty:function(e,t,n){return this._cacheService().batchCacheValue(e,t,n)},persistBatchCache:function(e){return this._cacheService().persistBatchedCaches(e)},getCacheProperty:function(e,t){return this._cacheService().getCachedValue(e,t)},getCacheProperties:function(e,t){return this._cacheService().getCachedValues(e,t)},setCacheProperty:function(e,t){return this._cacheService().setCachedValue(e,t),this},setCacheProperties:function(e){return this._cacheService().setCachedValues(e),this},setPersistentCacheProperty:function(e,t,n){return this._cacheService().setPersistentCachedValue(e,t,n),this},setPersistentCacheProperties:function(e,t){return this._cacheService().setPersistentCachedValues(e,t),this},clearPropertiesCache:function(){var n=this.name;return this._cache={},["localStorage","sessionStorage"].forEach(function(e){var t=p[e].getItem(m);t&&(t=JSON.parse(t))[n]&&(delete t[n],p[e].setItem(m,JSON.stringify(t)))}),this},unregister:function(){return function(e){e!==R.platform.getDefaultDataSourceName()&&delete a[e]}(this.name),this},runAction:function(e,t,n,i){return this.dataSourceType.runAction(e,t,n,i,this)},getConfigProperty:function(e){return E.getObjectProperty(this._c||{},e)},getUploadMethod:function(e){var t=this.getUploadMethods(),n=t&&t[e];return n?(n.dataSource=this,new f(n)):null},getUploadMethods:function(){var e=this.getDataSourceType();return e.getUploadMethods?e.getUploadMethods(this):{}},getImageSources:function(){var e=this.getDataSourceType(),t=e.getImageSources?e.getImageSources(this):{},n={label:"URL",optionalRecordContext:!0,getSrc:function(e){var t=A.Deferred(),n=e.context,i=e.mergeSettings,r=e.prefix||"",a=e.url||(e.definition?e.definition[r+"url"]:e.xmlDef.attr(r+"url")),o=E.getSafeRelativeUrl(E.mergeAsTextInContext(a,n,i));return E.inPlatform(P.CORDOVA)&&o&&-1===o.indexOf("://")&&(o=R.native.instanceUrl+o),o?t.resolve(o):t.reject(),t.promise()},builderProps:function(e,t,n){var i=n.additionalOnRefresh;return[{id:(n.prefix||"")+"url",label:"Image URL",type:"template",location:"attribute",onChange:function(){e.refresh(),i&&i()}}]}};return t.url=n,t||{}},getImageSource:function(e){this.name===i&&"external"===e&&(e="url");var t=this.getImageSources(),n=t&&t[e];return n?(n.dataSource=this,new y(n)):null},buildEntityMetadataRequest:function(e){var t=this.dataSourceType.buildEntityMetadataRequest(e);return t.dataSource=this,t},getEntityMetadataLoadingMessageFromBreadcrumb:function(e){return this.dataSourceType.getEntityMetadataLoadingMessageFromBreadcrumb(e)},prefillMetadataForObject:function(e,t){var n=this.dataSourceType.prefillMetadataForObject;n&&n({object:e,data:t,dataSource:this}),this.cacheEntityMetadata(this.getEntityMetadataCacheKey(e),t)},populateBreadcrumbFromEntityMetadata:function(e){var t=this.getDataSourceType().populateBreadcrumbFromEntityMetadata;return t?(e.dataSource=this,t(e)):e.crumb},getModels:function(){var t=this;return R.model.list().filter(function(e){return e.getDataSource()===t})},getEntityMetadataCacheKey:function(e){return E.isString(e)?e:this.dataSourceType.getEntityMetadataCacheKey?(e.dataSource||(e.dataSource=this),this.dataSourceType.getEntityMetadataCacheKey(e)):void 0},reloadModels:function(t){var e=this,n=e._reloadModelsRequest,i=function(){delete e._reloadModelsRequest};return n||(e._reloadModelsRequest=E.delay(10).then(function(){return A.when.all(e.getModels().filter(function(e){return!e.hasChanged&&(!t||t(e))}).map(function(e){return e.updateData()}))}).then(i,i))},cacheEntityMetadata:function(e,t){var n=this,i=R.storage,r=E.onPageBuilder();if(1===arguments.length&&E.size(e))return A.map(e,function(e,t){return n.cacheEntityMetadata(t,e)});var a=n.entityMetadataCache,o=a[e];if(o?o.update(t):o=a[e]=new w.default(t),!r&&(function(){var e=R.offline;if(e.isEnabled()&&!e.networkDown())return!0}()||n.dataSourceType.clientSideCacheIsEnabled&&n.dataSourceType.clientSideCacheIsEnabled(n))){var s=n.dataSourceType.getMetadataCacheVersion?n.dataSourceType.getMetadataCacheVersion(n):0,l=n.buildCacheStamp(s);i.getDb(C.default.id).getTable("entityMetadata").add(null,{dataSource:n,objectName:e,data:o._unwrap(),cacheStamp:l})}return o},getCachedEntityMetadata:function(e){var t,n=this,i=n.entityMetadataCache;return e?(t=e.entities?e.entities:E.isString(e)?[{objectName:e}]:[e],A.isArray(t)||(t=[t]),S(A.map(t,function(e){return i[n.getEntityMetadataCacheKey(e)]}))):i},clearEntityMetadataCache:function(){return this.entityMetadataCache={},this},buildCacheStamp:function(e){var t={addedAt:Date.now(),cacheVersion:e},n=this.dataSourceType.dataSourceProvidesLanguageDetails();return n&&(t.userLang=n),t},processEntityMetadataRequests:function(e){var t,n,i=e.entities,r=e.results,a=this.getDataSourceType().processEntityMetadataRequest;if(a){for(n=[],t=0;t<i.length;t++){var o=r[t];o?n.push(a({entity:i[t],result:o})):n.push(null)}return n}return r},getEntityMetadata:function(e){var n,t,i=this,r=A.Deferred(),a=e.entities,o=e.ignoreCache||!1,s=[],l=[],c=function(){r.resolve(S(l))};return a&&(A.isArray(a)||(a=[a]),A.each(a,function(e,t){try{t.dataSource=i}catch(e){}n=null,o||(n=i.getCachedEntityMetadata(t)),n&&"function"==typeof n.isFullMetadata&&n.isFullMetadata()?l.push(n):s.push(t)})),s.length?(t={entities:s,dataSource:i,ignoreCache:o},i.dataSourceType.getEntityMetadata(t).then(function(e){l=A.map(i.processEntityMetadataRequests({entities:s,results:e}),function(e,t){return i.cacheEntityMetadata(i.getEntityMetadataCacheKey(s[t]),e).setIsFullMetadata()}),c()},function(e){r.reject(e)})):c(),r.promise()},createHTTPRequest:function(e){e||(e={});var t,n,i=this.authentication,r=F({},this.requestHeaders,e.headers),a={},o=F({model:e.model,row:e.row},e.apiExtensions,e.context),s=this.requestBodyParameters,l=e.url,c=h(l,"?"),u=e.contentType,d=e.body,f=F({},this.requestUrlParameters||{},e.parameters||{});return i&&i.success&&(o.$Auth=A.extend({},U,{Response:{Body:i.responseBody,Headers:i.responseHeaders}}),o.$User=A.extend({},v)),A.each(f,function(e,t){e&&t&&(c?l+="&":(l+="?",c=!0),l+=e+"="+encodeURIComponent(_(t,o,{createFields:!1})))}),l=_(l,o,{createFields:!1}),A.each(r,function(e,t){var n=t&&N(t)?_(t,o,{createFields:!1}):t;a[e]=n}),(s&&E.size(s)||d&&E.size(d))&&(u&&h(u,"json")&&A.isPlainObject(d)?(n={},s&&F(n,s),d&&F(n,d)):n=d),t={url:l,headers:a,method:e.method,modelDataSource:this.name,originalRequest:e},n&&(t.contentType=u,t.body=n),t.method||(t.method=n?"POST":"GET"),e.accept&&(t.accept=e.accept),i&&i.success&&(t.isAuthenticated=!0),t},makeRequest:function(l,n){var c=this,u=c.name,r=l.hasOwnProperty("useProxy")?l.useProxy:c.useProxy,i=R.ajax[r?"proxy":"direct"],a=c.authentication,o=l.originalRequest;function s(e){var t=e||c.createHTTPRequest(o);return i.call(c,t,n)}function d(e){var t=401===e.statusCode||403===e.statusCode,n=a&&"basicauth"===a.method,i=t&&!n;return function(e){return!r&&0===e.statusCode&&"error"===e.status}(e)||!function(e){if(M(e,"Invalid Request: Unauthorized endpoint")){var t=c.authentication&&c.authentication.url,n="To make this request, a System Administrator for this Organization will need to configure a Remote Site Setting for this Data Source in Salesforce Setup.",i=!R.page.runningOnForceSite&&R.utils.userInfo.isAuthenticated,r=c.serviceUrl||"",a="SkuidDS_"+c.name.replace(/[\W]+/g,"");if(t&&l.url===E.mergeAsTextInContext(t)&&(r=l.url,a=a.replace("SkuidDS_","SkuidDSAuth_")),i){if(window.confirm(n+"\n\nWould you like to do that now?\n")){var o=window.location.href+"",s=o.substring(o.indexOf("/",o.indexOf("//")+2),o.length);E.redirect({url:"/0rp/e?"+E.param({setupid:"SecurityRemoteProxy",IsActive:1,saveURL:s,cancelURL:s,EndpointUrl:r,SiteName:40<a.length?a.substring(0,40):a,DescriptionField:'Needed to make requests to Skuid Model Data Source "'+u+'"'})})}}else window.alert(n+"\n\nPlease add a Remote Site Setting for the following URL:\n\n"+r);return!0}return!1}(e.error)&&i}return s(l).catch(function(e){var t=void 0;if(!d(e))throw e;if(a.success?(c.invalidateAuthentication(),t=c.authenticate()):c.getPendingAuthenticationRequest()&&(t=c.getPendingAuthenticationRequest()),!t)throw e;return t.then(function(){return s()}).catch(function(e){if(!d(e))throw e;return c.logout().authenticate().then(function(){return s()}).catch(function(e){throw R.platform.isPlatformSessionError(e.message,c)&&R.platform.attemptLogin(),e})})})},processModelXMLExtensions:function(e,t){var n=this.getDataSourceType(),i=e.extensions={};A.each(t.attr(),function(e,t){if(!M(e,"x-"))return!0;i[e.slice(2)]=t}),t.children().each(function(e,t){var n=t.nodeName;if(!M(n,"x-"))return!0;n=n.slice(2),(i[n]||(i[n]=[])).push(function i(e){var r={};return A.each(e.attr(),function(e,t){r[e]=t}),e.children().each(function(e,t){var n=t.nodeName;(r[n]||(r[n]=[])).push(i(A(t)))}),r}(A(t)))}),n&&n.processModelXMLExtensions&&n.processModelXMLExtensions(e,t)},getPendingAuthenticationRequest:function(){return L[j(this)]},isAuthenticated:function(){var e=this.authentication;return!e||e.success},getStoredAuthData:function(e){return E.getObjectProperty(d(),this.name+(e?"."+e:""))},setStoredAuthData:function(e){var t=d();return E.setObjectProperty(t,this.name,e),p.localStorage.setItem(n,JSON.stringify(t)),t},removeStoredAuthData:function(){var e=d(),t=e[this.name];return delete e[this.name],p.localStorage.setItem(n,JSON.stringify(e)),t},authenticate:function(){var u=this,d=u.name,e=u.getDataSourceType(),f=u.authentication,i=A.Deferred(),p=u.useProxy,t=f&&f.hasOwnProperty("useProxy")?f.useProxy:p,n=void 0,r=void 0,a=void 0,o=void 0,s=void 0,l=void 0,c=void 0,h=void 0,g=void 0,m=void 0,v=void 0,y=void 0,b=void 0,S=void 0,w=void 0;function C(n,i){n&&E.size(n)&&A.each(n,function(e,t){N(t)?n[e]=_(t,i):"object"===(void 0===t?"undefined":B(t))&&C(t,i)})}function I(e){var t,n=[];return N(e)?t=e:e&&e.error?N(e.error)?t=e.error:e.error&&e.error.message&&(t=e.error.message):e&&e.body&&(N(e.body.error)&&n.push(e.body.error),N(e.body.message)&&n.push(e.body.message),N(e.body.description)&&n.push(e.body.description),t=n.join(": ")),i.reject(t||"Authentication Failed"),i.promise()}function k(){var t;return!e.getUserInfo||f&&f.responseBody&&f.responseBody.userInfo?i.resolve(f):e.getUserInfo(u).then(function(e){e&&((t=f.responseBody)||(t=f.responseBody={}),t.userInfo=e,u.setStoredAuthData(t)),u.getModels().forEach(function(e){e.updateDataSourceUserInfoConditions()}),i.resolve(f)}).catch(function(e){!e||403!==e.statusCode&&401!==e.statusCode?i.reject(e):(u.invalidateAuthentication(),u.authenticate().then(function(e){i.resolve(e)}).catch(function(){u.logout(),u.authenticate().then(function(e){i.resolve(e)}).catch(function(e){i.reject(e)})}))}),i.promise()}function T(){var e=f.providerType,t={force:!1},n=R.oauth(d),i=n?n.getAuthResponse():null,r=(f.defaultScopes||"").split(","),a={},o={id:f.clientId,name:d,type:e},s={},l={};if(i&&i.error&&u.logout(),A.each(r,function(e,t){t&&!a[t]&&(a[t]=1)}),E.size(a)&&(t.scope=Object.keys(a).join(",")),p||(f.grantType="implicit"),"implicit"!==f.grantType&&"client_credentials"!==f.grantType&&(t.response_type="code"),n.isSessionValid()||(i&&i.grantType&&i.responseBody&&(i=i.responseBody,u.setStoredAuthData(i.responseBody)),function(e){return e&&e.refresh_token}(i)&&(t.display="none")),h=j(u,t.scope||""),g=L[h])return g.done(k).fail(I);f.url&&(s.auth=f.url),f.tokenUrl&&(s.grant=f.tokenUrl),"code"===t.response_type&&(s.response_type="code"),E.size(s)&&(o.oauth=s),l[d]=F(!0,{},R.oauth.services[e]||{},o);var c=function(e){return R.platform.getOAuthRedirectUri(e)}(f);R.oauth.init(l,{redirect_uri:c}),b=R.oauth.login(d,t).then(function(e){f.responseBody=e.authResponse,f.success=!0,k(),delete L[h]},function(e){f.success=!1,I(e),delete L[h]}),L[h]=b}if(f)if(r=f.method,y=f.authMethod,c=f.verb||"POST",n=f.url,w=f.username,v=f.password,n&&M(n,"/")&&u.serviceUrl&&(n=E.combineUrls(u.serviceUrl,n)),f.success)k();else if("separateurl"===r){if(n&&(n=R.utils.mergeAsTextInContext(n)),o={url:n,headers:f.requestHeaders,method:c,modelDataSource:u.name,useProxy:t},a=f.requestBody,h=j(u),g=L[h])return g;s=o.headers,t?(C(s,{$Auth:U}),C(a,{$Auth:U})):(C(s,m={$Auth:A.extend({},U,{Username:w,Password:v})}),C(a,m)),a&&(o.contentType=f.requestBodyContentType||O,o.body=o.contentType===O?E.param(a):JSON.stringify(a)),b=u.makeRequest(o,{buffer:!1}),(L[h]=b).always(function(){delete L[h]}).done(function(e){f.responseHeaders=e.headers,f.responseBody=E.parseAsJSONIfString(e.body),f.success=!0,k()}).fail(function(e){f.success=!1,I(e)})}else if("basicauth"!==r||p){if("skuidjwtbearer"===r)return l=f.responseBody,u.requestHeaders||(u.requestHeaders={}),u.requestHeaders.Authorization="Bearer {{$Auth.Response.Body}}",u.requestHeaders["x-skuid-public-key-endpoint"]=R.platform.getPublicKeyEndpoint(),E.inPlatform([P.VISUALFORCE,P.LIGHTNING])&&(u.requestHeaders["x-skuid-session-id"]=R.utils.userInfo.sessionId),l&&V.default.isValid(l)?(f.success=!0,k()):V.default.getAPIToken().then(function(e){return f.responseBody=e.jwt,f.success=!0,k()}).catch(function(e){return f.responseBody=null,f.success=!1,I({error:"Unable to obtain valid Skuid JWT: "+(N(e)?e:e.message)})});if("provider"===r){var x=0===y.indexOf("oauth"),D=f.grantType;if(x&&(S=u.getStoredAuthData())&&S.access_token){if(!(S.expires&&S.expires<(new Date).getTime()/1e3))return f.responseBody=S,f.success=!0,k();u.removeOAuthAccessToken()}if(x&&["client_credentials","jwt-bearer","password","saml2-bearer"].includes(D)){if(o={url:f.tokenUrl,headers:f.requestHeaders,method:"POST",modelDataSource:d},a=f.requestBody,h=j(u),g=L[h])return g;a&&(o.contentType=f.requestBodyContentType||O,o.body=o.contentType===O?E.param(a):JSON.stringify(a)),b=R.ajax.proxy(o,{buffer:!1}),(L[h]=b).always(function(){delete L[h]}).done(function(e){f.success=!0,f.responseHeaders=e.headers;var t=E.parseAsJSONIfString(e.body);!t.expires&&t.expires_in&&(t.expires=Math.floor((new Date).getTime()/1e3+(0|t.expires_in||31536e3))),f.responseBody=t,u.setStoredAuthData(t),k()}).fail(function(e){f.success=!1,I(e)})}else if(x)R.oauth?T():E.loadJS(R.platform.getResourceUrl({ns:"skuid",path:"js/models/oAuthClient.js"})).done(function(){T()});else if("apex"===y){if(o={headers:f.requestHeaders,body:f.providerName,method:"GET",modelDataSource:u.name},h=j(u),g=L[h])return g;b=R.ajax.proxy(o,{buffer:!1}).done(function(e){f.responseHeaders=e.headers,f.responseBody=E.parseAsJSONIfString(e.body),f.success=!0,k()}).fail(function(e){f.success=!1,I(e)}).always(function(){delete L[h]}),L[h]=b.promise()}else f.success=!0,k()}else E.isString(f)||(f.success=!0),k()}else{if(w&&v)return u.requestHeaders.Authorization="Basic "+btoa(w+":"+v),f.success=!0,k();if(!w)return f.success=!1,u.removeStoredAuthData(),I({error:"No Username provided."});if(!v)return f.success=!1,u.removeStoredAuthData(),I({error:"No Password provided."})}else k();return i.promise()},getUserInfo:function(){var e,t=this.authentication,n=t&&t.responseBody;if(t&&(n||(n=t.responseBody=this.getStoredAuthData()),n&&(e=n.userInfo)))return e},getUserInfoProperty:function(e){var t=o[e]||e,n=this.getUserInfo();if(n&&t in n)return n[t]},removeOAuthAccessToken:function(){var t,e=["access_token","expires","expires_in"],n=this.getStoredAuthData();return(t=this.authentication.responseBody)&&e.forEach(function(e){delete t[e]}),n&&this.setStoredAuthData(this.authentication.responseBody),this},invalidateAuthentication:function(){var e,t=this.authentication,n=this.getStoredAuthData();function i(t){t&&A.isPlainObject(t)&&Object.keys(t).forEach(function(e){"refresh_token"!==e&&delete t[e]})}return t&&(e=t.authMethod&&M(t.authMethod,"oauth"),t.success=!1,delete t.responseHeaders,e?(i(t.responseBody),n&&i(n)):delete t.responseBody,n&&this.setStoredAuthData(t.responseBody)),this},logout:function(){var e=this.authentication,t=this.name;if(e&&(e.success=!1,delete e.responseHeaders,delete e.responseBody,e.authMethod&&M(e.authMethod,"oauth")&&!["saml2-bearer","jwt-bearer"].includes(e.grantType))){var n=R.oauth&&R.oauth(t);n&&n.logout&&n.logout({name:t,options:{force:!0}})}return this.removeStoredAuthData(),this}},F(e,{DataSource:b,EntityMetadata:w.default,get:s,getDataSource:s,getDataSourceFromXML:function(e,t){var n,i,r=A.extend({useDefault:!0,nodeIdentifierAttribute:"id",allowNullReturn:!1},t);return e&&(n=r.customAttributeName?e.attr(r.customAttributeName):e.attr("datasource")||e.attr("service")),!n&&r.useDefault&&(n=R.platform.getDefaultDataSourceName()),void 0!==(i=n&&s(n))||r.allowNullReturn?i:(R.component.getByType("skuidpage")[0].addProblem(R.label.merge({template:R.$L("Invalid_Data_Source"),data:[e.attr("datasource")||e.attr("service"),e.attr(r.nodeIdentifierAttribute)]})),s())},list:u,listByType:function(){return c(!0)},listDataSources:u,map:l,mapByType:function(){return c()},mapDataSources:l})}(skuid)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o="fields",i="childRelationships",s=skuid.$,a=skuid.utils;function r(e){this._m=s.extend(!0,{},e),this._isFull=!1}r.prototype={update:function(n){var i=this,a=this._m;a||(a=this._m={}),delete this._fm,s.each(n,function(e,t){if(!n.hasOwnProperty(e))return!0;if(a.hasOwnProperty(e))if(e===o){var r=i.getFieldsMap({noCache:!0,onlyIdKey:!0});s.each(t,function(e,t){var n=t.id,i=r[n];i?s.each(t,function(e,t){null!=t&&(i[e]=t)}):r[n]=t}),a[o]=function(e){return s.map(e,function(e){return e})}(r)}else a[e]=t;else a[e]=t})},get:function(e){var n=this._m;if("string"==typeof e)return n[e];if(e instanceof Array){var i={};return s.each(e,function(e,t){i[t]=n[t]}),i}},getLabel:function(){return this._m.label},getLabelPlural:function(){return this._m.labelPlural},getPluralLabel:function(){return this.getLabelPlural()},getEntityName:function(){return this._m.objectName},getObjectName:function(){return this._m.objectName},getFieldsList:function(){return this._m[o]||[]},getSortedFieldsList:function(){var r=a.capitalizeFirst;return this.getFieldsList().slice().sort(function(e,t){var n=r(e.label||e.id)||"",i=r(t.label||t.id)||"";return n<i?-1:i<n?1:0})},getFieldsMap:function(e){var t=e&&e.noCache,n=e&&e.onlyIdKey,i=this.getFieldsList(),r=n?"id":["id","name"];return t?a.keyBy(i,r):(this._fm||(this._fm=a.keyBy(i,r)),this._fm)},getField:function(e){return this.getFieldsMap()[e]},getChildRelationshipsList:function(){return this._m[i]||[]},getExtensions:function(e){var t=this._m.extensions||{};return e?a.getObjectProperty(t,e):t},_getCRMap:function(){return this._crm||(this._crm=a.keyBy(this._m[i],"relationshipName")),this._crm},getChildRelationship:function(e){return this._getCRMap()[e]},_unwrap:function(){return this._m},setIsFullMetadata:function(){return this._isFull=!0,this},isFullMetadata:function(){return this._isFull}},t.default=r},function(e,t,n){"use strict";var i,r=n(0),K=(i=r)&&i.__esModule?i:{default:i};!function(f){var e,p,h=f.$,g=h(document.body),m=f.utils,t=window.applicationCache,v=f.$L,y=f.constants,r=f.data.localStorage,b=f.offline={},S=".sk-offline-content",c="There are no saves to sync.",u="Syncing cancelled",w=h('<div class="sk-offline-sync">'+v("Saving_Offline_Changes","Saving your offline changes...")+"</div>"),i=m.grab,n=function(){return f.storage.getDb(K.default.id)instanceof f.storage.IndexedDB},a=f.settings,o=f.events,s=o.Event,l={scope:y.EVENT_SCOPES.GLOBAL,onlyGlobal:!0},C=o.subscribe,I=o.publish,d=b.networkDown=function(){return"disconnected"===b.state},k=b.isEnabled=function(){return!E&&a.offline&&!0===a.offline("enabled")&&f.platform.hasFeature("Offline")},T=function(){b.setState("disconnected"),f.events.publish("network.disconnected"),b.reconnect.reset(),r.setItem("skuidStayOffline",!0)},x=function(l,c){c=c||f.component.getByType("skuidpage")[0];var u="OfflineSavesFor__";return f.snippet.register("offline.saveFailedSyncs",function(){return f.storage.getDb(K.default.id).getTable("saves").all().then(function(e){var t=f.model.map(),n=h.map(t,function(e){if(-1<e.id.indexOf(u))return e}),i=q(e);return h.map(n,function(e){var t=e.getDataSourceName(),n=i[t];h.map(n.operations,function(i){e.objectName===i.type&&h.map(e.changes,function(e,t){var n=!1;m.size(e)||(n=!0),i.updates[t]&&(n?delete i.updates[t]:i.updates[t]=h.extend(i.updates[t],e)),i.inserts[t]&&(n?delete i.inserts[t]:i.inserts[t]=h.extend(i.inserts[t],e)),i.deletes[t]&&n&&delete i.deletes[t]})})}),f.storage.getDb(K.default.id).getTable("saves").clear().then(function(){return h.when.all(h.map(i,function(e,t){return f.storage.getDb(K.default.id).getTable("saves").add(t,{data:e})}))}).then(function(){h.map(n,function(e){e.changes={},e.originals={},e.hasChanged=!1,e.notifyEditorsOfDataRefresh()})})})}),f.storage.getDb(K.default.id).getTable("saves").all().then(function(e){if(e.length){var s=[],r=[],t=h("<div>").attr("title","Pending Offline Saves"),i=h("<div>").css("min-height","300px").appendTo(t);h.map(e,function(e){var o=e.id;h.map(e.data.operations,function(e){var n=f.$M(e.id),i=new f.model.Model({id:u+e.id,fields:n?n.fields:h.map(e.returning,function(e){return{id:e}}),updateable:!0,deleteable:!0,objectName:e.type,label:e.id,labelPlural:e.id,extensions:e.extensions,dataSource:f.dataSource.get(o)}).initialize().register();if(s.push(i),e.inserts){var t=h.map(e.inserts,function(e,t){return e[i.getIdField()]=t,e});i.adoptRows(t,{doAppend:!0})}var r=void 0;m.size(e.updates)&&(n?(r=h.map(e.updates,function(e,t){return n.getRowById(t)}),i.adoptRows(r,{doAppend:!0}),h.map(e.updates,function(e,t){var n=i.getRowById(t);i.updateRow(n,e),i.changes[t]=e})):(r=h.map(e.updates,function(e,t){return e.id=t,e}),i.adoptRows(r,{doAppend:!0})));var a=void 0;m.size(e.deletes)&&n&&(a=h.map(e.deletes,function(e,t){return n.getRowById(t)}),i.adoptRows(a,{doAppend:!0}),i.deleteRows(a)),m.size(e.insertResultErrors)&&h.map(e.insertResultErrors,function(t){h.map(t.errors,function(e){console.error(e.message+" -- in row with id ("+t.id+") in model ("+t.source+")")})}),m.size(e.updateResultErrors)&&h.map(e.updateResultErrors,function(t){h.map(t.errors,function(e){console.error(e.message+" -- in row with id ("+t.id+") in model ("+t.source+")")})}),m.size(e.deleteResultErrors)&&h.map(e.deleteResultErrors,function(t){h.map(t.errors,function(e){console.error(e.message+" -- in row with id ("+t.id+") in model ("+t.source+")")})})})});var a="";h.map(s,function(e){var t,n=h.map(e.fields,function(e){return m.isObject(e)&&(e=e.id),'<field id="'+e+'" allowordering="false"/>'}).join(""),i='\n<skootable model="'+e.id+'" pagesize="50" mode="readwrite" searchbox="false" showexportbuttons="true" showsavecancel="false" createrecords="false">\n\t<fields>'+n+'</fields>\n\t<rowactions>\n\t\t<action type="edit"/>\n\t\t<action type="delete"/>\n\t</rowactions>\n</skootable>\n';a+='<condition type="fieldvalue" enclosevalueinquotes="false" fieldmodel="'+e.id+'" sourcetype="modelproperty" nosourcerowbehavior="deactivate" sourceproperty="hasChanged" value="true" operator="="/>',t=f.component.factory({xmlDefinition:i}),r.push(t)});var n='\n<buttonset>\n\t<buttons>\n\t\t<button type="multi" label="Save" uniqueid="sk-3T9i-399">\n\t\t\t<actions>\n\t\t\t\t<action type="custom" snippet="offline.saveFailedSyncs"/>\n\t\t\t</actions>\n\t\t\t<renderconditions logictype="and"/>\n\t\t\t<enableconditions logictype="or">\n\t\t\t\t'+a+"\n\t\t\t</enableconditions>\n\t\t</button>\n\t\t"+(l?"":'\n\t\t\t<button type="multi" label="Re-Attempt Sync">\n\t\t\t\t<actions>\n\t\t\t\t\t<action type="closeTopmostPopup"/>\n\t\t\t\t\t<action type="offline-syncing"/>\n\t\t\t\t</actions>\n\t\t\t</button>\n\t\t')+"\n\t</buttons>\n</buttonset>\n",o=f.component.factory({xmlDefinition:n});i.append(o.element),h.map(r,function(e){var t=e.element.model,n=f.component.factory({xmlDefinition:'\n<pagetitle model="'+t.id+'">\n\t<maintitle>{{Model.label}}</maintitle>\n\t<actions/>\n</pagetitle>\n'});i.append(n.element),i.append(e.element)}),t.dialog({close:function(){t.dialog("close").remove(),h.map(r,function(e){e.unregister&&e.unregister()}),h.map(s,function(e){e.unregister()})},modal:!0,resizable:!0,width:"90%"}),f.events.publish("popup.created",{popupElement:t,component:c})}})},D=b.getSetting=function(e){return a.offline&&a.offline(e)},R=function(){return!D("syncAutomatically")&&D("syncDefaultStatusBarEnabled")},E=!1,A=f.dataSource.EntityMetadata,F="network.connected",P="network.connected.marked",O="network.disconnected",N="network.disconnected.stay",_="network.disconnected.confirmed",M="network.sync.started",L="network.conflicts",U="network.cancel.conflicts",j="network.send.conflicts",B="network.sync.success",V="network.sync.failure",z=b.reconnect={reset:function(){z.state&&"inactive"!==z.state&&clearInterval(e),z.state="inactive",z.remaining=10},timer:function(){if("connecting"!==z.state)return z.remaining-=1,0===z.remaining?z.checkNow():void 0},checkNow:function(){if("waiting"===z.state)return z.state="connecting",b.check()}};function G(e){return m.delay(m.runningTests()?1:e)}b.setState=function(e){b.state=e},b.getState=function(){return b.state},b.setState("connected");var H=!(b.shouldStayOffline=function(){return"true"===r.getItem("skuidStayOffline")});function q(e){var n={};return h.each(e,function(e,t){n[t.id]=t.data}),n}function $(){I(M,{syncElement:w})}function W(e){I("network.sync.complete"),w.text(v("send"===e?"Saved":"Cancelled")),G(2e3).then(function(){w.animate({opacity:"0"},{duration:500,complete:function(){w.css({bottom:"-35px",opacity:"1"}),w.detach()}})})}function Y(e){if(e!==c)return e===u?(I("network.sync.cancelled",{syncElement:w,message:e}),G(2e3).then(function(){w.animate({opacity:"0"},{duration:500,complete:function(){w.detach()}})})):void(e!==c&&(f.model.Model.prototype.addPageProblems([e]),w.text("Failed..."),I(V,{syncElement:w,error:e}),G(2e3).then(function(){w.animate({opacity:"0"},{duration:500,complete:function(){w.detach()}})})));w.detach()}b.init=function(){if(!b.initiated&&!m.inPlatform([y.LIGHTNING])){b.initiated=!0;var t,e=f.ui.createIcon("sk-icon-refresh",{ariaLabel:"Retry Connection"}),n=v("Currently_Offline")+'<span tabindex=0 class="sk-offline-retry">'+e+"</span>",i=v("Reconnecting"),r=function(e){return e.preventDefault(),t.html(i),b.shouldStayOffline()?b.check():z.checkNow()},a=function(e){if(13===e.which)return p.find(".sk-offline-retry").click(),!1},o=function(e){e=e||{},(t=p.find(S)).html(n),d&&g.prepend(p),p.removeClass("sk-offline-connected").addClass("sk-offline-disconnected"),p.find(".sk-offline-retry").on("click",r),p.find(".sk-offline-retry").on("keypress",a),e.noFadeIn?(p.css("top",0),g.find(".sk-headerwrapper-fixed").css("top","20px"),g.css("padding-top","20px")):(p.animate({top:"0"},500),g.find(".sk-headerwrapper-fixed").animate({top:"20px"},500),g.animate({"padding-top":"20px"},500))},s=function(e){var i=0;return e.length&&h.each(e,function(e,t){var n=t.data.operations;h.each(n,function(e,t){h.each(t.updates,function(){i++}),h.each(t.inserts,function(){i++}),h.each(t.deletes,function(){i++})})}),i},l=function(){if(R())return f.storage.getDb(K.default.id).getTable("saves").all().then(function(e){if(e&&e.length){var t=s(e);c(t)}})},c=function(e){b.setState("disconnected"),p.css("display","inline-block"),(t=p.find(S)).html("You have "+e+' unsaved change(s) across your pages. <span class="sk-offline-retry">Begin Syncing Process</span>'),g.css("padding-top","20px"),g.find(".sk-headerwrapper-fixed").css("top","20px"),p.css("top",0),d&&g.prepend(p),t.find(".sk-offline-retry").on("click",function(e){e.preventDefault(),g.css("padding-top","0"),g.find(".sk-headerwrapper-fixed").css("top",0),p.detach(),d=!0,w.text(v("Saving_Offline_Changes")),u=!1,b.check().then(function(){return u=!0,b.sync({action:!0})})}),m.runningTests()&&I("showSyncsWaitingToBeSavedBar")},u=!0,d=!0;(p=g.find(".sk-offline")).length||(p=h('<div role="alert" class="sk-offline"><div class="sk-offline-content">'+n+"</div></div>")),p.addClass("sk-offline-"+f.offline.state),C(F,function(){if(u)return(t=p.find(S)).html(i),G(500).then(function(){return p.removeClass("sk-offline-disconnected").addClass("sk-offline-connected"),t.html(v("Connected")),I(P),G(1e3)}).then(function(){(R()?f.storage.getDb(K.default.id).getTable("saves").all().then(function(e){return s(e)}):h.when(!1)).then(function(e){if(e)return I(N,{savesToShow:e});g.animate({"padding-top":"0"},400),g.find(".sk-headerwrapper-fixed").animate({top:0},400),p.animate({top:"-20px"},{duration:400,complete:function(){p.detach(),d=!0}})})})}),b.shouldStayOffline()&&T(),"disconnected"===b.state?o({noFadeIn:!0}):l(),C(O,o),C(_,function(){(t=p.find(S)).html()===i&&G(500).then(function(){t.html(n),p.find(".sk-offline-retry").on("click",r),p.find(".sk-offline-retry").on("keypress",a)})}),C(N,function(e){return H=!0,e.savesToShow?c(e.savesToShow):l()})}},b.check=function(e){if(!b.shouldCheck)return m.resolve();var t=function(){"connected"!==b.state&&(b.setState("connected"),I(F),m.inPlatform([f.constants.LIGHTNING])&&I(P))};return e?f.platform.services.checkNetwork().then(t):f.platform.services.checkNetwork().then(t).catch(function(){I(_),H=!1,b.setState("disconnected"),I(O)})},b.initiateServiceWorker=function(){return m.grab(window,"navigator","serviceWorker","register")&&m.inPlatform(y.NATIVE)&&b.isEnabled()&&!m.runningTests()?(navigator.serviceWorker.addEventListener("message",function(e){"refresh"===e.data.command&&window.location.reload()}),navigator.serviceWorker.register("/sw.js").then(function(){if(!navigator.serviceWorker.controller)return navigator.serviceWorker.ready.then(function(){window.location.reload()})}).catch(function(e){console.log(e)})):h.when()},b.startEverything=function(){return b.init(),b.isEnabled()?f.offline.check():h.when()},t&&(t.addEventListener("updateready",function(){if(t.status==t.UPDATEREADY)try{t.swapCache(),confirm("A new version of this site is available. Load it?")&&window.location.reload()}catch(e){}}),t.addEventListener("obsolete",function(){window.location.reload()})),C(O,function(){z.reset(),z.state="waiting",e=setInterval(z.timer,1e3)}),C(_,function(){"connecting"===z.state&&(z.state="waiting",z.remaining=10)}),C(F,function(){b.state="connected",e&&clearInterval(e),z.reset()}),b.shouldCheck=!0,b.disable=function(e){E=e},b.load=function(a,t){if(t=t||{},!n())return m.resolve();var o=[];return h.when.all(h.map(a,function(e){return f.storage.getDb(K.default.id).getTable("entityData").get({objectName:e.objectName,dataSource:t.dataSource,conditions:e.conditions,data:{fields:e.fields,orderByClause:e.orderByClause,conditionLogic:e.conditionLogic}})})).then(function(e){return h.when(b.populateDataSourceMetadata(),b.populateMetadata()).then(function(){return e})}).then(function(e){var i=[],r=[];return h.each(e,function(e,t){var n;t&&m.size(t.data)?(n=h.extend({},t.data,{cachedData:!0,dataSourceName:t.dataSource}),i.push(n)):(n=a.filter(function(e){return f.storage.getDb(K.default.id).getTable("entityData").schema.buildIdField({objectName:e.objectName,dataSource:e.dataSource,conditions:e.conditions,data:{fields:e.fields,orderByClause:e.orderByClause,conditionLogic:e.conditionLogic}})===t.id})[0])&&r.push(n),n&&o.push(n)}),b.populateSaves(i)}).then(function(){return o})},b.save=function(e,t){var i=h.Deferred(),r=t.dataSource.name,n=e.operations,a={deleteResults:[],updateResults:[],insertResults:[],globalErrors:[]},o=function(e,t){a[e].push(h.extend({errors:[],messages:[],success:!0},t))};return h.each(n,function(e,t){t.originals||(t.originals={}),h.each(t.updates,function(e){t.originals[e]=f.$M(t.id).originals[e]})}),f.storage.getDb(K.default.id).getTable("saves").get(r).then(function(n){return n?(h.each(e.operations,function(e,r){var t=n.data.operations,a=t.find(function(e){return e.id===r.id});a?(h.each(r.deletes,function(e,t){var n=a.inserts[e];delete a.updates[e],delete a.originals[e],n?delete a.inserts[e]:a.deletes[e]=t}),h.each(r.updates,function(e,t){var n=a.updates[e],i=a.inserts[e];i?(h.extend(i,t),delete r.originals[e]):n?h.extend(n,t):a.updates[e]=t}),h.each(r.inserts,function(e,t){a.inserts[e]=t}),h.each(r.originals,function(e,t){var n=a.originals[e];n?h.extend(n,t):a.originals[e]=t})):t.push(r)}),f.storage.getDb(K.default.id).getTable("saves").add(r,{data:n.data}).then(function(){I("offline.saved"),i.resolve()})):f.storage.getDb(K.default.id).getTable("saves").add(r,{data:e}).then(function(){I("offline.saved"),i.resolve()}),h.each(e.operations,function(e,t){var n=t.id;h.each(t.deletes,function(e){o("deleteResults",{id:e,record:null,source:n})}),h.each(t.updates,function(e,t){o("updateResults",{id:e,record:JSON.stringify(t),source:n})}),h.each(t.inserts,function(e,t){o("insertResults",{id:e,oldId:e,record:JSON.stringify(t),source:n})})}),H&&I(N),a})},b.getValidMetadataCache=function(e){return b.networkDown()?e:h.grep(e,function(e){var t=f.dataSource.get(e.dataSource),n=t?t._metadataCacheVersion:0;return function(e,t,n){return!(!i(e,"cacheStamp","cacheVersion")||e.cacheStamp.cacheVersion!==n||e.cacheStamp.userLang&&m.userInfo.language!==e.cacheStamp.userLang||0===t||null===t||e.cacheStamp.addedAt<t)}(e,n,t&&n&&i(t,"dataSourceType","getMetadataCacheVersion")?t.dataSourceType.getMetadataCacheVersion():0)})},b.populateMetadata=function(){if(!n()||b.populatedMetadata||m.onPageBuilder())return m.resolve();var l={};return f.storage.getDb(K.default.id).getTable("entityMetadata").all().then(function(e){if(e){var t=f.dataSource.map();e=(e=b.getValidMetadataCache(e)).sort(function(e,t){return e=new Date(e.createdAt),(t=new Date(t.createdAt))<e?-1:e<t?1:0}),h.each(e,function(e,t){var n=t.data,i=n.fields,r=t.id.split("--"),a=r[0],o=r[1],s=l[a];s?s&&!s[o]?l[a][o]=n:h.each(i,function(e,t){s[o].fields.filter(function(e){return t.id===e.id}).length||l[a][o].fields.push(t)}):(l[a]={},l[a][o]=n)}),h.each(t,function(e,n){var r=n.entityMetadataCache,a=l[e];m.size(r)?m.size(r)&&m.size(a)&&h.each(r,function(e,t){var n=t._unwrap();if(a[e]){var i=a[e].fields;h.each(i,function(e,t){(n.fields&&n.fields.filter(function(e){return t.id===e.id})).length||n.fields.push(t)}),r[e]=new A(n)}}):h.each(a,function(e,t){n.entityMetadataCache[e]=new A(t)})}),b.populatedMetadata=!0}})},b.populateDataSourceMetadata=function(){return!n()||b.populatedDataSourceMetadata?m.resolve():f.storage.getDb(K.default.id).getTable("dataSourceMetadata").all().then(function(i){var e=f.dataSource.map();h.each(e,function(t,e){var n=i.filter(function(e){return e.id===t})[0];n&&(e.metadata=n.data)}),b.populatedDataSourceMetadata=!0})},b.populateSaves=function(e){var t=[];return h.each(e,function(e,r){var n=h.Deferred();t.push(n.promise()),f.storage.getDb(K.default.id).getTable("saves").get(r.dataSourceName).then(function(e){if(!e)return n.resolve(r);var t=e.data.operations.filter(function(e){return e.type===r.objectName})[0];if(t){var i=f.$M(t.id);if(!i)return n.resolve(r);h.each(t.deletes,function(t){var e=r.data.findIndex(function(e){return i.getRowId(e)===t});-1<e&&r.data.splice(e,1)}),h.each(t.updates,function(t,e){var n=r.data&&r.data.find(function(e){return i.getRowId(e)===t});n&&h.extend(n,e)}),h.each(t.inserts,function(e,t){var n=r.data;t[i.getIdField&&i.getIdField()]=e,n.unshift(t)})}n.resolve(r)})}),h.when.all(t)},b.sync=function(t){t=t||{};var n,i,e=!1!==D("syncAutomatically"),r=!0===D("syncInteractionRequired"),a={},s={},o=[],l=t.action;return E||!l&&!e?h.when():(t.reAttempt?f.storage.getDb(K.default.id).getTable("syncedSaves").get(t.reAttempt).then(function(e){return h.map(e.data,function(e){return e})}):f.storage.getDb(K.default.id).getTable("saves").all()).then(function(e){return e&&e.length?t.reAttempt?e:f.storage.getDb(K.default.id).getTable("syncedSaves").add((new Date).toString(),{data:e}).then(function(){return e}):m.reject(c)}).then(function(e){return s=q(e),g.append(w),r?function(){var n=h.Deferred();return w.text("Begin syncing changes made offline?"),w.append('<a href="#" class="sk-offline-send">'+v("Start")+'</a><a href="#" class="sk-offline-cancel">'+v("Cancel")+"</a>"),w.find("a").on("click",function(e){var t=e.target.classList;w.remove("a"),t.contains("sk-offline-send")?(w.text(v("Saving_Offline_Changes")),n.resolve()):t.contains("sk-offline-cancel")&&(w.text("Cancelled..."),n.reject(u))}),w.animate({bottom:"30px"},{duration:500}),$(),n.promise()}():function(){var e=h.Deferred();return w.text(v("Saving_Offline_Changes")),w.animate({bottom:"30px",opacity:"1"},{duration:500,complete:function(){e.resolve()}}),$(),e.promise()}()}).then(function(){return f.loader.service.loadDataSourcesAndDependencies(h.map(s,function(e,t){return t}))}).then(function(){var o=[];return h.each(s,function(e,t){var r=f.dataSource.get(e),a=r.dataSourceType;h.each(t.operations,function(e,t){if(t.updates&&Object.keys(t.updates).length){var n=a.prop("offline.createConditionsForConflicts"),i=new f.model.Model({dataSource:r,id:m.generateUniqueId({prefix:"sk-offline"}),conditions:m.isFunction(n)?n(t):[],label:t.type,objectName:t.type,fields:h.map(t.returning,function(e){return{id:e}}),extensions:t.extensions});a.coerceConflictModel&&a.coerceConflictModel(i,t),i.initialize(),o.push(i)}})}),(o.length?f.model.load(o):h.when()).then(function(){return o}).catch(function(){return o})}).then(function(e){return a=function(e,s){var l={};return h.each(e,function(e,t){var i=f.dataSource.get(e).name,n=t.operations,r={};h.each(n,function(e,a){if(m.size(a.originals)){var t=s.find(function(e){return i===e.getDataSourceName()&&a.type===e.objectName}),n=t&&t.objectName,o=r[n];if(!t)return;h.each(a.originals,function(n,i){var r=t.getRowById(n);h.each(i,function(e,t){r[e]!==t&&r[e]!==a.updates[n][e]&&(o||(o={}),o[n]={},o[n].update=a.updates[n],o[n].original=i)})}),m.size(o)&&(l[i]||(l[i]={}),l[i][n]=o)}})}),l}(s,n=e),m.size(a)?function(e){var n,i=h.Deferred();return w.addClass("sk-offline-conflicts").text("Conflicts detected. Your changes may not be the most recent."),w.append('<a href="#" class="sk-offline-send">'+v("Save_Anyway")+'</a><a href="#" class="sk-offline-cancel">'+v("Cancel")+"</a>"),w.find("a").on("click",function(e){var t=e.target;t.classList.contains("sk-offline-send")?(n="send",w.text(v("Saving_Offline_Changes","Saving your offline changes..."))):t.classList.contains("sk-offline-cancel")&&(n="cancel",w.text("Canceling...")),w.remove("a"),w.removeClass("sk-offline-conflicts"),i.resolve(n)}),I(L,{syncElement:w,conflicts:e}),i.promise()}(a):h.when("send")}).then(function(e){return"cancel"===(i=e)?function(e,r){var a=f.model.list();h.each(e,function(i,e){h.each(e,function(t,n){var o=r.find(function(e){return e.objectName===t&&i===e.getDataSourceName()}),e=a.filter(function(e){return e.objectName===t&&i===e.getDataSourceName()});h.each(e,function(e,r){var a=!1;h.each(n,function(e){var t=o.getRowById(e);if(t){var n=o.getRecordForRow(t).get(),i=r.getRowById(o.getRowId(t));a=!0,r.updateRow(i,n,{notify:!0,notifyFields:!1,preventTrackChanges:!0})}}),a&&r.notifyEditorsOfDataRefresh()})})}),I(U,{syncElement:w,conflicts:e})}(a,n):"send"===i?function(e,n,r){var a=h.extend({},e),t=h.map(e,function(e,t){var n=f.dataSource.get(t);return e.fromOfflineStorage=!0,n.save(e).then(function(e){return e.dataSourceName=t,e})});return h.when.all(t).then(function(e){var t=e;if(h.map(t,function(e){var n=[],i=e.dataSourceName;h.map(e.insertResults,function(t){t.success?h.map(a[i].operations,function(e){t.source===e.id&&delete e.inserts[t.oldId]}):(h.map(t.errors,function(e){r.push(e.message)}),-1===h.inArray(t.source,n)&&n.push(t.source),h.map(a[i].operations,function(e){e.insertResultErrors=e.insertResultErrors||{},t.source===e.id&&(e.insertResultErrors[t.oldId]=t)}))}),h.map(e.updateResults,function(t){t.success?h.map(a[i].operations,function(e){t.source===e.id&&(delete e.updates[t.id],delete e.originals[t.id])}):(h.map(t.errors,function(e){r.push(e.message)}),-1===h.inArray(t.source,n)&&n.push(t.source),h.map(a[i].operations,function(e){e.updateResultErrors=e.updateResultErrors||{},t.source===e.id&&(e.updateResultErrors[t.id]=t)}))}),h.map(e.deleteResults,function(t){t.success&&h.map(a[i].operations,function(e){t.source===e.id&&delete e.deletes[t.id]})}),n.length?a[i].operations=h.map(a[i].operations,function(e){if(-1<h.inArray(e.id,n))return e}):delete a[i]}),m.size(a))return a;m.size(n)&&I(j,{syncElement:w,results:t,conflicts:n}),I(B,{syncElement:w,results:t})})}(s,a,o):h.when()}).then(function(e){return t.reAttempt?W(i):e?f.storage.getDb(K.default.id).getTable("saves").clear().then(function(){return h.when.all(h.map(e,function(e,t){return f.storage.getDb(K.default.id).getTable("saves").add(t,{data:e})})).then(function(){var n,i=h.Deferred();return w.addClass("sk-offline-conflicts").text("Errors occurred while syncing.. Resolve now?"),w.append('<a href="#" class="sk-offline-send">Resolve</a><a href="#" class="sk-offline-cancel">'+v("Cancel")+"</a>"),w.find("a").on("click",function(e){var t=e.target;t.classList.contains("sk-offline-send")?(n="resolve",w.text(v("Saving_Offline_Changes","Saving your offline changes..."))):t.classList.contains("sk-offline-cancel")&&(n="cancel",w.text("Canceling... Resync to resolve at a later time.")),w.remove("a"),w.removeClass("sk-offline-conflicts"),i.resolve(n)}),I(V,{syncElement:w,saveRequests:e}),i.promise()}).then(function(e){return"resolve"===e?(w.detach(),w.css({bottom:"-35px"}),x()):W()})}):(f.storage.getDb(K.default.id).getTable("saves").clear(),W(i))}).catch(Y)},b.addActions=function(){return a.offline&&a.offline("enabled")?[{value:"-",label:"",disabled:!0},{value:"-",label:"Offline mode actions",disabled:!0},{value:"offline-syncing",label:function(){return"Sync Changes Made Offline"}},{value:"go-online",label:function(){return"Enable Online Mode"}},{value:"go-offline",label:function(){return"Disable Online Mode"}},{value:"show-pending-syncs",label:function(){return"Show Pending Offline Saves"}}]:[]},b.runAction=function(e,t,n,i){switch(e){case"offline-syncing":return D("syncDefaultStatusBarEnabled")&&k()&&d()?b.check(!0).then(function(){return b.sync({action:!0,context:i})}).catch(function(){return m.resolve()}):k()&&!d()?b.sync({action:!0,context:i}):m.resolve();case"go-online":return r.removeItem("skuidStayOffline"),b.check().then(function(){if("connected"!==b.getState())throw"Still disconnected";f.offline.setState("connected"),f.events.publish("network.connected"),f.offline.reconnect.reset()});case"go-offline":return T();case"show-pending-syncs":return x(t,n)}},o.register([new s(F,"Network: Connected",[],l),new s(O,"Network: Disconnected",[],l),new s(M,"Offline Syncing: Started",[],l),new s(L,"Offline Syncing: Conflicts Detected",[],l),new s(U,"Offline Syncing: Cancelled with Conflicts",[],l),new s(j,"Offline Syncing: Approved with Conflicts",[],l),new s(B,"Offline Syncing: Successful",[],l),new s(V,"Offline Syncing: Failed",[],l)]),C(F,function(){var e=b.sync;return f.platform.forceSessionActivity?f.platform.forceSessionActivity().then(e,function(){f.platform.attemptLogin(0,!1,e)}):e()}),h(window).off("offline.skuid").on("offline.skuid",function(){b.check()})}(skuid)},function(e,t,n){"use strict";!function(a){var o=a.$,u=a.utils,e=u.getInvokable,s=e(o,"Deferred"),d=e(o,"each"),l=e(o,"map"),c=u.mergeAsTextInContext,f=u.getObjectProperty,p=u.setObjectProperty,h=u.parseAsJSONIfString,g="x-metadata",n=function(e){var n={},t=i(e);return d(t,function(e,t){t.synonym&&(n[t.synonym]=t)}),n},i=function(e){return e.fieldsMap||(e.fieldsMap=u.keyBy(e.fields,"id")),e.fieldsMap},r=/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i;function m(e,t){if(e&&e.length)for(var n=0;n<e.length;n++)if(!r.test(e[n]))return a.component.getByType("skuidpage")[0].addProblem('Found invalid "'+t+'" address: '+e[n]),!1;return!0}var v=a.dataSource.utils={convertRequestObjToKey:function(e){return e.requestUri.split(".").join("\\.")},convertToNumber:function(e){var t=1*e;return isNaN(t)?0:t},mergeThenURLEncode:function(e,t,n){return encodeURIComponent(c(e,t,n))},getModelMergeConditions:function(e,i,t){i=i||{model:e},t=t||{};var n=e.conditions,r={},a={},o=!1!==t.urlEncode;return n&&n.length&&(d(n,function(e,t){t.inactive||(r[t.sourceParam||t.name]=t)}),d(r,function(e,t){if(void 0!==t.value&&!t.inactive){var n=c(t.value||t.values&&t.values.join(",")||"",i);o&&(n=encodeURIComponent(n)),a[e]=n}})),a},applySynonym:function(s,e){var l=i(e),t=n(e);d(t,function(e,t){s[t.id]=f(s,e)}),d(s,function(e,t){var i,r,n,a,o="";l[e]&&(n=l[e].makeFlatList)&&t&&t.length&&(i=n.delimiter,r=n.fieldPath,a=u.isUndefined(n.space)?" ":n.space,i||(i=";"),r?d(t,function(e,t){if(t){var n=f(t,r);o&&(o+=i+a),o+=n+""}}):o=t.join(i+a),s[e]=o)})},revertSynonym:function(l,e){var c=i(e),t=n(e);d(l,function(e,t){var n,i,r,a,o,s=[];if(c[e]&&(r=c[e].makeFlatList)&&t&&u.isString(t)){if(!(t=t.replace(/\s/g,"")))return;n=r.delimiter,i=r.fieldPath,n||(n=";"),a=t.split(n),d(a,i?function(e,t){t&&(p(o={},i,t),s.push(o))}:function(e,t){t&&s.push(t)}),l[e]=s}}),d(t,function(e,t){l[t.id]&&(p(l,e,l[t.id]),delete l[t.id])})},getActionsStatic:function(e,t,n){return v.deferrable(this.createActions(e,t,n))},getEntityListStatic:function(n){return v.deferrable(l(this.prop(g),function(e,t){if(!1!==e.queryable&&(!e.hidden||n.ignoreHidden)&&"__skuid_fieldDefaults"!==t)return{value:t,label:e.label}}))},makeLabelFromId:function(e){var t=e.replace(/\./g," ").replace(/_/g," ").split(/(?=[A-Z]|\s)/);var n=[],i=0,r=!1;return d(t,function(e,t){(t=function(e){if(e)return e[0].toUpperCase()+e.substring(1)}(t.trim()))&&(r?1===t.length?n[i]+=t:(r=!1,n[++i]=t):(i++,1===t.length&&(r=!0),n[i]=t))}),(n=l(n,function(e){if(e)return e})).join(" ")},queryEntityMetadataStatic:function(e){var n=this.getEntityMetadataCacheKey(e),t=this.prop(g),i=t&&t[n],r=t&&t.__skuid_fieldDefaults,a=s();return i?(d(i.fields,function(e,t){r&&(t=i.fields[e]=o.extend({},r["*"],r[n],t)),t.createable=t.createable||t.writeable,t.editable=t.editable||t.writeable,t.label||(t.label=v.makeLabelFromId(t.id))}),a.resolve(i)):a.reject()},parseSuccessfulLoadResponseWithSynonyms:function(e,t,n){var i=h(e.body),r=t.pathToContent,a=r?f(i,r):i;return o.isArray(a)||(a=[a]),v.safeEach(a,function(e,t){v.applySynonym(t,n)}),a},parseSuccessfulSaveResponseWithSynonyms:function(e,t){var n,i,r=t.method,a=t.model,o=h(e.body);if(r&&a&&o)return i=(n=r.pathToContent)?f(o,n):o,v.applySynonym(i,a),i},safeEach:function(e,t){e instanceof Object&&d(e,t)},trimEmptyParameters:function(e){var n={};return d(e,function(e,t){u.isObject(t)&&o.isEmptyObject(t)||o.isArray(t)&&0===t.length||""!==t&&null!=t&&(n[e]=t)}),n},applyAccessTokenAsParam:function(e,t,n){-1===e.request.url.indexOf(n+"=")&&(-1===e.request.url.indexOf("?")?e.request.url+="?"+n+"="+t.access_token:e.request.url+="&"+n+"="+t.access_token)},downloadWithLink:function(e,t){var n=document.createElement("a");document.body.appendChild(n),n.style="display: none",n.href=t,n.target="__blank",n.download=e,n.click(),o(n).remove()},makeAWSRequest:function(e,t,n){var i={url:"/core/data/aws",type:"POST",headers:{"x-skuid-data-source-name":e}},r={method:t};return n&&(r.body=n),i.body=r,i.contentType="application/json",a.ajax.direct(i).then(function(e){return e.body},function(e){var t=h(e.body);return t?t.message:e.status})},compose:function(){var e=function(e){return Array.prototype.slice.call(e||[])}(arguments).reverse();return function(n){return d(e,function(e,t){n=t(n)}),n}},deferrable:function(e){return e&&u.isPromise(e)?e:s().resolve(e).promise()},rejectable:function(e){return s().reject(e).promise()},extrapolateRowFromContext:function(e){return e.row?e.row:e.rows&&e.rows.length?e.rows[0]:e.model&&e.model.getFirstRow()?e.model.getFirstRow():void 0},splitAndTrimStringsToArray:function(e,t){if(e){var n=t||",";return e.length?e.trim().replace(/\s/g,"").split(n).filter(Boolean):[]}return[]},validateEmailAddresses:function(e,t,n){return!!m(e,"To")&&(!!m(t,"Cc")&&!!m(n,"Bcc"))},partitionRecipients:function(e,t,n,i){for(var r=e.slice(0),a=t.slice(0),o=n.slice(0),s=function(){c=0,l[++u]={ToAddresses:[],CcAddresses:[],BccAddresses:[]}},l=[{ToAddresses:[],CcAddresses:[],BccAddresses:[]}],c=0,u=0;r.length;)c===i&&s(),l[u].ToAddresses.push(r.shift()),c++;for(;a.length;)c===i&&s(),l[u].CcAddresses.push(a.shift()),c++;for(;o.length;)c===i&&s(),l[u].BccAddresses.push(o.shift()),c++;return l}}}(skuid)},function(e,t,n){"use strict";var We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(R){var e=R.model||(R.model={}),E=R.$,s=R.events,A=s.publish,u=R.time,D=function(){return R.platform.getDefaultDataSourceName()},a=R.constants,F=a.SALESFORCE,P="REST",O="Ui-Only",t=a.DISPLAY_TYPES,N=t.REFERENCE,n=t.COMBOBOX,_=t.INTEGER,M=t.TEXT,L=t.TEXTAREA,U=t.FORMULA,d=t.DATE,f=t.DATETIME,p=t.BOOLEAN,v=t.UUID,h="undefined",g="number",m="string",j=void 0,y=a.EVENT_SCOPES,b="_eventService",B="models.",V="childRelationship",z="array",x="__hadPriorChanges",o="_eventSubscriptionsActions",S="_eventData",l="_eventSubscriptionsGeneric",i="__id",r="__cloned",c="__new",w="__deleted",C="__notdeleted",G="__skuid_record__",H="_parentPageId",q="_parentpageid",I={},k={},T={},$=1;function W(e){return E.map(e,function(e){return e.textContent})}function Y(){return R.utils}function K(e){return[t.BUTTONGROUP,t.COMBOBOX,t.MULTIBUTTONGROUP,t.MULTIPICKLIST,t.PICKLIST].includes(e)}function X(e){return[t.CURRENCY,t.DOUBLE,t.PERCENT].includes(e)}function J(e){return Y().isUndefined(e)}function Q(e){return Y().isString(e)}function Z(e){return Y().size(e)}function ee(e,t,n){var i=Q(e)?e:e.id,r=!Q(t),a=r?t.name:t;return n||(n=R.page.id),"apex__"+(r&&t.customCookie?t.customCookie:"nx-page-"+n+"-model-condition-"+i+"-"+a)}function te(e){return Y().isMultiValueOperator(e)}function ne(e){var t=e.dataSource;return t?t instanceof R.dataSource.DataSource||(t=e.dataSource=R.dataSource.getDataSource(t.name)):e.dataSource=t=R.dataSource.getDataSource(e.dataSourceName||D()),t}function ie(e,t){var n=t&&t.getParentPage()||R.component.getByType("skuidpage")[0];n?n.addProblems(e):E(document).one("pageload",function(){ie(e,t)})}function re(e,t){return t?t+"("+e+")":e}function ae(e,t){var n=Array.prototype.push;if(t.length<32766)n.apply(e,t);else for(var i,r,a=Math.ceil(t.length/32766),o=0;o<a;o++)(r=32766+(i=32766*o))>t.length&&(r=t.length),n.apply(e,t.slice(i,r))}function oe(e,t,n,i,r){We(n.attr(i))!==h?e[t]=n.attr(i):(void 0===r?"undefined":We(r))!==h&&(e[t]=r)}function se(t,e,n,i){return i=!1!==i,t&&(t=E.trim(t).toUpperCase()),i?(e&&e.length&&!t&&(t="",E.each(e,function(e){t+=e+1+" AND "}),Y().endsWith(t," AND ")&&(t=t.substring(0,t.length-5))),t&&!Y().startsWith(t,"(")&&n&&(t="("+t+")"),t):t||""}function le(e){var t,n,i,r,a,o,s,l,c,u,d,f,p=e.model,h=e.xml,g=h.children("conditions"),m=h.children("havings"),v=h.children("actions"),y=h.children("groupby"),b=h.children("fields"),S=h.children("idfields").first().children(),w={};if(h.attr(q)&&(p[H]=h.attr(q)),p.dataSourceName=h.attr("datasource")||h.attr("service")||D(),t=ne(p))if(d=t&&t.processModelXMLExtensions,n=t.getDataSourceType()){i=n?n.name:F,a="local"===(r=n.prop("runtime.metadataSource"))||"hybrid"===r,J(p.processOnClient)&&(p.processOnClient=!(p.dataSourceName===F&&!R.platform.requiresClientSideModelLoading())||"true"===h.attr("processonclient")),f="Ui-Only"===i?"true"===(h.attr("unloadwarningifunsavedchanges")||"false"):"false"!==h.attr("unloadwarningifunsavedchanges"),E.extend(p,{id:h.attr("id")||Y().generateUniqueId(),objectName:h.attr("sobject"),type:h.attr("type"),createRowIfNoneFound:"true"===(h.attr("createrowifnonefound")||"false"),preventUnloadIfUnsavedChanges:f,orderByClause:h.attr("orderby"),batchable:"false"!==h.attr("batchable"),rTypeFor:h.attr("rtypfor"),doQuery:"false"!==h.attr("query"),deferFieldRendering:"true"===h.attr("deferfieldrendering"),deferredFields:h.attr("fieldstodefer")?h.attr("fieldstodefer").split(","):"",loadAsync:"true"===h.attr("async"),readonly:h.attr("readonly"),pathToContent:h.attr("pathtocontent")});var C=h.attr("limit");i!==P||C||(C=h.find('method[type="query"]').attr("limit")),p.recordsLimit=C?parseInt(C,10):null,E.extend(p,{fields:E.map(b.children(),function(e){return new _e({model:p,xml:E(e)})}),havings:E.map(m.children(),function(e){return new Ne(E(e),p)}),methods:E.map(h.children("methods").children(),function(e){return new Me(E(e))})}),E.each(p.fields,function(e,t){w[t.id]=t}),a||E.each(g.children(),function(e,t){(c=function(e){var t="";if(e&&(t=E(e).attr("field")),t)return Y().makeXMLDoc('<field id="{id}" query="false"/>'.replace("{id}",t))}(t))&&(w[c.attr("id")]||p.fields.push(new _e({model:p,xml:c})))}),u=me(p,g,w),p.conditions=u.conditions,p.uiOnlyConditions=u.uiOnlyConditions;var I=p.getPersonalizationService(),k=E.map(p.conditions,function(e){return e.subConditions?[e].concat(e.subConditions):e}).concat(p.uiOnlyConditions);E.each(k,function(e,t){var n,i,r=I.getCondition(t.name);r!==j&&("-off-"===r?t.inactive=!0:("-on-"===r||(E.isArray(r)?i=r:n=r,te(t.operator)&&(t.values=i||n&&Y().isString(n)&&(-1!==n.indexOf(";")?n.split(";"):[n])||[]),t.value=n),t.inactive=!1))});var T=I.getOrderBy();T&&(p.orderByClause=T);var x=I.getOrderByClient();switch(x&&(p.orderByClauseClient=x),h.attr("doclone")){case"yes":p.doClone=!0;break;case"no":p.doClone=!1}y.length&&(p.groupByFields=E.map(y.children(),function(e){return new _e({model:p,xml:E(e)})}),p.groupByMethod=y.attr("method")||"simple"),p.groupByFields&&p.groupByFields.length&&(p.fields=p.fields.concat(p.groupByFields)),i===F&&(p.queryAllRows="true"===h.attr("queryallrows"),p.forView="true"===h.attr("forview")),v.length&&(p.actions=E.map(v.children("action"),function(e){return new je(E(e))})),!p.pathToContent&&p.methods&&p.methods.length&&(o=p.methods.filter(function(e){return"query"===e.type&&e.pathToContent})).length&&(p.pathToContent=o[0].pathToContent),s=h.attr("label"),l=h.attr("labelplural"),p.label||(p.label=s?Y().mergeAsText("global",s):p.id),p.labelPlural||(p.labelPlural=l?Y().mergeAsText("global",l):p.id),h.attr("namefield")&&(p.nameField=h.attr("namefield")),S.length&&(p.idFields=W(S)),p.serviceUrl=h.attr("serviceurl")||h.attr("endpoint"),p.verb=h.attr("verb"),g.length&&(p.conditionLogic=se(g.attr("logic"),p.conditions,!1,n.prop("initializeConditionLogic"))),m.length&&(p.havingLogic=se(m.attr("logic"),p.havings)),d&&d.call(t,p,h,e)}else ie("Missing Data Source Type",p);else ie("Missing Data Source: "+p.dataSourceName,p)}function ce(e,t,n,i){var r=n.attr(i),a=!1;return r&&(a=Y().escapeSingleQuotes(r),e[t]=a),a}function ue(e,t){var n,i=t===d,r=t===f,a=t===p,o=void 0===e?"undefined":We(e),s=J(e),l=null===e;if(i||r){if(o===m){if(i&&!u.parseSFDate(e)||r&&!u.parseSFDateTime(e)){var c=u.resolveDateKeyword(e);return E.isArray(c)?r?u.getSFDateTime(c[0]):u.getSFDate(u.getLocalDateTime(c[0])):null}}else if(s||l||""===e)return null}else{if(a&&"boolean"!==o&&!l&&!s)return o===m&&"true"===e.toLowerCase()||o===g&&0!==e;if(X(t)&&o!==g&&e)try{n=parseFloat(e),Y().isExactlyNaN(n)||(e=n)}catch(e){}else if(t===_&&o!==g&&!s&&!l&&e)try{n=parseInt(e,10),Y().isExactlyNaN(n)||(e=n)}catch(e){}}return s?null:e}function de(e,t){e&&t&&e._GUID&&!(e._GUID in t)&&(t[e._GUID]=e)}function fe(e,t){e&&t&&e._GUID&&e._GUID in t&&delete t[e._GUID]}function pe(d,e){e||(e={cloneRowsIfNeeded:!0,createDefaultRowIfNeeded:!0});var t="aggregate"===d.type,n=void 0,f=[],p={},i=Y().createMapForArray,r=void 0;function a(){!1!==e.evaluateFormulaFields&&d.evaluateFormulaFields({preventTrackChanges:!0}),d.isInitialized=!0,d.publish("initialized")}(d.isAggregate=t,(n=d.getDataSourceType())&&(d.dataSourceTypeName=n.name||F,n.initialize&&n.initialize(d)),d.fields&&d.fields.forEach(function(t){var e=t.picklistSource,n=t.id,i=R.$M(t.picklistSourceModel),r=function(){var e=d.getField(n);!e&&t&&(e=t),e.picklistEntries=function(n,i,r){return n.getRows().filter(function(e){return!n.getRecordForRow(e)||!n.getRecordForRow(e).isMarkedForDeletion()}).map(function(e){var t={model:n,row:e};return{value:i?Y().mergeAsDataInContext(i,t):n.getRowId(e),label:r?Y().mergeAsDataInContext(r,t):n.getRowName(e)}})}(i,o,a)},a=void 0,o=void 0;if(!0===function(e){return e&&e.type&&[z,V].includes(e.type)}(t)&&t.subFields&&f.push(t),t.uiOnly&&t.calculated&&(t.createable=t.editable=!1),"rowsinmodel"===e&&i)o=t.picklistEntryValue,a=t.picklistEntryLabel,i.getRows().length?r():t.picklistEntries=[],t._hasPicklistSourceSubscriptions||(t._hasPicklistSourceSubscriptions=!0,["cancelled","loaded","saved","row.created","row.updated"].forEach(function(e){return d.storeSubscription(i.subscribe(e,r))}));else if("snippet"===e){var s=R.snippet.get(t.picklistSourceSnippet),l=void 0;s&&(l=s(),Y().isPromise(l)?l.then(function(e){e&&e.length&&(t.picklistEntries=e)}):l.length&&(t.picklistEntries=l))}if(t.displaytype===N&&t.rel){var c=t.id.split(".");c.pop(),c.push(t.rel);var u=c.join(".");p[u]={id:u,displaytype:"OBJECT",uiOnly:!0,accessible:!0,editable:!0,createable:!0}}}),f.length&&i(f,"subFields","subFieldsMap","id"),p&&E.each(p,function(n,e){var i=!1;E.each(d.fields,function(e,t){if(t.id===n)return!(i=!0)}),i||d.fields.push(e)}),i([d],"fields","fieldsMap",["id","name"]),t||(!1!==e.cloneRowsIfNeeded&&d._cloneRowsIfNeeded(e.pageComponent),ge(d)),d._generateDataIndices(),d.processOnClient?ve(d):(r=me(d),d.conditions=r.conditions,d.uiOnlyConditions=r.uiOnlyConditions,ve(d),d.uiOnlyConditions.length&&(d.conditionLogic=se(null,d.conditions)),d.data=function(e){{if(e.uiOnlyConditions){var t=e.uiOnlyConditions.filter(function(e){return!e.inactive});return e.getRows(t)}return e.data}}(d)),function(d){var e=d?d.actions:null,f=d?d.id:null,p=Y().startsWith,n=d[o];n||(n=d[o]=[]);n.length&&(n.forEach(function(e){e.unsubscribe()}),n.length=0);e&&e.length&&e.forEach(function(e){var t=e.events,l=e.actions,c=e.fields,u=e.conditions;Y().isString(l)&&(l=Y().makeXMLDoc(l)),t&&t.length&&t.forEach(function(e){var s=Y().startsWith(e,B)?e.substring(7):e;n.push(d.subscribe(s,function(e){var t=!0;if("saved"!==s||e.totalsuccess){if("row.updated"===s&&c&&c.length&&!Y().doArraysIntersect(Object.keys(e.updates),c))t=!1;else if(p(s,"condition.")){var n=e.conditionName,i=d.getConditionByName(n);t=d.isFilterableCondition(i)&&(!u||-1!==E.inArray(n,u))}}else t=!1;if(t){var r=E.extend({model:Se(f),initiatorId:f},e),a=function(){R.actions.runActionsNode(l,d,r)},o=R.component.getByType("skuidpage");o&&o.length?a():E(document.body).one("pageload",a)}}))})})}(d),d.hasMetadataLoaded()&&!1!==e.createDefaultRowIfNeeded)?d._checkIfDefaultRowCreationNeedsToBeAsync()?d._createDefaultRowIfNeededAsync().then(function(){a()}):(d._createDefaultRowIfNeeded(),a()):a();return d}function he(){return Y().generateUniqueId()}function ge(i){i.dataSourceTypeName===F&&E.each(i.data,function(e,t){var n=i.getRowId(t);t.Id15=n?n.substring(0,15):null})}function me(i,r,a){var o=[],s=[],e=r?r.children():i.conditions,l=i.uiOnly;return i.uiOnlyConditions?{uiOnlyConditions:i.uiOnlyConditions,conditions:i.conditions}:(a=a||i.fieldsMap,E.map(e,function(e){var t=r?e.getAttribute("field"):e.field,n=r?new Ne(E(e),i):e;l||a[t]&&a[t].uiOnly?o.push(n):s.push(n)}),{conditions:s,uiOnlyConditions:o})}function ve(n){n.conditions||(n.conditions=[]),n.conditions.forEach(function(e){n.updateConditionValue(e);var t=e.subConditions;t&&t.length&&t.forEach(function(e){n.updateConditionValue(e)})})}function ye(t){return t?E.map(T,function(e){return t===e.getParentPageId()?e:j}):E.map(I,function(e){return e})}function be(){return I}function Se(e,t){if(!t)return I[e]||T[e];var n=Y().getFullyQualifiedId(e,t),i=T[n]||I[e];return i&&i.getParentPageId()===t?i:j}function we(e,t){t||(t={});var l,c,o,g,u,n,r=!1,i=E.Deferred(),a={},m={},s={},p={},h=[],d={},v=t.initiatorId,f=t.rollbackOnAnyError,y="beforeSaveCommitted",b="saveInitiated",S="saveHandled",w=function(e){var n={insertResults:[],updateResults:[],deleteResults:[],messages:[],totalsuccess:!0};return v&&(n.initiatorId=v),e&&E.each(e,function(e,t){n[e]=t}),n},C={},I={},k=function(){E.each(m,function(e,t){t.publish("saved",C[e])}),A(B+"saved",[l])},T=function(){E.each(m,function(e,t){t.publish(S,C[e])}),A(B+S,[l])};if(A("skuid.ui.commitUserInput"),m=e.reduce(function(e,t){return!t.isBeingSaved&&t.hasChanged&&Z(t.changes)&&((e[t.id]=t).isBeingSaved=!0),e},{}),l=w({models:m,event:B+"saved"}),A(B+b,[{event:B+b,models:m,initiatorId:v}]),E.each(m,function(){var l,e,t,c,u,d=this,n=d.id,i={modelId:n,model:d,initiatorId:v},f=!1;e=d.getDataSource(),t=d.getDataSourceName(),c=d.getIdField(),u=I[n]={},C[n]=w(i),d.publish(b,i),l={id:n,type:d.objectName},E.each(d.registeredFields,function(e,t){t.messages=[]}),s[t]||(s[t]=[],p[t]=e),s[t].push(d),a[t]||(a[t]=[]),l.inserts={},l.updates={},l.deletes={},E.each(d.changes,function(e,t){var n,o,i=d.record(e),r=i.row(),a=i.isMoribund(),s=i.isNew();a&&s?(u[e]=t,delete d.changes[e]):a?(n=l.deletes[e]={},f=!0,c?E.isArray(c)?c.forEach(function(e){n[e]=d.getFieldValue(r,e,!0)}):n[c]=d.getFieldValue(r,c,!0):E.each(r,function(e,t){e===G||E.isPlainObject(t)||E.isArray(t)||(n[e]=t)})):(o={},s&&(f=!0),E.each(t,function(r,a){var e=d.getField(r),t=[],n=Y().isObject(a);if(e&&e.uiOnly)return f=!0;e||!n?(o[r]=a,f=!0):!e&&n&&(f=!0,function n(e,i,r){E.each(e,function(e,t){if(null!==t&&"object"===(void 0===t?"undefined":We(t))){if(t instanceof Le)return!0;n(t,i,r?r+"."+e:e)}else i.push(r?r+"."+e:e)})}(a,t,r),E.each(t,function(e,t){var n=d.getField(t);if(n){if(s&&!n.createable)return;if(!s&&!n.editable)return;var i=t.substring(r.length+1);Y().setObjectProperty(o,t,Y().getObjectProperty(a,i))}}))}),s?l.inserts[e]=o:0<Object.keys(o).length?l.updates[e]=o:delete d.changes[e])}),h=h.concat(this.validateRequiredFields()),l.returning=d.fields?E.map(d.fields.filter(function(e){return e.type!==V&&!1!==e.query&&!0!==e.uiOnly}),function(e){return e.id}):[],d&&d.extensions&&R.offline.networkDown()&&(l.extensions=d.extensions),a[t].push(l),f?(r=!0,d.publish(y,{operation:l,modelId:n,model:d,initiatorId:v})):d.needsReset=!0}),(n=0<h.length)&&(r=!1),r)o=[],g={},u={},A(B+y,[{event:B+y,initiatorId:v,models:m,operations:a}]),E.each(a,function(e,t){var n,i=s[e],r=p[e],a={operations:t};!0===f&&(a.rollbackOnAnyError=!0),n=r.save(a).then(function(a){var e,h={},o={},s=function(e,i,r){E.each(e,function(){this.rowId=r,this.model=i;var e,t=this.fields,n=0;if(t&&t.length)for(;n<t.length;n++)e=i.getField(t[n]),t[n]={id:e.id,label:e.label};C[i.id].messages.push(this),l.messages.push(this)})};return a.totalsuccess=!0,E.each(i,function(e,t){o[t.id]=!0}),E.each(["delete","insert","update"],function(e,t){var n=a[t+"Results"];n&&n.length&&E.each(n,function(e,t){var n=t.source,i=m[n],r=t.id||t.oldId;t.success||(a.totalsuccess=!1,C[i.id].totalsuccess=!1,o[n]=!1,s(t.errors,i,r)),s(t.messages,i,r)})}),f&&a.totalsuccess||!f?(E.each(a.deleteResults,function(e,t){if(t.success){var n=t.source;u[n]||(u[n]={}),u[n][t.id]=t.id}}),E.each(a.insertResults,function(e,t){if(t.success){var n,i,r,a,o=t.source,s=m[o],l=t.oldId,c=s.getRowById(l),u=t.record=Y().parseAsJSONIfString(t.record),d=s.registeredFieldsByRowThenField,f=s.registeredItemsByRow,p=s.record(l);l in s.changes&&delete s.changes[l],l in s.originals&&delete s.originals[l],n=t.hasOwnProperty("id")?t.id:u?s.getRowId(u):l,u&&p.setRow(u),p.setId(n).markSaved(),h[l]={row:c,id:n},s.dataSourceTypeName===F&&(c.Id=n,c.Id15=n?n.substring(0,15):n),n===l&&s.dataMap[n]||(delete s.dataMap[l],delete s.recordsMap[l],s.dataMap[n]=c,s.recordsMap[n]=p),i=l in d&&d[l],r=l in f&&f[l],!1!==i&&(delete d[l],d[n]=i),!1!==r&&(delete f[l],f[n]=r),u&&((a=g[o])||(a=g[o]={}),a[n]=u)}}),E.each(a.updateResults,function(e,t){if(t.success){var n,i,r=t.id,a=t.record,o=t.source,s=m[o];r in s.changes&&delete s.changes[r],r in s.originals&&delete s.originals[r],n=s.getRowById(r),s.getRecordForRow(n).markSaved(),a&&(a=t.record=Y().parseAsJSONIfString(a),(i=g[o])||(i=g[o]={}),i[s.getRowId(n)]=a)}}),c={},E.each([u,I],function(e,t){Z(t)&&E.each(t,function(t,e){Z(e)&&(c[t]||(c[t]=[]),E.each(e,function(e){c[t].push(e)}))})}),Z(c)&&(E.each(c,function(e,t){R.$M(e).abandonRows(t,{notify:!1})}),c={},u={},I={}),Z(g)&&E.each(g,function(e,t){m[e].updateRows(t,{preventSetActive:!1,preventTrackChanges:!0})}),e=R.model.list(),E.each(e,function(){var o=this,e=o.conditions,s={};o.hasChanged&&E.each(o.changes,function(a,e){E.each(e,function(e,t){if(t){var n,i,r=h[t];r&&(n=o.getField(e))&&n.displaytype===N&&((i=s[a])||(i=s[a]={}),i[e]=r.id,i[n.rel]=r.row)}})}),e&&e.length&&E.each(e,function(e,t){if("modelmerge"===t.type){var i,n=Se(t.model),r=n&&n.getIdField(),a=t.mergeField,o=n&&a?n.getField(a):null;(o&&o.displaytype===N||a===r)&&(te(t.operator)?(i=t.values)&&i.length&&E.each(i,function(e,t){var n=h[t];n&&(i[e]=n.id)}):t.value&&t.value in h&&(t.value=h[t.value].id))}}),Z(s)&&o.updateRows(s,{preventSetActive:!1,preventTrackChanges:!1})}),E.each(e,function(){this.evaluateFormulaFields({preventTrackChanges:!0})})):f&&!a.totalsuccess&&Z(I)&&E.each(I,function(e,t){var n=R.$M(e).changes;E.each(t,function(e,t){n[e]=t})}),E.each(i,function(e,n){n.setHasChanged(!o[n.id]),E.each(n.registeredEditors,function(e,t){t._GUID in d||(d[t._GUID]=t),!0!==t.hadErrors&&(t.hadErrors=n.hasChanged)})}),E.each(i,function(e,t){t.isBeingSaved=!1}),{insertResults:a.insertResults,updateResults:a.updateResults,deleteResults:a.deleteResults,totalsuccess:a.totalsuccess}},function(e){Array.isArray(e)||(e=[e]);var t=E.map(e,function(e){var t=Q(e)?{message:e}:e;return t.severity||(t.severity="ERROR"),t});return E.each(i,function(){var n=this;n.isBeingSaved=!1;var e=C[n.id];e.totalsuccess=!1,Array.prototype.push.apply(e.messages,t),E.each(n.registeredEditors,function(e,t){t._GUID in d||(d[t._GUID]=t),!0!==t.hadErrors&&(t.hadErrors=n.hasChanged)})}),l.totalsuccess=!1,Array.prototype.push.apply(l.messages,t),t.map(function(e){return e.message})}),o.push(n)}),E.when.all(o).then(function(e){E.each(m,function(e,t){E.each(t.registeredLists,function(){this.render({resetItemModes:!0,resetPagination:this.options&&this.options.alwaysResetPagination,changedRows:g[t.id],destroyDeletedRows:!0})})}),E.each(e,function(e,i){["insert","update","delete"].forEach(function(e){var n=e+"Results",t=i[n];t&&t.length&&(E.merge(l[n],t),t.forEach(function(e){var t=C[e.source];t&&(t[n].push(e),e.success||(t.totalsuccess=!1))}))}),!1===i.totalsuccess&&(l.totalsuccess=!1)}),k(),i.resolve(l),t.callback&&t.callback(l)},function(e){k();var t=l.messages;t&&t.length?i.reject(E.map(t,function(e){return E.isPlainObject(e)&&e.message?e.message:e})):i.reject(e)}).always(function(){Re(l.messages,m,v);var o=Ee(l.messages);if(T(),Z(d)){var s=[];E.each(d,function(){this.handleSave(!this.hadErrors,l),this.hadErrors=!1}),E.each(d,function(){var a=t.initiatorId;this.clearInlineErrors(),a&&this._GUID!==a||(this.handleMessages(o,{initiatorId:a}),s.push(this._GUID)),E.each(o,function(){var n=this,e=n.model&&n.model.registeredFieldsByRowThenField[n.rowId];e&&!e[0]&&(e=[e]),e&&e.length&&E.each(e,function(){var t=this,e=n.fields;e&&e.length?E.each(e,function(){var e=this;E.each(t,function(){E.each(this,function(){this.id===e.id&&(this.handleMessage(n),s.push(this._GUID))})})}):E.each(t,function(e,t){var n=t[a];if(n){var i=n.editor,r=i.id();-1===s.indexOf(r)&&(i.handleMessages(o),s.push(r))}})})})})}});else{l.totalsuccess=!n,f&&!l.totalsuccess?Z(I)&&E.each(I,function(e,t){var n=R.$M(e).changes;E.each(t,function(e,t){n[e]=t})}):Z(I)&&(c={},E.each(I,function(t,e){Z(e)&&(c[t]||(c[t]=[]),E.each(e,function(e){c[t].push(e)}))}),Z(c)&&E.each(c,function(e,t){R.$M(e).abandonRows(t,{notify:!1})})),n&&(Array.prototype.push.apply(l.messages,h),E.each(h,function(e,t){t.model&&C[t.model.id]&&(C[t.model.id].totalsuccess=!1)}));var x={};E.each(m,function(e,t){var n=(!f||f&&l.totalsuccess)&&Z(I)&&Z(I[e]),i=t.registeredEditors,r=t.registeredLists;t.isBeingSaved=!1,t.setHasChanged(!!Z(t.changes)),i&&Z(i)&&E.each(i,function(e,t){t._GUID in d||(d[t._GUID]=t)}),(n||t.needsReset)&&r&&Z(r)&&E.each(r,function(e,t){t._GUID in x||(x[t._GUID]=t)})}),Re(h,m,v);var D=Ee(h);T(),Z(d)&&E.each(d,function(){this.handleSave(l.totalsuccess,l),v&&this._GUID!==v||this.handleMessages(D,l)}),n&&E.each(h,function(){var n=this;E.each(n.model.registeredFieldsByRowThenField[n.rowId],function(){var t=this;n.fields&&E.each(n.fields,function(){var e=this;E.each(t,function(){this.id===e.id&&this.handleMessage(n)})})})}),Z(x)&&E.each(x,function(){this.render({resetPagination:!0,resetItemModes:!0,destroyDeletedRows:!0})}),k(),t.callback&&t.callback(l),i.resolve(l)}return i.promise()}function Ce(e,i){if(e){e instanceof Array||(e=[e]),i||(i={});var c,r={},a={};E.each(e,function(e,o){if(!1===o.hasChanged)return!0;E.each(o.registeredFields,function(e,t){t.messages=[]});var t,s={},l={},n=[];E.each(o.changes,function(e){o.originals[e]||(e||"0"===e)&&n.push(o.getRowById(e))}),o.abandonRows(n,{notify:!1}),c=o.changes,o.changes={},E.each(o.originals,function(e,t){var n=o.getRowById(e),i=o.record(e),r=c[e],a=l[e]={};i.isNew()?(E.each(n,function(e){a[e]=""}),s[e]={}):(E.each(r,function(e){e in t||(a[e]=j)}),E.each(t,function(e,t){a[e]=t})),i.isMoribund()&&i.unmarkForDeletion()}),Z(l)&&o.updateRows(l,{preventSetActive:!1,preventTrackChanges:!0}),t=E.extend(!0,{},o.originals),o.originals=s,o.setHasChanged(!1),o.evaluateFormulaFields({preventTrackChanges:!0}),o.notifyFieldsOfChange(t,i),o.registeredLists&&E.each(o.registeredLists,function(){this._GUID in r||(r[this._GUID]=this)}),o.registeredEditors&&E.each(o.registeredEditors,function(){this._GUID in a||(a[this._GUID]=this)})}),E.each(r,function(e,t){t.render({resetItemModes:!0,resetPagination:this.options&&this.options.alwaysResetPagination,changedRows:c,destroyDeletedRows:!0})});var t={},n="models.cancelled",o={event:n,models:t,initiatorId:i.initiatorId};return e.forEach(function(e){(t[e.id]=e).publish("cancelled",{event:"cancelled",model:e,modelId:e.id,initiatorId:i.initiatorId})}),E.each(a,function(e,t){t.handleCancel&&t.handleCancel(o)}),A(n,[o]),e}}function Ie(e,t,n){return n=n||{},E.extend(n,{loadAllMetadata:!0}),De(e,t,n)}function ke(e,t,n){return De(e,t,n)}function Te(e,t){return De(e,t,{syncOnly:!0})}function xe(e,t,n){var i={addOnly:!0};return E.each(e,function(e,t){!function(e){var t=e.getDataSourceType();if(e.canRetrieveMoreRows&&!e.isProcessing)if(e.offsetPageNumber&&e.offsetPageSize)e.offsetPageNumber++;else if(t&&t.coerceStartingPageSize?t.coerceStartingPageSize(e):e.offsetPageSize=e.recordsLimit||100,0<e.data.length){var n=0<e.offsetPageSize?Math.ceil(e.data.length/e.offsetPageSize):1;e.offsetPageNumber=1<n?n:2}else e.offsetPageNumber=1}(t)}),De(e,t,n=n?E.extend({},n,i):i)}function De(o,a,f){f=f||{};var s=E.Deferred(),l=[],c={},u=[],i=f.initiatorId,d={},p=[],h={},g=[],m="initially-loaded",t=B+"loaded",r={},v={},y={event:t,models:r,updatedRows:v,initiatorId:i},b={},S=f.loadAllMetadata,w=function(d,e,t){R.loader.service.loadDataSourceAndDependencies(e).then(function(e){return e.load(d,f)}).then(function(e){E.each(d,function(e,t){t.isProcessing--}),E.each(e,function(e,i){var t,n=d[e],r=!1,a=f.syncOnly&&n.lastSyncTime,o=i.errors,s={evaluateFormulaFields:!1,pageComponent:f?f.pageComponent:j};if(n.lastLoadTime=(new Date).getTime(),"function"==typeof n.lastSuccessfulCallout&&(n.lastSuccessfulCallout=n.lastSuccessfulCallout()),!(b[n.id]>n.lastSuccessfulCallout))return!0;if(n.lastSuccessfulCallout=b[n.id],f.addOnly||a||n._invalidateDataIndices(),o&&o.length&&(n.errors=o),f.loadAllMetadata||!n.hasMetadataLoaded()){if(n.hasMetadataLoaded()||(r=!0,n.setMetadataHasLoaded()),i.actions||delete i.actions,i.fields&&!n.isAggregate){var l={};i.fields&&i.fields.length&&E.each(i.fields,function(e,t){t.id&&(l[t.id]=t)}),E.each(n.fields,function(e,t){if(t.id){var n=l[t.id];n&&E.extend(!0,n,t)}}),n.fields=i.fields,delete i.fields}E.extend(n,i),n.initialize(s),r&&n.registerKeyPrefix(),n.loadAsync&&n.publish("loaded.async"),t=n.data}else{if(n.isInitialized||n.initialize(s),a){var c=n.getConditionByName("_sync",!1),u=[];n.deactivateCondition(c),n.queryAllRows=!1,i.data.forEach(function(e){n.dataSourceTypeName===F&&e.IsDeleted?n.removeRowById(n.getRowId(e)):u.push(e)}),t=n.adoptRows(u,{evaluateFormulaFields:!1,notify:!1})}else t=f.addOnly?n.adoptRows(i.data,{doAppend:!0,evaluateFormulaFields:!1,notify:!1}):n.data=i.data||[];n.isAggregate||(n._cloneRowsIfNeeded(f?f.pageComponent:j),n._createDefaultRowIfNeeded(),ge(n)),n.conditions&&i.conditions&&E.each(n.conditions,function(e,t){var n=i.conditions[e];n&&(t.values=n.values),E.extend(t,n)}),n._generateDataIndices(),["canRetrieveMoreRows","debug","lastQueryDuration","lastQueryString","lastSyncTime","recordsLimit","batchable","soql"].forEach(function(e){i.hasOwnProperty(e)?n[e]=i[e]:delete n[e]})}i.cachedData&&(n.cachedData=i.cachedData),n._checkIfDefaultRowCreationNeedsToBeAsync()?n.once("initialized").then(function(){n.publish(m)}):n.publish(m),n.doQuery=!0,v[n.id]=t}),E.each(e,function(e){var t=d[e];if(t.evaluateFormulaFields({preventTrackChanges:!0,updatedRows:v[t.id]}),t.uiOnlyConditions){var n=t.uiOnlyConditions.filter(function(e){return!e.inactive});t.data=t.getRows(n)}}),E.each(d,function(e,t){t.lastLoadTime=(new Date).getTime()}),E.each(d,function(e,t){r[t.id]=t,E.each(t.getDependentConditions(),function(e,t){var n=Se(e);n&&E.each(t,function(e,t){n.updateConditionValue(t)})})});var a=[];E.each(d,function(e,n){n.batchLabelModels&&E.each(n.batchLabelModels,function(i,e){var t=e.getConditionByName("__reference_batch"),r={};E.each(n.data,function(e,t){var n=t[i];(n||0===n)&&(r[n]=!0)}),0!==Object.keys(r).length&&(e.setCondition(t,E.map(r,function(e,t){return t})),e.referenceFieldId=i,e.referenceModelId=n.id,a.push(e))})}),a.length?De(a).then(function(e){E.each(e.models,function(e,i){var t=Se(i.referenceModelId),r=t.getField(i.referenceFieldId);r.rel&&E.each(t.data,function(e,t){var n=t[i.referenceFieldId];(n||0===n)&&(t[r.rel]=i.dataSource.getDataSourceType().getReferenceHandler().getRowFromReferenceValue(i,n,r))})}),t.resolve(y)}).catch(t.reject):t.resolve(y)}).catch(function(e){E.each(d,function(e,t){t.isProcessing--}),Q(e)?g.push({message:e,severity:"ERROR"}):e instanceof Array&&E.each(e,function(e,t){g.push({message:t,severity:"ERROR"})}),E.each(d,function(){this.publish(m),this.registeredEditors&&E.each(this.registeredEditors,function(e,t){t._GUID in h||(h[t._GUID]=t)}),t.reject(e)})})};if(E.each(o,function(){var r=this,e=r.getDataSource(),a=r.getDataSourceName(),o=e&&!0===e.dataSourceType.prop("batchableEntityRequests")&&!1!==r.batchable,s=e&&!0===e.dataSourceType.prop("serverSideModelMerge"),t=f.syncOnly&&r.lastSyncTime;if(r.publish("load-initiated"),r.hasChanged&&p.push(R.utils.reject("Model '"+r.id+"' has unsaved changes. To update this model's data, you must first save or cancel the changes.")),t){var n=r.getConditionByName("_sync",!1);if(!r.fieldsMap.IsDeleted){var i={id:"IsDeleted"};r.fields.push(i),r.fieldsMap.IsDeleted=i}n||(n={name:"_sync",type:"fieldvalue",field:"LastModifiedDate",inactive:!1,operator:"gte",encloseValueInQuotes:!1},r.addCondition(n)),r.setCondition(n,r.lastSyncTime),r.queryAllRows=!0}r._dependsOn=[],r.getConditionsWithDependencies().forEach(function(e){var t=[];e.model&&t.push(e.model),e.locationModel&&t.push(e.locationModel),E.each(t,function(e,t){var n=R.$M(t);if(-1===E.inArray(t,r._dependsOn)){var i=n.getDataSourceName();(!o||!s||R.offline.networkDown()||i!==a||n&&n._dependsOn&&0<n._dependsOn.length)&&(r._dependsOn.push(t),c[r.id]=r)}}),r.updateConditionValue(e)}),f.addOnly||(delete r.offsetPageNumber,delete r.offsetPageSize,delete r.paginationOffset),r.isProcessing++,b[r.id]=++r.calloutIterator,S||(r.doQuery=!0),delete r.errors,0===r._dependsOn.length&&(o&&!R.offline.networkDown()?(d[a]||(d[a]=[]),d[a].push(r)):l.push(r))}),Z(c)){var n=E.map(o,function(t){return{name:t.id,links:E.map(t._dependsOn,function(e){return{name:e,parent:t.id}}),isCircular:!1}}),C=[];Z(d)&&E.each(d,function(e,t){d[e];var n=[];E.each(t,function(e,t){t.getConditionsWithDependencies().forEach(function(e){e.model in c&&n.push(t.id)})}),0===t.filter(function(e){if(-1===E.inArray(e.id,n))return e;c[e.id]=e}).length&&delete d[e]}),E.each(n,function(e,t){t.isCircular||!function s(l,c,e,u,d,f){var t,p=[e],h=!1;if(c||(c=[]),c.length)return c;for(d=d||[l[e].name];0<p.length&&(t=p.shift(),!c.length&&!l[t].isCircular);)E.each(l[t].links,function(e,o){if(c.length)return!1;E.each(l,function(e,t){if(t.name===o.name&&!t.isCircular)if(p.push(e),d.push(o.name),d.some(function(e,t){return d.indexOf(e)!==t})&&l[u].name!==f){for(var n,i={},r=0;r<d.length;r++)i.hasOwnProperty(d[r])?(n=d[r],i[d[r]].push(r)):d.lastIndexOf(d[r])!==r&&(i[d[r]]=[r]);var a=d.slice(i[n][0],i[n][1]);E.each(l,function(e,t){-1<E.inArray(t.name,a)&&(l[e].isCircular=!0)}),c.push(a)}else f=o.parent,s(l,c,e,u,d,f),h=!0})}),h&&(p=[]);return c}(n,C,e,e)}),C.length&&E.each(C,function(e,i){var r="Models ";E.each(i,function(e,t){var n=e===i.length-1;r+=(n?"and ":"")+t+(n?" ":", "),-1===E.inArray(t,u)&&u.push(t),l.push(R.$M(t))}),ie([r+="have conditions that reference each other. These conditions may be set to inactive because the data has not been loaded yet from the referenced model."],R.$M(i[0]))})}E.each(o,function(e,n){if(n._dependsOn.length&&-1===E.inArray(n.id,u)){var i=E.Deferred(),r=!1,a=n.getDataSourceName();E.each(n._dependsOn,function(e,t){0<o.filter(function(e){return t===e.id}).length?(p.push(i),R.$M(t).subscribeOnce(m,function(){0===n._dependsOn.filter(function(e){return 0<R.$M(e).isProcessing}).length&&w([n],a,i)}),r=!0):r||n._dependsOn.length!==e+1||l.push(n)})}}),E.each(l,function(e,t){var n=E.Deferred(),i=t.getDataSourceName();p.push(n),w([t],i,n)});var I=[];return E.each(d,function(e,t){var o=[],n=E.Deferred(),s={};p.push(n),function e(t,i){var r=[],a=!1;i=i||1,E.each(t,function(e,t){var n=!1;t.getConditionsWithDependencies().forEach(function(e){var t=e.model;!t||s[t]&&1!==i||(n=!0)}),n?r.push(t):(a=!0,o.push(t),s[t.id]=1)}),r.length&&a?e(r,++i):r.length&&Array.prototype.push.apply(o,r)}(t=t.map(function(e){if(-1===E.inArray(e.id,u))return e})),w(o,e,n),I=I.concat(o)}),p.length&&E.settle(p).always(function(e){var n=[];if(E.each(e,function(e,t){t.success||n.push(t.results)}),n.length)return function(e){var t,n=[],i=!1;E.each(e,function(e,t){t instanceof Array?(E.merge(n,t),i=!0):Q(t)?n.push(t):t&&t.stack?n.push(t.stack):t&&t.message&&n.push(t.message)}),Re(g,{},f.initiatorId);var r=Ee(g);Z(h)?E.each(h,function(){f.initiatorId&&this._GUID!==f.initiatorId||this.handleMessages(r,{initiatorId:f.initiatorId})}):E.each(n,function(e,t){ie(t,I[e])}),t=!1===i&&1===n.length?n[0]:n,a&&a(t),s.reject(t)}(n);!1!==f.notify&&(E.each(r,function(e,t){var n=f.initiatorId,i=t.registeredItems,r=t.registeredFields,a=t.registeredLists,o=t.registeredEditors;i&&E.each(i,function(){this.fields&&E.each(this.fields,function(){f.addOnly||this.destroy()})}),r&&E.each(r,function(){this.render&&this.render(),t.unregisterField(this)}),a&&E.each(a,function(){this.render({doNotCache:!f.addOnly,initiatorId:n})}),o&&E.each(o,function(e,t){t._GUID in h||(h[t._GUID]=t),t.clearMessages()}),function(e,t){var n,i,r=e.registeredEditors,a=e.errors;if(a&&a.length&&(n=E.map(a,function(e){return{message:Y().isString(e)?e:e.message||null,severity:e.severity||"ERROR",showToAdminOnly:e.showToAdminOnly||!1}})),Z(n)){var o={};if(o[e.id]=e,Re(n,o,t.initiatorId),i=Ee(n),Z(r)){var s=t.initiatorId;E.each(r,function(){s&&this._GUID!==s||this.handleMessages(i,{initiatorId:s})})}else ie(n,e)}}(t,{initiatorId:n})}),E.each(h,function(e,t){t.handleDataRefresh&&t.handleDataRefresh({updatedModels:E.map(r,function(e){return e})})})),E.each(r,function(e,t){!function(e,t){e.publish("loaded",{model:e,modelId:e.id,initiatorId:i,updatedRows:t})}(t,v[e])}),A(t,[y]),a&&a(y),s.resolve(y)}),s.promise()}function Re(n,e,i){E.each(e,function(e,t){t.publish("messages",{messages:n,modelId:e,model:t,initiatorId:i})}),A(B+"messages",[{initiatorId:i,messages:n,models:e}])}function Ee(e){return e.filter(function(e){return!e.handled})}function Ae(e){return!e||e.displaytype in R.ui.searchableDisplayTypes&&e.filterable}function Fe(e){for(var t=e.fields,n=e.groupByFields,i=!J(n)&&0<n.length?n:t,r=0,a=[],o=void 0;r<i.length;r++)J(o=i[r].name)||a.push(o);return a}function Pe(t,e){return"{"+e.map(function(e){return'"'+e+'":"'+t[e]+'"'}).join(",")+"}"}function Oe(e,t,n){return n?Y().generateUniqueId({prefix:"sk-temp-record-id"}):t.isAggregate?Pe(e,Fe(t)):t.getDataSource().getRowId(e,t)}function Ne(e,t){var n,i,r,a,o,s,l,c,u,d,f,p,h,g,m=this,v=t?t.getDataSourceType():null,y=t&&t.getParentPageId();if(v&&v.setDefaultConditionState?v.setDefaultConditionState(m):(m.sourceType="fieldvalue",m.type="fieldvalue",m.operator="=",m.inactive=!1,m.encloseValueInQuotes=!0),e)if(e.jquery&&e.attr){if(i="false"!==(g=e).attr("enclosevalueinquotes"),n=Y().adjustValueBasedOnQuotedness,(p=g.attr("sourcetype"))&&p!==m.sourceType?m.sourceType=p:p=m.sourceType,s=g.attr("fieldmodel"),"fieldvalue"===p?(m.field=g.attr("field"),(c=g.attr("nosourcerowbehavior"))&&(m.noSourceRowBehavior=c),s&&(m.fieldModel=s,(d=R.$M(s))&&d.data&&d.data.length&&(f=d.data[0],m.fieldRow=d.getRowId(f)))):"param"===p?(m.sourceParam=g.attr("sourceparam"),m.sourceParam||g.attr("field")&&(m.field=g.attr("field"),m.sourceType=p="fieldvalue")):"snippet"===p?m.sourceSnippet=g.attr("sourcesnippet"):"userinfo"===p?m.sourceUserInfoType=g.attr("sourceuserinfotype"):"userhaspermission"===p?m.permissionNamespace=g.attr("permissionnamespace"):"datasourceuserinfo"===p?(m.sourceDataSourceTypeUserInfo=g.attr("sourcedatasourcetypeuserinfo"),m.dataSourceName=g.attr("datasource")):Y().endsWith(p,"property")?(m.sourceProperty=g.attr("sourceproperty"),s&&(m.fieldModel=s)):"connection"===p&&(m.connection=g.attr("connection")),m.operator=g.attr("operator")||"=",m.type=g.attr("type")||"fieldvalue",m.encloseValueInQuotes=i,m.value=n(g.attr("value"),i),m.state=g.attr("state"),m.inactive="true"===g.attr("inactive")||!1,m.mergeField=g.attr("mergefield"),o=m.type,E.each(["name","fieldFunction","fieldTargetObjects","label","model","noValueBehavior","customCookie","units","locationSource","locationModel","latitudeField","longitudeField","locationNoValueBehavior","locationChangeBehavior","locationDelta"],function(e,t){oe(m,t,g,t.toLowerCase())}),u=g.attr("row"))try{u=parseInt(u,10)}catch(e){u=0}m.row=u,"userinfo"===o||"datasourceuserinfo"===o?(m.userInfoType=g.attr("userinfotype"),m.mergeField=m.userInfoType,"userinfo"!==o||m.mergeField||(m.mergeField=m.value),m.value=null):"modelmerge"===o?(m.mergeField=g.attr("mergefield")||m.value,m.sourceParam=g.attr("sourceparam"),m.value=null):"multiple"===o?(h=m.values=[],g.children("values").first().children().each(function(){var e=Y().innerXML(this);h.push(e?Y().adjustValueBasedOnQuotedness(Y().decodeXML(e),i):"")})):"join"===o&&(m.joinObject=g.attr("joinobject"),m.joinField=g.attr("joinfield"),a=g.children("conditions"),r=g.children("condition"),a.length&&(m.subConditions=E.map(a.children(),function(e){return new Ne(E(e),t)})),r.length&&(m.subConditions=E.map(r,function(e){return new Ne(E(e),t)})),m.subConditionLogic=se(g.attr("logic"),m.subConditions))}else E.extend(m,e);"param"===m.type?(m.value?m.value=R.page.getParameter(m.value,y):delete m.value,m.value||(m.value="","noquery"===m.noValueBehavior?t&&(t.doQuery=!1):"deactivate"===m.noValueBehavior&&(m.inactive=!0,m.originalInactive=!0)),m.originalValue=m.value,m.type="fieldvalue"):"fieldvalue"===m.type&&"visualforce"===R.platform.getName()&&(l=R.page.getParameters(y),m.name in l&&(m.originalValue=m.value,m.value=l[m.name],m.inactive=!1)),m.originalInactive===j&&(m.originalInactive=m.inactive),m.originalValue===j&&(m.originalValue="multiple"!==o?m.value:m.values.join(";"))}function _e(t){var e,n=t.xml,i=t.field||{},r=t.model,a=t.dataSourceType?t.dataSourceType:r?r.getDataSourceType():null,o="true"===n.attr("uionly")||a&&a.name===O,s=Y().isBlank,l=a&&a.prop("runtime.metadataSource"),c="local"===l||"hybrid"===l,u="true"===n.attr("overridemetadata"),d=n.attr("readonly"),f=void 0,p=void 0,h=void 0,g=void 0,m=void 0,v=void 0,y=void 0,b=void 0,S=void 0,w=void 0,C=void 0,I=void 0,k=void 0,T=void 0;if(e=i.id=Y().escapeSingleQuotes(n.attr("id")),oe(i,"targetObjects",n,"targetobjects"),ce(i,"name",n,"name"),ce(i,"function",n,"function"),oe(i,"type",n,"type"),ce(i,"orderByClause",n,"orderby"),"true"===n.attr("sortable")&&(i.sortable=!0),"false"===n.attr("query")&&(i.query=!1),"true"===n.attr("convertToUserTimezone")&&(i.convertToUserTimezone=!0),(o||c)&&(i.accessible=!0),o&&(i.uiOnly=!0),u&&(i.overrideMetadata=!0),u||o||c){if(oe(i,"displaytype",n,"displaytype"),oe(i,"defaultvaluetype",n,"defaultvaluetype"),oe(i,"mergefield",n,"mergefield"),oe(i,"model",n,"model"),oe(i,"userinfotype",n,"userinfotype"),n.attr("label")&&(i.label=n.attr("label")),n.attr("helptext")&&(i.inlineHelpText=n.attr("helptext")),"true"===n.attr("required")&&(i.required=!0),n.attr("placeholder")&&(i.placeholder=n.attr("placeholder")),i.createable="false"!==n.attr("createable"),i.editable="false"!==n.attr("editable"),"true"===d&&(i.createable=i.editable=!1),(h=i.displaytype)===U&&(h=i.displaytype=n.attr("returntype"),i.calculated=!0,o&&(i.createable=i.editable=!1,n.attr("readonly","true")),i.formula=Y().decodeXML(Y().innerXML(n.children("formula").first()))||null),K(h)){var x=i.picklistSource=n.attr("picklistsource")||"manual";"manual"===x?(v=n.children("picklistentries").children()).length&&(i.picklistEntries=E.map(v,function(e){var t=E(e),n={value:t.attr("value"),label:t.attr("label"),defaultValue:"true"===(t.attr("defaultValue")||"false"),active:!0};return"true"===t.attr("disabled")&&(n.disabled=!0),n}),i.customPicklistEntriesProvided=!0):"rowsinmodel"===x?(i.picklistSourceModel=n.attr("picklistmodel"),i.picklistEntryValue=n.attr("entryvalue"),i.picklistEntryLabel=n.attr("entrylabel"),i.customPicklistEntriesProvided=!0):"snippet"===x&&(i.picklistSourceSnippet=n.attr("snippet"),i.customPicklistEntriesProvided=!0),n.attr("limitentries")&&(i.limitEntries="true"===n.attr("limitentries")),n.attr("returntype")&&(i.returnType=n.attr("returntype"))}else X(h)?(s(g=n.attr("precision"))&&o?i.precision=8:s(g)||(i.precision=parseInt(g,10)),s(m=n.attr("scale"))&&o?i.scale=2:s(m)||(i.scale=parseInt(m,10))):h===_?s(y=n.attr("digits"))&&o?i.digits=8:s(y)||(i.digits=parseInt(y,10)):h===L||h===M?(s(b=n.attr("length"))&&o?i.length=255:s(b)||(i.length=parseInt(b,10)),h===L&&(n.attr("displayasrichtext")?i.htmlFormatted="true"===n.attr("displayasrichtext"):i.htmlFormatted=i.htmlFormatted!==j&&i.htmlFormatted)):h===N&&(p=(f=R.dataSource.getDataSourceFromXML(n)).getDataSourceType(),i.dataSourceName=f.name,p&&p.getReferenceHandler&&p.getReferenceHandler().getMetadataHandler(n,i,r,e,o));oe(i,"defaultValue",n,"defaultValue"),k=i.enclosedInQuotes="false"!==n.attr("enclosevalueinquotes"),T=i.defaultValues=[],n.children("values").first().children().each(function(){var e=Y().innerXML(this);T.push(e?Y().adjustValueBasedOnQuotedness(Y().decodeXML(e),k):"")})}if(-1!==E.inArray(i.type,[V,z])&&(S=n.children("fields").first(),I=n.children("conditions").first(),0<S.length&&(w=i.subFields=[],S.children("field").each(function(){var e=E(this);w.push(new _e({xml:e,field:t.field,model:t.model,dataSourceType:t.dataSourceType}))})),i.type===V)){if((C=n.attr("limit"))||"0"===C)try{i.recordsLimit=parseInt(C,10),i.recordsLimit&&i.recordsLimit<1&&(i.recordsLimit=1)}catch(e){}n.attr("keyfield")&&(i.keyField=n.attr("keyfield"),i.anchorField=n.attr("anchorfield"),i.childObject=n.attr("childobject")),i.subConditions=E.map(I.children(),function(e){return new Ne(E(e),r)}),i.subConditionLogic=se(I.attr("logic"),i.subConditions)}return i}function Me(e){var t,n;if(e){if(e.jquery){if(t=e.attr("type"),n={verb:e.attr("verb"),endpoint:e.attr("endpoint"),type:t,pathToContent:e.attr("pathtocontent"),useResponseSnippet:e.attr("useresponsesnippet"),paginationMethod:e.attr("paginationmethod"),limitMethod:e.attr("limitmethod"),payloadContentType:e.attr("payloadcontenttype"),sendChanges:e.attr("sendchanges"),successIf:e.attr("successif"),successField:e.attr("successfield"),successValue:e.attr("successvalue"),isBatch:"true"===e.attr("batch")},"insert"===t&&(n.insertResponse=e.attr("insertresponse"),n.createdRecordIdLocation=e.attr("createdrecordidlocation")),"update"===t&&(n.updateResponse=e.attr("updateresponse")),"update"===t||"delete"===t){var i=e.children("requestbodyfields").children("field");i&&i.length&&(n.requestBodyFields=W(i))}n.sendChanges&&(n.changeMapping=e.attr("changemapping"),n.changeMappingPrefix=e.attr("changemappingprefix"),"custompayloadinbody"===n.sendChanges&&(n.payloadSnippet=e.attr("payloadsnippet"),n.contentType=e.attr("contenttype")),"usetemplaterequest"===n.sendChanges&&(n.customRequestTemplate=e.attr("customrequesttemplate"))),"true"===n.useResponseSnippet&&(n.responseSnippet=e.attr("responsesnippet")),"simple"===n.paginationMethod&&(n.offsetParameter=e.attr("offsetparameter")),"simple"===n.limitMethod&&(n.simpleRecordsLimitParameter=e.attr("simplerecordslimitparameter"))}else E.isPlainObject(e)&&(n=e);E.extend(this,n)}}function Le(e,t,n){this._model=e,this._row=t||{},t[G]=this,J(n)||(this[i]=n)}function Ue(e,t){var n,i=this,r=!1,a=R.page.pageComponent;if(t||(t={}),t[H]||i[H]||a&&(t[H]=a.id()),E.extend(i,t),e)if(Q(e))try{le({model:i,xml:n=Y().makeXMLDoc(e)})}catch(e){E(document.body).one("pageload",function(){R.component.getByType("skuidpage")[0].addProblem("Unable to create Model: invalid Model XML string provided to Model constructor. "+e)})}else e.jquery?le({model:i,xml:n=e}):(E.extend(i,e),r=!0);i.id||(i.id=Y().generateUniqueId()),i.conditions||(i.conditions=[]),i.fields||(i.fields=[]),i.data||(i.data=[]),i.changes={},i.originals={},i.registeredFields={},i.registeredFieldsByRowThenField={},i.registeredItems={},i.registeredItemsByRow={},i.registeredLists={},i.registeredEditors={},i.setHasChanged(!1),"preventUnloadIfUnsavedChanges"in i||(i.preventUnloadIfUnsavedChanges=!0),i.isProcessing=0,i.calloutIterator=0,i.lastSuccessfulCallout=0,i.events={},i[b]=new s.EventService,i[l]=[],i[S]={},i.extensions||(i.extensions={}),i.recordsMap={};var o=ne(i);i.needsMetadataLoad=!o||"local"!==o.getDataSourceType().prop("runtime.metadataSource"),!r&&n&&R.model.initializeCustomProperties(n,i)}function je(e){var t=e.children("actions"),n=e.children("fields").first().children("field"),i=e.children("events").first().children("event"),r=e.children("conditions").first().children("condition"),a={};return t.length&&(a.actions=t),n.length&&(a.fields=E.map(n,function(e){return e.textContent})),i.length&&(a.events=E.map(i,function(e){return e.textContent})),r.length&&(a.conditions=E.map(r,function(e){return e.textContent})),a}function Be(e,t){var n,i,r=t[0],a={};if(t.length<2)return!1;n=Q(t[1])?((i={})[t[1]]=t[2],t[3]):(i=t[1],t[2]),a[e.getRowId(r)]=i,this.updates=a,this.options=n}function Ve(e,t){this.list=e,this.map=t}function ze(e,t,n,i,r){i=i.toUpperCase();var a=Q(e),o=a?e:e.id,s=a?null:e.function,l=n.getField(o);l&&l.displaytype===N&&(o=Y().getFieldReference(o,l,n.getDataSource()));var c=re(o,s)+" "+i+" NULLS LAST,"+r;return t.suffix=i+" NULLS LAST",c}function Ge(e,t){var n=Q(e),i=n?e:e.id,r=n?e:e.name?e.name:i,a=t.getField(r);return a&&a.displaytype===N?Y().getFieldReference(i,a,t.getDataSource()):i}function He(e,t,n){var i,r,a;return a=Q(e)?(i=t,null):(t=e.id,i=e.name?e.name:t,e.function),(r=n.getField(i))&&r.displaytype===N?re(t,a):i}function qe(e,t,n){n=n.toUpperCase();var i=Q(e);return re(Ge(e,t),i?null:e.function)+" "+n+" NULLS LAST,"+(t.orderByClause||"")}function $e(e,t,n){var i=Ge(e,t),r=Q(e),a=He(e,i,t),o=r?null:e.function,s={fieldId:i,fieldName:a,suffix:n.toUpperCase()+" NULLS LAST"};return o&&(s.fieldFunction=o),s}Le.prototype={id:function(){return this.getId()},getId:function(){if(this.hasOwnProperty(i))return this[i];var e=Oe(this._row,this._model,this.isNew());return this.setId(e),e},setId:function(e){return this[i]=e,this},name:function(){return this.model().getDataSource().getRowName(this.row(),this.model())},model:function(){return this._model},row:function(){return this._row},getRow:function(){return this._row},setRow:function(e){return(this._row=e)[G]=this},isNew:function(){return!0===this[c]},isClone:function(){return!0===this[r]},isMoribund:function(){return this.isMarkedForDeletion()},isMarkedForDeletion:function(){return!0===this[w]},markForDeletion:function(){return this[w]=!0,this},unmarkForDeletion:function(){return delete this[w],this},markNew:function(){return this[c]=!0,this},markCloned:function(){return this[r]=!0,this},markSaved:function(){var t=this;return[c,r,w].forEach(function(e){delete t[e]}),t},get:function(e){var n,t=this._row,i=Y().getObjectProperty;return e?i(t,e):(n={},E.each(t,function(e,t){e!==G&&(n[e]=t)}),n)},set:function(){return 1===arguments.length?E.each(arguments[0],function(e,t){Y().setObjectProperty(this._row,e,t)}):2===arguments.length&&Y().setObjectProperty(this._row,arguments[0],arguments[1]),this}},Ve.prototype={indexOf:function(n){var i=-1;return E.each(this.list,function(e,t){if(t.fieldName&&t.fieldName===n||t.fieldId===n)return i=e,!1}),i},size:function(){return this.list.length}},Ue.prototype={addField:function(e){return this.fields.push(e),(this.fieldsMap[e.id]=e).name&&(this.fieldsMap[e.name]=e),this},addFields:function(e){var t=this;return e.forEach(function(e){t.addField(e)}),t},addPageProblems:function(e){return ie(e,this)},containsRow:function(e){var t=this.getRowId(e);return!1!==this.getRowById(t)},getDataSource:function(){return ne(this)},getDataSourceName:function(){var e=this.getDataSource();return e?e.name:this.dataSourceName},getDataSourceType:function(){var e=this.getDataSource();return e&&e.getDataSourceType()},setParentPageId:function(e){return this[H]=e,this},getFullyQualifiedId:function(){return this._fqid||(this._fqid=Y().getFullyQualifiedId(this.id,this.getParentPageId())),this._fqid},getParentPage:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return R.$C(this.getParentPageId(e))},getParentPageId:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=this[H];return e.root?t&&R.$C(t).getParentPage(e).id():t},hasMetadataLoaded:function(){return!this.needsMetadataLoad},setMetadataHasLoaded:function(){return this.needsMetadataLoad=!1,this},isSingleRow:function(){var n=!1;return this.conditions&&this.conditions.length&&E.each(this.conditions,function(e,t){if(t.field&&"id"===t.field.toLowerCase()&&t.type&&"param"===t.type)return!(n=!0)}),n},getField:function(e,t){var n,i,r=this.fieldsMap,a=r;return a&&!(a=e in r&&r[e])&&t&&t in r&&(i=(n=r[t])&&n.type===V?n.subFieldsMap:null)&&e in i&&(a=i[e]),a},getFieldValue:function(e,t,n){if(!e)return null;var i,r=Y().getObjectProperty(e,t);return r===j&&("Id"===t?(i=this.getRecordForRow(e))&&(r=i.id()):this.fieldsMap&&t in this.fieldsMap&&(r=null)),n?r:Y().encodeHTML(r)},getFieldValues:function(t,e,n){var i=this;return e.map(function(e){return i.getFieldValue(t,e,n)})},getFirstRow:function(){return this.data[0]},getRowById:function(e){return e in this.dataMap&&this.dataMap[e]},getNameField:function(){var e=this.getDataSource();if(e.getNameField)return e.getNameField(this.objectName,this)},getNameFieldValueForRow:function(e,t){var n,i=this.objectName,r=this.getNameField();return this.dataSourceTypeName===F&&i&&-1!==E.inArray(i,["Lead","User","Contact"])?n=Y().mergeAsText("row","{{#Name}}{{{Name}}}{{/Name}}{{^Name}}{{{FirstName}}} {{{LastName}}}{{/Name}}",{createFields:!1},this,e):r&&(n=this.getFieldValue(e,r,!0)),n&&!0!==t&&(n=Y().encodeHTML(n)),n},load:function(e,t){return Ie([this],e,t)},updateData:function(e,t){var r=this,a=[],n=function(e){if(e.length){var t=E.map(e,function(e){if(!e.inactive)return e});r._clientData=r.data.filter(function(e){return Y().areConditionsMet(t,{row:e,model:r})})}r.notifyEditorsOfDataRefresh()};return r._serverConditions||(r._serverConditions={}),r._clientData&&delete r._clientData,E.each(r.conditions,function(e,t){if(t.processOnClient&&("values"in t||"value"in t))(t.value||t.values&&t.values.length)&&a.push(t);else if(!t.processOnClient&&!t.inactive){var n,i=r._serverConditions[t.name];t.values&&t.values.length?n=t.values:t.value&&(n=t.value),i?i.values===t.values?delete r._serverConditions[t.name]:i.value===t.value?delete r._serverConditions[t.name]:r._serverConditions[t.name]=n:t.name&&(r._serverConditions[t.name]=n)}}),a.length?Y().size(r._serverConditions)?ke([r],e,E.extend(t,{notify:!1})).then(function(e){return n(a),e}):E.when().then(function(){n(a)}):ke([r],e,t)},getOverrideableFieldMetadata:function(i){var e,t,r;return!0===i.overrideMetadata&&(e=i.displaytype,t=["displaytype","defaultValue","label","inlineHelpText","idField","nameField","placeholder","htmlFormatted"],r={overrideMetadata:!0},!0===i.calculated&&i.formula!==j&&t.push("calculated","createable","editable","formula"),!1===i.createable&&t.push("createable"),!1===i.editable&&t.push("editable"),K(e)?t.push("picklistEntries"):X(e)?t.push("precision","scale"):e===_?t.push("digits"):-1!==E.inArray(e,[M,L,"STRING",n,"ANYTYPE"])?t.push("length"):e===N&&t.push("isNamePointing","relationshipName","referenceTo","rel","ref"),E.each(t,function(e,t){var n=i[t];n!==j&&(r[t]=E.isArray(n)?E.extend(!0,[],n):n)})),r},sync:function(e){return Te([this],e)},getMoreData:function(e,t){return xe([this],e,t)},loadNextOffsetPage:function(e,t){return this.canRetrieveMoreRows&&!this.isProcessing?this.getMoreData(function(){e&&e()},t):E.when().then(function(){e&&e()})},loadAllRemainingRecords:function(){var s,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},l=this,n=t.isAction,e=t.batchSize,i=void 0===e?l.recordsLimit:e,r=t.stepCallback,c=t.finishCallback,u=t.dataSourceLimit;return function a(o){if(l.canRetrieveMoreRows){var e=l.data.length;return r&&r(e+1,e+i),t.batchSize?(l.offsetSize=e,l.recordsLimit=i):delete l.offsetSize,n?l.getMoreData(void 0,{notify:!1}).then(function(e){if(s){if(s.updatedRows)for(var t in s.updatedRows){var n=e.updatedRows[t],i=s.updatedRows[t];n&&n.length&&(s.updatedRows[t]=i.concat(n))}}else s=e;var r=!0;return u&&(r=u(l)),r?a(o):(c&&c(l.data.length),Y().resolve(s))}):l.loadNextOffsetPage(a,{notify:!1})}return c&&c(l.data.length),Y().resolve(s)}(l.recordsLimit)},getRecords:function(){var t=this;return E.map(t.data,function(e){return t.getRecordForRow(e)})},getRows:function(e,t){return Y().filterRowsByConditions(this.data,e,t,this)},getRawRows:function(){var t=this;return t.getRows.apply(t,arguments).map(function(e){return t.getRecordForRow(e).get()})},adoptRow:function(e,t){var n=this.adoptRows([e],t);return n&&n.length?n[0]:null},adoptRows:function(e,t){t||(t={});var r=this,n=r.data,a=r.dataMap,o=r.recordsMap,s=[],l=[],c=0<n.length,i=!!t.doAppend;if(E.each(e,function(e,t){var n=r.getRowId(t),i=c&&n&&r.getRowById(n);i?E.extend(i,t):(i={},i=E.extend(!0,i,t),l.push(i),a[n]=i,o[n]=new Le(r,i,n)),s.push(i)}),l.length)if(c)if(i)ae(n,l);else{var u=n.splice(0,n.length);ae(n,l),ae(n,u)}else ae(n,l);return!1!==t.evaluateFormulaFields&&r.evaluateFormulaFields({preventTrackChanges:!0,updatedRows:s}),!1!==t.notify&&r.notifyEditorsOfDataRefresh(),s},abandonRow:function(e){return this.abandonRows([e]),e},abandonRows:function(e,t){var o=this,s=o.changes,l=o.originals,c=o.registeredItemsByRow,u=o.registeredFieldsByRowThenField,i=[],d=!(t&&!1===t.notify);if(e&&e.length)return E.each(e,function(e,t){var n=o._findRow(t);n&&i.push(n)}),i.length&&E.each(i,function(e,t){var n=o.getRowId(t),i=E.inArray(t,o.data),r=!!s&&s[n],a=!!l&&l[n];r&&delete s[n],a&&delete l[n],-1!=i&&(o.data.splice(i,1),delete o.dataMap[n],delete o.recordsMap[n]),d||o.registeredLists&&E.each(o.registeredLists,function(){this.handleRowDeletion&&this.handleRowDeletion(n)}),n in c&&(E.each(c[n],function(){o.unregisterItem(this)}),delete c[n]),n in u&&(E.each(u[n],function(e,t){t.length&&E.each(t,function(){o.unregisterField(this)})}),delete u[n])}),0===Z(o.changes)&&o.setHasChanged(!1),d&&o.notifyEditorsOfDataRefresh(),e},_customSortData:function(e){var n=this,t=E.map(n.data,function(e){return e});t=t.sort(e),n.data.length=0,E.each(t,function(e,t){n.data[e]=t}),n.notifyEditorsOfDataRefresh()},sortData:function(s){var n=this,e=function(){var o=E.map(s,function(e){return{name:e.name,func:function(n){var i=function(e,t){return Y().isString(e)&&Y().isString(t)&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t?0:e&&J(t)?n?1:-1:t&&J(e)?n?-1:1:e<t?-1:1};return n?function(e,t){return-1*i(e,t)}:i}(e.desc)}});return function(e,t){for(var n,i,r,a=0;a<s.length&&(i=0)===(i=-1<(n=(r=o[a]).name).indexOf(".")?r.func(Y().getObjectProperty(e,n),Y().getObjectProperty(t,n)):r.func(e[n],t[n]));a++);return i}},t=E.map(n.data,function(e){return e}),i=n._clientData&&E.map(n._clientData,function(e){return e});n.originalOrderSaved||(n.originalDataOrder=E.map(this.data,function(e){return e})),n.originalOrderSaved=!0,s&&s.length?(t=t.sort(e()),i&&(i=i.sort(e())),t=t.sort(e())):n.originalOrderSaved&&(t=n.originalDataOrder),n.data.length=0,E.each(t,function(e,t){n.data[e]=t}),i&&(n._clientData.length=0,E.each(i,function(e,t){n._clientData[e]=t})),n.notifyEditorsOfDataRefresh()},emptyData:function(){var n=this,e=n.data.slice(0);return n.data.length=0,n.changes={},n.originals={},n.setHasChanged(!1),n._invalidateDataIndices(),n.notifyEditorsOfDataRefresh(),E.each(n.registeredItemsByRow,function(e,t){E.each(t,function(){n.unregisterItem(this)})}),n.registeredItemsByRow={},E.each(n.registeredFieldsByRowThenField,function(e,t){E.each(t,function(e,t){E.each(t,function(){n.unregisterField(this)})})}),n.registeredFieldsByRowThenField={},e},abandonAllRows:function(){return this.emptyData()},record:function(e){var t=Y().isObject(e)?this.getRowId(e):e;return this.getRecordById(t)},getRecordById:function(e){return this.recordsMap[e]},applyAllConditionsToNewRow:function(s,l){var c=this;l.length&&E.each(l,function(e,t){if(!t.inactive&&t.field&&"blank"!==t.type){var n,i=c.getField(t.field),r=i?i.displaytype:null,a=t.operator||"=",o=c.getDataSourceType();if(i&&i.createable&&("="===a||"starts with"===a))if(c.updateConditionValue(t),n=t.value,"="===a&&r===N)o&&o.handleDefaultReferenceFieldValue&&o.handleDefaultReferenceFieldValue(s,t,c,i,l);else{if(n=ue(n,r),Y().startsWith(r,d)&&!n)return!0;c.updateRow(s,t.field,n)}}})},createRowAsync:function(e){var n=this;return E.when.all(E.map(n.fields,function(e){var t=n.getDataSourceType();return t&&t.loadDefaultValueMetadata?t.loadDefaultValueMetadata(e,n):E.Deferred().resolve().promise()})).then(function(){return n.createRow(e)})},createRow:function(e){e||(e={});var t,n,i=this,r=i.hasChanged,a={},o={},s=i.getDataSourceType(),l=[],c=e.additionalConditions;e.editModeForNewItems&&(o.editModeForNewItems=!0),i.setHasChanged(!0),n=(t=new Le(i,a).markNew()).id(),e.doAppend?i.data.push(a):i.data.unshift(a),i.dataMap&&(i.dataMap[n]=a),i.recordsMap&&(i.recordsMap[n]=t),"ignoreDefaults"in e!=!1&&!0===e.ignoreDefaults||(["conditions","uiOnlyConditions"].forEach(function(e){var t=i[e];t&&t.length&&t.forEach(function(e){l.push(e)})}),c&&c.length&&E.each(c,function(e,t){l.push(t)}),s&&s.coerceCreateRow&&s.coerceCreateRow(t,i,l),i.fields&&E.each(i.fields,function(e,t){t.createable&&i.getDefaultValue(t,i)&&i.updateRow(a,t.id,t.evaluatedDefaultValue,{preventSetActive:!0})}),i.applyAllConditionsToNewRow(a,l)),n in i.changes||(i.changes[n]={}),i.evaluateFormulaFields({updatedRows:[a],updates:i.changes[n]}),i.registeredLists&&E.each(i.registeredLists,function(){e.initiatorId&&this._GUID===e.initiatorId||this.handleNewRow(a,o)}),i.notifyEditorsOfChange({hadPriorChanges:r,changes:i.changes[n]});var u="row.created",d={modelId:i.id,model:i,rowId:n,row:a,initiatorId:e?e.initiatorId:null,event:u};return E.extend(d,o),i.publish(u,d),A(u,[d]),a},updateRow:function(){var e=new Be(this,arguments),t=this.updateRows(e.updates,e.options);return t&&t.length?t[0]:t},updateRows:function(e,S){var w,t,n,i,C=this,r=C.getDataSourceType(),a=C.hasChanged,o=[],I=Y().getObjectProperty,k=Y().hasObjectProperty,T=Y().setObjectProperty;return!!e&&(S||(S={}),S.preventTrackChanges||(S.preventTrackChanges=!1),J(t=S.notifyFields)&&(t=!0),J(n=S.notify)&&(n=!0),r.coerceUpdateRows&&r.coerceUpdateRows(C,e,S),E.each(e,function(p,h){var g,m,v=C.getRowById(p),y=C.isNewRow(v),b=!1;if(!v||!h)return!0;E.each(h,function(e,t){var n,i,r,a,o=C.getField(e),s=o&&o.displaytype,l=(!(o&&o.id&&Y().isString(o.id))||!!S._ignoreMetadata||(y?o.createable:o.editable))&&!S.preventTrackChanges,c=s===N,u=c&&!t,d=C.getDataSourceType(),f=c&&C.getReferenceFieldRelationshipName(e);if((C.getFieldValue(v,e,!0)===(r=s?ue(t,K(s)&&o.returnType?o.returnType:s):t)||r!=r)&&!S.alwaysAddChanges)return!0;c&&!u&&(n=d&&d.getReferenceFieldRelatedData&&d.getReferenceFieldRelatedData(o,r,v,C,h)),l&&(e&&(g||(w||(w={}),w[p]={},g=C.changes[p],w[p][x]=!!g,g||(g=C.changes[p]={})),a=r,C.isRelationshipField(e)&&(i=C.getReferenceFieldNameFromRelationshipField(e),k(g,i)||T(g,i,E.extend(!0,{},I(v,i)))),T(g,e,a),T(w[p],e,a),f&&(u&&f!==e?delete g[f]:!0==c&&n&&(T(g,f,n),T(w[p],f,n)))),C.hasChanged||S.preventSetActive||C.setHasChanged(!0),y||(m||(m=C.originals[p])||(m=C.originals[p]={}),C.isRelationshipField(e)?k(m,e)||(i=C.getReferenceFieldNameFromRelationshipField(e),m.hasOwnProperty(i)||(m[i]=E.extend(!0,{},I(v,i))),T(m,e,C.getFieldValue(v,e,!0))):m.hasOwnProperty(e)||(T(m,e,C.getFieldValue(v,e,!0)),u&&f&&T(m,f,I(v,f))))),T(v,e,r),f&&(u&&f&&f!==e?delete v[f]:!0==c&&n&&T(v,f,n)),b=!0}),b&&o.push(v)}),w&&(i=!1,E.each(w,function(e,t){if(t&&1<Z(t))return!(i=!0)}),i&&(C.evaluateFormulaFields({updatedRows:o,updates:e,preventTrackChanges:S.preventTrackChangesSecondTime}),!1!==n&&C.notifyEditorsOfChange({hadPriorChanges:a,changes:w}),!1!==t&&!1!==n&&(C.publish("update",w),C.notifyFieldsOfChange(w,{initiatorId:S.initiatorId,hadPriorChanges:a})))),o)},notifyFieldsOfChange:function(e,a){var o=this,s=o.registeredFieldsByRowThenField;a=a||{},E.each(e,function(n,e){var t=e[x];delete e[x],E.each(e,function(e,t){n in s&&e in s[n]&&E.each(s[n][e],function(){a.initiatorId&&this._GUID===a.initiatorId||this.handleChange&&this.handleChange(t,e)})});var i="row.updated",r={event:i,modelId:o.id,model:o,rowId:n,row:o.getRowById(n),updates:e,rowHadPriorChanges:t,modelHadPriorChanges:a.hadPriorChanges,initiatorId:a?a.initiatorId:null};o.publish(i,r),A(i,[r])})},_findRow:function(e){var t,n=void 0===e?"undefined":We(e);return"object"===n?e:((t=this.getRowById(e))||n!==g||(t=this.data[e]),t)},deleteRows:function(e,a){a||(a={});var o=this,s={},n=o.hasChanged,l=!1!==a.notify,i="row.deleted";return e||(e=o.data),e.length&&(o.setHasChanged(!0),E.each(e,function(e,t){if(t=o._findRow(t)){var n=o.getRowId(t),i=o.changes[n],r=o.record(n);i||(o.changes[n]={},i=o.changes[n]),r.markForDeletion(),r.isNew()||o.originals[n]||(o.originals[n]={},o.originals[n]),n in o.registeredItemsByRow&&E.each(o.registeredItemsByRow[n],function(){a&&a.initiatorId&&this._GUID===a.initiatorId||this.handleMarkRowForDeletion&&this.handleMarkRowForDeletion(t)}),l&&(s[n]={},s[n][w]=!0,s[n][C]=!1)}}),l&&(o.notifyEditorsOfChange({hadPriorChanges:n,changes:s}),E.each(s,function(e){var t={event:i,model:o,modelId:o.id,rowId:e,row:o.getRowById(e),initiatorId:a?a.initiatorId:null,modelHadPriorChanges:n};o.publish(i,t),A(i,[t])}))),o},deleteRow:function(e,t){return this.deleteRows([e],t),this},undeleteRows:function(e,i){i||(i={});var r=this,a={},n=r.hasChanged,o=!1!==i.notify,s="row.undeleted";e||(e=r.data),e.length&&(r.setHasChanged(!0),E.each(e,function(e,t){if(t=r._findRow(t)){var n=r.getRowId(t);r.record(n).unmarkForDeletion(),n in r.registeredItemsByRow&&E.each(r.registeredItemsByRow[n],function(){i.initiatorId&&this._GUID===i.initiatorId||this.handleUnmarkRowForDeletion&&this.handleUnmarkRowForDeletion(t)}),o&&(a[n]={},a[n][w]=!1,a[n][C]=!0)}}),o&&(r.notifyEditorsOfChange({hadPriorChanges:n,changes:a}),E.each(a,function(e){var t={event:s,modelId:r.id,model:r,rowId:e,row:r.getRowById(e),initiatorId:i?i.initiatorId:null,modelHadPriorChanges:n};r.publish(s,t),A(s,[t])})))},undeleteRow:function(e,t){return this.undeleteRows([e],t)},removeRowById:function(e){if(e||0===e)return this.abandonRow(this.getRowById(e))},validateRequiredFields:function(){var e=[];return E.each(this.registeredLists,function(){e=e.concat(this.validateRequiredFields())}),e},getNewId:function(){var e=this.getDataSource();return e&&e.getNewId?e.getNewId():he()},save:function(e){return we([this],e)},cancel:function(e){return Ce([this],e),this},notifyEditorsOfChange:function(e){this.registeredEditors&&E.each(this.registeredEditors,function(){this.handleChange&&this.handleChange(e)})},getConditionCookieName:function(e){return ee(this,e)},setCondition:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];if(e){var i,r=!1,a="condition.valueChanged",o={event:a,conditionName:e.name,modelId:this.id,model:this,newValue:"",newValues:[],oldValue:"",oldValues:[]},s=n&&(!0===n||n.remember),l=n&&n.initiatorId||void 0;e.inactive=!1,"modelmerge"===e.type&&(e.type="fieldvalue"),te(e.operator)&&(J(t)||(E.isArray(t)?(r=!0,e.values=t):Q(t)&&-1!=t.indexOf(";")?e.values=t.split(";"):e.values=[t]),o.newValues=e.values),r||(e.value=t,o.newValue=t),(i=e.originalValue)instanceof Array?(o.oldValue="",o.oldValues=i):(o.oldValue=i,o.oldValues=[]),s&&e.name&&this.getPersonalizationService().setCondition({name:e.name,value:t,initiatorId:l}),this.publish(a,o),A(a,[o])}},deactivateCondition:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(e){var n,i="condition.deactivated",r=t&&(!0===t||t.remember),a=t&&t.initiatorId||void 0;return e.inactive=!0,e.value=e.originalValue,te(e.operator)&&(e.originalValue?-1!=e.originalValue.indexOf(";")?e.values=e.originalValue.split(";"):e.values=[e.originalValue]:e.values&&e.values.length||(e.values=[])),r&&e.name&&this.getPersonalizationService().setCondition({name:e.name,value:"-off-",initiatorId:a}),n={event:i,conditionName:e.name,modelId:this.id,model:this},this.publish(i,n),A(i,[n]),this}},deactivateFilterableConditions:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],n=e&&(!0===e||e.remember),i=e&&e.initiatorId||void 0,r=this;r&&r.conditions&&r.conditions.length&&E.each(r.conditions,function(e,t){r.isFilterableCondition(t)&&r.deactivateCondition(t,{remember:n,initiatorId:i})})},isFilterableCondition:function(e){return e.state&&-1!==e.state.indexOf("filter")},activateCondition:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(e){var n,i="condition.activated",r=t&&(!0===t||t.remember),a=t&&t.initiatorId||void 0;return e.inactive=!1,r&&e.name&&this.getPersonalizationService().setCondition({name:e.name,value:"-on-",initiatorId:a}),n={event:i,conditionName:e.name,modelId:this.id,model:this},this.publish(i,n),A(i,[n]),this}},resetCondition:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(e){var n=e.originalValue||"",i="condition.reset",r=t&&(!0===t||t.remember),a={event:i,conditionName:e.name,modelId:this.id,model:this,newValue:"",newValues:[],oldValue:"",oldValues:[],isActive:!e.inactive,wasActive:!e.originalInactive};return e.inactive=e.originalInactive,e.value=e.originalValue,te(e.operator)&&(e.originalValue?-1!=e.originalValue.indexOf(";")?e.values=e.originalValue.split(";"):e.values=[e.originalValue]:e.values=[],a.newValues=e.values),te(e.operator)?(a.oldValue="",a.oldValues=n.split(";")):(a.oldValue=n,a.oldValues=[]),r&&e.name&&this.getPersonalizationService().resetCondition({name:e.name}),this.publish(i,a),A(i,[a]),this}},getConditionValueResult:function(e){var t,n,i,r,a,o=e.noValueBehavior||(-1!==E.inArray(e.type,["param","multiple"])?"":"deactivate"),s={},l=Y().startsWith(e.state,"filterable")&&e.name,c=e.value;return"userinfo"===e.type?r=Y().getUserInfoPropValue(e.userInfoType):"modelmerge"===e.type?(t=(n=Se(e.model)).getFirstRow())&&(r=n.getFieldValue(t,e.mergeField,!0)):"blank"===e.type?r=null:"param"===e.type?(i=R.page.getParameters(this&&this.getParentPageId()),a=e.valueParamName,Q(c)&&(c in i?r=i[e.valueParamName=c]:c.toLowerCase()in i&&(e.valueParamName=c.toLowerCase(),r=i[e.valueParamName])),J(r)&&a&&a in i&&(r=i[a])):r=e.value,l&&(void 0===c?"undefined":We(c))!==h&&c!==r&&(r=c),r||!1===r||0===r||null===r?s.value=e.value=r:e.values&&e.values.length?s.values=e.values:"noquery"===o?(this&&(this.doQuery=!1),s.status="noquery"):"deactivate"===o?(e.originalInactive&&(e.originalInactive=e.inactive),e.inactive=!0,s.value=e.value=null,s.status="deactivate"):s.value=e.value="",s},getConditionValue:function(e){return this.getConditionValueResult(e).value},updateConditionValue:function(o){var t,e,n,i,r,a=o.type,s=o.locationSource,l=o.mergeField,c=o.latitudeField,u=o.longitudeField,d="modelmerge"===a,f="modelmerge"===s,p=o.row,h=this,g=h.getDataSource(),m=!1;if(e=(t=d&&l&&Se(o.model))&&t.data,l&&e&&(te(o.operator)?(i=o.values,o.values=E.map(e,function(e){return t.getFieldValue(e,l,!0)}),i&&i instanceof Array?i&&(i.length!==o.values.length?m=!0:i.length&&(r={},i.forEach(function(e){r[e]=1}),E.each(o.values,function(e,t){if(!r.hasOwnProperty(t))return!(m=!0)}))):m=!0):((!p||p<0||p>=e.length)&&(o.row=0),i=t.getFieldValue(e[o.row],l,!0),o.value!==i&&(o.value=i,m=!0))),(e=(t=f&&c&&u&&Se(o.locationModel))&&t.data)&&((!p||p<0||p>=e.length)&&(o.row=0),n=e&&e[o.row],i={lat:t.getFieldValue(n,c,!0),long:t.getFieldValue(n,u,!0)},o.latitudeValue===i.lat&&o.longitudeValue===i.long||(o.latitudeValue=i.lat,o.longitudeValue=i.long,m=!0)),!("userlocation"!==s||o.latitudeValue&&o.longitudeValue)){var v=o.locationDelta?parseInt(o.locationDelta,10):100;navigator.geolocation?(E.blockUI({message:"Determining your current location...",onOverlayClick:E.unblockUI}),navigator.geolocation[("false"===o.locationChangeBehavior?"getCurrent":"watch")+"Position"](function(e){E.unblockUI();var t,n,i=e.coords,r=i.latitude,a=i.longitude;t=o.latitudeValue,n=o.longitudeValue,h.isProcessing||t&&n&&!(t&&n&&function(e,t,n,i){var r=(n-e)*Math.PI/180,a=(i-t)*Math.PI/180,o=Math.sin(r/2)*Math.sin(r/2)+Math.cos(e*Math.PI/180)*Math.cos(n*Math.PI/180)*Math.sin(a/2)*Math.sin(a/2);return 2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))*6378.137*1e3}(r,a,t,n)>=v)||(o.latitudeValue=r,o.longitudeValue=a,m=r!==t||a!==n,h.updateData())},function(e){E.blockUI({message:"Unable to determine your current location: "+e.message,timeout:2e3}),"noquery"===o.locationNoValueBehavior?h.emptyData():(o.inactive=!0,h.updateData())},{enableHighAccuracy:!0,timeout:15e3,maximumAge:36e5})):E.blockUI({message:"Your browser does not support GeoLocation. Some features may not work.",timeout:2e3})}return!l||"userinfo"!==a&&"datasourceuserinfo"!==a||("userinfo"===a?o.value=Y().getUserInfoPropValue(l):"datasourceuserinfo"===a&&("in"===o.operator?o.values=g.getUserInfoProperty(l):o.value=g.getUserInfoProperty(l))),m},getDefaultValue:function(e,t){var n,i,r,a=e.defaultValue,o=e.defaultValues,s=J(a),l=e.displaytype,c=e.mergefield,u=t.getDataSourceType(),d=Se(e.model),f=d&&d.data,p=e.row,h=e.defaultvaluetype,g="fieldvalue"===h||J(h);if("modelmerge"===h&&c&&f&&f.length)null!==(r="MULTIPICKLIST"===e.displaytype?(n=[],E.each(f,function(e,t){n.push(d.getFieldValue(t,c,!0))}),n.join(";")):((!p||p<0||p>=f.length)&&(e.row=0),d.getFieldValue(f[e.row],c,!0)))&&(i=r);else if(u&&u.coerceDefaultValue){var m=u.coerceDefaultValue(e,t);m&&(i=m)}return l===v&&!i&&g&&s?i=Y().rfc4122v4GUID():!g||!J(i)||s||Q(a)&&!a?"datasourceuserinfo"!==h||J(e.userinfotype)?"userinfo"!==h||J(e.userinfotype)?"param"!==h||s?"multiple"===h&&!J(o)&&o.length&&(i=o.join(";")):i=R.page.getParameter(a,t.getParentPageId()):i=Y().getUserInfoPropValue(e.userinfotype):i=t.getDataSource().getUserInfoProperty(e.userinfotype):i=a,e.evaluatedDefaultValue=i,!J(e.evaluatedDefaultValue)},registerEditor:function(e){de(e,this.registeredEditors)},unregisterEditor:function(e){fe(e,this.registeredEditors)},registerList:function(e){de(e,this.registeredLists)},unregisterList:function(e){fe(e,this.registeredLists)},registerItem:function(e){de(e,this.registeredItems);var t,n=this.registeredItemsByRow,i=e.row;n&&i&&((t=this.getRowId(i))in n||(n[t]={}),n[t][e._GUID]=e)},unregisterItem:function(e){fe(e,this.registeredItems);var t=this.registeredItemsByRow,n=e?e.row:0,i=n?this.getRowId(n):0,r=t[i];t&&r&&e._GUID in r&&(delete r[e._GUID],Z(r)||delete t[i])},registerField:function(e,t){de(e,this.registeredFields);var n=this.registeredFieldsByRowThenField,i=t||e.id,r=e.row,a=r?this.getRowId(r):0;if(n&&r&&i&&a){a in n||(n[a]={});var o=n[a];i in o||(o[i]={}),o[i][e._GUID]=e}},unregisterField:function(e,t){if((void 0===e?"undefined":We(e))===m&&(e=this.registeredFields[e]),e){fe(e,this.registeredFields);var n,i,r=this.registeredFieldsByRowThenField,a=[],o=e._GUID,s=e.row,l=s?this.getRowId(s):0;r&&l&&(n=r[l])&&(t&&t.length&&E.each(t,function(){a.push(this)}),e.id&&a.push(e.id),E.each(a,function(e,t){(i=n[t])&&o in i&&(delete i[o],Z(i)||delete n[t])}),Z(n)||delete r[l])}},mergeRow:function(e,t,n){return Y().merge("row",t,n,this,e)},getRowMergeResult:function(e,t,n){return Y().getMergeResult("row",t,n,this,e)},mergeModel:function(e,t){return Y().merge("model",e,t,this)},getMergeResult:function(e,t){return Y().getMergeResult("model",e,t,this)},getOrderObject:function(e){var u=this,t="client"===e,n="server"===e,i=(u.orderByClause||"").split(","),r=(u.orderByClauseClient||"").split(","),d=[],f={},a=function(e,t){var n=E.trim(e);if(n){var i,r,a,o,s=n.split(" "),l=s[0],c={suffix:1<s.length?s.slice(1).join(" "):"ASC NULLS LAST"};-1!==l.indexOf("(")?(o=l.split("("),a=o[0],i=o[1].split(")")[0],c.fieldId=i,a&&(c.fieldFunction=a),E.each(u.fields,function(){if(this.name&&this.id===i&&this.function===a)return r=this.name,!1}),r&&(c.fieldName=r)):u.isAggregate?(i=l,E.each(u.fields,function(){if(this.name&&this.id===i)return r=this.name,!1}),c.fieldId=i,r&&(c.fieldName=r)):(c.fieldId=l,r=l),c.onClient=t,f[r]||(d.push(c),f[r]=c)}};return n||E.each(r,function(){a(this,!0)}),t||E.each(i,function(){a(this,!1)}),new Ve(d,f)},toggleOrdering:function(e,t,n){var i=this,r=(t=t||{}).clientSide,a=i.getOrderObject(r?"client":"server"),o="",s=Ge(e,i),l=He(e,s,i),c=a.map[l],u=t.explicitOrder||"toggle",d="toggle"===u,f=!1!==t.shouldQuery,p=!1!==t.shouldUpdatePersonalization,h=c&&-1!=c.suffix.toLowerCase().indexOf("asc"),g=c&&-1!=c.suffix.toLowerCase().indexOf("desc");if(function(e,t){var n=t.map[e];return!!n&&-1!==E.inArray(n,t.list)}(l,a)&&function(e,t){var n=t.map[e];if(n){var i=E.inArray(n,t.list);-1!=i&&t.list.splice(i,1),e in t.map&&delete t.map[e]}}(l,a),c&&(o=function(e){return e.list.map(function(e){return re(e.fieldId,e.fieldFunction)+" "+e.suffix}).join(",")}(a)),d?c?h?o=ze(e,c,i,"DESC",o):g&&(c=!1):(o=qe(e,i,"ASC"),(c=$e(e,i,"ASC")).onClient=r):c||"clear"===u?"clear"!==u?o=ze(e,c,i,u,o):c=!1:(o=qe(e,i,u),c=$e(e,i,u)),o=(o=o.replace(/,+$/,"")).replace(/\s*,\s*/g,","),r){var m=i.orderByClauseClient,v=[];if(m=c?s+" "+c.suffix:"",E.each(a.list,function(e,t){t.fieldId!==s&&(m+=","+t.fieldId+" "+t.suffix)}),m){var y=m.split(",");E.each(y,function(e,t){t=t.split(" "),v.push({name:t[0],desc:"ASC"!==t[1]})})}i.orderByClauseClient=m,i.sortData(v),p&&i.getPersonalizationService().setOrderByClient({newValue:m}),n()}else i.orderByClause=o,f&&i.updateData(n,{neverCache:!0}),p&&i.getPersonalizationService().setOrderBy({newValue:o});return c},orderBy:function(e,t){var n,i=this.getOrderObject(),r=Q(e),a=r?e:e.id,o=r?e:e.name?e.name:a,s=r?null:e.function,l=this.getField(o),c="";return l.displaytype===N&&(o=re(a=Y().getFieldReference(a,l),s)),(n=i.map[o])?-1!=n.suffix.indexOf("ASC")?(c=re(a,s)+" DESC NULLS LAST",n.suffix="DESC NULLS LAST"):n=!1:(c=re(a,s)+" ASC NULLS LAST",n={fieldId:a,fieldName:o,suffix:"ASC NULLS LAST"},s&&(n.fieldFunction=s)),c=c.replace(/,+$/,""),this.orderByClause=c,this.updateData(t,{neverCache:!0}),this.getPersonalizationService().setOrderBy({newValue:c}),n},getSearchableFields:function(){return this.fields.filter(Ae)},createSearchSubConditions:function(e,t,n,i){return Y().createSearchSubConditions(this,e,t,n,i)},buildSearchCondition:function(e,t,n,i){t=!!t&&E.trim(t),i||(i={}),e||(e="__default_searchbox");var r=i.remember||i.affectCookies||!1,a=i.initiatorId,o=t&&t.length>(i.useSOSLSearch?1:0),s=this.getConditionByName(e,!1),l=this.getDataSourceType(),c=!1!==l.prop("canFieldsBeIndividuallySearched"),u=l.prop("hasDefaultSearch"),d=i.processOnClient;return o?((c||u||d)&&(s||((s=new Ne).name=e,s.processOnClient=d,i.useSOSLSearch?s.type="search":s.type="group",this.addCondition(s))),c||d?(this.activateCondition(s,{remember:r,initiatorId:a}),i.useSOSLSearch?(s.fieldfunction=i.SOSLFields,i.tokenize?(s.value=E.map(t.split(i.delemiter||" "),function(e){return'"'+e+'*"'}).join(" AND "),s.values=t.split(i.delemiter||" ")):(s.value='"'+t+'*"',s.values=[t])):this.createSearchSubConditions(s,t,n,i)):s&&this.setCondition(s,t,{remember:r,initiatorId:a}),s&&"group"===s.type&&(s.value=t)):s&&(this.deactivateCondition(s,{remember:r,initiatorId:a}),s.subConditions=[],s.subConditionLogic="",s.value=""),s},prepareSearchConditions:function(e,t,n,i){this.buildSearchCondition(null,t,e.searchFields,i)},_invalidateDataIndices:function(){return this.dataMap={},this.recordsMap={},this},isRowMarkedForDeletion:function(e){var t,n=this._findRow(e);return!!n&&((t=this.getRecordForRow(n))&&t.isMoribund())},getRowId:function(e){var t=this.getRecordForRow(e);return t?t.id():Oe(e,this,!1)},getRowName:function(e){var t=this.getRecordForRow(e);return t?t.name():this.dataSource.getRowName(e,this)},getValueKeyPrefix:function(e){return this.dataSource.getValueKeyPrefix(e,this.objectName||"",this)},rowHasId:function(e){return!!this.getRowId(e)},getIdField:function(){return this.dataSource.getIdField(this)},getIdFieldForChildRelationship:function(e){return this.dataSource.getIdFieldForChildRelationship(this,e)},getKeyPrefix:function(){return this.dataSource.getKeyPrefix(this.objectName||"",this)},getDataSourceForReferenceField:function(e){var t=this.getField(e),n=this.dataSource;return t&&t.displaytype===N&&t.overrideMetadata&&t.dataSourceName!==n.name?R.dataSource.get(t.dataSourceName):n},getReferenceFieldNameFromRelationshipField:function(e){var t=this.getDataSourceType();return t&&t.getReferenceFieldNameFromRelationshipField?t.getReferenceFieldNameFromRelationshipField(e,this):e&&e.split(".")[0]},getReferenceFieldRelationshipName:function(e){return this.getDataSourceForReferenceField(e).getReferenceFieldRelationshipName(e,this)},getChildIdFromRow:function(e,t){var n=this.getDataSourceType();return n&&n.getChildIdFromRow?n.getChildIdFromRow(this,e,t):null},isRelationshipField:function(e){var t=this.getDataSourceType();return!(!t||!t.isRelationshipField)&&t.isRelationshipField(e)},getRowChanges:function(e){var t;return(e=this._findRow(e))&&(t=this.changes?this.changes[this.getRowId(e)]:null),t},getRowOriginals:function(e){var t;return(e=this._findRow(e))&&(t=this.originals?this.originals[this.getRowId(e)]:null),t},isRowChanged:function(e){var t;return!!(e=this._findRow(e))&&(t=this.getRowId(e),this.getRowById(t)&&t in this.changes)},doesRowHaveUnsavedChanges:function(e){return this.isRowChanged(e)},isRowNew:function(e){var t,n=this._findRow(e);return!!n&&((t=this.getRecordForRow(n))&&t.isNew())},isNewRow:function(e){return this.isRowNew(e)},isRowUnsavedClone:function(e){return function(e,t){var n,i=t._findRow(e);return i&&(n=t.getRecordForRow(i)),!!n&&n.isClone()}(e=this._findRow(e),this)},cancelRowChanges:function(t,e,n){if(n||(n={}),!t)throw"Row is required.";var i=this,r=i.getRowId(t),a=i.originals[r],o=i.changes[r],s={};return o&&(!e&&o?e=Object.keys(o):e&&Q(e)&&(e=[e]),e.forEach(function(e){a&&e in a?s[e]=a[e]:i.isNewRow(t)&&(s[e]=j)}),Z(s)&&(i.updateRow(t,s,{initiatorId:n.initiatorId}),Z(o)||delete i.changes[r],Z(a)||delete i.originals[r],Z(i.changes)||i.setHasChanged(!1))),i},getPersonalizationService:function(){var e="_personalizationService",t=this[e];return t||(t=this[e]=R.personalization.createModelService(this)),t},notifyEditorsOfDataRefresh:function(e){!function(n,i){i||(i={});var r={};E.each(n,function(e,t){t.registeredFields&&E.each(t.registeredFields,function(){t.unregisterField(this)}),t.registeredItems&&E.each(t.registeredItems,function(){this.destroy()}),t.registeredLists&&E.each(t.registeredLists,function(){this.render({doNotCache:!0})}),t.registeredEditors&&E.each(t.registeredEditors,function(e,t){t._GUID in r||(r[t._GUID]=t)})}),E.each(r,function(e,t){t.handleDataRefresh&&t.handleDataRefresh({updatedModels:n})});var a={},e=B+"loaded",t={event:e,models:a,initiatorId:i.initiatorId};E.each(n,function(e,t){(a[t.id]=t).publish("loaded",{modelId:t.id,model:t,initiatorId:i.initiatorId})}),A(e,[t])}([this],e)},exportData:function(e){e||(e={});var t=new Date,n=(e.fileName||this.id+"-export-"+t.getTime())+".csv",i=this.makeCSVFromModelData(e),r=R.utils.inPlatform(a.LIGHTNING)?"application/octet-stream":"text/csv";return Y().downloadStringAsFile(i,n,r)},makeCSVFromModelData:function(e){var s=this,t=s.getIdField(),n=s.isAggregate,i=e.additionalConditions||!1,r=e.rows||s.data,a=(e.fields||s.fields).slice(0),o=r.length,l=a.length,c=e.useAPINamesForHeaders||!1,u=e.doNotAppendRowIdColumn||!1,d=!n&&!u,f="";if(0<l&&0<o){var p={},h=[];E.each(a,function(e,t){t.name?p[t.name]=t:t.id&&(p[t.id]=t)}),d&&t&&t in p&&(d=!1),d&&t&&(d=0<(E.isArray(t)?t:[t]).filter(function(e){return!(e in p)}).length),E.each(a,function(e,t){if(t.displaytype&&t.displaytype===N){var n=t.name?t.name:t.id,i=Y().getFieldReference(n,t);if(!(i in p)&&i in s.fieldsMap){var r=s.getField(i);c||(r.label=Y().mergeAsTextInContext(t.label+": "+r.label,{model:s})),h.push({atIndex:e+1,id:i,field:r})}}}),h.length&&E.each(h,function(e,t){a.splice(t.atIndex,0,t.field),l++}),d&&t&&E.each(E.isArray(t)?t:[t],function(e,t){if(t in p)return!0;s.getField(t)?a.push(s.getField(t)):a.push({id:t,name:t,label:t}),l++}),a.forEach(function(e,t){var n=c?e.name?e.name:e.id:Y().mergeAsTextInContext(e.label,{model:s});f+=Y().escapeCSVCell(n)+(t<l-1?",":"\r\n")}),r.forEach(function(o){var e=!0;i&&i.length&&(e=Y().doesRowMeetConditions(o,i)),e&&a.forEach(function(e,t){var n,i=e.name?e.name:e.id,r=e.template,a=e.type===V;a&&r&&(r="{{#"+i+".records}}"+e.template+",{{/"+i+".records}}"),n=s.getFieldValue(o,i,!0),a||!n&&0!==n&&!1!==n?s.getField(i)&&!a||!r?n="":(n=s.mergeRow(o,r).text(),a&&n&&(n=n.substring(0,n.length-1))):n=""+n,f+=""===n?n:Y().escapeCSVCell(n),f+=t<l-1?",":"\r\n"})})}return f},getSOQL:function(){return this.getQuery()},getQuery:function(){return this.lastQueryString||this.soql},getLastQueryDuration:function(){return this.lastQueryDuration},getConditionsWithDependencies:function(n){var i=[],e=this.conditions;return e&&e.length&&e.forEach(function(e){var t=e.subConditions;("modelmerge"!==e.type||n&&e.model!==n.id)&&("modelmerge"!==e.locationSource||n&&e.locationModel!==n.id)?"join"===e.type&&t&&t.length&&t.forEach(function(e){("modelmerge"!==e.type||n&&e.model!==n.id)&&("modelmerge"!==e.locationSource||n&&e.locationModel!==n.id)||i.push(e)}):i.push(e)}),i},getDependentConditions:function(){var i=this,r={};return E.each(e.list(),function(e,t){if(i!==t){var n=t.getConditionsWithDependencies(i);n&&n.length&&(r[t.id]=n)}}),r},updateDataSourceUserInfoConditions:function(){var n=this;function i(e){var t=e.subConditions;"datasourceuserinfo"===e.type?n.updateConditionValue(e):t&&t.length&&t.forEach(i)}return[n.conditions,n.havings,n.uiOnlyConditions].forEach(function(e){e&&e.length&&e.forEach(i)}),n},getConditionByName:function(e,t){var n,i,r,a,o=[],s=Array.prototype.push;if(E.each([this.conditions,this.havings,this.uiOnlyConditions],function(e,t){t&&t.length&&s.apply(o,t)}),o.length)for(r=0;r<o.length;r++){if((n=o[r]).name===e)return n;if(t&&n.subConditions&&n.subConditions.length)for(a=0;a<n.subConditions.length;a++)if((i=n.subConditions[a]).name===e)return i}return!1},hasCondition:function(e){return!1!==this.getConditionByName(e,!0)},addCondition:function(e,t){var n,i;return!e||e instanceof Ne||(e=new Ne(e)),this.conditions.push(e),!1!==this.getDataSourceType().prop("initializeConditionLogic")&&(t&&"or"==t.toLowerCase()||(t="AND"),n="("+this.conditions.length+")",this.conditionLogic&&""!==this.conditionLogic?(i="and"===t.toLowerCase()&&-1===this.conditionLogic.toLowerCase().indexOf("or"),this.conditionLogic=(i?"":"(")+this.conditionLogic+(i?"":")")+t+n):this.conditionLogic=n),e},initialize:function(e){return pe(this,e),this},register:function(e){return(I[e||this.id]=this).registerKeyPrefix(),T[this.getFullyQualifiedId()]=this},registerKeyPrefix:function(){var e,t=this.keyPrefix;t&&((e=k[t])||(e=k[t]=[]),-1===E.inArray(e,this)&&e.push(this))},unregister:function(){var e,n=this,t=n.id,i=n.getFullyQualifiedId(),r=k[n.keyPrefix];return[o,l].forEach(function(e){var t=n[e];t&&t.length&&(t.forEach(function(e){e.unsubscribe()}),n[e].length=0)}),I[t]===n&&delete I[t],T[i]===n&&delete T[i],r&&-1!==(e=E.inArray(n,r))&&(r.splice(e,1),r.length||delete k[n.keyPrefix]),n},evaluateFormulaField:function(e,t){Q(t)&&(t=this.getField(t));var n,i,r=t.__compiledFormula,a={model:this,row:e},o={outputType:t.displaytype};return r||(n=(r=t.__compiledFormula=new R.formula.CompiledFormula(t.formula||"")).__error)&&(i=n.location.start,this.getParentPage().addProblem('Syntax error in formula field "'+t.id+'" at line '+i.line+", column "+i.column+": "+n.message+".")),r.evaluate(a,o)},evaluateFormulaFields:function(e){e||(e={});var t,s,l=this,i={},n=e.updatedRows||l.getRows(),r=e.preventTrackChanges;return n.length&&(t={_ignoreMetadata:!0},r&&(t.notify=!1),s={},l.fields&&E.each(l.fields,function(e,o){o.calculated&&o.uiOnly&&(i[o.id]=o,E.each(n,function(e,t){var n=l.getRowId(t),i=s[n],r=l.getFieldValue(t,o.id,!0),a=l.evaluateFormulaField(t,o);(Y().isDate(r)&&Y().isDate(a)?r.getTime()!==a.getTime():r!==a)&&(i||(i=s[n]={}),i[o.id]=a)}))}),Z(s)&&(t.preventTrackChangesSecondTime=r,l.updateRows(s,t),r&&(E.each(s,function(e){var t=l.changes[e],n=l.originals[e];t&&(E.each(t,function(e){e in i&&delete t[e]}),Z(t)||delete l.changes[e]),n&&(E.each(n,function(e){e in i&&delete n[e]}),Z(n)||delete l.originals[e])}),Z(l.changes)||l.setHasChanged(!1)))),l},_cloneRowsIfNeeded:function(e){var t,n,o,s=this,l=!1;if(!s.isAggregate&&(J(e)&&(e=s.getParentPage()||R.component.getByType("skuidpage")[0]),!0===s.doClone?l=!0:!1!==s.doClone&&(n=R.page.getParameters(e),o=n.id,!J(n.clone)&&o&&s.conditions.length&&E.each(s.conditions,function(e,t){if(("param"===t.type||"fieldvalue"===t.type)&&t.value===o)return s.doClone=l=!0,!1;if("modelmerge"===t.type&&t.model){var n=Se(t.model),i=n&&n.getFirstRow(),r=i?n.getRowId(i):null,a=n?n.realToFakeIdMap:null;if(i&&(r===o||a&&a[o]===r))return s.doClone=l=!0,!1}})),l&&s.data&&s.data.length)){s._invalidateDataIndices(),s.realToFakeIdMap||(s.realToFakeIdMap={}),s.data.forEach(function(e){var t=s.getRowId(e),n=s.realToFakeIdMap[t]="clone_"+$++,i=s.getRecordForRow(e);i?i.setId(n):i=new Le(s,e,n),i.markNew().markCloned(),s.getDataSourceType().name===F&&(e.Id=n)}),s._generateDataIndices();var c={};s.conditions&&E.each(s.conditions,function(e,t){var n=t.field,i=t.value,r=s.getField(n);if(r&&r.createable&&(-1!==n.indexOf(".")||!i&&!1!==i&&0!==i||E.each(s.data,function(e,t){n in t||(t[n]=i)}),r.displaytype===N&&"modelmerge"===t.type&&t.model)){var a=Se(t.model);a&&a.realToFakeIdMap&&(c[n]=a)}}),s.fields&&E.each(s.fields,function(e,i){if(i.displaytype===N){var r=[];c[i.id]?r.push(c[i.id].realToFakeIdMap):E.each(i.referenceTo,function(e,t){var n=k[t.keyPrefix];n&&n.length&&E.each(n,function(e,t){t.realToFakeIdMap&&r.push(t.realToFakeIdMap)})}),r.length&&E.each(s.data,function(e,n){E.each(r,function(e,t){if(n[i.id]in t)return n[i.id]=t[n[i.id]],!1})})}}),t=function(){var t={},r=s.fields,e=s.data;e&&e.length&&r&&r.length&&E.each(e,function(e,n){var i={};E.each(r,function(e,t){i[t.id]=s.getFieldValue(n,t.id,!0)}),t[s.getRowId(n)]=i}),s.updateRows(t,{alwaysAddChanges:!0,notifyFields:!1})},!0===e.isRendered?t():e.element.one("pageload",function(){t()})}},_checkIfNeedDefaultRow:function(){if(this.data&&this.data.length<1&&!0===this.createRowIfNoneFound&&(!this.doQuery||this.doQuery&&this.lastLoadTime))return!0},_createDefaultRowIfNeeded:function(){var e="createRowIfNoneFound";if(this._checkIfNeedDefaultRow())return this[e]=!1,this.createRow();this[e]=!1},_createDefaultRowIfNeededAsync:function(){var e="createRowIfNoneFound";return this._checkIfNeedDefaultRow()?(this[e]=!1,this.createRowAsync()):(this[e]=!1,E.Deferred().resolve().promise())},_checkIfDefaultRowCreationNeedsToBeAsync:function(){var e=this.getDataSourceType();return!!this._checkIfNeedDefaultRow()&&(!(!e||!e.determineIfCreateRowNeedsMetadata)&&e.determineIfCreateRowNeedsMetadata(this))},getRecordForRow:function(e){if(!e)throw"No row provided";return e[G]},_generateDataIndices:function(){var r=this,a=r.dataMap,o=r.recordsMap,e=r.data,s=r.isAggregate,l=void 0;return a||(r.dataMap=a={}),o||(r.recordsMap=o={}),e&&e.length&&(r.isAggregate&&(l=Fe(r)),e.forEach(function(e){var t,n,i;t=Y().isString(e)?{value:e}:e,n=r.getRecordForRow(t),s&&(i=Pe(t,l)),n||(n=new Le(r,t,i)),i=n.id(),a[i]=t,o[i]=n})),r},storeSubscription:function(e){return this[l].push(e),this},publish:function(e,t,n){var i,r,a=n&&n.channel,o="model."+e,s=this.getParentPage(),l=this[b],c=Y().rfc4122v4GUID(),u={scope:y.MODEL,uniqueId:c},d={scope:y.PAGE,uniqueId:c},f={uniqueId:c};return J(t)&&(t={model:this,modelId:this.id}),i=E.isArray(t)?t:[t],r=n&&n.scope?n.scope:y.PAGE,f.scope=r,a&&[u,d,f].forEach(function(e){e.channel=a}),Y().setObjectProperty(this[S],e,t),l.publish(e,i,u),r!==y.MODEL&&(s&&s.publish(o,i,u),r!==y.SKUID&&r!==y.GLOBAL||A(o,i,f)),this},subscribe:function(e,t,n){var i,r={scope:y.MODEL};return n&&n.channel&&(r.channel=n.channel),i=this[b].subscribe(e,t,r),this.storeSubscription(i),i},countEventSubscribers:function(e){return this[b].count(e)},once:function(t,n,e){var i,r=E.Deferred(),a=this,o=a[S],s=!(e&&!1===e.cache),l=Y().getObjectProperty(o,t),c=this[b],u=function(e){n&&n(a,e),r.resolve(a,e)};return s&&l?u(l):(i=c.subscribeOnce(t,function(e){Y().setObjectProperty(o,t,e),u(e)}),this.storeSubscription(i)),r.promise()},subscribeOnce:function(e,t){return this.once(e,t,{cache:!1})},setHasChanged:function(e){this.hasChanged=e},fieldIsSearchableServerSide:Ae},E.extend(Ue,{cancel:Ce,getMoreData:xe,initialize:pe,load:Ie,register:function(e,t){var n;return(n=t instanceof Ue?t:new Ue(t)).register(e),n},save:we,sync:Te,unregister:function(e){var t;if(t=Q(e)?Se(e):e)return t.unregister(),t},update:ke}),E.extend(e,{Condition:Ne,Field:_e,Method:Me,Model:Ue,Record:Le,getModel:Se,getModelsByKeyPrefix:function(e){return k[e]},getModelsByName:be,getModelsByDataSource:function(i){var r={};return E.each(I,function(e,t){var n=t.dataSource&&t.dataSource.name;r[n]||(r[n]=[]),i&&i!==n||r[n].push(t)}),i!==j?r[i]:r},getModelList:ye,list:ye,map:be,getConditionCookieName:ee,getModelsList:ye,getNewId:he,isNewId:function(e){return!(Q(e)&&(15===e.length||18===e.length))},cancel:Ue.cancel,getMoreData:Ue.getMoreData,initializeModel:Ue.initialize,load:Ue.load,registerModel:Ue.register,save:Ue.save,sync:Ue.sync,unregisterModel:Ue.unregister,updateData:Ue.update}),Y().runningTests()&&E.extend(e,{unitTesting:{computeIdForRow:Oe}}),R.$M=Se}(skuid)},function(e,t,n){"use strict";var i,r,a,o,s,l,c;i=skuid,r="custom-props",a="custom-prop",o="id",s="value",l="type",(c=i.$).extend(i.model,{initializeCustomProperties:function(e,t){var n=function(e){var n={};return e.length&&c.each(e.children(a),function(e,t){t=c(t),n[t.attr(o)]=function(e){var t=e.attr(l).toUpperCase(),n=e.attr(s);return n?function(e,t){return"BOOLEAN"!==e?"NUMBER"!==e?t:1*t?1*t:0:"TRUE"===t.toUpperCase()}(t,n):n}(t)}),n}(function(e){return e.children(r)}(e));t._customProperties=n},getCustomPropertyValue:function(e,t){return e._customProperties&&e._customProperties[t]}})},function(e,t,n){"use strict";!function(w){var C=w.$,a=C.extend,e=w.ui={},I=w.utils,o=I.encodeHTML,r=I.decodeHTML,t=w.constants,k=t.DISPLAY_TYPES,T=t.FIELD_TYPES,x=k.DATETIME,s={},l=void 0;function n(){return"ontouchstart"in window||navigator.maxTouchPoints}function D(e){if(e&&e.length){var r=[];return e.children().each(function(){var e=C(this),t="false"!==e.attr("enclosevalueinquotes"),n={field:e.attr("field"),type:e.attr("type"),operator:e.attr("operator"),value:e.attr("value"),depfield:e.attr("depfield"),sourceParam:e.attr("sourceparam"),model:e.attr("model"),mergeField:e.attr("mergefield"),encloseValueInQuotes:t};if("multiple"==n.type){n.values=[];var i=e.children("values");i.length&&i.first().children("value").each(function(){var e=I.getXML(this);8<e.length?(e=I.decodeXML(e.substring(7,e.length-8)),n.values.push(I.adjustValueBasedOnQuotedness(e,t))):n.values.push("")})}else"userinfo"==n.type?n.mergeField=e.attr("userinfotype"):"param"===n.type?n.mergeField=e.attr("value"):"modelmerge"===n.type&&a(n,{mergeField:e.attr("mergefield"),mergeModel:e.attr("model"),noValueBehavior:e.attr("novaluebehavior")});r.push(n)}),r}}function c(e){return-1<e.indexOf("sk-webicon")}function u(e){var t="sk-webicon"===e.substring(0,10)?e.substring(11):e;return i(t.split(":")[0]),"#"+t}function i(n){var i="icons-svg-"+n+"-"+w.version.id,r=document.getElementById(i);if(r)return I.resolve(C(r));var e=s[n];return I.isPromise(e)?e:e=s[n]=w.platform.preloadIconSetDependencies(n).then(function(e){s[n]=!0;var t=void 0;return I.isString(e)?t=C(e):e.documentElement&&(t=C(e.documentElement)),t.find("symbol").attr("id",function(e,t){return n+":"+t}),r=C("<div>").prop("id",i).css("display","none").html(I.getXML(t)).insertBefore(C(document.body.childNodes[0])),I.resolve(r)}).catch(function(e){return delete s[n],I.reject(e)})}function d(e,t,s){function n(){sforce.console.openPrimaryTab(null,e,!0,r(t))}if(e){var l,i=C.Deferred();sforce.console.getPrimaryTabIds(function(e){!function i(e,r,a){var o={tabsProcessed:0};e&&(o.numTabs=e.length,o.numTabs?C.each(e,function(e,n){sforce.console.getPageInfo(n,function(e){if("resolved"!==a.state())if(e.success){var t=JSON.parse(e.pageInfo);t&&s&&s(t)?(l={id:n},r&&(l.parentTabId=r),a.resolve()):r?sforce.console.getSubtabIds(n,function(e){if(e.success&&e.ids&&e.ids.length){var t=C.Deferred();i(e.ids,!1,t),C.when(t).then(function(){++o.tabsProcessed===o.numTabs&&a.resolve()})}else++o.tabsProcessed===o.numTabs&&a.resolve()}):++o.tabsProcessed===o.numTabs&&a.resolve()}else++o.tabsProcessed===o.numTabs&&a.resolve()})}):a.resolve())}(e.ids,null,i)}),C.when(i).then(function(){if(l){var e=l.parentTabId?l.parentTabId:l.id;sforce.console.focusPrimaryTabById(e,function(e){e.success?l.parentTabId&&sforce.console.focusSubtabById(l.id,function(){}):n()})}else n()})}}function f(t,e){d("/"+t,e,function(e){return e&&(e.objectId===t||t&&18===t.length&&e.objectId===t.substring(0,15))})}a(e,{createFieldSet:function(e,r){r||(r={});var a=r.mode||"edit",o=C("<div>").addClass("nx-editor-contents nx-basicfieldeditor-section-body");return C.each(e,function(e,t){var n=C("<div>").addClass("nx-basicfieldeditor-item"),i=C("<div>").addClass("nx-basicfieldeditor-item-label").text(t.metadata.label).appendTo(n);t.mode=a,t.editable=t.metadata.editable,t.editor=r.editor,t.wrapperElement=n,t.labelElement=i,t.render(),n.append(t.element),o.append(n)}),o},createIcon:function(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=(n.webIconClass||"")+" "+(n.additionalClass||""),r=I.onPageBuilder();return l||(l=w.themeSettings.getAll()),t=l&&l.iconMappings,r&&w.component.getByType("pagebuilder")[0]&&(t=w.component.getByType("pagebuilder")[0].get("iconMappings")||{}),e=l&&t&&t[e]||e,n.isWebIcon||c(e)?'<i class="sk-webicon '+i+'" aria-label="'+((e=e.split("sk-webicon-").join("")).split(":")[1]||e).split(/[_-]/).join(" ")+'" role="img"><svg viewBox="0 0 24 24"><use xlink:href="'+u(e)+'"></use></svg></i>':'<i class="sk-icon '+e+" "+i+'" aria-label="'+(n.ariaLabel||e.split("sk-icon-").join(""))+'" role="img"></i>'},getFieldOptionsFromXML:function(e,t){var n,i,r,a,o=t.model,s=e.attr("id"),l=e.attr("name"),c=e.attr("type"),u=e.attr("valuehalign"),d=e.attr("placeholder"),f={additionalClass:t.layoutClass,allowHTML:"true"===e.attr("allowhtml"),editable:"true"!==e.attr("readonly"),fieldId:s,fieldName:l,maxDisplayCharacters:e.attr("maxdisplaycharacters"),displayRows:e.attr("displayrows"),mode:t.mode||"read",pageSize:e.attr("pagesize")||5,register:!0,renderAs:e.attr("renderAs"),showLengthCounter:"true"===e.attr("showlengthcounter"),type:c,fieldXML:e},p=o.getField(l||s);if(s&&!p)return!1;if(p&&(n=p.displaytype),c===k.CUSTOM?f.snippet=e.attr("snippet"):c===k.BUTTON?(f.editable=!1,f.text=e.children("text").first().text(),f.icon=e.attr("icon")):c===T.IMAGE&&(f.editable=!1,f.url=e.children("url").first().text(),f.alt=e.children("alt").first().text(),f.height=e.attr("height"),f.fill="true"===e.attr("fill")),u&&(f.valueHorizontalAlignment="right"),n===k.MULTIPICKLIST)f.maxSelected=e.attr("maxselected"),(i=e.attr("selectedlist"))&&(f.selectedList=parseInt(i,10));else if(-1!==C.inArray(n,[k.PICKLIST,k.REFERENCE]))f.addNoneOption="true"===e.attr("addnoneoption"),e.attr("nonelabel")&&(f.noneLabel=e.attr("nonelabel"));else if(-1!==C.inArray(n,[k.DOUBLE,k.CURRENCY,k.PERCENT]))f.decimalPlaces=e.attr("decimalplaces");else if(I.startsWith(n,k.DATE)){void 0!==(r=e.attr("monthpicker"))&&r&&(f.showMonthPicker="true"===r),void 0!==(a=e.attr("yearpicker"))&&a&&(f.showYearPicker="true"===a);var h=e.attr("showtodaybutton");void 0!==h&&h&&(f.showTodayButton="true"===h),f.showYearPicker&&(f.yearPickerRange=(e.attr("yearpickermin")||"c-10")+":"+(e.attr("yearpickermax")||"c+10")),n===x&&(f.minuteIncrement=parseInt(e.attr("minuteincrement")||"5",10))}if("REFERENCE"===n){f.optionsource=e.attr("optionsource"),f.optionmodel=e.attr("optionmodel"),f.template=e.attr("displaytemplate"),f.searchTemplate=e.attr("searchtemplate"),f.tokenizeSearch=e.attr("tokenizesearch"),f.delimiter=e.attr("delimiter");var g=[],m=D(e.children("filters")),v=e.children("searchfields").first(),y=v.children(),b=f.defaultOrdering="true"===v.attr("defaultordering"),S=v.attr("orderby");m&&m.length&&(f.filters=m,C.each(m,function(){"dependent"===this.type&&g.push(this.depfield)}),g.length&&(f.controllingFields=g)),f.useSOSLSearch="true"===v.attr("usesosl"),f.SOSLFields=v.attr("soslfields"),!b&&S&&(f.order=S),y.length&&(f.searchFields=[],f.returnFields=[],y.each(function(){var e,t,n=C(this),i=n.attr("return"),r=n.attr("show"),a=n.attr("query"),o=n.attr("field"),s=!1,l=!1;"true"===a&&f.searchFields.push({id:o,searchOperator:n.attr("operator")}),void 0!==i?"true"===i&&(s=!0,"true"===r&&(l=!0)):"true"===r&&(l=s=!0),s&&(e={id:o,showInSearchDialog:l},(t=n.children("label").first())&&t.length&&(e.label=w.utils.getXML(t[0])),f.returnFields.push(e))}))}return e.children("enableconditions")&&(f.enableConditionsXML=e.children("enableconditions")),e.children("actions").length&&(f.actionsXML=e.children("actions")),"true"===e.attr("required")&&(f.required=!0),d&&(t.row?f.placeholder=I.mergeAsText("row",d,{createFields:!0,registerFields:!1},o,t.row):f.placeholder=d),f},getFocusableElements:function(e){return e.querySelectorAll("button, [href], input, select, textarea, [tabindex]")},getIconURLFromHandle:u,getReferenceLookupModel:function(e,t,n,i,r){var a=e&&e.getDataSourceType(),o=a&&a.getReferenceHandler&&a.getReferenceHandler(),s=o&&o.coerceObjectName,l=e.getNameFields(n);i||(i=[]),s&&(n=s(n,e));var c=new w.model.Model({dataSource:e,id:"_TempModel_"+(new Date).getTime(),objectName:n,fields:i.map(function(e){return{id:e.id}}),doQuery:!0,doClone:!1,recordsLimit:50,orderByClause:l.join(", ")});return o&&o.processReferenceLookupModel(c,t,n),r&&!c.fields.find(function(e){return e.id===r})&&(c.idFields=[r],c.fields.push({id:r})),l&&l.length&&l.forEach(function(t){t&&!c.fields.find(function(e){return e.id===t})&&(c.fields.push({id:t}),c.nameField||(c.nameField=t))}),c.initialize(),c},hideStatus:function(e,t,n,i){e&&(t.text(n),0===i?e.hide():e.animate({opacity:"0"},i||500,function(){e.hide()}))},isTouchDevice:n,isWebIcon:c,openConsoleTabForField:function(e,t,n){var i=w.$M(t),r=i?i.registeredFields[e]:null;r&&"REFERENCE"===r.metadata.displaytype&&f(n,n||0===n?o(r.calculateReferenceText()):"")},openConsoleTabForNameField:function(e,t){var n=w.$M(r(t));f(e,n.getNameFieldValueForRow(n.getRowById(e)))},openConsoleTabForUrl:function(t,e){d(t,e,function(e){return e&&I.endsWith(e.url,t)})},openConsoleTabForRow:f,preloadIconSetDependencies:i,searchableDisplayTypes:{ID:1,STRING:1,TEXT:1,EMAIL:1,PICKLIST:1,MULTIPICKLIST:1,COMBOBOX:1,PHONE:1,URL:1,REFERENCE:1,TEXTAREA:1},setStatus:function(e,t,n){e&&(e.css("opacity",1).show(),t.text(n))},_createLookupFiltersFromXML:D,_loadHammer:function(){w.mobile||!n()||e.hammerJSLoaded||I.loadJS(w.platform.getResourceUrl({ns:"skuid",path:"js/lib/hammer.js"})).done(function(){e.hammerJSLoaded=!0,w.events.publish("skuid.resources.hammerjsloaded")})}})}(skuid)},function(e,t,n){"use strict";!function(S){var w=S.$,t=w.extend,C=S.ui,b=S.utils,I="_ce_eventSubscriptions",r="_eventSubscriptions";function e(e,t,n,i){var r,a,o=this;if(o._GUID=b.generateGUID(),o.row=e,o.model=t,o.editor=n,o.options=i||{},o.doNotRender=o.options.doNotRender,o.subComponents=[],o.id=i.fieldId,o.name=i.fieldName,o.context=i.fieldContext,o.messages=[],o.id&&(o.metadata=t.getField(o.name?o.name:o.id,o.context)),r=o.metadata,o.options.labelText?o.label=o.options.labelText:o.options.label?o.label=o.options.label:r&&(o.label=r.label),o.options.required||r&&r.required?o.required=!0:o.required=!1,o.mode=i.mode||"read",o.element=w("<div>").addClass("nx-field").attr("data-uid",o._GUID),i.uniqueId&&o.element.attr("id",i.uniqueId),i.additionalClass&&o.element.addClass(i.additionalClass),o.element.data("object",o),o.editable=(!r||t.isRowNew(e)&&r.createable||r.editable)&&!1!==o.options.editable&&"readonly"!==o.mode,o.loading=i.loading,o.options.register&&t.registerField(o),a=i.controllingFields,r&&-1!==w.inArray(r.displaytype,["PICKLIST","MULTIPICKLIST","COMBOBOX"])){var s,l=r.controllingField,c=t.getField("RecordTypeId"),u=r.picklistSourceModel;a||(i.controllingFields=a=[]),c&&a.push(c.id),l&&a.push(l),"rowsinmodel"===r.picklistSource&&S.$M(u)&&["row.updated","row.created","row.deleted","row.undeleted","models.cancelled","models.loaded","models.saved"].forEach(function(e){o.subscribeToEvent(e,function(t){s!==t&&((s=t).modelId===u?o.render():t.models&&w.each(t.models,function(e,i){if(i.id===u)return t.insertResults&&w.each(t.insertResults,function(e,t){if(o.row[o.id]===t.oldId){var n={};n[o.id]=t.id,i.updateRow(o.row,n)}}),o.render(),!1}))})})}if(a&&a.length&&w.each(a,function(){var e=this;-1!==e.indexOf(".")&&(e=e.split(".")[0]),t.registerField(o,e)}),o.editable&&t.isRelationshipField(o.id)){var d=t.getReferenceFieldNameFromRelationshipField(o.id);t.fieldsMap.hasOwnProperty(d)&&t.registerField(o,d)}r&&"DATETIME"===r.displaytype&&o.subscribeToEvent("ui.timeZoneChanged",function(){o.render()})}t(e.prototype,{uid:function(){return this._GUID},register:function(e){return this.model&&this.model.registerField(this,e),this},subscribeToEvent:function(e,t){var n,i=this[r];return i||(i=this[r]=[]),n=S.events.subscribe(e,t),i.push(n),n},unregister:function(){var n=this,e=n.options,t=n._renderer;t&&(t.destroy&&t.destroy(n),delete n._renderer),n.model&&n.model.unregisterField(n,!!e&&e.controllingFields),[r,I].forEach(function(e){var t=n[e];t&&t.length&&t.forEach(function(e){S.events.unsubscribe(e)})})},calculateReferenceText:function(){return b.calculateReferenceText({model:this.model,row:this.row,template:this.options.template,fieldMetadata:this.metadata})},calculateReferenceMerges:function(e){return e||(e={}),b.calculateReferenceMerges(t(e,{model:this.model,row:this.row,template:this.options.template,fieldMetadata:this.metadata}))},getValidPicklistEntries:function(){var r=this,e=r.model.getDataSourceType(),t=r.metadata,a=t&&t.picklistEntries;return t?(e&&e.getValidPicklistEntriesSync&&(a=e.getValidPicklistEntriesSync(r)),t.deDupLabel&&w.each(r.row,function(n,i){r.metadata.id===n&&w.each(a,function(e,t){t.label===i&&(r.row[n]=t.value)})}),a):[]},getValidPicklistEntriesAccountingForDataSource:function(){var e=this,t=e.model.getDataSourceType();return t&&t.getValidPicklistEntries?t.getValidPicklistEntries(e):w.when().then(function(){return e.getValidPicklistEntries()})},addOrReplaceConditionsForLookupFiltersToModel:function(s){var l=this,c=[],e=!(!l.options||!l.options.filters)&&l.options.filters;return s||(s=l.model),e&&e.length&&w.each(e,function(e,t){var n,i,r=l.id+"_"+t.field+"_"+e,a=s.getConditionByName(r);if(a||((a=new S.model.Condition).name=r,s.addCondition(a)),a.field=t.field,a.operator=t.operator||"=",a.encloseValueInQuotes=t.encloseValueInQuotes,t.sourceParam&&(a.sourceParam=t.sourceParam),n=b.isMultiValueOperator(a.operator),"dependent"===t.type)void 0!==(i=l.model.getFieldValue(l.row,t.depfield,!0))&&(n?a.values=i&&-1!=i.indexOf(";")?i.split(";"):[i]:a.value=i),null===i||b.isUndefined(i)?(a.type="blank",a.value="null",a.encloseValueInQuotes=!1):a.type="fieldvalue";else if("userinfo"===t.type)delete a.type,a.value=b.getUserInfoPropValue(t.mergeField);else if("param"===t.type)void 0!==(i=S.page.params[t.mergeField])&&(n?a.values=i&&-1!=i.indexOf(";")?i.split(";"):[i]:a.value=i),a.type="fieldvalue";else if("modelmerge"===t.type){var o=S.model.getModel(t.mergeModel);if(o)n?(a.values=[],w.each(o.data,function(){a.values.push(o.getFieldValue(this,t.mergeField,!0))})):a.value=o.getFieldValue(o.getFirstRow(),t.mergeField,!0),delete a.type,a.model=t.mergeModel,!(void 0!==a.value&&null!==a.value||a.values&&a.values.length)&&"noquery"===t.noValueBehavior&&s&&(s.doQuery=!1),a.noValueBehavior=t.noValueBehavior}else a.type=t.type,t.values?a.values=t.values:a.value=t.value,t.mergeField&&(a.mergeField=t.mergeField,a.originalValue=null);c.push(a)}),c},_getUpdateRowOptions:function(){return"edit"===this.mode?{initiatorId:this._GUID}:{}},_toggleModified:function(){var e=this.element,t=this.model,n=this.row,i=t.getRowId(n),r=this.name?this.name:this.id,a=r?t.getFieldValue(n,r,!0):null,o=t.originals[i];return e.removeClass("nx-modified"),(o&&r&&r in o&&o[r]!==a||t.isRowNew(n)&&!t.isAggregate)&&e.addClass("nx-modified"),this},render:function(e){if(!this.doNotRender){var t,n,i,r=this,a=r.element,o=r.options,s=r.model,l=s.getDataSource().getFieldRenderers()||{},c=r.row,u=r.name?r.name:r.id,d=u?s.getFieldValue(c,u,!0):null,f=o.enableConditionsXML;if(a.empty(),r._toggleModified(),r.editable||(r.mode="readonly"),"edit"===r.mode&&r.required?a.addClass("required"):a.removeClass("required"),r.loading&&(r.mode="loading"),o&&"right"===o.valueHorizontalAlignment&&a.addClass("halignright"),r.metadata&&(i=r.metadata.displaytype),o.type&&(o.type in C.fieldRenderers||o.type in l)?t=C.getFieldRenderer(o.type,s.dataSource):i&&(i in C.fieldRenderers||i in l)&&(t=C.getFieldRenderer(i,s.dataSource)),n=r.mode,t||(t=C.getFieldRenderer("TEXT",s.dataSource)),!t||n in t||(n="read")in t||(t=C.getFieldRenderer("TEXT",s.dataSource)),(r._renderer=t)[n](r,d,e),f&&f.length&&f.children().length){var p,h=f.attr("message"),g="skuid__originalTooltip",m=o.valueHorizontalAlignment||"left",v=r[I];v?v.forEach(function(e){S.events.unsubscribe(e)}):v=r[I]=[],r.editor&&r.editor.element._columnsByGUID&&w.each(r.editor.element._columnsByGUID,function(){this.fieldId==r.id&&(this.disabled=!1)}),"edit"===r.mode&&b.conditionallyDo(function(){a.removeClass("disabled").find(":input").prop("disabled",!1).end().find("[sk-contenteditabledisabled=true]").attr("contenteditable","true").removeAttr("sk-contenteditabledisabled").end().find(".ui-button").button("enable").end().find(".ui-multiselect").animate({opacity:"1.0"},function(){w(this).css("opacity","")}).siblings("select").multiselect("enable"),a.attr("sk-ckeditorname")&&(S.CKEDITOR.instances[a.attr("sk-ckeditorname")].setReadOnly(!1),a.find(".sk-cke-hide").remove()),r._toggleModified(),r.labelElement&&r.labelElement.animate({color:"rgba(0,0,0,1)"}),h&&((p=a.data(g))&&"function"!=typeof p&&p!==h?(a.skootip(p),a.removeData(g)):a.tooltip("instance")&&a.tooltip("destroy")),y(!1),r.disabled=!1},function(){if(a.removeClass("nx-modified").addClass("disabled").find(":input").prop("disabled",!0).end().find(".ui-button").button("disable").end().find("[contenteditable=true]").attr("sk-contenteditabledisabled","true").removeAttr("contenteditable").end().find(".ui-multiselect").animate({opacity:"0.4"}).siblings("select").multiselect("disable"),a.attr("sk-ckeditorname")){var e=a.attr("sk-ckeditorname");S.CKEDITOR.instances[a.attr("sk-ckeditorname")].setReadOnly(!0),0===a.find(".sk-cke-hide").length&&a.append('<style class="sk-cke-hide">#cke_'+e+"{display:none!important;}</style>")}if(r.labelElement&&r.labelElement.animate({color:"rgba(0,0,0,0.3)"}),h){if(a.tooltip("instance")){var t=a.tooltip("option","content");t&&"function"!=typeof t&&t!==h&&a.data(g,t)}a.skootip(h,{position:{my:m+" bottom",at:m+" top-10"},open:function(e,t){var n=w("<div>").addClass("sk-hastooltip").css(m,"0px");t.tooltip.append(n)}})}y(!0),r.disabled=!0},f,null,{row:c,model:s,eventSubscriptions:v,renderOverride:o.renderOverride})}r.messages.length&&r.editor&&r.editor.options&&r.editor.options.showErrorsInline&&w.each(this.messages,function(e,t){r.renderMessage(t)})}function y(e){r.editor&&r.editor.element._columnSettingsByUID&&w.each(r.editor.element._columnSettingsByUID,function(){this.fieldId==r.id&&(this.disabled=e)})}},destroy:function(e){var t=this.element,n=this.options,i=n&&n.subscriptionElement,r=!e||!1!==e.removeDOM;t&&!t.jquery&&(t=w(t)),i&&b.removeEventSubscriptions(i),this.unregister(),t&&r&&t.remove()},handleUpdate:function(e,t){this.handleChange(e,t)},handleChange:function(e,t){var n=this,i=n.model,r=n.row,a=i.getDataSourceType(),o=n.id,s=n.options.controllingFields;if(s&&s.length&&t&&-1!==w.inArray(t,s)){var l,c=!1,u=n.metadata&&-1!==w.inArray(n.metadata.displaytype,["PICKLIST","MULTIPICKLIST","COMBOBOX"]),d=i.getFieldValue(r,o,!0),f=function(e){e&&w.each(e,function(e,t){if(d===t.value)return!(c=!0)}),c||i.updateRow(r,o,"",{initiatorId:n.uid()})};if(u&&a.getValidPicklistEntries)return a.getValidPicklistEntries(n).then(function(e){f(e),n.render()});u&&(l=n.getValidPicklistEntries()),f(l)}n.render()},handleMessage:function(e){this.messages.push(e),this.doNotRender?e.message=e.message?b.decodeHTML(e.message):"":this.editor&&this.editor.options&&this.editor.options.showErrorsInline&&this.renderMessage(e)},renderMessage:function(e){if(!this.doNotRender){this.errorElement||(this.errorElement=w("<div>"));var t=e.message;"REQUIRED_FIELD_MISSING"===e.status&&(t="This Field is Required"),this.editor.options.showErrorsOnHover?(this.element.children("input").addClass("input-with-error"),this.errorElement.skootip(S.utils.encodeHTML(t)),this.errorElement.addClass("sk-icon sk-icon-error sk-icon-inline-error nx-field-error-icon"),this.element.append(this.errorElement)):(this.errorElement.addClass("nx-error-inline").text(t),this.element.prepend(this.errorElement),this.element.addClass("nx-field-error"))}},getParentPage:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return S.component.getById(this.getParentPageId(e))},getParentPageId:function(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=this.editor,n=this.element||[];!t&&n.length;)t=(n=n.parent()).data("component");return t?t.getParentPageId(e):S.component.getByType("skuidpage")[0].id()},getReferenceOptions:function(e,t){if(t=t||{},!this.metadata||"REFERENCE"!==this.metadata.displaytype)throw Error('Can not retrieve reference options of a non "REFERENCE" type field');var a=this,n=w.Deferred(),i=t.referencedObject,r=a.metadata.dataSourceName?S.dataSource.getDataSource(a.metadata.dataSourceName):a.model.getDataSource(),o=r.getNameFields(i),s=t.relMetadata||{},l=function(){return o.map(function(e){return{id:e,displaytype:"STRING",filterable:!0}})},c=void 0,u=t.returnFields||a.options.returnFields||l(),d=t.searchFields||a.options.searchFields||l(),f=function(e){var t,n,i=r.dataSourceType.searchableDisplayTypes;for((!i||Object.keys(i).length<1)&&(i=C.searchableDisplayTypes),t=e.length-1;0<=t;t--)n=e[t],!a.metadata.uiOnly&&Object.keys(i).indexOf(n.displaytype)<0&&e.splice(t,1)},p=a.options,h=0,g=0,m=void 0;if(p.optionsource){if("model"===p.optionsource){if(!(m=S.$M(p.optionmodel)))return;w.each(d,function(e,t){var n=s.fields,i=t.id,r=n&&n.find(function(e){return e.id===i})||a.model.getField(c+i);r?(w.extend(t,r),t.id=i):t.displaytype="STRING"}),f(d);var v=a.addOrReplaceConditionsForLookupFiltersToModel(m),y=v&&v.length;m.conditions&&m.conditions.length&&m.conditions.forEach(function(e){"modelmerge"===e.type?m.updateConditionValue(e)&&(y=!0):"join"===e.type&&e.subConditions&&w.each(e.subConditions,function(e,t){"modelmerge"===t.type&&m.updateConditionValue(t)&&(y=!0)})}),"REFPICK"===p.type?y?m.updateData(function(){n.resolve(m)}):n.resolve(m):(m.buildSearchCondition("__default_searchbox",e,d,{tokenize:"true"===p.tokenizeSearch,useSOSLSearch:p.useSOSLSearch,SOSLFields:p.SOSLFields,delimiter:p.delimiter,searchOperator:"contains"}),m.updateData(function(){n.resolve(m)}))}}else{a.model&&(c=a.metadata&&a.metadata.rel?a.metadata.rel+".":"",w.each(d,function(e,t){var n=s.fields,i=t.id,r=n&&n.find(function(e){return e.id===i})||a.model.getField(c+i);r?(w.extend(t,r),t.id=i):t.displaytype="STRING"})),f(d),m=S.ui.getReferenceLookupModel(r,a,i,u),h++,p.defaultOrdering?m.orderByClause="":p.order&&(m.orderByClause=p.order),a.addOrReplaceConditionsForLookupFiltersToModel(m),e&&m.buildSearchCondition("__default_searchbox",e,d,{tokenize:"true"===p.tokenizeSearch,useSOSLSearch:p.useSOSLSearch,SOSLFields:p.SOSLFields,delimiter:p.delimiter,searchOperator:"contains"});var b=h;m.load(function(){var e={};e.isStale=!(g<b)||(g=b,!1),e.isFinal=b===h,n.resolve(m,e)})}return n.promise()}}),t(C,{Field:e})}(skuid)},function(e,t,n){"use strict";!function(e){var r=e.$,i=r.extend,t=e.ui,a=e.utils;function n(e,t,n){i(this,{_GUID:a.generateGUID(),list:e,row:t,defaultMode:e.mode||"read",deleted:!1,selected:n.selected||!1,element:!1,fields:[],fieldsByGUID:[]}),this.mode=n.mode||this.defaultMode,e&&e.model&&e.model.registerItem(this)}i(n.prototype,{id:function(){return this._GUID},render:function(){var e,t=this.list,n=!!t&&t.views,i=t.currentView;return t&&n&&i&&(e=n[i],this.element&&this.element.remove(),this.element=r("<"+(e.itemNodeType||"div")+">").addClass("nx-item").data("object",this),e.render(this)),this},refreshFields:function(t){var n=this;return n.fields.forEach(function(e){(n.mode!==e.mode||!t||e.id in t)&&(e.mode=n.mode,e.render())}),n},resetMode:function(){return this.mode!==this.defaultMode&&(this.mode=this.defaultMode),this},toggleEdit:function(){return"readonly"!==this.mode&&(this.mode="read"==this.mode?"edit":"read",this.refreshFields()),this},toggleDelete:function(e){return this.deleted?this.unMarkForDelete(e):this.markForDelete(e),this},handleUnmarkRowForDeletion:function(e){var t=this.list.model,n=this.row,i=!!n&&t.getRowId(n),r=!!e&&t.getRowId(e);return!n||n!==e&&i!=r||this.unMarkForDelete(!1),this},handleMarkRowForDeletion:function(e){var t=this.list.model,n=this.row,i=!!n&&t.getRowId(n),r=!!e&&t.getRowId(e);return!n||n!==e&&i!=r||this.markForDelete(!1),this},unMarkForDelete:function(e){return this.element.removeClass("deleted"),this.deleted=!1,e&&this.list.model.undeleteRow(this.row),this},markForDelete:function(e){return this.element.addClass("deleted"),this.deleted=!0,e&&this.list.model.deleteRow(this.row),this},getFieldById:function(e){for(var t,n=0;n<this.fields.length;n++)if((t=this.fields[n]).id===e)return t},registerField:function(e){this.fields.push(e),this.fieldsByGUID[e._GUID]=e},unregister:function(e){var t=this.fields,n=this.list;return n&&n.model&&n.model.unregisterItem(this),t&&t.length&&r.each(t,function(){this.destroy(e)}),this},destroy:function(){this.unregister({removeDOM:!1});var e=this.list||{},t=e.views,n=void 0!==t&&t,i=e.currentView;if(n&&i){var r=n[i].destroy;r&&r(this)}this.element&&this.element.remove()}}),i(t,{Item:n})}(skuid)},function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(H){var q=H.$,o=q.extend,f=H.ui,p=H.utils,$=H.$L,i="client",h="server";function e(e,t,n){var i,r,a,o=this;if(o._GUID=p.generateGUID(),o.editor=e,o.model=t,o.options=n||{},o.views=n.views,o.mode=n.mode,o.showFooter=n.showFooter,o.filterCssClass=n.filterCssClass,o.personalizationService=n.personalizationService||n.component&&n.component.getPersonalizationService(),o.filtersPosition=n.filtersPosition||"top",o.filtersWidth=n.filtersWidth,o.component=n.component,i=o.personalizationService&&o.personalizationService.getSettings()._List||{},o.conditions=n.conditions,o.context=n.context,o.visibleItems=[],o.currentView=!1,o.views&&(r=Object.keys(o.views)),r&&(o.currentView=r[0]),r&&1<r.length){var s=i.lastViewId;q.each(o.views,function(e){if(e===s)return o.currentView=e,!1}),o.editor.header.append(o.makeViewSwitcher())}if(o.element=!1,o.contents=!1,o.conditionsBar=q("<div>").addClass("left"===o.editor.options.buttonPosition?"nx-conditioncontainer-left":"nx-conditioncontainer"),o.searchBox=!1,o.searchFields=n.searchFields||[],o.searchSubFields=n.searchSubFields||{},o.searchFieldsMap={},o.searchSubFieldsMap={},o.setupConfigPopup=n.setupConfigPopup,o.filters=[],o.searchFields&&o.searchFields.length){var l=o.searchFields;o.searchFields=[],q.each(l,function(e,t){o.addSearchField(t)})}if(o.searchSubFields&&1<=H.utils.size(o.searchSubFields)){var c=o.searchSubFields;o.searchSubFields={},q.each(c,function(n,e){q.each(e,function(e,t){o.addSearchSubField(n,t)})})}o.customFilter=n.customFilter||!1,o.customFilterValue=n.customFilterValue||"",o.searchMethod=n.searchMethod||h,o.searchConditionName=n.searchConditionName,o.searchPlaceholderText=n.searchPlaceholderText||null;var u=n.requiredFields;if(o.requiredFields=u&&p.size(u)?u:{},o.showFooter){o.footer=q("<div>").addClass("nx-list-footer"),o.footerleft=q("<div>").addClass("nx-list-footer-left").appendTo(o.footer),o.footercenter=q("<div>").addClass("nx-list-footer-center").appendTo(o.footer),o.footerright=q("<div>").addClass("nx-list-footer-right").appendTo(o.footer),o.currentPage=0;var d=n.pageSize;d&&("all"!=d?(n.pageSize=parseInt(n.pageSize,10),o.currentPageSize=i.pageSize||n.pageSize):o.currentPageSize="all")}o.editor.registerList(o),o.makeConditionsBar(),o.editor&&o.editor.header&&("left"===o.editor.options.buttonPosition?o.editor.headerLeft.append(o.conditionsBar):(o.editor.headerRight.prepend(o.conditionsBar),o.conditionsBar.addClass("nx-conditioncontainer-right")),o.options.showSearchBox&&!1===o.searchBox&&(o.searchBox=o.makeSearchBox(),o.searchBox&&o.editor.submitwrapper.append(o.searchBox)),o.options.showConfigIcon&&(o.listConfigButton=q("<button>"),o.listConfigButton.addClass("nx-button-list-config").skootip(o.options.configIconTip||""),q(f.createIcon(o.options.configIcon||"sk-icon-configure")).addClass("inline").appendTo(o.listConfigButton),o.listConfigButton&&o.editor.submitwrapper.append(o.listConfigButton),a=o.setupConfigPopup(o),o.listConfigButton.on("click",function(e){e.stopPropagation(),a()})),o.options.delayFilterExecution&&(o.applyFiltersBtn=q("<div>").addClass("sk-button-applyfilter").text($("Apply")).skooButton({icon:"sk-icon-search-go",disabled:!1,hoverText:$("Apply")}).hide().on("click",function(){o.applyFiltersAndSearch()}),o.cancelFiltersBtn=q("<div>").addClass("sk-button-cancelfilter").text($("Cancel")).skooButton({icon:"sk-icon-cancel",disabled:!1,hoverText:$("Cancel")}).hide().on("click",function(){o.cancelFiltersAndSearch()}),o.editor.submitwrapper.append(o.applyFiltersBtn,o.cancelFiltersBtn))),o.renderedItems={}}function t(e,t){var n=e.footerleft;return n&&n.find(".nx-list-loadmore").toggleClass("unavailable",t),e}o(e.prototype,{id:function(){return this._GUID},unregister:function(){return this.model&&this.model.unregisterList(this),this.removeModelListeners(),this.renderedItems&&q.each(this.renderedItems,function(){this.unregister&&this.unregister()}),this},getSelectedItems:function(){var n=[];return q.each(this.renderedItems,function(e,t){t.selected&&n.push(t)}),n},unSelectAll:function(){q.each(this.renderedItems,function(e,t){t.selected&&(t.selected=!1)})},isFieldSearchable:function(e){if(!e)return!1;var t,n=this.model.dataSource;return n&&(t=n.dataSourceType.searchableDisplayTypes),(!t||Object.keys(t).length<1)&&(t=f.searchableDisplayTypes),e.displaytype in t&&(e.filterable||this.searchMethod===i)},addSearchField:function(e,t){if(e){var n,i=this.model.getField(e.id);this.isFieldSearchable(i)&&(i.id in this.searchFieldsMap||(n=o({},i),t&&(n.searchOperator=t),this.searchFields.push(n),this.searchFieldsMap[i.id]=n))}},addSearchSubField:function(e,t){if("object"===(void 0===t?"undefined":a(t))&&(t=t.id),e&&t){var n=this.model.getField(t,e);if(this.isFieldSearchable(n)){var i=this.searchSubFieldsMap[e],r=this.searchSubFields[e];i||(i=this.searchSubFieldsMap[e]={},r=this.searchSubFields[e]=[]),n.id in i||(i[n.id]=1,r.push(n),n.isChildRel=!0,n.childRelName=e,this.searchFields.push(n),this.searchFieldsMap[e+"."+n.id]=n)}}},addRequiredField:function(e){var t=e._id||e.id;this.requiredFields[t]=e},removeRequiredField:function(e){var t=this,n=e._id||e.id;this.requiredFields[n]?delete this.requiredFields[n]:Object.keys(this.requiredFields).filter(function(e){return t.requiredFields[e].id===n}).forEach(function(e){return delete t.requiredFields[e]})},validateRequiredFields:function(){var e=this,t=[],u=e.model,n=e.requiredFields;return q.each(u.changes,function(a){var o=u.getRowById(a);if(!u.isRowMarkedForDeletion(o)){var s={severity:"ERROR",status:"REQUIRED_FIELD_MISSING",fields:[],model:u},l="",c=!1;o&&a in e.renderedItems&&q.each(n,function(e,t){var n=t.id,i=t.label,r=u.getFieldValue(o,n,!0);(""===r||null===r||p.isUndefined(r))&&"BOOLEAN"!==t.displaytype&&(l&&(l+=", "),l+="["+i+"]",s.fields.push({id:n,label:i}),s.rowId=a,c=!0)}),c&&(s.message=$("Required_Fields_have_no_Value")+" "+l,t.push(s))}}),t},getView:function(e){return e||(e=this.currentView),this.views[e]},callViewOperation:function(e,t){t||(t=this.getView()),t&&e&&e in t&&t[e](this)},setUp:function(e){this.callViewOperation("setUp",e)},beforeRender:function(e){this.callViewOperation("beforeRender",e)},renderComplete:function(e){this.callViewOperation("renderComplete",e)},tearDown:function(e){this.callViewOperation("tearDown",e)},getAllRows:function(){var e=this.model,t=this.customFilter,n=this.customFilterValue,i=void 0;if(e&&(i=p.filterRowsByConditions(e._clientData||e.data,this.conditions,this.context,e)),t&&(n||"0"===n)&&(i=i.filter(function(e){return t(n,e)})),e._clientData)for(var r in e.changes)-1<r.indexOf("sk-temp-record-id")&&i.unshift(e.getRowById(r));return i},getRenderedItemByRowId:function(e){return this.renderedItems[e]},render:function(i){i=i||{};var e,r=this,a=r.model,t=r.options,o=[],n=i.previousView||!1,s=n&&n!==r.currentView,l=r.getView(),c=!r.element||i.doNotCache||l.alwaysFullRender,u=i.changedRows,d=!1!==this.options.showLoadMore,f=!0===i.resetItemModes,p=!1!==i.refreshFields,h=a.getConditionByName(r.searchConditionName||"__default_searchbox");if(r.searchbox&&h&&("group"===h.type||"search"===h.type))if(i.initiatorId&&i.initiatorId===r._GUID);else{var g;if(h.value&&"search"===h.type)if(r.options.tokenizeSearch){g="";var m=h.value.split(" AND ");q.each(m,function(e,t){g+=t.substring(1,t.length-2)+" "}),g=g.substring(0,g.length-1)}else g=h.value.substring(1,h.value.length-2);else g=h.value;g&&!h.inactive?(r.searchbox.val(g),r.searchbox.data("curval",g)):(r.searchbox.val(""),r.searchbox.data("curval",""))}l.alwaysFullRender&&(i.doNotCache=!0),s&&(n=r.getView(n))&&r.tearDown(n),i.resetPagination&&(r.currentPage=0);var v=(e=r.getAllRows()).length,y=r.currentPageSize,b=0,S=v;r.footer&&r.showFooter&&(r.footerleft.empty(),r.footercenter.empty(),r.footerright.empty()),r.element&&!s||(r.element&&r.element.remove(),r.element=q("<"+(l.nodeType||"div")+">").addClass("nx-list"),r.contents=q("<"+(l.contentsNodeType||"div")+">").addClass("nx-list-contents").appendTo(r.element),t.labeledBy&&r.element.attr("aria-labeledby",t.labeledBy),r.setUp(l));var w=H.utils.makeXMLDoc,C=r.filtersPosition;if("left"!==C&&"right"!==C||!r.component)"bottom"===C&&r.element.append(r.conditionsBar.css({display:"block",float:"none"}).addClass("nx-conditioncontainer-bottom"));else{if(!r.panelSet){var I=w("<panelset/>").attr("type","standard").append(w("<panels/>").append(w("<panel/>"),w("<panel/>").attr({type:C,width:r.filtersWidth})));r.panelSet=H.$("<div>").panelSet(I,r.component)}r.conditionsBar.css({float:C,"text-align":C})}if(r.showFooter&&y&&"all"!=y&&y<v){r.currentPage<0&&(r.currentPage=0);var k=Math.ceil(v/y);r.currentPage>k-1&&(r.currentPage=k-1),b=y*r.currentPage,S=y*(r.currentPage-0+1),r.currentPage==k-1&&(S=v),e=e.slice(b,S);var T=q("<div>").addClass("nx-buttonset"),x=q("<div>").addClass("first").text($("First")).button(),D=q("<div>").addClass("prev").text($("Previous")).button(),R=q("<div>").addClass("next").text($("Next")).button(),E=q("<div>").addClass("last").text($("Last")).button(),A=r.currentPage<k-3?r.currentPage-2:k-5,F=2<r.currentPage?r.currentPage+2:4;T.append(x,D);for(var P=A;P<=F;P++)if(0<=P&&P<k){var O=q("<div>").text(P-0+1).attr("data-pn",P).button();P===r.currentPage&&O.addClass("nx-button-selected"),T.append(O)}T.append(R,E).buttonset(),T.children().filter('[data-pn="'+r.currentPage+'"]').button("disable"),0===r.currentPage?(x.button("disable"),D.button("disable")):r.currentPage==k-1&&(E.button("disable"),R.button("disable")),this.footerright.append(T),T.on("click",".ui-button",function(e){e.stopPropagation();var t=q(this);t.is(".first")?r.goToPage(0):t.is(".prev")?r.prevPage():t.is(".next")?r.nextPage():t.is(".last")?r.goToPage(k-1):r.goToPage(parseInt(t.data("pn"),10))})}if(r.showFooter&&y&&"all"!=y&&v){var N=[5,10,25,50];-1==N.indexOf(t.pageSize)&&N.push(t.pageSize),-1==N.indexOf(r.currentPageSize)&&N.push(r.currentPageSize);N.sort(function(e,t){return e-t});var _=q("<select>");_.on("click",function(e){e.stopPropagation()}),_.append(q.map(N,function(e){return q('<option value="'+e+'">'+e+"</option>")})),_.children().filter('[value="'+y+'"]').attr("selected","selected"),_.change(function(){var e=parseInt(q(this).val(),10);r.personalizationService&&r.personalizationService.updateSettings({_List:{pageSize:e}}),r.currentPageSize=e,r.render()});var M=q("<span>").addClass("nx-list-footer-page-size-select");M.append("<span>"+$("Show")+" </span>",_,"<span> "+H.label.merge($("Objects_Per_Page"),a.labelPlural)+"</span>"),this.footerleft.append(M)}var L=$("Pagination_Limit_Reached"),U=a.debug===L,j=!0===a.canRetrieveMoreRows;if(r.showFooter){if(v){var B=v+"";j&&(B+="+"),this.footercenter.append("<span>"+H.label.merge($("Showing_Rows"),b+1,S,B)+(U?" ("+L+")":"")+"</span>")}if(j&&!U&&d){var V=q('<div class="nx-list-loadmore" role="button">').text($("Load_More")).on("click.skuid",function(){q(this).is(".unavailable")||(r.blockUI({message:$("Loading")}),a.loadNextOffsetPage(function(){r.unblockUI()}))});this.footerleft.append(V)}v||(a.needsMetadataLoad&&a.loadAsync&&!a.doQuery?this.footercenter.append("<span>Loading Metadata for: "+a.label+"</span>").css("line-height","25px"):a.needsMetadataLoad&&a.loadAsync?this.footercenter.append("<span>Loading: "+a.label+"</span>").css("line-height","25px"):this.footercenter.append("<span>"+H.label.merge($("No_Objects_to_Display"),a.labelPlural)+"</span>").css("line-height","25px"))}i.doNotCache&&(q.each(r.renderedItems,function(e,t){t&&t.destroy()}),r.renderedItems={},r.makeConditionsBar()),r.beforeRender(l),r.visibleItems=[],!0===i.destroyDeletedRows&&q.each(r.renderedItems,function(e,t){var n=a.record(e);!t||n&&!n.isMoribund()||(t.destroy(),delete r.renderedItems[e])});var z={};function G(e,t){z[t]||(z[t]=1,f&&e.resetMode(),p&&(u&&u[t]?e.refreshFields(u[t]):e.refreshFields()))}q.each(e,function(){var e=a.getRowId(this),t=a.record(e),n=r.renderedItems[e];if(!t)return n&&delete r.renderedItems[e],!0;n&&!i.doNotCache?G(n,e):n=r.newItem(this,i),n&&(n.element[(t.isMoribund()?"add":"remove")+"Class"]("deleted"),o.push(n.element),r.visibleItems.push(n))}),!i.doNotCache&&f&&r.getAllRows().forEach(function(e){var t=a.getRowId(e),n=r.renderedItems[t];n&&G(n,t)}),l.noAutoAppend||(r.contents.children().detach(),r.contents.append(o)),c&&r.attach(),r.renderComplete(l)},showRow:function(e){var t=!0;return this.conditions&&this.conditions.length&&(t=p.doesRowMeetConditions(e,this.conditions)),t},handleNewRow:function(e,t){var n={},i=this.model.getRowId(e);if(t&&o(n,t),!p.isUndefined(i)&&!(i in this.renderedItems)&&this.showRow(e)){var r=this.newItem(e,n);if(this.contents.prepend(r.element),this.render({resetPagination:!0,refreshFields:!1}),r&&"edit"===r.mode){var a=r.element.find(".nx-field > :input:visible:not(.nx-skootable-rowselect):not(.hasDatepicker):not(select)").first();a&&a.focus()}}},handleRowDeletion:function(e){e&&e in this.renderedItems&&this.renderedItems[e].destroy()},newItem:function(e,t){var n,i=this.model.getRowId(e);if(i)return n=new f.Item(this,e,{mode:t&&t.editModeForNewItems?"edit":this.mode,selected:t&&t.selected}),n.render(),this.renderedItems[i]=n},attach:function(){"right"===this.filtersPosition||"left"===this.filtersPosition?(this.panelSet.find(".nx-panel-fluid .nx-panel").append(this.element,this.footer),this.panelSet.find(".nx-panel-left-inner, .nx-panel-right-inner").append(this.conditionsBar),this.editor.contents.append(this.panelSet)):this.editor.contents.append(this.element,this.footer)},makeViewSwitcher:function(){var n=this,i=[];return q.each(n.views,function(e,t){i.push({value:e,label:t.label||e,icon:t.icon,isSelected:n.currentView===e})}),q("<div>").actionSelect({items:i,onItemSelect:function(e){var t=n.currentView;n.currentView=e.value,n.render({doNotCache:!0,previousView:t}),q.cookie("nx-list-view-"+H.page.name+"-"+n.model.id,e.value),n.personalizationService&&n.personalizationService.updateSettings({_List:{lastViewId:e.value}})}}).addClass("nx-viewswitcher")},makeSearchBox:function(){var s=this;if(s.searchMethod===i&&(s.customFilter=function(e,i){var a=!1,o=e.toLowerCase(),r=function(e,t){var n,i=e.searchOperator,r=s.model.getFieldValue(t,e.id,!0)+"";null!==r&&(n=r.toLowerCase(),a="="===i?n===o:"starts with"===i?p.startsWith(n,o):s.options.tokenizeSearch?o.split(" ").reduce(function(e,t){return e||p.contains(n,t)},!1):p.contains(n,o))};return q.each(s.searchFields,function(e,t){return r(t,i),!a}),!a&&s.searchSubFields&&q.each(s.searchSubFields,function(e,t){var n=i[e];n&&n.totalSize&&t.length&&q.each(n.records,function(e,n){return q.each(t,function(e,t){return r(t,n),!a}),!a})}),a}),s.searchFields||"custom"===s.searchMethod){var e="placeholder"in document.createElement("input"),n=q('<input type="text" class="searchbox" />'),t=s.searchPlaceholderText?p.mergeAsText("model",s.searchPlaceholderText,{createFields:!0,registerFields:!1},s.model):$("Search")+" "+s.model.labelPlural;return s.customFilterValue&&n.val(s.customFilterValue),s.searchbox=n,e?n.attr("placeholder",t):(n.addClass("unchanged").val(t),n.focus(function(){n.hasClass("unchanged")&&n.val("").removeClass("unchanged")}).blur(function(){""===n.val()&&n.val(t).addClass("unchanged")})),s.options.delayFilterExecution&&n.on("keyup",function(e){13===e.which&&s.applyFiltersAndSearch()}),p.delayInputCallback(n,function(e,t){s.options.delayFilterExecution&&void 0===n.data("originalValue")&&n.data("originalValue",t),s.searchMethod===i?(s.customFilterValue=e,s.setSearchCondition(e),"remove"!==s.options.emptySearchBehavior||e?s.updateData({message:$("Searching"),failmessage:$("Error_Performing_Requested_Search"),showerror:!0}):s.model.emptyData()):"custom"===s.searchMethod?(s.customFilterValue=e,s.render()):s.searchMethod===h&&(s.options.delayFilterExecution?s.showFilterActions():(s.setSearchCondition(e),"remove"!==s.options.emptySearchBehavior||e?s.updateData({message:$("Searching"),failmessage:$("Error_Performing_Requested_Search"),showerror:!0}):s.model.emptyData()))},{dataPropertyName:"curval"}),n.on("click",function(e){e.stopPropagation()}),n}return!1},setSearchCondition:function(e){this.model.buildSearchCondition(this.searchConditionName,e,this.searchFields,{tokenize:this.options.tokenizeSearch,useSOSLSearch:this.options.useSOSLSearch,SOSLFields:this.options.SOSLFields,processOnClient:this.searchMethod===i})},showFilterActions:function(){var e=function(e){e.show("fast").css({display:"inline-block"})};e(this.applyFiltersBtn),e(this.cancelFiltersBtn),this.editor.options.showSaveCancel&&this.editor.submitbuttons.hide("fast");var t=q(".sk-pagepanel.filters-panel");return t.length&&(e(t.find(".sk-button-applyfilter")),e(t.find(".sk-button-cancelfilter"))),this},hideFilterActions:function(){this.applyFiltersBtn.hide("fast"),this.cancelFiltersBtn.hide("fast"),this.editor.options.showSaveCancel&&this.editor.submitbuttons.show("fast").css("display","inline-block");var e=q(".sk-pagepanel.filters-panel");return e.length&&(e.find(".sk-button-applyfilter").hide("fast"),e.find(".sk-button-cancelfilter").hide("fast"),this.editor.submitbuttons.css("display","inline-block")),this},applyFiltersAndSearch:function(){var e,t=this,n=t.searchBox;return n&&(e=n.is(".unchanged")?"":n.val(),n.data("originalValue",e),t.setSearchCondition(e)),t.filters&&q.each(t.filters,function(){var e=this.activateFilter;e&&e()}),"remove"!==t.options.emptySearchBehavior||e?t.updateData({message:$("Searching"),failmessage:$("Error_Performing_Requested_Search"),showerror:!0,successcallback:function(){t.hideFilterActions()}}):(t.model.emptyData(),t.hideFilterActions()),t},cancelFiltersAndSearch:function(){var e=this.searchBox;return e&&e.val(e.data("originalValue")),this.filters&&q.each(this.filters,function(){this.restoreOriginalValue()}),this.hideFilterActions(),this},updateData:function(t){var n=this;return n.blockUI({message:t.message}),n.model.updateData(!1,{initiatorId:n._GUID}).always(function(){n.unblockUI()}).done(function(){n.editor.clearMessages(),t.successcallback&&t.successcallback()}).fail(function(e){n.editor.clearMessages(),n.editor.handleMessages([{message:t.failmessage+(t.showerror&&e?" "+e:""),severity:"ERROR"}])}),n},makeConditionsBar:function(){this.makeFiltersBar()},enableFiltersAndSearch:function(){return this.conditionsBar&&this.conditionsBar.find(".nx-conditiontoken").removeClass("unavailable").children(".ui-multiselect").siblings("select").multiselect("enable").end().children("input").prop("disabled",!1),this.searchMethod===h&&this.searchBox&&this.searchBox.prop("disabled",!1),this},disableFiltersAndSearch:function(){return this.conditionsBar&&this.conditionsBar.find(".nx-conditiontoken").addClass("unavailable").children(".ui-multiselect").siblings("select").multiselect("disable").end().children("input").prop("disabled",!0),this.searchMethod===h&&this.searchBox&&this.searchBox.prop("disabled",!0),this},enableLoadMore:function(){return t(this,!1)},disableLoadMore:function(){return t(this,!0)},blockUI:function(e){var t={message:(e=e||{}).message};this.options.blockUICSS&&(t.css=this.options.blockUICSS),this.options.blockOverlayCSS&&(t.overlayCSS=this.options.blockOverlayCSS),this.editor.element.block(t)},unblockUI:function(e){var t={};(e=e||{}).failmessage?(this.options.blockUICSS&&(t.css=this.options.blockUICSS),this.options.blockOverlayCSS&&(t.overlayCSS=this.options.blockOverlayCSS),t.timeout=e.timeout||4e3,t.message=e.failmessage,this.editor.element.block(t)):this.editor.element.unblock()},addModelListeners:function(){var e=this,n=e.modelListeners,i={},r=p.debounce(function(){e.makeFiltersBar()},1);return n||(n=e.modelListeners=[]),e.filters.forEach(function(e){e.sources&&e.sources.forEach(function(e){var t=e.model;t&&!i[t.id]&&(i[t.id]=1,["cancelled","loaded","saved","row.updated","row.created"].forEach(function(e){n.push(t.subscribe(e,r))}))})}),e},removeModelListeners:function(){var e=this.modelListeners;return e&&(e.forEach(function(e){e.unsubscribe()}),e.length=0),this},makeFiltersBar:function(){var n,i=this,e=i.options.listFilters,r=e&&e.closest("filterset"),a="right"===i.filtersPosition||"left"===i.filtersPosition;return i.removeModelListeners(),i.filters&&i.filters.length?(i.filters.forEach(function(e){e.unregister()}),i.filters.length=0):i.filters=[],!!e&&((n=i.conditionsBar).empty(),q.each(e.children(),function(e){var t=new f.Filter({xml:q(this),list:i,selectedList:r.length&&"vertical"===r.attr("layout")?2:3,cssClass:i.filterCssClass});t&&t.element&&(a&&0!==e&&n.append("<br>"),n.append(t.element),t.multiSelectMaxWidth&&t.multiSelectMaxWidth()),i.filters.push(t)}),i.addModelListeners(),a&&n.addClass("nx-conditioncontainer-vertical nx-conditioncontainer-vertical-"+i.filtersPosition),n)},nextPage:function(){this.currentPage++,this.render({refreshFields:!1})},prevPage:function(){this.currentPage--,this.render({refreshFields:!1})},goToPage:function(e){this.currentPage=e,this.render({refreshFields:!1})}}),o(f,{List:e})}(skuid)},function(e,t,n){"use strict";!function(a){var d=a.$,r=d.extend,e=a.ui,o=a.utils,s=a.$L,l=a.$.ui.keyCode,n="_uniqueMessages",c="keydown.action.skuid";function t(e,t){var n=this,i=[];t=n.options=r({showHeader:!0,showFooter:!1,showMessages:!0,showErrorsInline:!0,showErrorsOnHover:!1},t),n._GUID=o.generateGUID(),n.models=[],n.modelsById={},n.lists=[],e&&(n.element=e.addClass("nx-editor"),t.showHeader&&(n.header=d("<div>").addClass("nx-editor-header"),n.headerLeft=d("<div>").addClass("nx-header-left").appendTo(n.header),n.headerRight=d("<div>").addClass("nx-header-right").appendTo(n.header),n.submitwrapper=d("<div>").addClass("nx-editor-header-submitwrapper"),-1<["block","center"].indexOf(t.buttonPosition)?(n.submitwrapper.appendTo(n.header),"center"===t.buttonPosition&&n.header.addClass("nx-header-center")):n.submitwrapper.appendTo("left"===t.buttonPosition?n.headerLeft:n.headerRight),n.status=d('<div class="nx-status">').appendTo(n.header).hide(),n.statustext=d('<div class="nx-status-text"></div>').appendTo(n.status),i.push(n.header),t.heading&&(n.headingElement=d("<h2>").attr("id",o.generateUniqueId()).addClass("nx-editor-header-heading").append(t.heading),n.headerLeft.prepend(n.headingElement))),t.showMessages&&(n.messages=d('<div class="nx-messages">'),i.push(n.messages)),n.contents=d("<div>").addClass(t.customContentClass?t.customContentClass:"nx-editor-contents"),i.push(n.contents),t.showFooter&&(n.footer=d("<div>").addClass("nx-editor-footer"),n.footerSubmitWrapper=d("<div>").addClass("nx-footer-"+(t.buttonPosition||"right")).appendTo(n.footer),n.footerStatus=d('<div class="nx-status">').appendTo(n.footer).hide(),n.footerStatusText=d('<div class="nx-status-text"></div>').appendTo(n.footerStatus),i.push(n.footer)),n.element.append(i),n.element.data("editor",n))}t.prototype={id:function(){return this._GUID},registerModel:function(e){if(!e)return this;var t=this,n=t.modelsById,i=!e.hasChanged;return n[e.id]||(t.models.push(e),(n[e.id]=e).registerEditor(t),t.options.showSaveCancel&&!t.submitbuttons&&(t.savebutton=d("<div>").addClass("sk-button-save").text(s("Save")).skooButton({icon:t.options.saveIcon||"sk-icon-save",disabled:i}),t.cancelbutton=d("<div>").addClass("nx-button-secondary sk-button-cancel").text(s("Cancel")).skooButton({icon:t.options.cancelIcon||"sk-icon-cancel",disabled:i}),i?(t.savebutton.attr("tabindex",-1),t.cancelbutton.attr("tabindex",-1)):(t.savebutton.attr("tabindex",0),t.cancelbutton.attr("tabindex",0)),t.savebutton.on("click.skuid "+c,function(e){"click"===e.type&&e.stopPropagation(),"click"!==e.type&&e.which!==l.ENTER&&e.which!==l.SPACE||(d(this).removeClass("ui-state-hover"),t.submitbuttons&&t.submitbuttons.filter(".ui-button").button("disable").removeAttr("tabindex"),t.save())}),t.cancelbutton.on("click.skuid "+c,function(e){"click"===e.type&&e.stopPropagation(),"click"!==e.type&&e.which!==l.ENTER&&e.which!==l.SPACE||(d(this).removeClass("ui-state-hover"),t.submitbuttons&&t.submitbuttons.filter(".ui-button").button("disable").removeAttr("tabindex"),t.cancel())}),t.options.showHeader&&(t.submitbuttons=t.savebutton.add(t.cancelbutton),t.submitwrapper.append(t.savebutton,t.cancelbutton)))),t},registerList:function(e){this.lists.push(e),this.registerModel(e.model)},unregister:function(){var e=this;return e.lists&&e.lists.length&&d.each(e.lists,function(){this.unregister&&this.unregister()}),e.models&&e.models.length&&d.each(e.models,function(){this.unregisterEditor(e)}),e},getParentPage:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return a.component.getById(this.getParentPageId(e))},getParentPageId:function(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=this.options,n=t.parentComponent,i=this.element||[];!n&&i.length;)n=(i=i.parent()).data("component");return n?(t.parentComponent||(t.parentComponent=n),n.getParentPageId(e)):a.component.getByType("skuidpage")[0].id()},hasModelWithChanges:function(){var e=!1;return d.each(this.models,function(){if(this.hasChanged)return e=!0}),e},handleChange:function(){this.submitbuttons&&this.submitbuttons.filter(".ui-button").button("enable").attr("tabindex",0),this.lists.length&&d.each(this.lists,function(e,t){t.disableFiltersAndSearch().disableLoadMore()})},clearMessages:function(){this.messages&&this.messages.empty(),this[n]={}},clearInlineErrors:function(){this.element&&this.element.find(".nx-error-inline").remove().end().find(".nx-field-error").removeClass("nx-field-error nx-field-error-icon")},handleMessages:function(e,t){var l=this,c="nx-dupcounter",u=l[n];return u||(u=l[n]={}),!!l.messages&&((!t||!t.initiatorId||l._GUID===t.initiatorId)&&void d.each(e,function(e,t){var n,i,r,a,o="nx-message",s=t.message;t.showToAdminOnly&&!l.getParentPage()._getCPI().isUserPageAdmin()||("ERROR"===t.severity||"FATAL"===t.severity?o="nx-error":"WARNING"===t.severity&&(o="nx-warning"),(n=u[o])||(n=u[o]={}),(i=n[s])?i.count++:i=n[s]={count:1},i.element?a=i.element:(a=i.element=d("<div>").addClass(o),"DUPLICATE_VALUE"===t.status?a.append(s):a.append(d("<div>").text(s)),a.on("click.skuid",function(){d(this).remove()}),l.messages.append(a)),1<i.count&&((r=a.children("."+c)).length?r.text(i.count):a.prepend('<div class="'+c+'" style="">'+i.count+"</div>")))}))},handleCancel:function(){var n=!1,i={};d.each(this.models,function(e,t){t.hasChanged&&(n=!0,i[t.id]=!0)}),!1===n&&(this.clearMessages(),this.submitbuttons&&this.submitbuttons.filter(".ui-button").button("disable")),this.lists.length&&d.each(this.lists,function(e,t){!t.model||t.model.id in i||t.enableFiltersAndSearch().enableLoadMore()})},handleSave:function(e){var n=!1,i={},t=this;d.each(t.models,function(e,t){t.hasChanged&&(n=!0,i[t.id]=!0)}),e?t.hideStatus(s("Saved")):t.hideStatus("",0),t.clearMessages(),e&&!n&&t.submitbuttons&&t.submitbuttons.filter(".ui-button").button("disable"),!e&&n&&t.submitbuttons&&t.submitbuttons.filter(".ui-button").button("enable"),t.lists.length&&d.each(t.lists,function(e,t){!t.model||t.model.id in i||t.enableFiltersAndSearch().enableLoadMore()})},cancel:function(){a.model.cancel(this.models,{initiatorId:this._GUID})},save:function(e){var t="rollbackOnAnyError";!(t in(e=e||{}))&&t in this.options&&(e[t]=this.options[t]),this.setStatus(s("Saving")),e.initiatorId=this._GUID,a.model.save(this.models,e)},setStatus:function(e){a.ui.setStatus(this.status,this.statustext,e)},hideStatus:function(e,t){a.ui.hideStatus(this.status,this.statustext,e,t)},createConditionsFromXml:function(e,t){if(e){var n,i=this.conditions,r=0;if(i||(i=this.conditions=[]),(n=t?t.createConditionsFromXml(e):a.component.Component.prototype.call(this,e))&&n.length)for(;r<n.length;r++)i.push(n[r]);else n=[];return n}},addConditions:function(e){var n=this;e&&e.length&&(n.conditions||(n.conditions=[]),d.each(e,function(e,t){n.conditions.push(t)}))},getConditions:function(){return this.conditions}},r(e,{Editor:t})}(skuid)},function(e,t,n){"use strict";!function(A){var r,o,P=A.$,s=A.constants,f=A.ui,O=A.utils,N=A.time,e=s.DISPLAY_TYPES,t=s.FIELD_TYPES,n=N.parseSFDate,_=N.parseSFDateTime,i=N.getSFDate,M=N.getSFDateTime,F=A.$L,L=O.encodeHTML,U=O.startsWith,l="placeholder",b="keydown.action.skuid",S=A.$.ui.keyCode,a=e.ANYTYPE,c=e.ARRAY,u=e.BOOLEAN,p=e.COMBOBOX,d=e.CURRENCY,h=e.CUSTOM,g=e.DATE,m=e.DATETIME,j=e.DOUBLE,v=e.EMAIL,B=e.ID,V=e.INTEGER,y=e.LOCATION,w=e.MULTIPICKLIST,z=e.NUMBER,C=e.PERCENT,I=e.PHONE,k=e.PICKLIST,G=e.REFERENCE,T=e.RICHTEXT,H=e.STRING,x=e.TEXT,D=e.TEXTAREA,R=e.URL,E=t.BUTTON,q=t.CHILDREL,$=t.COMBO,W=t.FILE,Y=t.IMAGE,K=[u,d,g,m,j,B,V,C,e.TIME];function X(e,t){var n=e.options&&e.options.addfocusbox,i="TEXTAREA"==e.metadata.displaytype&&e.metadata.htmlFormatted?"sk-slds-rich-text-editor__output":"";e.element.html('<div class="nx-fieldtext '+i+'">'+t+(n?'<div class="focusbox" tabindex="0"/>':"")+"</div>")}function J(e){var t,n=e.model,i=e.row,r=n.getFieldValue(i,e.id),a=n.objectName,o=n.getNameFieldValueForRow(i);window.sforce&&sforce.interaction&&window.sendCTIMessage&&(t=window.sendCTIMessage),t&&t("/CLICK_TO_DIAL?DN="+encodeURIComponent(r)+(i.Id?"&ID="+i.Id:"")+"&ENTITY_NAME="+a+"&OBJECT_NAME="+encodeURIComponent(o))}function Q(e){var t=e.options;return t&&t[l]||e.metadata[l]}function Z(e,t){return O.mergeAsTextInContext(e||F("Select_Option_None"),t||{})}function ee(i,e,s){var r=!1,a=[];function o(e,t,n){var i=P("<div>").addClass("nx-radiowrapper"),r=A.utils.generateGUID(),a=P('<input type="radio" name="'+s.buttonSetName+'">').addClass("nx-radio").prop("id",r).prop("checked",n).prop("disabled","read"===s.mode||"readonly"===s.mode).val(e),o=P("<label>").prop("for",r).addClass("nx-radiolabel").html(L(t)).appendTo(i);return i.append(a,o),i}if(s.makeNoneOption&&a.push(o("",Z(s.noneLabel),!i)),P.each(e,function(e,t){if(t.value){var n=t.value==i&&""!==t.label;n&&!r&&(r=!0),a.push(o(t.value,t.label,n))}}),!r&&(i||"0"===i||"false"===i)){var t=o(i,i,!0);s.makeNoneOption?a.splice(1,0,t):a.unshift(t)}return a}function te(e){e||(e={});var t,n=e.value,i=O.userLocale,r=e.decimalPlaces||0,a=e.decimalsSeparator||i.decimalsSeparator,o=e.thousandsSeparator||i.thousandsSeparator,s=e.prefix||"",l=e.suffix||"";return n||0===n||(n=""),t=""===n?n:P.isNumeric(n)?isFinite(n)?s+P.number(n,r,a,o)+l:"-":P("<div>").html(n).text(),e.wrapInElement?P("<div>").text(t):t}function ne(i){var r={},e=function(e,t){var n=i[e];void 0!==n&&(r[t]=n)};return e("showYearPicker","changeYear"),e("showMonthPicker","changeMonth"),e("showTodayButton","showButtonPanel"),e("yearPickerRange","yearRange"),r}function ie(e,t){var n,i;return n=P('<div class="nx-field-lengthcounter"></div>'),(i=function(e){n.text(+e+"/"+t.length),e>t.length?n.addClass("nx-field-lengthcounter-error"):n.removeClass("nx-field-lengthcounter-error")})(t.value?t.value.length:0),e.append(n),i}var re=P.datepicker._gotoToday;function ae(e){e||(e={});var t,n=A.platform;t=O.isString(e)?e:e.displayType;var i=n.getRenderers&&n.getRenderers();return i&&t in i?i[t]:t in r?r[t]:void 0}function oe(e,t){var n,i,r;e||(e={}),O.isString(e)?(n=e,i=t):e instanceof f.Field||O.isString(t)?(r=e,n=t):e.displayType&&(n=e.displayType,i=e.dataSource,r=e.field),!i&&r&&(i=r.model.getDataSource()),!n&&r&&(n=r.metadata.displaytype);var a=i&&i.getFieldRenderers();return a&&n in a?a[n]:n in o?o[n]:(O.log('Unable to find an appropriate renderer for "'+n+'"',s.LOG_LEVELS.WARNING),o[x])}P.datepicker._gotoToday=function(e){re.call(this,e),this._selectDate(e)},r={AUTOCOMPLETE:{edit:function(n){(n=n||{}).minLength||0===n.minLength||(n.minLength=2);var e,t=P("<input>"),i=function(){e&&(e.removeClass("ui-icon ui-icon-search"),e.addClass("nx-spinner-small"))},r=function(){e&&(e.removeClass("nx-spinner-small"),e.addClass("ui-icon ui-icon-search"))};return t.autocomplete({minLength:n.minLength,source:"function"==typeof n.source?function(e,t){n.source(e,t,i,r)}:n.source,select:n.onChange,focus:n.onFocus,close:n.onClose,appendTo:n.appendTo}).val(n.value),n.menuRenderer&&(t.data("ui-autocomplete")._renderMenu=n.menuRenderer),n.optionRenderer&&(t.data("ui-autocomplete")._renderItem=n.optionRenderer),t.on("keyup",function(e){""===P(this).val()&&9!==e.keyCode&&n.onClear&&n.onClear()}),t.focus(function(){t.autocomplete("widget").css("z-index",parseInt(t.closest(".ui-front").css("z-index"),10)+1)}),t.blur(function(){n.onBlur&&n.onBlur()}),n.parentElem&&(e=P("<div>").addClass("ui-icon ui-icon-search nx-field-reference-search").css({cursor:"pointer"}),n.parentElem.append(e),n.parentElem.is(t)&&t.css("padding-right","22px")),t}},BOOLEAN:{edit:function(e){var t=P('<input type="checkbox">').prop("checked",e.value).change(function(){e.onChange&&e.onChange(P(this).is(":checked")),t.focus()});return t}},COMBOBOX:{edit:function(n){var r,t=".nx-combobox-renderer-button",s=function(e){var t=n.entries;return O.isFunction(t)&&(t=t(e)),O.isPromise(t)?t:P.Deferred().resolve(t).promise()},l=function(e){return{value:c(e),label:u(e)}},c=function(e){return O.isString(e)?e:e.value},u=function(e){return O.isString(e)?e:e.label?e.label:e.value},d=(n=n||{}).getErrorContainer,f=n.invalidEntryMessage||"Only entries in this list are allowed.",p=n.onChange,a=n.parentElem,h=n.showLabelInTextInput,g=n.originalValue,m=n.restrictToEntries,i=P("<div>").addClass("ui-icon ui-icon-search nx-field-reference-search").css({cursor:"pointer"}),o=P("<select/>"),e=function(){var e=a.find(t);i&&(e.css("display","none"),i.removeClass("ui-icon ui-icon-search").addClass("nx-spinner-small").css({top:"5px"}))},v=function(){var e=a.find(t);i&&(i.removeClass("nx-spinner-small").addClass("ui-icon ui-icon-search"),e.css("display","block"))},y=n.label,b=n.value,S=h&&y?y:b,w={appendDropdown:n.appendDropdown,originalValue:n.originalValue,showLabelInTextInput:h,parentElem:a,required:n.required,searchicon:i,source:function(i,t){e(),s(i.term).then(function(e){v(),t(e.filter(function(e){var t=i.term?i.term.toLowerCase():"",n=function(e){return-1<e.toString().toLowerCase().indexOf(t)};return O.isObject(e)?0<P.map(e,function(e){if(n(e))return e}).length:n(e)}).map(function(e){return l(this||e)})),O.runningTests()&&A.events.publish("combobox.entries.ready")}).catch(function(e){d().show().text(e),v(),t([])})},value:S,onBlur:function(e){var r=d(),a=P(e.target),t=a.data("value"),o=e.target.value;h&&t&&t!==o&&y&&o==y&&(o=t),(o||b)&&s(o).then(function(e){var t=e.find(function(e){return o===c(e)||o===u(e)}),n=!!t,i=n?l(t):{value:o,label:o};if(o=i.value,m&&!n)r.show().text(f),O.runningTests()&&A.events.publish("combobox.entry.error");else{if(r.hide(),b===o)return;g=b,b=i.value,y=i.label,h&&n&&y&&(a.data("value",b),a.val()!==y&&a.val(y)),p&&p(b,g,{item:i})}}).catch(function(e){r.show("Error fetching entries: "+e)})},onChange:function(e,t){var n=P(this);g=b,y=t.item.label,b=t.item.value,d().hide(),p&&p(b,g,{item:t.item}),h&&y&&(n.data("value",b),t.item.value=y)},onFocus:function(e){e.target.select()}};return!h||!b||h&&n.label?(r=o.combobox(w),S!==b&&a.find("input").data("value",b),r):s(b).then(function(e){var t,n,i=e.filter(function(e){return O.isObject(e)?0<P.map(e,function(e){if(b===e)return e}).length:b===e})[0];return O.isObject(i)?(n=c(i),t=u(i)):n=i,n&&(b=n),t&&(y=t),S=h&&y?y:b,r=o.combobox(P.extend(w,{value:S,getInputValue:function(){return b}})),S!==b&&a.find("input").data("value",b),r})}},CURRENCY:{read:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=A.currency.getDisplayValue(e.value,{decimalPlaces:e.decimalPlaces||0,decimalsSeparator:e.decimalsSeparator,thousandsSeparator:e.thousandsSeparator,recordCurrency:e.valueCurrencyCode});return e.wrapInElement?P("<div>").text(t):t}},DOUBLE:{read:te},DATE:{edit:function(a){var o,s,l=!1,e=(a=a||{}).value&&n(a.value);return(o=P("<input>").attr("placeholder",a.placeholder).datepicker(P.extend(ne(a),{onSelect:function(e,t){var n,i=t.selectedMonth-0+1+"",r=t.selectedDay+"";1===i.length&&(i="0"+i),1===r.length&&(r="0"+r),n=t.selectedYear+"-"+i+"-"+r,s=o.val(),a.onChange&&a.onChange(n),l=!0,o.focus(),setTimeout(function(){l=!1},200)},beforeShow:function(){if(setTimeout(function(){P(".ui-datepicker").css("z-index",parseInt(o.closest(".ui-front, .sk-pagepanel").css("z-index")||0,10)+1)},0),l)return!1}})).on("click",function(){o.datepicker("show")})).datepicker("widget").click(function(e){e.stopPropagation()}),e&&o.datepicker("setDate",e),s=o.val(),o.bind("change keyup",function(){var e,t=P(this).val();t!=s&&(e=""!==(s=t)?i(o.datepicker("getDate")):"",a.onChange&&a.onChange(e))}),o}},DATETIME:{edit:function(s){var e,l=P("<div>"),c=P("<input>"),u=!1;s.value&&(e=_(s.value),l.data("usedate",e)),c.attr("placeholder",s.placeholder).datepicker(P.extend(ne(s),{onSelect:function(e,t){var n,i,r,a=new Date,o=l.data("usedate");o?n=N.getLocalDateTime(o):(n=N.getLocalDateTime(a)).setHours(0,0,0,0),n.setFullYear(t.selectedYear,t.selectedMonth,t.selectedDay),i=N.getRealJSDateTimeFromLocal(n),r=M(i),s.onChange&&s.onChange(r),l.data("usedate",i),u=!0,c.focus(),setTimeout(function(){u=!1},200)},beforeShow:function(){if(setTimeout(function(){P(".ui-datepicker").css("z-index",parseInt(c.closest(".ui-front, .sk-pagepanel").css("z-index")||0,10)+1)},0),u)return!1}})).click(function(){c.datepicker("show")}),s.value&&e&&c.datepicker("setDate",N.getLocalDateTime(e)),c.datepicker("widget").click(function(e){e.stopPropagation()});var t,n,i,r,a,o=c.val(),d=P("<div>").addClass("nx-dt-timewrapper");c.bind("change keyup",function(){if(P(this).val()!=o){var e;if(o=P(this).val(),""!==P(this).val()){var t,n,i=c.datepicker("getDate")||new Date;i.setHours(0,0,0,0),(t=N.getLocalDateTime(l.data("usedate")||i)).setFullYear(i.getFullYear(),i.getMonth(),i.getDate()),n=N.getRealJSDateTimeFromLocal(t),e=M(n),l.data("usedate",n)}else e="",l.data("usedate",null);s.onChange&&s.onChange(e)}}).addClass("nx-dt-dateinput"),t=new Date,e?n=N.getLocalDateTime(e):(n=N.getLocalDateTime(t)).setHours(0,0,0,0);var f,p,h=O.userLocale,g=h.timeFormat,m=N.amPm,v=function(e){var t=f+1<g.length&&g.charAt(f+1)===e;return t&&f++,t},y=!1,b=function(){var e,t=N.getLocalDateTime(l.data("usedate")||new Date);t.setHours((parseInt(i.val(),10)+(a&&"pm"===a.val()?12:0))%24),t.setMinutes(r.val()),e=N.getRealJSDateTimeFromLocal(t),l.data("usedate",e),s.onChange&&s.onChange(M(e))},S=function(e){d.append(P("<span>"+e+"</span>"))},w=function(e,t,n,i){e.append(P("<option "+(n?"selected ":"")+'value="'+t+'">'+(i&&t<10?"0"+t:t)+"</option>"))};for(f=0;f<g.length;f++){var C,I;if(p=g.charAt(f),y)"'"!==p||v("'")?S(p):y=!1;else switch(p){case"a":if(!a){var k=n&&12<=n.getHours();a=P("<select>").html("<option "+(k?"":"selected ")+'value="am">'+m[0]+"</option><option "+(k?"selected ":"")+'value="pm">'+m[1]+"</option>").appendTo(d).on("change",b)}break;case"h":case"K":case"k":case"H":if(!i){i=P("<select>"),I=v(p);for(var T,x="h"===p||"K"===p?12:24,D=0;D<x;D++)T="h"===p&&0===D?12:"k"===p?D-0+1:D,C=!1,n?C=D===(12<x?n.getHours():n.getHours()%12):8===D&&(C=!0),i.append(P("<option "+(C?"selected ":"")+'value="'+D+'">'+(I&&T<10?"0"+T:T)+"</option>"));i.appendTo(d).on("change",b)}break;case"m":if(!r){r=P("<select>"),I=v("m");var R,E=s.minuteIncrement||5,A=n?n.getMinutes():0,F=n&&A%E==0;for(R=0;R<60;R+=E)C=R===A,!F&&A<R&&(w(r,A,!0,I),F=!0),w(r,R,C,I);r.appendTo(d).on("change",b)}break;case"'":v("'")?S("'"):y=!0;break;default:S(g.charAt(f))}}return h&&h.showTimeBeforeDate?l.append(d,c):l.append(c,d),l}},ENTITY:{edit:function(n){n||(n={});var e,t,i,r,a=P('<div style="position: relative;">'),o=n.value,s=n.readOnly,l=function(){var e=n.dataSource;return O.isFunction(e)?e():e||A.dataSource.get(A.platform.getDefaultDataSourceName())},c=n.getErrorContainer||function(){var e=a.parent(),t=e.find(".nx-property-error");return t.length||(t=P("<div>").addClass("nx-property-error").css("margin-top","8px").insertAfter(a),e.css("display","block")),t},u=n.invalidEntryMessage||"Please select a valid entity.",d="x-metadata";return s?(t=l(),e=o,t&&t.dataSourceType&&(t.dataSourceType.prop&&O.size(t.dataSourceType.prop(d))?(i=t.dataSourceType.prop(d)[o])&&i.label&&(e=i.label):t.dataSourceType.getEntityLabel&&(r=t.dataSourceType.getEntityLabel(o,t))&&(e=r)),a.addClass("nx-fieldtext").css("margin-top","6px").text(e||"")):a.append(ae(p).edit({appendDropdown:!0,entries:function(e){var t=n.filter;return O.isFunction(t)?t(e):l().getEntityList()},getErrorContainer:c,invalidEntryMessage:u,onChange:function(e,t){l().getEntityMetadata({entities:{objectName:e},ignoreMetadataOverrides:!0}).then(function(){o=e,n.onChange&&n.onChange(e,t)}).catch(function(e){c().show().text(e)})},parentElem:a,restrictToEntries:!0,showLabelInTextInput:n.showLabelInTextInput,value:o})),a}},INTEGER:{read:function(e){return e||(e={}),P.extend(e,{decimalPlaces:0}),te(e)}},MULTIPICKLIST:{edit:function(a){a.valueDelimiter||(a.valueDelimiter=";");var n,e=a.value,o=a.checkboxSetName,t=a.entries,s=a.maxSelected,l=a.valueDelimiter,i=a.selectedList||0===a.selectedList?a.selectedList:3,r=a.selectedText||F("Number_Selected"),c=a.noneSelectedText||F("None_Selected"),u=!1,d=a.required||!1;e||(e="");var f,p=e.length?e.split(l):[],h=s&&p.length>=s,g=a.element||P("<div>"),m=e;if("CHECKBOXES"===a.renderas)g.addClass("nx-fieldtext").css("padding","0px"),n=function(){if(!u){u=!0;var t,e=g.find('input[type="checkbox"]'),n=e.filter(function(){return P(this).prop("checked")}).map(function(){return this.value}).get();if(s)if(n.length>=s){t=[];var i=0;e.each(function(){var e=P(this);if(e.prop("checked")){if(i++<s)return t.push(e.val()),!0;e.prop("checked",!1)}e.prop("disabled",!0)})}else e.each(function(){P(this).prop("disabled")&&P(this).prop("disabled",!1)});f=(s&&t?t:n).join(l),a.onChange&&a.onChange(f,m),m=f,u=!1}},P.each(t,function(e,t){if(t.value){var n="";-1!==P.inArray(t.value,p)&&""!==t.value&&(n='checked="yes"');var i=P("<div>").addClass("nx-checkboxwrapper"),r=P("<input "+n+' type="checkbox">').val(t.value).prop("id","mscb_"+o+"_"+t.value).addClass("nx-checkbox").appendTo(i),a=P("<div>").addClass("nx-checkboxlabel").appendTo(i);h&&!n&&r.prop("disabled",!0),a.append(P("<label>").html(L(t.label)).prop("for","mscb_"+o+"_"+t.value)),g.append(i)}}),g.off(),g.on("change","input",function(){n()});else{var v=P('<select multiple="multiple">').appendTo(g);P.each(t,function(e,t){var n,i="";-1!==P.inArray(t.value,p)&&""!==t.label&&(i='selected="selected"'),n=P("<option "+i+">").attr("value",t.value).text(t.label),v.append(n)}),n=function(){if(!u){u=!0;var n,e,i,r={},t=v.multiselect("getChecked").map(function(){return r[this.value]=1,this.value}).get();s&&(e=v.multiselect("widget").find('input[type="checkbox"]'),t.length>=s?(n=[],i=0,e.each(function(){var e=P(this),t=e.val();if(e.prop("checked")){if(i++<s)return n.push(t),r[t]=1,!0;delete r[t],this.click()}e.prop("disabled",!0).closest("label").addClass("ui-state-disabled")}),v.children().each(function(){var e=P(this);r[e.val()]?e.attr("aria-selected","true"):e.prop("disabled",!0).removeAttr("aria-selected")})):(v.children().each(function(){var e=P(this);e.prop("disabled",!1).attr("aria-selected",r[e.val()]?"true":"false")}),e.each(function(){P(this).prop("disabled",!1).closest("label").removeClass("ui-state-disabled")}))),f=(s&&n?n:t).join(l),a.onChange&&a.onChange(f,m),m=f,u=!1}},v.multiselect({selectedText:r,noneSelectedText:c,checkAllText:F("Check_All"),uncheckAllText:F("Uncheck_All"),selectedList:i,position:a.position,autoOpen:!1,classes:d?"required":"",close:function(){P(this).parent().find("button.ui-multiselect").removeAttr("tabindex").focus(),O._ie&&P(this).multiselect("disable")&&P(this).multiselect("enable"),a.onClose&&a.onClose.call(this)},click:function(e,t){n(e,t)},open:function(){P(this).parent().find("button.ui-multiselect").attr("tabindex","-1"),v.multiselect("widget").find("li").on(b,function(e){e.which===S.TAB&&e.stopPropagation()})},create:function(){v.val()&&v.val().length>=s&&v.children().each(function(){var e=P(this);e.prop("selected")||e.prop("disabled",!0).removeAttr("aria-selected")}),a.onCreate&&a.onCreate.call(this)}}).on("multiselectcheckall multiselectuncheckall",function(e,t){n(e,t)});var y=v.data("echMultiselect")||v.data("ech-multiselect");y&&y.menu&&y.menu.on("focusin",function(e){e.stopPropagation()}),v.multiselect("getButton").attr({role:"button",tabindex:0}).on(b,function(e){if(e.which===S.ENTER||e.which===S.SPACE){var t=v.multiselect("isOpen")?"close":"open";v.multiselect(t)}}),5<t.length&&v.multiselectfilter({label:"",placeholder:F("Enter_keywords")})}return g}},PERCENT:{read:function(e){return e||(e={}),P.extend(e,{suffix:"%"}),te(e)}},PICKLIST:{edit:function(e){var t,n,i,r,a=e.entries,o="change.skuid",s=e.onChange;if(O.isFunction(a)&&(a=a()),"RADIO_BUTTONS"===e.renderas)t=P("<div>").addClass("nx-fieldtext").css("padding","0px"),i=function(){return t.find("input:checked").first().val()},n=ee(e.value,a,{makeNoneOption:!e.required||e.addNoneOption,mode:e.mode,buttonSetName:e.buttonSetName,noneLabel:e.noneLabel}),P.each(n,function(){t.append(this)}),s&&(r=i(),t.off(o).on(o,"input",function(){s(i(),r),r=i()}));else{t=P("<select>");var l=!1,c=e.value||""===e.value||0===e.value,u={},d=e.defaultValue,f=!1,p=[],h=c?e.value:"",g=O.isString(h)?h.replace(/\"/g,'\\"'):h,m=O.isString(d)?d.replace(/\"/g,'\\"'):d;a&&P.each(a,function(e,t){var n=t.value,i=P("<option>").attr("value",n).text(t.label);!0===t.disabled&&i.prop("disabled",!0),u[n]=i,p.push(i)}),h&&O.isUndefined(u[h])&&(u[h]=P("<option>").attr("value",h).text(e.label?e.label:h),p.unshift(u[h])),e.required&&!e.addNoneOption||p.unshift(P("<option>").attr("value","").text(Z(e.noneLabel))),p.length&&t.append(p),c&&h in u&&(l=!0),c&&l?(t.val(h),t.children('[value="'+g+'"]').attr("selected",!0)):void 0!==d&&d in u&&(t.val(d),t.children('[value="'+m+'"]').attr("selected",!0),f=!0),s&&(r=t.val(),t.off(o).on(o,function(){s(t.val(),r),r=t.val()})),!e.required||c&&l||(f=!0),f&&s&&t.val()&&s(t.val())}return t}},TEXT:{edit:function(t){var e=t.inputType,n=t.onChange,i={},r=P("<input "+(e?' type="'+e+'"':"")+">").val(t.value),a=P("<div>");if(["inputMode","maxLength",l].forEach(function(e){t[e]&&(i[e.toLowerCase()]=t[e])}),O.size(i)&&r.attr(i),n&&O.delayInputCallback(r,function(e,t){n(e,t)},{dataPropertyName:t.dataPropertyName}),a.append(r),void 0!==t.length){var o=ie(a,t);r.on("input",function(){o(r.val().length)})}return a}},TEXTAREA:{edit:function(e){var n=e.onChange,t=e.displayRows,i=e[l],r=P("<div>"),a=P("<textarea>").val(e.value).appendTo(r);if(t?a.attr("rows",t).css({height:"100%"}):a.flexText(),i&&a.attr(l,i),O.delayInputCallback(a,function(e,t){n&&n(e,t)}),void 0!==e.length){var o=ie(r,e);a.on("input",function(){o(a.val().length)})}return r}},RICHTEXT:{edit:function(a){a||(a={});var o,s=P("<div>").append(P('<div class="nx-spinner">'));return a.initialize=function(){a.initialize._initializeWhenReady=!0},A.utils.loadRichTextApi(function(){var i,r,e=a.config||{},t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);function n(){if(!s.parent().hasClass("disabled")&&!o){r.off("click.sk-richtext focus.sk-richtext"),i.removePlugins="ckeditor-gwf-plugin",o=A.CKEDITOR.inline(r[0],i),s.parent().attr("sk-ckeditorname",o.name),o.config.customConfig=O.getStaticResourceUrl("CKEditor","skuid","config.js",O.getCacheTimestamp()),o.config.uiColor="#DDDDDD",A.utils._oniOS()&&A.utils._inIframe()&&(o.on("contentDom",n),P(r[0]).on("click",n));var t=2,e=function(e){a.onChange&&a.onChange(e,t)};o.on("change",function(){e(o.getData())}),o.on("mode",function(){t=2!==t&&!t}),o.on("key",function(){t&&e(o.getData())}),a.onCreated&&a.onCreated(o),a.afterInit&&a.afterInit({ckInstance:o})}function n(){var e=P(".cke"),t=P(e[e.length-1]);t.insertAfter(P(r[0])),t&&(t.removeClass("cke-sf1-fix"),t.addClass("cke-sf1-fix"))}}e instanceof Array&&(e=P.extend.apply(this,P.map(e,function(e){return"function"==typeof e&&(e=e()),e}))),i={allowedContent:!0,disallowedContent:"style script iframe",toolbar:t?"Mobile":"FieldEditor"},"function"==typeof e?e(i):i=P.extend(i,e),r=P('<div class="nx-richtext-input" id="'+O.generateUniqueId()+'">').on("click.sk-richtext focus.sk-richtext",n),a.value&&r.html(a.value),s.parent().hasClass("disabled")?r.attr("sk-contenteditabledisabled","true"):r.attr("contenteditable","true"),s.empty().append(r),!0===a.initialize._initializeWhenReady?(n(),a.initialize=function(){}):a.initialize=n}),s}},COLOR:{read:function(e){e||(e={});var t=e.color||e.value;return P('<div class="sk-colorpicker"><div class="sk-colorpicker-wrapper"><div class="nx-field">'+t+'</div><div><div class="sk-colorpicker-preview-wrapper sk-transparency-background"><div class="sk-colorpicker-preview" style="background-color:'+t+'; cursor:default"></div></div></div></div></div>')},edit:function(e){e||(e={});var S=e.color||e.value;void 0===S&&(S="#000000");var i=e.onChange,w=P('<div class="sk-colorpicker"><div class="sk-colorpicker-wrapper"><div class="nx-field"><input placeholder="'+(e.placeholder?e.placeholder:"")+'"></div><div><div class="sk-colorpicker-preview-wrapper sk-transparency-background"><div class="sk-colorpicker-preview"></div></div></div></div></div>'),r=w.find("input").val(S),a=w.find(".sk-colorpicker-preview").css({"background-color":S}),o={black:"#000000",white:"#ffffff",red:"#ff0000",orange:"#ffa500",yellow:"#ffff00",green:"#008000",blue:"#0000ff",purple:"#800080",violet:"#ee82ee",rebeccapurple:"#663399"},s=e.colorSwatches||["transparent","rgba(0%,0%,0%,0.5)","\t","red","orange","yellow","green","blue","purple","violet","#663399","\n","\n","white","black","\t","#c0504d","#f79646","#eeece1","#9bbb59","#1f497d","#4f81bd","#4bacc6","#8064a2","\n","#f2f2f2","#7f7f7f","\t","#f2dcdb","#fdeada","#ddd9c3","#ebf1dd","#c6d9f0","#dbe5f1","#dbeef3","#e5e0ec","\n","#d8d8d8","#595959","\t","#e5b9b7","#fbd5b5","#c4bd97","#d7e3bc","#8db3e2","#b8cce4","#b7dde8","#ccc1d9","\n","#bfbfbf","#3f3f3f","\t","#d99694","#fac08f","#938953","#c3d69b","#548dd4","#95b3d7","#92cddc","#b2a2c7","\n","#a5a5a5","#262626","\t","#953734","#e36c09","#494429","#76923c","#17365d","#366092","#31859b","#5f497a","\n","#7f7f7f","#0c0c0c","\t","#632423","#974806","#1d1b10","#4f6128","#0f243e","#244061","#205867","#3f3151"];function C(e){w.trigger("sk-colorselected",[e])}function I(e){void 0===e&&(e=S),w.trigger("sk-colorpreview",[e])}O.delayInputCallback(r,function(e){C(e)}),w.on("sk-colorpreview",function(e,t){a.css({"background-color":t||S})}).on("sk-colorselected",function(e,t){if(t!==S){var n=S;S=t,r.val()!==S&&r.val(S),a.css({"background-color":S}),i&&i(S,n)}});var t=e.popup=function(){var l=null;function h(){l&&(w.trigger("sk-popup-hide"),P(window).off("resize.sk-colorpicker scroll.sk-colorpicker"),P(document.body).off("mousedown.sk-colorpicker keyup.sk-colorpicker"),l.fadeOut(function(){l.remove(),l=null,I()}))}function e(){l&&l.position({my:"left top",at:"left bottom",of:r,collision:"fit flip"})}function p(e,t,n){var i=t/150,r=(150-n)/150*(1-t/150*.5),a=y(m(e.hue/360,i,r),{alpha:e.aplha});return e.sat=Math.round(100*i),e.lum=Math.round(100*r),a}function g(e){return{hue:Math.round(360*e[0]),sat:Math.round(100*e[1]),lum:Math.round(100*e[2]),alpha:P.isNumeric(e[3])?e[3]:1}}function m(e,t,n){var i,r,a;if(0===t)i=r=a=n;else{var o=n<.5?n*(1+t):n+t-n*t,s=2*n-o;i=l(s,o,e+1/3),r=l(s,o,e),a=l(s,o,e-1/3)}return[Math.min(255,Math.max(0,Math.round(255*i))),Math.min(255,Math.max(0,Math.round(255*r))),Math.min(255,Math.max(0,Math.round(255*a)))];function l(e,t,n){return n<0&&(n+=1),1<n&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}}function v(e,t,n,i){var r=1;e instanceof Array&&(i=t,r=e[3],n=e[2],t=e[1],e=e[0]),i||(i={hue:0,sat:0}),e/=255,t/=255,n/=255;var a,o,s=Math.max(e,t,n),l=Math.min(e,t,n),c=(s+l)/2;if(s==l)a=o=0;else{var u=s-l;switch(o=.5<c?u/(2-s-l):u/(s+l),s){case e:a=(t-n)/u+(t<n?6:0);break;case t:a=(n-e)/u+2;break;case n:a=(e-t)/u+4}a/=6}return 0===o&&(a=i.hue/360),0!=c&&1!=c||(o=i.sat/100),[a,o,c,r]}function y(e,t){var n=e[0],i=e[1],r=e[2],a=e[3];return P.isNumeric(a)||(a=P.isNumeric(t.alpha)?t.alpha:1),a<1||!0===t.ignoreAlpha?"rgba("+n+","+i+","+r+","+a+")":"#"+("0"+n.toString(16)).slice(-2)+("0"+i.toString(16)).slice(-2)+("0"+r.toString(16)).slice(-2)}function b(e){if(e in o&&(e=o[e]),/^\s*#/.test(e))return e=(/[a-f0-9]{6}/.exec(e)||[""])[0],[parseInt(e.slice(0,2),16)||0,parseInt(e.slice(2,4),16)||0,parseInt(e.slice(4,6),16)||0,1];if(/^\s*rgb/i.test(e)){for(var t,n=[],i=/(\d*\.)?\d+%?/g;t=(i.exec(e)||[""])[0];)n.push(-1===t.indexOf("%")?parseFloat(t):parseFloat(2.55*t.replace("%","")));return[Math.round(n[0]),Math.round(n[1]),Math.round(n[2]),P.isNumeric(n[3])?n[3]:1]}return[0,0,0,1]}return{show:function(){l||(l=function(){var e=P('<div class="sk-colorpicker-popup ui-widget ui-widget-content ui-corner-all"><div class="sk-colorpicker-popup-contents"><div class="sk-colorpicker-popup-panel sk-swatch-panel"></div><div class="sk-colorpicker-popup-panel sk-gradient-panel"></div></div></div>').on("click",function(e){e.stopPropagation()}),t=e.find(".sk-swatch-panel"),n=e.find(".sk-gradient-panel");return function(e){for(var t,n,i,r=e.colors.slice(0),a=e.panel,o=function(e){return function(){I(e)}},s=function(){return function(){I()}},l=function(e){return function(){C(e)}},c=function(e){return function(){C(e),h()}},u=P("<div>").addClass("sk-colorpicker-table").appendTo(a),d=0;0<r.length;){for(n=P("<div>").addClass("sk-colorpicker-row sk-row-"+d).appendTo(u),t=0;0<r.length;t++){var f,p=r.shift();if("\n"===p)break;i=P("<div>").addClass("sk-colorpicker-cell sk-cell-"+t).appendTo(n),"\t"!==p&&(i.addClass("sk-transparency-background"),f=p,P("<div>").css({"background-color":f}).addClass("sk-colorpicker-swatch").on("mouseover",o(f)).on("mouseout",s()).on("click",l(f)).on("dblclick",c(f)).appendTo(i))}d++}}({colors:s,panel:t}),function(e){var t=e.panel,a=g(v(b(S))),o=!1,s=P('<div class="sk-colorpicker-gradient"><div class="sk-colorpicker-gradient-layer1"><div class="sk-colorpicker-gradient-layer2"></div></div></div>').appendTo(t).on("mousemove",function(e){I(p(a,e.offsetX,e.offsetY))}).on("mouseout",function(){I()}).on("click",function(e){C(p(a,e.offsetX,e.offsetY)),r()}).on("dblclick",function(e){C(p(a,e.offsetX,e.offsetY)),h()}),n=P('<div class="sk-colorpicker-hsl"><div class="sk-hsl-preview"></div><div class="sk-colorpicker-slider sk-hsl-h"></div><div class="sk-colorpicker-slider sk-hsl-s"></div><div class="sk-colorpicker-slider sk-hsl-l"></div><div class="sk-colorpicker-slider sk-alpha"></div></div>').appendTo(t),i=n.find(".sk-hsl-preview").css("background-color",S),l=n.find(".sk-hsl-h").slider({orientation:"vertical",min:0,max:360,step:1,slide:f,change:f}),c=n.find(".sk-hsl-s").slider({orientation:"vertical",min:0,max:100,step:1,slide:f,change:f}).append(P('<div class="layer1"><div class="layer2"></div></div>')),u=n.find(".sk-hsl-l").slider({orientation:"vertical",min:0,max:100,step:1,slide:f,change:f}).append(P('<div class="layer1"><div class="layer2_1"></div><div class="layer2_2"></div></div>')),d=n.find(".sk-alpha").slider({orientation:"vertical",min:0,max:1,step:.01,slide:f,change:f}).append(P('<div class="layer1 sk-transparency-background"><div class="layer2"></div></div>'));function r(e){o=!0,l.slider("value")!==a.hue&&l.slider("value",360-a.hue),c.slider("value")!==a.sat&&c.slider("value",a.sat),u.slider("value")!==a.lum&&u.slider("value",a.lum),d.slider("value")!==a.alpha&&d.slider("value",a.alpha),o=!1,f({supressEventNotification:e})}function f(e){if(!o){var t=Math.round(360-l.slider("value")),n=Math.round(c.slider("value")),i=Math.round(u.slider("value")),r=d.slider("value");a.hue!==t&&(a.hue=t),a.sat!==n&&(a.sat=n),a.lum!==i&&(a.lum=i),a.alpha!==r&&(a.alpha=r),function(e){var t="hsl("+e.hue+",100%,50%)",n={"background-color":t};s.css(n),c.find(".layer1").css(n),u.find(".layer1").css(n),d.find(".layer2").css({"background-image":"linear-gradient(to bottom, "+t+", rgba(204, 154, 129, 0))"})}(a),!0!==e.supressEventNotification&&C(y(m(a.hue/360,a.sat/100,a.lum/100),{alpha:a.alpha}))}}P.each(new Array(6),function(e){l.append(P('<div class="layer1_'+(e+1)+'">'))}),r(!0),w.on("sk-colorselected.gradientbox",function(e,t){i.css("background-color",t),a=g(v(b(t),a)),r(!0)}).on("sk-popup-hide",function(){w.off("sk-colorselected.gradientbox")})}({panel:n}),e}().appendTo(document.body),e(),P(window).on("resize.sk-colorpicker scroll.sk-colorpicker",e),P(document.body).on("mousedown.sk-colorpicker",function(e){var t=e.clientX,n=e.clientY,i=l.offset(),r=i.left-P(window).scrollLeft(),a=i.top-P(window).scrollTop(),o=r+l.outerWidth(),s=a+l.outerHeight();(t<r||o<t||n<a||s<n)&&h()}).on("keyup.sk-colorpicker",function(e){27===e.keyCode&&h()}))},hide:h}}();return a.on("click",t.show),w}}},o={TEXT:{read:function(e,t){t||0===t||(t=""),e.options&&"PASSWORD"===e.options.type&&(t=Array(t.length+1).join("*")),O.isString(t)||(t=""+t);var n,i=e.options.maxDisplayCharacters,r=e.metadata,a=r&&r.displaytype===R,o=e.model.getDataSourceType(),s=!1;if(a&&(!t||O.contains(t,"//")||U(t,"/")||(t="http://"+t),i||(i=40)),n=t,i&&(i-=0),!isNaN(i)&&0<i&&i<t.length&&(t=t.substring(0,i)+"..."),o&&o.getNameFieldURLForTextField){var l=o.getNameFieldURLForTextField(e,n,t);l&&(s=!0,t=l)}a&&!l&&(t='<a href="'+L(n)+'">'+L(t)+"</a>"),X(e,r&&r.htmlFormatted?O.removeScriptTags(t):O.nl2br(s?t:L(t)))},readonly:function(e,t){oe(x).read(e,t)},edit:function(t,e,n){var i,r=t.options,a=Q(t);e||0===e||(e=""),i={inputType:n,value:e,onChange:function(e){t.model.updateRow(t.row,t.id,e,t._getUpdateRowOptions())}},r&&"PASSWORD"===r.type&&(i.inputType="password"),a&&(i[l]=a),t.options.showLengthCounter&&t.metadata.length&&(i.length=t.metadata.length),t.element.append(ae(x).edit(i),P("<div>").addClass("sk-focusbar"))}},TEXTAREA:{read:function(e,t){e._ckInstance&&(e._ckInstance.destroy(),delete e._ckInstance),oe(e,x).read(e,t)},readonly:function(e,t){oe(D).read(e,t)},edit:function(t,e){var n=t.options||{},i=Q(t),r=n.displayRows,a=n.showLengthCounter?t.metadata.length:void 0;e||0===e||(e=""),t.metadata.htmlFormatted?(t.disableBlur=!0,t.element.append(ae(T).edit({afterInit:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};t._ckInstance=e.ckInstance},config:[{uiColor:"#DDDDDD"},n.ckEditorConfig||{}],field:t,length:a,onChange:function(e){t.model.updateRow(t.row,t.id,e,t._getUpdateRowOptions())},value:e}))):t.element.append(ae(D).edit({displayRows:r,length:a,onChange:function(e){t.model.updateRow(t.row,t.id,e,t._getUpdateRowOptions())},placeholder:i,value:e}))},destroy:function(e){var t;e.metadata.htmlFormatted&&(t=ae(T)).destroy&&t.destroy({field:e})}},RICHTEXT:{read:function(e,t){return e.metadata.htmlFormatted=!0,oe(e,D).read(e,t)},readonly:function(e,t){return oe(T).read(e,t)},edit:function(e,t){return e.metadata.htmlFormatted=!0,oe(e,D).edit(e,t)}},DOUBLE:{read:function(e,t,n,i){var r,a=e.metadata,o=e.options.decimalPlaces;o||"0"===o?r=parseInt(o,10):a&&a.scale&&(r=a.scale),r&&O.isNumber(r)||(r=0),X(e,ae(j).read({value:t,decimalPlaces:r,prefix:n,suffix:i}))},readonly:function(e,t){oe(j).read(e,t)},edit:function(y,e){e||0===e||(e="");var b=O.userLocale,t=y.options||{},S=P('<input inputmode="numeric">').attr("placeholder",t.placeholder).val(""!==e&&P.isNumeric(e)?P.number(e,y.metadata&&y.metadata.scale?y.metadata.scale:0,b.decimalsSeparator,b.thousandsSeparator):e);O.delayInputCallback(S,function(e){var t,n,i=y.metadata.displaytype,r=!1,a=b.thousandsSeparator,o=b.decimalsSeparator,s=e.indexOf(o),l=e.split(o),c=l[0],u=parseInt(l[1],10),d=l[1]?l[1].length:0,f=u.toString().length,p=S.val(),h=p.toLowerCase().charAt(p.length-1),g=Math.pow(10,{k:3,m:6,b:9,t:12}[h]),m=g/10,v=null===new RegExp("[^\\dbkm"+("."===o?"\\"+o:o)+("."===a?"\\"+a:a)+"-]|[bkm"+o+"]{2,}","ig").exec(p);if("."===a&&(a="\\."),e=e.toString().replace(new RegExp(a,"g"),"").replace(o,"."),t=parseInt(e,10),""===c?c=0:"-"===c&&(c=-0),v&&0==isNaN(g))if(-1!==s){for(;1<f;f--)m/=10;for(n=0;n<d&&"0"===l[1][n];n++)m/=10;e=c*g+(m=0<=c&&0<1/c?u*m:-u*m)}else e=t*g;e&&(r=i===V?parseInt(e,10):parseFloat(e)),!1===r||O.isExactlyNaN(r)||(e=r),y.model.updateRow(y.row,y.id,e,y._getUpdateRowOptions())}),y.element.append(S)}},INTEGER:{read:function(e,t){X(e,ae(V).read({value:t}))},readonly:function(e,t){oe(V).read(e,t)},edit:function(e,t){oe(e,j).edit(e,t)}},PERCENT:{read:function(e,t){oe(e,j).read(e,t,"","%")},readonly:function(e,t){oe(C).read(e,t)},edit:function(e,t){oe(e,j).edit(e,t)}},CURRENCY:{read:function(e,t){var n,i,r=e.metadata,a=e.options?e.options.decimalPlaces:null,o=e.row;a||"0"===a||0===a?n=parseInt(a,10):r&&r.scale&&(n=r.scale),n&&O.isNumber(n)||(n=0),""!==t&&o&&O.isMultiCurrencyOrganization&&(i=O.getRowCurrency({row:o,model:e.model,field:e.id})),X(e,ae(d).read({value:t,decimalPlaces:n,valueCurrencyCode:i}))},readonly:function(e,t){oe(d).read(e,t)},edit:function(e,t){oe(e,j).edit(e,t)}},BOOLEAN:{read:function(e,t){var n=P("<div>").addClass("nx-fieldtext").css("padding","0px"),i=P('<input type="checkbox">').prop({checked:t,disabled:"true"});n.append(i),e.editable&&"readonly"!==e.mode&&n.append('<div class="focusbox" tabindex="0"/>'),e.element.append(n)},readonly:function(e,t){oe(u).read(e,t)},edit:function(t,e){"true"===e&&(e=!0),t.element.append(ae(u).edit({value:e,onChange:function(e){t.model.updateRow(t.row,t.id,e,{initiatorId:t._GUID})}}))}},DATE:{read:function(e,t){X(e,N.makeFormattedDate(t))},readonly:function(e,t){oe(g).read(e,t)},edit:function(t,e){var n=t.options;t.element.append(ae(g).edit({value:e,renderas:n.type,showMonthPicker:n.showMonthPicker,showYearPicker:n.showYearPicker,showTodayButton:n.showTodayButton,yearPickerRange:n.yearPickerRange,placeholder:n.placeholder,onChange:function(e){t.model.updateRow(t.row,t.id,e,t._getUpdateRowOptions())}}))}},DATETIME:{read:function(e,t){X(e,N.makeFormattedLongDateTime(t))},readonly:function(e,t){oe(m).read(e,t)},edit:function(t,e){var n=t.options;t.element.append(ae(m).edit({value:e,showMonthPicker:n.showMonthPicker,showYearPicker:n.showYearPicker,showTodayButton:n.showTodayButton,yearPickerRange:n.yearPickerRange,minuteIncrement:n.minuteIncrement,placeholder:n.placeholder,onChange:function(e){t.model.updateRow(t.row,t.id,e,t._getUpdateRowOptions())}}))}},EMAIL:{read:function(e,t){t||0===t||(t=""),""!==t&&(t='<a href="mailto:'+(t=L(t))+'">'+t+"</a>"),X(e,t)},edit:function(e,t){oe(e,x).edit(e,t,"email")},readonly:function(e,t){oe(v).read(e,t)}},LOCATION:{read:function(e,t){var n,i,r,a="",o=e.options.type||e.metadata.type||"DECIMAL";t&&(n=t.latitude,i=t.longitude,"DECIMAL"===o?(n=(r=function(e){var t=(e+"").split(".");return P.number(e,1<t.length?t[1].length:1,".","")+""})(n))&&(a+=n):(n=(r=function(e,t){var n=e<0,i=Math.abs(e),r=Math.floor(i),a=60*(i-r),o=Math.floor(a);return r+"&deg;"+o+"&#39;"+Math.round(60*(a-o))+"&#39;&#39;"+(t?n?"S":"N":n?"W":"E")})(n,!0))&&(a+=n),a+=" ",(i=r(i))&&(a+=i)),X(e,a)},edit:function(e){var t=e.row,n=e.model,i=e.id,r=i.substring(0,i.length-1),a=r+"Latitude__s",o=r+"Longitude__s",s=new A.ui.Field(t,n,null,{fieldId:a}),l=new A.ui.Field(t,n,null,{fieldId:o});s.render(),l.render(),e.element.append(s.element,l.element)},readonly:function(e,t){oe(y).read(e,t)}},PHONE:{read:function(e,t){if(window.sforce&&t&&f.showClick2Dial){oe(e,x).read(e,t);var n=f.click2Dial;n||(n=J),e.element.css("white-space","nowrap").append(P('<div class="sk-click2dial-wrapper">').append(P('<span class="ui-icon sk-icon sk-icon-phone inline">').attr("title","Click to dial")).on("click.skuid",function(){n(e)}).css("cursor","pointer")),e.element.children().css({display:"inline-block"})}else{var i;i=t||"0"===t?(t+="").replace(/\D+/g,""):(t="",!1),""!==t&&(t=L(t),(i||"0"===i)&&(t='<a href="tel:'+i+'">'+t+"</a>")),X(e,t)}},edit:function(e,t){oe(e,x).edit(e,t,"tel")},readonly:function(e,t){oe(I).read(e,t)}},PICKLIST:{read:function(e,t,n){var i,r,a,o,s=P.extend({},e.options,n),l=e.metadata&&e.metadata.nameField,c=l?e.model.getDataSourceType():null,u=t,d=n&&n.picklistEntries||s.entries||s.picklistEntries;!0!==t&&!1!==t||(u=t+=""),d&&0!=d.length||(d=e.getValidPicklistEntries()),"RADIO_BUTTONS"===s.type?(a=P("<div>").addClass("nx-fieldtext").css("padding","0px"),o=ee(t,d,{makeNoneOption:!e.required||s.addNoneOption,mode:e.mode,buttonSetName:e.id+"_"+e._GUID,noneLabel:s.noneLabel}),P.each(o,function(){a.append(this)}),e.editable&&"readonly"!==e.mode&&a.append('<div class="focusbox" tabindex="0"/>'),e.element.append(a)):(d&&d.length&&P.each(d,function(){if(this.value==t)return this.label&&(u=this.label),!1}),l&&c&&c.getNameFieldURLForTextField&&(r=c.getNameFieldURLForTextField(e,t,u))&&(i=!0,u=r),X(e,u?i?u:L(u):""))},readonly:function(e,t,n){oe(k).read(e,t,n)},edit:function(t,e,n){var i=P.extend({},t.options,n);!0!==e&&!1!==e||(e+=""),t.element.append(ae(k).edit({addNoneOption:t.options.addNoneOption,buttonSetName:t.id+"_"+t._GUID,entries:i.picklistEntries||t.getValidPicklistEntries(),mode:t.mode,noneLabel:t.options.noneLabel,onChange:function(e){t.model.updateRow(t.row,t.id,e,{initiatorId:t._GUID})},renderas:t.options.type,required:t.required,value:e}))}},MULTIPICKLIST:{read:function(e,t,n,i){var r=P.extend({},e.options,i),a=i&&i.picklistEntries||r.entries||r.picklistEntries;n||(n=";");var o=P("<div>").addClass("nx-fieldtext"),s=t||"",l=s.split(n);if(a||(a=e.getValidPicklistEntries()),"CHECKBOXES"===e.options.type)o.css("padding","0px"),P.each(a,function(e,t){if(t.value){var n="";-1!==P.inArray(t.value,l)&&""!==t.value&&(n='checked="yes"');var i=P("<div>").addClass("nx-checkboxwrapper");i.append(P("<input "+n+' type="checkbox" value="'+t.value+'">').addClass("nx-checkbox").prop("disabled",!0)),i.append(P("<div>"+L(t.label)+"</div>").addClass("nx-checkboxlabel")),o.append(i)}});else if(s){var c={},u=[];P.each(a,function(e,t){c[t.value]=t.label}),P.each(l,function(){u.push(c[this]||this)}),o.html(L(u.join(", ")))}else o.html("");e.editable&&"readonly"!==e.mode&&o.append('<div class="focusbox" tabindex="0"/>'),e.element.append(o)},readonly:function(e,t,n,i){oe(w).read(e,t,n,i)},edit:function(t,e,n){var i=";";n=n||{},O.isString(n)?(i=n,n={}):i=n.valueDelimiter||i;var r=t.options;"CHECKBOXES"!==r.type&&(t.disableBlur=!0),t.element.append(ae(w).edit({value:e,defaultValue:t.metadata.defaultValue,entries:n.picklistEntries||t.getValidPicklistEntries(),renderas:r.type,onChange:function(e){t.model.updateRow(t.row,t.id,e,{initiatorId:t._GUID})},valueDelimiter:i,checkboxSetName:t.id+"_"+t._GUID,maxSelected:r.maxSelected,required:t.required,selectedList:r.selectedList}))}},BUTTON:{read:function(e){var t=e.options,n=t.fieldXML,i=A.component.factory({element:e.element,xmlDefinition:A.utils.makeXMLDoc("<button/>").attr({type:"multi",label:n.children("text").text(),icon:n.attr("icon")}).append(n.children("actions").clone()).append(n.children("enableconditions").clone()).append(n.children("renderconditions").clone()),state:{_parentComponentId:t.parentComponentId},context:{model:e.model,row:e.row}});e.subComponents.push(i)},readonly:function(e,t){oe(E).read(e,t)},edit:function(e,t){oe(E).read(e,t)}},COMBOBOX:{read:function(e,t){oe(e,k).read(e,t)},readonly:function(e,t){oe(p).read(e,t)},edit:function(n,i){n.element.off("click.skuidLinkHandler"),n.element.append(ae(p).edit({entries:function(){return n.getValidPicklistEntriesAccountingForDataSource()},getErrorContainer:function(){var e=n.element.find(".nx-error-inline");return e.length||(e=P("<div>").addClass("nx-error-inline").appendTo(n.element)),e},onChange:function(e){i=e;var t=n.model.updateRow(n.row,n.id,i,{initiatorId:n._GUID});return O.runningTests()&&A.events.publish("combobox.onchange"),t},parentElem:P("<div>").appendTo(n.element),restrictToEntries:n.metadata.limitEntries||!1,showLabelInTextInput:!0,value:i}))}},ARRAY:{read:function(i,e,t){t||(t={});var n,r,a=P("<div>").addClass("nx-fieldtext").appendTo(i.element),o=i.row,s=i.model.getFieldValue(i.row,i.id,!0),l=i.options.delimiter,c=t.dataPath||i.metadata.dataPath;l||(l=""),s&&(n=s,c&&(n=O.getObjectProperty(n,c)),r=n.length,P.each(n,function(e,t){var n=i.model.mergeRow(t,i.options.template,{parentRow:o,childRelName:i.id,allowHTML:i.options&&i.options.allowHTML,registerFields:!1});n.css("display","inline"),a.append(n),e+1!==r&&a.append("<span>"+l+"</span>")})),i.element.append(a)},readonly:function(e,t){oe(c).read(e,t)}},CHILDREL:{read:function(e,t){oe(e,c).read(e,t,{dataPath:e.metadata.dataPath||"records"})},readonly:function(e,t){oe(q).read(e,t)}},COMBO:{read:function(e){var t=P("<div>").addClass("nx-fieldtext").appendTo(e.element),n=e.options,i=n.fieldXML,r=i&&i.attr("redirecttype"),a=e.model.getDataSourceType(),o=void 0,s=e.model.getRowMergeResult(e.row,n.template,{allowHTML:n&&n.allowHTML,registerFields:!1});r&&a&&a.getNameFieldURLForReferenceField&&(o=a.getNameFieldURLForReferenceField(e,n.template,s.merges.html()));var l=Boolean(e.editable&&"readonly"!==e.mode&&s.fields&&s.fields.length);t.append(o||s.merges),l&&t.append('<div class="focusbox" tabindex="0"/>'),e.element.append(t).off("dblclick.skuid mouseenter.skuid mouseleave.skuid").css("cursor","auto")},readonly:function(e,t){oe($).read(e,t)},edit:function(o,e){oe($).read(o,e);var s=o.options,l=o.element,c=l.find(".focusbox").prop("tabindex","-1"),u=P('<input type="text">').addClass("nx-visuallyhidden"),d=o.model.getRowMergeResult(o.row,s.template).fields;if(d&&d.length){c.parent().prepend(u);var t=function(){var e=void 0,t="custompopup"===s.editModeBehavior,n=[{text:F("Done"),icons:{primary:"sk-icon-save sk-icon"},click:function(){P(this).dialog("close")}}];function i(){P(this).click().find(":input").first().focus()}function r(){var e=l.find("input"),t=l.find(".focusbox");e.length&&e[0]===u[0]&&e.attr("data-preventaction","true"),t.length&&t[0]===c[0]&&t.attr("data-preventaction","true")}function a(){var e=l.find("input"),t=l.find(".focusbox");e.length?e[0]!==u[0]&&e.attr("data-preventaction","true").focus():t[0]!==c[0]&&t.attr("data-preventaction","true").focus(),setTimeout(function(){e.removeAttr("data-preventaction"),t.removeAttr("data-preventaction")},100)}t?e=O.createPopupFromPopupXML(s.editModePopupXML,o,{open:i,close:a,beforeClose:r,buttons:n,modal:!0,resizable:!0}):((e=P('<div title="'+s.label+'" class="nx-editor"/>')).append(f.createFieldSet(d,{editor:o.editor})),e.dialog({resizable:!0,modal:!0,width:450,open:i,beforeClose:r,close:function(){a(),e.dialog("destroy").remove()},buttons:n})),o.editor.editModePopup=e};u.on("focus.skuid",function(){var e=P(this);e.attr("data-preventaction")?e.removeAttr("data-preventaction"):t()}),l.on("mouseenter.skuid mouseleave.skuid","> .nx-fieldtext",function(e){"mouseenter"===e.type?P(this).append(P("<div>").addClass("nx-edithover sk-icon-edit sk-icon inline").click(function(e){t(),e.stopPropagation()})):P(this).find("div.nx-edithover").remove()}).css("cursor","pointer")}}},CUSTOM:{read:function(e,t){var n=A.snippet.get(e.options.snippet);n&&n(e,function(e,t){var n=e.metadata;return n&&n.displaytype&&-1!=P.inArray(n.displaytype,K)?t:L(t)}(e,t))},readonly:function(e,t){oe(h).read(e,t)},edit:function(e,t){oe(h).read(e,t)}},FILE:{read:function(e){var t=P("<div>").addClass("nx-fieldtext").css({padding:"0px","min-height":"26px"}).appendTo(e.element);new(A.platform.FileComponent||O.FileComponent)(t,{model:e.model,row:e.row,displayAs:"filename",storeAs:"field",idField:e.id,deleteable:!1,editable:!1,_GUID:e._GUID})},readonly:function(e,t){oe(W).read(e,t)},edit:function(e,t){if(A.offline.networkDown())return oe(W).read(e,t),!1;var n=P("<div>").addClass("nx-fieldtext").appendTo(e.element);e.model.isRowNew(e.row)?(n.css({"font-size":"8pt",color:"#aaa"}),n.text("Save record before uploading files.")):(n.attr("id",O.generateGUID()).css("padding","0px"),new(A.platform.FileComponent||O.FileComponent)(n,{model:e.model,row:e.row,displayAs:"filename",storeAs:"field",idField:e.id,deleteable:!0,editable:!0,_GUID:e._GUID}))}},REFERENCE:{read:function(e,t){var n,i=t||0===t?L(e.calculateReferenceText()):"",r=e.model.getDataSourceType();if("skuid__Image__c"===e.metadata.ref)return oe(e,W).read(e,t),!1;i=O.nl2br(i),r&&r.getNameFieldURLForReferenceField&&(n=r.getNameFieldURLForReferenceField(e,t,i)),X(e,n||i)},readonly:function(e,t){oe(G).read(e,t)},edit:function(p,s){if(A.offline.networkDown())return oe(G).read(p,s),!1;if("skuid__Image__c"===p.metadata.ref)return oe(p,W).edit(p,s),!1;s||0===s||(s="");var n,i,r,a,h=p.element,g=p.options,m=P("<input>"),e=p.metadata.ref,l=p.metadata.referenceTo,t=e&&-1!=e.indexOf(","),c=p.metadata.dataSourceName?A.dataSource.getDataSource(p.metadata.dataSourceName):p.model.getDataSource(),o=c.getDataSourceType(),v=o&&o.getReferenceHandler&&o.getReferenceHandler(),u=P('<div class="ui-autocomplete-container"></div>');if(P.isPlainObject(s)&&(r=!0,P.each(s,function(e,t){if(!O.isUndefined(t)&&null!==t)return r=!1}),r&&(s="")),m.val(s),!v)return oe(G).read(p,s),!1;var d=function(e){var t=O.extractFieldsFromTemplate(g.searchTemplate||g.template),n=p.calculateReferenceMerges({targetObject:e});i=P("<div>").append(n.merges).text(),a=[],P.each(t,function(e,t){a.push({id:p.metadata.rel&&0===t.indexOf(p.metadata.rel+".")?t.slice(p.metadata.rel.length+1):t})})};if(h.data("recordId",s),t){var f;p.element.addClass("nx-polymorphic"),n=P("<select>").on("change",function(){f=n.val(),h.data("selectedSObject",n.find('option[value="'+f+'"]').attr("data-sobject")),h.data("selectedSObjectPrefix",f),h.data("recordId",""),h.data("recordLabel",""),d(f),p.model.updateRow(p.row,p.id,null,{initiatorId:p._GUID});var e=n.next();e.val(""),h.data("recordId",""),h.data("recordLabel",""),"REFPICK"===g.type&&p.getReferenceOptions("",{searchFields:x(),returnFields:T(),referencedObject:h.data("selectedSObject")}).then(R),e.focus()});var y={},b=[];if(P.each(l,function(e,t){y[t.label+"_"+t.objectName]=t}),P.each(Object.keys(y).sort(),function(e,t){b.push(y[t])}),P.each(b,function(e,t){n["User"===t.objectName&&O.endsWith(p.id,"OwnerId")?"prepend":"append"](P("<option>").attr({value:t.keyPrefix,"data-sobject":t.objectName}).text(t.label))}),h.data("recordId")&&"undefined"!=h.data("recordId")){var S=p.model.getValueKeyPrefix(h.data("recordId"));S&&3===S.length&&h.data("selectedSObjectPrefix",S)}h.data("selectedSObjectPrefix")&&n.val(h.data("selectedSObjectPrefix"));var w=n.find('option[value="'+n.val()+'"]');0===w.length&&(w=n.find("option").first()),h.data("selectedSObject",w.attr("data-sobject"))}else h.data("selectedSObject",e);d(h.data("selectedSObject")),h.data("recordLabel",""===h.data("recordId")?"":i);var C=function(){return c.getNameFields(h.data("selectedSObject"))},I=function(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:C()).map(function(e){return{id:e,displaytype:H,filterable:!0}})},k=function(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:C()).map(function(e){return"{{"+e+"}}"}).join(" ")},T=function(){var n=p.options.returnFields;return n&&n.length||(a&&a.length?(n=[],P.each(a,function(e,t){t.showInSearchDialog=!0,n.push(t)})):n=I()),n},x=function(){var n=p.options.searchFields;return n&&n.length||(a&&a.length?(n=[],P.each(a,function(e,t){n.push(t)})):n=I()),n},D=function(e,t,n){if(e||0===e||""===e){h.data("recordId",e);var i=C(),r=n||v&&v.getRowFromReferenceValue(t,e,p.metadata)||t.getRowById(e);if(r){var a=t.getRowMergeResult(r,g.searchTemplate||g.template||k(i)).merges.text();h.data("recordLabel",a)}!r||"Name"in r||(r.Name=t.getNameFieldValueForRow(r));var o={},s=e;p.metadata&&r&&-1===P.inArray(p.metadata.displaytype,[G,B])&&r.__templabel&&(s=r.__templabel),((o[p.id]=s)||0===s)&&(o[p.metadata.rel]=r),p.model.updateRow(p.row,o,{initiatorId:p._GUID})}},R=function(r){m.empty(),p.element.hasClass("disabled")||m.prop("disabled",!1);var a=!1;p.required&&r.data.length&&!g.addNoneOption||(a=!s,m.append(P("<option>").val("").text(Z(g.noneLabel,{model:p.model})).prop("selected",!s)));var e=p.metadata.originalDisplayType,t=e===z||e===V||e===j,o=g.searchTemplate||g.template||k();P.each(r.data,function(e,t){var n=v?v.getReferenceValue(t,p.metadata,r):t.Id;a||(a=s+""==n+"");var i=r.mergeRow(t,o,{registerFields:!1}).text();m.append(P("<option>").val(n).text(i).prop("selected",s===n))}),a||!s&&0!==s||m.append(P("<option>").val(s).text(h.data("recordLabel")).prop("selected",!0)),p.required&&!s&&0!==s&&D(t?parseInt(m.val(),10):m.val(),r,null),m.off("change.skuid").on("change.skuid",function(){var e=P(this).val();t&&(e=parseInt(e,10)),D(e,r,null)})};"REFPICK"===g.type?(m=P("<select>").prop("disabled",!0).append(P('<option value="">').text(s?i:Z(g.noneLabel,{model:p.model}))),p.getReferenceOptions("",{searchFields:x(),returnFields:T(),referencedObject:h.data("selectedSObject")}).then(R)):(m=A.ui.getRenderer("AUTOCOMPLETE").edit({minLength:p.metadata.minInputLength||2,source:function(e,t,n,o){n();var i,r=l&&l[0]&&l[0].objectName,a=function(){p.getReferenceOptions(e.term,{searchFields:x(),returnFields:T(),relMetadata:i,referencedObject:h.data("selectedSObject")}).then(function(n,e){if(e&&e.isStale)t([]);else{h.data("tempmodel",n);var i=C(),r=g.searchTemplate||g.template||k(i),a=r.includes("Name}}");P.each(n.data,function(e,t){a&&!t.Name&&i.length&&(t.Name=n.getNameFieldValueForRow(t)),t.__templabel=n.mergeRow(t,r,{registerFields:!1}).text()}),t(n.data),(!e||e&&e.isFinal)&&o()}})};p.options.searchFields&&r?c.getEntityMetadata({entities:[r]}).then(function(e){i=e._unwrap(),a()}):(i={},a())},onFocus:function(e,t){return m.val(t.item.__templabel),!1},onChange:function(e,t){var n=h.data("tempmodel"),i=v?v.getReferenceValue(t.item,p.metadata,n):t.item.Id;D(i,n,t.item);var r=p.element.find(".nx-error-inline");return p.render(),m=p.element.find("input"),r&&p.element.prepend(r),m.focus(),!1},onClose:function(){m.focus()},onBlur:function(){setTimeout(function(){m.val(h.data("recordLabel"))},200)},onClear:function(){var e=p.model.getFieldValue(p.row,p.id,!0);null!=e&&(p.model.updateRow(p.row,p.id,null,{initiatorId:p._GUID}),h.data("recordId",""),h.data("recordLabel",""))},optionRenderer:function(e,t){return P("<li></li>").data("ui-autocomplete-item",t).html("<a>"+L(t.__templabel)+"</a>").appendTo(e)},appendTo:A.mobile?u:void 0,value:h.data("recordLabel")||s,parentElem:h}),A.mobile&&u.insertAfter(h.children().last()),h.find(".ui-icon-search").on("click.skuid",function(e){if(e.stopPropagation(),!p.element.hasClass("disabled")){var t,n,l,c,u,d,f,i,r=function(){A.mobile?A.mobile.hidePopupPanel():t.dialog("close").remove(),d.unregister&&d.unregister(),U(f.id,"_TempModel_")&&f.unregister()};A.snippet.registerSnippet("skuid.__referencepopupselect",function(e){var t,n;e.row?t=e.row:e.component&&e.component.row?t=e.component.row:e.item&&(t=e.item.row),e.model?n=e.model:e.component&&e.component.list&&(n=e.component.list.model);var i=v?v.getReferenceValue(t,p.metadata,n):t.Id;D(i,n,t),p.render(),m=p.element.find("input"),r(),m.focus()}),c=h.data("selectedSObject"),p.options&&"model"===p.options.optionsource?(i=A.$M(p.options.optionmodel))&&i.objectName===c&&i.label&&(c=i.label):p.metadata&&p.metadata.referenceTo&&p.metadata.referenceTo.length&&P.each(p.metadata.referenceTo,function(){if(this.objectName===c)return this.label?c=this.label:P.each(A.model.list(),function(){if(this.objectName===c&&this.label)return c=this.label,!1}),!1}),!c&&p.metadata&&p.metadata.label&&(c=p.metadata.label),u=F("Select")+" "+O.encodeHTML(c+""),t=P("<div>").attr("title",F("Select")+" "+c),l=P("<div>").css("min-height","300px"),t.append(l),p.getReferenceOptions(m.data("uiAutocomplete").term,{searchFields:x(),returnFields:T(),referencedObject:h.data("selectedSObject")}).then(function(e){A.$M(e.id)||e.register(),f=e,P.each(f.fields,function(){this.nameField&&(this.nameField=!1)});var n=void 0,t=g.tokenizeSearch?' tokenizesearch="true"':"",i=e.dataSource.getNameFields(h.data("selectedSObject")),r=T(),a=[],o=x(),s="";r&&r.length?P.each(r,function(e,t){!1!==t.showInSearchDialog&&a.push(t)}):i&&i.length&&i.forEach(function(e){e&&a.push({id:e})}),o&&o.length||g.useSOSLSearch?(s+="<searchfields"+(g.useSOSLSearch?' usesosl="true"':"")+(g.SOSLFields?' soslfields="'+g.SOSLFields+'"':"")+">",o&&o.length&&P.each(o,function(){s+='<searchfield field="'+this.id+'"/>'}),s+="</searchfields>"):s="",A.mobile?(n='<mobiledeck model="'+e.id+'"'+t+' pagesize="'+(p.options.pageSize||5)+'" mode="readonly" searchbox="true" showsavecancel="false" createrecords="false" precision="1" minwidth="300"><components>',P.each(a,function(e,t){n+='<mobilefield id="'+t.id+'"',t.label?n+=">"+t.label+"</mobilefield>":n+="/>"}),n+='</components><cardinteractions><interaction type="tap"><actions><action type="custom" snippet="skuid.__referencepopupselect"/></actions></interaction></cardinteractions>'+s+"</mobiledeck>"):(n='<skootable model="'+e.id+'"'+t+' pagesize="'+(p.options.pageSize||5)+'" mode="readonly" searchbox="true" showsavecancel="false" createrecords="false"><fields>',P.each(a,function(e,t){n+='<field id="'+t.id+'" allowordering="true"',t.label?n+=">"+t.label+"</field>":n+="/>"}),n+='</fields><rowactions><action type="custom" label="'+u+'" icon="sk-icon-add-reference" snippet="skuid.__referencepopupselect"/></rowactions>'+s+"</skootable>"),d=A.component.factory({xmlDefinition:n}),l.append(d.element),A.mobile?A.mobile.setPopupPanel(d.element,{title:F("Select")+" "+c}):(l.append(d.element),l.find(".searchbox").focus().select())}),A.mobile||(n=[{icons:{primary:"ui-button-icon-primary ui-icon sk-icon-remove-reference sk-icon inline"},text:"Clear Value",click:function(){p.model.updateRow(p.row,p.id,null,{initiatorId:p._GUID}),h.data("recordId",""),h.data("recordLabel",""),r(),m.val("")}},{icons:{primary:"ui-button-icon-primary ui-icon sk-icon-cancel sk-icon inline"},text:F("Cancel"),click:function(){r()}}],t.dialog({close:function(){r()},modal:!0,resizable:!0,width:"90%",buttons:n}),t.parent(".ui-dialog").addClass("sk-dialog-autocomplete"),P(".ui-widget-overlay").addClass("sk-overlay-autocomplete"))}}));if(h.addClass("editable"),m.attr("placeholder",g.placeholder),n){var E=P("<label>").addClass("nx-basicfieldeditor-item-select-label");E.append(n),h.append(E,m)}else h.append(m)}},ID:{read:function(e,t){oe(e,x).read(e,t)},readonly:function(e,t){oe(B).read(e,t)},edit:function(e,t){e.model.isRowNew(e.row)&&(t=null),e.metadata.ref=e.model.objectName,oe(e,G).edit(e,t)}},STRING:{read:function(e,t){oe(e,x).read(e,t)},readonly:function(e,t){oe(H).read(e,t)},edit:function(e,t){oe(e,x).edit(e,t)}},IMAGE:{read:function(e){var t,n,i=e.options,r=A.component.getById(i.parentComponentId),a=A.utils.makeXMLDoc("<image/>").attr({alt:e.model.getRowMergeResult(e.row,i.alt||"",{asText:!0}),url:e.row[e.id]||e.model.getRowMergeResult(e.row,i.url||"",{asText:!0}),model:e.model.id,dataSource:e.model.dataSourceName,source:"url"});t=r?r.createChildComponent(a,e.element):A.component.factory({element:e.element,xmlDefinition:a}),i.height&&(t.element.css({height:i.height,overflow:"hidden"}),n=t.element.children().first(),i.fill&&n.addClass("nx-field-image-fill"),n.addClass("nx-field-image-withheight").attr("tabindex",0)),e.subComponents.push(t)},readonly:function(e,t){oe(Y).read(e,t)},edit:function(e,t){oe(Y).read(e,t)}},ANYTYPE:{read:function(e,t){oe(e,O.getDisplayTypeOfEntity(t))[e.mode](e,t)},readonly:function(e,t){oe(a).read(e,t)},edit:function(e,t){oe(a).read(e,t)}}},P.each(o,function(e,t){t.loading=function(e){oe(e,x).read(e,A.$L("Loading"))}}),f.renderers=r,f.getRenderer=ae,f.fieldRenderers=o,f.getFieldRenderer=oe,f.click2Dial=J}(skuid)},function(e,t,n){"use strict";!function(xe){var De=xe.$,e=xe.ui,Re=e.getRenderer,Ee=xe.utils,Ae=xe.time,Fe=Ee.isUndefined,Pe=Ae.resolveDateTimeValue,Oe=Ae.getSFDate,Ne=Ae.getSFDateTime,_e=xe.$L,Me=Ee.makeXMLDoc,Le=xe.model.Condition,Ue="keydown.action.skuid",je=xe.$.ui.keyCode,t=xe.constants.DISPLAY_TYPES,Be=t.CURRENCY,Ve=t.PERCENT,ze=t.MULTIPICKLIST,Ge=t.DATE,He=t.DATETIME,qe="server",$e="client";function We(e){e||(e={});var g,t,n,i,r,a,o,s=e.xml,l=e.list,m=l.model,c=m.getDataSource(),u=m.getDataSourceName(),v=this,d=v.element=e.element||De("<div>"),f=s.attr("condition"),p=v.type=s.attr("type"),y=!1,b=v.items=[],h=!!l&&l.options.delayFilterExecution,S=s.attr("labelmode"),w=s.attr("filtermethod")||qe,C=s.attr("filteroffoptionlabel"),I=e.cssClass||"";S||"daterange"!==p&&"numericrange"!==p||(S="auto"),"New Filter"===C&&s.attr("filteroffoptionlabel",""),v.affectCookies="false"!==s.attr("affectcookies"),v.isReferenceFilter=!1,d.addClass("nx-conditiontoken"),v.list=l,v.model=l.model,v.sources=[];var k=v.list&&v.list.component;function T(e){var t=v.filterCondition;return!(!t||t.inactive)&&(v.isMultiselect?-1<De.inArray(e,t.values):e===t.value)}k&&(v._initiatorId=k.id()),I&&v.element.addClass(I),v.affectedConditions={},f&&(v.filterCondition=m.getConditionByName(f,!0),!g&&v.filterCondition&&(g=m.getField(v.filterCondition.field))),v.filterCondition&&(v.affectedConditions[f]=v.filterCondition),s.find("effect").each(function(){var e=De(this).attr("condition"),t=m.getConditionByName(e,!0);t&&(v.affectedConditions[e]=t)});var x,D,R,E,A,F,P,O,N,_,M,L,U,j,B,V,z,G,H,q,$,W,Y=function(e,t){if(!e)return"";var n=e;return t===Be&&(n="$"+e),t===Ve&&(n=e+"%"),n},K=function(e){var t=e.keyCode?e.keyCode:e.which;-1!==[8,9,13,27,46,110,190].indexOf(t)||65==t&&(e.ctrlKey||e.metaKey)||35<=t&&t<=40||48<=t&&t<=57&&!e.shiftKey&&!e.altKey||96<=t&&t<=105||e.preventDefault()},X=function(e,t,n){var i,r,a,o;return a=1<e.length?(i=n.getValueKeyPrefix(t),r=(o=e.find(function(e){return e.keyPrefix===i})).objectName,o.keyField||"Id"):(r=(o=e[0]).objectName,i=n.getValueKeyPrefix(t,r),o.keyField||n.getIdField(m)),{keyPrefix:i,targetObjName:r,keyField:a}},J=function(e,t){var n,i,r,a,o=m,s=[],l=Array.prototype.push;if(De.each([o.conditions,o.havings,o.uiOnlyConditions],function(e,t){t&&t.length&&l.apply(s,t)}),s.length)for(r=0;r<s.length;r++){if((n=s[r]).name===e)return{condition:n,isSubCondition:!1};if(t&&n.subConditions&&n.subConditions.length)for(a=0;a<n.subConditions.length;a++)if((i=n.subConditions[a]).name===e)return{condition:i,parent:n,isSubCondition:!0}}},Q=function(e){var t=e.parent,n=void 0,i=void 0;return t&&"join"===t.type&&t.joinObject&&(n=m.getDataSource().getCachedEntityMetadata(t.joinObject))&&(i=n.getField(e.condition.field)),i};if("select"===p||"multiselect"===p){v.isMultiselect="multiselect"===p;var Z,ee,te,ne="auto"===s.attr("conditionsource");if(ne){if(!(Z=s.attr("conditionfield")))return;if(g=m.getField(Z),v.isReferenceFilter=!1,"REFERENCE"!==g.displaytype||Ee.endsWith(g.id,"RecordTypeId")||(v.isReferenceFilter=!0),f="__autofilter__"+Z,v.filterCondition=ee=m.getConditionByName(f,!0),ee){if(ee&&v.isReferenceFilter&&!0!==ee.inactive){var ie=[],re=v.isMultiselect&&ee.values,ae={};re?De.each(ee.values,function(e,t){ie.push(t)}):ee.value&&ie.push(ee.value);var oe=m.getField(ee.field).referenceTo;if(ie.length){De.each(ie,function(e,t){var n=X(oe,t,c),i=ae[n.keyPrefix];i||(i=ae[n.keyPrefix]={objectType:n.targetObjName,dataSourceName:u,idField:n.keyField,fields:[c.getNameField(n.targetObjName)],records:[]}),i.records.push(t)});var se=xe.data.getSync(ae);se?(De.each(ie,function(e,t){var n=X(oe,t,c),i=se[n.keyPrefix],r=!!i&&i[t],a=ae[n.keyPrefix].fields[0];b.push({label:r?r.record[a]:"Invalid record",value:t,isSelected:!0})}),re||(y=!0)):(De.each(ie,function(e,t){b.push({label:xe.$L("Loading"),value:t,isSelected:!0})}),re||(y=!0),xe.data.get(ae).then(function(){d.empty(),new We({element:d,xml:s,list:l})}))}}}else{v.filterCondition=ee=new Le;var le=s.attr("conditionoperator");le||(le=v.isMultiselect?"MULTIPICKLIST"===g.displaytype?"includes":"in":"="),v.isMultiselect&&"fieldvalue"===ee.type&&(ee.type="multiple",delete ee.sourceType),ee.operator=le,ee.field=Z,ee.inactive=!0,ee.name=f,ee.encloseValueInQuotes=!0,w===$e&&(ee.processOnClient=!0),ee.originalValue="",ee.value="",ee.originalInactive=!0,m.addCondition(ee)}v.affectedConditions[f]=ee}w===$e&&(v.filterCondition.processOnClient=!0),("true"===s.attr("createfilteroffoption")||ne)&&(te=Ee.mergeAsText("global",s.attr("filteroffoptionlabel")||"",{createFields:!0,registerFields:!1}),v.isMultiselect||v.isReferenceFilter||(this.filterCondition&&this.filterCondition.value===this.filterCondition.originalValue&&(y=!0),this.filterCondition||(y=!0),b.push({label:te,value:"__reset",affectDefaultCondition:!0,isSelected:y})));var ce=s.children("sources").first();if(!ne||ce.length&&ce.children().length||(ce.length||(ce=Me("<sources/>")),ce.append(Me('<source type="metadata"/>'))),ce.children().each(function(){var e,t=De(this),n=t.attr("effectsbehavior"),o={};if(v.sources.push(o),"defaultandothers"!==n&&"justothers"!==n||(e=t.children("effects").children()).length&&(o.effects=e),"manual"===t.attr("type"))t.children("options").children().each(function(){var e,t,n=De(this);if("simple"===n.attr("type")&&v.filterCondition){var i=n.attr("value");void 0===i?i="":Ee.isString(i)&&(i=Ee.mergeAsDataInContext(i,{model:v.model})),t=T(i),e={label:Ee.mergeAsText("global",n.attr("label")||i||"",{createFields:!0,registerFields:!1}),value:i,isSelected:t,affectDefaultCondition:!0,source:o},t&&(y=!0)}else if("complex"===n.attr("type")){var r=n.children("effects").children(),a=Ee.mergeAsText("global",n.attr("label")||"",{createFields:!0,registerFields:!1});e={label:a,effects:r,value:a,isSelected:t=v.isSelectedFromEffects(r),source:o},t&&(y=!0)}e&&b.push(e)});else{var a="justothers"!==t.attr("effectsbehavior");if("model"===t.attr("type")){var s=xe.$M(t.attr("model")),l=t.children("labeltemplate").text(),c=t.children("valuetemplate").text();s&&(o.model=s,De.each(s.data,function(e,t){var n=Ee.mergeAsText("row",l||"{{{"+Ee.getNameField(s.objectName)+"}}}",{createFields:!0,registerFields:!1},s,t),i=Ee.mergeAsText("row",c||"{{{Id}}}",{createFields:!1,registerFields:!1},s,t),r=T(i);b.push({label:n,value:i,isSelected:r,affectDefaultCondition:a,source:o,row:t}),r&&(y=!0)}))}else if("metadata"===t.attr("type")){if(v.filterCondition){var i=g,u=Ee.mergeAsText("model",t.attr("prefix")||"",{createFields:!0,registerFields:!1},m),d=Ee.mergeAsText("model",t.attr("suffix")||"",{createFields:!0,registerFields:!1},m),f={};if(De.each(b,function(e,t){f[t.value]=t}),i){var r=m.recordTypeInfos;i.picklistEntries&&i.picklistEntries.length?De.each(i.picklistEntries,function(e,t){var n=t.value,i=T(n),r=t.label?t.label:n;f[n]||b.push({label:u+r+d,value:n,isSelected:i,affectDefaultCondition:a,source:o}),i&&(y=!0)}):r&&r.length&&Ee.endsWith(i.id,"RecordTypeId")&&De.each(r,function(e,t){var n=t.recordTypeId;if(t.isAvailable&&(1===r.length||!t.isMaster)){var i=T(n);f[n]||b.push({label:u+t.name+d,value:n,isSelected:i,affectDefaultCondition:a,source:o}),i&&(y=!0)}})}}}else if("custom"===t.attr("type")){var p=t.attr("snippet");if(p){var h=xe.snippet.get(p);h&&De.each(h({list:v,model:m}),function(e,t){var n=De("<div>").append(t.label?m.mergeModel(t.label):""),i=T(t.value);b.push({label:n.text(),value:t.value,isSelected:i,affectDefaultCondition:a,source:o}),i&&(y=!0)})}}}}),y||v.isMultiselect||v.isReferenceFilter||b.push({label:" - - - - ",value:"",isSelected:!0}),v.activateFilter=function(){v.isMultiselect||v.isReferenceFilter?(v.resetAffectedConditions(),v.isReferenceFilter?(b.length=0,Array.prototype.push.apply(b,De.map(d.actionAutocomplete("getSelectedItems"),function(e){return e.isSelected=!0,e.affectDefaultCondition=!0,e}))):v.setOriginalValue(d.val()),b.length&&(v.hasSelected=!1,De.each(b,function(){this.isSelected?(v.hasSelected=!0,v.applyFilterForItem(this,{fireSourceEffects:!1})):v.unApplyFilterForItem(this,{fireSourceEffects:!1})})),v.hasSelected||(v.filterCondition.inactive=!0),v.handleSourceEffects(b)):v.selectedItem&&(v.resetAffectedConditions(),v.applyFilterForItem(v.selectedItem),v.setOriginalValue(v.selectedItem))},v.isMultiselect&&!v.isReferenceFilter){var ue=!1,de=De.map(b,function(e){if(e.isSelected)return ue=!0,e.value}).join(";"),fe=function(){var e=d.data("multiselect-newvalues"),t=d.data("multiselect-oldvalues");if(!1===m.hasChanged){var n={};Fe(e)||De.each(e.split(";"),function(){n[this]=1}),De.each(b,function(e,t){t.isSelected=t.value in n}),h?(Fe(t)&&(t="__reset"),v.setOriginalValue(t),v.list.showFilterActions()):(v.activateFilter(),v.executeFilter())}},pe=function(){v.restoreOriginalValue()};v.setOriginalValue(ue?de:"__reset"),Re(ze).edit({position:{my:"right top",at:"right bottom"},element:d.addClass("nx-actionselect"),entries:b,value:de,selectedText:g?g.label+": "+_e("Number_Selected"):null,selectedList:e.selectedList||3,noneSelectedText:te,onChange:function(e,t){d.data({"multiselect-newvalues":e,"multiselect-oldvalues":t}),h&&fe()},onClose:function(){0!==m.isProcessing||h||pe()},onCreate:function(){var t=De(this),e=t.multiselect("widget");h||e.append(De("<div>").addClass("ui-widget-footer ui-multiselect-footer ui-helper-clearfix").append(De("<div>").attr({role:"button",tabindex:0}).text(_e("Apply")).addClass("sk-timefilter-button").css("cursor","pointer").on("click "+Ue,function(e){"click"!==e.type&&e.which!==je.ENTER&&e.which!==je.SPACE||(fe(),t.multiselect("close"))}),De("<div>").attr({role:"button",tabindex:0}).text(_e("Cancel")).addClass("sk-timefilter-button-grey").css("cursor","pointer").on("click "+Ue,function(e){"click"!==e.type&&e.which!==je.ENTER&&e.which!==je.SPACE||(pe(),t.multiselect("close"))})))}}),v._reflowEventSubscription=xe.events.subscribe("ui.reflow",v.multiSelectMaxWidth=function(){var e=d.find("div[type=button]").find("span").not(".ui-icon"),t=e.closest(".ui-multiselect"),n=d.find("div[type=button]").find(".nx-actionselect-arrow"),i=function(){var e=d.closest(".nx-panel-left");if(e.length||(e=d.closest(".nx-panel-right")),0<e.length)return e.width()}();i&&(t.css({"max-width":i-10+"px"}),e.css({"max-width":i-n.width()-10+"px","text-wrap":"none",overflow:"hidden","box-sizing":"border-box"}),d.css({"max-width":i+"px"}))}),d.find(".ui-multiselect").append('<div class="nx-actionselect-arrow"><div class="ui-icon ui-icon-triangle-1-s"/></div>')}else{var he=function(e){if(!1===m.hasChanged){var t=v.selectedItem;v.selectedItem=e,h?(v.isReferenceFilter?(De.each(v.affectedConditions,function(){this.values=[]}),v.setOriginalValue(De.map(b,function(e){return e.value}).join(";")),b.length=0,Array.prototype.push.apply(b,De.map(d.list.items,function(e){return e.isSelected=!0,e.affectDefaultCondition=!0,e}))):v.setOriginalValue(t),v.list.showFilterActions()):(v.activateFilter(),v.executeFilter())}},ge=parseInt(s.attr("autocompthreshold"),10);if(g&&v.isReferenceFilter){var me=s.children("conditions").children("condition").map(function(e,t){return new Le(De(t))}).toArray();d.actionAutocomplete({refField:g,model:m,items:b,onItemSelect:he,isMultiselect:v.isMultiselect,defaultOptionLabel:te,additionalConditions:me})}else if(b.length<(ge||25)){var ve=s.attr("maxheight");d.actionSelect({items:b,onItemSelect:he,maxHeight:ve})}else d.actionAutocomplete({model:m,items:b,onItemSelect:he})}}else if("toggle"===p){var ye=s.children("effects").children(),be=v.isSelectedFromEffects(ye);be||d.addClass("disabled"),v.activateFilter=function(){if(!1===m.hasChanged&&v.selectedItem){var e=d.is(".disabled");v.resetAffectedConditions(),e?v.unApplyFilterForItem(v.selectedItem):v.applyFilterForItem(v.selectedItem),v.setOriginalValue(e)}},d.actionSelect({items:[{label:Ee.mergeAsText("model",s.attr("label")||"",{createFields:!0,registerFields:!1},m),effects:ye,value:"",isSelected:be}],onItemSelect:function(e){var t=d.is(".disabled");d.toggleClass("disabled"),v.selectedItem=e,h?(v.setOriginalValue(t),v.list.showFilterActions()):(v.activateFilter(),v.executeFilter())}})}else if("daterange"===p){if(x=s.attr("startcondition"),D=s.attr("endcondition"),x&&D&&"auto"!==s.attr("conditionsource"))A=J(x,!0),F=J(D,!0),R=A.condition,E=F.condition;else if(x="__autofilter__start__"+(P=s.attr("conditionfield")),D="__autofilter__end__"+P,R=m.getConditionByName(x,!0),E=m.getConditionByName(D,!0),!R||!E){if(!P)return!1;(R=new Le).operator="gte",R.field=P,R.inactive=!0,R.name=x,R.encloseValueInQuotes=!1,(E=new Le).operator="lte",E.field=P,E.inactive=!0,E.name=D,E.encloseValueInQuotes=!1,m.addCondition(R),m.addCondition(E)}if(w===$e&&(R.processOnClient=!0,E.processOnClient=!0),t=m.getField(R.field),n=m.getField(E.field),!t&&A.isSubCondition&&(t=Q(A)),!n&&F.isSubCondition&&(n=Q(F)),!t||!n){if("param"!==R.sourceType||"param"!==E.sourceType)return!1;t=n={}}O=t.displaytype,N=n.displaytype,_=R.inactive?"":(a=Pe(R.value,{fieldType:O,useLocalTimezone:!0}),Oe(a)),M=E.inactive?"":(o=Pe(E.value,{fieldType:N,useLocalTimezone:!0}),Oe(o)),W=function(){Se.datepicker("getDate")||we.datepicker("getDate")?H.css("display","block"):H.css("display","none")};var Se=Re(Ge).edit({value:_,onChange:W}).addClass("sk-timefilter-input"),we=Re(Ge).edit({value:M,onChange:W}).addClass("sk-timefilter-input");d.addClass("nx-actionselect nx-conditiontoken"),L=De("<div>"),U=De("<div>").addClass("nx-actionselect-text").append(L),j=De("<div>").addClass("nx-actionselect-arrow").append(De("<div>").addClass("ui-icon ui-icon-triangle-1-s")),B=De("<div>").addClass("nx-actionselect-dropdown sk-timefilter-body").hide(),V=De("<div>").text(_e("Start_Date")).addClass("sk-timefilter-label"),z=De("<div>").text(_e("End_Date")).addClass("sk-timefilter-label"),G=De("<div>"),(H=De("<div>").addClass("sk-timefilter-clearfilter-button").text("Clear Filter")).click(function(){Se.datepicker("setDate",null),we.datepicker("setDate",null),W()}),h?($=De("<div>").text(_e("Done")).addClass("sk-timefilter-button").attr({role:"button",tabindex:0}),G.append($)):(q=De("<div>").text(_e("Cancel")).addClass("sk-timefilter-button-grey").attr({role:"button",tabindex:0}),$=De("<div>").text(_e("Apply")).addClass("sk-timefilter-button").attr({role:"button",tabindex:0}),G.append($,q)),v.updateDisplayValue=function(e,t){var n,i=Ae.makeFormattedDateFromLocal,r=xe.label.merge;return n=e&&t?i(e)+" - "+i(t):e&&!t?r(_e("After_This"),i(e)):!e&&t?r(_e("Before_This"),i(t)):Ee.mergeAsText("global",s.attr("filteroffoptionlabel")||_e("All_Time")),L.text(n),e instanceof Date&&Se.datepicker("setDate",e),t instanceof Date&&we.datepicker("setDate",t),W(),v},O===He&&N===He?v.updateDisplayValue(xe.time.getLocalDateTime(a),xe.time.getLocalDateTime(o)):v.updateDisplayValue(a,o),q&&q.click(function(){B.hide("fast")}),v.activateFilter=function(){var e,t,n=Se.datepicker("getDate"),i=we.datepicker("getDate");if(n&&(e=Oe(n)),i&&(t=Oe(i)),e){if(O===He){var r=Ae.getStartOfDateForUserTimezone(e);e=Ne(r)}m.setCondition(R,e,{remember:v.affectCookies,initiatorId:v._initiatorId})}else m.deactivateCondition(R,{remember:v.affectCookies,initiatorId:v._initiatorId});if(t){if(N===He){var a=Ae.getEndOfDateForUserTimezone(t);t=Ne(a)}m.setCondition(E,t,{remember:v.affectCookies,initiatorId:v._initiatorId})}else m.deactivateCondition(E,{remember:v.affectCookies,initiatorId:v._initiatorId});v.setOriginalValue({start:n,end:i})},$.on("click "+Ue,function(e){if("click"===e.type||e.which===je.ENTER||e.which===je.SPACE){var t=Se.datepicker("getDate"),n=we.datepicker("getDate");h?v.list.showFilterActions():(v.activateFilter(),v.executeFilter()),v.updateDisplayValue(t,n),B.hide("fast")}}),B.append(V,Se,z,we,H,G),d.addClass("nx-actionselect-haslabel").append(U,j,B),U.attr("tabindex",0),j.attr("tabindex",0),U.add(j).on("click "+Ue,function(e){"click"!==e.type&&e.which!==je.ENTER&&e.which!==je.SPACE||d.hasClass("unavailable")||(B.is(":visible")?B.toggle("fast"):(B.css("min-width",Math.max(d.width(),180)+"px"),B.show("fast"),B.position({my:"left top",at:"left bottom",of:d,collision:"flip"})))}),B.on(Ue+" focusout",function(e){e.which===je.ESCAPE&&(B.toggle("fast"),U.trigger("focus"))})}else if("numericrange"===p){var Ce,Ie=function(){var e,t,n,i,r;if(e=s.attr("startcondition"),n=s.attr("endcondition"),e&&n&&"auto"!==s.attr("conditionsource"))t=m.getConditionByName(e,!0),i=m.getConditionByName(n,!0);else if(e="__autofilter__nstart__"+(r=s.attr("conditionfield")),n="__autofilter__nend__"+r,t=m.getConditionByName(e,!0),i=m.getConditionByName(n,!0),!t||!i){if(!r)return!1;t=new Le({operator:"gte",field:r,inactive:!0,name:e,encloseValueInQuotes:!1}),i=new Le({operator:"lte",field:r,inactive:!0,name:n,encloseValueInQuotes:!1}),m.addCondition(t),m.addCondition(i)}return w===$e&&(t.processOnClient=!0,i.processOnClient=!0),[t,i]}();if(R=Ie[0],E=Ie[1],t=m.getField(R.field),n=m.getField(E.field),!t||!n)return!1;Ce=t.displaytype,_=R.inactive?"":R.value,M=E.inactive?"":E.value;var ke=De("<input>").val(_).addClass("sk-timefilter-input"),Te=De("<input>").val(M).addClass("sk-timefilter-input");ke.on(Ue,K),Te.on(Ue,K),W=function(){ke.val()||Te.val()?H.css("display","block"):H.css("display","none")},d.addClass("nx-actionselect nx-conditiontoken"),L=De("<div>"),U=De("<div>").addClass("nx-actionselect-text").append(L),j=De("<div>").addClass("nx-actionselect-arrow").append(De("<div>").addClass("ui-icon ui-icon-triangle-1-s")),B=De("<div>").addClass("nx-actionselect-dropdown sk-timefilter-body").hide(),V=De("<div>").text("Min. Value").addClass("sk-timefilter-label"),z=De("<div>").text("Max. Value").addClass("sk-timefilter-label"),G=De("<div>"),(H=De("<div>").addClass("sk-timefilter-clearfilter-button").text("Clear Filter")).click(function(){ke.val(""),Te.val(""),W()}),h?($=De("<div>").text(_e("Done")).addClass("sk-timefilter-button").attr({role:"button",tabindex:0}),G.append($)):(q=De("<div>").text(_e("Cancel")).addClass("sk-timefilter-button-grey").attr({role:"button",tabindex:0}),$=De("<div>").text(_e("Apply")).addClass("sk-timefilter-button").attr({role:"button",tabindex:0}),G.append($,q)),v.updateDisplayValue=function(e,t){var n,i=xe.label.merge;return e=Y(e,Ce),t=Y(t,Ce),n=e&&t?e+" - "+t:e&&!t?i(_e("Greater_Than"),e):!e&&t?i(_e("Less_Than"),t):Ee.mergeAsText("global",s.attr("filteroffoptionlabel")||_e("All_Values")),L.text(n),W(),v},v.updateDisplayValue(_,M),q&&q.click(function(){B.hide("fast")}),v.activateFilter=function(){var e=ke.val(),t=Te.val();e?m.setCondition(R,e,{remember:v.affectCookies,initiatorId:v._initiatorId}):m.deactivateCondition(R,{remember:v.affectCookies,initiatorId:v._initiatorId}),t?m.setCondition(E,t,{remember:v.affectCookies,initiatorId:v._initiatorId}):m.deactivateCondition(E,{remember:v.affectCookies,initiatorId:v._initiatorId}),v.setOriginalValue({start:e,end:t})},$.on("click "+Ue,function(e){if("click"===e.type||e.which===je.ENTER||e.which===je.SPACE){var t=ke.val(),n=Te.val();h?v.list.showFilterActions():(v.activateFilter(),v.executeFilter()),v.updateDisplayValue(t,n),B.hide("fast")}}),B.append(V,ke,z,Te,H,G),d.addClass("nx-actionselect-haslabel").append(U,j,B),U.attr("tabindex",0),j.attr("tabindex",0),U.add(j).on("click "+Ue,function(e){if(("click"===e.type||e.which===je.ENTER||e.which===je.SPACE)&&!d.hasClass("unavailable"))if(B.is(":visible"))B.toggle("fast");else{var t=Math.max(d.width(),180);B.css("min-width",t+"px").show("fast")}}),B.on(Ue+" focusout",function(e){e.which===je.ESCAPE&&(B.toggle("fast"),U.trigger("focus"))})}"toggle"===p||"auto"!==S&&"manual"!==S||(r=De("<div>").addClass("nx-actionselect-label"),"auto"===S?"daterange"===p?i=t.label:"numericrange"===p?i=t.label:g&&(i=g.label):"manual"===S&&(i=s.attr("label"))&&(i=Ee.mergeAsTextInContext(i,{model:m})),i&&(r.text(i),d.addClass("nx-actionselect-haslabel").prepend(r))),v.selectedItem||v.isMultiselect||(g&&v.isReferenceFilter?v.selectedItem=d.actionAutocomplete("getSelectedItem"):"daterange"===p?v.setOriginalValue({start:a,end:o}):"numericrange"===p?v.setOriginalValue({start:_,end:M}):v.selectedItem=d.actionSelect("getSelectedItem")),xe.events.publish("_skuid.filter.rendered",[{event:"_skuid.filter.rendered",filter:v}])}De.extend(We.prototype,{setOriginalValue:function(e){void 0===this.element.data("originalValue")&&this.element.data("originalValue",e)},restoreOriginalValue:function(){var e=this.element,t=e.data("originalValue");if(this.isMultiselect&&!this.isReferenceFilter){if(e=e.find("select"),"__reset"===t)e.val("");else if(t){var n=t.split(";");De.each(e.children("option"),function(e,t){De(t).prop("selected",-1<De.inArray(t.value,n))})}e.data("echMultiselect")&&e.multiselect("refresh")}else void 0!==t&&("toggle"===this.type?e.toggleClass("disabled",t):"daterange"===this.type?this.updateDisplayValue(t.start,t.end):this.isReferenceFilter?e.actionAutocomplete("resetItem",t):t&&void 0!==t.value&&(this.element.is(".nx-actionautocomplete")?e.actionAutocomplete("resetItem",t.value):e.actionSelect("selectItem",t,{triggerHandlers:!1})))},isSelectedFromEffects:function(e){var n=this,i=!1;return e.each(function(){var e=De(this),t=n.affectedConditions[e.attr("condition")];if(t)if("deactivate"===e.attr("action")){if(!t.inactive)return i=!1}else if("set"===e.attr("action")){if(Ee.mergeAsText("global",e.attr("value")||"",{createFields:!0,registerFields:!1})!==t.value||t.inactive)return i=!1}else if("activate"===e.attr("action")&&t.inactive)return i=!1;i=!0}),i},resetAffectedConditions:function(){var e=this;De.each(e.affectedConditions,function(){e.model.resetCondition(this,{remember:e.affectCookies,initiatorId:e._initiatorId})})},handleSourceEffects:function(e){var t,i=this,n=[],r=[];De.each(e,function(e,t){t.source&&-1===r.indexOf(t.source)&&r.push(t.source),t.source&&t.isSelected&&-1===n.indexOf(t.source)&&n.push(t.source)}),t=r.filter(function(e){return-1===n.indexOf(e)}),De.each(n,function(e,n){n.effects&&n.effects.length&&De.each(n.effects,function(e,t){i.applyEffect(De(t),n)})}),De.each(t,function(e,t){t.effects&&t.effects.length&&De.each(t.effects,function(e,t){i.unApplyEffect(De(t))})})},applyEffect:function(e,t,n){var i=this.model,r=this.affectedConditions[e.attr("condition")];if(r)if("deactivate"===e.attr("action"))i.deactivateCondition(r,{remember:this.affectCookies,initiatorId:this._initiatorId});else if("set"===e.attr("action")){var a,o={};n&&n.row&&(o.row=n.row),t&&t.model&&(o.model=t.model),e.attr("value")?a=e.attr("value"):n.value&&(a=n.value),a=Ee.mergeAsTextInContext(a,o,{createFields:!1,registerFields:!1}),i.setCondition(r,a,{remember:this.affectCookies,initiatorId:this._initiatorId})}else"activate"===e.attr("action")&&i.activateCondition(r,{remember:this.affectCookies,initiatorId:this._initiatorId})},unApplyEffect:function(e){var t=this.model,n=this.affectedConditions[e.attr("condition")];n&&("deactivate"===e.attr("action")?t.activateCondition(n,{remember:this.affectCookies,initiatorId:this._initiatorId}):t.deactivateCondition(n,{remember:this.affectCookies,initiatorId:this._initiatorId}))},applyFilterForItem:function(e,t){t=t||{};var n=this,i=n.model,r=!1!==t.fireSourceEffects,a=[],o=e.effects,s=e.source,l=s&&s.effects,c=e.affectDefaultCondition;if(o&&o.length&&De.each(o,function(){a.push(this)}),r&&l&&l.length&&De.each(l,function(){a.push(this)}),a&&a.length&&De.each(a,function(){n.applyEffect(De(this),s,e)}),c&&!Fe(e.value)&&n.filterCondition)if("__reset"===e.value)i.resetCondition(n.filterCondition,{remember:n.affectCookies});else{var u,d=Ee.mergeAsText("global",e.value||"",{createFields:!1,registerFields:!1}),f=n.filterCondition.operator;n.isMultiselect?((u=n.filterCondition.values)?(Ee.isString(u)&&(u=u.split(";")),-1===De.inArray(d,u)&&u.push(d)):u||(u=[d]),Ee.isMultiValueOperator(f)||("="===f?f="in":"!="===f&&(f="not in"),n.filterCondition.operator=f)):u=d,i.setCondition(n.filterCondition,u,{remember:n.affectCookies,initiatorId:n._initiatorId})}},unApplyFilterForItem:function(e,t){t=t||{};var n=this,i=n.model,r=!1!==t.fireSourceEffects,a=[],o=e.effects,s=e.source,l=s&&s.effects,c=e.affectDefaultCondition;if(o&&o.length&&De.each(o,function(){a.push(this)}),r&&l&&l.length&&De.each(l,function(){a.push(this)}),a&&a.length&&De.each(a,function(){n.unApplyEffect(De(this))}),c&&void 0!==e.value&&n.filterCondition)if("__reset"===e.value){var u=Ee.mergeAsText("global",e.value||"",{createFields:!1,registerFields:!1});i.setCondition(n.filterCondition,u,{remember:n.affectCookies,initiatorId:n._initiatorId})}else if(n.isMultiselect){var d=n.filterCondition.values,f=De.inArray(e.value,d);-1<f&&(d.splice(f,1),i.setCondition(n.filterCondition,d,{remember:n.affectCookies,initiatorId:n._initiatorId}))}else i.resetCondition(n.filterCondition,{remember:n.affectCookies})},executeFilter:function(){var e,t=this.list,n=t.searchBox;n&&(e=n.val()),"remove"!==t.options.emptySearchBehavior||e?t.updateData({message:_e("Applying_Filter"),failmessage:_e("Filter_could_not_be_applied"),showerror:!0,successcallback:function(){xe.events.publish("filter.executed")}}):t.model.abandonAllRows()},getItems:function(){return this.items.map(function(e){return e})},unregister:function(){var e=this._reflowEventSubscription;return e&&e.unsubscribe(),this}}),e.Filter=We}(skuid)},function(e,t,n){"use strict";!function(h){var o=h.$,e=h.utils,r=e.grab,t=h.constants;function n(){return"chatbotfulloverlay"}function i(e,t){var n=e.find("example-command");return function(e,t){if(r(e,"length")<=t)return e;var n=[];for(;0<t;){var i=a(0,e.length);n.push(e[i]),e.splice(i,1),t--}return n}(o.map(n,function(e){return o(e).attr("value")}),t=t||5)}function a(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e}function g(e){if(e)return e.replace(/\s/g,"").toLowerCase()}function m(t,e){var r={};return t&&e?(o.each(e,function(e,i){o.each(t,function(e,t){var n=g(t[i]);n&&(r[n]||(r[n]=t))})}),r):{}}function s(e){return!!e&&"true"===e.attr("voice-enabled")}function l(e){if(e)return e.attr("voice-datasource")}function c(){return e.inPlatform(t.NATIVE)}h.voiceCommands={getExampleVoiceCommands:i,getDataSourceConfiguredForVoiceOnPage:function(e){var t=s(e),n=l(e);if(c()&&t&&n)return h.dataSource.getDataSource(n)},getVoiceDataSourceName:l,getUIComponentType:n,globalVoiceAction:function(c,u,d){var e=c.closest("skuidpage"),f=l(e),p=i(e);return h.loader.service.loadDataSourceAndDependencies(f).then(function(){var e,t,n,i,r=h.dataSource.getDataSource(f),a=r&&r.getDataSourceType(),o={conversationKillSwitch:a.voiceCommands.methods.conversationKillSwitch,examples:p},s=u&&u.getParentPage&&u.getParentPage(),l={};if(s&&(l._parentPageId=s.id()),i={listeningHandler:(n=(t=h.component.factory({definition:o,state:l,type:"chatbotfulloverlay"}))._getCPI()).listeningHandler||function(){},processingHandler:n.processingHandler||function(){},textSubmissionHandler:n.textSubmissionHandler||function(){},responseHandler:n.responseHandler||function(){},endOfConversationHandler:n.endOfConversationHandler||function(){}},s&&(s.getContentElement().append(t.element),s.childComponents.push(t)),!a||!a.supportsVoiceCommands())throw"Data source does not support voice iteraction";if(!s)throw"No page component available";return e=a.getPageParametersForVoiceCommands(s.definition),a.voiceCommands.methods.beginConversation(r,c,e,i,d)}).then(function(e){var t=e.inputs,n=e.actionSequence;if(!n)throw"No Action Sequence configured for voice command";return function(c,e){var t=e,n=t.getInputs("model"),i=t.getInputs("model-field"),r=t.getInputs("model-condition"),u=h.model.map(),a=m(u,["id","label","labelPlural"]);o.each(n,function(e,t){var n,i=t.attr("name"),r=c[i];r=g(r),(n=a[r])&&(c[i]=n.id)}),o.each(i,function(e,t){var n=t.attr("name"),i=t.attr("model-source"),r=c[i],a=u[r],o=a&&a.fields,s=c[n],l=m(o,["id","label"]);s=g(s),(l=l[s])&&(c[n]=l.id)}),o.each(r,function(e,t){var n=t.attr("name"),i=t.attr("model-source"),r=c[i],a=u[r],o=a&&a.conditions,s=c[n],l=m(o,["name","field"]);s=g(s),l[s]&&(c[n]=l.name)})}(t,n),n._run(u,d,c,t)})},pageIsVoiceEnabled:s,voiceIsConfigurableForOrg:c}}(skuid)},function(e,t,n){"use strict";!function(u){var d=u.utils,f=u.$,i={},r={},n=u.constants.ACTION_SEQUENCE_TYPES,p=u.constants.EVENT_SCOPES;function a(e,t){this._id=e.attr("id"),this._name=e.attr("label"),this._type=e.attr("type")||n.REUSABLE,this._description=e.children("description").text(),this._actionNodes=e.children("actions"),this._pageComponent=t,this._inputs=e.children("inputs").children(),this._voiceCommand=e.attr("voice-command"),this._type===n.EVENT_TRIGGERED&&t?function(r,a){var o=r.getPageComponent(),e=a.attr("event-name"),t=a.attr("event-channel"),n=a.attr("event-scope")||p.PAGE,i={scope:p.PAGE},s={scope:n},l={};if(!e)return;function c(e){var n,t=arguments[arguments.length-1],i=t.uniqueId;e&&f.isPlainObject(e)&&d.size(e)&&(n={},f.each(e,function(e,t){n[e]=t})),l[i]||(l[i]=1,setTimeout(function(){delete l[i]},5),r._run(o,{},a,n))}t&&(s.channel=i.channel=t);o.subscribe(e,c,i),(n===p.SKUID||n===p.GLOBAL)&&o.storeSubscription(u.events.subscribe(e,c,s))}(this,e):this._type===n.HOTKEY_TRIGGERED&&t&&function(e,t){var n=t.children("hotkeys").first(),i=e.getId(),r=e.getPageComponent();u.hotkeys.unbind(i),n.length&&u.hotkeys.bind(n,i,function(){e._run(r,{},t)},r?r.getElement():null)}(this,e),i[this._id]=this,r[this.getFullyQualifiedId()]=this}function o(e){return e&&e.$Input||{}}function s(e,t){var n=o(t);t.$Input=f.extend({},n,e)}function e(){return f.map(i,function(e){return e})}function l(e){var t="id"===(e=e||"id")?"getId":"getName",n={};return f.map(i,function(e){n[e[t]()]=e}),n}function c(e,t){if(!t)return r[e]||i[e];var n=d.getFullyQualifiedId(e,t);return r[n]||i[e]}function h(e){return f.map(e,function(e){var t;if(e)return t=e.definition&&e.getType&&"skuidpage"===e.getType()?e.definition:e,f.map(function(e){if(e)return e.find("resources > actionsequences > actionsequence")}(t),function(e){return f(e)})})}function g(){return f.map(u.component.getByType("skuidpage"),function(e){return e.definition})}a.prototype={getId:function(){return this._id},getFullyQualifiedId:function(){var e=this._pageComponent&&this._pageComponent.getParentPageId();return d.getFullyQualifiedId(this._id,e)},getName:function(){return this._name},getVoiceCommandId:function(){return this._voiceCommand},getDescription:function(){return this._description},getPageComponent:function(){return this._pageComponent},getType:function(){return this._type},getInputs:function(e){var t=this._inputs;if(!e)return t;var n=[];return f.each(t,function(e,t){(t=f(t)).attr("type")&&n.push(t)}),n},run:function(e,t){return this._run(null,t,null,e)},_run:function(e,t,n,i){t=t||{};var r=n&&n.children("inputs").children(),a=o(t);return r&&r.length&&function(n,i){var r={};f.each(n,function(e){var t=n.eq(e);r[t.attr("name")]=d.mergeAsDataInContext(t.attr("value"),i)}),s(r,i)}(r,t),i&&s(i,t),u.actions.runActionsNode(this.getActions(),e,t).then(function(e){return t.$Input=a,e}).catch(function(e){throw t.$Input=a,e})},getActions:function(){return this._actionNodes},unregister:function(){delete i[this._id],delete r[this.getFullyQualifiedId()],this._type===n.HOTKEY_TRIGGERED&&u.hotkeys.unbind(this._id)}},u.actionSequences={ActionSequence:a,getAll:e,getAllActionSequencesFromPages:h,getAllVoiceCommandListeners:function(){return e().filter(function(e){if(e.getVoiceCommandId())return e})},getById:c,getByName:function(e){var t=l("name");return e?t[e]:t},getSequenceXMLFromId:function(e,t){if(e){e=d.escapeSelector(e),t=t||g();for(var n=void 0,i=0;i<t.length;i++){var r=t[i].find("actionsequence#"+e);if((n=r&&r.first())&&n.length)return n}}},initializeActionSequences:function(t){return h(t?[t]:g()).map(function(e){return new a(e,t)})},map:l,runActionSequenceAction:function(e,t,n){var i=e.attr("action-sequence-id");if(!i)throw Error("No Action Sequence specified.");var r=c(i);if(!r)throw Error("Invalid Action Sequence specified.");return r._run(t,n,e)}}}(skuid)},function(e,t,n){"use strict";!function(u){var d=u.$,i=u.native=u.native||{},f=u.utils,s=u.constants,l=function(){return f.inPlatform(s.CORDOVA)};function c(){return u.platform.hasFeature("Native")}function p(){var e=d.when();return u.utils.userInfo.location||(e=i.initializeUserLocation()),e}function t(e,t,n){if(!l())return f.resolve();var i=f.mergeAsTextInContext(e.attr("url"),n),r=f.mergeAsTextInContext(e.attr("message"),n),a=f.mergeAsTextInContext(e.attr("title"),n);if(!i&&!r)return f.reject("No content for share screen specified");var o={message:r,subject:a,url:i,chooserTitle:a},s=d.Deferred();return window.plugins.socialsharing.shareWithOptions(o,function(){s.resolve()},function(){s.reject()}),s.promise()}function n(e){if(!l())return f.resolve();var t=u.native.camera,n="true"===e.attr("savetodevice"),i=d.Deferred();return t||i.reject({$PreviousAction:{error:"You must upgrade your app to use this action."}}),t&&t.getPicture(function(t){u.ajax.direct({url:t,type:"GET"}).then(function(e){i.resolve({$NativeAction:{ImageUrl:t,ImageBody:e.body}})})},function(e){i.reject({$PreviousAction:{error:e}})},{correctOrientation:!0,saveToPhotoAlbum:n,cameraDirection:t.Direction.BACK}),i.promise()}function r(){if(!l())return f.resolve();var e=u.native.camera,n=d.Deferred();return e||n.reject({$PreviousAction:{error:"You must upgrade your app to use this action."}}),e&&e.getPicture(function(t){u.ajax.direct({url:t,type:"GET"}).then(function(e){n.resolve({$NativeAction:{ImageUrl:t,ImageBody:e.body}})})},function(e){n.reject({$PreviousAction:{error:e}})},{correctOrientation:!0,sourceType:e.PictureSourceType.PHOTOLIBRARY,cameraDirection:e.Direction.BACK,popoverOptions:{x:0,y:15,width:0,height:0}}),n.promise()}function a(){if(!l())return f.resolve();var e=u.native.scanner,t=d.Deferred();return e||t.reject({$PreviousAction:{error:"You must upgrade your app to use this action."}}),e&&e.scan(function(e){e.cancelled?t.reject({$PreviousAction:{error:"User has cancelled"}}):t.resolve({$NativeAction:{Text:e.text,Format:e.format}})},function(e){t.reject({$PreviousAction:{error:e}})}),t.promise()}function o(){return c()?i.geo.updateCurrentUserPosition():d.when()}function h(e){if(!c())return d.when();var t=e.attr("model"),r=e.attr("address"),a=u.model.getModel(t);if(!a)return f.reject("Invalid Model ID");if(!r)return f.reject("Must specify address template");var n=a.getRows();if(50<n.length)return f.reject("Model has too many rows to perform this action");var o=[];return d.each(n,function(e,t){var n=a.getRowId(t),i=f.mergeAsTextInContext(r,{row:t,model:a});o.push({id:n,address:i})}),p().then(function(){return m(o)}).then(function(){var r=f.keyBy(o,"id");a._customSortData(function(e,t){var n=f.grab(r[a.getRowId(e)],"distance","value"),i=f.grab(r[a.getRowId(t)],"distance","value");return n||0===n?i||0===i?n-i:-1:1})})}function g(e){if(!c())return d.when();var t=e.attr("model"),r=e.attr("address"),n=e.attr("units"),a=e.attr("duration-field"),o=e.attr("distance-field"),s=u.model.getModel(t);if(!s)return f.reject("Invalid Model ID");if(a&&!s.fieldsMap[a])return f.reject("Invalid duration field");if(o&&!s.fieldsMap[o])return f.reject("Invalid distance field");if(!o&&!a)return f.reject("Must have a duration or distance field set");if(!r)return f.reject("Must specify address template");var i=s.getRows();if(50<i.length)return f.reject("Model has too many rows to perform this action");var l=[];return d.each(i,function(e,t){var n=s.getRowId(t),i=f.mergeAsTextInContext(r,{row:t,model:s});l.push({id:n,address:i})}),p().then(function(){return m(l,n)}).then(function(e){d.each(e,function(e,t){var n=s.getRowById(t.id),i={};a&&t.time&&(i[a]=t.time.text),o&&t.distance&&(i[o]=t.distance.text),d.extend(n,i)}),s.notifyEditorsOfDataRefresh()})}function m(e,t){var n=d.map(e,function(e){return e.address});return i.geoAPI.getDrivingDistanceAndTripTimeFromAddresses(n,t).then(function(n){return d.each(e,function(e,t){n[t.address]&&(t.distance=n[t.address].distance,t.time=n[t.address].time)}),e})}function v(e,t,n){var i=e.attr("address"),r=f.inPlatform(s.CORDOVA),a=encodeURIComponent(f.mergeAsTextInContext(i,n)),o=void 0;return!r||u.native.isAndroid()?o=d('<a href="http://maps.google.com?q='+a+'"></a>'):u.native.isIOS()&&(o=d('<a href="https://maps.apple.com/?address='+a+'"></a>')),o&&o[0].click(),d.when()}function y(e,t,n){var i=e.attr("method")||"model",r=e.attr("model"),a=e.attr("app"),o=e.attr("field"),s=f.mergeAsDataInContext(e.attr("title"),n),l=f.mergeAsDataInContext(e.attr("body"),n),c=u.$M(r);return u.native.push.sendNotifications(a,{title:s,body:l,method:i,users:"model"===i&&d.map(c.data,function(e){var t=e[o];if(t)return t})})}i.action={getActionsToRegister:function(){var e={};return e["skuid-native-update-user-location"]=o,e["skuid-native-sort-by-proximity"]=h,e["skuid-native-add-distance-and-time-data"]=g,e["skuid-native-open-in-map"]=v,e["skuid-native-send-push-notifications"]=y,e["skuid-native-share"]=t,e["skuid-native-take-picture"]=n,e["skuid-native-access-photo-library"]=r,e["skuid-native-scan-barcode"]=a,e},blockUI:function(e,t){window.SpinnerDialog.show(null,e||null,!0,{overlayOpacity:.6,textColorRed:1,textColorGreen:1,textColorBlue:1});var n=d.Deferred();return t?(window.setTimeout(function(){window.SpinnerDialog.hide(),n.resolve()},t),n.promise()):n.resolve()},unblockUI:function(){window.SpinnerDialog.hide()}}}(window.skuid)},function(e,t,n){"use strict";var i,V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=n(251),z=(i=r)&&i.__esModule?i:{default:i};function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(S){var e,w=S.$,C=S.utils,I=C.mergeAsDataInContext,a=C.makeXMLDoc,l=function(e,t){return t?S.$M(I(e,t)):S.$M(e)},f=function(e,t,n,i){if(e&&t)return n?e.getConditionByName(I(t,n),i):e.getConditionByName(t,i)},d=S.actions={},i=S.interactions={},c={},o={},s={swipe:"drag",swipeleft:"dragleft",swiperight:"dragright",swipeup:"dragup",swipedown:"dragdown"},t=S.constants,u=t.ACTION_TYPES.PLATFORM_ACTION,n=t.DISPLAY_TYPES,k=n.BOOLEAN,T=n.DATE,x=n.DATETIME,D=n.REFERENCE,p=t.EVENT_SCOPES,r=t.SALESFORCE,h=t.VALUE_SOURCES,R=h.BLANK,y=h.DS_USER_INFO,E=h.FIELD_VALUE,A=h.FORMULA,b=h.MODEL_MERGE,F=h.PARAM,P=h.USER_INFO,g=t.CORDOVA,O=[R,y,E,A,b,F,P],m="rememberInPersonalization",v=d.register=function(e){w.extend(c,e)},N=C.getContextToUse,_=function(e,t,n,i){var r=this.getModel(),a="all"===t.attr("affectedrows")?"model":"row",o=this.getContextToUse(a),s=o.row,l=o.list,c=!!l&&w.map(l.getSelectedItems(),function(e){return e.row});!c&&o&&o.rows&&(c=o.rows),s&&r&&r.getRowById(r.getRowId(s))?r[e]([s]):c&&c.length&&r&&l&&l.model===r?r[e](c):c&&c.length&&i.model&&!l?i.model[e](c):r&&r.data.length&&r[e](r.data)},M=function(e){var t=C.isPromise;return e&&(e.deferred&&t(e.deferred)||t(e))};function L(e){var t=S.dataSource.get(e);return(t?w.when(t):S.loader.service.loadDataSourceAndDependencies(e)).then(function(e){return e?e.isAuthenticated()?e:e.authenticate().then(function(){return e}):void 0})}function U(m,v,e,y){var b={};return w.each(e,function(e,t){var n=t.fieldDisplayType,i=t.formula,r=t.relationshipData,a=t.relationshipFieldName,o=t.value,s=t.valueSource;if(s===E&&n===D){var l=C.extractFieldsFromTemplate(o),c=void 0,u=void 0;if(l&&1===l.length)if(c=l[0],C.startsWith(c,"$Model.")&&C.contains(c,".data.")){u=c.split(".");var d=S.$M(u[1]),f=parseInt(u[3],10),p=c.indexOf("."+u[3]+".")+2+u[3].length,h=c.substring(p,c.length),g=void 0;d&&(g=d.data[f])&&(r=h===d.getIdField()?g:d.getFieldValue(g,d.getReferenceFieldRelationshipName(h),!0))}else r=c===m.getIdField()?v:m.getFieldValue(v,m.getReferenceFieldRelationshipName(c),!0)}switch(s){case E:o?C.isString(o)&&(o=I(o,w.extend({},y,{model:m,row:v}),{createFields:!1,registerFields:!1}),n===k&&("false"===o?o=!1:"true"===o&&(o=!0))):n&&[k,T,x].includes(n)?n===k&&(o=!1):o="";break;case A:o=S.formula.evaluate(i,w.extend({},y,{model:m,row:v}),{outputType:n});break;case R:o=null}b[e]=o,a&&r&&(b[a]=r)}),b}function j(e){var d=e.contextToUse,f=e.dataSource,p=e.modelToUpdate,t=e.updateNodes,h={},g=f?f.getDataSourceType():null;return t.each(function(){var e=w(this),t=I(e.attr("field"),d),n=e.attr("userinfotype"),i=e.attr("value"),r=e.attr("valuesource"),a=void 0,o=void 0,s=void 0,l=void 0,c=void 0;if(t){!r&&e.is("default")&&e.attr("type")&&(r=e.attr("type")===R?R:E),O.includes(r)||(r=E);var u=h[t]={valueSource:r};switch(p&&(o=p.getField(t))&&(a=u.fieldDisplayType=o.displaytype),r){default:case E:u.value=i,a===D&&(u.relationshipFieldName=p.getReferenceFieldRelationshipName(t));break;case y:g&&(u.value=g.evaluateUserInfoConditionSourceType?g.evaluateUserInfoConditionSourceType(f,n):f.getUserInfoProperty(n));break;case A:u.formula=e.children("formula").text();break;case F:u.value=d.pageComponent?d.pageComponent.getParameter(i):S.page.params[i];break;case P:u.value=C.getUserInfoPropValue(n);break;case b:if(s=I(e.attr("sourcefield"),d),c=(l=function(e,t,n){return S.$M(I(e.attr(t),n))}(e,"sourcemodel")).getFirstRow(),u.value=l&&l.getFieldValue(c,s,!0),!p.getReferenceFieldRelationshipName(t))break;u.relationshipData=s===l.getIdField()?c:l.getFieldValue(c,l.getReferenceFieldRelationshipName(s),!0);break;case R:u.value=null}}}),h}function B(e){var t=e.action,n=e.actionDef,i=e.contextToUse,r=e.dataSource,a=e.modelToUpdate,o={},s=r?r.getDataSourceType():null,l=I(n.attr("field"),i),c=n.attr("userinfotype"),u=n.attr("value"),d=n.attr("valuesource"),f=void 0,p=void 0,h=void 0,g=void 0,m=void 0;if(!l)return{};O.includes(d)||(d=E);var v=o[l]={valueSource:d};switch(a&&(p=a.getField(l))&&(v.fieldMetadata=p,f=v.fieldDisplayType=p.displaytype),d){default:case E:v.value=u,f===D&&(v.relationshipFieldName=a.getReferenceFieldRelationshipName(l));break;case y:s&&(v.value=s.evaluateUserInfoConditionSourceType?s.evaluateUserInfoConditionSourceType(r,c):r.getUserInfoProperty(c));break;case A:v.formula=n.children("formula").text();break;case F:v.value=i.pageComponent?i.pageComponent.getParameter(u):S.page.params[u];break;case P:v.value=C.getUserInfoPropValue(c);break;case b:if(h=I(n.attr("sourcefield"),i),m=(g=t.getModel({attributeName:"sourcemodel"})).getFirstRow(),v.value=g&&g.getFieldValue(m,h,!0),!a.getReferenceFieldRelationshipName(l))break;v.relationshipData=h===g.getIdField()?m:g.getFieldValue(m,g.getReferenceFieldRelationshipName(h),!0)}return o}i.register=function(e){w.each(e,function(){o[this]=1})},i.processInteractionsNode=function(e,t,n){e.children().each(function(){i.processInteractionNode(w(this),t,n)})},i.processInteractionNode=function(e,i,t){if(!e||!e.children)return!1;var n=e.attr("type"),r=e.children("actions").first();if(n in o==!1)return!1;t&&t.selector?i.element.on(n,t.selector,function(e){var t=w(this),n=t&&t.data?t.data("component"):null;n||(n=i),d.runActionsNode(r,n),e&&e.gesture&&e.gesture.preventDefault()}):(i.element.on(n,function(e){d.runActionsNode(r,i),e&&e.gesture&&e.gesture.preventDefault()}),s[n]&&i.element.on(s[n],function(e){e.gesture.stopPropagation(),e.gesture.preventDefault()}))},i.runInteractionsNode=function(e,t,i,n){var r=a("<actions></actions>");return i=i.length?i:[i],e.clone().children("interaction").each(function(e,t){var n=(t=w(t)).attr("type")+("swipe"==t.attr("type")?t.attr("direction"):"");-1<i.indexOf(n)&&r.append(t.children())}),S.actions.runActionsNode(r,t,{model:n.model,item:n.item,row:n.row,list:n.list,initiatorId:n.initiatorId})},i.enableInteractions=function(i,o){if(!(o.customInteractionsEvaluator||o.interactionsDef&&o.interactionsDef.children().length))return!1;var s=o.customInteractionsEvaluator,l=o.context||{},c=o.component;function e(r,a){function e(t){var n=this;if(!(t.target!==t.currentTarget&&["INPUT","BUTTON","SELECT","TEXTAREA"].includes(t.target.tagName)||t.target.getAttribute&&"button"===t.target.getAttribute("role"))){var e,i=function(e){return o.component.publish("interaction.run",{eventName:r,event:t,item:n}),e};if(e=s?(o.validGestures=a,o.eventName=r,o.event=t,o.item=this,s(o)):S.interactions.runInteractionsNode(o.interactionsDef,o.component,a,l),t.stopPropagation(),M(e))return e.then(i);i()}}function t(){i.off("click.skuid"),i.hammer({}),i.on(r,e)}if(("tap"==a||-1<a.indexOf("tap"))&&i.on("click.skuid",e),S.ui.hammerJSLoaded)t();else{var n=S.events.subscribeOnce("skuid.resources.hammerjsloaded",t);c&&c.storeSubscription(n)}}e("tap.skuid","tap"),e("swipeleft.skuid",["swipeleft","swipeeither"]),e("swiperight.skuid",["swiperight","swipeeither"]),e("press.skuid","press")},i.disableInteractions=function(e){e.off("tap.skuid click.skuid swipeleft.skuid swiperight.skuid press.skuid")},d.runActionsNode=function(e,t,n){var l="true"===e.attr("continuesequenceonerror"),i=e.children(),c=[],u=function(e,t){t&&(c.length=0),Array.prototype.push.apply(c,e.get().reverse().map(function(e){return w(e)}))};return t&&t.xmlDefinition&&t.xmlDefinition.attr&&t.xmlDefinition.attr("buttonset")&&(w(".sm-buttonset-"+t.xmlDefinition.attr("buttonset")).removeClass("sm-active"),t.element.addClass("sm-active")),i.length?(u(i),function i(r){var a,o=c.pop(),s=r&&r.$Output||{};return o?d.runActionNode(o,t,r).then(function(e,t){var n=o.children("iftrueactions").children();return n.length?(!0===e&&(a=o.attr("whenfinished"),u(n,"continue"!==a)),i(w.extend(r,e))):!1===e?C.reject():i(w.extend(r,e,{$Output:w.extend(s,t)}))}).catch(function(e,t){if(!0===t)return w.Deferred().reject(e,t);var n=o.children("onerroractions").children();if(n.length)u(n,!0);else if(!l)return S.mobile&&S.mobile.processResponsiveElements(),w.Deferred().reject(w.extend(r,e),!0);return i(w.extend(r,e))}):(S.mobile&&S.mobile.processResponsiveElements(),w.when(r))}(n)):w.when()},d.runActionNode=function(e,t,n){var i=e&&e.attr("type");return d.runAction(i,e,t,n)},d.runAction=function(e,r,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};if(!e)return S.utils.resolve();var t,a,o={};e in c?t=c[e]:n&&n.type()&&(a=S.componentType.get(n.type()).actions)&&e in a&&(t=a[e]);var s={getContextToUse:function(e){var t={};return e&&(t.mode=e),N(n,i,t)},getInitiatorId:function(){var e=this.getContextToUse().initiatorId;return!e&&n&&C.isFunction(n.id)&&(e=n.id()),e},getModelId:function(e){e||(e={});var t=e.attributeName||"model",n=e.modelId||r&&r.attr(t),i=this.getContextToUse();return i?I(n,i):n},getModel:function(e){return S.$M(this.getModelId(e))},runAction:function(e,t){return t||(t={}),d.runAction(e,t.actionDef||r,t.component||n,t.context||i)},recordOutput:function(e,t){var n=Array.prototype.reduce.call(r.find("> outputs > output"),function(e,t){var n=S.$(t);return e[n.attr("id")]=n.attr("name"),e},{}),i={};C.isString(e)?i[e]=t:i=e,Object.getOwnPropertyNames(i).forEach(function(e){var t=n[e];t&&(o[t]=i[e])})}};if(z.default.logActionBeginning(r,n,i),!t)return z.default.logActionEnding(i,"Invalid action type"),w.when();var l=void 0;try{l=w.when(t.call(s,r,n,i))}catch(e){return z.default.logActionEnding(i,e),C.reject(e)}return l.then(function(e){return M(e)&&e.deferred||e}).then(function(e){return z.default.logActionEnding(i),w.when(e,o)}).catch(function(e){return z.default.logActionEnding(i,e),C.reject.apply(C,arguments)})},d.registerEditorWithModelsForActionsNode=function(e,t){var n=e.find("action"),i=function(e,t){var n=e.find('action[type="save"], action[type="requeryModel"], action[type="requeryModels"]');n.length&&n.each(function(){var e=w(this);"requeryModel"===e.attr("type")?t.registerModel(l(e.attr("model"))):e.children("models").children().each(function(){t.registerModel(l(w(this).text()))})})};if("action-sequence"===n.attr("type")){var r=n.attr("action-sequence-id"),a=t.getParentPageId(),o=S.actionSequences.getById(r,a),s=o&&o.getActions();s&&i(s,t)}else i(e,t)},v((G(e={branch:function(e){var t=this.getModel(),n=this.getContextToUse();return t&&(n.model=t,n.model===t&&-1===t.data.indexOf(n.row)&&(n.row=t.getFirstRow())),C.mergeInContext(e.children("formula").text(),n,{evaluateFormulas:!0,outputType:k,asData:!0,createFields:!1})},blockUI:function(e){var t={},n=e.attr("message"),i=e.attr("timeout");if(n&&(t.message=C.mergeInContext(n,this.getContextToUse(),{createFields:!0,registerFields:!1,nl2br:!0})),i&&(t.timeout=parseInt(i,10)),C.inPlatform(g))return S.native.action.blockUI(t.message.text(),i);w.blockUI(t)},unblockUI:function(){if(C.inPlatform(g))return S.native.action.unblockUI();w.unblockUI()},deactivateFilterableConditions:function(e){var t=this,n="true"===e.attr(m),i=e.children("models").first();w.each(i.children("model"),function(){t.getModel({modelId:w(this).text()}).deactivateFilterableConditions({remember:n,initiatorId:t.getInitiatorId()})})},save:function(e,t,n){var i,r=this,a=[],o=e.children("models").first(),s="true"===e.attr("rollbackonanyerror"),l=w.Deferred(),c=n?n.initiatorId:null,u={rollbackOnAnyError:s};return c&&(u.initiatorId=c),o.length?w.each(o.children("model"),function(){(i=r.getModel({modelId:w(this).text()}))&&a.push(i)}):(i=r.getModel())&&a.push(i),t&&t.button&&t.button.startProcessing(),w.when(S.model.save(a,u)).then(function(e){e.totalsuccess?l.resolve(e):l.reject(e),t&&t.button&&t.button.stopProcessing()},function(e){l.reject(e),t&&t.button&&t.button.stopProcessing()}),l.promise()},cancel:function(e){var t,n=this,i=[],r=e.children("models").first();r.length?w.each(r.children("model"),function(){(t=n.getModel({modelId:w(this).text()}))&&i.push(t)}):(t=n.getModel())&&i.push(t),S.model.cancel(i)},markRowsForDeletion:function(e,t,n){_.call(this,"deleteRows",e,t,n)},unmarkRowsForDeletion:function(e,t,n){_.call(this,"undeleteRows",e,t,n)},unmarkAllRowsForDeletion:function(e){var t=this,n=e.children("models").first();n.length&&w.each(n.children("model"),function(){var e=t.getModel({modelId:w(this).text()});e&&e.undeleteRows()})},createRow:function(e){var t=this,o=t.getModel();if(o){var n="all"===e.attr("affectedrows")?"model":"row",s=t.getContextToUse(n),i=s.model,r=s.row,l=s.list,c=s.editor,a=s.rows,u="append"===e.attr("appendorprepend"),d="edit"===e.attr("defaultmodefornewitems"),f=e.children("defaults").first().children(),p=[],h=f&&f.length&&j({contextToUse:s,dataSource:o.getDataSource(),modelToUpdate:o,updateNodes:f}),g=function(e,t){var n=[],i=l?l.conditions:null,r=c?c.conditions:null;if(c&&r&&r.length&&c.models&&c.models.includes(t)?C.mergeArrays(n,r):l&&i&&i.length&&l.model===o&&C.mergeArrays(n,i),h&&C.size(h)){var a=U(t,e,h,s);w.each(a,function(e,t){n.push({field:e,value:t})})}return o.createRowAsync({additionalConditions:n,doAppend:u,editModeForNewItems:d}).then(function(e){return p.push(e)})},m=[];return r?m.push(g(r,i)):a&&a.length?w.each(a,function(e,t){m.push(g(t,i))}):m.push(g(null,i)),w.when.all(m).then(function(){var e={};return p.length&&(1===p.length?e.row=p[0]:e.rows=p),t.recordOutput("rows",p),e})}},adoptRows:function(e){var t=this.getModel({attributeName:"sourcemodel"}),n=this.getModel({attributeName:"targetmodel"}),i="all"===e.attr("affectedrows")?"model":"row",r=this.getContextToUse(i),a=r.list,o=r.rows,s=r.row,l=[];t&&n&&t.data&&t.data.length&&(l=s&&t.getRowById(t.getRowId(s))?n.adoptRows([s]):o&&o.length&&a&&a.model===t?n.adoptRows(o):n.adoptRows(t.data)),this.recordOutput("rows",l)},"voice-command":function(e,t,n){return S.platform.hasFeature("Voice")?S.voiceCommands.globalVoiceAction(e,t,n):C.reject("Voice feature flag is not active")},updateRow:function(i){var r=this,a=r.getModel({attributeName:"fieldmodel"}),o=i.attr("datasource")||a&&a.getDataSourceName()||S.platform.getDefaultDataSourceName(),e="all"===i.attr("affectedrows")?"model":"row",s=r.getContextToUse(e),t=s.list,l=s.rows,c=s.model,u=s.row,d=void 0,f=void 0;return!c&&t&&(c=t.model),L(o).then(function(e){e||(e=S.dataSource.get(o));var t=i.children("updates").children("update"),n=(t.length?j:B)({action:r,actionDef:i,contextToUse:s,dataSource:e,modelToUpdate:a,updateNodes:t});a&&(u&&a.containsRow(u)?d=[a.updateRow(u,U(c,u,n,s))]:(l&&l.length&&c===a?(f={},w.each(l,function(e,t){f[c.getRowId(t)]=U(c,t,n,s)})):(f={},w.each(a.getRows(),function(e,t){f[a.getRowId(t)]=u?U(c,u,n,s):U(a,t,n,s)})),C.size(f)&&(d=a.updateRows(f)))),r.recordOutput("rows",d)})},requeryModel:function(e,t,n){var i=this,r=i.getModel(),a=w.Deferred();if(!r)return C.reject('The model "'+i.getModelId()+'" could not be resolved.');t&&t.button&&t.button.startProcessing(),r.hasChanged&&r.cancel();var o="loadmore"!==e.attr("behavior")?"updateData":"getMoreData";return w.when(r[o](void 0,n)).then(function(e){i.recordOutput("rows",e.updatedRows[r.id]),a.resolve(e),t&&t.button&&t.button.stopProcessing()},function(e){a.reject({$PreviousAction:{error:e}}),t&&t.button&&t.button.stopProcessing()}),a.promise()},requeryModels:function(e,t,n){var i=this,r=[],a=e.children("models").first(),o=w.Deferred();a.length&&w.each(a.children("model"),function(){var e=i.getModel({modelId:w(this).text()});e&&r.push(e)}),t&&t.button&&t.button.startProcessing(),w.each(r,function(){this.hasChanged&&this.cancel()});var s="loadmore"!==e.attr("behavior")?"updateData":"getMoreData";return w.when(S.model[s](r,void 0,n)).then(function(e){i.recordOutput("idxrows",e.updatedRows),o.resolve(e),t&&t.button&&t.button.stopProcessing()},function(e){o.reject({$PreviousAction:{error:e}}),t&&t.button&&t.button.stopProcessing()}),o.promise()},sortModel:function(e,t,n){var i=this.getModel(),r="true"===e.attr(m),a=I(e.attr("field"),n),o=w.Deferred(),s="true"===e.attr("client-side"),l="false"!==e.attr("should-query"),c=function(){o.resolve()};return i?(i.toggleOrdering(a,{explicitOrder:e.attr("method")||"toggle",clientSide:s,shouldQuery:l,shouldUpdatePersonalization:r},c),l||c(),o.promise()):o.reject("Invalid model provided for Sort Model action.").promise()},searchModel:function(e,t,n){var i,r=this.getModel();function a(e){return w.Deferred().promise().reject(e)}if(r)return(i=r.getDataSourceType())&&i.modelsCanSearch()?(r.buildSearchCondition(!1,I(e.attr("search"),n),r.getSearchableFields()),this.runAction("requeryModel")):a("The selected Model's Data Source does not support search.");var o=this.getModelId();return a(o?"Invalid Model: "+o+" does not exist, so it cannot be searched.":"No Model specified to Search.")},emptyModelData:function(e){var n=this,t=e.children("models").first(),i={};t.length&&(w.each(t.children("model"),function(){var e=w(this).text(),t=n.getModel({modelId:e});i[e]=t?t.emptyData():[]}),n.recordOutput("idxrows",i))},abandonRows:function(e){var t=this.getModel(),n="all"===e.attr("affectedrows")?"model":"row",i=this.getContextToUse(n),r=i.list,a=i.rows,o=i.row;t&&t.data&&t.data.length&&(o&&t.getRowById(t.getRowId(o))?this.recordOutput("rows",t.abandonRows([o])):a&&a.length&&r&&r.model===t?this.recordOutput("rows",t.abandonRows(a)):this.recordOutput("rows",t.emptyData()))},redirect:function(e){C.redirect(w.extend(this.getContextToUse(),{url:e.attr("url"),window:e.attr("window")}))},pageredirect:function(e,t,i){var r={},n=e.attr("page"),a=e.attr("route"),o=e.attr("module"),s=e.attr("namespace");w.each(e.children("params").children(),function(e,t){var n=w(t);r[n.attr("key")]=C.mergeAsDataInContext(n.attr("value"),i,{createFields:!1,registerFields:!1})}),(n||a)&&S.loader.load({isReplace:!0,namespace:s,pageName:n,pageModule:o,parameters:r,routeName:a,previousPageComponent:t&&t.getParentPage({root:!0})||S.component.getByType("skuidpage")[0]})},custom:function(e,t,n){var i,r,a=S.snippet.get(e.attr("snippet"));if(a){if(i=this.getContextToUse(),w.extend(i,{component:t,context:n}),!1===(r=a(i)))return!1;if(r&&"object"===(void 0===r?"undefined":V(r)))return r}},"sfdc-custom-apex":function(e){return e.attr({actionname:"apex",datasource:r}),this.runAction("datasource-action")},"action-sequence":function(e,t){return S.actionSequences.runActionSequenceAction(e,t,this.getContextToUse())},"datasource-action":function(t,n){var e=t.attr("datasource"),i=this.getContextToUse(),r=t.attr("actionname");return L(e).then(function(e){return e?e.runAction(r,t,n,i):C.reject("Invalid Data Source Name for action: "+r)})}},u,function(e,t,n){var i=e.attr(u),r=(S.platform.getActions?S.platform.getActions():[]).find(function(e){return e.name===i});return r?r.run(e,t,n):C.reject("Invalid Platform Action name: "+i)}),G(e,"offline-syncing",function(e,t){return S.offline.runAction("offline-syncing",e,t,this.getContextToUse())}),G(e,"go-online",function(e,t){return S.offline.runAction("go-online",e,t,this.getContextToUse())}),G(e,"go-offline",function(e,t){return S.offline.runAction("go-offline",e,t,this.getContextToUse())}),G(e,"show-pending-syncs",function(e,t){return S.offline.runAction("show-pending-syncs",e,t,this.getContextToUse())}),G(e,"publish",function(e,t){var a=this,n=e.attr("event"),i=e.attr("scope")||p.SKUID,r=e.children("params").children(),o=e.attr("channel"),s={scope:i,qualifyEventName:!1},l={},c=t&&t.getParentPage&&t.getParentPage();r.length&&w.each(r,function(e,t){var n=w(t),i=n.attr("name"),r=n.attr("value");l[i]=C.mergeAsDataInContext(r,a.getContextToUse())}),o&&(s.channel=o),c&&c.publish?c.publish(n,l,s):S.events.publish(n,l?[l]:void 0,s)}),G(e,"setCondition",function(e,t){var n,i,r,a=this.getContextToUse(),o=this.getModel(),s=a.model,l=a.row,c=a.rows,u="true"===e.attr(m),d=e.attr("value");return!!o&&(!!(n=f(o,e.attr("condition"),a,!0))&&(!s&&t&&t.model&&(s=t.model),s||(s=o),!l&&c&&c.length&&(l=c[0]),l||(t&&t.row&&!C.isFunction(l)&&(l=t.row),!l&&s&&(l=s.getFirstRow())),r=w.extend({},a,{row:l,model:s}),i=I(d,r,{createFields:!1,registerFields:!1}),void o.setCondition(n,i,{remember:u,initiatorId:this.getInitiatorId()})))}),G(e,"deactivateCondition",function(e,t,n){var i="true"===e.attr(m),r=this.getModel();if(!r)return!1;var a=f(r,e.attr("condition"),n,!0);a&&r.deactivateCondition(a,{remember:i,initiatorId:this.getInitiatorId()})}),G(e,"activateCondition",function(e,t,n){var i,r="true"===e.attr(m),a=this.getModel();if(!a)return!1;(i=f(a,e.attr("condition"),n,!0))&&a.activateCondition(i,{remember:r,initiatorId:this.getInitiatorId()})}),G(e,"updateIncludePanel",function(e,t,n){var i=S.$C(e.attr("panelid")),r=e.attr("pagename"),a=e.attr("querystring"),o=e.attr("module"),s=w.Deferred(),l={createFields:!1,registerFields:!1};return i?(i.pagename=I(r,n,l),i.includeType="skuid",o&&(i.modulename=o),i.querystring="?"+(a?I(a,n,l):e.attr("parameter")+"="+n.row.Id),i.load(s.resolve)):s.resolve(),s.promise()}),e)),v(S.native.action.getActionsToRegister())}(skuid)},function(e,t,n){"use strict";function o(){return window.skuid.debug.actions}function s(){return o()._logging()}Object.defineProperty(t,"__esModule",{value:!0});var a=0,l={},c="_debuggingIds";t.default={logActionBeginning:function(e,t,n){if(s()){var i=!(!e||!e.length),r={component:t,context:skuid.$.extend(!0,{},n),attributes:i?e.attr():{},xml:{text:i?function(e){if(!e.length)return"";if(!e[0].outerHTML)return"";var a="",o=0;return e=e[0].outerHTML.replace(/(>)(<)(\/*)/g,"$1\r\n$2$3"),skuid.$.each(e.split("\r\n"),function(e,t){var n=0;t.match(/.+<\/\w[^>]*>$/)?n=0:t.match(/^<\/\w/)?0!=o&&(o-=1):n=t.match(/^<\w([^>]*[^\/])?>.*$/)?1:0;for(var i="",r=0;r<o;r++)i+="  ";a+=i+t+"\r\n",o+=n}),a}(e):"",node:i&&e[0]}};i?o()._log("Action running: "+(e.attr("type")||"Unknown Action"),r):r.hasXML=i,function(e,t){e[c]?e[c].push(a):e[c]=[a],l[a]={details:t,startTime:window.Date.now()},a++}(n,r)}},logActionEnding:function(e,t){if(s()){var n=function(e){if(e[c]&&e[c].length){var t=e[c].pop(),n=l[t];return delete l[t],n}}(e),i=n.startTime,r=window.Date.now()-i,a=n.details.attributes.type;t&&o()._error("Action failed: "+(a||"Action triggered without XML")+"\n",n.details,"\n",t),r>o()._threshold()&&o()._log("Slow Action ("+r+" milliseconds): "+(a||"Action triggered without XML"),n.details)}else t&&o()._error(t)}}},function(e,t,n){"use strict";!function(e){var h=e.utils,n=e.$,i=e.constants.AGGREGATION_TYPES;function r(e,t){switch(e){case i.SUM:return t.reduce(function(e,t){return e+t},0);case i.AVERAGE:return t.reduce(function(e,t){return e+t},0)/t.length;case i.MAXIMUM:return t.reduce(function(e,t){return e<t?t:e},-1/0);case i.MINIMUM:return t.reduce(function(e,t){return t<e?t:e},1/0);case i.MEDIAN:var n=t.sort(function(e,t){return e-t});return t.length%2==0?(n[Math.floor(t.length/2)]+n[Math.floor(t.length/2)-1])/2:n[Math.floor(t.length/2)];case i.COUNT:return t.length}}e.aggregations={aggregate:function(e,a,o,s){s=n.extend({countBlanks:!1,rows:a.getRows()},s);var l=a.getField(o);if(!l)return null;var c=h.isMultiCurrencyOrganization,u=h.userInfo.defaultCurrency,t=s.rows,d=!1,f=!0,p=[];return t.forEach(function(e){var t,n=a.getFieldValue(e,o,!0);if(!n&&0!==n){if(!s.countBlanks)return!0;n=0}if(l&&(t=l.displaytype,c&&"CURRENCY"===t&&n)){var i,r=h.getRowCurrency({model:a,row:e,field:o});r&&r!==u&&(i=h.convertCurrency(n,r,u))&&i!==n&&(n=i),f&&(r||(r=u),d?d!==r&&(f=!1):d=r)}p.push(n)}),r(e,p)},aggregateValues:r}}(skuid)},function(e,t,n){"use strict";!function(e){var t=void 0,u={},d=e.$,f=e.utils;function n(){return t||(t=d(document.body)),t}function a(e,i,s,l,c){var t=void 0;e&&e.children?(t=[],d.each(e.children(),function(){var e=d(this);t.push({key:e.attr("key"),ignoreTextInputs:"true"===e.attr("ignoretextinputs"),modifiers:e.attr("modifiers")})})):t=d.isArray(e)?e:[e],t&&t.length&&(c||(c=n()),t.forEach(function(e){var r,t,n=void 0,a=void 0,o=void 0;o=f.isString(e)?(a=!1,e):(n=e.modifiers,a=!0===e.ignoreTextInputs,(n?n.replace(",","+")+"+":"")+e.key),function(e){var t=e.bindString;(u[t]||(u[t]={}))[e.uniqueId]=e}(r={actionFunction:s,bindString:o,uniqueId:i,visibleElement:l}),t="keydown.skuid"+(i?"."+i:""),c.on(t,null,{keys:o,filterTextInputs:a},function(e){if((!a||"true"!==d(e.target).attr("contenteditable"))&&l&&l.is(":visible")&&s){var t=u[o],n=void 0,i=r;t&&1<f.size(t)&&((n=function(e){var t=e.visibleElement,n=void 0,i=-1;return t&&t.length?(n=t&&t.closest&&t.closest(".ui-dialog-content")).length?i=n.zIndex():t.closest("body").length||(i=-2):i=-2,e.zIndex=i})(r),d.each(t,function(e,t){i.uniqueId!==e&&t!==i&&t.actionFunction&&n(t)>i.zIndex&&(i=t)})),e.preventDefault(),e.stopImmediatePropagation(),i.actionFunction()}})}))}function i(){var e=void 0,t=void 0;2===arguments.length?(e=arguments[0],t=arguments[1]):(t=arguments[0],e=n()),e.off("keydown.skuid"+(t?"."+t:"")),function(n){d.each(u,function(e,t){t&&n in t&&delete t[n]})}(t)}e.hotkeys={bind:a,getFromCache:function(e){return u[e]},off:i,on:function(e,t,n,i,r){a(t,n,i,r,e)},unbind:function(e){i(e)}}}(skuid)},function(e,t,n){"use strict";var i,o=n(255),s=(i=o)&&i.__esModule?i:{default:i};!function(e){var t,n=e.$,i=e.personalization={},r={};function a(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).pageComponentId;return e?(r[e]||(r[e]=t=new s.default),r[e]):t}n.extend(i,{getPageSettings:function(){return a(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{pageComponentId:e.page.pageComponent.id()}).getPageSettings()},createComponentService:function(e){return a({pageComponentId:e.getParentPageId()}).createComponentService(e)},createModelService:function(e){return a({pageComponentId:e.getParentPageId()}).createModelService(e)},initializeSettings:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};a(e)[o.PersonalizationProp.initialize](e)}})}(skuid||(window.skuid={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PersonalizationProp=void 0;var b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),S=r(n(256)),w=r(n(257)),C=r(n(49));function r(e){return e&&e.__esModule?e:{default:e}}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=skuid.$,a=t.PersonalizationProp=Object.freeze({deleteElement:"_deleteElement",diffChecker:"_diffChecker",getNode:"_getNode",initialize:"_initialize",save:"_save"}),o=a.deleteElement,k=a.diffChecker,s=a.getNode,l=a.initialize,T=a.save,x="_cookieName",D="_initialized",R="_pageNamespace",E="_settings",A="_storageKey";function c(e,t){var n=this;if(!this[D])throw"PersonalizationService must be initialized";var i=new e(t,{diffChecker:this[k],getNodeCallback:function(e){return n[s](i,e)}});return i.subscribe("updated",function(){return n[T]()}),i}var u=function(){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),b(this,(I(e={},E,{}),I(e,D,!1),e))}return i(t,[{key:"createComponentService",value:function(e){return c.call(this,S.default,e)}},{key:"createModelService",value:function(e){return c.call(this,w.default,e)}},{key:"getPageSettings",value:function(){return JSON.parse(JSON.stringify(this[E]||{}))}},{key:l,value:function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=t.mode,i=void 0===n?"server":n,r=t.pageComponentId,a=t.pageId,o=t.pageName,s=t.pageNamespace,l=t.pageSettings,c=void 0===l?{}:l,u=t.pageXML,d=t.hashMap,f=this[E];if(!this[D]){this[D]=!0,t.mode||skuid.utils.log('Warning: Skuid Personalization Page Context for "'+a+'" was intialized without a "mode" property.',skuid.constants.LOG_LEVELS.WARNING);var p="sk-pf-"+a;if(b(this,(I(e={},k,new C.default(u,d)),I(e,"_mode",i),I(e,"_pageId",a),I(e,"_pageName",o),I(e,R,s),I(e,A,p),I(e,x,"apex__"+p),e)),this.isClientSide){var h=skuid.data.localStorage,g=JSON.parse(h.getItem(p)||"{}");b(f,g)}else b(f,c);var m=d&&Object.keys(d).filter(function(e){return e.startsWith("m#")}).map(function(e){return e.slice(2)}),v=function(){S.default.prune(f,u,r),w.default.prune(f,u,m)};if(skuid.utils.inPlatform(skuid.constants.VISUALFORCE))var y=skuid.events.subscribe("page.rendered",function(e){e.page.id()===r&&(v(),y.unsubscribe())});else v()}}},{key:o,value:function(e){var t=this[E],n=e.namespace,i=e.type,r=e.id,a=t&&t[n];if(a){var o=a[i];o&&(o[r]&&delete o[r],0===Object.keys(o).length&&delete a[i]),0===Object.keys(a).length&&delete a[i]}}},{key:s,value:function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=this[E],i=!0===t.createNodes,r=[e.namespace,e.type,e.id],a=n,o=0;o<r.length;o++){var s=r[o];if(!a[s]){if(!0!=i)return null;a[s]={}}a=a[s]}return a}},{key:T,value:function(){var r=this,a=this[E],e=this[A],t=this[x],n=JSON.stringify(a);if(this.isClientSide){skuid.data.localStorage.setItem(e,n);var i=skuid.constants,o=i.VISUALFORCE,s=i.LIGHTNING,l=a.m;if(l&&skuid.utils.inPlatform([o,s])){var c=JSON.stringify({m:l});y.cookie(t,c,{secure:!0,path:"/"})}return skuid.utils.resolve()}var u=this._mode,d=this._pageId,f=this._pageName,p=this[R],h="_savingDeferred",g="_savingDeferredQueued",m=this[h];if(m){var v=this[g];return v||(v=this[g]=y.Deferred()),v.promise()}return m=this[h]=this[g]||y.Deferred(),delete this[g],skuid.remote().updatePersonalizationSettings(d,n,function(e,t){if(t.status){var n={mode:u,pageId:d,pageName:f,pageNamespace:p},i=skuid.runtime.cache.get("loader.serviceModstamps");skuid.loader.cache.memory.add.personalization(a,n),skuid.loader.cache.persistent.add.personalization(a,n,i&&i.pageService),m.resolve()}else m.reject(t);delete r[h],r[g]&&r[T]()}),m.promise()}},{key:"isClientSide",get:function(){return"client"===this._mode}}]),t}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),a=n(48);var o=skuid.$,s=skuid.constants.VISUALFORCE,i=function(e){function i(e,t){var n=t.getNodeCallback;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,n,"c",e._componentType,e.id()))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,a.PersonalizationsElementBase),r(i,null,[{key:"prune",value:function(e,i,r){a.PersonalizationsElementBase.prune(e,"c",function(e){var t="[uniqueid='"+o.escapeSelector("t"+e).slice(1)+"']",n=function(e){return 0<o(t,e).length};return n(i)||skuid.utils.inPlatform(s)&&void 0!==skuid.region.list().find(function(e){return e.parentPageId===r&&n(e.xmlDefinition)})})}}]),i}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),a=n(48),u=n(49);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=skuid.$,c="_addInitiatorProps",d="_diffChecker",f="_validated",p="_validateInitiatorProps";function h(e){return e.replace(/\./g,"\\.")}var o=function(e){function o(e,t){var n,i=t.getNodeCallback,r=t.diffChecker;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,i,"m","_",e&&e.id));return skuid.utils.ingestConstructorArguments(a,(l(n={},d,r),l(n,"_model",e),l(n,f,!1),n)),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,a.PersonalizationsElementBase),i(o,[{key:c,value:function(e,t){var n=this[d],i=t&&n.getVersionToken(t);return r(e,i?{i:t,t:i}:{t:n.getDefaultToken()})}},{key:p,value:function(e){var t=this[d],n=e.i,i=e.t;return!i||i===(n?t.getVersionToken(n):t.getDefaultToken())}},{key:"getNode",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(i):void 0}(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"getNode",this).call(this,e);return this[f]||this.validate(t),t}},{key:"getCondition",value:function(e){return e&&(e=h(e)),this.getSetting("c."+e+".v")}},{key:"setCondition",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=e.value,i=e.initiatorId;if(t){var r=this.getSetting("c."+h(t))||{},a=r.v,o=r.i;if(a!==n||o!==i){var s={c:l({},t,this[c]({v:n},i))};this.updateSettings(s)}}}},{key:"resetCondition",value:function(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).name;if(e&&this.getCondition(e)){var t={c:l({},e,null)};this.updateSettings(t,{removeNulls:!0})}}},{key:"getOrderBy",value:function(){return this.getSetting("o")}},{key:"setOrderBy",value:function(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).newValue;if(this.getOrderBy()!==e){var t={o:e};this.updateSettings(t)}}},{key:"resetOrderBy",value:function(){if(this.getOrderBy()){this.updateSettings({o:null},{removeNulls:!0})}}},{key:"getOrderByClient",value:function(){return this.getSetting("oc")}},{key:"setOrderByClient",value:function(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).newValue;if(this.getOrderByClient()!==e){var t={oc:e};this.updateSettings(t)}}},{key:"resetOrderByClient",value:function(){if(this.getOrderByClient()){this.updateSettings({oc:null},{removeNulls:!0})}}},{key:"validate",value:function(e){if(this[f]=!0,e&&0!==Object.keys(e).length){var t=this[d],n=this._model,i=e.c,r=e.mvt,a=t.getVersionToken(n.id,u.ModelIdType)||t.getDefaultToken();if(r){if(r!==a)return this.reset({deferUpdate:!0}),void(e.mvt=a)}else e.mvt=a;if(i)for(var o=Object.keys(i),s=o.length;s--;){var l=o[s],c=i[l];this[p](c)||this.deleteSetting("c."+l.replace(/\./g,"\\."),{deferUpdate:!0})}return!0}}},{key:"validated",get:function(){return this[f]}}],[{key:"prune",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];a.PersonalizationsElementBase.prune(e,"m",function(e){return 0<s("> models > model[id='"+s.escapeSelector("t"+e).slice(1)+"']",t).length||n.includes(e)})}}]),o}();if(t.default=o,skuid.utils.runningTests()){var g=skuid.testing;r(g.__internals,{ModelPersonalizations:o})}},function(e,t,n){"use strict";!function(d){var r=d.$,l=d.utils,e=d.actions,f=l.getContextToUse;function i(e,t,n,i){var r,a,o=f(t,n),s=e.children("panel").first().attr("uniqueid"),l=t||n&&n.component,c=l?l.getParentPage():d.component.getByType("skuidpage")[0],u=c.panel.getById(s);u?(i&&!u.isOpen()||!i)&&(r=u.context.row,(a=u.context.model)&&r&&o.row&&o.model&&a.getRowId(r)!==o.model.getRowId(o.row)&&u.updateContext(o),u.toggle(i)):c.panel.createFromAction(e,t,o),d.events.publish("ui.panel.toggled",{id:s})}d.interactions.register(["tap","hold","doubletap","pinch","pinchin","pinchout","swipeleft","swiperight","swipedown","swipeup","swipe","drag"]),e.register({closeTopmostPopup:function(){r(r(".ui-dialog-content").get().reverse()).each(function(){try{return r(this).dialog("close"),!1}catch(e){}})},closeAllPopups:function(){r(r(".ui-dialog-content").get()).each(function(){try{r(this).dialog("close")}catch(e){}})},showPopup:function(e,t,n){l.createPopupFromAction(e,f(t,n))},openSlidingPanel:function(e,t,n){"open"===e.attr("openbehavior")?i(e,t,n,!0):i(e,t,n)},toggleSlidingPanel:function(e,t,n){i(e,t,n)},closeSlidingPanel:function(e){"topmost"===e.attr("closebehavior")?r(r(".sk-pagepanel-open").get().reverse()).each(function(){try{var e=r(this).attr("id");return d.component.getById(e).close(),!1}catch(e){}}):r.each(d.component.getByType("skuidpage"),function(e,t){t.panel.closeAll()})},toggleRenderComponent:function(e){var t=e.attr("componentid"),n=e.attr("behavior"),i=l._getRenderOverride(t),r=d.$C(t),a="actions.conditionaloverride",o={componentId:t,component:r},s={scope:d.constants.EVENT_SCOPES.SKUID,qualifyEventName:!1};i&&(i.override=!0,i.doRender="toggle"===n?!i.doRender:"hide"!==n,r?r.publish(a,o,s):d.events.publish(a,[o],s))},runComponentAction:function(t,e,n){var i=d.$C(t.attr("componentid"),null,!0).map(function(e){return d.actions.runAction(t.attr("action"),t,e,n)});return r.when.all(i)}})}(skuid)},function(e,t,n){"use strict";!function(u){var e,d=u.$,f=u.utils,p="focus.skuid",s="click.skuid",l="keydown.navigation.skuid",r=s+" "+l,h=u.$.ui.keyCode;function c(e,t,n,i){t&&t.off("click.skuid").empty();var a=i.actionSelect,o=i.selectItem,r=i.itemDefinition;t.addClass(i.baseClass+"-dropdown-item").attr("tabindex",-1).on(s,function(e){"button"!==a.type&&a.list.getSelected()===o||(a.hasClass("unavailable")||(a.actionSelect("selectItem",o),a.selectBox&&a.selectBox.hide(self._animation)),e.stopPropagation())}).data("rendered",!0),t.off(l).on(l,function(e){var t=d(this),n=o===a.actionSelect("getSelectedItem");if(!n||e.which!==h.ENTER&&e.which!==h.SPACE)if(e.which!==h.ESCAPE||n){if(e.which===h.ENTER||e.which===h.SPACE)e.stopPropagation(),a.actionSelect("selectItem",o,{event:e});else if(e.which===h.UP||e.which===h.DOWN){var i=t.parent().children(),r=t.index();r=(e.which===h.UP?r-1:r+1)%i.length,i.eq(r).trigger("focus.skuid")}}else a.selectBox&&a.selectBox.hide(self._animation),"button"===a.type?a.actionArrow.attr("aria-expanded",!1).trigger("focus"):a.actionText.children().first().attr("aria-expanded",!1).trigger("focus");else t.trigger(s,!0),e.stopPropagation()}),t.off(p).on(p,function(e){e.stopPropagation(),o.onFocus&&"function"==typeof o.onFocus&&o.onFocus.apply(this,arguments)}),o.content?t.append(o.content):t.text(o.label),r.icon&&t.prepend(u.ui.createIcon(r.icon,{additionalClass:i.baseClass+"-icon inline"})),a.list.getSelected()||a.actionSelect("selectItem",o,{triggerHandlers:!1}),i.isInitialDraw||a.actionSelect("redraw")}function g(e,t,n,i){var r=i.actionSelect,a=i.selectItem;t.empty().removeClass(i.baseClass+"-dropdown-item").data("rendered",!1),r.list.unselectItem(a),i.isInitialDraw||r.actionSelect("redraw")}e={init:function(e){var n=this;n.data("component",n),n.config=e||{},n.config.baseClass=n.config.baseClass||"nx-actionselect",n._GUID=n.config.uniqueId||f.generateGUID(),n.type=n.config.type?n.config.type:"state-selector",n.addClass(n.config.baseClass).prop("id",n._GUID),n.list=new u.utils.SelectList,n._animation=e.noAnimation?void 0:"fast",n.onItemSelect=e.onItemSelect||!1,n.selectOptionsById={};var i={isInitialDraw:!0};return e.items&&d.each(e.items,function(e,t){n.actionSelect("addItem",t,i)}),n.actionSelect("draw"),n},getSelectedItem:function(){return this.list.getSelected()},addItem:function(e,t){t||(t={});var n=new u.utils.SelectItem(e),i=t.prependInsteadOfAppend||!1,r=t.redrawAfterAdd||!1,a=e.renderConditionsXML,o=d("<div>"),s={selectItem:n,actionSelect:this,itemDefinition:e,renderConditions:a,isInitialDraw:t.isInitialDraw,baseClass:this.config.baseClass};return this.list.addItem(n,i),n.onSelect=e.onSelect||!1,n.onFocus=e.onFocus||!1,a?(f.conditionallyRender(c,g,null,o,n.id(),s),!0!==o.data("rendered")&&this.list.unselectItem(n)):c(0,o,n.id(),s),delete s.isInitialDraw,e.hotkeysXML&&(u.hotkeys.unbind(n.id()),u.hotkeys.bind(e.hotkeysXML,n.id(),function(){o.trigger("click.skuid")},this)),this.selectOptionsById[n.id()]=o,r?this.actionSelect("draw"):this},prepend:function(e){return this.actionSelect("addItem",e,{prependInsteadOfAppend:!0,redrawAfterAdd:!0})},append:function(e){return this.actionSelect("addItem",e,{prependInsteadOfAppend:!1,redrawAfterAdd:!0})},selectItem:function(e,t){var n,i,r=this,a=r.list,o=a.size(),s=!1,l=a.selectedIndex,c=a.items[l];if(void 0===e)throw"No Item provided.";if(n=void 0!==e.value?a.indexOf(e):e,1<o){if(c&&(i=d(r.selectOptionsById[c.id()])),a.selectItem(n),a.selectedIndex!==l&&(s=a.items[a.selectedIndex],"button"!==r.type&&!r.config.preventLabelChangeOnSelect)){if(c){var u=l-1;-1!=u?i.insertAfter(r.selectBox.children().eq(u)):i.prependTo(r.selectBox)}d(r.selectOptionsById[s.id()]).appendTo(r.actionText)}}else 1===o&&a.selectItem(n);s||(s=c),"button"!==r.type&&a.selectedIndex===l&&1!=o||t&&!1===t.triggerHandlers||(s&&s.onSelect&&s.onSelect(s,t),r.onItemSelect&&r.onItemSelect(s))},safeEmpty:function(){this.actionText&&this.actionText.children().detach(),this.selectBox&&this.selectBox.children().detach(),this.empty()},redraw:function(){var e=this;return e.needsRedraw||(e.needsRedraw=!0,e.actionSelect("safeEmpty"),setTimeout(function(){e.needsRedraw&&(e.needsRedraw=!1,e.actionSelect("draw"))},1)),e},draw:function(){var i,a=this,o=a.list,n=0,s=a.selectOptionsById;a.actionSelect("safeEmpty"),f.size(s)&&d.each(s,function(e,t){t.data("rendered")&&n++});var l=function(){return d(window).innerHeight()/2+"px"};if(n){if((i=o.getSelected())||d.each(o.items,function(e,t){var n=t.id();if(s[n].data("rendered"))return a.actionSelect("selectItem",e,{triggerHandlers:!1}),i=o.getSelected(),!1}),!i)return a;if(a.actionText=d('<div class="'+a.config.baseClass+'-text">'),"button"===a.type?a.actionText.append(s[i.id()].clone(!0,!0)):a.actionText.append(s[i.id()]),a.append(a.actionText),1<n){var e=-1<a.config.baseClass.indexOf("dropnav")?"":"ui-icon ui-icon-triangle-1-s";a.actionArrow=d('<div class="'+a.config.baseClass+'-arrow">').append(d("<div>").addClass(e)),a.append(a.actionArrow);var t=[];"button"===a.type?(t.push(a.actionArrow),a.actionText.on(r,function(e){if("click"===e.type||e.which===h.ENTER||e.which===h.SPACE){e.stopPropagation(),a.list.selectItem(a.actionText.index());var t=o.getSelected();t.onSelect&&t.onSelect(t),a.onItemSelect&&a.onItemSelect(t)}}),a.actionText.attr("tabindex",0)):t.push(a);var c="button"===a.type?a.actionArrow:a.actionText.children("."+a.config.baseClass+"-dropdown-item");c.attr({tabindex:0,"aria-haspopup":!0,"aria-expanded":!1}),d.each(t,function(){d(this).on(r,function(e,t){if(a.config.displayAsActionSheetOnMobile&&f.inPlatform(u.constants.CORDOVA))u.native.actionSheet.createActionSheet(a.config.items);else if("click"===e.type||e.which===h.ENTER||e.which===h.SPACE){var n=this,i=d("<div>").addClass("sk-subnavigation-inner");if(t=t||!1,c.attr("aria-expanded",!0),e.which!==h.ENTER&&e.which!==h.SPACE||(t=!0),e.stopPropagation(),!a.hasClass("unavailable")){var r;if(a.selectBox&&a.selectBox.children().length)a.selectBox.parent().length||a.append(a.selectBox),a.selectBox.toggle(a._animation);else a.selectBox=d('<div class="'+a.config.baseClass+'-dropdown">').css("min-width","100%"),a.config.maxHeight&&(a.selectBox.find(".sk-subnavigation-inner").length||(a.selectBox.css({"max-height":l}),a.selectBox.wrapInner(i.css({"max-height":l}))),a.selectBox.hasClass("nx-actionselect-dropdown")&&(a.selectBox.css({"max-height":a.config.maxHeight,"overflow-y":"auto"}),a.selectBox.find(".sk-subnavigation-inner").css("max-height",""))),d.each(o.items,function(e,t){if(!0!==t.isSelected){var n=s[t.id()];n&&n.data("rendered")&&(a.config.maxHeight?(n.children().css({position:"static"}),i.append(n)):a.selectBox.append(n))}}),a.selectBox.appendTo(a),a.trigger("actionselect.populate"),d(window).width()<a.selectBox.offset().left+a.selectBox.width()+8&&a.selectBox.css("right","0px"),a.selectBox.css("display","none"),a.selectBox.show(a._animation),a.mouseleave(function(){r=setTimeout(function(){a.selectBox.hide(a._animation),d(n).attr("aria-expanded",!1)},1e3)}).mouseenter(function(){clearTimeout(r)});t&&0<a.selectBox.children().length&&a.selectBox.children().first().trigger(p)}}})})}else a.actionText.attr("tabindex",0),a.actionText.on(r,function(e){"click"!==e.type&&e.which!==h.ENTER&&e.which!==h.SPACE||(i.onSelect&&i.onSelect(i),a.onItemSelect&&a.onItemSelect(i))})}return a.config.maxHeight&&u.events.subscribe("ui.reflow",function(){d(".sk-subnavigation-inner").css({"max-height":l})}),a}},f.registerPlugin("actionSelect",e)}(skuid)},function(e,t,n){"use strict";var p,h,g,i;p=skuid,h=p.$,g=p.utils,i={init:function(a){a||(a={});var o,r,s,e,l=this.addClass("nx-actionselect nx-actionautocomplete"),c=a.refField,u=a.model.dataSource,d={},f=!1;return l.config=a,l.onItemSelect=a.onItemSelect||!1,l.list=new g.SelectList,c&&c.accessible&&(e=(s=c.referenceTo).length&&s[0],r=e&&e.objectName,o=e&&e.keyField||u.getIdField(a.model),h.each(c.referenceTo,function(e,t){var n=t.objectName,i=u.getNameField(n),r=["Id"];i&&r.push(i),t.searchable&&(f||(f=!0),d[n]={objectName:n,fields:r,recordsLimit:50,model:{objectMapKey:u.name+"__"+l.config.model.objectName},orderBy:i,conditions:a.additionalConditions})}),l.sourceFunction=function(e,t){if(e.term.length<2)return!1;if(f&&u.getDataSourceType().name===p.constants.SALESFORCE)u.search({query:e.term,includeMetadata:!0,searching:"NAME FIELDS",returning:d}).done(function(e){var r=[];h.each(e.results,function(e,t){var n=t.objectName,i=p.ui.getReferenceLookupModel(u,{metadata:c},n,null,o);h.each(t.records,function(e,t){p.data.add(t,"Id"),t.__templabel=i.getRowName(t),r.push(t)})}),t(r)});else if(s.length){var i=p.ui.getReferenceLookupModel(u,{metadata:c},r,null,o),n=i.getNameField();i.buildSearchCondition("_autocomplete_search",e.term,[{id:n}],{useSOSLSearch:!1,searchOperator:"contains"}),h.each(a.additionalConditions,function(e,t){i.addCondition(t)}),i.load(function(){var n=[];h.each(i.getRows(),function(e,t){p.data.add(t,o),t.__templabel=i.getRowName(t),n.push(t)}),t(n)})}},l.optionRenderer=function(e,t){return h("<li>").data("ui-autocomplete-item",t).html("<a>"+g.encodeHTML(t.__templabel)+"</a>").appendTo(e)},l.onChangeFunc=function(e,t){var n=t.item[o];return l.list.contains(n)||l.actionAutocomplete("addItem",{value:n,label:t.item.__templabel,affectDefaultCondition:!0}),l.actionAutocomplete("selectItem",n),!1}),a.items&&h.each(a.items,function(){l.actionAutocomplete("addItem",this)}),l.actionAutocomplete("draw"),l},addItem:function(e,t){t||(t={});var n=new g.SelectItem(e),i=t.prependInsteadOfAppend||!1;return this.list.addItem(n,i),n.onSelect=e.onSelect||!1,this},getSelectedItem:function(){return this.list.getSelected()},resetItem:function(e){var t=this;t.config.refField?(h.each(t.actionAutocomplete("getSelectedItems"),function(){this.inactive=!0}),e&&h.map(e.split(";"),function(e){t.actionAutocomplete("selectItem",e,{triggerHandlers:!1})}),t.actionAutocomplete("buildResetMenu"),t.input.val(t.actionAutocomplete("getLabel"))):t.actionAutocomplete("selectItem",e)},selectItem:function(e,t){var n=this,i=n.list.selectedIndex,r=n.list.getSelected(),a=n.list.itemsMap[e],o=!1;n.list.selectItem(a),a.inactive=!1,n.input.val(n.actionAutocomplete("getLabel")),o=!n.isMultiselect||n.list.selectedIndex!==i,n.config.refField&&!n.config.isMultiselect&&r!==a&&n.actionAutocomplete("unselectItem",r,{triggerHandlers:!1}),o&&(t&&!1===t.triggerHandlers||(a&&a.onSelect&&a.onSelect(a),n.onItemSelect&&n.onItemSelect(a),n.actionAutocomplete("buildResetMenu")))},unselectItem:function(e,t){e.inactive=!0,this.input.val(this.actionAutocomplete("getLabel")),t&&!1===t.triggerHandlers||(e&&e.onSelect&&e.onSelect(e),this.onItemSelect&&this.onItemSelect(e),this.actionAutocomplete("buildResetMenu"))},getLabel:function(){var e=this.actionAutocomplete("getSelectedItems");return(2<e.length?e.length+" Items":h.map(e,function(e){return e.label}).join(", "))||this.config.defaultOptionLabel},getSelectedItems:function(){if(this.config.refField)return h.map(this.list.items,function(e){return!0===e.inactive?null:e});var e=this.list.getSelected();return e?[e]:[]},draw:function(){var n=this,i=p.ui.getRenderer("AUTOCOMPLETE").edit({minLength:1,value:n.actionAutocomplete("getLabel"),source:n.sourceFunction||h.map(n.list.items,function(e){return{value:e.value,label:e.label}}),onChange:n.onChangeFunc||function(e,t){n.actionAutocomplete("selectItem",t.item.value)},onFocus:function(e,t){return n.config.refField?i.val(t.item.__templabel):i.val(t.item.label),!1},optionRenderer:n.optionRenderer}).on("click",function(){i.select()}).appendTo(n);return n.input=i,n.resetMenu=h("<div>"),n.resetMenu.insertAfter(i),n.resetMenuItemsWrapper=null,n.actionAutocomplete("buildResetMenu"),n},buildResetMenu:function(){var a=this;if(a.resetMenu.empty().removeClass("clearfilter-btn nx-actionselect-arrow"),a.config.refField){a.resetMenuItemsWrapper||(a.resetMenuItemsWrapper=h("<div>").addClass("nx-actionselect-dropdown nx-actionautocomplete-resetitemswrapper").hide(),a.append(a.resetMenuItemsWrapper));var e=a.actionAutocomplete("getSelectedItems");0===e.length?(a.resetMenuItemsWrapper.empty().hide(),a.removeClass("nx-actionautocomplete-has-menu-action"),a.resetMenu.css("display","none")):1===e.length?(a.resetMenuItemsWrapper.empty().hide(),a.addClass("nx-actionautocomplete-has-menu-action"),a.resetMenu.addClass("clearfilter-btn").text("x").off().on("click",function(){a.hasClass("unavailable")||a.actionAutocomplete("unselectItem",e[0])}),a.resetMenu.css("display","inline-block")):1<e.length&&(a.addClass("nx-actionautocomplete-has-menu-action"),a.resetMenuItemsWrapper.empty(),h.each(e,function(e,t){var n=h("<div>").addClass("nx-actionselect-dropdown-item"),i=h("<div>").addClass("nx-actionautocomplete-resetitembutton").text("x"),r=h("<div>").addClass("nx-actionautocomplete-resetitemlabel").text(t.label);n.append(i,r),a.resetMenuItemsWrapper.append(n),n.off().on("click",function(){a.actionAutocomplete("unselectItem",t)})}),a.resetMenu.addClass("nx-actionselect-arrow").append(h("<div>").addClass("ui-icon ui-icon-triangle-1-s")).off().on("click",function(){a.resetMenuItemsWrapper.is(":visible")?a.resetMenuItemsWrapper.hide():a.resetMenuItemsWrapper.show()}),a.resetMenu.css("display","inline-block"))}else a.list&&0===a.list.selectedIndex?(a.resetMenu.css("display","none"),a.removeClass("nx-actionautocomplete-has-menu-action")):(a.addClass("nx-actionautocomplete-has-menu-action"),a.resetMenu.css("display","inline-block").addClass("clearfilter-btn").text("x").off().on("click",function(){a.hasClass("unavailable")||a.actionAutocomplete("selectItem",a.list.items[0].value)}))}},g.registerPlugin("actionAutocomplete",i)},function(e,t,n){"use strict";var c,f,p,h,g,s,m,v,y,b,l,S,w,u,d,i;c=skuid,f=c.$,p=c.utils,h="click.skuid",g="focus.skuid",s="focus.skuid.custom",m="blur.skuid",v="mouseover.skuid",y="keydown.navigation.skuid",b=c.$.ui.keyCode,l="-dropdown-item",S="aria-haspopup",w="aria-expanded",u=function(e,t,n,i){t&&t.off(h).empty();var r=i.actionDropdown,a=i.selectItem,o=i.itemDefinition;t.addClass(i.baseClass+l).attr("tabindex",-1).on(h,function(e){a.onSelect&&a.onSelect(),r.selectBox&&r.selectBox.hide("fast"),e.stopPropagation()}).data("rendered",!0).on(m,function(){r.actionDropdown("hideDropdown")}).on(g,function(){r.actionDropdown("cancelHideDropdown")}),t.off(y).on(y,function(e){var t=f(this);if(e.which===b.ESCAPE)r.selectBox&&r.selectBox.hide("fast"),r.config.useFirstItemAsDefault?r.actionArrow.trigger(g):r.actionButton.trigger(g);else if(e.which===b.ENTER||e.which===b.SPACE)e.stopPropagation(),t.trigger(h,!0);else if(e.which===b.UP||e.which===b.DOWN){var n=t.parent().children(),i=t.index();i=(e.which===b.UP?i-1:i+1)%n.length,n.eq(i).trigger(g)}}),t.off(s),a.onFocus&&"function"==typeof a.onFocus&&t.on(s,function(){a.onFocus.apply(this,arguments)}),a.content?t.append(a.content):t.text(a.label),f("<div>").addClass(i.baseClass+"-icon sk-icon inline "+(o.icon||"icon-spacer")).prependTo(t),i.isInitialDraw||r.actionDropdown("redraw")},d=function(e,t,n,i){var r=i.actionDropdown;t.empty().removeClass(i.baseClass+l).data("rendered",!1),i.isInitialDraw||r.actionDropdown("redraw")},i={init:function(e){var n=this;n.data("component",n),n.config=e||{},n.config.baseClass=n.config.baseClass||"nx-actiondropdown",n._GUID=n.config.uniqueId||p.generateGUID(),n.prop("id",n._GUID),n.addClass(n.config.baseClass),n.list=new c.utils.SelectList,n.selectOptionsById={};var i={isInitialDraw:!0};return e.items&&f.each(e.items,function(e,t){n.actionDropdown("addItem",t,i)}),n.actionDropdown("draw"),n},addItem:function(e,t){t||(t={});var n=new c.utils.SelectItem(e),i=t.prependInsteadOfAppend||!1,r=t.redrawAfterAdd||!1,a=e.renderConditionsXML,o=e.hotkeysXML,s=f("<div>"),l={selectItem:n,actionDropdown:this,itemDefinition:e,renderConditions:a,isInitialDraw:t.isInitialDraw,baseClass:this.config.baseClass};return this.list.addItem(n,i),n.onSelect=e.onSelect||!1,n.onFocus=e.onFocus||!1,a?p.conditionallyRender(u,d,null,s,n.id(),l):u(0,s,n.id(),l),delete l.isInitialDraw,o&&(c.hotkeys.unbind(n.id()),c.hotkeys.bind(o,n.id(),function(){s.trigger(h)},this)),this.selectOptionsById[n.id()]=s,r?this.actionDropdown("draw"):this},prepend:function(e){return this.actionDropdown("addItem",e,{prependInsteadOfAppend:!0,redrawAfterAdd:!0})},append:function(e){return this.actionDropdown("addItem",e,{prependInsteadOfAppend:!1,redrawAfterAdd:!0})},safeEmpty:function(){var e=this.selectOptionsById;this.actionButton&&this.actionButton.hasClass("ui-button")&&this.actionButton.skooButton("destroy"),this.actionArrow&&this.actionArrow.hasClass("ui-button")&&this.actionArrow.skooButton("destroy"),p.size(e)&&f.each(e,function(e,t){t.detach()}),this.empty()},redraw:function(){return this.needsRedraw=!1,this.actionDropdown("draw"),this},draw:function(){var i,r=this,e=r.config,t=!0===e.openOnHover,n=r.useFirstItemAsDefault=!0===e.useFirstItemAsDefault,a=r.list,o=0,s=r.selectOptionsById,l=r.actionButton||(r.actionButton=f("<div>")),c=r.actionArrow||(r.actionArrow=f("<div>")),u=r.selectBox||(r.selectBox=f("<div>"));if(r.actionDropdown("safeEmpty"),r.on("mouseout.skuid",function(e){r.is(e.target)||f.contains(r[0],e.relatedTarget)||r.actionDropdown("hideDropdown")}).on(v,function(){r.actionDropdown("cancelHideDropdown")}),l.skooButton().off(h).on(h,function(e,t){n&&i&&"function"==typeof i.onSelect?i.onSelect():r.actionDropdown("toggleDropdown",{isKeyboardInitiated:t})}).off(y).on(y,function(e){if(l.is(":focus"))if(e.which===b.ENTER||e.which===b.SPACE)l.trigger(h,!0),e.stopPropagation();else if(e.which===b.UP||e.which===b.DOWN){var t,n=u.children();r.actionDropdown("showDropdown"),t=(e.which===b.UP?n.length-1:0)%n.length,n.eq(t).trigger(g),e.stopPropagation()}}).off(m).on(m,function(){r.actionDropdown("hideDropdown")}).off(g).on(g,function(){r.actionDropdown("cancelHideDropdown")}).appendTo(r),t&&!n&&l.off(v).on(v,function(e){r.actionDropdown("isDropdownOpen")||(r.actionDropdown("showDropdown",{isHoverInitiated:!0}),e.stopPropagation())}),p.size(s)&&f.each(s,function(e,t){t.data("rendered")&&o++}),o&&(n||1===o?(i=a&&a.items&&a.items[0],l.skooButton("option","label",i.label),i.icon&&l.skooButton("option","icon",i.icon)):(l.skooButton("option",{label:e.label,secondaryIcon:"fa-caret-down"}),e.icon&&l.skooButton("option","icon",e.icon)),!n||1<o)){n?(r.addClass("ui-buttonset"),c.skooButton({notext:!0,icon:"fa-angle-down"}).addClass(r.config.baseClass+"-expand-button").off(h).on(h,function(e,t){r.actionDropdown("toggleDropdown",{isKeyboardInitiated:t})}).off(y).on(y,function(e){e.which!==b.ENTER&&e.which!==b.SPACE||(c.trigger(h,!0),e.stopPropagation())}).off(m).on(m,function(){r.actionDropdown("hideDropdown")}).off(g).on(g,function(){r.actionDropdown("cancelHideDropdown")}).attr(S,!0).attr(w,!1).appendTo(r),t&&c.off(v).on(v,function(e){r.actionDropdown("showDropdown",{isHoverInitiated:!0}),e.stopPropagation()})):l.attr(S,!0).attr(w,!1),u.addClass(r.config.baseClass+"-dropdown").css("min-width","100%").hide().appendTo(r),r.config.maxHeight&&u.css({"max-height":r.config.maxHeight,"overflow-y":"auto"});var d=n;f.each(a.getItems(),function(e,t){if(d&&t===i)return!0;var n=s[t.id()];n&&u.append(n)})}return r},isDropdownOpen:function(){var e=this.selectBox;return e&&e.is(":visible")},toggleDropdown:function(e){var t=e.isKeyboardInitiated,n=this.actionDropdown("isDropdownOpen")?"hideDropdown":"showDropdown";this.actionDropdown(n,{focusFirstItem:t,focusActionArrow:t,immediate:!0}),this.actionDropdown("cancelHideDropdown")},showDropdown:function(e){e||(e={});var t=this.selectBox,n=this.useFirstItemAsDefault,i=this.actionArrow,r=this.actionButton,a=n?i:r;return!0===e.isHoverInitiated&&t.data("skuid.isHoverInitiated",!0),t.show("fast").position({my:"left top",at:"left bottom",of:r}),a.attr(w,!0),e.focusFirstItem&&t.children().first().trigger(g),this},hideDropdown:function(e){e||(e={});var t=this,n=t.selectBox,i=t.useFirstItemAsDefault,r=t.actionArrow,a=t.actionButton,o=i?r:a,s=e.focusActionArrow,l=function(){t.hideDropdownTimeout=null,n.data("skuid.isHoverInitiated",!1),n.hide("fast"),o.attr(w,!1),s&&o.trigger(g)};return e.immediate||!0===n.data("skuid.isHoverInitiated")?l():t.actionDropdown("isDropdownOpen")&&!t.hideDropdownTimeout&&(t.hideDropdownTimeout=setTimeout(l,1e3)),t},cancelHideDropdown:function(){return this.hideDropdownTimeout&&(clearTimeout(this.hideDropdownTimeout),this.hideDropdownTimeout=null),this}},p.registerPlugin("actionDropdown",i)},function(e,t,n){"use strict";!function(V){var f=V.$(document.body),e={init:function(e){e||(e={});var t,n={text:!0!==e.notext,label:e.label,disabled:e.disabled};if(e.icon&&((t=-1<e.icon.indexOf("sk-webicon"))||(n.icons||(n.icons={}),n.icons.primary=e.icon)),e.secondaryIcon&&(n.icons||(n.icons={}),n.icons.secondary=e.secondaryIcon),this.button(n),t){var i=V.ui.createIcon(e.icon,{isWebIcon:!0,additionalClass:"right"===e.iconPosition?"sk-webicon--right":null});e.iconPosition&&"right"===e.iconPosition?this.append(i):this.prepend(i)}return this.attr({role:"button",tabindex:0}),this.find(".ui-icon").addClass("sk-icon inline"),e.hoverText&&this.skootip(e.hoverText),this.data("object",this),this},option:function(){var e,t,n,i;if(0===arguments.length)return{icon:(e=this.button("option")).icons&&e.icons.primary,secondaryIcon:e.icons&&e.icons.secondary,disabled:e.disabled,notext:!e.text};e=this.button("option"),1===arguments.length?(t=arguments[0],Y.extend(e,{text:!0!==t.notext,label:t.label,disabled:t.disabled}),t.icon&&(e.icons.primary=t.icon),t.secondaryIcon&&(e.icons.secondary=t.secondaryIcon)):(n=arguments[0],i=arguments[1],"icon"===n?e.icons.primary=i:"secondaryIcon"===n?e.icons.secondary=i:e[n]=i),e.icons.primary||delete e.icons.primary,e.icons.secondary||delete e.icons.secondary,e.icons.primary||e.icons.secondary||delete e.icons,this.button("option",e),this.find(".ui-icon").addClass("sk-icon inline");var r=t&&t.hoverText||"hoverText"===n&&i;r&&this.skootip(r)},destroy:function(){return this.button("destroy"),this.removeData("object"),this.removeAttr("tabindex"),this}};V.utils.registerPlugin("skooButton",e);var z="cancel",G="delete",H="sfdcweblink",q="click.skuid",$="keydown.action.skuid",W=V.$.ui.keyCode,Y=V.$,K=V.utils,X=V.hotkeys,t=V.componentType,a=K.mergeAsText,p=V.$L,J=V.actions,o={createFields:!0,registerFields:!1},Q=function(e,t){var n=t.model,i=t.row,r=n?i?"row":"model":"global";return void 0!==e?"row"==r?a("row",e,o,n,i):"model"==r?a("model",e,o,n):a("global",e,o):""},Z=function(e,t,n){var i=e.attr("type"),r=e.attr("label")||t.label||p(K.capitalizeFirst(i));return Q(r,n)},ee=function(e,t,n){var i=e.attr("type"),r=e.attr("icon")||t.icon;return r||-1===Y.inArray(i,["save",z,G,"clone","share"])||(r="sk-icon-"+i),Q(r,n)},te=function(e,t){var n=e.children(".ui-button-text");return n.length&&(t?n.skootip(t):n.tooltip("instance")&&n.tooltip("destroy").removeAttr("title")),e},ne=function(t){var e=new V.ui.Editor(t,{showSaveCancel:!1});return e.handleCancel=function(){V.ui.Editor.prototype.handleCancel.call(this),t.button("disable"),t.attr("tabindex",-1)},e.handleSave=function(e){V.ui.Editor.prototype.handleSave.call(this,e),e&&(!0===this.hasModelWithChanges()?(t.button("enable"),t.attr("tabindex",0)):(t.button("disable"),t.attr("tabindex",-1)))},e.handleChange=function(e){V.ui.Editor.prototype.handleChange.call(this,e),!0===this.hasModelWithChanges()?(t.button("enable"),t.attr("tabindex",0)):(t.button("disable"),t.attr("tabindex",-1))},e},ie=function(e,d){switch(e){case"multi":return function(){var e=d(),t=e.actionDef,n=e.element,i=e.component,r=e.model,a=e.row,o=e.editor;J.runActionsNode(t.children("actions").first(),i,{button:n,model:r,row:a,editor:o,initiatorId:o&&o.id(),component:e.context.component}).always(function(){i.publish("actionComplete")})};case"custom":return function(){var e=d(),t=e.actionDef,n=e.element,i=e.component,r=e.context,a=e.model,o=e.row,s=e.editor,l=V.snippet.get(Q(t.attr("snippet"),r));l&&l({button:n,model:r.model||a,row:r.row||o,editor:s,initiatorId:s&&s.id(),component:r.component||i})};case"save":return function(){var e=d(),t=e.actionDef,n=e.model,i=e.row,r=e.editor,a=e.buttonEditor,o=e.component,s="true"===t.attr("rollbackonanyerror");a.models&&a.models.length&&(r&&r.setStatus(p("Saving")),V.model.save(a.models,{callback:function(e){e.totalsuccess&&t.attr("afterSave")&&K.redirect({row:i,model:n,url:t.attr("afterSave"),window:t.attr("window")}),o.publish("actionComplete")},initiatorId:r&&r.id(),rollbackOnAnyError:s}))};case z:return function(){var e=d(),t=e.actionDef,n=e.model,i=e.row,r=e.editor,a=e.buttonEditor,o=t.attr("afterCancel");a.models&&a.models.length&&(V.model.cancel(a.models,{initiatorId:r&&r.id()}),o&&K.redirect({row:i,model:n,url:o,window:t.attr("window")}))};case G:return function(){var e,a,o,t=d(),s=t.component,n=t.model,i=t.row,l=t.editor,r=(n.getNameFieldValueForRow(i)+"").trim(),c=t.actionDef.attr("afterDelete");!c&&K.inPlatform([V.constants.VISUALFORCE,V.constants.LIGHTNING])&&(c="/{{Model.keyPrefix}}/o"),e=p("Delete")+" "+(r||n.label)+"?",a=Y("<div>").attr("title",e).html(V.label.merge(p("Confirm_Delete"),n.label,r?"<b>'"+r+"'</b>":"")),o=[{icons:{primary:"ui-button-icon-primary ui-icon sk-icon-cancel sk-icon inline"},text:p("No_Dont_Delete_Anything"),click:function(){a.dialog("close")}}];var u=V.model.list();Y.each(u,function(e,n){if(n.hasChanged&&n.deleteable){var i=!0;if(Y.each(n.changes,function(e){var t=n.getRecordById(e);if(t&&!t.isMoribund())return i=!1}),i){var t=V.utils.size(n.changes),r=1===t?n.label:n.labelPlural;o.push({text:V.label.merge(p("No_But_I_Would_Like_To_Delete"),t,r),icons:{primary:"ui-button-icon-primary ui-icon sk-icon-save sk-icon inline"},click:function(){a.dialog("close"),f.block({message:p("Deleting")+" "+t+" "+r+"..."}),n.save({callback:function(){s.publish("actionComplete"),f.unblock()},initiatorId:l&&l.id()})}})}}}),o.push({text:p("Yes")+", "+p("Delete")+" "+n.label+(r?" '"+r+"'":""),icons:{primary:"ui-button-icon-primary ui-icon sk-icon-save sk-icon inline"},click:function(){n.deleteRow(i),f.block({message:p("Deleting")+" "+n.label+(r?" '"+r+"'":"")+"..."}),V.model.save([n],{callback:function(e){e.totalsuccess?window.sforce&&sforce.console?(f.unblock(),sforce.console.getEnclosingTabId(function(e){sforce.console.closeTab(e.id)})):K.redirect({url:c,model:n,row:i}):f.unblock(),s.publish("actionComplete")}}),a.dialog("close")}}),a.dialog({close:function(){Y(this).remove()},modal:!0,resizable:!1,width:"500px",buttons:o})};case"clone":return function(){var e=d();K.redirect({url:"/"+e.model.getRowId(e.row)+"/e?clone=1"})};case"share":return function(){var e=d(),t=e.model,n={"001":"Acc","003":"Con","006":"Opp","00Q":"Lead",500:"Case",701:"Campaign"},i=t.keyPrefix in n?n[t.keyPrefix]:"CustomObject";K.redirect({url:"/p/share/"+i+"SharingDetail?parentId="+t.getRowId(e.row)})};case"redirect":return function(){var e=d(),t=e.actionDef,n=e.model,i=e.row,r=e.label;K.redirect({row:i,model:n,url:t.attr("url"),window:t.attr("window"),title:r})};case"popup":return function(){var e=d(),t=e.actionDef,n=e.element,i=e.component,r=e.model,a=e.row;K.createPopupFromAction(t,{button:n,model:r,row:a,component:i})};case H:return function(){var e=d(),t=e.model,n=e.row,i=e.label,r=e.weblink,a=e.isOnClickJS;a||K.redirect({row:n,model:t,url:"/servlet/servlet.Integration?"+K.param({lid:r.Id,eid:t.getRowId(n),ic:1,retURL:window.location}),title:i,window:"newWindow"===r.OpenType||!a&&K.startsWith(r.Url,"http://",!0)?"blank":"parent"})}}};t.register("button",{render:function(a,i,o){var e,s,l,r,c,t,n,u,d,f,p,h=o.options||{},g=o.context||{},m=h.editor,v=h.buttonEditors||[],y=i.attr("type")||h.type,b=i.attr("cssclass")||h.cssClass,S=i.attr("usefirstitemasdefault")?"true"===i.attr("usefirstitemasdefault"):h.useFirstItemAsDefault,w=i.attr("openonhover")?"true"===i.attr("openonhover"):h.openOnHover,C=o.id(),I="true"===i.attr("secondary")||h.isSecondary,k=h.model||g.model,T="function"==typeof h.row?h.row():h.row||g.row,x=T&&k&&!k.isRowNew(T),D=!1,R=(h.customTypes||{})[y],E={doMerge:Q},A=i.children("enableconditions"),F=ie(y,function(){return{actionDef:i,component:o,element:a,label:r,isOnClickJS:f,weblink:d,context:g,model:k,row:T,editor:m,buttonEditor:s}}),P=function(e){F.apply(this,arguments),e&&e.stopPropagation&&e.stopPropagation()},O=i.attr("weblinkname"),N=i.attr("weblinkobject"),_=function(){return o&&(o.addProblem("Invalid Salesforce Custom Button/Link requested"+(N&&O?" on "+N+": "+O:" on Page Title on Model "+k.id)),o.unrender()),!1},M=function(){return V.sfdc?V.sfdc.weblink:null},L=!1,U=!1;switch(o.afterUnrender=function(){C&&(k&&k.unregisterField(C),V.hotkeys.unbind(C)),"group"===y||(a.off("click.skuid"),a.hasClass("ui-button")&&a.skooButton("destroy")),a.css("display","none").removeClass("ui-state-hover ui-state-focus"),R&&"function"==typeof R.unrender&&R.unrender(i,o,E)},y){case"save":e=i.children("models").first(),s=ne(a),v.push(s),k&&s.registerModel(k),e&&Y.each(e.children("model"),function(){var e=V.$M(Y(this).text());e&&s.registerModel(e)}),D=!s.hasModelWithChanges();break;case z:e=i.children("models").first(),s=ne(a),v.push(s),k&&s.registerModel(k),e&&Y.each(e.children("model"),function(){var e=V.$M(Y(this).text());s.registerModel(e)}),D=!s.hasModelWithChanges();break;case"multi":m&&J.registerEditorWithModelsForActionsNode(i.children("actions").first(),m);break;case G:case"share":k&&k.deleteable?T&&x||(U=L=!0):L=!0;break;case"clone":k&&k.createable?T&&x||(U=L=!0):L=!0;break;case H:if(!O||!N)return void _();if(k?T&&x||(U=L=!0):L=!0,L)break;n=2===(t=O.split("__")).length?(u=t[0],t[1]):t[0],M().get({weblinkName:n,objectName:N,namespacePrefix:u,callback:function(e){(d=e)?(f="javascript"===d.LinkType,r=M().getLabel(d),B()):_()}});break;case"group":l=[],Y.each(i.children("actions").first().children("action"),function(){var e=Y(this),t=e.attr("type"),n=Z(e,h,g),i=ee(e,h,g),r=ie(t,function(){return{actionDef:e,buttonEditor:s,component:o,context:g,editor:m,element:a,isOnClickJS:f,label:n,model:k,row:T,weblink:d}});l.push({label:n,value:e,icon:i,renderConditionsXML:e.children("renderconditions").first(),hotkeysXML:e.children("hotkeys").first(),onSelect:function(e){r.apply(this,arguments),e&&e.stopPropagation&&e.stopPropagation()}})})}if(L||B(),U&&k&&T){var j=k.getRowId(T);p=V.events.subscribe("models.saved",function(e){var n,t=e.insertResults;e.totalsuccess&&e.models.hasOwnProperty(k.id)&&t&&t.length&&Y.each(t,function(e,t){t.oldId===j&&t.success&&t.hasOwnProperty("id")&&(p.unsubscribe(),n=Y.extend({},o.context,{row:k.getRowById(t.id)}),o.unrender().conditionallyRender({context:n}))})})}function B(){if(R&&"function"==typeof R.render)R.render(i,o,E);else if(T="function"==typeof h.row?h.row():h.row||g.row,x=T&&k&&k.isRowNew(T),a&&a.off(q).empty(),a.css("display","inline-block"),void 0===r&&(r=Z(i,h,g)),void 0===c&&(c=ee(i,h,g)),"group"!==y){a.skooButton({icon:c,label:r,disabled:D}),D&&a.attr("tabindex",-1),a.off(q).on(q,P),a.off($).on($,function(e){e.which!==W.ENTER&&e.which!==W.SPACE||(P(),e.preventDefault())}),b&&a.addClass(b),I&&a.addClass("nx-button-secondary"),C&&a.attr("id")!==C&&a.attr("id",C);var e=function(){V.page.disableHotkeys||(t(),X.bind(i.children("hotkeys").first(),C,P,a))},t=function(){X.unbind(C)};if(A.length&&A.children().length){var n=A.attr("message");K.conditionallyDo(function(){a.hasClass("ui-button")&&(a.button("enable"),a.attr("tabindex",0),n&&(te(a),a.css("cursor",""),a.attr("title")===n&&a.removeAttr("title")),e())},function(){a.hasClass("ui-button")&&(a.button("disable"),a.attr("tabindex",-1),n&&(te(a,n),a.css("cursor","not-allowed"))),t()},A,a,{row:T,model:k})}else e()}else a.actionDropdown({uniqueId:C,items:l,type:"button",onSelect:P,openOnHover:w,useFirstItemAsDefault:S,label:r,icon:c})}o.unregisterChildComponents=function(){return Y.each(v,function(){this.unregister()}),V.component.Component.prototype.unregisterChildComponents.call(o)},o.unregister=function(){return p&&p.unsubscribe(),V.component.Component.prototype.unregister.call(o)}}})}(skuid)},function(e,t,n){"use strict";var We=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},Ye=i(n(0)),Ke=i(n(264));function i(e){return e&&e.__esModule?e:{default:e}}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(fe){var e,pe={},he=fe.offline,ge=fe.utils,me=fe.runtime,ve=me.cache,l=ge.parseAsJSONIfString,ye=fe.$,be=ye.extend,Se=ge.makeXMLDoc,we=fe.$L,Ce=ge.reject,Ie=ge.resolve,ke="apps",Te=[ke,"features","intercom","runningUserInfo","organizationInfo"],xe=["navigation"],c="metaService",o="personalizationService",De="error",u="preferPersistentCache",Re=void 0,s=void 0;function Ee(){return ve.get("loader.dataSources")}function Ae(e){var t=Ee(),n=t[e];return n||(n=t["skuid:"+e]),n}function Fe(e,t,n){this._entry=e,this._process=t,this._dependencies=n,this._isProcessed=!1,this._isBeingProcessed=!1}function Pe(){return ge.inPlatform(fe.constants.LIGHTNING)}function Oe(n,i,e){e||(e=["datasource"]),e.forEach(function(e){var t=n.attr(e)||n.attr("service")||fe.platform.getDefaultDataSourceName();i.hasOwnProperty(t)||(i[t]={})})}function Ne(e,t,n,i,r){if(!e.platform||ge.inPlatform(e.platform)){var a=d(e,n,i,r);return a&&!t.includes(a)?(t.push(a),a):void 0}}function d(e,t,n,i){var r;return("skuid"===e.namespace||!e.namespace&&"skuid"===n)&&(r="skuid"),ge.isString(e)?e:e.url?e.url:e.resource?fe.platform.getSiteResourceUrl({name:e.resource,namespace:r,path:e.path,modstamp:e.modstamp,type:e.type,apiVersion:e.apiVersion}):e.path?fe.platform.getSiteResourceUrl({name:t,namespace:r,path:e.path,modstamp:e.modstamp||i,type:e.type}):void 0}function f(e,n,t){var i=n.jsLoads,r=n.cssLoads,a=Pe(),o=n.jsDependencyGraph.componentPacks,s=o[t.id],l=t.file,c=l&&l.resource,u=l&&l.modstamp,d=t.namespace||l&&l.namespace,f=l&&l.apiVersion,p=t.customLabelNamespace;!s&&a&&(s=o[t.id]=[]),e.js&&e.js.forEach(function(e){e.type="componentPack",f&&(e.apiVersion=f);var t=Ne(e,i,c,d,u);if(t&&a){var n=[];s.push(new Fe(t,function(){return ge.loadJS(t)},n)),1<s.length&&n.push(s[s.length-2])}}),e.css&&e.css.forEach(function(e){e.type="componentPack",f&&(e.apiVersion=f),Ne(e,r,c,d,u)}),e.labels&&e.labels.length&&(e.customLabelDependencies||(e.customLabelDependencies=[]),Array.prototype.push.apply(e.customLabelDependencies,e.labels)),e.customLabelDependencies&&ye.each(e.customLabelDependencies,function(e,t){n.labelDependencies[function(e,t){return t?t+"__"+e:e}(t,p)]=!0})}function _e(t,i,r,a,e){var n=t.prop("tagName"),o=function(e,t,n){var i=p(e,n),r=i[0],a=i[1],o=null,s=function(e){return fe.componentPacks[e]}(r);s&&ye.each(s.components,function(){if(this.id===a)return Ue(s,t),o=this,!1});return o}(n,r,a);o&&(!o.hasServerDependencies||i.hasOwnProperty(n)||xe.includes(n)&&!function(e){return fe.platform.getNavigationItemSourceTypes().map(function(e){return e.value}).includes(e.attr("source"))}(t)||(i[n]={}),function(r,e,t){var a,n=e.pathsToDataSourceAttributes;n&&(a=t.dataSourceDependencies,n.forEach(function(e){var t=e.split(":"),n=t[0],i=t[1];(n?r.find(n):r).each(function(e,t){Oe(ye(t),a,[i])})}))}(t,o,r),e||(e=function(e,t){return fe.componentPacks[p(e,t)[0]]}(n,a)),f(o,r,e),o.pathsToChildComponents&&ye.each(o.pathsToChildComponents,function(){var e=this.split(">"),n=t;ye.each(e,function(e,t){n=n.children(t)}),ye.each(n.children(),function(){_e(ye(this),i,r,a)})}),o.pathsToActions&&ye.each(o.pathsToActions,function(){var e=this.split(">"),n=t;ye.each(e,function(e,t){n=n.children(t)}),ye.each(n.children(),function(){!function e(t,n,i,r){var a=t.attr("type");if("popup"===a||"showPopup"===a)ye.each(t.children("popup").first().children("components").first().children(),function(){_e(ye(this),n,i,r)});else if("drawer"===a)ye.each(t.children("drawer").first().children("components").first().children(),function(){_e(ye(this),n,i,r)});else if("toggleSlidingPanel"===a||"openSlidingPanel"===a)ye.each(t.children("panel").first().children("components").first().children(),function(){_e(ye(this),n,i,r)});else if("multi"===a)ye.each(t.children("actions").first().children(),function(){e(ye(this),n,i,r)});else if("voice-command"===a){var o=fe.voiceCommands.getUIComponentType(t);_e(Se("<"+o+"/>"),n,i,r)}else"datasource-action"===a&&t.attr("datasource")&&Oe(t,i.dataSourceDependencies)}(ye(this),i,r,a)})}))}Fe.prototype={process:function(){var e=this;if(this._isBeingProcessed)return this._processPromise;this._isBeingProcessed=!0;var t=function(){return e._process().then(function(){e._isBeingProcessed=!1,e._isProcessed=!0})};return this._dependencies?this._processPromise=ye.when.all(this._dependencies.map(function(e){return e.process()})).then(t):this._processPromise=t()}};var Me=function(e,n){var i="",r="",a=[],o=[],t={},s=e.prop("tagName"),l=Pe();function c(e){if(e&&(a.push(e),l)){var t=[];n.push(new Fe(e,function(){return ge.loadJS(e)},t)),1<n.length&&t.push(n[n.length-2])}}return"labels"===s?ye.each(e.children(),function(){var e=ye(this).attr("id");e&&(t[e]=!0)}):"javascript"===s?ye.each(e.children("jsitem"),function(){var e=ye(this),t=e.attr("location"),n=e.text().trim();switch(t){case"inline":n&&(i+=n+";\n");break;case"external":c(e.attr("url"));break;case"inlinesnippet":n&&(i+="skuid.snippet.register('"+e.attr("name")+"',function(args){"+n+"\n});\n");break;case"inlinecomponent":n&&(i+="skuid.componentType.register('"+e.attr("name")+"',function(args) {"+n+"\n});\n");break;case"staticresource":c(fe.platform.getSiteResourceUrl({name:e.attr("name"),path:e.attr("filepath"),namespace:e.attr("namespace")}))}}):"css"===s&&ye.each(e.children("cssitem"),function(){var e,t=ye(this),n=t.attr("location"),i=t.text().trim();switch(n){case"inline":i&&(r+=i+"\n");break;case"external":(e=t.attr("url"))&&o.push(e);break;case"staticresource":(e=fe.platform.getSiteResourceUrl({name:t.attr("name"),path:t.attr("filepath"),namespace:t.attr("namespace")}))&&o.push(e)}}),{inlineJS:i,inlineCSS:r,jsGraphNodes:n,jsLoads:a,cssLoads:o,labels:t}},Le=function(e){fe.componentPacks||(fe.componentPacks={}),e&&ye.each(e,function(e,t){fe.componentPacks[t.id]=t})},Ue=function(n,i){f(n,i,n),n.components&&n.components.length&&ye.each(n.components,function(e,t){(t.alwaysLoad||n.alwaysLoad)&&f(t,i,n)})};function p(e,t){var n,i=e.split("__");return[1===i.length?(n=e,"Mobile"===t?"skuidmobilecore":"skuidcore"):(n=i[1],i[0]),n]}function je(e,t){var n=e.themeinfo,i=e.themeurl;n&&n.loadResourcesOnClient&&(i=d({resource:n.fileName,namespace:n.fileNamespace,modstamp:n.fileModstamp,path:"skuidtheme.css"})),i&&t.push({href:i,attrs:{id:"themeLink"}}),fe.webfonts.load(n),!fe.themeSettings.getAll()&&n&&n.themeSettings&&fe.themeSettings.load(n.themeSettings)}function Be(e){fe.label&&fe.label.add(e)}function t(){return fe.utils.userInfo||fe.runtime.cache.get("metaService.runningUserInfo")}function Ve(){return t().userId||"public"}function i(){return t().profileId||"public"}function ze(n){var e,S=Pe(),t={},i=n.element,r=n.pageRequest,a=(r=void 0===r?{}:r).isInclude,w=void 0!==a&&a,o=r.isPopState,s=void 0!==o&&o,l=r.isReplace,c=void 0!==l&&l,u=r.isSecondTry,d=void 0!==u&&u,f=r.namespace,p=r.pageId,h=r.pageModule,g=void 0===h?f:h,C=r.pageName,m=r.parameters,I=void 0===m?{}:m,v=r.routeName,y=r.pageType,b=void 0===y?"Desktop":y,k=r.parentPageId,T=r.previousPageComponent,x=r.showProgress,D=r.wrapper,R=r.wrapperId,E=n.pageResponse,A=void 0===E?t:E,F=n.pageComponentExtensions,P=void 0,O=ve.get("loader.serviceModstamps");if(A===t)return me.load(n).then(function(e){return We(e.versionedPageAPILoadResults,1)[0]}).catch(le);if((w||T||(T=i?i.data?i.data("component"):null:fe.component.getByType("skuidpage")[0]),e=T&&fe.page.getUnloadMessage(T))&&!window.confirm(e))return ge.reject();ye.holdReady(!0),!1!==x&&fe.NProgress.start();var N,_,M,L,U,j,B,V,z,G,H,q=ge.generateUniqueId(),$={"Ui-Only":{}},W={componentPacks:{},dataSourceTypes:[],pageResources:[]},Y={},K={},X=[],J=[],Q={cssLoads:J,dataSourceDependencies:$,jsDependencyGraph:W,jsLoads:X,labelDependencies:K,pageParameters:I},Z="",ee="",te=(new Date).getTime(),ne=[],ie="default",re=fe.loader.service,ae=ve.get("loader.siteSettings"),oe=[],se=[];function le(e){if(!e||"Load terminated"!==e.message)if(e&&e.stack)ge.log(e.stack,De);else{if(e&&e.status&&e.statusText){if((401===e.status||403===e.status)&&fe.platform.getName()===fe.constants.NATIVE)return fe.platform.attemptLogin(0,!0);if(404!==e.status)return void ge.log(e.statusText,De);var t=ye('<div class="nx-page">').text(we("not_found")||"No Page Found");return D?D.append(t):ye(document.body).empty().append(t)}d?ge.log(e||"Unknown error",De):Re.checkNetworkStatus().then(function(){he.networkDown()?(qe(),n.secondTry=!0,ze(n)):ge.log(e||"Unknown error",De)})}}function ce(e){e&&["server","default","client"].includes(e)&&(ie=e)}function ue(){if(!M.hasOwnProperty(q))return Ce(Error("Load terminated"))}function de(e){return O&&O[e]||te}return R?D=ye("#"+R):D&&(R=ye(D).prop("id")),D&&0!==D.length||(D=ye(document.body),R="body"),(M=pe[R])&&ge.size(M)&&c&&ye.each(M,function(e,t){t&&t.publish&&t.publish("stop.loading"),delete M[e]}),M||(M=pe[R]={}),M[q]=0,fe.settings.init(ae),ye.when(A,fe.offline.initiateServiceWorker(),fe.storage.initialize(Ye.default.id,fe.storage.getVersionedSchemas(Ye.default.id))).then(function(e){oe.push(re.componentPack(b,de("componentPackService")).then(Le)),c||w||oe.push(re.events().then(fe.events.register));var t,n,i=ue(),r=e.xml,a=e.metadata;if(P=a.pageAPIVersion,i)return i;z=ge.makeXMLDoc(r),C=a.pageName,p=a.pageId,B=new Date(a.pageLastModifiedDate).getTime(),t=a.masterPageName,n=a.masterPageNamespace,V=z.attr("theme"),ce(z.attr("personalizationmode")),me.registerPage(C,fe),me.registerPage(q,fe),(!fe.page.name||c||S&&!w)&&be(fe.page,{id:p,name:C});return t?(_=z,re.page(t,n,null,de("pageService")).then(function(e){var t,n,i,r=ue(),a=_.children("resources").first(),o=e.xml;if(r)return r;function s(r,a){return function(e){var t,n,i=r.children(e).first();i.length&&(t=i.children()).length&&((n=a.children(e).first()).length||(n=Se("<"+e+"/>").appendTo(a)),n.append(t))}}z=ge.makeXMLDoc(o),U=z.attr("theme"),n=z.attr("personalizationmode"),(t=_.attr("title"))&&z.attr("title",t),L="skuid"===(""+e.metadata.namespace).toLowerCase(),he.disable(L),!n||""!==ie&&"default"!==ie||ce(n),["interactions","models","pageregioncontents"].forEach(s(_,z)),a.length&&((i=z.children("resources").first()).length||(i=Se("<resources/>").appendTo(z)),["actionsequences","css","javascript","labels"].forEach(s(a,i)))})):Ie()}).then(function(){var t={mode:ie,pageId:p,pageName:C,pageNamespace:f||"c",userId:Ve()};return N=re.personalization(t,de("pageService")).then(function(e){return function(e,t){var n=t.mode,i=t.pageId,r=t.pageName,a=t.pageNamespace;fe.personalization.initializeSettings({pageSettings:ge.parseAsJSONIfString(e||{}),mode:n,pageId:i||r,pageName:r,pageNamespace:a,pageComponentId:q,userId:Ve(),pageXML:z})}(e,t)}),ye.when.all(oe)}).then(function(){fe.ui._loadHammer();var e=ue();if(e)return e;var t="skuid"===g;fe.page.params.usetheme?H=fe.page.params.usetheme:V?H=V:U&&(H=U),H||(H=t&&!H?fe.settings.theme&&fe.settings.theme("Mobile"===b?"mobileBuilderDefault":"builderDefault"):fe.settings.theme&&fe.settings.theme("Mobile"===b?"mobileDefault":"default")),H||(H=t&&!H?"BuilderLight":"Mobile"===b?"MobileClassic":"Modern"),(G=fe.platform.get("themeServiceDFD"))||(G=re.theme(H,P,de("themeService")).then(function(e){return he.isEnabled()&&he.networkDown()&&ge.inPlatform(fe.constants.CORDOVA)?function(e,t){var n=t.themeinfo;return Ge("themeCSS:"+e).then(function(e){return fe.webfonts.load(n),!fe.themeSettings.getAll()&&n&&n.themeSettings&&fe.themeSettings.load(n.themeSettings),e})}(H,e).then(function(e){return ee+=e}):je(e,J)}).catch(function(e){var t=e.body&&JSON.parse(e.body).message||"Requested Theme not found";return se.push("Theme error: "+t),re.theme("Modern",P,de("themeService")).then(function(e){je(e,J)})}),fe.platform.set("themeServiceDFD",G)),ye.each(z.children("models").children(),function(){Oe(ye(this),$)}),_e(z,Y,Q,b),ye.each(z.children("resources").children(),function(){var e=Me(ye(this),Q.jsDependencyGraph.pageResources);ye.each(e.jsLoads,function(){Ne(this,X)}),ye.each(e.cssLoads,function(){Ne(this,J)}),Z+=e.inlineJS,ee+=e.inlineCSS,e.labels&&ye.extend(K,e.labels)}),fe.settings.globalFeedback&&fe.settings.globalFeedback("enabled")&&!fe.mobile&&_e(Se("<globalfeedback />"),Y,Q,b);var n={components:Y};return Y.pagebuilder&&ye.each(Ee(),function(e){$[e]={}}),c&&fe.utils.userInfo||Te.forEach(function(t){t!==ke?n[t]={}:xe.forEach(function(e){Y[e]&&(n[t]={},delete Y[e])})}),L&&!w||delete n.intercom,ye.when(re.meta(n),re.labels(Object.keys(K),de("labelsService")).then(Be),G)}).then(function(e){var o=this,t=ue();if(t)return t;ye.isPlainObject(e)||(e=JSON.parse(e));var n=void 0,i=void 0,r=e.runningUserInfo,a=e.organizationInfo||{},s=a.isMultiCurrencyOrganization,l=void 0!==s&&s,c=a.conversionRates;if(r){if((n=r.userLocale||{}).monthNames?(i={},["monthNames","monthNamesShort","dayNames","dayNamesShort","dayNamesMin","amPm"].forEach(function(e){i[e]=n[e]})):(i={monthNames:we("Month_Names_Long").split(","),monthNamesShort:we("Month_Names_Short").split(","),dayNames:we("Day_Names_Long").split(","),dayNamesShort:we("Day_Names_Short").split(","),dayNamesMin:we("Day_Names_Min").split(","),amPm:we("AM_PM_Markers").split(",")},be(n,i)),fe.time.setUserTimeZone(r.timeZone),ge.userInfo=r,fe.internal.fs.setIdentity(r),fe.internal.ha.setIdentity(r),ge.userLocale=n,fe.settings.init("userLocale",n),e.intercom){var u=e.intercom,d=u.error,f=u.hmac;d?ge.log(d,fe.constants.LOG_LEVELS.WARNING):f&&fe.settings.init("intercom",{hmac:f})}r.isAuthenticated||(ie="client"),be(fe.time,i),ye.datepicker.setDefaults(be({},{closeText:"Done",currentText:"Today",prevText:"Prev",nextText:"Next",weekHeader:"Wk"},n)),be(fe.page,{useComponentPacks:fe.settings.components("useComponentPacks"),currentSiteUrl:location.protocol+"//"+location.host,editable:r&&r.canEditPages||!1}),fe.page.sitePrefix||(fe.page.sitePrefix="")}if(w||fe.platform.recordUsage({path:window.location.pathname}),ge.isMultiCurrencyOrganization=l,c&&(ge.conversionRates=c),e.apps&&(ge.apps=e.apps),$){var p=W.dataSourceTypes;ye.each($,function(e){var t=Ae(e);if(!t)return!0;var n=Ke.default[t.dataSourceTypeName];if(!n)return!0;var i=n.js;if(i)if(ye.isArray(i)){var r=[];i.forEach(function(e){var t=Ne(e,X);if(t&&S){var n=[];r.push(new Fe(t,function(){return ge.loadJS(t)},n)),1<r.length&&n.push(r[r.length-2])}}),S&&r.length&&Array.prototype.push.apply(p,r)}else{var a=Ne(o.js,X);a&&S&&p.push(new Fe(a,function(){return ge.loadJS(a)}))}})}if(e.components&&(ye.each(e.components,function(e,t){var n=t.js,i=t.css,r=t.packs;ye.isArray(n)&&n.forEach(function(e){return Ne(e,X)}),ye.isArray(i)&&i.forEach(function(e){return Ne(e,J)}),r&&ye.each(r,function(e,t){Ue(t,Q)})}),fe.components={config:He.meta().components}),e.features&&(fe.features=e.features),e.cssLoads&&(J=e.cssLoads.concat(J)),fe.page._parametersByPage[q]=be({page:C},I),S){var h=J.map(function(e){return ge.loadCSS(e,{})}),g=W.componentPacks,m=W.dataSourceTypes,v=W.pageResources,y=[],b=function(e){return e.map(function(e){return e.process()})};return m.length&&Array.prototype.push.apply(y,b(m)),ge.size(g)&&ye.each(g,function(e,t){Array.prototype.push.apply(y,b(t))}),ye.when.all(h.concat(y)).then(function(){return v.length?ye.when.all(b(v)):Ie()})}return ye.each(J,function(e,t){ne.push(ge.loadCSS(t,{}))}),ye.each(X,function(e,t){t&&ne.push(ge.loadJS(t))}),ye.when.all(ne)}).then(function(){return fe.platform.hasFeature("Native")&&"true"===z.attr("ask-location-on-page-load")?fe.native.initializeUserLocation():ye.when()}).then(function(){return ge.inPlatform(fe.constants.CORDOVA)?fe.native.getPreferences().then(function(e){return fe.native.preferences=e,fe.native.push.init()}):ye.when()}).then(function(){if(ee&&ye('<style type="text/css">'+ee+"</style>").appendTo(document.body),Z)if(S)try{window.eval("// This code is embedded in the Skuid Page named "+C+"\n"+Z+"\n//# sourceURL="+C+"-"+q+"-InlineSnippets.js")}catch(e){throw Error("Skuid encountered an error when initializing the snippets on this Page.\n"+e)}else ye("<script>"+Z+"<\/script>").appendTo(document.body);return N}).then(function(){$&&ye.each($,function(e){if(!fe.dataSource.get(e)){var t=Ae(e);t&&new fe.dataSource.DataSource(t)}}),c&&fe.region.unregisterAll(p),ye.each(z.children("pageregioncontents").first().children("pageregioncontent"),function(){var e=ye(this);fe.region.register(e,q,C)});var e=ue();return e||(i||(i=ye('<div class="nx-page">')),j=fe.component.factory({element:i,xmlDefinition:z,options:{uniqueId:q},state:be({},F,{_parentPageId:k,_pageRecord:{Id:p||C,Name:C,LastModifiedDate:B},isInclude:w,isReplace:c,previousPageComponent:T})}),fe.utils.inPlatform(fe.constants.LIGHTNING)&&i.addClass("nx-page--lightning"),(!fe.page.pageComponent||c||S&&!w)&&be(fe.page,{pageComponent:j}),i.appendTo(D),(M[q]=j).subscribe("stop.loading",function(){delete M[q],j.unregister()}),se.length&&j.addProblems(se),j.once("rendered"))}).then(function(e){if(delete M[q],fe.utils.inPlatform([fe.constants.NATIVE])&&!w&&e.get("rendered")){var t,n=c&&!s,i={isReplace:!0,parameters:I};f&&(i.namespace=f),g&&(i.pageModule=g),v&&!ge.inPlatform(fe.constants.CORDOVA)?i.routeName=v:i.pageName=C,t=ge.inPlatform(fe.constants.CORDOVA)?fe.platform.getPageNavigateUrl(C,f,I):c?v?fe.platform.getRouteNavigateUrl(v,f,I):fe.platform.getPageNavigateUrl(C,f,I):window.location.href,window.history[n?"pushState":"replaceState"](i,"",t),document.title||(document.title=C)}return fe.utils.inPlatform(fe.constants.LIGHTNING)||he.init(),he.isEnabled()&&!he.networkDown()&&he.sync(),$e(),e}).always(function(){!1!==x&&fe.NProgress.done()}).catch(le)}function n(){return fe.storage.getDb(Ye.default.id)}function r(){var e=n();if(e)return e.getTable("queries")}function Ge(e){var t=r();return t?t.get(e).then(function(e){return e&&e.data}):Ie()}function h(e,t,n){var i=r();return i?i.add(e,{data:t,modstamp:n}):Ie()}function a(e){var t=r();return t?t.get(c+":"+e):Ie()}function g(e,t){var n=r();return n?n.add(c+":"+e,{data:t}):Ie()}var He={componentPack:function(e){return s.componentPack[e]},dataSources:function(){return ve.get("loader.dataSources")},events:function(){return s.events},labels:function(){return s.labels},meta:function(){return s.meta},page:function(e,t,n){return ve.get("page."+(e||n))},personalization:function(e){return ge.grab(s.personalization,e.pageNamespace||"c",e.pageName)},theme:function(e){return s.theme[e]}},m={componentPack:function(e){return Ge("componentPackService:"+e)},dataSources:function(t){var e=fe.storage.getDb();return e?e.getTable("queries").get("dataSources."+i()).then(function(e){if(e&&e.data&&(fe.offline.networkDown()||e.modstamp===t))return e.data}):Ie()},events:function(){return Ge("eventsService")},labels:function(){return Ge("labelsService")},meta:function(s){return ye.when.all(Te.concat(["components"]).map(a)).then(function(e){var o={};return ye.each(e,function(e,t){if(!ge.isUndefined(t)){var n=t.id.replace(c+":","");if("components"===n){var i=s.components,r=t.data,a={};ye.each(r,function(e,t){ge.isObject(i[e])&&(a[e]=t)}),t.data=a}o[n]=t.data}}),o})},page:function(e,t,n){var i,r;r=e?(i="name",e):(i="route",n);var a=fe.storage.getDb();return a?a.getTable("pages").get(r,i).then(function(e){if(e)return e.data}):Ie()},personalization:function(e){return Ge(o+":"+Ve()+":"+(e.pageNamespace||"c")+":"+e.pageName)},theme:function(e){return Ge("themeService:"+e)}},v={componentPack:function(e,t){s.componentPack[t]=e},dataSources:function(e){ve.set("loader.dataSources",e)},events:function(e){s.events=e},labels:function(e){s.labels||(s.labels={}),ye.extend(s.labels,e)},meta:function(i){Te.forEach(function(e){var t=i[e],n=s.meta[e];t&&(n||(n=s.meta[e]={}),ye.extend(n,t))}),i.components&&(s.meta.components||(s.meta.components={}),ye.extend(s.meta.components,i.components))},page:function(e,t){ve.set("page."+(t||e.metadata.pageName),{xml:e.xml,metadata:e.metadata})},personalization:function(e,t){var n=t.pageName,i=t.pageNamespace,r=void 0===i?"c":i,a=s.personalization,o=a[r];o||(o=a[r]={}),o[n]=e},theme:function(e,t){s.theme[t]=e}},y={componentPack:function(e,t){return h("componentPackService:"+t,s.componentPack[t])},dataSources:function(e,t){var n=fe.storage.getDb();return n?n.getTable("queries").add("dataSources."+i(),{data:e,modstamp:t}):Ie()},events:function(){return h("eventsService",s.events)},labels:function(){return h("labelsService",s.labels)},meta:function(t){return a("components").then(function(e){if(Te.forEach(function(e){return t[e]&&g(e,t[e])}),t.components)if(e){var n=e.data;ye.each(t.components,function(e,t){n[e]=t}),g("components",n)}else g("components",t.components)})},page:function(e,t,n,i){var r=e.metadata;if(r&&r.pageId){var a=fe.storage.getDb();return a?a.getTable("pages").add(r.pageId,{name:t||r.pageName,route:i,data:e}):Ie()}},personalization:function(e,t,n){var i=t.pageName,r=t.pageNamespace,a=void 0===r?"c":r;return h(o+":"+Ve()+":"+a+":"+i,ge.grab(s.personalization,a,i),n)},theme:function(e,t){return h("themeService:"+t,s.theme[t])}},b={componentPack:function(e,t){return fe.platform.services.componentPack(e,t).then(function(e){return e&&e.length?ye.when.all(e.map(function(e){var t=e.file;return t&&t.path?ye.getJSON(ge.getStaticResourceUrl(t.resource,t.namespace,t.path,t.modstamp)).then(function(e){return ye.extend(e,{file:t})}):Ie(e)})):[]})},dataSources:function(e){return fe.platform.services.dataSources(e)},events:function(){return fe.platform.services.events()},page:function(e,t,n,i){return fe.platform.services.page(e,t,n,i)},personalization:function(e){return"server"===e.mode?fe.platform.services.personalization(e):Ie({})},theme:function(e,t,n){return fe.platform.services.theme(e,t,n).then(function(t){var n=t.themeinfo;return n&&n.loadResourcesOnClient?ye.getJSON(ge.getStaticResourceUrl(n.fileName,n.fileNamespace,"resources.json",n.fileModstamp)).then(function(e){return be(n,e),t},function(){return t}):t})}};function S(o){var s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:C({},u,!1);return function(){var t=this,n=Array.prototype.slice.call(arguments),i=n.length&&n.pop(),r=he.networkDown(),e=He[o].apply(t,n);if(e)return Ie(e);var a=function(){return b[o].apply(t,n).then(function(e){return e=l(e),v[o].apply(t,[e].concat(n)),y[o].apply(t,[e].concat(n,[i])),e})};return r||s[u]?m[o].apply(t,n.concat([i])).then(function(e){return e?(v[o].apply(t,[e].concat(n)),e):r?void 0:a()}):a()}}function w(e){if(!e||!e.length)return Ce("No data source name provided.");var n={},r=[],t=ye.map(e,function(e){var t=fe.dataSource.get(e);if(t)return t;n[e]||(n[e]={})});return ge.size(n)?(Ee()?Ie():Re.dataSources(fe.runtime.cache.get("loader.serviceModstamps").dataSourceService)).then(function(){return ye.each(n,function(e){var t=Ae(e);if(!t)return!0;var n=Ke.default[t.dataSourceTypeName];if(!n)return!0;var i=n.js;i&&(ye.isArray(i)?ye.each(i,function(e,t){r.push(ge.loadJS(d(t)))}):r.push(ge.loadJS(d(i))))}),ye.when.all(r)}).then(function(){return ye.each(n,function(e){var t=Ae(e);if(!t)return!0;new fe.dataSource.DataSource(t)}),ye.map(e,function(e){return fe.dataSource.get(e)})}):Ie(t)}function qe(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];s={componentPack:{},page:{},personalization:{},theme:{},meta:{}},e?Te.forEach(function(e){var t=ve.get(c+"."+e);t&&(s.meta[e]=t)}):ve.clear(function(e){return/^(page|metaService)\./.test(e)}),fe&&fe.platform&&fe.platform.set("themeServiceDFD",null)}function $e(){var e=n();return e?ye.when.all(ye.map(e.getTables(),function(e){return e.clean()})):Ie()}Re={checkNetworkStatus:function(){return he.check()},componentPack:S("componentPack"),dataSources:S("dataSources",C({},u,!0)),events:S("events"),labels:function(e,t){var n=function(n,e){var t,i={},r={};return{foundAll:0===(t=n?(e.forEach(function(e){var t=n[e];t?i[e]=t:r[e]=1}),Object.keys(r)):e.map(function(e){return e})).length,missingEntries:t,cumulativeEntries:i}}(He.labels(),e),i=n.cumulativeEntries,r=he.networkDown();return n.foundAll?Ie(i):r?m.labels().then(function(e){return e&&!He.labels()&&v.labels(e),e}):fe.platform.services.labels(n.missingEntries,t).then(function(e){return v.labels(e),y.labels(e),ye.extend(i,e)})},loadDataSourceAndDependencies:function(e){return w([e]).then(function(e){return e[0]})},loadDataSourcesAndDependencies:w,page:S("page"),personalization:S("personalization"),meta:function(r){var a=s.meta,e=he.networkDown(),t={};return Te.forEach(function(e){r[e]&&a[e]&&(delete r[e],t[e]=a[e])}),["components"].forEach(function(e){var n={},t=r[e],i=a[e];t&&i&&(ye.each(t,function(e,t){i[e]||(n[e]=t)}),r[e]=n),t&&!ye.isEmptyObject(r[e])||delete r[e]}),r&&ge.size(r)?e?m.meta(r).then(function(e){return e&&v.meta(e,r),ye.extend(t,e)}):fe.platform.services.meta(r).then(function(e){return v.meta(e,r),y.meta(e,r),ye.extend(t,e)}):Ie(t)},theme:S("theme")},qe(!0),e={memory:{add:v,clear:qe},persistent:{add:y,clear:$e}},fe.loader={cache:e,load:function(e){return ze(e.pageRequest?e:{pageRequest:e})},service:Re}}(window.skuid)},function(e){e.exports={GoogleCalendar:{js:[{path:"js/models/RESTDataSourceUtils.js",namespace:"skuid"},{path:"js/models/RESTDataSourceTypeBase.js",namespace:"skuid"},{path:"js/dataSourceTypes/googleCalendar.js",namespace:"skuid"}],label:"Google Calendar"},GoogleDrive:{js:[{path:"js/models/RESTDataSourceUtils.js",namespace:"skuid"},{path:"js/models/RESTDataSourceTypeBase.js",namespace:"skuid"},{path:"js/dataSourceTypes/googleDrive.js",namespace:"skuid"}],label:"Google Drive"},Marketo:{js:[{path:"js/models/RESTDataSourceUtils.js",namespace:"skuid"},{path:"js/models/RESTDataSourceTypeBase.js",namespace:"skuid"},{path:"js/dataSourceTypes/marketo.js",namespace:"skuid"}],label:"Marketo"},AmazonDynamoDB:{js:[{path:"js/models/RESTDataSourceUtils.js",namespace:"skuid"},{path:"js/models/RESTDataSourceTypeBase.js",namespace:"skuid"},{path:"js/dataSourceTypes/amazonDynamoDB.js",namespace:"skuid"}],label:"Amazon DynamoDB",platform:["skuid-platform","cordova"]},AmazonLambda:{js:[{path:"js/models/RESTDataSourceUtils.js",namespace:"skuid"},{path:"js/models/RESTDataSourceTypeBase.js",namespace:"skuid"},{path:"js/dataSourceTypes/amazonLambda.js",namespace:"skuid"}],label:"Amazon Lambda",platform:["skuid-platform","cordova"],requiresFeature:"DataSourceType:AmazonLambda"},AmazonLEX:{js:[{path:"js/models/RESTDataSourceUtils.js",namespace:"skuid"},{path:"js/models/RESTDataSourceTypeBase.js",namespace:"skuid"},{path:"js/dataSourceTypes/amazonLEX.js",namespace:"skuid"}],label:"Amazon LEX",platform:["skuid-platform","cordova"]},AmazonPolly:{js:[{path:"js/models/RESTDataSourceUtils.js",namespace:"skuid"},{path:"js/models/RESTDataSourceTypeBase.js",namespace:"skuid"},{path:"js/dataSourceTypes/amazonPolly.js",namespace:"skuid"}],label:"Amazon Polly",platform:["skuid-platform","cordova"]},AmazonRedshift:{js:[{path:"js/models/relationalDataSourceTypeBase.js",namespace:"skuid"},{path:"js/dataSourceTypes/dataSourceObject.js",namespace:"skuid"}],label:"Amazon Redshift",dialect:"redshift",requiresFeature:"DataSourceType:AmazonRedshift",useDataSourceObjects:!0},AmazonS3:{js:[{path:"js/models/RESTDataSourceUtils.js",namespace:"skuid"},{path:"js/models/RESTDataSourceTypeBase.js",namespace:"skuid"},{path:"js/dataSourceTypes/amazonS3.js",namespace:"skuid"}],label:"Amazon S3",platform:["skuid-platform","cordova"]},AmazonSES:{js:[{path:"js/models/RESTDataSourceUtils.js",namespace:"skuid"},{path:"js/models/RESTDataSourceTypeBase.js",namespace:"skuid"},{path:"js/dataSourceTypes/amazonSES.js",namespace:"skuid"}],label:"Amazon SES",platform:["skuid-platform","cordova"],requiresFeature:"DataSourceType:AmazonSES"},AmazonSNS:{js:[{path:"js/models/RESTDataSourceUtils.js",namespace:"skuid"},{path:"js/models/RESTDataSourceTypeBase.js",namespace:"skuid"},{path:"js/dataSourceTypes/amazonSNS.js",namespace:"skuid"}],label:"Amazon SNS",platform:["skuid-platform","cordova"]},DocuSign:{js:[{path:"js/models/RESTDataSourceUtils.js",namespace:"skuid"},{path:"js/models/RESTDataSourceTypeBase.js",namespace:"skuid"},{path:"js/dataSourceTypes/docuSign.js",namespace:"skuid"}],label:"DocuSign"},OData:{js:[{path:"js/models/oDataDataSourceTypeBase.js",namespace:"skuid"},{path:"js/dataSourceTypes/oData.js",namespace:"skuid"}],label:"OData"},MicrosoftDynamics:{js:[{path:"js/models/oDataDataSourceTypeBase.js",namespace:"skuid"},{path:"js/dataSourceTypes/microsoftDynamics.js",namespace:"skuid"}],label:"Microsoft Dynamics"},MicrosoftOneDrive:{js:[{path:"js/models/RESTDataSourceUtils.js",namespace:"skuid"},{path:"js/models/RESTDataSourceTypeBase.js",namespace:"skuid"},{path:"js/dataSourceTypes/microsoftOneDrive.js",namespace:"skuid"}],label:"Microsoft OneDrive"},MicrosoftExcel:{js:[{path:"js/models/RESTDataSourceUtils.js",namespace:"skuid"},{path:"js/models/RESTDataSourceTypeBase.js",namespace:"skuid"},{path:"js/dataSourceTypes/microsoftExcel.js",namespace:"skuid"}],label:"Microsoft Excel"},SAPGateway:{js:[{path:"js/models/oDataDataSourceTypeBase.js",namespace:"skuid"},{path:"js/dataSourceTypes/SAPGateway.js",namespace:"skuid"}],label:"SAP Gateway"},Outlook:{js:[{path:"js/models/RESTDataSourceUtils.js",namespace:"skuid"},{path:"js/models/RESTDataSourceTypeBase.js",namespace:"skuid"},{path:"js/dataSourceTypes/outlook.js",namespace:"skuid"}],label:"Microsoft Outlook"},REST:{js:[{path:"js/models/RESTDataSourceUtils.js",namespace:"skuid"},{path:"js/dataSourceTypes/REST.js",namespace:"skuid"}],label:"REST"},"Ui-Only":{js:[{path:"js/dataSourceTypes/uiOnly.js",namespace:"skuid"}],label:"Ui-Only"},Box:{js:[{path:"js/models/RESTDataSourceUtils.js",namespace:"skuid"},{path:"js/models/RESTDataSourceTypeBase.js",namespace:"skuid"},{path:"js/dataSourceTypes/box.js",namespace:"skuid"}],label:"Box"},JIRA:{js:[{path:"js/models/RESTDataSourceUtils.js",namespace:"skuid"},{path:"js/models/RESTDataSourceTypeBase.js",namespace:"skuid"},{path:"js/dataSourceTypes/jira.js",namespace:"skuid"}],label:"JIRA",requiresFeature:"DataSourceType:JIRA"},salesforce:{js:[{path:"js/dataSourceTypes/salesforce.js",namespace:"skuid"}],label:"Salesforce"},Sharepoint:{js:[{path:"js/models/oDataDataSourceTypeBase.js",namespace:"skuid"},{path:"js/dataSourceTypes/sharepoint.js",namespace:"skuid"}],label:"Microsoft SharePoint"},Slack:{js:[{path:"js/models/RESTDataSourceUtils.js",namespace:"skuid"},{path:"js/models/RESTDataSourceTypeBase.js",namespace:"skuid"},{path:"js/dataSourceTypes/slack.js",namespace:"skuid"}],label:"Slack"},PostgreSQL:{js:[{path:"js/models/relationalDataSourceTypeBase.js",namespace:"skuid"},{path:"js/dataSourceTypes/dataSourceObject.js",namespace:"skuid"}],label:"PostgreSQL",dialect:"pg",requiresFeature:"DataSourceType:PostgreSQL",useDataSourceObjects:!0},MicrosoftSQL:{js:[{path:"js/models/relationalDataSourceTypeBase.js",namespace:"skuid"},{path:"js/dataSourceTypes/dataSourceObject.js",namespace:"skuid"}],label:"Microsoft SQL Server",dialect:"mssql",requiresFeature:"DataSourceType:MicrosoftSQL",useDataSourceObjects:!0},MySQL:{js:[{path:"js/models/relationalDataSourceTypeBase.js",namespace:"skuid"},{path:"js/dataSourceTypes/dataSourceObject.js",namespace:"skuid"}],label:"MySQL / MariaDB",dialect:"mysql",requiresFeature:"DataSourceType:MySQL",useDataSourceObjects:!0},OracleDB:{js:[{path:"js/models/relationalDataSourceTypeBase.js",namespace:"skuid"},{path:"js/dataSourceTypes/dataSourceObject.js",namespace:"skuid"}],label:"Oracle",dialect:"oracledb",requiresFeature:"DataSourceType:OracleDB",useDataSourceObjects:!0},ServiceNow:{js:[{path:"js/models/RESTDataSourceUtils.js",namespace:"skuid"},{path:"js/models/RESTDataSourceTypeBase.js",namespace:"skuid"},{path:"js/dataSourceTypes/serviceNow.js",namespace:"skuid"}],label:"ServiceNow",requiresFeature:"DataSourceType:ServiceNow"},Device:{js:[{path:"js/dataSourceTypes/device.js",namespace:"skuid"}],label:"Device",requiresFeature:"DataSourceType:Device",platform:["cordova","skuid-platform"]}}},function(e,t,n){"use strict";!function(i){var a=i.$,e=i.native||(i.native={}),n="/api/v1/geolocation/proxy/",t=e.geoAPI={},r={};function o(t){return r[t]?a.when(JSON.parse(JSON.stringify(r[t]))):i.ajax.direct({method:"GET",url:n+t}).then(function(e){if(e.body.error_message)throw console.log(e.body.error_message),e.body.error_message;return e.body.results?(r[t]=e.body.results,e.body.results):(r[t]=e.body,e.body)})}function s(e){return o("geocode/json?"+e)}t.forwardGeocode=function(e){return s("address="+e).then(function(e){var t=e[0].geometry.location;return{latitude:t.lat,longitude:t.lng}})},t.reverseGeocode=function(e,t){return s("latlng="+e+","+t).then(function(e){var i={"route:long_name":"thoroughfare","street_number:long_name":"subThoroughfare","locality:long_name":"locality","administrative_area_level_2:long_name":"subAdministrativeArea","administrative_area_level_1:long_name":"administrativeArea","country:long_name":"countryName","country:short_name":"countryCode","postal_code:long_name":"postalCode"},r={},t=e[0].address_components;return a.each(t,function(e,t){var n=t.types[0];i[n+":long_name"]&&(r[i[n+":long_name"]]=t.long_name),i[n+":short_name"]&&(r[i[n+":short_name"]]=t.short_name)}),r}).catch(function(){return{}})},t.getDrivingDistanceAndTripTimeFromAddresses=function(r,t){var n={};return a.each(r,function(e,t){t.trim()&&(n[t]=1)}),(r=Object.keys(n).sort()).length?(i.utils.userInfo.location?a.when():e.initializeUserLocation()).then(function(){var e=i.utils.userInfo.location;return function(e,t){return o("distancematrix/json?units="+(t=t||"imperial")+(e?"&"+e:""))}("origins="+e.latitude+","+e.longitude+"&destinations="+r.join("|"),t).then(function(e){var i={};return a.each(e.rows[0].elements,function(e,t){var n=r[e];"OK"===t.status&&(i[n]={distance:t.distance,time:t.duration})}),i})}):a.when()}}(window.skuid)},function(e,t,n){"use strict";!function(s){var l=s.$,c=s.native||(s.native={}),e=c.geo={};function u(e){return e*(Math.PI/180)}function d(e,t,n,i,r){var a=function(e,t,n,i){var r=u(n-e),a=u(i-t),o=Math.sin(r/2)*Math.sin(r/2)+Math.cos(u(e))*Math.cos(u(n))*Math.sin(a/2)*Math.sin(a/2);return 2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))*6371}(e,t,n,i);return"kilometers"!==r&&r?"miles"===r?.621371*a:"meters"===r?1e3*a:"yards"===r?1093.61*a:void 0:a}function t(){var o=l.Deferred();return s.utils.userInfo.location=s.utils.userInfo.location||{},navigator.geolocation.getCurrentPosition(function(e){var t=e.coords,n=Math.round(1e4*t.latitude)/1e4,i=Math.round(1e4*t.longitude)/1e4,r=s.utils.userInfo.location.latitude,a=s.utils.userInfo.location.longitude;if((r||a||0===r&&0===a)&&d(n,i,r,a,"meters")<4.9)return o.resolve(s.utils.userInfo.location);return function(e,t){if(s.utils.inPlatform(s.constants.CORDOVA)){var n=l.Deferred();return c._reverseGeocode(function(e){n.resolve(e.length?e[0]:{})},function(e){n.reject(e)},e,t),n.promise()}return s.native.geoAPI.reverseGeocode(e,t)}(s.utils.userInfo.location.latitude=n,s.utils.userInfo.location.longitude=i).then(function(e){l.extend(s.utils.userInfo.location,e),s.data.v2.sessionStorage.setItem("user-location",JSON.stringify(s.utils.userInfo.location)),o.resolve(s.utils.userInfo.location)}).catch(function(){o.resolve(s.utils.userInfo.location)})},function(){o.resolve(s.utils.userInfo.location)},{timeout:8e3,enableHighAccuracy:!0}),o.promise()}c.initializeUserLocation=function(){s.utils.userInfo.location={};var e=s.data.v2.sessionStorage.getItem("user-location");return e?(s.utils.userInfo.location=JSON.parse(e),l.when()):t()},e.updateCurrentUserPosition=t,s.utils.runningTests()&&(e._getDistanceBetweenTwoPoints=d)}(window.skuid)},function(e,t,n){"use strict";var o,s,i,r;o=window.skuid,s=o.$,i={},r=o.utils,s.extend(i,{init:function(){if(!window.cordova.skuidPush)return r.resolve();var e=new window.cordova.skuidPush.Push,t=r.userInfo;return e.requestPermission().then(function(){return e.init().then(function(e){i.deviceToken=e.deviceToken,i.type=r.lowercase(e.type)}).then(function(){return t.userId?function(t){var n=o.data.sessionStorage,e=n.getItem("activeUserTimeLogged"),i=n.getItem("loggedActiveUser"),r=!1;if(e&&i)if(t.userId!==i)r=!0;else{var a=Math.round((new Date).getTime()/1e3);Math.round(new Date(e).getTime()/1e3)<a-86400&&(r=!0)}else r=!0;return r?o.ajax.direct({method:"POST",url:"/api/v1/native-service/public-proxy/apps/"+t.appId+"/active-users",contentType:"application/json",headers:{"skuid-organization":t.organizationId},body:t}).then(function(e){return n.setItem("activeUserTimeLogged",(new Date).toString()),n.setItem("loggedActiveUser",t.userId),e}):s.when()}({deviceToken:i.deviceToken,appId:o.native.preferences.skuidappid,userId:t.userId,serviceType:i.type,organizationId:t.organizationId}):s.when()})}).catch(function(e){console.error(e)})},sendNotifications:function(e,t){e=e||o.native.preferences.skuidappid;var n=o.utils.userInfo.organizationId;return o.ajax.direct({method:"POST",url:"/api/v1/native-service/"+e+"/send-messages",contentType:"application/json",headers:{"skuid-organization":n},body:t})}}),o.native.push=i}]);