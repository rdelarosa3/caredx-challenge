window.skuid || (window.skuid = {});
skuid.runtime=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=20)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(12);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})}),t._makeTransferrable=function(e){try{e=JSON.parse(JSON.stringify(e))}catch(e){}return e},t._oniOS=function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream},t.capitalizeFirst=function(e){if(e&&e.length)return e.charAt(0).toUpperCase()+e.slice(1)},t.combineUrls=function(){return g.apply(this,["/"].concat(Array.prototype.slice.apply(arguments)))},t.contains=a,t.Deferred=function(){var e={},t=new Promise(function(t,n){e.resolve=t,e.reject=n});return e.promise=function(){return t},e.then=t.then.bind(t),e},t.deparam=function(e){if(!e||!e.length)return{};a(e,"?")&&(e=e.substr(e.indexOf("?")+1));for(var t=e.split("&"),n={},r=0,i=void 0;r<t.length;++r)2==(i=t[r].split("=")).length&&(n[decodeURIComponent(i[0])]=decodeURIComponent(i[1].replace(new RegExp("\\+","g")," ")));return n},t.mergeArrays=function(e,t){return Array.prototype.push.apply(e,t),e},t.each=function(e,t){Array.isArray(e)?function(e,t){for(var n=0;n<e.length&&!1!==t(n,e[n]);n++);}(e,t):function(e,t){var n=void 0;for(n in e)if(e.hasOwnProperty(n)&&!1===t(n,e[n]))break}(e,t)},t.endsWith=u,t.incrementGlobalCounter=l,t.generateUniqueId=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).prefix;return(void 0===e?"sk":e)+"-"+function(e){var t="";do{t=s[63&e]+t,e>>>=6}while(0!==e);return t}(Date.now()).slice(0,-2)+"-"+l()},t.isFunction=function(e){return(void 0===e?"undefined":r(e))===o.JS_TYPES.FUNCTION},t.isNumber=f,t.isPlainObject=p,t.isObject=function(e){return null!==e&&(void 0===e?"undefined":r(e))===o.JS_TYPES.OBJECT},t.isString=v,t.isUndefined=m,t.joinStrings=g,t.keyBy=function(e,t){for(var n=Array.isArray(t)?t.length:0,r=0,i={},o=void 0,a=void 0;r<e.length;r++)if(o=e[r],n>0)for(a=0;a<n;a++)o.hasOwnProperty(t[a])&&(i[o[t[a]]]=o);else o.hasOwnProperty(t)&&(i[o[t]]=o);return i},t.param=function(e){return Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")},t.parseAsJSONIfString=function(e){if(e&&v(e))try{e=JSON.parse(e)}catch(e){}return e},t.reject=function(e){return Promise.reject(e)},t.resolve=function(e){return Promise.resolve(e)},t.rfc4122v4GUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new RegExp("[xy]","g"),function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)})},t.runningTests=function(){return window.skuid.environment===o.ENVIRONMENTS.TEST},t.size=function(e){if(m(e)||null===e)return 0;if(Array.isArray(e)||v(e))return e.length;if(p(e)){var t=0,n=void 0;for(n in e)e.hasOwnProperty(n)&&t++;return t}return f(e)?e.toString().replace(new RegExp("D","g"),"").length:0},t.startsWith=b;var o=n(1);function a(e,t,n){return w(function(e,t){return-1!==e.indexOf(t)},e,t,n)}var s="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz_-".split("");function u(e,t,n){return w(function(e,t){return-1!==e.indexOf(t,e.length-t.length)},e,t,n)}var c=2;function l(){return c++}function f(e){return!isNaN(e-0)}var d={}.toString(),h=Object.toString();function p(e){var t=void 0,n=void 0;return!(!e||e.toString()!==d)&&(!(t=Object.getPrototypeOf(e))||(void 0===(n=t.hasOwnProperty("constructor")&&t.constructor)?"undefined":r(n))===o.JS_TYPES.FUNCTION&&n.toString()===h)}function v(e){return(void 0===e?"undefined":r(e))===o.JS_TYPES.STRING||e instanceof String}function m(e){return(void 0===e?"undefined":r(e))===o.JS_TYPES.UNDEFINED}function g(e,t){var n=Array.isArray(t)?t:Array.prototype.slice.call(arguments,1);return e||(e=""),n.reduce(function(t,n){if(!n)return t;if(!t)return n;var r=u(t,e),i=b(n,e);return r||i?r&&i?t+n.substring(e.length):t+n:t+e+n},"")}function y(e){return e&&v(e)?e.toLocaleLowerCase?e.toLocaleLowerCase():e.toLowerCase():e}function b(e,t,n){return w(function(e,t){return 0===e.lastIndexOf(t,0)},e,t,n)}function w(e,t,n,r){return!!(e&&t&&n)&&(r&&(t=y(t),n=y(n)),e(t,n))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.JS_TYPES={BOOLEAN:"boolean",NUMBER:"number",STRING:"string",OBJECT:"object",FUNCTION:"function",UNDEFINED:"undefined"},t.MIME_TYPES={JSON:"application/json",ZIP:"application/zip",FORM_URL_ENCODED:"application/x-www-form-urlencoded"},t.HTTP_VERBS={GET:"GET",PATCH:"PATCH",POST:"POST",PUT:"PUT",DELETE:"DELETE",MERGE:"MERGE"},t.ENVIRONMENTS={DEV:"development",PROD:"production",TEST:"test"},t.SCOPES={COMPONENT:"component",MODEL:"model",PAGE:"page",SKUID:"skuid",GLOBAL:"global"},t.LOCAL="local",t.SALESFORCE="salesforce",t.NATIVE="skuid-platform",t.CORDOVA="cordova",t.VISUALFORCE="visualforce",t.LIGHTNING="lightning"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.getLocalVisualforceDomain=g,t.checkNetwork=function(){return m("checkNetwork").catch(function(e){if((0,o.isString)(e)){if(e.indexOf("Logged in?")>-1)return;if(e.indexOf("Could not find an action")>-1)return}throw e})},t.getExtension=y,t.getName=function(){return i.VISUALFORCE},t.getResourceUrl=function(e){var t=e.apiVersion,n=void 0===t?"shared":t,r=e.name,i=y("sitePrefix"),o=a.default[n].path,s=window.location.host,u=void 0,c=void 0,l=void 0;i&&!i.startsWith("/")&&(i="/"+i);u="js/"+r,r=o,window.skuid&&window.skuid.offline&&window.skuid.offline.networkDown()&&s.search(/\.visual\.?force\.com/)>-1&&(l=g(s).replace("--c","--skuid").replace("//c.","//skuid."),c=window.location.protocol+"//"+l);return[c||"",i,"/resource/",y("skuidVersionedResources")[o],"/skuid__"+r,u?"/"+u:""].filter(function(e){return!!e}).join("")},t.page=function(e,t){(0,o.isUndefined)(t)&&(t=null);return m("pageService",e,t).then(function(e){var t=e.masterPageName,n=e.pageAPIVersion,r=e.pageId,i=e.pageLastModifiedDate,o=e.pageLayout,a=e.pageName,s=e.namespace;return{metadata:{pageAPIVersion:n,pageName:a,pageId:r,pageLastModifiedDate:i,masterPageName:t,namespace:s},xml:o}})},t.dataSources=function(){return m({methodName:"dataSourceService",buffer:!1})},t.files=function(){return m("fileService","")},t.meta=function(e){return m("metaService",e)},t.settings=function(){return m("settingsService")},t.initialize=function(e){r(d,e),["environment","platformName","sitePrefix","skuidVersionedResources","SFUITheme"].forEach(function(t){var n=e[t];(0,u.setPlatformVariable)(t,n),window.skuid[t]||(window.skuid[t]=n)}),e.enableFS&&(0,c.initializeFullStory)();e.enableHA&&e.heapId&&(0,l.initializeHeapAnalytics)(e.heapId)},t.preferLoaderServiceCache=function(){return!0},t.preload=function(){},t.publishEvent=function(){},t.serviceModstamps=function(){return m("loaderServiceModstamps")};var i=n(1),o=n(0),a=f(n(14)),s=f(n(7)),u=n(3),c=n(8),l=n(17);function f(e){return e&&e.__esModule?e:{default:e}}var d={},h=window.location.host,p=(0,s.default)(),v=void 0,m=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return s.default.promisify.apply(s.default,[p,e].concat(n))};function g(e){var t=!e,n=void 0,r=void 0,i=void 0,a=void 0;return v&&t?v:(e||(e=h),"c"===(i=(r=e.split("."))[0])||(0,o.endsWith)(i,"--c")?n=e:((0,o.contains)(i,"--")?((a=i.split("--")).pop(),a.push("c"),r[0]=a.join("--")):r[0]="c",n=r.join(".")),t&&(v=n),n)}function y(e){return d[e]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.extendApi=function(e,t){var n=e.split("."),a=o;if(n.forEach(function(e,r){if(!a[e]){var i=r===n.length-1?t:{};Object.defineProperty(a,e,{enumerable:!0,get:function(){return i}})}a=a[e]}),a!==t){if(!(0,i.isPlainObject)(t))throw Error("Unable to overwrite existing API: "+e);r(a,t,a)}return a},t.setPlatformVariable=function(e,t){a[e]=t},t.getPlatformVariable=function(e){return a[e]},t.getPlatformVariables=function(){return r({},a)},t.getPublicApi=function(e){return e?o[e]:o};var i=n(0),o=window.skuid||(window.skuid={}),a={}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.globalEventService=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.getGlobalEvent=p,t.registerComponentEvents=g,t.getRegisteredComponentEvents=y,t.getComponentEvent=b;var i=n(1),o=n(0),a=n(2),s={},u=void 0;function c(e,t,n,i){r(this,{name:e,label:t,metadata:i,parameters:n})}function l(e,t,n,i){r(this,{name:e,label:t,displayType:n.toUpperCase(),metadata:i})}c.prototype={getName:function(){var e=this.getComponentType();return e?e.type+"."+this.name:this.name},getLabel:function(){var e=this.getComponentType();return e?(e.label||e.type)+": "+this.label:this.label},getParam:function(e){var t=this.parameters,n=0;if(t)for(;n<t.length;n++)if(t[n].getName()===e)return t[n]},getParameters:function(){return this.parameters||[]},getScope:function(){if(this.metadata&&this.metadata.scope)return this.metadata.scope},isSubscribable:function(){return!this.metadata||!1!==this.metadata.subscribable},isComponentEvent:function(){return!!this._cmpType},getComponentType:function(){return this._cmpType},setComponentType:function(e){return this._cmpType=e,this}},l.prototype={getName:function(){return this.name},getLabel:function(){return this.label},getDisplayType:function(){return this.displayType},getMetadata:function(){return this.metadata}};var f={};function d(e,t,n,i,a){(r(this,{eventService:e,topic:t,callback:n,channel:i,slateId:a,id:""+(0,o.incrementGlobalCounter)()}),a)&&(f[a]||(f[a]=[])).push(this)}function h(){var e={},t={},n={},s=function(){},u=Date.now()+"-"+(0,o.incrementGlobalCounter)(),c=2;function l(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.channel,o=r.slateId;e[t]||(e[t]=[]);var a=new d(s,t,n,i,o);return e[t].push(a),a}function h(e,t,n){return e instanceof Array?e.map(function(e){return l(e,t,n)}):l(e,t,n)}function p(t){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).deferSlateCleanup,r=void 0!==n&&n,i=t.getTopic(),o=t.getId(),a=e[i],s=!r&&t.getSlateId(),u=s&&f[s];if(a&&a.length){for(var c=a.length-1;c>=0;c--)if(a[c].getId()===o){a.splice(c,1);break}a.length||delete e[i]}if(u&&u.length){for(var l=u.length-1;l>=0;l--)if(u[l].getId()===o){u.splice(l,1);break}u.length||delete f[s]}}function v(e,t){Array.isArray(e)?e.forEach(function(e){return p(e,t)}):p(e,t)}return r(s,{count:function(t){function n(t){var n=e[t];return n&&n.length?n.length:0}if(t)return n(t);var r={};for(t in e)r[t]=n(t);return r},publish:function(r,s,l){l||(l={}),l.buffer&&!t[r]?t[r]={interval:l.buffer}:!1===l.buffer&&t[r]&&delete t[r];var f=t[r],d=l.channel,h=l.scope,p=l.uniqueId,v=void 0,m=e[r]&&e[r].length,g=a.publishEvent&&h===i.SCOPES.GLOBAL;function y(){if(p){if(n[p])return;!function(e){n[e]=1,setTimeout(function(){delete n[e]},5)}(p)}if(v=[],s&&(Array.isArray(s)?Array.prototype.push.apply(v,s):v.push(s)),v.push({uniqueId:p}),e[r]&&e[r].length&&(0,o.each)(e[r].slice(0),function(e,t){var n=t.getCallback(),r=t.getChannel();!n||r&&r!==d||n.apply(window,v)}),g){var t={};d&&(t.channel=d),(0,a.publishEvent)(r,v,t)}}(m||g||f)&&(p||(p=l.uniqueId=u+"-"+c++),f?(!f.initialCallTime||(new Date).getTime()-f.initialCallTime>f.interval)&&(setTimeout(y,f.interval),f.initialCallTime=(new Date).getTime()):y())},subscribe:h,subscribeOnce:function(e,t,n){var r=t?null:(0,o.Deferred)(),i=h(e,function(){v(i),t?t.apply(s,arguments):r.resolve.apply(s,arguments)},n);return t?i:r.promise()},unsubscribe:v,unsubscribeSlate:function(e){var t=e&&f[e];t&&(v(t,{deferSlateCleanup:!0}),delete f[e])},unsubscribeAll:function(){Object.keys(e).forEach(function(t){delete e[t]}),Object.keys(f).forEach(function(e){delete f[e]})}}),s}function p(e){return s[e]}function v(e){return Object.keys(e).map(function(t){return e[t]}).sort(function(e,t){return e.getLabel().localeCompare(t.getLabel())})}function m(e){if(!(e instanceof c))throw Error("Expected an instance of skuid.event.Event");var t=e.getName();s[t]||(s[t]=e)}function g(e,t,n,r){Array.isArray(r)||(r=[r]),r.forEach(function(r){if(!(r instanceof c))throw Error("Expected an instance of skuid.event.Event");var i=r.getName(),o=e[n];o||(o=e[n]={}),o[i]||(o[i]=r,r.setComponentType(t.componentType.get(n)))})}function y(e,t){if(t){var n=e[t];return n?v(n):[]}var r={};return(0,o.each)(e,function(e,t){r[e]=v(t)}),r}function b(e,t,n){var r=e[t];if(r)return r[n]}function w(e){return function(){var t;return(t=u)[e].apply(t,arguments)}}d.prototype={getCallback:function(){return this.callback},getChannel:function(){return this.channel},getId:function(){return this.id},getSlateId:function(){return this.slateId},getTopic:function(){return this.topic},unsubscribe:function(){this.eventService.unsubscribe(this)}},t.globalEventService=u=new h,t.globalEventService=u,t.default={Event:c,EventParameter:l,EventService:h,get:p,getRegisteredGlobalEvents:function(){return v(s)},register:function(e){Array.isArray(e)?e.forEach(m):(0,o.isUndefined)(e)||m(e)},getComponentEvent:b,getRegisteredComponentEvents:y,registerComponentEvents:g,count:w("count"),publish:w("publish"),subscribe:w("subscribe"),subscribeOnce:w("subscribeOnce"),unsubscribe:w("unsubscribe"),unsubscribeSlate:w("unsubscribeSlate")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cache=t.unregisterPage=t.registerPage=t.getPageMap=t.getPageList=t.runInPage=t.getPage=t.incrementGlobalCounter=void 0;var r=n(0);Object.defineProperty(t,"incrementGlobalCounter",{enumerable:!0,get:function(){return r.incrementGlobalCounter}});var i=n(13);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var o=n(6);Object.defineProperty(t,"getPage",{enumerable:!0,get:function(){return o.getPage}}),Object.defineProperty(t,"runInPage",{enumerable:!0,get:function(){return o.runInPage}}),Object.defineProperty(t,"getPageList",{enumerable:!0,get:function(){return o.getPageList}}),Object.defineProperty(t,"getPageMap",{enumerable:!0,get:function(){return o.getPageMap}}),Object.defineProperty(t,"registerPage",{enumerable:!0,get:function(){return o.registerPage}}),Object.defineProperty(t,"unregisterPage",{enumerable:!0,get:function(){return o.unregisterPage}}),t.generateUniquePageId=function(){return(0,r.generateUniqueId)({prefix:"skuid-page"})},t.getUrlParams=function(){return(0,r.deparam)(window.location.search)},t.start=function(e){var t=e.loader,n=void 0===t?{}:t,i=e.platform,a=void 0===i?{}:i;w||(u.initialize(a),s.initialize(n),function(){if(b||u.getName()!==m.NATIVE)return;b=!0,window.addEventListener("popstate",function(e){var t=e.state;if(t&&(t.pageName||t.routeName)){var n=t.namespace,r=t.pageModule,i=t.pageName,a=t.parameters,u=t.routeName,c=(0,o.getPageList)()[0],l=c&&c.version.id,f=void 0;switch(l){case"v1":case"v2":f=c.page.pageComponent.getParentPage({root:!0})}s.load({pageRequest:{isPopState:!0,isReplace:!0,namespace:n,pageModule:r,pageName:i,parameters:a,routeName:u,previousPageComponent:f}})}})}(),w=(0,c.initialize)());var l=e.initialPage,f=e.prefetchedPage,d=e.pageComponentExtensions;return w.then(function(){return l?s.load({pageRequest:l,pageComponentExtensions:d},n):f?s.load({prefetchedPage:f,pageComponentExtensions:d},n):(0,r.resolve)()})},t.load=function(e){return s.load(e)},t.getInstanceId=function(){};var a=n(3),s=y(n(23)),u=y(n(2)),c=n(10),l=g(c),f=g(n(4)),d=g(n(18)),h=g(n(7)),p=g(n(35)),v=g(n(15)),m=n(1);function g(e){return e&&e.__esModule?e:{default:e}}function y(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(0,a.extendApi)("events",f.default),(0,a.extendApi)("internal",d.default),(0,a.extendApi)("remote",h.default),(0,a.extendApi)("storage",l.default),(0,a.extendApi)("debug",p.default);t.cache=new v.default;var b=!1;var w=void 0},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.registerPage=function(e,t){if("string"!=typeof e||0===e.length)return;i.indexOf(t)<0&&i.push(t);o[e]=t},t.unregisterPage=function(e){if(e in o){var t=o[e];delete o[e];var n=Object.keys(o).filter(function(e){return o[e]===t}).length;n<1&&i.includes(t)&&r(t)}else i.includes(e)&&(Object.keys(o).filter(function(t){return o[t]===e}).forEach(function(e){return delete o[e]}),r(e));function r(e){i.splice(i.indexOf(e),1)}},t.getPage=function(e){return o[e]},t.getPageList=function(){return i.slice()},t.getPageMap=function(){return r({},o)},t.runInPage=function(e,t){var n=o[e];if(!n)return;return t(n)};var i=[],o={}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=l;var a=n(0),s=n(12);var u="_cls",c="skuid.RemotingStubs";function l(){var e=window.skuid,t=void 0,n=new RegExp("^skuid[.]"),r=l[u],i=void 0,a=(0,s.getObjectProperty)(this,c.replace(n,""))||(0,s.getObjectProperty)(window,c);return r.match(n)?(r=r.replace(n,""),i=(0,s.getObjectProperty)(this,r)||(0,s.getObjectProperty)(e,r)):i=(0,s.getObjectProperty)(window,r),i!==a?(t=a||{},i&&o(t,i)):t=i||a,t}function f(e){l[u]=e}var d=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.remoteImpl=t,this.isRemoteStillValid=n}return r(e,[{key:"isValid",value:function(){return this.isRemoteStillValid()}},{key:"getRemoteImpl",value:function(){return this.remoteImpl}}]),e}();f(c),l.set=f,l.get=function(){return l[u]},l.promisify=function(e,t){var n={escape:!1},r=void 0;"object"===(void 0===t?"undefined":i(t))?((0,a.isUndefined)(i(t.buffer))||(n.buffer=t.buffer),r=t.methodName):r=t;var o=Array.prototype.slice.call(arguments,2);return new Promise(function(t,i){o.push(function(e,n){n.status?t((0,a.parseAsJSONIfString)(e)):i(n.message)}),o.push(n),e[r].apply(null,o)})},l.Provider=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.getFullStoryAnalytics=function(){return f},t.initializeFullStory=function(){return!window[s]&&(f=new d,!0)},t.setFullStoryIdentity=function(e){if(!f||!a.default.hasLocale(e))return;f.identify(e)};var i,o=n(16),a=(i=o)&&i.__esModule?i:{default:i};var s="_fs_namespace",u="_fs_host",c="_fs_script",l="FS_SKUID",f=void 0,d=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e,n,r,i,o,a,f,d,h=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return window._fs_debug=!1,window[u]="fullstory.com",window[c]="edge.fullstory.com/s/fs.js",window._fs_org="GV5X8",h.GLOBAL_PROPERTY=window[s]=l,e=window,n=window.document,r=window[s],i="script",o="user",r in e?e.console&&e.console.log&&e.console.log('FullStory namespace conflict. Please set window["'+s+'"].'):((f=e[r]=function(e,t,n){f.q?f.q.push([e,t,n]):f._api(e,t,n)}).q=[],(a=n.createElement(i)).async=1,a.crossOrigin="anonymous",a.src="https://"+window[c],(d=n.getElementsByTagName(i)[0]).parentNode.insertBefore(a,d),f.identify=function(e,t,n){f(o,{uid:e},n),t&&f(o,t,n)},f.setUserVars=function(e,t){f(o,e,t)},f.event=function(e,t,n){f("event",{n:e,p:t},n)},f.anonymize=function(){f.identify(!1)},f.shutdown=function(){f("rec",!1)},f.restart=function(){f("rec",!0)},f.log=function(e,t){f("log",[e,t])},f.consent=function(e){f("consent",!arguments.length||e)},f.identifyAccount=function(e,t){a="account",(t=t||{}).acctId=e,f(a,t)},f.clearUserCookie=function(){},f._w={},d="XMLHttpRequest",f._w[d]=e[d],d="fetch",f._w[d]=e[d],e[d]&&(e[d]=function(){return f._w[d].apply(this,arguments)}),f._v="1.2.0"),h}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"identify",value:function(e){var t=this;this.analytics&&e&&e.isAuthenticated&&a.default.retrieveUserId(e,function(n){t.setIdentity(n,{email:e.email,displayName:e.name,firstName_str:e.firstName,lastName_str:e.lastName,organizationName_str:e.organizationName,organizationId_str:e.organizationId,language_str:e.language,timeZone_str:e.timeZone,locale_str:e.locale,isSkuidEmployee_bool:a.default.isSkuidEmployee(e.email)})})}},{key:"getCurrentSessionURL",value:function(){return this.analytics.getCurrentSessionURL()}}]),t}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.injectJs=function(e,t){var n=void 0,i=void 0,o=void 0,p=void 0,v=void 0,m=void 0,g=(0,r.Deferred)(),y=g.promise(),b=void 0;(0,r.isString)(e)?n=e:(0,r.isObject)(e)&&(n=e._url||e.src,i=e.attrs,o=e.timeout);t=t||l,(i=i||{}).type||(i.type="application/javascript");if(!n){var w=new Error("You must provide a valid script to load.");return t(w),g.reject(w),y}if(n in d)return d[n];if(!n.startsWith("data:")&&document.querySelectorAll('script[src="'+n+'"]').length)return g.resolve(),f(t,p),y;d[n]=y;p=document.createElement("script"),o=o||a,h()||(p.async=!1);for(m in p.src=n,i)p.setAttribute(m,i[m]);function P(){!v&&function(){var e=p.readyState;if(!e)return!0;if(!/loaded|complete/.test(e))return"uninitialized"===e;var t=e;if(p.children,"loaded"!==t||"loading"!==p.readyState)return!0}()&&(v=1,s(b),f(t,p),g.resolve())}function _(){if(!v){v=1,s(b);var e=new Error("Timeout: "+n);t(e),g.reject(e),p.parentNode&&p.parentNode.removeChild(p)}}b=u(_,o),h()?(p.addEventListener("load",P),p.addEventListener("error",_)):(p.onreadystatechange=p.onload=P,p.onerror=function(){_()});(function(){if(!c||!c.parentNode){var e=document.body.getElementsByTagName("script");(c=e[e.length-1])||(e=document.body.getElementsByTagName("div"),c=e[e.length-1])}})(),c.parentNode?c.parentNode.appendChild(p):document.body.appendChild(p);return y};var r=n(0),i=n(1),o=n(2),a=1e4,s=window.clearTimeout,u=window.setTimeout,c=void 0;function l(){}function f(e,t){t&&(t.onload=t.onreadystatechange=t.onerror=null),e.call(window)}var d={};function h(){return(0,o.getName)()===i.LIGHTNING}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LocalStorage=t.IndexedDB=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.createDb=k,t.getDb=S,t.getDbs=x,t.getVersionedSchemas=E,t.registerVersionedSchemas=O,t.removeDb=T,t.initialize=A;var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(2)),o=l(n(27)),a=l(n(28)),s=l(n(33)),u=n(0),c=n(1);function l(e){return e&&e.__esModule?e:{default:e}}var f="LocalStorage",d="IndexedDB",h="IDBFactory.open() called in an invalid security context",p="top",v={};function m(){var e=new Date;return e.setDate(e.getDate()+7),e.getTime()}function g(){return(0,u.runningTests)()?"SkuidTest":"Skuid"}var y=t.IndexedDB=a.default,b=t.LocalStorage=o.default,w={},P={},_=[{name:"pages",indexes:[{id:"name"},{id:"route"}],expires:!0,expiresDate:m,buildRow:function(e){return r({},e,{id:e.id,name:e.name,data:e.data})}},{name:"queries",expires:!0,expiresDate:m,buildRow:function(e){return r({},e,{id:e.id,data:e.data})}}];function k(e,t,n){var r={},i=function(){return w[e]=c,c},c=void 0;if(n.forEach(function(e){var t=e.name;r[t]=new s.default(t,e)}),t===f)c=new o.default(e,r);else{if(t!==d)return(0,u.reject)("Invalid database type.  Options are 'IndexedDB' and 'LocalStorage'");c=new a.default(e,r)}return c.initialize().then(i).catch(function(t){if(t===h)return(c=new o.default(e,r)).initialize().then(i)})}function S(e){var t=g();return e&&(t+=e),w[t]}function x(){return w}function E(e){return P[e]}function O(e,t){P[e]=t}function T(e){var t=w[e];return t?t.remove().then(function(){delete w[e]}):(0,u.resolve)()}function A(e,t){var n=e||"shared";if(v[n])return v[n];var r=g();return e&&(r+=e),t||e||(t=_),v[n]=k(r,(0,u._oniOS)()&&window.self!==window[p]||i.getName()===c.LIGHTNING?f:d,t)}t.default={createDb:k,getDb:S,getDbs:x,getVersionedSchemas:E,initialize:A,registerVersionedSchemas:O,removeDb:T,IndexedDB:y,LocalStorage:b}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getObjectProperty=function(e,t){if(!e||!t)return;var n=function(e,t){t||(t=".");var n=["\\\\","\\"+t,t];return e.indexOf(".")<0?[e]:e.indexOf("\\")<0?e.split("."):function e(t,n){var r=n[0],i=[],o=[],a=r&&r.substring(1),s=void 0;if(1===n.length)return t.split(r);t.split(r).forEach(function(t){i.push(e(t,n.slice(1,n.length)))});s=i.length;(i||[]).forEach(function(e,t){if(e.length){var n=e.length;(e||[]).forEach(function(e,r){if(r===n-1&&t!==s-1){var u=e+a+i[t+1][0];for(i[t+1].shift();i[t+2]&&!i[t+1].length;)u+=a+i[++t+1][0],i[t+1].shift();o.push(u)}else o.push(e)})}});return o}(e,n)}(t),r=0,i=void 0,o=void 0,a=void 0;for(;r<n.length;){if(i=n[r],!e)return;if(e instanceof Array&&"length"!==i){a=null;try{o=parseInt(i,10)}catch(e){a=e}if((a||isNaN(i))&&e.length){e=e[0];continue}if(o>=0){e=e[o],r++;continue}}e=e[i],r++}return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.getApiManager=f,t.registerApi=function(e,t,n){f(e).registerApiInit(t,n)},t.getApiInit=function(e,t){f(e).getApiInit(t)},t.getRegisteredApis=function e(t){return t?f(t).getList():Object.keys(c).map(function(t){return function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}({},t,e(t))}).reduce(function(e,t){return r(e,t)},{})};var o,a=n(14),s=n(15),u=(o=s)&&o.__esModule?o:{default:o};var c={},l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);if(!(0,a.isValidApiVersion)(t))throw Error("Invalid API Version: "+t);this.inits={},this.cache=new u.default}return i(e,[{key:"getApiInit",value:function(e){var t=this.inits;if(!t.hasOwnProperty(e))throw Error(e+" is not a registerd API");return t[e]}},{key:"getCache",value:function(){return this.cache}},{key:"getList",value:function(){return Object.keys(this.inits)}},{key:"initApi",value:function(e){for(var t=this.getApiInit(e),n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t.apply(void 0,r)}},{key:"isValidApi",value:function(e){return this.inits.hasOwnProperty(e)}},{key:"registerApiInit",value:function(e,t){var n=this.inits;return n.hasOwnProperty(e)||(n[e]=t),this}}]),e}();function f(e){return e in c||(c[e]=new l(e)),c[e]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.apiVersionsArray=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.isValidApiVersion=function(e){return a.default.hasOwnProperty(e)};var i,o=n(22),a=(i=o)&&i.__esModule?i:{default:i};t.apiVersionsArray=Object.keys(a.default).map(function(e){return r({id:e},a.default[e])});t.default=a.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0);var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._cache={},this._subcaches={}}return o(e,[{key:"clear",value:function(e){var t=this._cache,n=Object.keys(t);return e&&(n=n.filter(function(n){return!1!==e(n,t[n])})),n.forEach(function(e){return delete t[e]}),this}},{key:"contains",value:function(e){return e in this._cache}},{key:"createSubCache",value:function(t){var n=this._subcaches;if(n[t]||t in this)throw Error('Invalid sub-cache name: "'+t+'" is invalid or already in use.');var r=n[t]=new e;return this[t]=r.get.bind(r),r}},{key:"delete",value:function(e){var t=this._cache;return e in t&&delete t[e],this}},{key:"get",value:function(e,t,n){var r=this._cache;return e in r?r[e]:(!0===n&&this.set(e,t),t)}},{key:"getSubCache",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this._subcaches;if(!(t in r)&&!0===n)return this.createSubCache(t);if(t in r&&!(r[t]instanceof e))throw Error('Invalid sub-cache name: "'+t+'"');return r[t]}},{key:"getSubCaches",value:function(){var e=this._subcaches;return Object.keys(e).map(function(t){return e[t]})}},{key:"getSubCachesMap",value:function(){return i({},this._subcaches)}},{key:"keys",value:function(){return Object.keys(this._cache)}},{key:"set",value:function(e,t){var n=this._cache;if((0,a.isPlainObject)(e)){var i=e;Object.keys(i).forEach(function(e){return n[e]=i[e]})}else{if(!(0,a.isString)(e))throw Error("Invalid key/dictionary object: "+(void 0===e?"undefined":r(e)));n[e]=t}return this}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=["skuid.com","skuidify.com","skuid.co.uk","skuid.ch"],o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.haveSetUserIdentity=!1}return r(e,[{key:"setIdentity",value:function(e,t){this.analytics&&!this.haveSetUserIdentity&&(t?this.analytics.identify(e,t):this.analytics.identify(e),this.haveSetUserIdentity=!0)}},{key:"analytics",get:function(){return window[this.GLOBAL_PROPERTY]}}],[{key:"hasLocale",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en";return e&&e.locale&&e.locale.startsWith(t)}},{key:"isSkuidEmployee",value:function(e){var t=e?e.split("@"):null;return t&&2===t.length&&(t=t[1]),!!t&&i.includes(t)}},{key:"retrieveUserId",value:function(t,n){window.crypto&&window.crypto.subtle&&window.TextEncoder&&window.Uint8Array?window.crypto.subtle.digest("SHA-256",(new window.TextEncoder).encode(t.email)).then(function(t){n(e.hexString(t))}):n(t.userId)}},{key:"hexString",value:function(e){var t=new window.Uint8Array(e);return[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t)).map(function(e){return e.toString(16).padStart(2,"0")}).join("")}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.getHeapAnalytics=function(){return u},t.initializeHeapAnalytics=function(e){return!window.heap&&(u=new c(e),!0)},t.setHeapAnalyticsIdentity=function(e){if(!u||!i.default.hasLocale(e))return;u.identify(e),(0,a.default)(u)};var i=s(n(16)),o=n(8),a=s(n(24));function s(e){return e&&e.__esModule?e:{default:e}}var u=void 0,c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n.GLOBAL_PROPERTY="heap";var r=window.heap=window.heap||[];return r.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var n=t.forceSSL||"https:"===document.location.protocol,i=document.createElement("script");i.type="application/javascript",i.async=!0,i.src=(n?"https:":"http:")+"//cdn.heapanalytics.com/js/heap-"+e+".js";var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(i,o);for(var a=function(e){return function(){r.push([e].concat(Array.prototype.slice.call(arguments,0)))}},s=["addEventProperties","addUserProperties","clearEventProperties","identify","resetIdentity","removeEventProperty","setEventProperties","track","unsetEventProperty"],u=0;u<s.length;u++)r[s[u]]=a(s[u])},r.load(e),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),r(t,[{key:"identify",value:function(e){var t=this;this.analytics&&e&&e.isAuthenticated&&i.default.retrieveUserId(e,function(n){t.analytics.resetIdentity(),t.setIdentity(n),t.analytics.addUserProperties({email:e.email,"First Name":e.firstName,"Last Name":e.lastName,isSkuidEmployee:i.default.isSkuidEmployee(e.email)})})}},{key:"addEventProperties",value:function(e){this.analytics&&this.analytics.addEventProperties(e)}},{key:"track",value:function(e,t){this.analytics&&this.analytics.track(e,t)}}]),t}();window._fs_ready=function(){var e=(0,o.getFullStoryAnalytics)();if(e){var t=e.getCurrentSessionURL();u.addEventProperties({"FullStory Session":t})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),i=n(17);t.default={fs:{setIdentity:r.setFullStoryIdentity},ha:{setIdentity:i.setHeapAnalyticsIdentity}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canUseSessionStorage=function(){return r("sessionStorage")},t.canUseLocalStorage=function(){return r("localStorage")};var r=function(e){var t=!1;try{var n=window[e];n.setItem&&n.removeItem&&n.getItem&&(t=!0)}catch(e){}return t}},function(e,t,n){"use strict";n.r(t);n(21);var r=n(5);for(var i in r)"default"!==i&&function(e){n.d(t,e,function(){return r[e]})}(i)},function(e,t,n){"use strict";var r,i,o,a,s,u,c,l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f="Array",d="String",h="prototype";function p(){return window[f][h]}function v(){return window[d][h]}Array.prototype.find||Object.defineProperty(p(),"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var r=arguments[1],i=0;i<n;){var o=t[i];if(e.call(r,o,i,t))return o;i++}},configurable:!0,writable:!0}),Array[h].findIndex||Object.defineProperty(p(),"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var r=arguments[1],i=0;i<n;){var o=t[i];if(e.call(r,o,i,t))return i;i++}return-1},configurable:!0,writable:!0}),Array.from||(Array.from=(r=Object.prototype.toString,i=function(e){return"function"==typeof e||"[object Function]"===r.call(e)},o=Math.pow(2,53)-1,a=function(e){var t=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t}(e);return Math.min(Math.max(t,0),o)},function(e){var t=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var n,r=arguments.length>1?arguments[1]:void 0;if(void 0!==r){if(!i(r))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(n=arguments[2])}for(var o,s=a(t.length),u=i(this)?Object(new this(s)):new Array(s),c=0;c<s;)o=t[c],u[c]=r?void 0===n?r(o,c):r.call(n,o,c):o,c+=1;return u.length=s,u})),Array[h].includes||Object.defineProperty(p(),"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),r=n.length>>>0;if(0===r)return!1;var i,o,a=0|t,s=Math.max(a>=0?a:r-Math.abs(a),0);for(;s<r;){if((i=n[s])===(o=e)||"number"==typeof i&&"number"==typeof o&&isNaN(i)&&isNaN(o))return!0;s++}return!1}}),String.prototype.includes||Object.defineProperty(v(),"includes",{value:function(e,t){return"number"!=typeof t&&(t=0),!(t+e.length>this.length)&&-1!==this.indexOf(e,t)}}),String.prototype.startsWith||(v().startsWith=function(e,t){return this.substr(!t||t<0?0:+t,e.length)===e}),s="Promise",u=window,c=function(){var e,t,n,r=Object.prototype.toString,i=setTimeout;try{Object.defineProperty({},"x",{}),e=function(e,t,n,r){return Object.defineProperty(e,t,{value:n,writable:!0,configurable:!1!==r})}}catch(t){e=function(e,t,n){return e[t]=n,e}}function o(e,r){n.add(e,r),t||(t=i(n.drain))}function a(e){var t,n=void 0===e?"undefined":l(e);return null==e||"object"!=n&&"function"!=n||(t=e.then),"function"==typeof t&&t}function s(){for(var e=0;e<this.chain.length;e++)u(this,1===this.state?this.chain[e].success:this.chain[e].failure,this.chain[e]);this.chain.length=0}function u(e,t,n){var r,i;try{!1===t?n.reject(e.msg):(r=!0===t?e.msg:t.call(void 0,e.msg))===n.promise?n.reject(TypeError("Promise-chain cycle")):(i=a(r))?i.call(r,n.resolve,n.reject):n.resolve(r)}catch(e){n.reject(e)}}function c(e){var t=this;t.triggered||(t.triggered=!0,t.def&&(t=t.def),t.msg=e,t.state=2,t.chain.length>0&&o(s,t))}function f(e,t,n,r){for(var i=0;i<t.length;i++)!function(i){e.resolve(t[i]).then(function(e){n(i,e)},r)}(i)}function d(e){this.def=e,this.triggered=!1}function h(e){if("function"!=typeof e)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var t=new function(e){this.promise=e,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}(this);this.then=function(e,n){var r={success:"function"!=typeof e||e,failure:"function"==typeof n&&n};return r.promise=new this.constructor(function(e,t){if("function"!=typeof e||"function"!=typeof t)throw TypeError("Not a function");r.resolve=e,r.reject=t}),t.chain.push(r),0!==t.state&&o(s,t),r.promise},this.catch=function(e){return this.then(void 0,e)};try{e.call(void 0,function(e){(function e(t){var n,r=this;if(!r.triggered){r.triggered=!0,r.def&&(r=r.def);try{(n=a(t))?o(function(){var i=new d(r);try{n.call(t,function(){e.apply(i,arguments)},function(){c.apply(i,arguments)})}catch(e){c.call(i,e)}}):(r.msg=t,r.state=1,r.chain.length>0&&o(s,r))}catch(e){c.call(new d(r),e)}}}).call(t,e)},function(e){c.call(t,e)})}catch(e){c.call(t,e)}}n=function(){var e,n,r;return{add:function(t,i){r=new function(e,t){this.fn=e,this.self=t,this.next=void 0}(t,i),n?n.next=r:e=r,n=r,r=void 0},drain:function(){var r=e;for(e=n=t=void 0;r;)r.fn.call(r.self),r=r.next}}}();var p=e({},"constructor",h,!1);return h.prototype=p,e(p,"__NPO__",0,!1),e(h,"resolve",function(e){return e&&"object"==(void 0===e?"undefined":l(e))&&1===e.__NPO__?e:new this(function(t,n){if("function"!=typeof t||"function"!=typeof n)throw TypeError("Not a function");t(e)})}),e(h,"reject",function(e){return new this(function(t,n){if("function"!=typeof t||"function"!=typeof n)throw TypeError("Not a function");n(e)})}),e(h,"all",function(e){var t=this;return"[object Array]"!=r.call(e)?t.reject(TypeError("Not an array")):0===e.length?t.resolve([]):new t(function(n,r){if("function"!=typeof n||"function"!=typeof r)throw TypeError("Not a function");var i=e.length,o=Array(i),a=0;f(t,e,function(e,t){o[e]=t,++a===i&&n(o)},r)})}),e(h,"race",function(e){var t=this;return"[object Array]"!=r.call(e)?t.reject(TypeError("Not an array")):new t(function(n,r){if("function"!=typeof n||"function"!=typeof r)throw TypeError("Not a function");f(t,e,function(e,t){n(t)},r)})}),h},u[s]||(u[s]=c()),function(e){try{return new MouseEvent("test"),!1}catch(e){}var t=function(t,n){n=n||{bubbles:!1,cancelable:!1};var r=document.createEvent("MouseEvent");return r.initMouseEvent(t,n.bubbles,n.cancelable,e,0,n.screenX||0,n.screenY||0,n.clientX||0,n.clientY||0,n.ctrlKey||!1,n.altKey||!1,n.shiftKey||!1,n.metaKey||!1,n.button||0,n.relatedTarget||null),r};t.prototype=Event.prototype,e.MouseEvent=t}(window)},function(e){e.exports={v1:{id:"v1",isLegacy:!0,isLatest:!0,path:"v1",released:!0},v2:{id:"v2",path:"next",released:!1}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.initialize=function(e){_||(_=new P(e))},t.load=function(e,t){if(!_)throw Error("Loader must be initialized before calling load");return _.load(e,t)};var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(2)),a=d(n(25)),s=d(n(26)),u=n(10),c=n(0),l=n(5);n(34);var f=n(9);function d(e){return e&&e.__esModule?e:{default:e}}var h="v1",p="v2",v={v1:a.default,v2:s.default},m="pageService",g=["features","intercom","organizationInfo","runningUserInfo"];function y(e){var t=(0,u.getDb)();if(!t)return(0,c.resolve)();var n=t.getTable("pages");return n.each(function(t){if(t.modstamp!==e[m])return t}).then(function(e){return function(e,t){return Promise.all(t.map(function(t){return e.remove(t[e.getPrimaryKey().id])}))}(n,e)})}function b(e){return!e._isOffline&&!o.preferLoaderServiceCache()}function w(e,t,n){return t&&!(0,c.isUndefined)(n)&&(e._isOffline||t.modstamp===n)}var P=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t.legacyAPIVersion,r=t.latestAPIVersion;this._legacyAPIVersion=n||h,this._latestAPIVersion=r||p,this._pagesBeingReplaced=new WeakMap,this._isOffline=!1}return i(e,[{key:"getAPI",value:function(e){var t=v[e];return t?t():(0,c.reject)("No loader found for "+e)}},{key:"getLoaderServiceResult",value:function(e,t,n,r){var i=this,a=e+(r?"."+r:""),s=l.cache.get(t);if(s)return(0,c.resolve)(s);var f=function(e){if(e){l.cache.set(t,e);var r=(0,u.getDb)();r&&r.getTable("queries").add(a,{data:e,modstamp:n})}return e},d=function(){return o[e](n,r).then(f)};return b(i)?d():(0,u.getDb)().getTable("queries").get(a).then(function(e){return w(i,e,n)?(f(e.data),e.data):i._isOffline?void 0:d()})}},{key:"cacheMetaServiceDataForOffline",value:function(){var e=this;if((0,u.getDb)()){var t=(0,u.getDb)();if(t){var n=t.getTable("queries");n&&g.forEach(function(t){var r=e.getMetaServiceCachePortionName(t);n.add(r,{data:l.cache.get(r),modstamp:(new Date).getTime()})})}}}},{key:"getMetaServiceCachePortionName",value:function(e){return"metaService."+e}},{key:"getMetaServiceInfo",value:function(e){var t=this,n=function(e,n){l.cache.set(t.getMetaServiceCachePortionName(e),n)},r={};if(g.forEach(function(i){if(e&&e[i]){var o=e[i];"runningUserInfo"===i&&(o=JSON.parse(atob(o))),n(i,o)}else l.cache.contains(t.getMetaServiceCachePortionName(i))||(r[i]={})}),!Object.keys(r).length)return(0,c.resolve)();if(this._isOffline){var i=(0,u.getDb)().getTable("queries");return Promise.all(g.map(function(e){return i.get(t.getMetaServiceCachePortionName(e))})).then(function(e){e.length&&e.forEach(function(e,t){e&&n(g[t],e)})})}return o.meta(r).then(function(e){return Object.keys(e).forEach(function(t){return n(t,e[t])})})}},{key:"load",value:function(e,t){var n=this,i=this,a=(new Date).getTime(),s=function(e){return j&&j[e]||a},f=e.pageRequest,d=void 0===f?e:f,h=e.prefetchedPage,p=e.isSecondTry,v=void 0!==p&&p,g=(t||{}).preload,P=d.parameters||{},_=d.namespace,k=void 0===_?P.namespace:_,S=d.pageModule,x=void 0===S?P.module||k:S,E=d.pageName,O=void 0===E?P.page:E,T=d.routeName,A=d.serviceModstamps,j=void 0===A?l.cache.get("loader.serviceModstamps"):A,C=d.serviceResponses,I="page."+(h?h.metadata.pageName:O||T),N=C?C.meta:null,D=[],R=void 0,M=i._pagesBeingReplaced,L=void 0,U=void 0,F=d.previousPageComponent,q=new c.Deferred;if(F){if(M.get(F)){var V=M.get(F);return V.followingLoad={args:e,options:t},V.pagePromise}M.set(F,{pageRequest:d,followingLoad:void 0,pagePromise:q.promise()})}return D.push(i.getMetaServiceInfo(N).then(function(){return i.getLoaderServiceResult("dataSources","loader.dataSources",s("dataSourceService"),l.cache.get(n.getMetaServiceCachePortionName("runningUserInfo")).profileId||"public")})),(j?(0,c.resolve)(j):i._isOffline?(0,u.getDb)().getTable("queries").get("serviceModstamps").then(function(e){return e&&e.data}):o.serviceModstamps(j)).then(function(e){if(e&&(j=e,l.cache.set("loader.serviceModstamps",j)),D.push(i.getLoaderServiceResult("settings","loader.siteSettings",s("settingsService")).then(function(e){(U=e)&&U.offline&&U.offline.enabled&&i.cacheMetaServiceDataForOffline()}),i.getLoaderServiceResult("files","loader.files",s("fileService"))),h)return h;if(l.cache.contains(I))return l.cache.get(I);if(b(i))return o.page(O,x,T,s(m));var t=void 0,n=void 0;return O?(t="name",n=O):(t="route",n=T),(0,u.getDb)().getTable("pages").get(n,t).then(function(e){return w(i,e,s(m))?e.data:i._isOffline?void 0:o.page(O,x,T,s(m))})}).then(function(e){var t=e&&e.metadata;if(!(t&&(t.pageId||t.pageName)))throw Error('Could not find Skuid Page named "'+O+'"');return l.cache.set(I,{xml:e.xml,metadata:t}),R=t?t.pageAPIVersion||i._legacyAPIVersion:i._latestAPIVersion,L=e,Promise.all(D)}).then(function(){return i.getAPI(R)}).then(function(e){return o.preload(e),g&&(0,c.isFunction)(g)?Promise.resolve(g(e)).then(function(){return e}):e}).then(function(t){if(!i._isOffline){var n=(0,u.getDb)();if(n)for(var o in n.getTable("pages").add(L.metadata.pageName,{name:O,route:T,data:L,modstamp:s(m)}),n.getTable("queries").add("serviceModstamps",{data:j}),n.getTables())n.getTable(o).clean()}if(i._isOffline&&t.offline.setState("disconnected"),U.offline&&U.offline.enabled||y(j),F){var a=M.get(F);if(a.followingLoad){var c=a.followingLoad;return M.delete(F),i.load(c.args,c.options).then(function(e){return q.resolve(e),e})}}return t.loader.load(r({pageRequest:d,pageResponse:L,serviceModstamps:j,settings:U},e)).then(function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var o={pageAPI:t,versionedPageAPILoadResults:n};if(!F)return o;var a=M.get(F);if(M.delete(F),a.followingLoad){var s=a.followingLoad;return s.args.pageRequest.previousPageComponent=n[0],i.load(s.args,s.options).then(function(e){return q.resolve(e),e})}return o})}).catch(function(t){M.delete(F);var n=function(){throw q.reject(t||Error("Unknown error")),t||Error("Unknown error")};if(!t||"Load terminated"!==t.message)return v&&n(),o.checkNetwork().then(function(){n()},function(){return i._isOffline=!0,e.secondTry=!0,i.load(e)})})}}]),e}(),_=void 0;var k=window.Sfdc,S=window.sforce;k&&k.xdomain&&window.location.hostname.search(/\.visual\.?force\.com/)>-1&&(0,f.injectJs)(S._consoleApiUrl="/support/console/42.0/integration.js")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e)throw new Error("Failed to initialize builder event subscriptions, no class provided");var t=function(t,n){e.track(t,n)};o.default.subscribe("analytics.track",function(e){e.reportTo&&!e.reportTo.heap||t(e.eventName,e.data)}),o.default.subscribe("heap.track",function(e){return t(e.eventName,e.data)})};var r,i=n(4),o=(r=i)&&r.__esModule?r:{default:r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=(s(e={},o.NATIVE,["vendor.js","skuidReqs.js","skuidPlatform.js"]),s(e,o.VISUALFORCE,["vendor.js","skuidReqs.js","visualforcePlatform.js"]),s(e,o.LIGHTNING,["vendor.js","skuidReqs.js","lightningPlatform.js"]),s(e,o.CORDOVA,["vendor.js","skuidReqs.js","cordovaPlatform.js"]),s(e,o.LOCAL,[]),e),n=(0,a.getPlatformVariables)();return Object.keys(n||{}).forEach(function(e){e in window.skuid||(window.skuid[e]=n[e])}),Promise.resolve(t[r.getName()].map(function(e){return r.getResourceUrl({apiVersion:"v1",name:e})}).reduce(function(e,t){return e.then(function(){return u[t]?Promise.resolve():(0,i.injectJs)(t).then(function(){return u[t]=!0})})},Promise.resolve())).then(function(){return window.skuid})};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(2)),i=n(9),o=n(1),a=n(3);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u={}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(){var e=k[o.getName()],t=e.version,n=e.page.map(function(e){return{name:e,scope:"page"}});return _.versionScopedAssetsLoaded||(0,v.mergeArrays)(n,t.map(function(e){return{name:e,scope:"version"}})),Promise.all(n.map(function(e){var t=e.name,n=e.scope;if(t in w)return w[t];var r=o.getResourceUrl({name:t+".js",apiVersion:b});return w[t]=(0,a.injectJs)(r).then(function(){return{name:t,url:r,scope:n}})})).then(function(e){var t=new x;return _.versionScopedAssetsLoaded=!0,h.default.publish("page.beforeLoad",[t]),e.filter(function(e){return"page"===e.scope}).forEach(function(e){var n=e.name;return P.initApi(n,t)}),t})};var o=g(n(2)),a=n(9),s=n(1),u=n(13),c=n(3),l=m(n(18)),f=g(n(10)),d=m(n(7)),h=m(n(4)),p=n(6),v=n(0);function m(e){return e&&e.__esModule?e:{default:e}}function g(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b="v2",w={},P=(0,u.getApiManager)(b),_={versionScopedAssetsLoaded:!1},k=(y(r={},s.NATIVE,{version:["versionScoped"],page:["skuidReqs","skuidPlatform"]}),y(r,s.VISUALFORCE,{version:["versionScoped"],page:["skuidReqs","visualforcePlatform"]}),y(r,s.LIGHTNING,{version:["versionScoped"],page:["skuidReqs","lightningPlatform"]}),y(r,s.LOCAL,{version:["versionScoped"],page:["skuidReqs","testPlatform"]}),y(r,s.CORDOVA,{version:["versionScoped"],page:["skuidReqs","cordovaPlatform"]}),r),S={},x=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var t=this,n=(0,v.generateUniqueId)({prefix:"v2-instance"});i(t,{utils:{userInfo:{}},platform:{}},(0,c.getPlatformVariables)(),{internal:l.default,remote:d.default,storage:f},{runtime:i({_initedApis:{},initApi:function(e){var n=this._initedApis;return e in n||(n[e]=P.initApi(e,t)),n[e]},tryInitApi:function(e){return P.isValidApi(e)?this.initApi(e):Promise.resolve()}},(0,c.getPublicApi)("runtime"),{getInstanceId:function(){return n},registerPage:function(e){(0,p.registerPage)(e,t)},unregisterPage:function(){(0,p.unregisterPage)(t)}},{themes:{componentStylesCache:S}}),cache:P.getCache()})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t,n){var r=window.localStorage,o=e+":"+t,a=JSON.parse(r.getItem(o)),s=n(a);return r.setItem(o,JSON.stringify(a)),(0,i.resolve)(s)}var s=function(){function e(t){o(this,e);var n=(t=t||{}).schema;this.name=t.tableName,this.databaseName=t.databaseName,this.isDefault=t.isDefault,this.schema=n,n.buildRow&&(this.buildRow=n.buildRow),this.primaryKey=n.primaryKey,this.indexes=n.indexes}return r(e,[{key:"get",value:function(e,t){return e?((0,i.isObject)(e)&&this.schema.buildIdField&&(e=this.schema.buildIdField(e)),a(this.databaseName,this.name,function(n){if((0,i.size)(n)){if(!t)return n[e];for(var r in n){var o=n[r];if(o[t]===e)return o}}})):(0,i.reject)()}},{key:"add",value:function(e,t){var n=this.schema,r=this.getPrimaryKey().id,o={};return t&&(e||n.buildIdField)?(e||(e=n.buildIdField(t)),t=n.buildRow?n.buildRow(t):t,n.expires&&(0,i.isUndefined)(t.expires)&&(n.expiresDate?t.expires=n.expiresDate():t.expires=-1),t[r]=e,delete(o=t.alreadyTransferable?t:(0,i._makeTransferrable)(t)).alreadyTransferable,a(this.databaseName,this.name,function(e){var t=o[r];return e[t]=o,e[t]})):(0,i.reject)()}},{key:"remove",value:function(e){return e?a(this.databaseName,this.name,function(t){return delete t[e],e}):(0,i.reject)()}},{key:"clear",value:function(){return a(this.databaseName,this.name,function(e){return{}})}},{key:"all",value:function(){return a(this.databaseName,this.name,function(e){var t=[];for(var n in e){var r=e[n];t.push(r)}return t})}},{key:"each",value:function(e){return a(this.databaseName,this.name,function(t){for(var n=[],r=0;r<t.length;r++){var i=t[r],o=e(i);o&&n.push(o)}return n})}},{key:"clean",value:function(){var e=this,t=(new Date).getTime();return e.each(function(e){if((0!==e.expires||-1!==e.expires)&&e.expires<t)return e}).then(function(t){return Promise.all(t.map(function(t){return e.remove(t[e.getPrimaryKey().id])}))})}},{key:"getPrimaryKey",value:function(){return this.primaryKey}},{key:"getIndexes",value:function(){return this.indexes}}]),e}(),u=function(){function e(t,n){o(this,e);for(var r in n){n[r].isDefault&&(this.defaultTableName=r)}this.hasInitialized=!1,this.name=t,this.schema=n,this.tables={}}return r(e,[{key:"getName",value:function(){return this.name}},{key:"getSchema",value:function(){return this.schema}},{key:"initialize",value:function(){var e=window.localStorage,t=this.name,n=this.schema;for(var r in n){var o=t+":"+r,a=e.getItem(o);a&&"{}"!==a?e.setItem(o,a):e.setItem(o,"{}")}for(var u in n){var c=n[u];this[u]=this.tables[u]=new s({table:c,tableName:u,databaseName:t,isDefault:u===this.defaultTableName,schema:c})}return this.hasInitialized=!0,(0,i.resolve)(this)}},{key:"getTable",value:function(e){var t=this.tables[e];return t||this.tables[this.defaultTableName]}},{key:"getTables",value:function(){return this.tables}},{key:"remove",value:function(){for(var e=this.getName(),t=this.getTables(),n=0;n<t.length;n++){var r=t[n];localStorage.removeItem(e+":"+r.name)}return(0,i.resolve)()}}]),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=s(n(29)),o=s(n(4)),a=n(0);function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c="IDBFactory.open() called in an invalid security context",l=function(e,t,n){return function(r){if(r&&r.message&&r.message.includes("Failed to read large IndexedDB value")){var i=e.databaseName,o=e.name;return console.warn("Recovering the corrupted '"+o+"' table in the '"+i+"' IndexedDB."),t.table(o).clear().then(n)}throw r}},f={};var d=function(){function e(t){u(this,e);var n=(t=t||{}).schema;this.name=t.tableName,this.databaseName=t.databaseName,this.isDefault=t.isDefault,this.schema=n,n.buildRow&&(this.buildRow=n.buildRow),this.primaryKey=n.primaryKey,this.indexes=n.indexes}return r(e,[{key:"get",value:function(e,t){var n=f[this.databaseName],r=this.getPrimaryKey().id;return e?((0,a.isObject)(e)&&this.schema.buildIdField&&(e=this.schema.buildIdField(e)),n.open(),n.table(this.name).where(t||r).equals(e).first().catch(l(this,n,function(){}))):(0,a.reject)()}},{key:"add",value:function(e,t){var n=this,r=n.schema,i=f[n.databaseName],o=n.getPrimaryKey().id,s={};return t&&(e||r.buildIdField)?(e||(e=r.buildIdField(t)),t=r.buildRow?r.buildRow(t):t,r.expires&&(0,a.isUndefined)(t.expires)&&(r.expiresDate?t.expires=r.expiresDate():t.expires=-1),t[o]=e,delete(s=t.alreadyTransferable?t:(0,a._makeTransferrable)(t)).alreadyTransferable,i.open(),i.table(n.name).put(s).catch(l(this,i,function(){return i.table(n.name).put(s)})).then(function(){return s})):(0,a.reject)()}},{key:"remove",value:function(e){var t=f[this.databaseName],n=this.getPrimaryKey().id;return e?(t.open(),t.table(this.name).where(n).equals(e).delete().catch(l(this,t)).then(function(){return e})):(0,a.reject)()}},{key:"clear",value:function(){var e=f[this.databaseName];return e.open(),e.table(this.name).clear()}},{key:"all",value:function(){var e=f[this.databaseName];return e.open(),e.table(this.name).toArray().catch(l(this,e,function(){return[]}))}},{key:"each",value:function(e){var t=f[this.databaseName],n=[],r=!1;return t.open(),t.table(this.name).each(function(t){r=!0;var i=e(t);(0,a.isUndefined)(i)||n.push(i)}).then(function(){return n}).catch(l(this,t,function(){if(r)throw Error("Internal error interrupted the cursor: unable to complete iteration");return[]}))}},{key:"clean",value:function(){var e=this,t=(new Date).getTime();return e.each(function(e){if((0!==e.expires||-1!==e.expires)&&e.expires<t)return e}).then(function(t){return Promise.all(t.map(function(t){return e.remove(t[e.getPrimaryKey().id])}))})}},{key:"getPrimaryKey",value:function(){return this.primaryKey}},{key:"getIndexes",value:function(){return this.indexes}}]),e}(),h=function(){function e(t,n){u(this,e);for(var r in n){n[r].isDefault&&(this.defaultTableName=r)}this.hasInitialized=!1,this.name=t,this.schema=n,this.tables={}}return r(e,[{key:"getName",value:function(){return this.name}},{key:"getSchema",value:function(){return this.schema}},{key:"initialize",value:function(){var e=this,t=(0,a.Deferred)(),n=e.name,r=e.schema,o={},s=new i.default(n);return s.open().then(function(){var n=s.tables,o=(0,a.keyBy)(n,"name"),u=!1;for(var c in r)if(!o[c]){u=!0;break}if(!u)for(var l=0;l<n.length;l++){var f=n[l],d=f.name,h=f.schema,p=r[d];if(!p){u=!0;break}if(0===(0,a.size)(p.indexes)&&h.indexes.length>0){u=!0;break}if((0,a.size)(p.indexes)>0&&0===h.indexes.length){u=!0;break}if(h.primKey.name!==p.primaryKey.id){u=!0;break}if(h.indexes.length)for(var v=function(e){var t=h.indexes[e];-1===p.indexes.findIndex(function(e){return t.name===e.id})&&(u=!0)},m=0;m<h.indexes.length;m++)v(m);if(p.indexes.length){var g=function(e){var t=p.indexes[e];-1===h.indexes.findIndex(function(e){return t.id===e.name})&&(u=!0)};for(m=0;m<p.indexes.length;m++)g(m)}if(u)break}u?function(e,t){var n={},r=t.schema,o=e.tables.map(function(e){return e.toArray().then(function(t){n[e.name]=t})});return Promise.all(o).then(function(){return e.delete()}).then(function(){var n=Object.keys(r).reduce(function(e,t){var n=r[t],i=n.indexes,o=n.primaryKey.id,a=void 0;return i&&i.length&&(a=i.map(function(e){return e.id}).join(",")),a&&(o+=","+a),e[t]=o,e},{});return(e=new i.default(t.name)).version(.1).stores(n),e.open()}).then(function(){var t=[];return(0,a.each)(e.tables,function(i,o){var s=(0,a.Deferred)(),u=n[o.name],c=o.name;if(t.push(s.promise()),u&&u.length){var l=r[c],f=l?l.indexes:null;f&&f.length&&(0,a.each)(f,function(e,t){var n=t.id;(0,a.each)(u,function(e,r){r[n]||(r[n]=t.defaultValue)})}),e.table(c).bulkAdd(u).then(function(){s.resolve()})}else s.resolve()}),Promise.all(t)}).then(function(){return e})}(s,e).then(function(e){s=e,t.resolve()}):t.resolve()}).catch(function(i){if(["Database "+n+" doesnt exist","UnknownError"].includes(i.message)){for(var a in e.version=1,r){var u=r[a],l=u.primaryKey.id,f=void 0;u.indexes&&(f=u.indexes.map(function(e){return e.id}).join(",")),o[a]=l,f&&(o[a]+=","+f)}s.version(.1).stores(o),s.open().then(function(){t.resolve()}).catch(function(e){t.reject("Open failed: "+e.message)})}else[c].includes(i.message)?t.reject(i.message):t.reject("Database creation failed: "+i.message)}),t.then(function(){f[n]=s;for(var t=0;t<s.tables.length;t++){var r=s.tables[t];e[r.name]=e.tables[r.name]=new d({table:r,tableName:r.name,databaseName:s.name,isDefault:r.name===e.defaultTableName,schema:e.schema[r.name]})}return e.hasInitialized=!0,e})}},{key:"getTable",value:function(e){var t=this.tables[e];return t||this.tables[this.defaultTableName]}},{key:"getTables",value:function(){return this.tables}},{key:"remove",value:function(){var e=this.getName(),t=f[e];return t?t.delete().then(function(){delete f[e]}):(0,a.resolve)()}}]),e}();t.default=h,o.default.subscribe("skuid.shared.test.getdexiedb",function(e){e.db=f[e.name]})},function(e,t,n){(function(t,n){var r;r=function(){"use strict";var e=Object.keys,r=Array.isArray,i="undefined"!=typeof self?self:"undefined"!=typeof window?window:t;function o(t,n){return"object"!=typeof n?t:(e(n).forEach(function(e){t[e]=n[e]}),t)}var a=Object.getPrototypeOf,s={}.hasOwnProperty;function u(e,t){return s.call(e,t)}function c(t,n){"function"==typeof n&&(n=n(a(t))),e(n).forEach(function(e){f(t,e,n[e])})}var l=Object.defineProperty;function f(e,t,n,r){l(e,t,o(n&&u(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function d(e){return{from:function(t){return e.prototype=Object.create(t.prototype),f(e.prototype,"constructor",e),{extend:c.bind(null,e.prototype)}}}}var h=Object.getOwnPropertyDescriptor;var p=[].slice;function v(e,t,n){return p.call(e,t,n)}function m(e,t){return t(e)}function g(e){if(!e)throw new Error("Assertion Failed")}function y(e){i.setImmediate?n(e):setTimeout(e,0)}function b(e,t){return e.reduce(function(e,n,r){var i=t(n,r);return i&&(e[i[0]]=i[1]),e},{})}function w(e,t){return function(){try{e.apply(this,arguments)}catch(e){t(e)}}}function P(e,t,n){try{e.apply(null,n)}catch(e){t&&t(e)}}function _(e,t){if(u(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],r=0,i=t.length;r<i;++r){var o=_(e,t[r]);n.push(o)}return n}var a=t.indexOf(".");if(-1!==a){var s=e[t.substr(0,a)];return void 0===s?void 0:_(s,t.substr(a+1))}}function k(e,t,n){if(e&&void 0!==t&&!("isFrozen"in Object&&Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){g("string"!=typeof n&&"length"in n);for(var r=0,i=t.length;r<i;++r)k(e,t[r],n[r])}else{var o=t.indexOf(".");if(-1!==o){var a=t.substr(0,o),s=t.substr(o+1);if(""===s)void 0===n?delete e[a]:e[a]=n;else{var u=e[a];u||(u=e[a]={}),k(u,s,n)}}else void 0===n?delete e[t]:e[t]=n}}function S(e){var t={};for(var n in e)u(e,n)&&(t[n]=e[n]);return t}var x=[].concat;function E(e){return x.apply([],e)}var O="Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer,DataView,Uint8ClampedArray,ImageData,Map,Set".split(",").concat(E([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return i[e]}).map(function(e){return i[e]});function T(e){if(!e||"object"!=typeof e)return e;var t;if(r(e)){t=[];for(var n=0,i=e.length;n<i;++n)t.push(T(e[n]))}else if(O.indexOf(e.constructor)>=0)t=e;else for(var o in t=e.constructor?Object.create(e.constructor.prototype):{},e)u(e,o)&&(t[o]=T(e[o]));return t}function A(t,n,r,i){return r=r||{},i=i||"",e(t).forEach(function(e){if(u(n,e)){var o=t[e],a=n[e];"object"==typeof o&&"object"==typeof a&&o&&a&&""+o.constructor==""+a.constructor?A(o,a,r,i+e+"."):o!==a&&(r[i+e]=n[e])}else r[i+e]=void 0}),e(n).forEach(function(e){u(t,e)||(r[i+e]=n[e])}),r}var j="undefined"!=typeof Symbol&&Symbol.iterator,C=j?function(e){var t;return null!=e&&(t=e[j])&&t.apply(e)}:function(){return null},I={};function N(e){var t,n,i,o;if(1===arguments.length){if(r(e))return e.slice();if(this===I&&"string"==typeof e)return[e];if(o=C(e)){for(n=[];!(i=o.next()).done;)n.push(i.value);return n}if(null==e)return[e];if("number"==typeof(t=e.length)){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var D="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function R(e,t){D=e,M=t}var M=function(){return!0},L=!new Error("").stack;function U(){if(L)try{throw U.arguments,new Error}catch(e){return e}return new Error}function F(e,t){var n=e.stack;return n?(t=t||0,0===n.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),n.split("\n").slice(t).filter(M).map(function(e){return"\n"+e}).join("")):""}var q=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],V=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(q),B={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};function H(e,t){this._e=U(),this.name=e,this.message=t}function X(e,t,n,r){this._e=U(),this.failures=t,this.failedKeys=r,this.successCount=n}function K(e,t){this._e=U(),this.name="BulkError",this.failures=t,this.message=function(e,t){return e+". Errors: "+t.map(function(e){return e.toString()}).filter(function(e,t,n){return n.indexOf(e)===t}).join("\n")}(e,t)}d(H).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+F(this._e,2))}},toString:function(){return this.name+": "+this.message}}),d(X).from(H),d(K).from(H);var z=V.reduce(function(e,t){return e[t]=t+"Error",e},{}),G=H,W=V.reduce(function(e,t){var n=t+"Error";function r(e,r){this._e=U(),this.name=n,e?"string"==typeof e?(this.message=e,this.inner=r||null):"object"==typeof e&&(this.message=e.name+" "+e.message,this.inner=e):(this.message=B[t]||n,this.inner=null)}return d(r).from(G),e[t]=r,e},{});W.Syntax=SyntaxError,W.Type=TypeError,W.Range=RangeError;var Q=q.reduce(function(e,t){return e[t+"Error"]=W[t],e},{});var Y=V.reduce(function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=W[t]),e},{});function J(){}function Z(e){return e}function $(e,t){return null==e||e===Z?t:function(n){return t(e(n))}}function ee(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function te(e,t){return e===J?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?ee(r,this.onsuccess):r),i&&(this.onerror=this.onerror?ee(i,this.onerror):i),void 0!==o?o:n}}function ne(e,t){return e===J?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?ee(n,this.onsuccess):n),r&&(this.onerror=this.onerror?ee(r,this.onerror):r)}}function re(e,t){return e===J?t:function(n){var r=e.apply(this,arguments);o(n,r);var i=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?ee(i,this.onsuccess):i),a&&(this.onerror=this.onerror?ee(a,this.onerror):a),void 0===r?void 0===s?void 0:s:o(r,s)}}function ie(e,t){return e===J?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function oe(e,t){return e===J?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return n.then(function(){return t.apply(r,o)})}return t.apply(this,arguments)}}Y.ModifyError=X,Y.DexieError=H,Y.BulkError=K;var ae={},se=100,ue=7,ce=function(){try{return new Function("let F=async ()=>{},p=F();return [p,Object.getPrototypeOf(p),Promise.resolve(),F.constructor];")()}catch(t){var e=i.Promise;return e?[e.resolve(),e.prototype,e.resolve()]:[]}}(),le=ce[0],fe=ce[1],de=ce[2],he=fe&&fe.then,pe=le&&le.constructor,ve=ce[3],me=!!de,ge=!1,ye=de?function(){de.then(Fe)}:i.setImmediate?n.bind(null,Fe):i.MutationObserver?function(){var e=document.createElement("div");new MutationObserver(function(){Fe(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(Fe,0)},be=function(e,t){Te.push([e,t]),Pe&&(ye(),Pe=!1)},we=!0,Pe=!0,_e=[],ke=[],Se=null,xe=Z,Ee={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ut,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(e){try{ut(e[0],e[1])}catch(e){}})}},Oe=Ee,Te=[],Ae=0,je=[];function Ce(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=J,this._lib=!1;var t=this._PSD=Oe;if(D&&(this._stackHolder=U(),this._prev=null,this._numPrev=0),"function"!=typeof e){if(e!==ae)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&De(this,this._value))}this._state=null,this._value=null,++t.ref,function e(t,n){try{n(function(n){if(null===t._state){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var r=t._lib&&qe();n&&"function"==typeof n.then?e(t,function(e,t){n instanceof Ce?n._then(e,t):n.then(e,t)}):(t._state=!0,t._value=n,Re(t)),r&&Ve()}},De.bind(null,t))}catch(e){De(t,e)}}(this,e)}var Ie={get:function(){var e=Oe,t=Qe;function n(n,r){var i=this,o=!e.global&&(e!==Oe||t!==Qe);o&&$e();var a=new Ce(function(t,a){Me(i,new Ne(ot(n,e,o),ot(r,e,o),t,a,e))});return D&&Ue(a,this),a}return n.prototype=ae,n},set:function(e){f(this,"then",e&&e.prototype===ae?Ie:{get:function(){return e},set:Ie.set})}};function Ne(e,t,n,r,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=i}function De(e,t){if(ke.push(t),null===e._state){var n=e._lib&&qe();t=xe(t),e._state=!1,e._value=t,D&&null!==t&&"object"==typeof t&&!t._promise&&P(function(){var n=function e(t,n){var r;return h(t,n)||(r=a(t))&&e(r,n)}(t,"stack");t._promise=e,f(t,"stack",{get:function(){return ge?n&&(n.get?n.get.apply(t):n.value):e.stack}})}),function(e){_e.some(function(t){return t._value===e._value})||_e.push(e)}(e),Re(e),n&&Ve()}}function Re(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Me(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),0===Ae&&(++Ae,be(function(){0==--Ae&&Be()},[]))}function Me(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Ae,be(Le,[n,e,t])}else e._listeners.push(t)}function Le(e,t,n){try{Se=t;var r,i=t._value;t._state?r=e(i):(ke.length&&(ke=[]),r=e(i),-1===ke.indexOf(i)&&function(e){var t=_e.length;for(;t;)if(_e[--t]._value===e._value)return void _e.splice(t,1)}(t)),n.resolve(r)}catch(e){n.reject(e)}finally{Se=null,0==--Ae&&Be(),--n.psd.ref||n.psd.finalize()}}function Ue(e,t){var n=t?t._numPrev+1:0;n<se&&(e._prev=t,e._numPrev=n)}function Fe(){qe()&&Ve()}function qe(){var e=we;return we=!1,Pe=!1,e}function Ve(){var e,t,n;do{for(;Te.length>0;)for(e=Te,Te=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(Te.length>0);we=!0,Pe=!0}function Be(){var e=_e;_e=[],e.forEach(function(e){e._PSD.onunhandled.call(null,e._value,e)});for(var t=je.slice(0),n=t.length;n;)t[--n]()}function He(e){return new Ce(ae,!1,e)}function Xe(e,t){var n=Oe;return function(){var r=qe(),i=Oe;try{return nt(n,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{nt(i,!1),r&&Ve()}}}c(Ce.prototype,{then:Ie,_then:function(e,t){Me(this,new Ne(null,null,e,t,Oe))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],n=arguments[1];return"function"==typeof t?this.then(null,function(e){return e instanceof t?n(e):He(e)}):this.then(null,function(e){return e&&e.name===t?n(e):He(e)})},finally:function(e){return this.then(function(t){return e(),t},function(t){return e(),He(t)})},stack:{get:function(){if(this._stack)return this._stack;try{ge=!0;var e=function e(t,n,r){if(n.length===r)return n;var i="";if(!1===t._state){var o,a,s=t._value;null!=s?(o=s.name||"Error",a=s.message||s,i=F(s,0)):(o=s,a=""),n.push(o+(a?": "+a:"")+i)}D&&((i=F(t._stackHolder,2))&&-1===n.indexOf(i)&&n.push(i),t._prev&&e(t._prev,n,r));return n}(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=e),e}finally{ge=!1}}},timeout:function(e,t){var n=this;return e<1/0?new Ce(function(r,i){var o=setTimeout(function(){return i(new W.Timeout(t))},e);n.then(r,i).finally(clearTimeout.bind(null,o))}):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&f(Ce.prototype,Symbol.toStringTag,"Promise"),Ee.env=rt(),c(Ce,{all:function(){var e=N.apply(null,arguments).map(et);return new Ce(function(t,n){0===e.length&&t([]);var r=e.length;e.forEach(function(i,o){return Ce.resolve(i).then(function(n){e[o]=n,--r||t(e)},n)})})},resolve:function(e){if(e instanceof Ce)return e;if(e&&"function"==typeof e.then)return new Ce(function(t,n){e.then(t,n)});var t=new Ce(ae,!0,e);return Ue(t,Se),t},reject:He,race:function(){var e=N.apply(null,arguments).map(et);return new Ce(function(t,n){e.map(function(e){return Ce.resolve(e).then(t,n)})})},PSD:{get:function(){return Oe},set:function(e){return Oe=e}},newPSD:Je,usePSD:it,scheduler:{get:function(){return be},set:function(e){be=e}},rejectionMapper:{get:function(){return xe},set:function(e){xe=e}},follow:function(e,t){return new Ce(function(n,r){return Je(function(t,n){var r=Oe;r.unhandleds=[],r.onunhandled=n,r.finalize=ee(function(){var e=this;!function(e){je.push(function t(){e();je.splice(je.indexOf(t),1)}),++Ae,be(function(){0==--Ae&&Be()},[])}(function(){0===e.unhandleds.length?t():n(e.unhandleds[0])})},r.finalize),e()},t,n,r)})}});var Ke={awaits:0,echoes:0,id:0},ze=0,Ge=[],We=0,Qe=0,Ye=0;function Je(e,t,n,r){var i=Oe,a=Object.create(i);a.parent=i,a.ref=0,a.global=!1,a.id=++Ye;var s=Ee.env;a.env=me?{Promise:Ce,PromiseProp:{value:Ce,configurable:!0,writable:!0},all:Ce.all,race:Ce.race,resolve:Ce.resolve,reject:Ce.reject,nthen:at(s.nthen,a),gthen:at(s.gthen,a)}:{},t&&o(a,t),++i.ref,a.finalize=function(){--this.parent.ref||this.parent.finalize()};var u=it(a,e,n,r);return 0===a.ref&&a.finalize(),u}function Ze(){return Ke.id||(Ke.id=++ze),++Ke.awaits,Ke.echoes+=ue,Ke.id}function $e(e){!Ke.awaits||e&&e!==Ke.id||(0==--Ke.awaits&&(Ke.id=0),Ke.echoes=Ke.awaits*ue)}function et(e){return Ke.echoes&&e&&e.constructor===pe?(Ze(),e.then(function(e){return $e(),e},function(e){return $e(),ct(e)})):e}function tt(){var e=Ge[Ge.length-1];Ge.pop(),nt(e,!1)}function nt(e,t){var n,r=Oe;if((t?!Ke.echoes||We++&&e===Oe:!We||--We&&e===Oe)||(n=t?function(e){++Qe,Ke.echoes&&0!=--Ke.echoes||(Ke.echoes=Ke.id=0),Ge.push(Oe),nt(e,!0)}.bind(null,e):tt,he.call(le,n)),e!==Oe&&(Oe=e,r===Ee&&(Ee.env=rt()),me)){var o=Ee.env.Promise,a=e.env;fe.then=a.nthen,o.prototype.then=a.gthen,(r.global||e.global)&&(Object.defineProperty(i,"Promise",a.PromiseProp),o.all=a.all,o.race=a.race,o.resolve=a.resolve,o.reject=a.reject)}}function rt(){var e=i.Promise;return me?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:e.all,race:e.race,resolve:e.resolve,reject:e.reject,nthen:fe.then,gthen:e.prototype.then}:{}}function it(e,t,n,r,i){var o=Oe;try{return nt(e,!0),t(n,r,i)}finally{nt(o,!1)}}function ot(e,t,n){return"function"!=typeof e?e:function(){var r=Oe;n&&Ze(),nt(t,!0);try{return e.apply(this,arguments)}finally{nt(r,!1)}}}function at(e,t){return function(n,r){return e.call(this,ot(n,t,!1),ot(r,t,!1))}}var st="unhandledrejection";function ut(e,t){var n;try{n=t.onuncatched(e)}catch(e){}if(!1!==n)try{var r,a={promise:t,reason:e};if(i.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(st,!0,!0),o(r,a)):i.CustomEvent&&o(r=new CustomEvent(st,{detail:a}),a),r&&i.dispatchEvent&&(dispatchEvent(r),!i.PromiseRejectionEvent&&i.onunhandledrejection))try{i.onunhandledrejection(r)}catch(e){}r.defaultPrevented||console.warn("Unhandled rejection: "+(e.stack||e))}catch(e){}}var ct=Ce.reject;function lt(t){var n={},i=function(e,r){if(r){for(var i=arguments.length,o=new Array(i-1);--i;)o[i-1]=arguments[i];return n[e].subscribe.apply(null,o),t}if("string"==typeof e)return n[e]};i.addEventType=s;for(var o=1,a=arguments.length;o<a;++o)s(arguments[o]);return i;function s(t,o,a){if("object"!=typeof t){var u;o||(o=ie),a||(a=J);var c={subscribers:[],fire:a,subscribe:function(e){-1===c.subscribers.indexOf(e)&&(c.subscribers.push(e),c.fire=o(c.fire,e))},unsubscribe:function(e){c.subscribers=c.subscribers.filter(function(t){return t!==e}),c.fire=c.subscribers.reduce(o,a)}};return n[t]=i[t]=c,c}e(u=t).forEach(function(e){var t=u[e];if(r(t))s(e,u[e][0],u[e][1]);else{if("asap"!==t)throw new W.InvalidArgument("Invalid event config");var n=s(e,Z,function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];n.subscribers.forEach(function(e){y(function(){e.apply(null,t)})})})}})}}var ft,dt=String.fromCharCode(65535),ht=function(){try{return IDBKeyRange.only([[]]),[[]]}catch(e){return dt}}(),pt=-1/0,vt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",mt="String expected.",gt=[],yt="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),bt=yt,wt=yt,Pt=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)};function _t(t,n){var a,s,l,d,h,p=_t.dependencies,y=o({addons:_t.addons,autoOpen:!0,indexedDB:p.indexedDB,IDBKeyRange:p.IDBKeyRange},n),x=y.addons,O=y.autoOpen,j=y.indexedDB,C=y.IDBKeyRange,R=this._dbSchema={},M=[],L=[],q={},V=null,B=null,H=!1,z=null,G=!1,Q="readwrite",Y=this,ee=new Ce(function(e){a=e}),ie=new Ce(function(e,t){s=t}),ae=!0,se=!!Nt(j);function ue(e){this._cfg={version:e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null},this.stores({})}function ce(t,n,r){var i=Y._createTransaction(Q,L,R);i.create(n),i._completion.catch(r);var o=i._reject.bind(i);Je(function(){Oe.trans=i,0===t?(e(R).forEach(function(e){le(n,e,R[e].primKey,R[e].indexes)}),Ce.follow(function(){return Y.on.populate.fire(i)}).catch(o)):function(t,n,r){var i=[],o=M.filter(function(e){return e._cfg.version===t})[0];if(!o)throw new W.Upgrade("Dexie specification of currently installed DB version is missing");R=Y._dbSchema=o._cfg.dbschema;var a=!1;return M.filter(function(e){return e._cfg.version>t}).forEach(function(e){i.push(function(){var t=R,i=e._cfg.dbschema;Ne(t,r),Ne(i,r),R=Y._dbSchema=i;var o=function(e,t){var n={del:[],add:[],change:[]};for(var r in e)t[r]||n.del.push(r);for(r in t){var i=e[r],o=t[r];if(i){var a={name:r,def:o,recreate:!1,del:[],add:[],change:[]};if(i.primKey.src!==o.primKey.src)a.recreate=!0,n.change.push(a);else{var s=i.idxByName,u=o.idxByName;for(var c in s)u[c]||a.del.push(c);for(c in u){var l=s[c],f=u[c];l?l.src!==f.src&&a.change.push(f):a.add.push(f)}(a.del.length>0||a.add.length>0||a.change.length>0)&&n.change.push(a)}}else n.add.push([r,o])}return n}(t,i);if(o.add.forEach(function(e){le(r,e[0],e[1].primKey,e[1].indexes)}),o.change.forEach(function(e){if(e.recreate)throw new W.Upgrade("Not yet support for changing primary key");var t=r.objectStore(e.name);e.add.forEach(function(e){fe(t,e)}),e.change.forEach(function(e){t.deleteIndex(e.name),fe(t,e)}),e.del.forEach(function(e){t.deleteIndex(e)})}),e._cfg.contentUpgrade)return a=!0,Ce.follow(function(){e._cfg.contentUpgrade(n)})}),i.push(function(t){a&&bt||function(e,t){for(var n=0;n<t.db.objectStoreNames.length;++n){var r=t.db.objectStoreNames[n];null==e[r]&&t.db.deleteObjectStore(r)}}(e._cfg.dbschema,t)})}),function e(){return i.length?Ce.resolve(i.shift()(n.idbtrans)).then(e):Ce.resolve()}().then(function(){!function(t,n){e(t).forEach(function(e){n.db.objectStoreNames.contains(e)||le(n,e,t[e].primKey,t[e].indexes)})}(R,r)})}(t,i,n).catch(o)})}function le(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(e){fe(i,e)}),i}function fe(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function de(e,t,n){this.name=e,this.schema=t,this._tx=n,this.hook=q[e]?q[e].hook:lt(null,{creating:[te,J],reading:[$,Z],updating:[re,J],deleting:[ne,J]})}function he(e,t,n){return(n?Ot:xt)(function(n){e.push(n),t&&t()})}function me(e,t,n,r,i){return new Ce(function(o,a){var s=n.length,u=s-1;if(0===s)return o();if(r){var c,l=Ot(a),f=St(null);P(function(){for(var r=0;r<s;++r){c={onsuccess:null,onerror:null};var a=n[r];i.call(c,a[0],a[1],t);var d=e.delete(a[0]);d._hookCtx=c,d.onerror=l,d.onsuccess=r===u?St(o):f}},function(e){throw c.onerror&&c.onerror(e),e})}else for(var d=0;d<s;++d){var h=e.delete(n[d]);h.onerror=xt(a),d===u&&(h.onsuccess=Xe(function(){return o()}))}})}function ge(e,t,n,r){var i=this;this.db=Y,this.mode=e,this.storeNames=t,this.idbtrans=null,this.on=lt(this,"complete","error","abort"),this.parent=r||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Ce(function(e,t){i._resolve=e,i._reject=t}),this._completion.then(function(){i.active=!1,i.on.complete.fire()},function(e){var t=i.active;return i.active=!1,i.on.error.fire(e),i.parent?i.parent._reject(e):t&&i.idbtrans&&i.idbtrans.abort(),ct(e)})}function ye(e,t,n){this._ctx={table:e,index:":id"===t?null:t,or:n}}function be(e,t){var n=null,r=null;if(t)try{n=t()}catch(e){r=e}var i=e._ctx,o=i.table;this._ctx={table:o,index:i.index,isPrimKey:!i.index||o.schema.primKey.keyPath&&i.index===o.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:i.or,valueMapper:o.hook.reading.fire}}function we(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Pe(e,t){return e._cfg.version-t._cfg.version}function _e(e,t,n){t.forEach(function(t){var r=n[t];e.forEach(function(e){t in e||(e===ge.prototype||e instanceof ge?f(e,t,{get:function(){return this.table(t)}}):e[t]=new de(t,r))})})}function ke(e,t,n,r,i,o){var a=Xe(o?function(e,t,r){return n(o(e),t,r)}:n,i);e.onerror||(e.onerror=xt(i)),e.onsuccess=w(t?function(){var n=e.result;if(n){var o=function(){n.continue()};t(n,function(e){o=e},r,i)&&a(n.value,n,function(e){o=e}),o()}else r()}:function(){var t=e.result;if(t){var n=function(){t.continue()};a(t.value,t,function(e){n=e}),n()}else r()},i)}function Se(e,t){return j.cmp(e,t)}function xe(e,t){return Se(e,t)>0?e:t}function Ee(e,t){return j.cmp(e,t)}function Te(e,t){return j.cmp(t,e)}function Ae(e,t){return e<t?-1:e===t?0:1}function je(e,t){return e>t?-1:e===t?0:1}function Ie(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}function Ne(e,t){for(var n=t.db.objectStoreNames,r=0;r<n.length;++r){var o=n[r],a=t.objectStore(o);l="getAll"in a;for(var s=0;s<a.indexNames.length;++s){var u=a.indexNames[s],c=a.index(u).keyPath,f="string"==typeof c?c:"["+v(c).join("+")+"]";if(e[o]){var d=e[o].idxByName[f];d&&(d.name=u)}}}/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(l=!1)}function De(e){Y.on("blocked").fire(e),gt.filter(function(e){return e.name===Y.name&&e!==Y&&!e._vcFired}).map(function(t){return t.on("versionchange").fire(e)})}this.version=function(e){if(V||H)throw new W.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=M.filter(function(t){return t._cfg.version===e})[0];return t||(t=new ue(e),M.push(t),M.sort(Pe),ae=!1,t)},o(ue.prototype,{stores:function(t){this._cfg.storesSource=this._cfg.storesSource?o(this._cfg.storesSource,t):t;var n={};M.forEach(function(e){o(n,e._cfg.storesSource)});var r=this._cfg.dbschema={};return this._parseStoresSpec(n,r),R=Y._dbSchema=r,[q,Y,ge.prototype].forEach(function(e){for(var t in e)e[t]instanceof de&&delete e[t]}),_e([q,Y,ge.prototype,this._cfg.tables],e(r),r),L=e(r),this},upgrade:function(e){return this._cfg.contentUpgrade=e,this},_parseStoresSpec:function(t,n){e(t).forEach(function(e){if(null!==t[e]){var i={},o=function(e){var t=[];return e.split(",").forEach(function(e){var n=(e=e.trim()).replace(/([&*]|\+\+)/g,""),i=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;t.push(new jt(n,i||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),r(i),/\./.test(e)))}),t}(t[e]),a=o.shift();if(a.multi)throw new W.Schema("Primary key cannot be multi-valued");a.keyPath&&k(i,a.keyPath,a.auto?0:a.keyPath),o.forEach(function(e){if(e.auto)throw new W.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new W.Schema("Index must have a name and cannot be an empty string");k(i,e.keyPath,e.compound?e.keyPath.map(function(){return""}):"")}),n[e]=new Ct(e,a,o,i)}})}}),this._allTables=q,this._createTransaction=function(e,t,n,r){return new ge(e,t,n,r)},this._whenReady=function(e){return G||Oe.letThrough?e():new Ce(function(e,t){if(!H){if(!O)return void t(new W.DatabaseClosed);Y.open().catch(J)}ee.then(e,t)}).then(e)},this.verno=0,this.open=function(){if(H||V)return ee.then(function(){return B?ct(B):Y});D&&(ie._stackHolder=U()),H=!0,B=null,G=!1;var n=a,r=null;return Ce.race([ie,new Ce(function(n,i){if(!j)throw new W.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var o=ae?j.open(t):j.open(t,Math.round(10*Y.verno));if(!o)throw new W.MissingAPI("IndexedDB API not available");o.onerror=xt(i),o.onblocked=Xe(De),o.onupgradeneeded=Xe(function(e){if(r=o.transaction,ae&&!Y._allowEmptyDB){o.onerror=Tt,r.abort(),o.result.close();var n=j.deleteDatabase(t);n.onsuccess=n.onerror=Xe(function(){i(new W.NoSuchDatabase("Database "+t+" doesnt exist"))})}else{r.onerror=xt(i),ce((e.oldVersion>Math.pow(2,62)?0:e.oldVersion)/10,r,i)}},i),o.onsuccess=Xe(function(){if(r=null,V=o.result,gt.push(Y),ae)!function(){if(Y.verno=V.version/10,Y._dbSchema=R={},0===(L=v(V.objectStoreNames,0)).length)return;var t=V.transaction(It(L),"readonly");L.forEach(function(e){for(var n=t.objectStore(e),r=n.keyPath,i=r&&"string"==typeof r&&-1!==r.indexOf("."),o=new jt(r,r||"",!1,!1,!!n.autoIncrement,r&&"string"!=typeof r,i),a=[],s=0;s<n.indexNames.length;++s){var u=n.index(n.indexNames[s]);r=u.keyPath,i=r&&"string"==typeof r&&-1!==r.indexOf(".");var c=new jt(u.name,r,!!u.unique,!!u.multiEntry,!1,r&&"string"!=typeof r,i);a.push(c)}R[e]=new Ct(e,o,a,{})}),_e([q],e(R),R)}();else if(V.objectStoreNames.length>0)try{Ne(R,V.transaction(It(V.objectStoreNames),"readonly"))}catch(e){}V.onversionchange=Xe(function(e){Y._vcFired=!0,Y.on("versionchange").fire(e)}),se||"__dbnames"===t||ft.dbnames.put({name:t}).catch(J),n()},i)})]).then(function(){return z=[],Ce.resolve(_t.vip(Y.on.ready.fire)).then(function e(){if(z.length>0){var t=z.reduce(oe,J);return z=[],Ce.resolve(_t.vip(t)).then(e)}})}).finally(function(){z=null}).then(function(){return H=!1,Y}).catch(function(e){try{r&&r.abort()}catch(e){}return H=!1,Y.close(),ct(B=e)}).finally(function(){G=!0,n()})},this.close=function(){var e=gt.indexOf(Y);if(e>=0&&gt.splice(e,1),V){try{V.close()}catch(e){}V=null}O=!1,B=new W.DatabaseClosed,H&&s(B),ee=new Ce(function(e){a=e}),ie=new Ce(function(e,t){s=t})},this.delete=function(){var e=arguments.length>0;return new Ce(function(n,r){if(e)throw new W.InvalidArgument("Arguments not allowed in db.delete()");function i(){Y.close();var e=j.deleteDatabase(t);e.onsuccess=Xe(function(){se||ft.dbnames.delete(t).catch(J),n()}),e.onerror=xt(r),e.onblocked=De}H?ee.then(i):i()})},this.backendDB=function(){return V},this.isOpen=function(){return null!==V},this.hasBeenClosed=function(){return B&&B instanceof W.DatabaseClosed},this.hasFailed=function(){return null!==B},this.dynamicallyOpened=function(){return ae},this.name=t,c(this,{tables:{get:function(){return e(q).map(function(e){return q[e]})}}}),this.on=lt(this,"populate","blocked","versionchange",{ready:[oe,J]}),this.on.ready.subscribe=m(this.on.ready.subscribe,function(e){return function(t,n){_t.vip(function(){G?(B||Ce.resolve().then(t),n&&e(t)):z?(z.push(t),n&&e(t)):(e(t),n||e(function e(){Y.on.ready.unsubscribe(t),Y.on.ready.unsubscribe(e)}))})}}),this.transaction=function(){var e=function(e,t,n){var r=arguments.length;if(r<2)throw new W.InvalidArgument("Too few arguments");var i=new Array(r-1);for(;--r;)i[r-1]=arguments[r];n=i.pop();var o=E(i);return[e,o,n]}.apply(this,arguments);return this._transaction.apply(this,e)},this._transaction=function(e,t,n){var r=Oe.trans;r&&r.db===Y&&-1===e.indexOf("!")||(r=null);var i=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{var o=t.map(function(e){var t=e instanceof de?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t});if("r"==e||"readonly"==e)e="readonly";else{if("rw"!=e&&e!=Q)throw new W.InvalidArgument("Invalid transaction mode: "+e);e=Q}if(r){if("readonly"===r.mode&&e===Q){if(!i)throw new W.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");r=null}r&&o.forEach(function(e){if(r&&-1===r.storeNames.indexOf(e)){if(!i)throw new W.SubTransaction("Table "+e+" not included in parent transaction.");r=null}}),i&&r&&!r.active&&(r=null)}}catch(e){return r?r._promise(null,function(t,n){n(e)}):ct(e)}return r?r._promise(e,a,"lock"):Oe.trans?it(Oe.transless,function(){return Y._whenReady(a)}):Y._whenReady(a);function a(){return Ce.resolve().then(function(){var t,i=Oe.transless||Oe,a=Y._createTransaction(e,o,R,r),s={trans:a,transless:i};r?a.idbtrans=r.idbtrans:a.create(),n.constructor===ve&&Ze();var u=Ce.follow(function(){if(t=n.call(a,a))if(t.constructor===pe){var e=$e.bind(null,null);t.then(e,e)}else"function"==typeof t.next&&"function"==typeof t.throw&&(t=At(t))},s);return(t&&"function"==typeof t.then?Ce.resolve(t).then(function(e){return a.active?e:ct(new W.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):u.then(function(){return t})).then(function(e){return r&&a._resolve(),a._completion.then(function(){return e})}).catch(function(e){return a._reject(e),ct(e)})})}},this.table=function(e){if(!u(q,e))throw new W.InvalidTable("Table "+e+" does not exist");return q[e]},c(de.prototype,{_trans:function(e,t,n){var r=this._tx||Oe.trans;return r&&r.db===Y?r===Oe.trans?r._promise(e,t,n):Je(function(){return r._promise(e,t,n)},{trans:r,transless:Oe.transless||Oe}):function e(t,n,r){if(G||Oe.letThrough){var i=Y._createTransaction(t,n,R);try{i.create()}catch(e){return ct(e)}return i._promise(t,function(e,t){return Je(function(){return Oe.trans=i,r(e,t,i)})}).then(function(e){return i._completion.then(function(){return e})})}if(!H){if(!O)return ct(new W.DatabaseClosed);Y.open().catch(J)}return ee.then(function(){return e(t,n,r)})}(e,[this.name],t)},_idbstore:function(e,t,n){var r=this.name;return this._trans(e,function(e,n,i){if(-1===i.storeNames.indexOf(r))throw new W.NotFound("Table"+r+" not part of transaction");return t(e,n,i.idbtrans.objectStore(r),i)},n)},get:function(e,t){if(e&&e.constructor===Object)return this.where(e).first(t);var n=this;return this._idbstore("readonly",function(t,r,i){var o=i.get(e);o.onerror=xt(r),o.onsuccess=Xe(function(){t(n.hook.reading.fire(o.result))},r)}).then(t)},where:function(t){if("string"==typeof t)return new ye(this,t);if(r(t))return new ye(this,"["+t.join("+")+"]");var n=e(t);if(1===n.length)return this.where(n[0]).equals(t[n[0]]);var i=this.schema.indexes.concat(this.schema.primKey).filter(function(e){return e.compound&&n.every(function(t){return e.keyPath.indexOf(t)>=0})&&e.keyPath.every(function(e){return n.indexOf(e)>=0})})[0];if(i&&ht!==dt)return this.where(i.name).equals(i.keyPath.map(function(e){return t[e]}));i||console.warn("The query "+JSON.stringify(t)+" on "+this.name+" would benefit of a compound index ["+n.join("+")+"]");var o=this.schema.idxByName,a=n.reduce(function(e,n){return[e[0]||o[n],e[0]||!o[n]?Ie(e[1],function(e){return""+_(e,n)==""+t[n]}):e[1]]},[null,null]),s=a[0];return s?this.where(s.name).equals(t[s.keyPath]).filter(a[1]):i?this.filter(a[1]):this.where(n).equals("")},count:function(e){return this.toCollection().count(e)},offset:function(e){return this.toCollection().offset(e)},limit:function(e){return this.toCollection().limit(e)},reverse:function(){return this.toCollection().reverse()},filter:function(e){return this.toCollection().and(e)},each:function(e){return this.toCollection().each(e)},toArray:function(e){return this.toCollection().toArray(e)},orderBy:function(e){return new be(new ye(this,r(e)?"["+e.join("+")+"]":e))},toCollection:function(){return new be(new ye(this))},mapToClass:function(e,t){this.schema.mappedClass=e;var n=Object.create(e.prototype);t&&kt(n,t),this.schema.instanceTemplate=n;var r=function(t){if(!t)return t;var n=Object.create(e.prototype);for(var r in t)if(u(t,r))try{n[r]=t[r]}catch(e){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=r,this.hook("reading",r),e},defineClass:function(e){return this.mapToClass(_t.defineClass(e),e)},bulkDelete:function(e){return this.hook.deleting.fire===J?this._idbstore(Q,function(t,n,r,i){t(me(r,i,e,!1,J))}):this.where(":id").anyOf(e).delete().then(function(){})},bulkPut:function(e,t){var n=this;return this._idbstore(Q,function(r,i,o){if(!o.keyPath&&!n.schema.primKey.auto&&!t)throw new W.InvalidArgument("bulkPut() with non-inbound keys requires keys array in second argument");if(o.keyPath&&t)throw new W.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(t&&t.length!==e.length)throw new W.InvalidArgument("Arguments objects and keys must have the same length");if(0===e.length)return r();var a,s,u=function(e){0===c.length?r(e):i(new K(n.name+".bulkPut(): "+c.length+" of "+l+" operations failed",c))},c=[],l=e.length,f=n;if(n.hook.creating.fire===J&&n.hook.updating.fire===J){s=he(c);for(var d=0,h=e.length;d<h;++d)(a=t?o.put(e[d],t[d]):o.put(e[d])).onerror=s;a.onerror=he(c,u),a.onsuccess=Et(u)}else{var p=t||o.keyPath&&e.map(function(e){return _(e,o.keyPath)}),v=p&&b(p,function(t,n){return null!=t&&[t,e[n]]});(p?f.where(":id").anyOf(p.filter(function(e){return null!=e})).modify(function(){this.value=v[this.primKey],v[this.primKey]=null}).catch(X,function(e){c=e.failures}).then(function(){for(var n=[],r=t&&[],i=p.length-1;i>=0;--i){var o=p[i];(null==o||v[o])&&(n.push(e[i]),t&&r.push(o),null!=o&&(v[o]=null))}return n.reverse(),t&&r.reverse(),f.bulkAdd(n,r)}).then(function(e){var t=p[p.length-1];return null!=t?t:e}):f.bulkAdd(e)).then(u).catch(K,function(e){c=c.concat(e.failures),u()}).catch(i)}},"locked")},bulkAdd:function(e,t){var n=this,r=this.hook.creating.fire;return this._idbstore(Q,function(i,o,a,s){if(!a.keyPath&&!n.schema.primKey.auto&&!t)throw new W.InvalidArgument("bulkAdd() with non-inbound keys requires keys array in second argument");if(a.keyPath&&t)throw new W.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(t&&t.length!==e.length)throw new W.InvalidArgument("Arguments objects and keys must have the same length");if(0===e.length)return i();function u(e){0===d.length?i(e):o(new K(n.name+".bulkAdd(): "+d.length+" of "+h+" operations failed",d))}var c,l,f,d=[],h=e.length;if(r!==J){var p,v=a.keyPath;l=he(d,null,!0),f=St(null),P(function(){for(var n=0,i=e.length;n<i;++n){p={onerror:null,onsuccess:null};var o=t&&t[n],u=e[n],d=t?o:v?_(u,v):void 0,h=r.call(p,d,u,s);null==d&&null!=h&&(v?k(u=T(u),v,h):o=h),(c=null!=o?a.add(u,o):a.add(u))._hookCtx=p,n<i-1&&(c.onerror=l,p.onsuccess&&(c.onsuccess=f))}},function(e){throw p.onerror&&p.onerror(e),e}),c.onerror=he(d,u,!0),c.onsuccess=St(u)}else{l=he(d);for(var m=0,g=e.length;m<g;++m)(c=t?a.add(e[m],t[m]):a.add(e[m])).onerror=l;c.onerror=he(d,u),c.onsuccess=Et(u)}})},add:function(e,t){var n=this.hook.creating.fire;return this._idbstore(Q,function(r,i,o,a){var s={onsuccess:null,onerror:null};if(n!==J){var u=null!=t?t:o.keyPath?_(e,o.keyPath):void 0,c=n.call(s,u,e,a);null==u&&null!=c&&(o.keyPath?k(e,o.keyPath,c):t=c)}try{var l=null!=t?o.add(e,t):o.add(e);l._hookCtx=s,l.onerror=Ot(i),l.onsuccess=St(function(t){var n=o.keyPath;n&&k(e,n,t),r(t)})}catch(e){throw s.onerror&&s.onerror(e),e}})},put:function(e,t){var n=this,r=this.hook.creating.fire,i=this.hook.updating.fire;if(r!==J||i!==J){var o=this.schema.primKey.keyPath,a=void 0!==t?t:o&&_(e,o);return null==a?this.add(e):(e=T(e),this._trans(Q,function(){return n.where(":id").equals(a).modify(function(){this.value=e}).then(function(r){return 0===r?n.add(e,t):a})},"locked"))}return this._idbstore(Q,function(n,r,i){var o=void 0!==t?i.put(e,t):i.put(e);o.onerror=xt(r),o.onsuccess=Xe(function(t){var r=i.keyPath;r&&k(e,r,t.target.result),n(o.result)})})},delete:function(e){return this.hook.deleting.subscribers.length?this.where(":id").equals(e).delete():this._idbstore(Q,function(t,n,r){var i=r.delete(e);i.onerror=xt(n),i.onsuccess=Xe(function(){t(i.result)})})},clear:function(){return this.hook.deleting.subscribers.length?this.toCollection().delete():this._idbstore(Q,function(e,t,n){var r=n.clear();r.onerror=xt(t),r.onsuccess=Xe(function(){e(r.result)})})},update:function(t,n){if("object"!=typeof n||r(n))throw new W.InvalidArgument("Modifications must be an object.");if("object"!=typeof t||r(t))return this.where(":id").equals(t).modify(n);e(n).forEach(function(e){k(t,e,n[e])});var i=_(t,this.schema.primKey.keyPath);return void 0===i?ct(new W.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(i).modify(n)}}),c(ge.prototype,{_lock:function(){return g(!Oe.global),++this._reculock,1!==this._reculock||Oe.global||(Oe.lockOwnerFor=this),this},_unlock:function(){if(g(!Oe.global),0==--this._reculock)for(Oe.global||(Oe.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{it(e[1],e[0])}catch(e){}}return this},_locked:function(){return this._reculock&&Oe.lockOwnerFor!==this},create:function(e){var t=this;if(!this.mode)return this;if(g(!this.idbtrans),!e&&!V)switch(B&&B.name){case"DatabaseClosedError":throw new W.DatabaseClosed(B);case"MissingAPIError":throw new W.MissingAPI(B.message,B);default:throw new W.OpenFailed(B)}if(!this.active)throw new W.TransactionInactive;return g(null===this._completion._state),(e=this.idbtrans=e||V.transaction(It(this.storeNames),this.mode)).onerror=Xe(function(n){Tt(n),t._reject(e.error)}),e.onabort=Xe(function(n){Tt(n),t.active&&t._reject(new W.Abort(e.error)),t.active=!1,t.on("abort").fire(n)}),e.oncomplete=Xe(function(){t.active=!1,t._resolve()}),this},_promise:function(e,t,n){var r=this;if(e===Q&&this.mode!==Q)return ct(new W.ReadOnly("Transaction is readonly"));if(!this.active)return ct(new W.TransactionInactive);if(this._locked())return new Ce(function(i,o){r._blockedFuncs.push([function(){r._promise(e,t,n).then(i,o)},Oe])});if(n)return Je(function(){var e=new Ce(function(e,n){r._lock();var i=t(e,n,r);i&&i.then&&i.then(e,n)});return e.finally(function(){return r._unlock()}),e._lib=!0,e});var i=new Ce(function(e,n){var i=t(e,n,r);i&&i.then&&i.then(e,n)});return i._lib=!0,i},_root:function(){return this.parent?this.parent._root():this},waitFor:function(e){var t=this._root();if(e=Ce.resolve(e),t._waitingFor)t._waitingFor=t._waitingFor.then(function(){return e});else{t._waitingFor=e,t._waitingQueue=[];var n=t.idbtrans.objectStore(t.storeNames[0]);!function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(n.get(-1/0).onsuccess=e)}()}var r=t._waitingFor;return new Ce(function(n,i){e.then(function(e){return t._waitingQueue.push(Xe(n.bind(null,e)))},function(e){return t._waitingQueue.push(Xe(i.bind(null,e)))}).finally(function(){t._waitingFor===r&&(t._waitingFor=null)})})},abort:function(){this.active&&this._reject(new W.Abort),this.active=!1},tables:{get:(d="Transaction.tables",h=function(){return q},function(){return console.warn(d+" is deprecated. See https://github.com/dfahlander/Dexie.js/wiki/Deprecations. "+F(U(),1)),h.apply(this,arguments)})},table:function(e){return new de(e,Y.table(e).schema,this)}}),c(ye.prototype,function(){function e(e,t,n){var r=e instanceof ye?new be(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function t(e){return new be(e,function(){return C.only("")}).limit(0)}function n(e,t,n,r,i,o){for(var a=Math.min(e.length,r.length),s=-1,u=0;u<a;++u){var c=t[u];if(c!==r[u])return i(e[u],n[u])<0?e.substr(0,u)+n[u]+n.substr(u+1):i(e[u],r[u])<0?e.substr(0,u)+r[u]+n.substr(u+1):s>=0?e.substr(0,s)+t[s]+n.substr(s+1):null;i(e[u],c)<0&&(s=u)}return a<r.length&&"next"===o?e+n.substr(e.length):a<e.length&&"prev"===o?e.substr(0,n.length):s<0?null:e.substr(0,s)+r[s]+n.substr(s+1)}function r(t,r,i,o){var a,s,u,c,l,f,d,h=i.length;if(!i.every(function(e){return"string"==typeof e}))return e(t,mt);function p(e){a=function(e){return"next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}(e),s=function(e){return"next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}(e),u="next"===e?Ae:je;var t=i.map(function(e){return{lower:s(e),upper:a(e)}}).sort(function(e,t){return u(e.lower,t.lower)});c=t.map(function(e){return e.upper}),l=t.map(function(e){return e.lower}),f=e,d="next"===e?"":o}p("next");var v=new be(t,function(){return C.bound(c[0],l[h-1]+o)});v._ondirectionchange=function(e){p(e)};var m=0;return v._addAlgorithm(function(e,t,i){var o=e.key;if("string"!=typeof o)return!1;var a=s(o);if(r(a,l,m))return!0;for(var p=null,v=m;v<h;++v){var g=n(o,a,c[v],l[v],u,f);null===g&&null===p?m=v+1:(null===p||u(p,g)>0)&&(p=g)}return t(null!==p?function(){e.continue(p+d)}:i),!1}),v}return{between:function(n,r,i,o){i=!1!==i,o=!0===o;try{return Se(n,r)>0||0===Se(n,r)&&(i||o)&&(!i||!o)?t(this):new be(this,function(){return C.bound(n,r,!i,!o)})}catch(t){return e(this,vt)}},equals:function(e){return new be(this,function(){return C.only(e)})},above:function(e){return new be(this,function(){return C.lowerBound(e,!0)})},aboveOrEqual:function(e){return new be(this,function(){return C.lowerBound(e)})},below:function(e){return new be(this,function(){return C.upperBound(e,!0)})},belowOrEqual:function(e){return new be(this,function(){return C.upperBound(e)})},startsWith:function(t){return"string"!=typeof t?e(this,mt):this.between(t,t+dt,!0,!0)},startsWithIgnoreCase:function(e){return""===e?this.startsWith(e):r(this,function(e,t){return 0===e.indexOf(t[0])},[e],dt)},equalsIgnoreCase:function(e){return r(this,function(e,t){return e===t[0]},[e],"")},anyOfIgnoreCase:function(){var e=N.apply(I,arguments);return 0===e.length?t(this):r(this,function(e,t){return-1!==t.indexOf(e)},e,"")},startsWithAnyOfIgnoreCase:function(){var e=N.apply(I,arguments);return 0===e.length?t(this):r(this,function(e,t){return t.some(function(t){return 0===e.indexOf(t)})},e,dt)},anyOf:function(){var n=N.apply(I,arguments),r=Ee;try{n.sort(r)}catch(t){return e(this,vt)}if(0===n.length)return t(this);var i=new be(this,function(){return C.bound(n[0],n[n.length-1])});i._ondirectionchange=function(e){r="next"===e?Ee:Te,n.sort(r)};var o=0;return i._addAlgorithm(function(e,t,i){for(var a=e.key;r(a,n[o])>0;)if(++o===n.length)return t(i),!1;return 0===r(a,n[o])||(t(function(){e.continue(n[o])}),!1)}),i},notEqual:function(e){return this.inAnyRange([[pt,e],[e,ht]],{includeLowers:!1,includeUppers:!1})},noneOf:function(){var t=N.apply(I,arguments);if(0===t.length)return new be(this);try{t.sort(Ee)}catch(t){return e(this,vt)}var n=t.reduce(function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[pt,t]]},null);return n.push([t[t.length-1],ht]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},inAnyRange:function(n,r){if(0===n.length)return t(this);if(!n.every(function(e){return void 0!==e[0]&&void 0!==e[1]&&Ee(e[0],e[1])<=0}))return e(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",W.InvalidArgument);var i=!r||!1!==r.includeLowers,o=r&&!0===r.includeUppers;var a,s=Ee;function u(e,t){return s(e[0],t[0])}try{(a=n.reduce(function(e,t){for(var n=0,r=e.length;n<r;++n){var i=e[n];if(Se(t[0],i[1])<0&&Se(t[1],i[0])>0){i[0]=(o=i[0],a=t[0],Se(o,a)<0?o:a),i[1]=xe(i[1],t[1]);break}}var o,a;return n===r&&e.push(t),e},[])).sort(u)}catch(t){return e(this,vt)}var c=0,l=o?function(e){return Ee(e,a[c][1])>0}:function(e){return Ee(e,a[c][1])>=0},f=i?function(e){return Te(e,a[c][0])>0}:function(e){return Te(e,a[c][0])>=0};var d=l,h=new be(this,function(){return C.bound(a[0][0],a[a.length-1][1],!i,!o)});return h._ondirectionchange=function(e){"next"===e?(d=l,s=Ee):(d=f,s=Te),a.sort(u)},h._addAlgorithm(function(e,t,n){for(var r=e.key;d(r);)if(++c===a.length)return t(n),!1;return!!function(e){return!l(e)&&!f(e)}(r)||0!==Se(r,a[c][1])&&0!==Se(r,a[c][0])&&(t(function(){s===Ee?e.continue(a[c][0]):e.continue(a[c][1])}),!1)}),h},startsWithAnyOf:function(){var n=N.apply(I,arguments);return n.every(function(e){return"string"==typeof e})?0===n.length?t(this):this.inAnyRange(n.map(function(e){return[e,e+dt]})):e(this,"startsWithAnyOf() only works with strings")}}}),c(be.prototype,function(){function t(e,t){e.filter=Ie(e.filter,t)}function n(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return Ie(r(),t())}:t,e.justLimit=n&&!r}function r(e,t){if(e.isPrimKey)return t;var n=e.table.schema.idxByName[e.index];if(!n)throw new W.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return t.index(n.name)}function i(e,t){var n=r(e,t);return e.keysOnly&&"openKeyCursor"in n?n.openKeyCursor(e.range||null,e.dir+e.unique):n.openCursor(e.range||null,e.dir+e.unique)}function a(e,t,n,r,o){var a=e.replayFilter?Ie(e.filter,e.replayFilter()):e.filter;e.or?function(){var s={},c=0;function l(){2==++c&&n()}function f(e,n,i){if(!a||a(n,i,l,r)){var o=n.primaryKey,c=""+o;"[object ArrayBuffer]"===c&&(c=""+new Uint8Array(o)),u(s,c)||(s[c]=!0,t(e,n,i))}}e.or._iterate(f,l,r,o),ke(i(e,o),e.algorithm,f,l,r,!e.keysOnly&&e.valueMapper)}():ke(i(e,o),Ie(e.algorithm,a),t,n,r,!e.keysOnly&&e.valueMapper)}return{_read:function(e,t){var n=this._ctx;return n.error?n.table._trans(null,ct.bind(null,n.error)):n.table._idbstore("readonly",e).then(t)},_write:function(e){var t=this._ctx;return t.error?t.table._trans(null,ct.bind(null,t.error)):t.table._idbstore(Q,e,"locked")},_addAlgorithm:function(e){var t=this._ctx;t.algorithm=Ie(t.algorithm,e)},_iterate:function(e,t,n,r){return a(this._ctx,e,t,n,r)},clone:function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&o(n,e),t._ctx=n,t},raw:function(){return this._ctx.valueMapper=null,this},each:function(e){var t=this._ctx;return this._read(function(n,r,i){a(t,e,n,r,i)})},count:function(e){var t=this._ctx;if(we(t,!0))return this._read(function(e,n,i){var o=r(t,i),a=t.range?o.count(t.range):o.count();a.onerror=xt(n),a.onsuccess=function(n){e(Math.min(n.target.result,t.limit))}},e);var n=0;return this._read(function(e,r,i){a(t,function(){return++n,!1},function(){e(n)},r,i)},e)},sortBy:function(e,t){var n=e.split(".").reverse(),r=n[0],i=n.length-1;function o(e,t){return t?o(e[n[t]],t-1):e[r]}var a="next"===this._ctx.dir?1:-1;function s(e,t){var n=o(e,i),r=o(t,i);return n<r?-a:n>r?a:0}return this.toArray(function(e){return e.sort(s)}).then(t)},toArray:function(e){var t=this._ctx;return this._read(function(e,n,i){if(l&&"next"===t.dir&&we(t,!0)&&t.limit>0){var o=t.table.hook.reading.fire,s=r(t,i),u=t.limit<1/0?s.getAll(t.range,t.limit):s.getAll(t.range);u.onerror=xt(n),u.onsuccess=Et(o===Z?e:function(t){try{e(t.map(o))}catch(e){n(e)}})}else{var c=[];a(t,function(e){c.push(e)},function(){e(c)},n,i)}},e)},offset:function(e){var t=this._ctx;return e<=0?this:(t.offset+=e,we(t)?n(t,function(){var t=e;return function(e,n){return 0===t||(1===t?(--t,!1):(n(function(){e.advance(t),t=0}),!1))}}):n(t,function(){var t=e;return function(){return--t<0}}),this)},limit:function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),n(this._ctx,function(){var t=e;return function(e,n,r){return--t<=0&&n(r),t>=0}},!0),this},until:function(e,n){return t(this._ctx,function(t,r,i){return!e(t.value)||(r(i),n)}),this},first:function(e){return this.limit(1).toArray(function(e){return e[0]}).then(e)},last:function(e){return this.reverse().first(e)},filter:function(e){var n,r;return t(this._ctx,function(t){return e(t.value)}),n=this._ctx,r=e,n.isMatch=Ie(n.isMatch,r),this},and:function(e){return this.filter(e)},or:function(e){return new ye(this._ctx.table,e,this)},reverse:function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},desc:function(){return this.reverse()},eachKey:function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,n){e(n.key,n)})},eachUniqueKey:function(e){return this._ctx.unique="unique",this.eachKey(e)},eachPrimaryKey:function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,n){e(n.primaryKey,n)})},keys:function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each(function(e,t){n.push(t.key)}).then(function(){return n}).then(e)},primaryKeys:function(e){var t=this._ctx;if(l&&"next"===t.dir&&we(t,!0)&&t.limit>0)return this._read(function(e,n,i){var o=r(t,i),a=t.limit<1/0?o.getAllKeys(t.range,t.limit):o.getAllKeys(t.range);a.onerror=xt(n),a.onsuccess=Et(e)}).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each(function(e,t){n.push(t.primaryKey)}).then(function(){return n}).then(e)},uniqueKeys:function(e){return this._ctx.unique="unique",this.keys(e)},firstKey:function(e){return this.limit(1).keys(function(e){return e[0]}).then(e)},lastKey:function(e){return this.reverse().firstKey(e)},distinct:function(){var e=this._ctx,n=e.index&&e.table.schema.idxByName[e.index];if(!n||!n.multi)return this;var r={};return t(this._ctx,function(e){var t=e.primaryKey.toString(),n=u(r,t);return r[t]=!0,!n}),this},modify:function(t){var n=this,r=this._ctx.table.hook,i=r.updating.fire,a=r.deleting.fire;return this._write(function(r,s,c,l){var f;if("function"==typeof t)f=i===J&&a===J?t:function(n){var r=T(n);if(!1===t.call(this,n,this))return!1;if(u(this,"value")){var o=A(r,this.value),s=i.call(this,o,this.primKey,r,l);s&&(n=this.value,e(s).forEach(function(e){k(n,e,s[e])}))}else a.call(this,this.primKey,n,l)};else if(i===J){var d=e(t),h=d.length;f=function(e){for(var n=!1,r=0;r<h;++r){var i=d[r],o=t[i];_(e,i)!==o&&(k(e,i,o),n=!0)}return n}}else{var p=t;t=S(p),f=function(n){var r=!1,a=i.call(this,t,this.primKey,T(n),l);return a&&o(t,a),e(t).forEach(function(e){var i=t[e];_(n,e)!==i&&(k(n,e,i),r=!0)}),a&&(t=S(p)),r}}var v=0,m=0,g=!1,y=[],b=[],w=null;function x(e){return e&&(y.push(e),b.push(w)),s(new X("Error modifying one or more objects",y,m,b))}function E(){g&&m+y.length===v&&(y.length>0?x():r(m))}n.clone().raw()._iterate(function(e,t){w=t.primaryKey;var n={primKey:t.primaryKey,value:e,onsuccess:null,onerror:null};function r(e){return y.push(e),b.push(n.primKey),E(),!0}if(!1!==f.call(n,e,n)){var i=!u(n,"value");++v,P(function(){var e=i?t.delete():t.update(n.value);e._hookCtx=n,e.onerror=Ot(r),e.onsuccess=St(function(){++m,E()})},r)}else n.onsuccess&&n.onsuccess(n.value)},function(){g=!0,E()},x,c)})},delete:function(){var e=this,t=this._ctx,n=t.range,r=t.table.hook.deleting.fire,i=r!==J;if(!i&&we(t)&&(t.isPrimKey&&!wt||!n))return this._write(function(e,t,r){var i=xt(t),o=n?r.count(n):r.count();o.onerror=i,o.onsuccess=function(){var a=o.result;P(function(){var t=n?r.delete(n):r.clear();t.onerror=i,t.onsuccess=function(){return e(a)}},function(e){return t(e)})}});var o=i?2e3:1e4;return this._write(function(n,a,s,u){var c=0,l=e.clone({keysOnly:!t.isMatch&&!i}).distinct().limit(o).raw(),f=[],d=function(){return l.each(i?function(e,t){f.push([t.primaryKey,t.value])}:function(e,t){f.push(t.primaryKey)}).then(function(){return i?f.sort(function(e,t){return Ee(e[0],t[0])}):f.sort(Ee),me(s,u,f,i,r)}).then(function(){var e=f.length;return f=[],e<o?c+=e:d()})};n(d())})}}}),o(this,{Collection:be,Table:de,Transaction:ge,Version:ue,WhereClause:ye}),Y.on("versionchange",function(e){e.newVersion>0?console.warn("Another connection wants to upgrade database '"+Y.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+Y.name+"'. Closing db now to resume the delete request."),Y.close()}),Y.on("blocked",function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('"+Y.name+"') was blocked"):console.warn("Upgrade '"+Y.name+"' blocked by other connection holding version "+e.oldVersion/10)}),x.forEach(function(e){e(Y)})}function kt(t,n){return e(n).forEach(function(e){var i=function e(t){if("function"==typeof t)return new t;if(r(t))return[e(t[0])];if(t&&"object"==typeof t){var n={};return kt(n,t),n}return t}(n[e]);t[e]=i}),t}function St(e){return Xe(function(t){var n=t.target,r=n._hookCtx,i=r.value||n.result,o=r&&r.onsuccess;o&&o(i),e&&e(i)},e)}function xt(e){return Xe(function(t){return Tt(t),e(t.target.error),!1})}function Et(e){return Xe(function(t){e(t.target.result)})}function Ot(e){return Xe(function(t){var n=t.target,r=n.error,i=n._hookCtx,o=i&&i.onerror;return o&&o(r),Tt(t),e(r),!1})}function Tt(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}function At(e){var t=function(t){return e.next(t)},n=o(t),i=o(function(t){return e.throw(t)});function o(e){return function(t){var o=e(t),a=o.value;return o.done?a:a&&"function"==typeof a.then?a.then(n,i):r(a)?Ce.all(a).then(n,i):n(a)}}return o(t)()}function jt(e,t,n,r,i,o,a){this.name=e,this.keyPath=t,this.unique=n,this.multi=r,this.auto=i,this.compound=o,this.dotted=a;var s="string"==typeof t?t:t&&"["+[].join.call(t,"+")+"]";this.src=(n?"&":"")+(r?"*":"")+(i?"++":"")+s}function Ct(e,t,n,r){this.name=e,this.primKey=t||new jt,this.indexes=n||[new jt],this.instanceTemplate=r,this.mappedClass=null,this.idxByName=b(n,function(e){return[e.name,e]})}function It(e){return 1===e.length?e[0]:e}function Nt(e){var t=e&&(e.getDatabaseNames||e.webkitGetDatabaseNames);return t&&t.bind(e)}return R(D,Pt),c(_t,Y),c(_t,{delete:function(e){var t=new _t(e),n=t.delete();return n.onblocked=function(e){return t.on("blocked",e),this},n},exists:function(e){return new _t(e).open().then(function(e){return e.close(),!0}).catch(_t.NoSuchDatabaseError,function(){return!1})},getDatabaseNames:function(e){var t=Nt(_t.dependencies.indexedDB);return t?new Ce(function(e,n){var r=t();r.onsuccess=function(t){e(v(t.target.result,0))},r.onerror=xt(n)}).then(e):ft.dbnames.toCollection().primaryKeys(e)},defineClass:function(){return function(e){e&&o(this,e)}},applyStructure:kt,ignoreTransaction:function(e){return Oe.trans?it(Oe.transless,e):e()},vip:function(e){return Je(function(){return Oe.letThrough=!0,e()})},async:function(e){return function(){try{var t=At(e.apply(this,arguments));return t&&"function"==typeof t.then?t:Ce.resolve(t)}catch(e){return ct(e)}}},spawn:function(e,t,n){try{var r=At(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:Ce.resolve(r)}catch(e){return ct(e)}},currentTransaction:{get:function(){return Oe.trans||null}},waitFor:function(e,t){var n=Ce.resolve("function"==typeof e?_t.ignoreTransaction(e):e).timeout(t||6e4);return Oe.trans?Oe.trans.waitFor(n):n},Promise:Ce,debug:{get:function(){return D},set:function(e){R(e,"dexie"===e?function(){return!0}:Pt)}},derive:d,extend:o,props:c,override:m,Events:lt,getByKeyPath:_,setByKeyPath:k,delByKeyPath:function(e,t){"string"==typeof t?k(e,t,void 0):"length"in t&&[].map.call(t,function(t){k(e,t,void 0)})},shallowClone:S,deepClone:T,getObjectDiff:A,asap:y,maxKey:ht,minKey:pt,addons:[],connections:gt,MultiModifyError:W.Modify,errnames:z,IndexSpec:jt,TableSchema:Ct,dependencies:function(){try{return{indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch(e){return{indexedDB:null,IDBKeyRange:null}}}(),semVer:"2.0.4",version:"2.0.4".split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,2*n)}),default:_t,Dexie:_t}),Ce.rejectionMapper=function(e,t){if(!e||e instanceof H||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Q[e.name])return e;var n=new Q[e.name](t||e.message,e);return"stack"in e&&f(n,"stack",{get:function(){return this.inner.stack}}),n},(ft=new _t("__dbnames")).version(1).stores({dbnames:"name"}),function(){try{void 0!==typeof localStorage&&void 0!==i.document&&(JSON.parse(localStorage.getItem("Dexie.DatabaseNames")||"[]").forEach(function(e){return ft.dbnames.put({name:e}).catch(J)}),localStorage.removeItem("Dexie.DatabaseNames"))}catch(e){}}(),_t},e.exports=r()}).call(this,n(11),n(30).setImmediate)},function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(31),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(11))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,i,o,a,s,u=1,c={},l=!1,f=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick(function(){p(e)})}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){p(e.data)},r=function(e){o.port2.postMessage(e)}):f&&"onreadystatechange"in f.createElement("script")?(i=f.documentElement,r=function(e){var t=f.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):r=function(e){setTimeout(p,0,e)}:(a="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&p(+t.data.slice(a.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),r=function(t){e.postMessage(a+t,"*")}),d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return c[u]=i,r(u),u++},d.clearImmediate=h}function h(e){delete c[e]}function p(e){if(l)setTimeout(p,0,e);else{var t=c[e];if(t){l=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}(t)}finally{h(e),l=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(11),n(32))},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var u,c=[],l=!1,f=-1;function d(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&h())}function h(){if(!l){var e=s(d);l=!0;for(var t=c.length;t;){for(u=c,c=[];++f<t;)u&&u[f].run();f=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function v(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||l||s(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=(n=n||{}).primaryKey;this.name=t,this.primaryKey=r?{id:r.id,displayType:r.displayType||"string",defaultValue:r.defaultValue||""}:{id:"id",displayType:"string",defaultValue:""},this.indexes=n.indexes||[];for(var i=0;i<this.indexes.length;i++){var o=this.indexes[i];if(!o.defaultValue)switch(o.type){case"string":o.defaultValue="";break;case"array":o.defaultValue=[];break;case"integer":o.defaultValue=0}}n.expires&&(this.indexes.push({id:"expires",displayType:"integer",defaultValue:-1}),this.expires=n.expires),n.expiresDate&&(this.expiresDate=n.expiresDate),n.isDefault&&(this.isDefault=n.isDefault),n.buildRow&&(this.buildRow=n.buildRow),n.buildIdField&&(this.buildIdField=n.buildIdField)}},function(e,t){window.sforce=window.sforce||{};let n=window.sforce;var r=void 0!==window.UserContext?window.UserContext:{siteUrlPrefix:"",getUrl:function(e){return void 0!==e&&void 0!==r.siteUrlPrefix&&r.siteUrlPrefix?0!=e.indexOf("/")?e:0==e.indexOf(r.siteUrlPrefix)?e:r.siteUrlPrefix+e:e}};"undefined"!=typeof __sfdcSiteUrlPrefix&&(r.siteUrlPrefix=__sfdcSiteUrlPrefix),n.internal={},n.StringBuffer=function(){this.buffer=[],this.append=function(e){return this.buffer.push(e),this},this.toString=function(){return this.buffer.join("")}},n.Base64Binary=function(e){this.input=e},n.Base64Binary.prototype.keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n.Base64Binary.prototype.toString=function(){var e,t,n,r,i,o=[],a="",s="",u=0;do{n=(e=this.input.charCodeAt(u++))>>2,r=(3&e)<<4|(t=this.input.charCodeAt(u++))>>4,i=(15&t)<<2|(a=this.input.charCodeAt(u++))>>6,s=63&a,isNaN(t)?i=s=64:isNaN(a)&&(s=64),o.push(this.keyStr.charAt(n)+this.keyStr.charAt(r)+this.keyStr.charAt(i)+this.keyStr.charAt(s)),e=t=a="",n=r=i=s=""}while(u<this.input.length);return o.join("")},n.Base64Binary.prototype.decode=function(e){var t,n,r,i,o=[],a="",s="",u=0;/[^A-Za-z0-9\+\/\=]/g.exec(e)&&alert("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/', and '='\nExpect errors in decoding."),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{t=this.keyStr.indexOf(e.charAt(u++))<<2|(r=this.keyStr.indexOf(e.charAt(u++)))>>4,n=(15&r)<<4|(i=this.keyStr.indexOf(e.charAt(u++)))>>2,a=(3&i)<<6|(s=this.keyStr.indexOf(e.charAt(u++))),o.push(String.fromCharCode(t)),64!=i&&o.push(String.fromCharCode(n)),64!=s&&o.push(String.fromCharCode(a)),t=n=a="",r=i=s=""}while(u<e.length);return o.join("")},n.internal.dateToString=function(e){var t=e;return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()},n.internal.dateTimeToString=function(e){var t=e,n=t.getFullYear(),r=t.getMonth()+1,i=t.getDate(),o=t.getHours(),a=t.getMinutes(),s=t.getSeconds(),u=t.getTimezoneOffset(),c=u<0?"+":"-",l=(u=Math.abs(u))/60,f=u%60;s<=9&&(s="0"+s);var d,h=t.getMilliseconds();return 0!==h&&((h="."+h).length>4&&(h=h.substring(0,4)),s+=h),0===u?d="Z":(f<10&&(f="0"+f),l<10&&(l="0"+l),d=c+l+":"+f),r<=9&&(r="0"+r),i<=9&&(i="0"+i),o<=9&&(o="0"+o),a<=9&&(a="0"+a),n+"-"+r+"-"+i+"T"+o+":"+a+":"+s+d},n.internal.stringToDate=function(e){if(null===e||0===e.length)throw"Unable to parse dateTime";if("+"==e.charAt(0)&&(e=e.substring(1)),"-"==e.charAt(0)&&(e=e.substring(1),!0),10!=e.length)throw"Unable to parse date, "+e+" length != 10";if("-"!=e.charAt(4)||"-"!=e.charAt(7))throw"Unable to parse date";var t=e.substring(0,4),n=e.substring(5,7),r=e.substring(8,10),i=new Date(t,n-1,r,0,0,0);return i.setMilliseconds(0),i},n.internal.stringToDateTime=function(e){if(null===e||0===e.length)throw"Unable to parse dateTime";if("+"==e.charAt(0)&&(e=e.substring(1)),"-"==e.charAt(0)&&(e=e.substring(1),!0),e.length<19)throw"Unable to parse dateTime";if("-"!=e.charAt(4)||"-"!=e.charAt(7)||"T"!=e.charAt(10))throw"Unable to parse dateTime";if(":"!=e.charAt(13)||":"!=e.charAt(16))throw"Unable to parse dateTime";var t=e.substring(0,4),r=e.substring(5,7),i=e.substring(8,10),o=e.substring(11,13),a=e.substring(14,16),s=e.substring(17,19),u=new Date(t,r-1,i,o,a,s),c=19;if(c<e.length&&"."==e.charAt(c)){for(var l=0,f=++c;c<e.length&&n.internal.isDigit(e.charAt(c));)c++;var d=e.substring(f,c);3==d.length?l=d:d.length<3?l=(d+"000").substring(0,3):(l=d.substring(0,3),d.charAt(3)>="5"&&++l),u.setMilliseconds(l)}var h=6e4*u.getTimezoneOffset();if(c+5<e.length&&("+"==e.charAt(c)||"-"==e.charAt(c))){if(!(n.internal.isDigit(e.charAt(c+1))&&n.internal.isDigit(e.charAt(c+2))&&":"==e.charAt(c+3)&&n.internal.isDigit(e.charAt(c+4))&&n.internal.isDigit(e.charAt(c+5))))throw"Unable to parse dateTime";var p=60*(60*(10*(e.charAt(c+1)-"0")+e.charAt(c+2)-"0")+(10*(e.charAt(c+4)-"0")+e.charAt(c+5)-"0"))*1e3;"+"==e.charAt(c)&&(p=-p),u=new Date(u.getTime()-h+p),c+=6}if(c<e.length&&"Z"==e.charAt(c)&&(c++,u=new Date(u.getTime()-h)),c<e.length)throw"Unable to parse dateTime";return u},n.internal.isDigit=function(e){return"0"==e||"1"==e||"2"==e||"3"==e||"4"==e||"5"==e||"6"==e||"7"==e||"8"==e||"9"==e},n.Xml=function(e){},n.Xml.prototype.toXml=function(e,t,n){for(var r in n.writeStartElement(t,e),this._xsiType&&n.writeXsiType(this._xsiType),this)if("_name"==r||"_xsiType"==r);else{var i=this[r];if("function"!=typeof i)if(Array.isArray(i))for(var o=0;o<i.length;o++)this.writeValue(e,n,r,i[o]);else this.writeValue(e,n,r,i)}n.writeEndElement(t,e)},n.Xml.prototype.writeValue=function(e,t,n,r){null!==r?void 0!==r&&(r.toXml?r.toXml(e,n,t):t.writeNameValueNode(n,r)):t.writeNameValueNode("fieldsToNull",n)},n.Xml.prototype.get=function(e){return this[e]?this[e]:null},n.Xml.prototype.set=function(e,t){this[e]=t},n.Xml.prototype.getArray=function(e){var t=this[e];return t?t.join?t:[t]:[]},n.Xml.prototype.getBoolean=function(e){return"true"==this[e]},n.Xml.prototype.getDate=function(e){return this[e]?this[e].getFullYear?this[e]:n.internal.stringToDate(this[e]):null},n.Xml.prototype.getDateTime=function(e){return this[e]?this[e].getFullYear?this[e]:n.internal.stringToDateTime(this[e]):null},n.Xml.prototype.getInt=function(e){if(this[e])return"number"==typeof this[e]?this[e]:parseInt(this[e],10);throw"Unable to parse int field: "+e},n.Xml.prototype.getFloat=function(e){if(this[e])return"number"==typeof this[e]?this[e]:parseFloat(this[e]);throw"Unable to parse float field: "+e},n.Xml.prototype.getBase64Binary=function(e){if(this[e])return n.Base64Binary.prototype.decode(this[e]);throw"Unable to parse base64Binary field: "+e},n.Xml.prototype.toString=function(){var e=new n.StringBuffer;for(var t in e.append("{"),this){var r=this[t];if(r)if("object"==typeof r)e.append(t).append(":").append(r.toString());else if(r.join){e.append(t).append(":").append("[");for(var i=0;i<r.length;i++)e.append(r[i]),i<r.length-1&&e.append(", ");e.append("]")}else{if("function"==typeof r)continue;e.append(t).append(":").append("'"+r+"'")}else e.append(t).append(":").append(""+r);e.append(", ")}return e.append("}"),e.toString()},n.internal.Debug=function(){this.output=null,this.trace=!1,this.apexTrace=!1,this.win=null,this.traceQueue=[],this.quiet=!1,this.open=function(){this.println("","print")},this.println=function(e,t){this.quiet||("function"!=typeof println?(null!==this.win&&this.win.document||(this.output=null,this.win=window.open(void 0!==window.UserContext?r.getUrl("/soap/ajax/42.0/debugshell.html"):"/soap/ajax/42.0/debugshell.html","","width=800,height=400,toolbar=no,location=no,directories=no,alwaysRaised=yes,status=no,menubar=no,scrollbars=yes,copyhistory=yes,resizable=yes")),null===this.output&&this.findOutput(),null!==this.output?(n.debug.traceQueue.length>0&&this.traceCallback(),this.win.println(e,t)):(n.debug.traceQueue.push({message:e,type:t}),setTimeout(n.debug.traceCallback,1e3))):println(e,t))},this.traceCallback=function(){if(n.debug.findOutput(),null!==n.debug.output){for(var e=0;e<n.debug.traceQueue.length;e++){var t=n.debug.traceQueue[e];n.debug.win.println(t.message,t.type)}n.debug.traceQueue=[]}else setTimeout(n.debug.traceCallback,1e3)},this.findOutput=function(){return null===this.output&&(this.output=this.win.document.getElementById("output")),this.output},this.logXml=function(e){e="<textarea cols=80 rows=5 wrap=hard>"+(e=(e=e.replace(/</g,"&lt;")).replace(/>/g,"&gt;"))+"</textarea>",this.println(e,"printxml")},this.log=function(e){this.println(e,"print")},this.logApex=function(e){var t=e.indexOf("<debugLog>"),n=e.indexOf("</debugLog>");-1===t?t=0:t+="<debugLog>".length,-1===n&&(n=e.length);var r=e.substring(t,n);this.println(r,"printxml")}},n.debug=new n.internal.Debug,n.internal._connections=[],n.internal.ConnectionHolder=function(e,t){this.connection=e,this.callback=t,this.timedout=!1},n.Transport=function(e){this.url=e,this.connection=null,this.newConnection=function(){try{this.connection=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{this.connection=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){this.connection=new XMLHttpRequest}}return this.connection},this.send=function(e,t,r,i){this.newConnection(),r&&(this.connection.onreadystatechange=this.httpConnectionCallback);var o=new n.internal.ConnectionHolder(this.connection,t);n.internal._connections.push(o),this.connection.open("POST",this.url,r),this.connection.setRequestHeader("Content-Type","text/xml; charset=UTF-8"),this.connection.setRequestHeader("SOAPAction",'""'),this.connection.setRequestHeader("Accept","text/xml"),this.connection.setRequestHeader("X-SFDC-User-Agent","SFAJAX 1.0"),this.connection.send(e),r&&void 0!==i&&this.setTimeoutOn(o,i),r||this.httpConnectionCallback()},this.setTimeoutOn=function(e,t){setTimeout(function(){4!==e.connection.readyState&&(e.timedout=!0,e.connection.abort())},t)},this.httpConnectionCallback=function(){for(var e=0;e<n.internal._connections.length;e++){var t=n.internal._connections[e];if(null!==t)if(t.timedout)n.internal._connections[e]=null,n.internal._connections.slice(e,1),t.callback.httpCallback("Remote invocation timed out",!1);else if(4==t.connection.readyState){n.internal._connections[e]=null,n.internal._connections.slice(e,1);var r=200==t.connection.status;n.debug.trace&&(n.debug.log("Response : status - "+t.connection.status),n.debug.logXml(t.connection.responseText)),n.debug.apexTrace&&n.debug.logApex(t.connection.responseText),t.connection.responseXML&&t.connection.responseXML.documentElement?t.callback.httpCallback(t.connection.responseXML.documentElement,r):t.callback.httpCallback("Remote invocation failed, due to: "+t.connection.responseText+" status code: ",t.connection.status)}}}},n.XmlWriter=function(){this.buffer=new n.StringBuffer,this.namespaces={},this.prefixCount=0,this.writingStartElement=!1},n.XmlWriter.prototype.writeStartElement=function(e,t,n){this.writingStartElement&&this.buffer.append(">"),this.buffer.append("<");var r=!1;t&&(this.namespaces[t]||""===this.namespaces[t]||(r=!0),n||(n=this.getPrefix(t)),null!==n&&""!==n&&(this.buffer.append(n),this.buffer.append(":"))),this.buffer.append(e),!0===r&&this.writeNamespace(t,n),this.writingStartElement=!0},n.XmlWriter.prototype.writeEndElement=function(e,t){if(this.writingStartElement)this.buffer.append("/>");else{if(this.buffer.append("</"),t){var n=this.getPrefix(t);n&&""!==n&&(this.buffer.append(n),this.buffer.append(":"))}this.buffer.append(e),this.buffer.append(">")}this.writingStartElement=!1},n.XmlWriter.prototype.writeNamespace=function(e,t){t&&""!==t?(this.namespaces[e]=t,this.buffer.append(" "),this.buffer.append("xmlns:"),this.buffer.append(t)):(this.namespaces[e]="",this.buffer.append(" "),this.buffer.append("xmlns")),this.buffer.append('="'),this.buffer.append(e),this.buffer.append('"')},n.XmlWriter.prototype.writeText=function(e){if(!this.writingStartElement)throw"Can only write text after a start element";this.buffer.append(">"),this.writingStartElement=!1,"string"==typeof e&&(e=(e=(e=e.replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;")),this.buffer.append(e)},n.XmlWriter.prototype.writeXsiType=function(e){this.writeNamespace("http://www.w3.org/2001/XMLSchema-instance","xsi"),this.writeAttribute("xsi:type",e)},n.XmlWriter.prototype.writeAttribute=function(e,t){this.buffer.append(" "+e+'="'+t+'"')},n.XmlWriter.prototype.getPrefix=function(e){var t=this.namespaces[e];return t||""===t?t:(t="ns"+this.prefixCount,this.prefixCount++,this.namespaces[e]=t,t)},n.XmlWriter.prototype.toString=function(){return this.buffer.toString()},n.XmlWriter.prototype.soapNS="http://schemas.xmlsoap.org/soap/envelope/",n.XmlWriter.prototype.startEnvelope=function(){this.writeStartElement("Envelope",this.soapNS,"se")},n.XmlWriter.prototype.endEnvelope=function(){this.writeEndElement("Envelope",this.soapNS)},n.XmlWriter.prototype.startHeader=function(){this.writeStartElement("Header",this.soapNS,"se")},n.XmlWriter.prototype.endHeader=function(){this.writeEndElement("Header",this.soapNS)},n.XmlWriter.prototype.startBody=function(){this.writeStartElement("Body",this.soapNS,"se")},n.XmlWriter.prototype.endBody=function(){this.writeEndElement("Body",this.soapNS)},n.XmlWriter.prototype.writeNameValueNode=function(e,t){if(null===t)return this.writeStartElement(e),this.writeNamespace("http://www.w3.org/2001/XMLSchema-instance","xsi"),this.writeAttribute("xsi:nill","true"),void this.writeEndElement(e);if(t.toUTCString&&(t=n.internal.dateTimeToString(t)),"boolean"==typeof t&&(t=t?"true":"false"),t&&t.join)for(var r=0;r<t.length;r++)this.writeStartElement(e),this.writeText(t[r]),this.writeEndElement(e);else this.writeStartElement(e),this.writeText(t),this.writeEndElement(e)},n.XmlReader=function(e){this.envelope=e},n.XmlReader.prototype.getEnvelope=function(){if(this.isTag("Envelope",this.envelope))return this.envelope;throw"Unable to find soap envelope, but found "+this.envelope.nodeName},n.XmlReader.prototype.getBody=function(){return this.getChild("Body",this.envelope)},n.XmlReader.prototype.getHeader=function(){return this.getChild("Header",this.envelope)},n.XmlReader.prototype.getChild=function(e,t){for(var n=t.childNodes,r=0;r<n.length;r++)if(1==n[r].nodeType&&this.isTag(e,n[r]))return n[r];return null},n.XmlReader.prototype.getFirstElement=function(e){for(var t=e.childNodes,n=0;n<t.length;n++)if(1==t[n].nodeType)return t[n];return null},n.XmlReader.prototype.isTag=function(e,t){var n=t.nodeName.split(":");return 2==n.length&&n[1]==e||1==n.length&&n[0]==e},n.XmlReader.prototype.isNameValueNode=function(e){for(var t=e.childNodes,n=0;n<t.length;n++)if(3!=t[n].nodeType)return!1;return!0},n.XmlReader.prototype.getTextValue=function(e){if(3==e.nodeType)return e.nodeValue;if("true"==e.getAttribute("xsi:nil"))return null;for(var t="",n=e.childNodes,r=0;r<n.length;r++){if(3!=n[r].nodeType)throw"Not a simple name value node";t+=n[r].nodeValue}return t},n.XmlReader.prototype.toXmlObject=function(e){if("true"==e.getAttribute("xsi:nil"))return null;var t=new n.Xml,r=[];for(r.push({node:e,obj:t});r.length>0;)for(var i=r.shift(),o=i.node.firstChild;null!==o;o=o.nextSibling)if(1==o.nodeType){var a,s=o.nodeName,u=s.indexOf(":");s=-1==u?s:s.substring(u+1);for(var c=!0,l="",f=o.firstChild;null!==f;f=f.nextSibling){if(3!=f.nodeType){c=!1;break}l+=f.nodeValue}if(c?a="true"==o.getAttribute("xsi:nil")?null:l:(a=new n.Xml,r.push({node:o,obj:a})),i.obj[s])if(i.obj[s].push)i.obj[s].push(a);else{var d=i.obj[s];"Id"===s&&d===a||(i.obj[s]=[],i.obj[s].push(d),i.obj[s].push(a))}else i.obj[s]=a}return t},n.SoapTransport=function(){this.connectionCallback=null,this.result=null,this.fault=null,this.isAsync=!0,this.isArray=!1},n.SoapTransport.prototype.onFailure=function(e,t){alert("ERROR: ........... "+e),this.result=null},n.SoapTransport.prototype.send=function(e,t,r,i){this.isArray=r;var o=new n.Transport(e);if(this.isAsync=!!i,!this.isAsync){if(o.send(t.toString(),this,this.isAsync),null!==this.fault)throw this.fault;return this.result}this.connectionCallback=i,o.send(t.toString(),this,this.isAsync,i.timeout)},n.SoapTransport.prototype.httpCallback=function(e,t){try{if(!0===t){var r=new n.XmlReader(e),i=(r.getEnvelope(),r.getBody()),o=r.getFirstElement(i);if(null===o)throw"Unable to find operation response element";for(var a=[],s=o.childNodes,u=0;u<s.length;u++)1==s[u].nodeType&&(r.isNameValueNode(s[u])?a.push(r.getTextValue(s[u])):a.push(r.toXmlObject(s[u])));if(this.isArray)this.result=a;else{if(a.length>1)throw"Found more than one response: "+a;this.result=a[0]}if(this.isAsync)try{if(this.beforeCallback(),"function"==typeof this.connectionCallback)this.connectionCallback(this.result);else{if(!this.connectionCallback.onSuccess)throw"Unable to find onSuccess method in the callback object";this.connectionCallback.onSuccess(this.result,this.connectionCallback.source)}}finally{this.afterCallback()}}else if(void 0!==e.nodeName){var c=new n.XmlReader(e),l=(c.getEnvelope(),c.getBody()),f=c.getFirstElement(l),d=c.toXmlObject(f);this.sendFault(d)}else this.sendFault(e)}catch(e){this.sendFault(e)}},n.SoapTransport.prototype.sendFault=function(e){if(this.isAsync)if(this.connectionCallback.onFailure)try{this.beforeCallback(),this.connectionCallback.onFailure(e,this.connectionCallback.source)}finally{this.afterCallback()}else this.onFailure(e);else this.fault=e},n.SoapTransport.prototype.beforeCallback=function(){},n.SoapTransport.prototype.afterCallback=function(){},n.SObject=function(e){this.type=e},n.SObject.prototype=new n.Xml("sObjects"),n.LeadConvert=function(){},n.LeadConvert.prototype=new n.Xml("leadConverts"),n.MergeRequest=function(){},n.MergeRequest.prototype=new n.Xml("request"),n.DescribeSoqlListViewsRequest=function(){},n.DescribeSoqlListViewsRequest.prototype=new n.Xml("request"),n.DescribeSoqlListViewParams=function(){},n.DescribeSoqlListViewParams.prototype=new n.Xml("listViewParams"),n.QuickAction=function(){},n.QuickAction.prototype=new n.Xml("quickActions"),n.Connection=function(){this.sessionId=null,this.updateMru=null,this.allowFieldTruncation=null,this.disableFeedTracking=null,this.streamingEnabled=null,this.allOrNone=null,this.client=null,this.defaultNamespace=null,this.batchSize=null,this.loginScopeHeader=null,this.emailHeader=null,this.assignmentRuleHeader=null,this.duplicateRuleHeader=null,this.transferToUserId=null,this.debuggingHeader=null,this.serverUrl=void 0!==window.UserContext?r.getUrl("/services/Soap/u/42.0"):"/services/Soap/u/42.0"},n.internal.Parameter=function(e,t,n){this.name=e,this.value=t,this.isArray=n},n.Connection.prototype.sforceNs="urn:partner.soap.sforce.com",n.Connection.prototype.sobjectNs="sobject.partner.soap.sforce.com",n.Connection.prototype.writeOne=function(e,t,n,r){null===n?e.writeNameValueNode(t,null):n.toXml?n.toXml(r,t,e):e.writeNameValueNode(t,n)},n.Connection.prototype.init=function(e,t){this.sessionId=e,this.serverUrl=t},n.Connection.prototype.login=function(e,t){var r=new n.internal.Parameter("username",e,!1),i=new n.internal.Parameter("password",t,!1),o=this.invoke("login",[r,i],!1,null);return this.sessionId=o.sessionId,o},n.Connection.prototype.describeSObject=function(e,t){var r=new n.internal.Parameter("sObjectType",e,!1);return this.invoke("describeSObject",[r],!1,t)},n.Connection.prototype.describeSObjects=function(e,t){var r=new n.internal.Parameter("sObjectType",e,!0);return this.invoke("describeSObjects",[r],!0,t)},n.Connection.prototype.describeSearchLayouts=function(e,t){var r=new n.internal.Parameter("sObjectType",e,!0);return this.invoke("describeSearchLayouts",[r],!0,t)},n.Connection.prototype.describeListViews=function(e,t){var r=new n.internal.Parameter("sObjectType",e,!0);return this.invoke("describeListViews",[r],!0,t)},n.Connection.prototype.describeSoqlListViews=function(e,t,r){var i=new n.DescribeSoqlListViewParams;i.developerNameOrId=e,i.sobjectType=t;var o=new n.DescribeSoqlListViewsRequest;o.listViewParams=[i];var a=new n.internal.Parameter("request",o,!1);return this.invoke("describeSoqlListViews",[a],!1,r)},n.Connection.prototype.describeGlobal=function(e){return this.invoke("describeGlobal",[],!1,e)},n.Connection.prototype.describeLayout=function(e,t,r,i){var o=new n.internal.Parameter("sObjectType",e,!1);t||(t=null);var a=new n.internal.Parameter("layoutName",t,!1);r||(r=[]);var s=new n.internal.Parameter("recordTypeIds",r,!0);return this.invoke("describeLayout",[o,a,s],!1,i)},n.Connection.prototype.describeAvailableQuickActions=function(e,t){var r=new n.internal.Parameter("parentType",e,!1);return this.invoke("describeAvailableQuickActions",[r],!0,t)},n.Connection.prototype.describeQuickActions=function(e,t){var r=new n.internal.Parameter("quickActionNames",e,!0);return this.invoke("describeQuickActions",[r],!0,t)},n.Connection.prototype.performQuickActions=function(e,t){var r=new n.internal.Parameter("quickActions",e,!0);return this.invoke("performQuickActions",[r],!0,t)},n.Connection.prototype.describeCompactLayouts=function(e,t,r){var i=new n.internal.Parameter("sObjectType",e,!1);t||(t=[]);var o=new n.internal.Parameter("recordTypeIds",t,!0);return this.invoke("describeCompactLayouts",[i,o],!1,r)},n.Connection.prototype.describePathAssistants=function(e,t,r,i){var o=new n.internal.Parameter("sObjectType",e,!1);t||(t=null);var a=new n.internal.Parameter("picklistValue",t,!1);r||(r=[]);var s=new n.internal.Parameter("recordTypeIds",r,!0);return this.invoke("describePathAssistants",[o,a,s],!1,i)},n.Connection.prototype.describePrimaryCompactLayouts=function(e,t){var r=new n.internal.Parameter("sObjectTypes",e,!0);return this.invoke("describePrimaryCompactLayouts",[r],!0,t)},n.Connection.prototype.describeApprovalLayout=function(e,t,r){var i=new n.internal.Parameter("sObjectType",e,!1);t||(t=[]);var o=new n.internal.Parameter("approvalProcessNames",t,!0);return this.invoke("describeApprovalLayout",[i,o],!1,r)},n.Connection.prototype.describeSObjectListViews=function(e,t,r){var i=new n.internal.Parameter("sObjectType",e,!1),o=new n.internal.Parameter("recentlyViewed",t,!1),a=new n.internal.Parameter("isSoqlCompatible",isSoqlCompatible,!1),s=new n.internal.Parameter("limit",limit,!1),u=new n.internal.Parameter("offset",offset,!1);return this.invoke("describeSObjectListViews",[i,o,a,s,u],!0,r)},n.Connection.prototype.describeTabs=function(e){return this.invoke("describeTabs",[],!0,e)},n.Connection.prototype.describeAllTabs=function(e){return this.invoke("describeAllTabs",[],!0,e)},n.Connection.prototype.describeAppMenu=function(e,t,r){var i=new n.internal.Parameter("appMenuType",e,!1),o=new n.internal.Parameter("networkId",t,!1);return this.invoke("describeAppMenu",[i,o],!0,r)},n.Connection.prototype.describeFlexiPages=function(e,t){var r=new n.internal.Parameter("FlexiPage",e,!1);return this.invoke("describeFlexiPages",[r],!0,t)},n.Connection.prototype.describeTheme=function(e){return this.invoke("describeTheme",[],!0,e)},n.Connection.prototype.describeGlobalTheme=function(e){return this.invoke("describeGlobalTheme",[],!0,e)},n.Connection.prototype.describeSoftphoneLayout=function(e){return this.invoke("describeSoftphoneLayout",[],!1,e)},n.Connection.prototype.describeMiniLayout=function(e,t,r){var i=new n.internal.Parameter("sObjectType",e,!1),o=new n.internal.Parameter("recordTypeIds",t,!0);return this.invoke("describeMiniLayout",[i,o],!1,r)},n.Connection.prototype.describeSearchScopeOrder=function(e){return this.invoke("describeSearchScopeOrder",[],!0,e)},n.Connection.prototype.create=function(e,t){var r=new n.internal.Parameter("sObjects",e,!0);return this.invoke("create",[r],!0,t)},n.Connection.prototype.update=function(e,t){var r=new n.internal.Parameter("sObjects",e,!0);return this.invoke("update",[r],!0,t)},n.Connection.prototype.upsert=function(e,t,r){var i=new n.internal.Parameter("externalIDFieldName",e,!1),o=new n.internal.Parameter("sObjects",t,!0);return this.invoke("upsert",[i,o],!0,r)},n.Connection.prototype.deleteIds=function(e,t){var r=new n.internal.Parameter("ids",e,!0);return this.invoke("delete",[r],!0,t)},n.Connection.prototype.deleteByExample=function(e,t){var r=new n.internal.Parameter("sObjects",e,!0);return this.invoke("deleteByExample",[r],!0,t)},n.Connection.prototype.impersonateUser=function(e,t){var r=new n.internal.Parameter("ids",e,!0);return this.invoke("impersonateUser",[r],!0,t)},n.Connection.prototype.query=function(e,t){var r=new n.internal.Parameter("queryString",e,!1);return this.invoke("query",[r],!1,t)},n.Connection.prototype.queryAll=function(e,t){var r=new n.internal.Parameter("queryString",e,!1);return this.invoke("queryAll",[r],!1,t)},n.Connection.prototype.queryMore=function(e,t){var r=new n.internal.Parameter("queryLocator",e,!1);return this.invoke("queryMore",[r],!1,t)},n.Connection.prototype.retrieve=function(e,t,r,i){var o=new n.internal.Parameter("fieldList",e,!1),a=new n.internal.Parameter("sObjectType",t,!1),s=new n.internal.Parameter("ids",r,!0);return this.invoke("retrieve",[o,a,s],!0,i)},n.Connection.prototype.getAccessInfo=function(e){return this.invoke("getAccessInfo",[],!1,e)},n.Connection.prototype.getUserInfo=function(e){return this.invoke("getUserInfo",[],!1,e)},n.Connection.prototype.resetPassword=function(e,t){var r=new n.internal.Parameter("userId",e,!1);return this.invoke("resetPassword",[r],!1,t)},n.Connection.prototype.setPassword=function(e,t,r){var i=new n.internal.Parameter("userId",e,!1),o=new n.internal.Parameter("password",t,!1);return this.invoke("setPassword",[i,o],!1,r)},n.Connection.prototype.search=function(e,t){var r=new n.internal.Parameter("searchString",e,!1);return this.invoke("search",[r],!1,t)},n.Connection.prototype.getDeleted=function(e,t,r,i){var o=new n.internal.Parameter("sObjectType",e,!1),a=new n.internal.Parameter("startDate",t,!1),s=new n.internal.Parameter("endDate",r,!1);return this.invoke("getDeleted",[o,a,s],!1,i)},n.Connection.prototype.getUpdated=function(e,t,r,i){var o=new n.internal.Parameter("sObjectType",e,!1),a=new n.internal.Parameter("startDate",t,!1),s=new n.internal.Parameter("endDate",r,!1);return this.invoke("getUpdated",[o,a,s],!1,i)},n.Connection.prototype.getServerTimestamp=function(e){return this.invoke("getServerTimestamp",[],!1,e)},n.Connection.prototype.convertLead=function(e,t){var r=new n.internal.Parameter("leadConverts",e,!0);return this.invoke("convertLead",[r],!0,t)},n.Connection.prototype.merge=function(e,t){var r=new n.internal.Parameter("request",e,!0);return this.invoke("merge",[r],!0,t)},n.Connection.prototype.findDuplicates=function(e,t){var r=new n.internal.Parameter("sObjects",e,!0);return this.invoke("findDuplicates",[r],!0,t)},n.Connection.prototype.findDuplicatesByIds=function(e,t){var r=new n.internal.Parameter("ids",e,!0);return this.invoke("findDuplicatesByIds",[r],!0,t)},n.Connection.prototype.undelete=function(e,t){var r=new n.internal.Parameter("ids",e,!0);return this.invoke("undelete",[r],!0,t)},n.Connection.prototype.process=function(e,t){var r=new n.internal.Parameter("actions",e,!0);return this.invoke("process",[r],!0,t)},n.Connection.prototype.sendEmail=function(e,t){var r=new n.internal.Parameter("messages",e,!0);return this.invoke("sendEmail",[r],!0,t)},n.Connection.prototype.emptyRecycleBin=function(e,t){var r=new n.internal.Parameter("ids",e,!0);return this.invoke("emptyRecycleBin",[r],!0,t)},n.Connection.prototype.invalidateSessions=function(e,t){var r=new n.internal.Parameter("sessionIds",e,!0);return this.invoke("invalidateSessions",[r],!0,t)},n.Connection.prototype.logout=function(e){return this.invoke("logout",[],!0,e)},n.Connection.prototype.remoteFunction=function(e){if(!e.url)throw"url not defined";if(!e.onSuccess)throw"onSuccess method not defined";if(e.method||(e.method="GET"),e.mimeType||(e.mimeType="text/plain"),void 0===e.async&&(e.async=!0),void 0===e.cache&&(e.cache=!1),"text/plain"!=e.mimeType&&"text/xml"!=e.mimeType)throw"Unknown mime type "+e.mimeType;n.debug.trace&&n.debug.log("Open connection to ... "+e.url);var t=(new n.Transport).newConnection(),i=void 0!==window.UserContext?r.getUrl("/services/proxy"):"/services/proxy";if(i=e.cache?i+"?end-point-url="+e.url:i+"?no-cache="+(new Date).getTime(),t.open(e.method,i,e.async),e.requestHeaders)for(var o in e.requestHeaders)"function"!=typeof e.requestHeaders[o]&&t.setRequestHeader(o,e.requestHeaders[o]);function a(){if(n.debug.trace&&n.debug.log("callback called ..."),4==t.readyState)if(200==t.status)if("text/plain"==e.mimeType)e.onSuccess(t.responseText,t);else{if("text/xml"!=e.mimeType)throw"unsupported mime type: "+e.mimeType;if(!t.responseXML||!t.responseXML.documentElement)throw"Response not text/xml mime type: "+t.responseText;e.onSuccess(t.responseXML.documentElement,t)}else e.onFailure?e.onFailure(t.responseText,t):n.debug.log(t.responseText)}t.setRequestHeader("SalesforceProxy-Endpoint",e.url),t.setRequestHeader("SalesforceProxy-SID",this.sessionId),e.async&&(t.onreadystatechange=a),n.debug.trace&&n.debug.log("Sending ..."),e.requestData?t.send(e.requestData):t.send(null),n.debug.trace&&n.debug.log("Done Sending ..."),e.async||a()},n.Connection.prototype.writeHeader=function(e,t){if(e.startHeader(),e.writeNamespace(t,"sfns"),null!==this.sessionId&&(e.writeStartElement("SessionHeader",t),e.writeNameValueNode("sessionId",this.sessionId),e.writeEndElement("SessionHeader",t)),void 0!==this.organizationId)throw"Use sforce.connection.loginScopeHeader.organizationId instead of sforce.connection.organizationId";if(null!==this.loginScopeHeader&&(e.writeStartElement("LoginScopeHeader",t),null!==this.loginScopeHeader.organizationId&&e.writeNameValueNode("organizationId",this.loginScopeHeader.organizationId),null!==this.loginScopeHeader.portalId&&e.writeNameValueNode("portalId",this.loginScopeHeader.portalId),e.writeEndElement("LoginScopeHeader",t)),null===this.client&&null===this.defaultNamespace||(e.writeStartElement("CallOptions",t),null!==this.client&&e.writeNameValueNode("client",this.client),null!==this.defaultNamespace&&e.writeNameValueNode("defaultNamespace",this.defaultNamespace),e.writeEndElement("CallOptions",t)),null!==this.batchSize&&(e.writeStartElement("QueryOptions",t),e.writeNameValueNode("batchSize",this.batchSize),e.writeEndElement("QueryOptions",t)),null!==this.allowFieldTruncation&&(e.writeStartElement("AllowFieldTruncationHeader",t),e.writeNameValueNode("allowFieldTruncation",this.allowFieldTruncation),e.writeEndElement("AllowFieldTruncationHeader",t)),null!==this.disableFeedTracking&&(e.writeStartElement("DisableFeedTrackingHeader",t),e.writeNameValueNode("disableFeedTracking",this.disableFeedTracking),e.writeEndElement("DisableFeedTrackingHeader",t)),null!==this.streamingEnabled&&(e.writeStartElement("StreamingEnabledHeader",t),e.writeNameValueNode("StreamingEnabled",this.streamingEnabled),e.writeEndElement("StreamingEnabledHeader",t)),null!==this.allOrNone&&(e.writeStartElement("AllOrNoneHeader",t),e.writeNameValueNode("allOrNone",this.allOrNone),e.writeEndElement("AllOrNoneHeader",t)),null!==this.updateMru&&(e.writeStartElement("MruHeader",t),e.writeNameValueNode("updateMru",this.updateMru),e.writeEndElement("MruHeader",t)),null!==this.emailHeader&&(e.writeStartElement("EmailHeader",t),this.emailHeader.triggerAutoResponseEmail&&e.writeNameValueNode("triggerAutoResponseEmail",this.emailHeader.triggerAutoResponseEmail),this.emailHeader.triggerOtherEmail&&e.writeNameValueNode("triggerOtherEmail",this.emailHeader.triggerOtherEmail),this.emailHeader.triggerUserEmail&&e.writeNameValueNode("triggerUserEmail",this.emailHeader.triggerUserEmail),e.writeEndElement("EmailHeader",t)),null!==this.assignmentRuleHeader&&(e.writeStartElement("AssignmentRuleHeader",t),this.assignmentRuleHeader.assignmentRuleId&&e.writeNameValueNode("assignmentRuleId",this.assignmentRuleHeader.assignmentRuleId),this.assignmentRuleHeader.useDefaultRule&&e.writeNameValueNode("useDefaultRule",this.assignmentRuleHeader.useDefaultRule),e.writeEndElement("AssignmentRuleHeader",t)),null!==this.transferToUserId&&(e.writeStartElement("UserTerritoryDeleteHeader",t),e.writeNameValueNode("transferToUserId",this.transferToUserId),e.writeEndElement("UserTerritoryDeleteHeader",t)),null!==this.duplicateRuleHeader&&(e.writeStartElement("DuplicateRuleHeader",t),this.duplicateRuleHeader.allowSave&&e.writeNameValueNode("allowSave",this.duplicateRuleHeader.allowSave),this.duplicateRuleHeader.includeRecordDetails&&e.writeNameValueNode("includeRecordDetails",this.duplicateRuleHeader.includeRecordDetails),this.duplicateRuleHeader.runAsCurrentUser&&e.writeNameValueNode("runAsCurrentUser",this.duplicateRuleHeader.runAsCurrentUser),e.writeEndElement("DuplicateRuleHeader",t)),null!==this.debuggingHeader){if(e.writeStartElement("DebuggingHeader",t),this.debuggingHeader.debugLevel&&e.writeNameValueNode("debugLevel",this.debuggingHeader.debugLevel),this.debuggingHeader.debugCategories)for(var n=this.debuggingHeader.debugCategories,r=0;r<n.length;r++){var i=n[r].split(",");2==i.length&&(e.writeStartElement("categories"),e.writeNameValueNode("category",i[0]),e.writeNameValueNode("level",i[1]),e.writeEndElement("categories"))}e.writeEndElement("DebuggingHeader",t)}e.endHeader()},n.Connection.prototype.namespaceMap=[{ns:n.Connection.prototype.sforceNs,prefix:null},{ns:n.Connection.prototype.sobjectNs,prefix:"ns1"}],n.Connection.prototype.invoke=function(e,t,n,r){return this._invoke(e,t,n,r,this.namespaceMap,this.serverUrl,this.sforceNs,this.sobjectNs)},n.Connection.prototype._invoke=function(e,t,r,i,o,a,s,u){if(i)if("function"==typeof i);else{if(!i.onSuccess)throw"onSuccess not defined in the callback";if(!i.onFailure)throw"onFailure not defined in the callback"}var c=new n.XmlWriter;c.startEnvelope(),this.writeHeader(c,s),c.startBody(),c.writeStartElement(e);for(var l=0;l<o.length;l++)c.writeNamespace(o[l].ns,o[l].prefix);for(l=0;l<t.length;l++){var f=t[l];if(void 0===f.value)throw"arg "+l+" '"+f.name+"' not specified";if(null!==f.value){if(f.isArray&&!f.value.push)throw"arg "+l+" '"+f.name+"' is an array. But passed in value is not an array";if(!f.isArray&&f.value.push)throw"arg "+l+" '"+f.name+"' is not an array. But passed in value is an array"}if(null===f.value)this.writeOne(c,f.name,null,u);else if(f.value.push)for(var d=0;d<f.value.length;d++){var h=f.value[d];if(!h)throw"Array element at "+d+" is null.";this.writeOne(c,f.name,h,u)}else this.writeOne(c,f.name,f.value,u)}return c.writeEndElement(e),c.endBody(),c.endEnvelope(),n.debug.trace&&(n.debug.log("Request: server- "+a),n.debug.logXml(c.toString())),(new n.SoapTransport).send(a,c,r,i)},n.QueryResultIterator=function(e){this.queryResult=e,this.index=0,this.records=this.queryResult.getArray("records")},n.QueryResultIterator.prototype.hasNext=function(){return this.records.length>this.index||(null!==this.queryResult.queryLocator&&(this.queryResult=n.connection.queryMore(this.queryResult.queryLocator),this.records=this.queryResult.getArray("records"),this.index=0),this.records.length>this.index)},n.QueryResultIterator.prototype.next=function(){if(this.records.length>this.index){var e=this.records[this.index];return this.index++,e}throw"Index out of bound : "+this.index},n.Email=function(){},n.Email.prototype=new n.Xml("messages"),n.MassEmailMessage=function(){},n.MassEmailMessage.prototype=new n.Xml("messages"),n.MassEmailMessage.prototype._xsiType="MassEmailMessage",n.SingleEmailMessage=function(){},n.SingleEmailMessage.prototype=new n.Xml("messages"),n.SingleEmailMessage.prototype._xsiType="SingleEmailMessage",n.ProcessRequest=function(){},n.ProcessRequest.prototype=new n.Xml("actions"),n.ProcessSubmitRequest=function(){},n.ProcessSubmitRequest.prototype=new n.Xml("actions"),n.ProcessSubmitRequest.prototype._xsiType="ProcessSubmitRequest",n.ProcessWorkitemRequest=function(){},n.ProcessWorkitemRequest.prototype=new n.Xml("actions"),n.ProcessWorkitemRequest.prototype._xsiType="ProcessWorkitemRequest",n.connection=new n.Connection,n.connection.serverUrl=void 0!==window.UserContext?r.getUrl("/services/Soap/u/42.0"):"/services/Soap/u/42.0","undefined"!=typeof __sfdcSessionId&&(n.connection.sessionId=__sfdcSessionId)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=n(6),a=n(0),s=n(36),u=(r=s)&&r.__esModule?r:{default:r};function c(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var l="",f="color: #0095cc; border-left: solid 0.5em #ff5f00; padding-left: 1em;",d="font-weight: bold; color: #888;",h="font-weight: normal;",p="border: 2px solid #ff5f00; padding: 1em; background-color: #0095cc; color: black; margin: 1em;",v="skuid__debug_noiseLevel",m=1,g=2,y=["quiet","normal","verbose"];function b(e,t,n){console.groupCollapsed&&(console.groupCollapsed("%c"+l+e+": "+t,f),Object.keys(n).forEach(function(e){var t=n[e];(0,a.isString)(t)?console.log("%c"+e+": %c"+t,d,h):console.log("%c"+e+":",d,t)}),console.groupEnd())}var w=[];function P(e,t,n){w[n]||(console.groupCollapsed&&(console.groupCollapsed("%c"+l+e,f),console.log("%c"+t+" "+l+l+l,p),console.groupEnd()),n&&(w[n]=!0))}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];P("You found Skuid's Debug Tool!","NOTICE: The Skuid Debug API is intended for use as a debugging aid in development environments by admins and software engineers. This tool is not supported as a stable API and should not be used in custom JS bound for production environments. You have been warned.","debugwarning");var n=(0,o.getPageList)();return e&&e.length>0&&(n=n.filter(function(t){return t.page.name.toLowerCase().includes(e.toLowerCase())||t.page.pageComponent.id().includes(e)||t.page.id.toLowerCase().includes(e.toLowerCase())})),A>=g&&t&&k(n),n}function k(e){Array.isArray(e)||(e=e?[e]:[]),e.forEach(function(e){return b("Page",e.page.name+" ("+e.page.pageComponent.id()+")",{Name:e.page.name,"Component Id":e.page.pageComponent.id(),"Record Id":e.page.id,"API Version":e.version.id})}),0===e.length&&A>=g&&P("Having trouble finding your Page?",'You can search across Page Names, Component IDs and Record IDs. The search term you pass in is case-insensitive and will match partial results. For example "bar" will match a Page named "FooBar". You may only enter one search term at a time (spaces, commas, etc, are not supported)',"nopagesfound")}function S(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=t.split(":"),o=i(r,2),a=o[0],s=o[1];s||(s=a,a=null);var u=(e=[]).concat.apply(e,c(_(a,!1).map(function(e){return e.model.list()})));return s.length>0&&(s=s.toLowerCase(),u=u.filter(function(e){return e.id.toLowerCase().includes(s)||e.label.toLowerCase().includes(s)||e.getDataSourceType().name.toLowerCase().includes(s)||e.getDataSource().name.toLowerCase().includes(s)||e.objectName&&e.objectName.toLowerCase().includes(s)})),A>=g&&n&&x(u),u}function x(e){Array.isArray(e)||(e=e?[e]:[]),e.forEach(function(e){return b("Model",e.id+" ("+e.getDataSourceType().name+": "+e.getDataSource().name+")",{Id:e.id,"Parent Page":e.getParentPage().getPageAPI().page.name+" ("+e.getParentPage().id()+") - "+e.getParentPage().getPageAPI().version.id,"Data Source Type":e.getDataSourceType().name,"Data Source":e.getDataSource().name,"Row Count":e.getRows().length,"Field Count":e.fields.length})}),0===e.length&&A>=g&&P("Having trouble finding your Model?",'You can search across Model Id, Label, Data Source Type Name, Data Source Name and Object Name. The search term you pass in is case-insensitive and will match partial results. For example "bar" will match a Model named "FooBar". You may only enter one search term at a time (spaces, commas, etc, are not supported). If you would like to restrict your search to a loaded Page, you may prefix a Page search term with a colon, like so: "page:model".',"nomodelsfound")}function E(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=t.split(":"),o=i(r,2),a=o[0],s=o[1];void 0===s&&(s=a,a=null);var u=(e=[]).concat.apply(e,c(_(a,!1).map(function(e){return e.component.getAll()})));return s||(s=""),s.length>0&&(s=s.toLowerCase(),u=u.filter(function(e){return e.id().toLowerCase().includes(s)||e.type().toLowerCase().includes(s)})),A>=g&&n&&O(u),u}function O(e){Array.isArray(e)||(e=e?[e]:[]),e.forEach(function(e){var t=e.getParentComponent();b("Component",e.id()+" ("+e.type()+")",{Id:e.id(),Type:e.type(),"Parent Page":e.getParentPage().getPageAPI().page.name+" ("+e.getParentPage().id()+") - "+e.getParentPage().getPageAPI().version.id,"Parent Component":t?t.id()+" ("+t.type()+")":"None",Element:e.element[0]})}),0===e.length&&A>=g&&P("Having trouble finding your Component?",'You can search across Component Id and Type. The search term you pass in is case-insensitive and will match partial results. For example "bar" will match a Component named "FooBar". You may only enter one search term at a time (spaces, commas, etc, are not supported). If you would like to restrict your search to a loaded Page, you may prefix a Page search term with a colon, like so: "page:component".',"nocomponentsfound")}var T=(0,n(19).canUseLocalStorage)(),A=(T&&parseInt(localStorage.getItem(v))+1||m+1)-1;t.default={component:function(e){var t=E(e,!1)[0];return A>=m&&O(t),t},componentMap:function(e){return E(e).reduce(function(e,t){return e[t.getParentPage().getPageAPI().page.name+"("+t.getParentPage().id()+"):"+t.id()]=t,e[t.id()]=t,e},{})},components:E,model:function(e){var t=S(e,!1)[0];return A>=m&&x(t),t},modelMap:function(e){return S(e).reduce(function(e,t){return e[t.getParentPage().getPageAPI().page.name+"("+t.getParentPage().id()+"):"+t.id]=t,e[t.id]=t,e},{})},models:S,noise:function(e){if((0,a.isString)(e))e=e.toLowerCase(),y.includes(e)&&(A=y.indexOf(e),T&&localStorage.setItem(v,A));else if((0,a.isNumber)(e)&&e>=0&&e<y.length)A=Math.floor(e),T&&localStorage.setItem(v,A);else if(11===e){var t="https://upload.wikimedia.org/wikipedia/en/0/06/Spinal_Tap_-_Up_to_Eleven.jpg",n=new Image;return n.onload=function(){console.log("%c ","font-size: 1px; line-height: "+this.height+"px; padding: 0 "+this.width/2+"px; background-size: "+this.width+"px "+this.height+'px; background: url("'+t+'"); background-repeat: no-repeat;'),console.log("Noise level set to one louder")},void(n.src=t)}console.log("Noise level set to "+y[A])},page:function(e){var t=_(e,!1)[0];return A>=m&&k(t),t},pageMap:function(e){return _(e).reduce(function(e,t){return e[t.page.name+"("+t.page.pageComponent.id()+")"]=t,e},{})},pages:_,actions:u.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="actionLoggingOn",i="actionThreshold",o=(0,n(19).canUseSessionStorage)(),a=void 0;function s(){var e;(e=console).log.apply(e,arguments)}var u=void 0;function c(){if(void 0!==a)return a;if(o){var e=window.sessionStorage.getItem(r);a="true"===e}return a}t.default={loggingOn:function(){o&&window.sessionStorage.setItem(r,"true"),a=!0,s("Action logging: enabled")},loggingOff:function(){o&&(window.sessionStorage.removeItem(r),window.sessionStorage.removeItem(i)),a=!1,s("Action logging: disabled")},setTimeThreshold:function(e){if(c())return e|=0,o&&window.sessionStorage.setItem(i,""+e),u=e,s("Set action time threshold"),e;s('Setting the time threshold has no impact with logging disabled.\nTry running "skuid.debug.actions.loggingOn()" first.')},_logging:c,_threshold:function(){if(void 0===u&&o){var e=window.sessionStorage.getItem(i);u=e?0|e:1e3}return u},_log:s,_error:function(){var e;(e=console).error.apply(e,arguments)}}}]);