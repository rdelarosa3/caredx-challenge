!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=335)}({1:function(e){e.exports={v1:{id:"v1",isLegacy:!0,isLatest:!0,path:"v1",released:!0},v2:{id:"v2",path:"next",released:!1}}},3:function(e,t,n){"use strict";n.r(t),n.d(t,"apiVersionsArray",function(){return a});var r=n(1);const a=Object.keys(r).map(e=>Object.assign({id:e},r[e]));t.default=r},335:function(e,t,n){"use strict";n.r(t);n(43)},43:function(e,t,n){"use strict";var r,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(3),s=(r=o)&&r.__esModule?r:{default:r};window.skuid||(window.skuid={}),function(e){var t=e.$,n=e.$L,r="application/json",u=e.ajax,c=e.coreAssetBase||"",l=s.default.v1.path,d=e.native&&e.native.instanceUrl||"",p={},f={},m={auth_provider:{auth_method:"auth_method",authorize_endpoint_url:"authorize_endpoint_url",client_id:"client_id",client_secret:"client_secret",default_scopes:"default_scopes",id:"id",name:"name",oauth_grant_type:"oauth_grant_type",oauth_provider_type:"oauth_provider_type",request_headers:"request_headers",token_endpoint_url:"token_endpoint_url",token_request_body_parameters:"token_request_body_parameters"},auth_provider_credential:{access_token:"access_token",access_token_expiration:"access_token_expiration",access_token_issued:"access_token_issued",auth_provider_id:"auth_provider_id",auth_provider_name:"auth_provider_name",id:"id",refresh_token:"refresh_token",user_id:"user_id"},data_service:{host:"host",id:"id",name:"name",port:"port",version:"version",is_active:"is_active"},data_source:{authentication:"authentication",auth_request_body:"auth_request_body",auth_request_body_content_type:"auth_request_body_content_type",auth_request_headers:"auth_request_headers",auth_request_verb:"auth_request_verb",auth_url:"auth_url",credential_source:"credential_source",data_service_id:"data_service_id",data_service:"data_service",external_id:"external_id",id:"id",is_active:"is_active",name:"name",password:"password",request_body_parameters:"request_body_parameters",request_headers:"request_headers",request_url_parameters:"request_url_parameters",url:"url",username:"username",use_proxy:"use_proxy",type:"type"},data_source_credential:{id:"id",password:"password",user_id:"user_id",username:"username"},page:{api_version:"api_version",composer_settings:"composer_settings",id:"id",is_master_page:"is_master_page",master_page:"master_page",master_page_id:"master_page_id",max_auto_saves:"max_auto_saves",module:"module",name:"name",updated_at:"updated_at"},page_version:{api_version:"api_version",id:"id"},profile:{id:"id",name:"name"},static_resource:{id:"id",name:"name",namespace:"",content_type:"content_type"},theme:{id:"id",name:"name",resource_name:null,resource_namespace:null,type:"type",version_date:"version_date",active:"active"}},g={},h=null,v=void 0;function y(t){var n=t.valueTemplates||{name:"{{name}}"};return{id:t.id,type:"autocomplete",displayTemplate:t.displayTemplate||"{{name}}",label:t.label,helptext:t.helptext,required:t.required||!1,valueTemplates:n,source:function(n,r,a,i){var o=e.dataSource.getDataSource("SkuidLocal");o.load([new e.model.Model({dataSource:o,verb:"GET",serviceUrl:t.serviceUrl+"&search="+n.term})]).then(function(e){var t=e[0];t&&r(t.data)},function(){i(),r([])})},onChange:t.onChange||function(){}}}function _(e,t){return"/ui/page/preview/"+e[m.page.name]+(t?"?"+t:"")}function b(){return e.native&&e.native.instanceUrl}function w(){return e.utils.apps&&0!==e.utils.apps.length?t.map(e.utils.apps,function(e){return{label:e.name,link:e.url}}):[]}function P(){return e.utils}function T(t){var n,r,a=P().endsWith,o=P().startsWith,u="",d=t.apiVersion?s.default[t.apiVersion].path:l;if("object"===(void 0===t?"undefined":i(t))){if(t.type&&"external"===t.type)return t.url||t.path;n=t.name,r=t.nestedPath||t.path}else n=t;if(!a(n,"JS")||r||P().contains(n,"/"))if("CKEditor"===n)u="js/lib/",n="ckeditor";else if("AceEditor"===n)u="js/lib/",n="aceEditor";else if("Cropper"===n)u="css/",n="cropper";else if("Fonts"===n)u="assets/",n="fonts";else if(o(n,"SkuidTheme"))u="themes/",n=n.replace("SkuidTheme","").toLowerCase();else if(!r||!a(r,".js")||o(u,"js/")||o(r,"js/")||P().contains(r,"assets/")||P().contains(r,"dist/"))if(!n||!a(n,".js")||o(n,"js/")||o(n,"assets/")||o(n,"dist/")){if(b()&&(a(r,".png")||a(r,".jpg")))return P().combineUrls(e.native.instanceUrl,r)}else u="js/";else u="js/";else u="js/lib/",n=n.charAt(0).toLowerCase()+n.substring(1,n.length-2)+".js";return r&&!o(r,"/")&&(r="/"+r),P().combineUrls(c,d,""+(u||"")+(n||"")+(r||""))}function x(){return"SkuidLocal"}function S(e,t){return e.getResponseHeader(t)}function k(t,n){return t||(e.runtime.getGlobalCacheValue({key:"loader.serviceModstamps"})||{})[n]}function j(e){if("GET"!==e.type)return u.direct(e);var t=e.url,n=f[t];return n||(f[t]=u.direct(e).then(function(e){return delete f[t],e}).catch(function(e){throw delete f[t],e}))}var N={checkNetwork:function(){return j({offline:!1,type:"GET",url:d+"/skuid/check"})},componentPack:function(e,t){return u.direct({cache:!0,type:"GET",url:d+"/metadata/"+k(t,"componentPackService")+"/componentpackservice?api=v1"}).then(function(e){return e.body})},getDataSourceTypes:function(){return j({type:"GET",url:d+"/api/v1/objects/data-source-type"}).then(function(e){return e.body})},getToken:function(){return j({type:"GET",url:d+"/api/v1/auth/token"}).then(function(e){return e.body})},events:function(){return e.utils.resolve([])},labels:function(e,t){return u.direct({cache:!0,type:"GET",url:d+"/metadata/"+k(t,"labelService")+"/labelservice"}).then(function(e){return e.body})},meta:function(n){var r=t.Deferred();return e.remote().metaService(JSON.stringify(n),function(e,t){t.status?r.resolve(e):r.reject(t.message)},{escape:!1}),r.promise()},page:function(n,r,a,i){var o={};return n&&(o.page=n),r&&(o.namespace=r),a&&(o.route=a),t.get({cache:!0,dataType:"text",url:d+"/metadata/"+k(i,"pageService")+"/pageservice"+(e.utils.size(o)?"?"+e.utils.param(o):"")}).then(function(e,t,n){return{metadata:{pageAPIVersion:S(n,"skuid-PageAPIVersion"),pageId:S(n,"skuid-PageId"),pageLastModifiedDate:S(n,"skuid-PageLastModifiedDate"),pageName:S(n,"skuid-PageName"),masterPageName:S(n,"skuid-MasterPageName"),masterPageNamespace:S(n,"skuid-MasterPageNamespace")},xml:e}})},serviceModstamps:function(){return e.$.get(d+"/metadata/loaderservicemodstamps")},settings:function(e){return u.direct({cache:!0,type:"GET",url:d+"/metadata/"+k(e,"siteSettingsService")+"/sitesettingsservice"}).then(function(e){return e.body})},theme:function(e,t){return u.direct({cache:!0,type:"GET",url:d+"/metadata/"+k(t,"themeService")+"/themeservice/"+e+"?api=v1"}).then(function(e){return e.body})}};function U(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(null==h||h.closed)if(b())window.location="Login.html";else{var t=e.sso_login||"/ui/login?noredirect=true";h=window.open(t,"LoginWindow")}else h.focus()}function q(t,n){var r=t||n.responseJSON,a={status:n.statusText,statusCode:n.status,headers:e.ajax.getResponseHeaderObject(n.getAllResponseHeaders())};return!r&&n.responseText&&(r=n.responseText),r&&r.statusCode&&r.message&&(401===a.statusCode&&"Missing authentication"===r.message&&(r.message="You are logged out. Please refresh the page to log in."),a.error=r.message),a.body=r,a}e.platform={attemptLogin:function(e,n,r){var a=function(e){if(e.origin===window.location.origin&&"login_success"===e.data){if(n)return window.location.reload();[".nx-messages",".nx-page-problems-container"].forEach(function(e){var n=t(e);n&&n.length&&n.empty(),n.hide()}),t(".nx-page-problems-wrapper").hide(),r&&r()}};try{if((e=e||0)>0)return null;b()?(U(),window.addEventListener("message",a)):window.confirm('You need to log in again, your session has expired.\n\nPress "OK" to open the login page in a new window.\n(You may need to disable pop-up blocking for this site.)\n\nPress "Cancel" to remain on this page. Refresh your browser to go to the login page.')?(U(),window.addEventListener("message",a)):window.location="/error/403"}catch(e){return e.status}return null},checkSessionExpiration:function(){return t.ajax({url:d+"/api/v1/me/loginexpires",type:"GET",contentType:r})},checkSessionLoginType:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t.ajax({url:d+"/api/v1/me/logintype",type:"POST",contentType:r,data:JSON.stringify(a({},e&&{id:e}))})},forceSessionActivity:function(){return t.ajax({url:d+"/api/v1/me/forcesessionactivity",type:"GET",contentType:r})},get:function(e){return g[e]},getActions:function(){return[{name:"user-signup",label:"Register new User",getProperties:function(e){return(v?P().resolve(v):t.getJSON("/api/v1/objects/profile?order=name&scopes=signupApiEnabled&fields="+["name","require_email_verification_on_signup","signup_api_prefix"].join(",")).then(function(e){return v=e,e})).then(function(t){var n=[{id:"signupapi",label:"Profile Name",required:!0,type:"combobox",entries:function(){return t.map(function(e){return{value:e.signup_api_prefix,label:e.name}})},onChange:function(){e.rebuildProps()}},{id:"firstname",label:"First Name",required:!0,type:"string"},{id:"lastname",label:"Last Name",required:!0,type:"string"},{id:"email",label:"Email Address",required:!0,type:"string"},{id:"username",label:"Username",required:!0,type:"string"},{id:"federationid",label:"Federation Id",type:"string"},{id:"locale",label:"Locale",required:!0,type:"string"},{id:"timezone",label:"Time Zone",required:!0,type:"string"}],r=e.state.attr("signupapi"),a=t.find(function(e){return e.signup_api_prefix===r});return(a&&!1===a.require_email_verification_on_signup||!a&&r&&-1!==r.indexOf("{{"))&&n.push({id:"password",label:"Password",type:"string"}),n})},run:function(e,n,a){var i=P().getContextToUse(n,a),o={};function s(t){return P().mergeAsDataInContext(e.attr(t),i)}var u=s("signupapi");return u?(["firstName","lastName","email","username","federationId","locale","timeZone","password"].forEach(function(e){var t=s(e.toLowerCase());t&&(o[e]=t)}),t.ajax({url:"/api/v1/users/signup/"+u,type:"POST",data:JSON.stringify(o),dataType:"json",contentType:r}).then(function(e){a&&e&&e.userId&&(a.$PreviousAction={result:e})}).catch(function(e){return P().reject({$PreviousAction:{error:e.responseJSON?e.responseJSON.message:e.responseText}})})):P().reject("Attribute signupapi was not provided for Register new User action.")}},{name:"user-login",label:"Login",getProperties:function(){return[{id:"username",label:"Username",required:!0,type:"string"},{id:"password",label:"Password",required:!0,type:"string"},{id:"redirectonsuccess",helptext:"If true, then if the login attempt succeeds, the user's browser will be taken to the default app's URL, if this is their first login, or the last URL they visited, if they are an existing user.",label:"Go to default / last-visited URL if login succeeds",defaultValue:!1,type:"boolean"}]},run:function(e,n,a){var i=P().getContextToUse(n,a),o={},s="true"===e.attr("redirectonsuccess");return["username","password"].forEach(function(t){var n=t.toLowerCase(),r=function(t){return P().mergeAsDataInContext(e.attr(t),i)}(n);if(!r)return P().reject("Attribute "+n+" was not provided for Login action.");o[t]=r}),t.ajax({url:"/api/v1/auth/login",type:"POST",data:JSON.stringify(o),dataType:"json",contentType:r}).then(function(e){if(!e||!e.success)throw e.message?e.message:e;a&&(a.$PreviousAction={result:e}),s&&e.redirect&&P().redirect({url:e.redirect})}).catch(function(e){return P().reject({$PreviousAction:{error:t.isPlainObject(e)?e.responseJSON?e.responseJSON.message:e.responseText:e}})})}}]},getAuthUrl:function(){return"https://"+window.location.hostname+(window.location.port?":"+window.location.port:"")+"/api/v1/auth/check"},getBasePreviewUrl:_,getBaseXmlEditorUrl:function(e){return"/ui/page/compose/"+e[m.page.id]+"/xml"},getDefaultDataSourceName:x,getDefaultDataSourceTypeName:function(){return"REST"},getDefaultImagePath:function(){return"assets/images/"},getDocsBaseUrl:function(){return"https://docs.skuid.com/latest/en/"},getEntityFieldName:function(e,t){return m[e][t]},getEntityFieldNames:function(e){return m[e]},getLayoutFields:function(){return["content"]},getMaxProxyRequestPayload:function(){return 5e7},getName:function(){return"skuid-platform"},getNavigationItemSourceTypes:function(){return[{value:"usermenu",label:"User Menu",items:[{label:"My Settings",link:"/ui/me"},{label:"My Apps",link:null,items:w()},{label:"Logout",link:"/auth/logout"}]},{value:"apps",label:"Apps",items:w()}]},getOAuthRedirectUri:function(){return b()?d+"/auth/oauth/callback":window.location.origin+"/auth/oauth/callback"},getOAuthProxyUri:function(){return b()?d+"/auth/oauth/proxy":window.location.origin+"/auth/oauth/proxy"},getPageAPIVersions:function(){return o.apiVersionsArray},getPageComposeUrlById:function(e){return"/ui/page/compose/"+e},getPageComposeUrlByName:function(e){return"/ui/page/compose/"+e},getPageNavigateUrl:function(e,t,n){return b()?(r={name:e},a=n?P().param(n):"",(i=window.location.href.split("/"))[i.length-1]=r[m.page.name]+".html"+(a?"?"+a:"")):_({name:e},n?P().param(n):"")||window.location.pathname;var r,a,i},getPublicKeyEndpoint:function(){return"https://"+window.location.hostname+(window.location.port?":"+window.location.port:"")+"/api/v1/site/verificationkey"},getResourceUrl:T,getRouteNavigateUrl:function(t,n,r){var a="",o={};return n&&(a+="/ns/"+n),a+=t,"object"===(void 0===r?"undefined":i(r))&&P().size(r)&&(e.$.each(r,function(e,t){var n=new RegExp("{"+e+"(\\?|\\*|\\*\\d{1})?}","g").exec(a);n&&n.length?a=a.replace(n[0],t):o[e]=t}),P().size(o)&&(a+="?"+P().param(o))),a},getSiteResourceUrl:function(e){var t=e.name,n=e.path,r=e.type,a=void 0;return"skuid"===e.namespace?T(e):(r||(r="file"),a="/"+{file:"files",theme:"themes",componentPack:"componentpacks"}[r]+"/"+t,n&&(a=P().combineUrls(a,n)),a)},getTokenURL:function(){return d+"/api/v1/auth/token"},getUserMenuItems:function(){return[{label:"Logout",link:"/auth/logout"}]},handlePageLoaderNotFound:function(){return window.location="/error/404"},hasFeature:function(t){return e.features&&e.features.hasOwnProperty(t)},isCordova:b,isLocalCordova:function(){return b()&&"development"===e.environment},isPlatformSessionError:function(e,t){return t&&"SkuidLocal"===t.name},openLoginWindow:U,preloadIconSetDependencies:function(e){var n="icons-svg-"+e,r=void 0;if(r=b()?l+"/assets/icons-svg/"+e+"/"+e+".min.svg":c+"/"+l+"/assets/icons-svg/"+e+"/"+e+".min.svg",!p[e])return p[e]=!0,t.get({dataType:"xml",url:r}).then(function(r){var a=t(r.documentElement);return a.find("symbol").attr("id",function(t,n){return e+":"+n}),t("<div>").prop("id",n).css("display","none").html(P().getXML(a)).insertBefore(t(document.body.childNodes[0])),t.Deferred().resolve(a)}).catch(function(n){return delete p[e],t.Deferred().reject(n)});var a=document.getElementById(n);return t.Deferred().resolve(t(a))},publishEvent:function(){},requiresClientSideModelLoading:function(){return!0},requiresSerializedProxyRequests:function(){return!1},services:N,set:function(e,t){g[e]=t}},e.platform.builder={getProtectedModules:function(){return[]},getPageModule:function(e,t){return e.getFieldValue(t,"module",!0)},getPageIncludeTypes:function(){return[{label:"Skuid Page",value:"skuid"}]},getModuleEntries:function(){return[]},getAvailableComponentPacks:function(){return e.components.config.pagebuilder.packs},getPageSelectProperty:function(e){return y(t.extend({displayTemplate:"{{name}}",valueTemplates:{pagename:"{{name}}"},label:n("page")+" Name",serviceUrl:"/objects/page?fields=id,name"},e))},getRouteSelectProperty:function(e){return y(t.extend({displayTemplate:"{{fq_route}}",valueTemplates:{route:"{{{fq_route}}}"},label:"Route Name",serviceUrl:"/objects/route?fields=id,fq_route"},e))},getStaticResourceProperty:function(e){return y(t.extend({displayTemplate:"{{name}}{{#content_type}} ({{content_type}}){{/content_type}}",label:n("file_resource")+" Name",serviceUrl:"/objects/file?fields=id,name,content_type"},e))},getNestedPathProperty:function(e){return{id:e.id||"filepath",type:"filepath",label:"File Path (within ZIP Files)",helptext:"The desired file's relative location within Files that are .zip files. Do not use unless your File is a ZIP file.",divisionSize:"2",getResourceName:function(){return e.state.attr(e.nameProperty)},getResourceNamespace:function(){return null},onChange:e.onChange||function(){}}}},e.RemotingStubs={metaService:function(e,n){t.ajax({url:d+"/metadata/metaservice?api=v1",type:"POST",data:e,contentType:r}).done(function(e){b()&&t.each(e.dataSourceTypes,function(e,n){"REST"===e&&t.each(n.dataSources,function(e,t){"SkuidLocal"===e&&(t.serviceUrl=d+t.serviceUrl)})}),n(e,{status:"success"})}).fail(function(e){n(null,{message:e.status+" "+e.statusText})})},updatePersonalizationSettings:function(e,n,a){return t.ajax({type:"PUT",url:d+"/api/v1/personalization/"+e,data:n,contentType:r}).then(function(e){a(e,{status:"success"})})},proxy:function(n,a){var i=n.modelDataSource,o=i?e.dataSource.get(i):null,s=n.url,u=n.method||"GET",c=n.body,l={},p=o&&o.isAuthenticated()?"1":"0";n.headers&&t.extend(l,n.headers),n.accept&&(l.Accept=n.accept),l["sid-skuid"]=e.utils.userInfo.sessionId,delete l["User-Agent"],delete l["Content-Length"];var f={url:d+"/proxy?"+["data-source="+encodeURIComponent(i),"is-authenticated="+p,"endpoint="+encodeURIComponent(s)].join("&"),type:u,beforeSend:function(e){t.each(l,function(t,n){e.setRequestHeader(t,n)})}};n.hasOwnProperty("processData")&&(f.processData=n.processData),c&&(f.data=c,f.contentType=n.contentType||r),t.ajax(f).done(function(e,t,n){a(q(e,n),{status:"success"})}).fail(function(e){a(q(void 0,e))})},getBodiesOfZIPResourceFiles:function(e,n){var r=P().parseAsJSONIfString(e);if(r&&1===P().size(r)&&"skuid__GeochartMaps"===Object.keys(r)[0]){var a=r.skuid__GeochartMaps;t.when.all(t.map(a,function(e){return u.direct({cache:!0,dataType:"json",type:"GET",url:(c?c+"/":"")+l+"/assets/maps/"+e}).then(function(e){return e.body})})).then(function(e){var r,i,o,s={};t.each(e,function(e,t){s[a[e]]=P().parseAsJSONIfString(t)}),n((o=s,(i="skuid__GeochartMaps")in(r={})?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o,r))}).catch(function(){n({error:"Unable to retrieve body of all requested ZIP resource files."})})}else n({error:"Invalid ZIP resource file, unable to retrieve body."})}},e.platform.themeBuilder={getThemeData:function(e,n){return t.ajax({url:d+"/api/v1/theme/composer?api="+("Ink"===e.type?"v2":"v1"),type:"POST",data:JSON.stringify({name:e.name}),contentType:r}).then(function(e){return n?n(e):e})},getThemeResourceUrl:function(t){var n=e.utils.endsWith,r=void 0,a=void 0,o=void 0,s="",u=void 0;return"object"===(void 0===t?"undefined":i(t))?(u=t.apiVersion,r=t.name,a=t.nestedPath||t.path,o=t.modstamp):r=t,a&&!e.utils.startsWith(a,"/")&&(a="/"+a),"Fonts"===r&&t&&t.namespace&&"skuid"===t.namespace?(c?c+"/":"")+l+"/assets/fonts"+(a||""):((a&&n(a,".js")||n(r,".js"))&&(s="js/"),o||(o=Date.now()),d+"/api/v1/theme/resource/"+o+"/"+s+r+(a||"")+"?api="+(u||"v1"))},getResource:function(e,n){var r=e.Name||e.name||e,a=Date.now();return t.ajax({url:d+"/api/v1/theme/resource/"+a+"/"+r+"/"+n+"?api=v1",type:"GET"}).then(function(e){var t={};return t[r]={},t[r][n]=e,e})},saveTheme:function(n,a){var i,o=t.Deferred();return n.themeResourceName?(i={FileName:n.themeResourceName,ContentType:"application/zip",Body:a},t.ajax({type:"POST",url:d+"/api/v1/uploadTheme",headers:{"Content-Type":r,Authorization:"Bearer "+e.utils.userInfo.sessionId},data:JSON.stringify(i),dataType:"json"})):o.reject("No resource name present.")}}}(skuid)}});