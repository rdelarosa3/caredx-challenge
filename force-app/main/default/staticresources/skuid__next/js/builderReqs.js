skuid.runtime.registerApi("v2","builderReqs",function(e){var t=function(e){var t={};function i(n){if(t[n]){return t[n].exports}var o=t[n]={i:n,l:false,exports:{}};e[n].call(o.exports,o,o.exports,i);o.l=true;return o.exports}i.m=e;i.c=t;i.d=function(e,t,n){if(!i.o(e,t)){Object.defineProperty(e,t,{enumerable:true,get:n})}};i.r=function(e){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(e,"__esModule",{value:true})};i.t=function(e,t){if(t&1)e=i(e);if(t&8)return e;if(t&4&&typeof e==="object"&&e&&e.__esModule)return e;var n=Object.create(null);i.r(n);Object.defineProperty(n,"default",{enumerable:true,value:e});if(t&2&&typeof e!="string")for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n};i.n=function(e){var t=e&&e.__esModule?function t(){return e["default"]}:function t(){return e};i.d(t,"a",t);return t};i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};i.p="";return i(i.s=736)}({0:function(t,i,n){"use strict";n.d(i,"b",function(){return a});n.d(i,"a",function(){return s});n.d(i,"d",function(){return d});function o(){if(e){return e}throw Error("skuid not found")}let a=o().constants;let s=o().componentType;i["c"]=o();const r={MOBILE:480};const l=(t,i)=>e.builder&&e.builder.core.getDomProperties(t,i);function d(){const e=o(),{utils:t,themeSettings:i}=e,n=i&&i.getAll(),s=e.virtualDom&&e.virtualDom.hyperScript;return{skuid:e,h:s,div:s&&s.bind(null,"div"),span:s&&s.bind(null,"span"),utils:t,ts:n,getShadow:i&&i.getShadow,$:e.$,$L:e.$L,KEYCODES:a.KEYCODES,breakpoints:r,moment:e.moment,getBuilderProps:l}}},1:function(t,i,n){var o,a;!(o=[],a=(()=>e.$).apply(i,o),a!==undefined&&(t.exports=a))},10:function(t,i,n){"use strict";n.d(i,"a",function(){return o});n.d(i,"b",function(){return s});n.d(i,"c",function(){return r});function o(t,i={}){const n=e.virtualDom.hyperScript,o={};if(i.hidden)o.opacity="0";else o.opacity=null;if(i.alignBottom)o.verticalAlign="bottom";else o.verticalAlign=null;if(i.asBlock)o.display="block";else o.display=null;if(i.matchFontSize){o.width="1em";o.height="1em";o.bottom="0"}else{o.width=null;o.height=null;o.bottom=null}return n("span",{key:i.key||"icon-"+t,class:"fragment__icon",classes:i.classes||{},afterCreate:a,styles:o},[n("svg",{role:"img",viewBox:"0 0 24 24"},[i.title&&n("title",[i.title]),i.description&&n("desc",[i.description]),n("use",{role:"presentation",href:t})])])}function a(e){const t=e.children;if(t.length>1){for(let i=1;i<t.length;i++){e.children[i].remove()}}}function s(e){const{spacing:t}=e.getShortcuts();return{height:t(2),width:t(2.125),_bottom:t(.125)}}function r(e){return{icon:{verticalAlign:"text-top",width:e.width,height:e.height,display:"inline-block",fill:"currentColor",position:"relative",bottom:e._bottom}}}},11:function(t,i,n){"use strict";n.d(i,"a",function(){return d});n.d(i,"h",function(){return c});n.d(i,"j",function(){return u});n.d(i,"f",function(){return p});n.d(i,"i",function(){return f});n.d(i,"e",function(){return h});n.d(i,"l",function(){return m});n.d(i,"k",function(){return g});n.d(i,"d",function(){return b});n.d(i,"b",function(){return v});n.d(i,"c",function(){return y});n.d(i,"n",function(){return C});n.d(i,"m",function(){return _});n.d(i,"g",function(){return w});var o=n(5);const a=e.$,s=e.utils,r=s.isString,l=s.escapeSelector;function d(){let e=p();if(!e||!e.children("models").length){return u().children("models")}else{return e.children("models").clone().append(u().children("models").children("model").clone())}}function c(){return u().children("models")}function u(){return e.builder.core.pageXML}function p(){return e.builder.core.masterPageXML}function f(){return a(u()).find('> resources > javascript > jsitem[location="inlinesnippet"]')}function h(){return a(p()).find('> resources > javascript > jsitem[location="inlinesnippet"]')}function m(){return a.extend({},h(),f())}function g(){return a.map(m(),function(e){return a(e).attr("name")})}function b(){return c().children("model").first()}function v(e,t){let i=e.closest("["+t+"]");return i.length?i.first().attr(t):""}function y(e,t){let i;if(r(t)){i=Object(o["j"])(t);if(i)i=i.children("conditions")}else if(t&&t.jquery&&t.prop("nodeName")==="conditions"){i=t}return i?i.find('condition[name="'+e+'"]'):null}function C(e){return s.startsWith(e.attr("state"),"filterable")}function _(e,t,i){if(!e||!t){return false}if(!i)i={searchByName:false};let n,a=i.searchByName;if(r(e)===true){n=Object(o["j"])(e)}else if(e.jquery){n=e}else{return false}let s=a===true?"name":"id",d=n.children("fields,groupby").find("field["+s+'="'+l(t)+'"]');if(d&&d.length>0){return true}return false}function w(e){if(e.attr("type")==="readwrite"){return e.children("methods").children('method[type="query"][pathtocontent]').first().attr("pathtocontent")}else{return e.attr("pathtocontent")}}},12:function(e,t,i){var n,o,a;(function(s){if(true){!(o=[i(1)],n=s,a=typeof n==="function"?n.apply(t,o):n,a!==undefined&&(e.exports=a))}else{}})(function(e){e.ui=e.ui||{};return e.ui.version="1.12.1"})},127:function(t,i,n){"use strict";const o=e.personalization;i["a"]=o},129:function(e,t,i){var n,o,a;(function(s){if(true){!(o=[i(1),i(294),i(12),i(46)],n=s,a=typeof n==="function"?n.apply(t,o):n,a!==undefined&&(e.exports=a))}else{}})(function(e){var t=false;e(document).on("mouseup",function(){t=false});return e.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.on("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).on("click."+this.widgetName,function(i){if(true===e.data(i.target,t.widgetName+".preventClickEvent")){e.removeData(i.target,t.widgetName+".preventClickEvent");i.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.off("."+this.widgetName);if(this._mouseMoveDelegate){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)}},_mouseDown:function(i){if(t){return}this._mouseMoved=false;this._mouseStarted&&this._mouseUp(i);this._mouseDownEvent=i;var n=this,o=i.which===1,a=typeof this.options.cancel==="string"&&i.target.nodeName?e(i.target).closest(this.options.cancel).length:false;if(!o||a||!this._mouseCapture(i)){return true}this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=true},this.options.delay)}if(this._mouseDistanceMet(i)&&this._mouseDelayMet(i)){this._mouseStarted=this._mouseStart(i)!==false;if(!this._mouseStarted){i.preventDefault();return true}}if(true===e.data(i.target,this.widgetName+".preventClickEvent")){e.removeData(i.target,this.widgetName+".preventClickEvent")}this._mouseMoveDelegate=function(e){return n._mouseMove(e)};this._mouseUpDelegate=function(e){return n._mouseUp(e)};this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate);i.preventDefault();t=true;return true},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button){return this._mouseUp(t)}else if(!t.which){if(t.originalEvent.altKey||t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.originalEvent.shiftKey){this.ignoreMissingWhich=true}else if(!this.ignoreMissingWhich){return this._mouseUp(t)}}}if(t.which||t.button){this._mouseMoved=true}if(this._mouseStarted){this._mouseDrag(t);return t.preventDefault()}if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==false;this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)}return!this._mouseStarted},_mouseUp:function(i){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;if(i.target===this._mouseDownEvent.target){e.data(i.target,this.widgetName+".preventClickEvent",true)}this._mouseStop(i)}if(this._mouseDelayTimer){clearTimeout(this._mouseDelayTimer);delete this._mouseDelayTimer}this.ignoreMissingWhich=false;t=false;i.preventDefault()},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})},13:function(e,t,i){"use strict";i.d(t,"a",function(){return n});i.d(t,"b",function(){return o});i.d(t,"c",function(){return a});const n={acceptorEmptyState:"sk-dropzone-emptystate"};const o={left:-5,top:-5};const a={noModel:"no-model"}},137:function(e,t,i){"use strict";i.d(t,"a",function(){return o});var n=i(81);class o{constructor(e,t={}){const i=new n["a"];this._model=e;this._undoStack=i;this._afterUndo=t.afterUndo;this._afterRedo=t.afterRedo;this._afterStackUpdate=t.afterStackUpdate;this._afterBatchUpdate=t.afterBatchUpdate;this._fieldsToIgnore=t.fieldsToIgnore;this._connect()}undo(){this._disconnect();const e=this._undoStack.undo();this._afterUndo&&this._afterUndo(e);this._connect()}redo(){this._disconnect();const e=this._undoStack.redo();this._afterRedo&&this._afterRedo(e);this._connect()}destroy(){this._disconnect()}get undoStack(){return this._undoStack}startBatching(){this._batching=true;this._batchedRecords=[]}stopBatching(){const e=this;let t=this._batchedRecords;if(this._mutationRecordsModifier)t=this._mutationRecordsModifier(t);this._undoStack.push(function(){e._performUndoRedo.apply(e,arguments)},t);this._afterStackUpdate&&this._afterStackUpdate();this._batching=false;delete this._batchedRecords}_connect(){this._disconnect();this._subscriptions=[this._model.subscribe("row.updated",e=>{const t=Object.assign({},e.updates);const i=Object.assign({},e.oldValues);(this._fieldsToIgnore||[]).forEach(e=>{delete t[e];delete i[e]});if(Object.keys(t).length===0)return;this._modelActionPerformed({type:"row.updated",row:e.row,newValues:t,oldValues:i})})]}_disconnect(){(this._subscriptions||[]).forEach(e=>this._model.unsubscribe(e));delete this._subscriptions}_performUndoRedo(e,t){this._disconnect();t=Array.from(t);if(!e)t.reverse();let i;t.forEach(t=>{switch(t.type){case"row.updated":i=e?t.newValues:t.oldValues;this._model.updateRow(t.row,i);break}});this._connect()}_modelActionPerformed(e){const t=this;if(t._batching){t._batchedRecords=t._batchedRecords.concat(e);t._afterBatchUpdate&&t._afterBatchUpdate()}else{let i=[e];if(t._mutationRecordsModifier)i=t._mutationRecordsModifier(i);t._undoStack.push(function(){t._performUndoRedo.apply(t,arguments)},i);t._afterStackUpdate&&this._afterStackUpdate()}}customActionPerformed(e,t){this.undoStack.push(e,t)}}},140:function(e,t,i){var n,o,a;(function(s){if(true){!(o=[i(1),i(12)],n=s,a=typeof n==="function"?n.apply(t,o):n,a!==undefined&&(e.exports=a))}else{}})(function(e){return e.fn.extend({uniqueId:function(){var e=0;return function(){return this.each(function(){if(!this.id){this.id="ui-id-"+ ++e}})}}(),removeUniqueId:function(){return this.each(function(){if(/^ui-id-\d+$/.test(this.id)){e(this).removeAttr("id")}})}})})},141:function(e,t,i){var n,o,a;(function(s){if(true){!(o=[i(1),i(12)],n=s,a=typeof n==="function"?n.apply(t,o):n,a!==undefined&&(e.exports=a))}else{}})(function(e){return e.ui.safeActiveElement=function(e){var t;try{t=e.activeElement}catch(i){t=e.body}if(!t){t=e.body}if(!t.nodeName){t=e.body}return t}})},144:function(e,t,i){"use strict";var n=i(13);var o=i(0);var a={getStyleSettingsVariants(){return{default:{}}},getStyles(){return{"subtle-title":{position:"absolute",fontSize:"6pt",textTransform:"uppercase",top:"-3px",background:"white",left:"13px",color:"#777",padding:"0 3px",zIndex:"1"},"nx-pagebuilder-acceptor":{flex:"auto"},"acceptor-inner":{width:"100%"}}}};const s=["component--global"];var r={attributes:{componentsXML:{required:true},customBuilder:{},xmlTransformer:{},acceptsBuilderIds:{default:[]},rejectsBuilderIds:{default:[]},requiresModels:{default:[]},requiresDataSources:{default:[]},requiresEntities:{default:[]},requiresGlobalComponent:{default:true},mode:{type:"boolean"},subtleTitle:{type:"string",default:""},layout:{type:"picklist",default:"block",options:["block","flex"]},justifyContent:{type:"string"},_forceRenderToElement:{}},properties:{tooltip:true},access:{cpi:{public:["addComponent","addClass","canAcceptComponent","canAccept","canAcceptManifest","isEmpty","getComponents","getComponentsXML","setStyle"]}}};var l=i(21);var d=i(23);const c=o["c"].$,u=o["c"].builder,p=o["c"].events.publish;const{h:f,utils:h}=Object(o["d"])();o["a"].register("skuidbuilder__componentAcceptor",Object.assign({},a,{schema:r,init(e,t,i){const{accept:n,componentsXML:a,customBuilder:r,uniqueId:l,layout:d,xmlTransformer:p,mode:f}=t;let h=new m(t);e.set({acceptanceCriteria:h,components:[],emptyStateEnabled:n===s});e.storeSubscription(o["c"].events.subscribe("drag.started",()=>{if(!i.canAccept(u.dragDrop.dragData))return;e.set("dropzoneReady",true)}));e.storeSubscription(o["c"].events.subscribe("drag.ended",()=>{e.set("dropzoneReady",false)}));a.children().each((t,n)=>{let o=c(n),a=!r,s=u.core.componentFactory(o,r,true,a,{projector:e.get("projector")});i.addComponent(s,{modifyState:false})});if(a[0]){const t=new MutationObserver(()=>{if(e.get("freezeObserver"))return;i.syncComponentsWithXMLState()});t.observe(a[0],{childList:true});e.subscribe("beforeUnregister",()=>{t.disconnect()})}e.subscribe("beforeUnregister",()=>{(e.get("components")||[]).forEach(e=>e.unregister())});e.set("acceptorFragment",b({uniqueKey:l+"-dragDrop",onDrop:(t,i)=>e._getCPI().onDrop(t,i),emptyStateEnabled:n===s,inline:d==="flex",acceptanceCriteria:h,parentComponent:e,xmlTransformer:p,mode:f}))},renderVDom(e){const{_externallySetClass:t,_externallySetStyle:i,components:n,justifyContent:o,layout:a,subtleTitle:s,acceptorFragment:r}=e.getState(),l=e.shortcut("getStyledClasses");return f("div",{key:e,class:["nx-pagebuilder-acceptor",l("nx-pagebuilder-acceptor"),t].join(" "),styles:i||{}},[s&&f("div",{class:l("subtle-title")},[s]),r("div",{key:"children",class:l("acceptor-inner"),styles:Object.assign({display:a,justifyContent:o},a==="flex"?{flexWrap:"wrap"}:{})},n.map(e=>f("span",{key:e},[e.renderVDom()])))])},cpi:{onDrop(e,t){this.set("freezeObserver",true,{renderOnChange:false});const i=u.core;const{customBuilder:n}=this.getState();const a=t.component,s=n||t.builderToUse,r=t.recreate;let l=!t.doNotSelect;const c=t.fieldId||t.fieldName?{fieldId:t.fieldId,fieldName:t.fieldName,isChildRelationship:t.isChildRelationship}:{};let p=t=>{let o=i.componentFactory(t,s,true,!n);this._getCPI().addComponent(o,{index:e,isNew:true,selectComponent:l});Object(d["a"])(o,"drag")};if(a&&a.type()==="skuidbuilder__builderComponent"){if(r){a.get("xmlState").remove();p(a.get("xmlState"));a.unregister()}else{this._getCPI().addComponent(a,{index:e,isNew:false,selectComponent:l})}}else if(s){let e=s.getDefaultState(c,{setUniqueId:s.setUniqueId!==false});if(o["c"].platform.hasFeature("PageComposerStaging")&&s&&s.quicklyConfigure){s.quicklyConfigure(e).then(p)}else{p(e)}}this.set("freezeObserver",false,{renderOnChange:false});this.scheduleVirtualRender()},isEmpty(){return this.get("componentsXML").children().length===0},canAccept(e){return this.get("acceptanceCriteria").canAcceptManifest(e.manifest)},canAcceptManifest(e){return this.get("acceptanceCriteria").canAcceptManifest(e)},canAcceptComponent(e){const t=e.getCPI().getDragManifest();if(t){return this._getCPI().canAcceptManifest(t)}return false},addComponent(e,t={}){const{components:i,componentsXML:n}=this.getState();let a=t.modifyState!==false,s=t.isNew!==false,r=e.get("xmlState"),l=t.index===undefined?n.children().length:t.index;const d=e.builder;if(a&&!this._getCPI().canAcceptComponent(e)){if(!o["c"].utils.runningTests())alert('Using the "'+d.name+'" here is not supported');return false}this.adoptComponent(e);if(a)r.remove();const c=i.findIndex(t=>t.id()===e.id());if(c>-1){if(l>c)l--;i.splice(c,1)}d&&d.afterAttach&&d.afterAttach(e);if(a){if(d&&d.isTransparent){p("builder.colorcheck")}u.core.moveXmlToIndex(r,n,l);e.save()}i.splice(l,0,e);e.subscribe("beforeUnregister",()=>{const t=i.indexOf(e);if(t>-1){this.get("components").splice(t,1)}});if(!s)e.publish("moved",[this]);let f;const h=t=>{const n=i.indexOf(e);if(n>-1&&t!==this){i.splice(n,1);this.scheduleVirtualRender()}f.forEach(t=>e.unsubscribe(t))};f=[e.subscribe("removed",h),e.subscribe("moved",h)];if(t.selectComponent){e.cpi.select()}this.scheduleVirtualRender();return e},getComponentsXML(){return this.get("componentsXML")},getComponents(){return this.get("components")},addClass(e){this.set("_externallySetClass",e)},setStyle(e){this.set("_externallySetStyle",e)},syncComponentsWithXMLState(){if(!this.registered)return;const{components:e,customBuilder:t}=this.getState();const i=this.get("componentsXML");e.forEach(t=>{if(!i[0].contains(t.get("xmlState")[0])){if(!t.get("xmlState")[0].parentElement){t.unregister()}const i=e.indexOf(t);if(i>-1){e.splice(i,1)}this.scheduleVirtualRender()}});const n=[];Array.from(i[0].children).forEach((i,o)=>{const a=e.find(e=>e.get("xmlState")[0]===i);if(a){n[o]=a;return}let s=this.createChildComponent({componentType:"skuidbuilder__builderComponent",_makeDraggable:true,_xmlNode:c(i),_customBuilder:t,_isGlobalComponent:!t});s.subscribe("beforeUnregister",()=>{const t=e.indexOf(s);if(t>-1){e.splice(t,1)}});n[o]=s;this.scheduleVirtualRender()});this.set("components",n)}}}));class m{constructor(e={}){this.acceptsBuilderIds=e.acceptsBuilderIds||[];this.rejectsBuilderIds=e.rejectsBuilderIds||[];this.requiresModels=e.requiresModels||[];this.requiresDataSources=e.requiresDataSources||[];this.requiresEntities=e.requiresEntities||[];this.requiresGlobalComponent=e.requiresGlobalComponent||false}canAcceptManifest(e){const{acceptsBuilderIds:t,rejectsBuilderIds:i,requiresModels:n,requiresDataSources:o,requiresEntities:a,requiresGlobalComponent:s}=this;const r=t.length?t.includes(e.builderId):true;const l=i.length?!i.includes(e.builderId):true;const d=n.length?n.includes(e.model):true;const c=o.length?o.includes(e.dataSource):true;const u=a.length?a.includes(e.entity):true;const p=s===true?e.isGlobalComponent:true;return r&&l&&d&&c&&u&&p}}const g=Symbol("acceptorSubscriptions");function b(e){const t=e.parentComponent,i="".concat(t?t.get("uniqueId"):h.generateUniqueId(),"-dropzone"),{emptyStateEnabled:n,inline:a,filter:s}=e,r=e.mode==="readonly",l=t=>e.acceptanceCriteria.canAcceptManifest(t);let d=false,p={};(t.get(g)||[]).forEach(e=>t.unsubscribe(e));!r&&t.set(g,[t.storeSubscription(o["c"].events.subscribe("drag.started",()=>{if(!l(o["c"].builder.dragDrop.dragData.manifest))return;d=true;t&&t.scheduleVirtualRender()})),t.storeSubscription(o["c"].events.subscribe("drag.ended",()=>{d=false;t&&t.scheduleVirtualRender()}))]);let m=e.makeChildrenDraggable?(i,n)=>{if(!i.properties)return;i.properties.draggable="true";i.properties.ondragstart=(i=>{o["c"].builder.dragDrop.standardDragStart(i,e.dragName,e.dragIcon,e.getDragData(i,{startIndex:n}));d=true;t&&t.scheduleVirtualRender();i.stopPropagation()})}:false;const b=(n,s)=>{const h="".concat(i,"-").concat(n),m=p[h];return f("div",{key:h,classes:{"nx-dropzone":true,"nx-dropzone--inline":a,"nx-dropzone--active":m,"nx-dropzone--active--with-empty":s&&m,"nx-dropzone--ready":d},ondragover:!r&&(e=>{e.preventDefault();e.dataTransfer.dropEffect="move"}),ondrop:!r&&(t=>{const i=u.dragDrop.dragData;if(!l(i.manifest))return;if(c(t.currentTarget).closest('[data-noaccept="true"]').length)return;let n=c(t.currentTarget.parentElement).children(".nx-dropzone");let a=Math.ceil(n.index(t.currentTarget));const s=o["c"].builder.dragDrop.dragData.manifest.component;if(e.xmlTransformer&&s&&s.type()==="skuidbuilder__builderComponent"){const t=s.get("xmlState");s.set("xmlState",e.xmlTransformer(t));t.remove()}e.onDrop&&e.onDrop(a,o["c"].builder.dragDrop.dragData.deploymentConfiguration);delete p[h]}),ondragenter:!r&&(e=>{if(!l(u.dragDrop.dragData.manifest))return;if(c(e.currentTarget).closest('[data-noaccept="true"]').length)return;p[h]=true;t.scheduleVirtualRender()}),ondragleave:!r&&(e=>{if(c(e.currentTarget).closest('[data-noaccept="true"]').length)return;t.scheduleVirtualRender();delete p[h]})},[s&&f("div",{key:"dropzone emptystate",class:"sk-dropzone-emptystate",styles:{opacity:m?"0":"1"}},["Drop component here"])])};return function(e,t,i){const o=i.length===0&&n!==false;let a,r=0,l;for(a=0;a<i.length;a+=2){m&&i[a]&&m(i[a],r);const e=s?s(i[a]):true;if(e){i.splice(a,0,b(a,o));l=a}r++}if(!s){i.push(b(a))}else if(l){i.splice(l+2,0,b(l+2,o))}return f(e,t,i)}}if(o["c"].builder){let e;o["c"].builder.dragDrop={AcceptanceCriteria:m,DragManifest:l["b"],DragData:l["c"],DragDeploymentConfiguration:l["a"],createAcceptorFragment:b,standardDragStart(t,i,a,s){t.stopPropagation();e&&e.remove();e=this.createDragTag(i,a);document.querySelector(".nx-page").append(e);this.dragData=s;u();o["c"].events.publish("drag.started",[s]);t.dataTransfer.setDragImage(e,n["b"].top,n["b"].left);t.currentTarget.setAttribute("data-noaccept","true");t.dataTransfer.setData("text/xml","<bar/>");t.dataTransfer.effectAllowed="move"},standardDragEnd(t){t.stopPropagation();t.currentTarget.removeAttribute("data-noaccept");e&&e.remove();p();o["c"].events.publish("drag.ended",[t.currentTarget]);window.scrollTo(window.scrollX,window.scrollY-1);window.scrollTo(window.scrollX,window.scrollY+1)},createDragTag(e,t){const i=t&&c(o["c"].ui.createIcon(t,{isWebIcon:true})).css("float","left");return c("<div>").addClass("nx-pagebuilder-dragtag").append(i||"",c("<div>").css({"margin-left":"24px","margin-top":"1px"}).text(e))[0]}};const t=100,i=300,a=100,s=5,r=50;let d;let u=()=>{let e=e=>s+(r-s)*e;let n=h.debounceImmediate(t=>window.scroll({top:Math.max(0,window.scrollY-e(t))}),t);let o=h.debounceImmediate(t=>window.scroll({top:Math.max(0,window.scrollY+e(t))}),t);d=(e=>{if(e.y<i)n(1-e.y/i);if(window.innerHeight-e.y<a)o(1-(window.innerHeight-e.y)/a)});document.body.addEventListener("dragover",d)};let p=()=>{document.body.removeEventListener("dragover",d)}}},145:function(e,t,i){"use strict";var n=i(10);t["a"]={getStyleSettings(e){return Object(n["b"])(e)},getStyles(e){return Object.assign({},Object(n["c"])(e),{"icon--match-font-size":{width:"1em",height:"1em",bottom:"0"},"icon--as-block":{display:"block"},"icon--align-bottom":{verticalAlign:"bottom"},"icon--hidden":{opacity:"0"},svg:{display:"block"}})}}},148:function(e,t,i){var n,o,a;(function(s){if(true){!(o=[i(1),i(12)],n=s,a=typeof n==="function"?n.apply(t,o):n,a!==undefined&&(e.exports=a))}else{}})(function(e){(function(){var t,i=Math.max,n=Math.abs,o=/left|center|right/,a=/top|center|bottom/,s=/[\+\-]\d+(\.[\d]+)?%?/,r=/^\w+/,l=/%$/,d=e.fn.position;function c(e,t,i){return[parseFloat(e[0])*(l.test(e[0])?t/100:1),parseFloat(e[1])*(l.test(e[1])?i/100:1)]}function u(t,i){return parseInt(e.css(t,i),10)||0}function p(t){var i=t[0];if(i.nodeType===9){return{width:t.width(),height:t.height(),offset:{top:0,left:0}}}if(e.isWindow(i)){return{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}}if(i.preventDefault){return{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}}return{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.position={scrollbarWidth:function(){if(t!==undefined){return t}var i,n,o=e("<div "+"style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'>"+"<div style='height:100px;width:auto;'></div></div>"),a=o.children()[0];e("body").append(o);i=a.offsetWidth;o.css("overflow","scroll");n=a.offsetWidth;if(i===n){n=o[0].clientWidth}o.remove();return t=i-n},getScrollInfo:function(t){var i=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),n=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),o=i==="scroll"||i==="auto"&&t.width<t.element[0].scrollWidth,a=n==="scroll"||n==="auto"&&t.height<t.element[0].scrollHeight;return{width:a?e.position.scrollbarWidth():0,height:o?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),n=e.isWindow(i[0]),o=!!i[0]&&i[0].nodeType===9,a=!n&&!o;return{element:i,isWindow:n,isDocument:o,offset:a?e(t).offset():{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:i.outerWidth(),height:i.outerHeight()}}};e.fn.position=function(t){if(!t||!t.of){return d.apply(this,arguments)}t=e.extend({},t);var l,f,h,m,g,b,v=e(t.of),y=e.position.getWithinInfo(t.within),C=e.position.getScrollInfo(y),_=(t.collision||"flip").split(" "),w={};b=p(v);if(v[0].preventDefault){t.at="left top"}f=b.width;h=b.height;m=b.offset;g=e.extend({},m);e.each(["my","at"],function(){var e=(t[this]||"").split(" "),i,n;if(e.length===1){e=o.test(e[0])?e.concat(["center"]):a.test(e[0])?["center"].concat(e):["center","center"]}e[0]=o.test(e[0])?e[0]:"center";e[1]=a.test(e[1])?e[1]:"center";i=s.exec(e[0]);n=s.exec(e[1]);w[this]=[i?i[0]:0,n?n[0]:0];t[this]=[r.exec(e[0])[0],r.exec(e[1])[0]]});if(_.length===1){_[1]=_[0]}if(t.at[0]==="right"){g.left+=f}else if(t.at[0]==="center"){g.left+=f/2}if(t.at[1]==="bottom"){g.top+=h}else if(t.at[1]==="center"){g.top+=h/2}l=c(w.at,f,h);g.left+=l[0];g.top+=l[1];return this.each(function(){var o,a,s=e(this),r=s.outerWidth(),d=s.outerHeight(),p=u(this,"marginLeft"),b=u(this,"marginTop"),x=r+p+u(this,"marginRight")+C.width,k=d+b+u(this,"marginBottom")+C.height,S=e.extend({},g),I=c(w.my,s.outerWidth(),s.outerHeight());if(t.my[0]==="right"){S.left-=r}else if(t.my[0]==="center"){S.left-=r/2}if(t.my[1]==="bottom"){S.top-=d}else if(t.my[1]==="center"){S.top-=d/2}S.left+=I[0];S.top+=I[1];o={marginLeft:p,marginTop:b};e.each(["left","top"],function(i,n){if(e.ui.position[_[i]]){e.ui.position[_[i]][n](S,{targetWidth:f,targetHeight:h,elemWidth:r,elemHeight:d,collisionPosition:o,collisionWidth:x,collisionHeight:k,offset:[l[0]+I[0],l[1]+I[1]],my:t.my,at:t.at,within:y,elem:s})}});if(t.using){a=function(e){var o=m.left-S.left,a=o+f-r,l=m.top-S.top,c=l+h-d,u={target:{element:v,left:m.left,top:m.top,width:f,height:h},element:{element:s,left:S.left,top:S.top,width:r,height:d},horizontal:a<0?"left":o>0?"right":"center",vertical:c<0?"top":l>0?"bottom":"middle"};if(f<r&&n(o+a)<f){u.horizontal="center"}if(h<d&&n(l+c)<h){u.vertical="middle"}if(i(n(o),n(a))>i(n(l),n(c))){u.important="horizontal"}else{u.important="vertical"}t.using.call(this,e,u)}}s.offset(e.extend(S,{using:a}))})};e.ui.position={fit:{left:function(e,t){var n=t.within,o=n.isWindow?n.scrollLeft:n.offset.left,a=n.width,s=e.left-t.collisionPosition.marginLeft,r=o-s,l=s+t.collisionWidth-a-o,d;if(t.collisionWidth>a){if(r>0&&l<=0){d=e.left+r+t.collisionWidth-a-o;e.left+=r-d}else if(l>0&&r<=0){e.left=o}else{if(r>l){e.left=o+a-t.collisionWidth}else{e.left=o}}}else if(r>0){e.left+=r}else if(l>0){e.left-=l}else{e.left=i(e.left-s,e.left)}},top:function(e,t){var n=t.within,o=n.isWindow?n.scrollTop:n.offset.top,a=t.within.height,s=e.top-t.collisionPosition.marginTop,r=o-s,l=s+t.collisionHeight-a-o,d;if(t.collisionHeight>a){if(r>0&&l<=0){d=e.top+r+t.collisionHeight-a-o;e.top+=r-d}else if(l>0&&r<=0){e.top=o}else{if(r>l){e.top=o+a-t.collisionHeight}else{e.top=o}}}else if(r>0){e.top+=r}else if(l>0){e.top-=l}else{e.top=i(e.top-s,e.top)}}},flip:{left:function(e,t){var i=t.within,o=i.offset.left+i.scrollLeft,a=i.width,s=i.isWindow?i.scrollLeft:i.offset.left,r=e.left-t.collisionPosition.marginLeft,l=r-s,d=r+t.collisionWidth-a-s,c=t.my[0]==="left"?-t.elemWidth:t.my[0]==="right"?t.elemWidth:0,u=t.at[0]==="left"?t.targetWidth:t.at[0]==="right"?-t.targetWidth:0,p=-2*t.offset[0],f,h;if(l<0){f=e.left+c+u+p+t.collisionWidth-a-o;if(f<0||f<n(l)){e.left+=c+u+p}}else if(d>0){h=e.left-t.collisionPosition.marginLeft+c+u+p-s;if(h>0||n(h)<d){e.left+=c+u+p}}},top:function(e,t){var i=t.within,o=i.offset.top+i.scrollTop,a=i.height,s=i.isWindow?i.scrollTop:i.offset.top,r=e.top-t.collisionPosition.marginTop,l=r-s,d=r+t.collisionHeight-a-s,c=t.my[1]==="top",u=c?-t.elemHeight:t.my[1]==="bottom"?t.elemHeight:0,p=t.at[1]==="top"?t.targetHeight:t.at[1]==="bottom"?-t.targetHeight:0,f=-2*t.offset[1],h,m;if(l<0){m=e.top+u+p+f+t.collisionHeight-a-o;if(m<0||m<n(l)){e.top+=u+p+f}}else if(d>0){h=e.top-t.collisionPosition.marginTop+u+p+f-s;if(h>0||n(h)<d){e.top+=u+p+f}}}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments);e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments);e.ui.position.fit.top.apply(this,arguments)}}}})();return e.ui.position})},150:function(t,i,n){"use strict";var o=n(67);const a=e.utils,s=a.makeXMLDoc,r={id:Symbol("id"),name:Symbol("name"),icon:Symbol("icon"),componentType:Symbol("componentType"),description:Symbol("description"),init:Symbol("init"),parseState:Symbol("parseState"),refresh:Symbol("refresh"),renderVDom:Symbol("renderVDom"),propertiesRenderer:Symbol("propertiesRenderer"),defaultStateGenerator:Symbol("defaultStateGenerator"),cpi:Symbol("cpi"),hideWrapper:Symbol("hideWrapper"),hideFromComponentsList:Symbol("hideFromComponentsList"),isTransparent:Symbol("isTransparent"),alternateFramelessButtons:Symbol("alternateFramelessButtons"),providesContext:Symbol("providesContext"),modelAttributeName:Symbol("modelAttributeName"),actionTypes:Symbol("actionTypes"),handleStateEvent:Symbol("handleStateEvent"),quicklyConfigure:Symbol("quicklyConfigure"),neededNotices:Symbol("neededNotices"),getNotices:Symbol("getNotices"),propHintMap:Symbol("propHintMap"),componentSpoofMap:Symbol("componentSpoofMap"),getSubtitle:Symbol("getSubtitle"),setUniqueId:Symbol("setUniqueId"),actions:Symbol("actions"),createFromModel:Symbol("createFromModel"),afterAttach:Symbol("afterAttach"),makeDraggable:Symbol("makeDraggable"),onSelect:Symbol("onSelect"),isInToolbar:Symbol("isInToolbar"),isInPropertiesPane:Symbol("isInPropertiesPane"),isGlobalComponent:Symbol("isGlobalComponent"),componentRenderer:Symbol("componentRenderer"),addChildComponent:Symbol("addChildComponent"),platforms:Symbol("platforms"),childBuilders:Symbol("childBuilders"),resolveChildBuilder:Symbol("resolveChildBuilder"),getName:Symbol("getName"),getIcon:Symbol("getIcon"),xmlTag:Symbol("xmlTag"),indexSelectors:Symbol("indexSelectors"),copyable:Symbol("copyable")};class l{constructor(e={}){this[r.childBuilders]={};Object.assign(this,{[r.id]:e.id,[r.name]:e.name,[r.getName]:e.getName,[r.getIcon]:e.getIcon,[r.icon]:e.icon,[r.componentType]:e.componentType,[r.description]:e.description,[r.init]:e.init,[r.parseState]:e.parseState,[r.refresh]:e.refresh,[r.renderVDom]:e.renderVDom,[r.propertiesRenderer]:e.propertiesRenderer,[r.defaultStateGenerator]:e.defaultStateGenerator,[r.cpi]:e.cpi,[r.hideWrapper]:e.hideWrapper,[r.hideFromComponentsList]:e.hideFromComponentsList,[r.isTransparent]:e.isTransparent,[r.alternateFramelessButtons]:e.alternateFramelessButtons,[r.providesContext]:e.providesContext,[r.modelAttributeName]:e.modelAttributeName,[r.actionTypes]:e.actionTypes,[r.handleStateEvent]:e.handleStateEvent,[r.quicklyConfigure]:e.quicklyConfigure,[r.neededNotices]:e.neededNotices,[r.getNotices]:e.getNotices,[r.propHintMap]:e.propHintMap,[r.componentSpoofMap]:e.componentSpoofMap,[r.getSubtitle]:e.getSubtitle,[r.setUniqueId]:e.setUniqueId,[r.actions]:e.actions,[r.createFromModel]:e.createFromModel,[r.afterAttach]:e.afterAttach,[r.makeDraggable]:e.makeDraggable,[r.onSelect]:e.onSelect,[r.isInToolbar]:e.isInToolbar,[r.isInPropertiesPane]:e.isInPropertiesPane,[r.isGlobalComponent]:e.isGlobalComponent,[r.componentRenderer]:e.componentRenderer,[r.addChildComponent]:e.addChildComponent,[r.platforms]:e.platforms,[r.xmlTag]:e.xmlTag,[r.indexSelectors]:e.indexSelectors||{},[r.resolveChildBuilder]:e.resolveChildBuilder,[r.copyable]:e.copyable})}renderComponent(t,i){if(this.componentRenderer){t._getCPI()._removeActionItems();this.componentRenderer(t,i)}else{t.body.css("padding","8px").text(e.$L("pb_No_component_renderer"))}}renderProperties(t){new o["a"](t,e.builder.pagebuilderui.cproperties)}getDefaultState(e,t){let i=this.defaultStateGenerator?this.defaultStateGenerator(e):s("<".concat(this.id,"/>"));if(t){if(t.setUniqueId&&!i.attr("uniqueid")){i.attr("uniqueid",a.generateUniqueId())}}return i}registerChildBuilder(e,t){this[r.childBuilders][t||e.xmlTag]=e;return e}getChildBuilders(){return this[r.childBuilders]}getName(e){if(e&&this[r.getName])return this[r.getName](e);return this[r.name]}getIcon(e){if(e&&this[r.getIcon])return this[r.getIcon](e);return this[r.icon]}get id(){return this[r.id]}get name(){return this[r.name]}get icon(){return this[r.icon]}get componentType(){return this[r.componentType]}get description(){return this[r.description]}get init(){return this[r.init]}get parseState(){return this[r.parseState]}get refresh(){return this[r.refresh]}get renderVDom(){return this[r.renderVDom]}get propertiesRenderer(){return this[r.propertiesRenderer]}get defaultStateGenerator(){return this[r.defaultStateGenerator]}get cpi(){return this[r.cpi]}get hideWrapper(){return this[r.hideWrapper]}get hideFromComponentsList(){return this[r.hideFromComponentsList]}get isTransparent(){return this[r.isTransparent]}get alternateFramelessButtons(){return this[r.alternateFramelessButtons]}get providesContext(){return this[r.providesContext]}get modelAttributeName(){return this[r.modelAttributeName]}get actionTypes(){return this[r.actionTypes]}get handleStateEvent(){return this[r.handleStateEvent]}get quicklyConfigure(){return this[r.quicklyConfigure]}get neededNotices(){return this[r.neededNotices]}get getNotices(){return this[r.getNotices]}get propHintMap(){return this[r.propHintMap]}get componentSpoofMap(){return this[r.componentSpoofMap]}get getSubtitle(){return this[r.getSubtitle]}get setUniqueId(){return this[r.setUniqueId]}get actions(){return this[r.actions]}get createFromModel(){return this[r.createFromModel]}get afterAttach(){return this[r.afterAttach]}get makeDraggable(){return this[r.makeDraggable]}get onSelect(){return this[r.onSelect]}get isInToolbar(){return this[r.isInToolbar]}get isInPropertiesPane(){return this[r.isInPropertiesPane]}get isGlobalComponent(){return this[r.isGlobalComponent]}get componentRenderer(){return this[r.componentRenderer]}get addChildComponent(){return this[r.addChildComponent]}get platforms(){return this[r.platforms]}get xmlTag(){return this[r.xmlTag]||this[r.id]}get indexSelectors(){return this[r.indexSelectors]}get copyable(){return this[r.copyable]}resolveChildBuilder(e){if(this[r.resolveChildBuilder])return this[r.resolveChildBuilder](e);return false}}i["a"]=l},155:function(t,i){const n=e.virtualDom.hyperScript;e.componentType.register("skuidbuilder__spoofer",{schema:{attributes:{typeToSpoof:{type:"string"},parentBuilderComponent:{type:"object"},node:{type:"object"},definition:{type:"object"}}},getStyleSettings(){return{}},getStyles(){return{}},init(t,i){const n=i.parentBuilderComponent,o=n.builder,a=o.componentSpoofMap,s=a[i.typeToSpoof],r=s.builder?s.builder:s.getBuilderId?e.builder.getBuilder(s.getBuilderId(i.definition,i.node)):e.builder.getBuilder(s.builderId);Object.assign(this._cpi,s.cpiSpoofers||{});Object.assign(this.cpi,s.cpiSpoofers||{});t.set({rootElementTag:s.rootElementTag||"div",builderComponent:i.node&&t.createChildComponent({componentType:"skuidbuilder__builderComponent",_xmlNode:e.$(i.node),_customBuilder:r,_makeDraggable:s.makeDraggable,_builderComponent:{},_spoofedDefinition:i.definition,_unselectable:s.unselectable}),customSpoofStyles:s.styles})},renderVDom(e){const{builderComponent:t,renderVDom:i,rootElementTag:o,customSpoofStyles:a}=e.getState();return n(o,{key:e,styles:a},[t&&t.renderVDom(),i&&i()])}})},156:function(e,t,i){var n,o,a;(function(s){if(true){!(o=[i(1),i(12)],n=s,a=typeof n==="function"?n.apply(t,o):n,a!==undefined&&(e.exports=a))}else{}})(function(e){return e.ui.escapeSelector=function(){var e=/([!"#$%&'()*+,./:;<=>?@[\]^`{|}~])/g;return function(t){return t.replace(e,"\\$1")}}()})},17:function(e,t){var i;i=function(){return this}();try{i=i||Function("return this")()||(1,eval)("this")}catch(e){if(typeof window==="object")i=window}e.exports=i},19:function(e,t,i){"use strict";i.d(t,"e",function(){return r});i.d(t,"d",function(){return l});i.d(t,"c",function(){return d});i.d(t,"a",function(){return c});i.d(t,"b",function(){return u});i.d(t,"f",function(){return f});var n=i(0);const{h:o,utils:a}=Object(n["d"])();function s(e){let t=0;const i={},n=e.offsetWidth,o=[].slice.call(e.children);o.map(e=>{if(e.getAttribute("data-nocollapse")=="true"){t+=e.offsetWidth}});o.map(e=>{if(e.getAttribute("data-nocollapse")!=="true"){t+=e.offsetWidth;i[e.id]=t<=n}});return i}function r(e,t){const i=document.createElement("div"),a=n["c"].virtualDom.createProjector(),r=()=>o("div",[e()]);const l=n["c"].component.getByType("skuid__page")[0],d=l.getContentElement()[0];i.className="nx-page "+l.getStyledClasses("page");i.style["display"]="block";i.style["width"]="".concat(t,"px");i.style["max-width"]="".concat(t,"px");i.style["visibility"]="hidden";if(!window.getComputedStyle(d).fontFamily){const e=n["c"].themes.getStyleSettingsForComponent(l,{forceRegisterStyleSettings:true});i.style["fontFamily"]=e.fontFamily;i.style["fontSize"]=e.fontSize}if(document.body.contains(d)){d.appendChild(i)}else{document.body.appendChild(i)}a.merge(i,r);a.renderNow();const c=s(i.firstChild);a.detach(r);i.parentNode.removeChild(i);return c}function l(e,t={}){const i=document.createElement("div"),o=n["c"].virtualDom.createProjector();i.style.width=t.width;document.body.appendChild(i);o.merge(i,e,self);o.renderNow();o.detach(e);return i}class d{constructor(e,t){let i=this.cpi={};i.getId=(()=>this.state.uniqueId);t&&Object.keys(t).map(e=>{i[e]=t[e].bind(this)});this._getCPI=(()=>i);if(typeof e!=="function"){throw new Error("maquetteRenderFn must be a function")}this.state={};this.state.uniqueId=a.generateUniqueId();this.renderVDom=e;this._componentType="skuid__lilPonent"}set(e,t){if(typeof e==="string"){this.state[e]=t}if(typeof e==="object"){Object.keys(e).map(t=>{this.state[t]=e[t]})}}get(e){return this.state[e]}getState(){return this.state}}class c{static saveCancel(e,t){const i=t.modelId?[t.modelId]:t.modelIds,o=[{label:n["c"].$L("Save"),icon:t.saveIcon,styleSettingsVariant:t.saveStyleSettingsVariant||"primary",actions:a.makeXMLDoc('\n\t\t\t\t\t\t<actions>\n\t\t\t\t\t\t\t<action type="showToast" message="'.concat(n["c"].$L("Saving"),'" />\n\t\t\t\t\t\t\t<action type="save">\n\t\t\t\t\t\t\t\t<models> \n\t\t\t\t\t\t\t\t').concat(i.map(e=>"<model>".concat(e,"</model>")),'\n\t\t\t\t\t\t\t\t</models>\n\t\t\t\t\t\t\t</action>\n\t\t\t\t\t\t\t<action type="showToast" message="').concat(n["c"].$L("Saved"),'!" />\n\t\t\t\t\t\t</actions>\n\t\t\t\t\t')),enableConditions:a.makeXMLDoc('\n\t\t\t\t\t\t<enableConditions logictype="or">\n\t\t\t\t\t\t\t'.concat(i.map(e=>'<condition type="fieldvalue" enclosevalueinquotes="false" fieldmodel="'.concat(e,'" sourcetype="modelproperty" nosourcerowbehavior="deactivate" sourceproperty="hasChanged" value="true" operator="="/>')),"\n\t\t\t\t\t\t</enableConditions>\n\t\t\t\t\t"))},{label:n["c"].$L("Cancel"),icon:t.cancelIcon,styleSettingsVariant:t.cancelStyleSettingsVariant||"default",actions:a.makeXMLDoc('\n\t\t\t\t\t\t<actions>\n\t\t\t\t\t\t\t<action type="cancel">\n\t\t\t\t\t\t\t\t<models>\n\t\t\t\t\t\t\t\t\t'.concat(i.map(e=>"<model>".concat(e,"</model>")),"\n\t\t\t\t\t\t\t\t</models>\n\t\t\t\t\t\t\t</action>\n\t\t\t\t\t\t</actions>\n\t\t\t\t\t")),enableConditions:a.makeXMLDoc('\n\t\t\t\t\t\t<enableConditions logictype="or">\n\t\t\t\t\t\t\t'.concat(i.map(e=>'<condition type="fieldvalue" enclosevalueinquotes="false" fieldmodel="'.concat(e,'" sourcetype="modelproperty" nosourcerowbehavior="deactivate" sourceproperty="hasChanged" value="true" operator="="/>')),"\n\t\t\t\t\t\t</enableConditions>\n\t\t\t\t\t"))}];return e.createChildComponent({componentType:"skuid__buttonSet",position:t.position||"right",groups:[{buttons:o}],context:Object.assign({},t.context,{initiatorId:e.get("uniqueId")})})}static massActionCheckboxHead(e,t){const i=e.getState();return e.createChildComponent(Object.assign({componentType:"skuid__checkbox",styleSettingsVariant:"@parent/massActionCheckboxes",tabIndex:"-1",ariaLabel:"Select all rows",uniqueId:"".concat(i.uniqueId,"__mass-action-checkbox--head")},t))}}class u{static createTemplateEditModal(e,t,i,o={}){const a=i.getRowMergeResult(t,e),s=a.fields.filter(e=>!!i.getField(e.id)),r=[{label:"Done",styleSettingsVariant:"primary",onClick:()=>l.getCPI().close()}],l=n["c"].utils._floatingComponentFactory.createModal({title:"Template Field",buttons:r,components:[{componentType:"skuid__form",mode:"edit",model:i,row:t,sections:[{rows:s.map(e=>({fields:[{id:e.id}]}))}],styles:{spacing:{marginBottom:4}}}]});o.onClose&&l.subscribe("close",o.onClose);return l}}if(a){a.field={}}function p(e){return e.replace(":","_")+"-Instance"}function f(e,t,i={}){const n=i.instanceName||p(e),o=t.get(n);if(o){return o}else{t.set(n,t.createChildComponent(Object.assign({componentType:"skuid__icon",handle:e},i.definition)),{renderOnChange:false});return t.get(n)}}},2:function(e,t,i){"use strict";i.d(t,"g",function(){return a});i.d(t,"i",function(){return s});i.d(t,"j",function(){return r});i.d(t,"q",function(){return d});i.d(t,"p",function(){return u});i.d(t,"e",function(){return h});i.d(t,"b",function(){return g});i.d(t,"v",function(){return b});i.d(t,"f",function(){return y});i.d(t,"h",function(){return C});i.d(t,"n",function(){return _});i.d(t,"c",function(){return w});i.d(t,"k",function(){return k});i.d(t,"o",function(){return I});i.d(t,"u",function(){return A});i.d(t,"s",function(){return P});i.d(t,"w",function(){return E});i.d(t,"m",function(){return M});i.d(t,"d",function(){return D});i.d(t,"t",function(){return F});i.d(t,"x",function(){return O});i.d(t,"r",function(){return R});i.d(t,"a",function(){return L});i.d(t,"l",function(){return B});const n="ABCDEFGHIJKLMNOPQRSTUVWXYZ",o="1234567890",a={ADDRESS:"ADDRESS",ANYTYPE:"ANYTYPE",ARRAY:"ARRAY",BASE64:"BASE64",BOOLEAN:"BOOLEAN",BUTTONGROUP:"BUTTONGROUP",COMBOBOX:"COMBOBOX",CURRENCY:"CURRENCY",CUSTOM:"CUSTOM",DATE:"DATE",DATETIME:"DATETIME",DOUBLE:"DOUBLE",EMAIL:"EMAIL",ENCRYPTEDSTRING:"ENCRYPTEDSTRING",FORMULA:"FORMULA",ID:"ID",IMAGE:"IMAGE",INTEGER:"INTEGER",LOCATION:"LOCATION",MULTIBUTTONGROUP:"MULTIBUTTONGROUP",MULTIPICKLIST:"MULTIPICKLIST",NUMBER:"NUMBER",OBJECT:"OBJECT",PHONE:"PHONE",PICKLIST:"PICKLIST",PERCENT:"PERCENT",REFERENCE:"REFERENCE",STRING:"STRING",TEXT:"TEXT",TEXTAREA:"TEXTAREA",RICHTEXT:"RICHTEXT",TIME:"TIME",URL:"URL",UUID:"UUID"},s={CHILDREL:"CHILDREL",COMBO:"COMBO",FILE:"FILE",IMAGE:"IMAGE"},r={BOOLEAN:"boolean",NUMBER:"number",STRING:"string",OBJECT:"object",FUNCTION:"function",UNDEFINED:"undefined"},l={DEFAULT_DATA_SOURCE:"defaultDS"},d={JSON:"application/json",ZIP:"application/zip",FORM_URL_ENCODED:"application/x-www-form-urlencoded"},c={GET:"GET",PATCH:"PATCH",POST:"POST",PUT:"PUT",DELETE:"DELETE",MERGE:"MERGE"},u={GLOBAL:"global",MODEL:"model",ROW:"row"},p=["ink","ink-filetypes","font-awesome","foundation-icons","icons8-win10","ionicons","material-icons","lightning-icons"],f={"font-awesome":"Font Awesome 4","foundation-icons":"Foundation","icons8-win10":"Icons8 Windows 10",ink:"Ink","ink-filetypes":"Ink Filetypes",ionicons:"Ion","material-icons":"Material","lightning-icons":"Lightning Design"},h={SEARCH_CONDITION:"__default_searchbox",SEARCH_CONDITION_CLIENT:"__default_searchbox_client",GLOBAL_SEARCH_CONDITION:"search"},m={PAGE_REDIRECT:"pageredirect",PLATFORM_ACTION:"platform-action",REDIRECT:"redirect"},g={REUSABLE:"reusable",EVENT_TRIGGERED:"event-triggered",HOTKEY_TRIGGERED:"hotkey-triggered",VOICE_COMMAND:"voice-command"},b={COMPONENT:"component",MODEL:"model",PAGE:"page",SKUID:"skuid",GLOBAL:"global"},v={medium:1024,small:480},y={NOW:"NOW",YESTERDAY:"YESTERDAY",TODAY:"TODAY",TOMORROW:"TOMORROW",LAST_90_DAYS:"LAST_90_DAYS",NEXT_90_DAYS:"NEXT_90_DAYS",LAST_N_DAYS:"LAST_N_DAYS",NEXT_N_DAYS:"NEXT_N_DAYS",N_DAYS_AGO:"N_DAYS_AGO",LAST_WEEK:"LAST_WEEK",THIS_WEEK:"THIS_WEEK",NEXT_WEEK:"NEXT_WEEK",LAST_N_WEEKS:"LAST_N_WEEKS",NEXT_N_WEEKS:"NEXT_N_WEEKS",N_WEEKS_AGO:"N_WEEKS_AGO",LAST_MONTH:"LAST_MONTH",THIS_MONTH:"THIS_MONTH",NEXT_MONTH:"NEXT_MONTH",LAST_N_MONTHS:"LAST_N_MONTHS",NEXT_N_MONTHS:"NEXT_N_MONTHS",N_MONTHS_AGO:"N_MONTHS_AGO",LAST_QUARTER:"LAST_QUARTER",THIS_QUARTER:"THIS_QUARTER",NEXT_QUARTER:"NEXT_QUARTER",LAST_N_QUARTERS:"LAST_N_QUARTERS",NEXT_N_QUARTERS:"NEXT_N_QUARTERS",N_QUARTERS_AGO:"N_QUARTERS_AGO",LAST_YEAR:"LAST_YEAR",THIS_YEAR:"THIS_YEAR",NEXT_YEAR:"NEXT_YEAR",LAST_N_YEARS:"LAST_N_YEARS",NEXT_N_YEARS:"NEXT_N_YEARS",N_YEARS_AGO:"N_YEARS_AGO"},C={DEV:"development",PROD:"production",TEST:"test"},_={ERROR:"error",WARNING:"warning",INFO:"info"},w={SUM:"sum",AVERAGE:"avg",MAXIMUM:"max",MINIMUM:"min",MEDIAN:"med",COUNT:"count"},x={TOKEN_SHORTHAND_PREFIX:"@tk",PALETTE_SHORTHAND_PREFIX:"@palette"},k={ALT:18,BACKSPACE:8,CAPSLOCK:20,COMMA:188,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38},S={BLANK:"blank",DS_USER_INFO:"datasourceuserinfo",FIELD_VALUE:"fieldvalue",FORMULA:"formula",MODEL_MERGE:"modelmerge",PARAM:"param",USER_INFO:"userinfo"},I="styleSettingVariantNameMappings",T="local",A="salesforce",P="skuid-platform",E="visualforce",M="lightning",D="cordova",N="YYYY-MM-DD",F=typeof window!=="undefined"&&window.SKUID_RUNNING_TESTS,O={HEADER:50,EDIT_PAGE_BUTTON:51,DYNAMIC:1e3,TOAST:1e6,UI_BLOCKER:1000001},R=5,L={WRITEABLE:"writeable",READONLY:"readonly"},B="48.0";const j={ACCESS:L,ACTION_TYPES:m,ACTION_SEQUENCE_TYPES:g,AGGREGATION_TYPES:w,ALPHABET:n,CORDOVA:D,DATASOURCE:h,DATE_KEYWORDS:y,DATE_STORAGE_FORMAT:N,DIGITS:o,DISPLAY_TYPES:a,ENVIRONMENTS:C,EVENT_SCOPES:b,FIELD_TYPES:s,HTTP_VERBS:c,JS_TYPES:r,KEYCODES:k,LATEST_SFDC_API_VERSION:B,LIGHTNING:M,LOCAL:T,LOCAL_STORAGE_KEYS:l,LOG_LEVELS:_,MAPPED_STYLE_SETTINGS_TOKEN_NAME:I,MEDIA_QUERY_BREAKPOINTS:v,MERGE_CONTEXTS:u,MIME_TYPES:d,MODEL_CHANGE_DEBOUNCE_RATE:R,NATIVE:P,SALESFORCE:A,SCOPES:b,THEME_CONSTANTS:x,VALUE_SOURCES:S,VISUALFORCE:E,WEB_ICON_SET_LABELS:f,WEB_ICON_SET_PREFIXES:p,Z_INDICES:O};if(F)j.RUNNING_TESTS=F;t["y"]=j},21:function(e,t,i){"use strict";i.d(t,"c",function(){return o});i.d(t,"b",function(){return a});i.d(t,"a",function(){return s});const n={manifest:Symbol("manifest"),deploymentConfiguration:Symbol("deploymentConfiguration"),builderId:Symbol("builderId"),model:Symbol("model"),dataSource:Symbol("dataSource"),entity:Symbol("entity"),isGlobalComponent:Symbol("isGlobalComponent"),doNotSelect:Symbol("doNotSelect"),builderToUse:Symbol("builderToUse"),component:Symbol("component"),fieldName:Symbol("fieldName"),fieldId:Symbol("fieldId"),isChildRelationship:Symbol("isChildRelationship"),recreate:Symbol("recreate")};class o{constructor(e,t){if(!e)throw Error("dragManifest must be defined");this[n.manifest]=e;this[n.deploymentConfiguration]=t||new s}get manifest(){return this[n.manifest]}get deploymentConfiguration(){return this[n.deploymentConfiguration]}}class a{constructor(e){Object.assign(this,{[n.builderId]:e.builderId,[n.model]:e.model,[n.dataSource]:e.dataSource,[n.entity]:e.entity,[n.isGlobalComponent]:e.isGlobalComponent||false})}get builderId(){return this[n.builderId]}get model(){return this[n.model]}get dataSource(){return this[n.dataSource]}get entity(){return this[n.entity]}get isGlobalComponent(){return this[n.isGlobalComponent]}}class s{constructor(e={}){Object.assign(this,{[n.doNotSelect]:e.doNotSelect===true,[n.builderToUse]:e.builderToUse,[n.component]:e.component,[n.recreate]:e.recreate,[n.fieldName]:e.fieldName,[n.fieldId]:e.fieldId,[n.isChildRelationship]:e.isChildRelationship})}get doNotSelect(){return this[n.doNotSelect]}get builderToUse(){return this[n.builderToUse]}get component(){return this[n.component]}get fieldName(){return this[n.fieldName]}get fieldId(){return this[n.fieldId]}get isChildRelationship(){return this[n.isChildRelationship]}get recreate(){return this[n.recreate]}}},23:function(t,i,n){"use strict";n.d(i,"a",function(){return u});n.d(i,"b",function(){return f});n.d(i,"d",function(){return h});n.d(i,"e",function(){return g});n.d(i,"c",function(){return b});n.d(i,"h",function(){return v});n.d(i,"f",function(){return y});n.d(i,"g",function(){return C});const o=e.events.publish,a=e.platform,s=e.version;function r(e){return e.parents().filter((e,t)=>t.nodeName.match(/^skuid__/)).first()}function l(){return{apiVersion:s.id,skuidVersion:s.number,versionDate:s.date}}function d(){return{platform:a.getName()}}function c(e,t,i){(e||[]).forEach(e=>{if(e.type==="attributes")t(e);else if(e.type==="childList")i(e)})}function u(e,t){if(!e)return;const i=e.get("xmlState"),n=i[0].nodeName,a=r(i),s=a[0].nodeName,c=a.attr("uniqueid")||a.attr("uniqueId"),u=i.index();o("builder.component.created",{method:t,builderComponent:e,componentXml:i,parentComponentXml:a});o("heap.track",{eventName:"Composer - Component - Created",data:Object.assign({parentComponentType:s,parentComponentUniqueId:c,componentType:n,componentIndex:u,method:t},d(),{},l())})}function p(e,t){const i=e.get("xmlState"),n=i[0],o=n.nodeName,a=r(i),s={},l={};const d=e=>{const{target:t,attributeName:i,oldValue:o}=e,a=t.getAttribute(i),r={value:a,oldValue:o};if(t===n){s[i]=r}else{const e=l[t]=l[t]||{},n=e.changes=e.changes||{};e.node=t;n[i]=r}};const u=e=>{const{addedNodes:t,removedNodes:i}=e;t.forEach(e=>{const t=l[e]=l[e]||{};t.node=e;t.created=true});i.forEach(e=>{const t=l[e]=l[e]||{};t.node=e;t.removed=true})};c(t,d,u);return{builderComponent:e,componentType:o,componentXml:i,parentComponentXml:a,attributeChanges:s,nodeChanges:l}}function f(e,t){if(!e)return;try{o("builder.component.updated",p(e,t))}catch(e){}}function h(e){if(!e)return;const t=e.get("xmlState");o("builder.model.created",{modelId:t.attr("id"),modelXml:t,builderComponent:e})}function m(e,t){const i=e[0],n={},o={field:{},condition:{}};const a=e=>{const{target:t,attributeName:a,oldValue:s}=e,r=t.getAttribute(a),l={value:r,oldValue:s};if(t===i){n[a]=l}else{const e=o[t.nodeName];let i,n,s;switch(t.nodeName){case"field":i=t.getAttribute("id"),n=e[i]=e[i]||{node:t};s=n.changes=n.changes||{};s[a]=l;break;case"condition":i=t;n=e[t]=e[t]||{node:t};s=n.changes=n.changes||{};s[a]=l;break}}};const s=e=>{const{addedNodes:t,removedNodes:i}=e;t.forEach(e=>{const t=e.getAttribute("id")||e,i=o[e.nodeName];if(i){i[t]=Object.assign({},i[t]||{},{created:true,node:e})}});i.forEach(e=>{const t=e.getAttribute("id")||e,i=o[e.nodeName];if(i){i[t]=Object.assign({},i[t]||{},{removed:true,node:e})}})};c(t,a,s);return{modelId:e.attr("id"),modelXml:e,propertyChanges:n,fieldsChanges:o.field,conditionsChanges:o.condition}}function g(e,t){if(!e)return;try{o("builder.model.updated",m(e,t))}catch(e){}}function b(e){o("builder.elementspane.loaded",{pane:e,paneId:e.currentTabLabel})}function v(){o("builder.page.saved")}function y(){o("builder.page.cancelled")}function C(){o("builder.page.previewed")}},279:function(e,t,i){var n,o,a;(function(s){if(true){!(o=[i(1),i(80),i(148),i(141),i(140),i(12),i(46)],n=s,a=typeof n==="function"?n.apply(t,o):n,a!==undefined&&(e.exports=a))}else{}})(function(e){return e.widget("ui.menu",{version:"1.12.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;this.mouseHandled=false;this.element.uniqueId().attr({role:this.options.role,tabIndex:0});this._addClass("ui-menu","ui-widget ui-widget-content");this._on({"mousedown .ui-menu-item":function(e){e.preventDefault()},"click .ui-menu-item":function(t){var i=e(t.target);var n=e(e.ui.safeActiveElement(this.document[0]));if(!this.mouseHandled&&i.not(".ui-state-disabled").length){this.select(t);if(!t.isPropagationStopped()){this.mouseHandled=true}if(i.has(".ui-menu").length){this.expand(t)}else if(!this.element.is(":focus")&&n.closest(".ui-menu").length){this.element.trigger("focus",[true]);if(this.active&&this.active.parents(".ui-menu").length===1){clearTimeout(this.timer)}}}},"mouseenter .ui-menu-item":function(t){if(this.previousFilter){return}var i=e(t.target).closest(".ui-menu-item"),n=e(t.currentTarget);if(i[0]!==n[0]){return}this._removeClass(n.siblings().children(".ui-state-active"),null,"ui-state-active");this.focus(t,n)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var i=this.active||this.element.find(this.options.items).eq(0);if(!t){this.focus(e,i)}},blur:function(t){this._delay(function(){var i=!e.contains(this.element[0],e.ui.safeActiveElement(this.document[0]));if(i){this.collapseAll(t)}})},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(e){if(this._closeOnDocumentClick(e)){this.collapseAll(e)}this.mouseHandled=false}})},_destroy:function(){var t=this.element.find(".ui-menu-item").removeAttr("role aria-disabled"),i=t.children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled "+"tabIndex").removeUniqueId().show();i.children().each(function(){var t=e(this);if(t.data("ui-menu-submenu-caret")){t.remove()}})},_keydown:function(t){var i,n,o,a,s=true;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:if(this.active&&!this.active.is(".ui-state-disabled")){this.expand(t)}break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:s=false;n=this.previousFilter||"";a=false;o=t.keyCode>=96&&t.keyCode<=105?(t.keyCode-96).toString():String.fromCharCode(t.keyCode);clearTimeout(this.filterTimer);if(o===n){a=true}else{o=n+o}i=this._filterMenuItems(o);i=a&&i.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):i;if(!i.length){o=String.fromCharCode(t.keyCode);i=this._filterMenuItems(o)}if(i.length){this.focus(t,i);this.previousFilter=o;this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)}else{delete this.previousFilter}}if(s){t.preventDefault()}},_activate:function(e){if(this.active&&!this.active.is(".ui-state-disabled")){if(this.active.children("[aria-haspopup='true']").length){this.expand(e)}else{this.select(e)}}},refresh:function(){var t,i,n,o,a,s=this,r=this.options.icons.submenu,l=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length);n=l.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),i=t.prev(),n=e("<span>").data("ui-menu-submenu-caret",true);s._addClass(n,"ui-menu-icon","ui-icon "+r);i.attr("aria-haspopup","true").prepend(n);t.attr("aria-labelledby",i.attr("id"))});this._addClass(n,"ui-menu","ui-widget ui-widget-content ui-front");t=l.add(this.element);i=t.find(this.options.items);i.not(".ui-menu-item").each(function(){var t=e(this);if(s._isDivider(t)){s._addClass(t,"ui-menu-divider","ui-widget-content")}});o=i.not(".ui-menu-item, .ui-menu-divider");a=o.children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()});this._addClass(o,"ui-menu-item")._addClass(a,"ui-menu-item-wrapper");i.filter(".ui-state-disabled").attr("aria-disabled","true");if(this.active&&!e.contains(this.element[0],this.active[0])){this.blur()}},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){if(e==="icons"){var i=this.element.find(".ui-menu-icon");this._removeClass(i,null,this.options.icons.submenu)._addClass(i,null,t.submenu)}this._super(e,t)},_setOptionDisabled:function(e){this._super(e);this.element.attr("aria-disabled",String(e));this._toggleClass(null,"ui-state-disabled",!!e)},focus:function(e,t){var i,n,o;this.blur(e,e&&e.type==="focus");this._scrollIntoView(t);this.active=t.first();n=this.active.children(".ui-menu-item-wrapper");this._addClass(n,null,"ui-state-active");if(this.options.role){this.element.attr("aria-activedescendant",n.attr("id"))}o=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper");this._addClass(o,null,"ui-state-active");if(e&&e.type==="keydown"){this._close()}else{this.timer=this._delay(function(){this._close()},this.delay)}i=t.children(".ui-menu");if(i.length&&e&&/^mouse/.test(e.type)){this._startOpening(i)}this.activeMenu=t.parent();this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var i,n,o,a,s,r;if(this._hasScroll()){i=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0;n=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0;o=t.offset().top-this.activeMenu.offset().top-i-n;a=this.activeMenu.scrollTop();s=this.activeMenu.height();r=t.outerHeight();if(o<0){this.activeMenu.scrollTop(a+o)}else if(o+r>s){this.activeMenu.scrollTop(a+o-s+r)}}},blur:function(e,t){if(!t){clearTimeout(this.timer)}if(!this.active){return}this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active");this._trigger("blur",e,{item:this.active});this.active=null},_startOpening:function(e){clearTimeout(this.timer);if(e.attr("aria-hidden")!=="true"){return}this.timer=this._delay(function(){this._close();this._open(e)},this.delay)},_open:function(t){var i=e.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true");t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer);this.timer=this._delay(function(){var n=i?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));if(!n.length){n=this.element}this._close(n);this.blur(t);this._removeClass(n.find(".ui-state-active"),null,"ui-state-active");this.activeMenu=n},this.delay)},_close:function(e){if(!e){e=this.active?this.active.parent():this.element}e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(t){return!e(t.target).closest(".ui-menu").length},_isDivider:function(e){return!/[^\-\u2014\u2013\s]/.test(e.text())},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);if(t&&t.length){this._close();this.focus(e,t)}},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();if(t&&t.length){this._open(t.parent());this._delay(function(){this.focus(e,t)})}},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,i){var n;if(this.active){if(e==="first"||e==="last"){n=this.active[e==="first"?"prevAll":"nextAll"](".ui-menu-item").eq(-1)}else{n=this.active[e+"All"](".ui-menu-item").eq(0)}}if(!n||!n.length||!this.active){n=this.activeMenu.find(this.options.items)[t]()}this.focus(i,n)},nextPage:function(t){var i,n,o;if(!this.active){this.next(t);return}if(this.isLastItem()){return}if(this._hasScroll()){n=this.active.offset().top;o=this.element.height();this.active.nextAll(".ui-menu-item").each(function(){i=e(this);return i.offset().top-n-o<0});this.focus(t,i)}else{this.focus(t,this.activeMenu.find(this.options.items)[!this.active?"first":"last"]())}},previousPage:function(t){var i,n,o;if(!this.active){this.next(t);return}if(this.isFirstItem()){return}if(this._hasScroll()){n=this.active.offset().top;o=this.element.height();this.active.prevAll(".ui-menu-item").each(function(){i=e(this);return i.offset().top-n+o>0});this.focus(t,i)}else{this.focus(t,this.activeMenu.find(this.options.items).first())}},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var i={item:this.active};if(!this.active.has(".ui-menu").length){this.collapseAll(t,true)}this._trigger("select",t,i)},_filterMenuItems:function(t){var i=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),n=new RegExp("^"+i,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return n.test(e.trim(e(this).children(".ui-menu-item-wrapper").text()))})}})})},280:function(e,t,i){var n,o,a;(function(s){if(true){!(o=[i(1),i(290),i(291),i(80),i(46)],n=s,a=typeof n==="function"?n.apply(t,o):n,a!==undefined&&(e.exports=a))}else{}})(function(e){e.widget("ui.button",{version:"1.12.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:true},_getCreateOptions:function(){var e,t=this._super()||{};this.isInput=this.element.is("input");e=this.element[0].disabled;if(e!=null){t.disabled=e}this.originalLabel=this.isInput?this.element.val():this.element.html();if(this.originalLabel){t.label=this.originalLabel}return t},_create:function(){if(!this.option.showLabel&!this.options.icon){this.options.showLabel=true}if(this.options.disabled==null){this.options.disabled=this.element[0].disabled||false}this.hasTitle=!!this.element.attr("title");if(this.options.label&&this.options.label!==this.originalLabel){if(this.isInput){this.element.val(this.options.label)}else{this.element.html(this.options.label)}}this._addClass("ui-button","ui-widget");this._setOption("disabled",this.options.disabled);this._enhance();if(this.element.is("a")){this._on({keyup:function(t){if(t.keyCode===e.ui.keyCode.SPACE){t.preventDefault();if(this.element[0].click){this.element[0].click()}else{this.element.trigger("click")}}}})}},_enhance:function(){if(!this.element.is("button")){this.element.attr("role","button")}if(this.options.icon){this._updateIcon("icon",this.options.icon);this._updateTooltip()}},_updateTooltip:function(){this.title=this.element.attr("title");if(!this.options.showLabel&&!this.title){this.element.attr("title",this.options.label)}},_updateIcon:function(t,i){var n=t!=="iconPosition",o=n?this.options.iconPosition:i,a=o==="top"||o==="bottom";if(!this.icon){this.icon=e("<span>");this._addClass(this.icon,"ui-button-icon","ui-icon");if(!this.options.showLabel){this._addClass("ui-button-icon-only")}}else if(n){this._removeClass(this.icon,null,this.options.icon)}if(n){this._addClass(this.icon,null,i)}this._attachIcon(o);if(a){this._addClass(this.icon,null,"ui-widget-icon-block");if(this.iconSpace){this.iconSpace.remove()}}else{if(!this.iconSpace){this.iconSpace=e("<span> </span>");this._addClass(this.iconSpace,"ui-button-icon-space")}this._removeClass(this.icon,null,"ui-wiget-icon-block");this._attachIconSpace(o)}},_destroy:function(){this.element.removeAttr("role");if(this.icon){this.icon.remove()}if(this.iconSpace){this.iconSpace.remove()}if(!this.hasTitle){this.element.removeAttr("title")}},_attachIconSpace:function(e){this.icon[/^(?:end|bottom)/.test(e)?"before":"after"](this.iconSpace)},_attachIcon:function(e){this.element[/^(?:end|bottom)/.test(e)?"append":"prepend"](this.icon)},_setOptions:function(e){var t=e.showLabel===undefined?this.options.showLabel:e.showLabel,i=e.icon===undefined?this.options.icon:e.icon;if(!t&&!i){e.showLabel=true}this._super(e)},_setOption:function(e,t){if(e==="icon"){if(t){this._updateIcon(e,t)}else if(this.icon){this.icon.remove();if(this.iconSpace){this.iconSpace.remove()}}}if(e==="iconPosition"){this._updateIcon(e,t)}if(e==="showLabel"){this._toggleClass("ui-button-icon-only",null,!t);this._updateTooltip()}if(e==="label"){if(this.isInput){this.element.val(t)}else{this.element.html(t);if(this.icon){this._attachIcon(this.options.iconPosition);this._attachIconSpace(this.options.iconPosition)}}}this._super(e,t);if(e==="disabled"){this._toggleClass(null,"ui-state-disabled",t);this.element[0].disabled=t;if(t){this.element.blur()}}},refresh:function(){var e=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");if(e!==this.options.disabled){this._setOptions({disabled:e})}this._updateTooltip()}});if(e.uiBackCompat!==false){e.widget("ui.button",e.ui.button,{options:{text:true,icons:{primary:null,secondary:null}},_create:function(){if(this.options.showLabel&&!this.options.text){this.options.showLabel=this.options.text}if(!this.options.showLabel&&this.options.text){this.options.text=this.options.showLabel}if(!this.options.icon&&(this.options.icons.primary||this.options.icons.secondary)){if(this.options.icons.primary){this.options.icon=this.options.icons.primary}else{this.options.icon=this.options.icons.secondary;this.options.iconPosition="end"}}else if(this.options.icon){this.options.icons.primary=this.options.icon}this._super()},_setOption:function(e,t){if(e==="text"){this._super("showLabel",t);return}if(e==="showLabel"){this.options.text=t}if(e==="icon"){this.options.icons.primary=t}if(e==="icons"){if(t.primary){this._super("icon",t.primary);this._super("iconPosition","beginning")}else if(t.secondary){this._super("icon",t.secondary);this._super("iconPosition","end")}}this._superApply(arguments)}});e.fn.button=function(t){return function(){if(!this.length||this.length&&this[0].tagName!=="INPUT"||this.length&&this[0].tagName==="INPUT"&&(this.attr("type")!=="checkbox"&&this.attr("type")!=="radio")){return t.apply(this,arguments)}if(!e.ui.checkboxradio){e.error("Checkboxradio widget missing")}if(arguments.length===0){return this.checkboxradio({icon:false})}return this.checkboxradio.apply(this,arguments)}}(e.fn.button);e.fn.buttonset=function(){if(!e.ui.controlgroup){e.error("Controlgroup widget missing")}if(arguments[0]==="option"&&arguments[1]==="items"&&arguments[2]){return this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]])}if(arguments[0]==="option"&&arguments[1]==="items"){return this.controlgroup.apply(this,[arguments[0],"items.button"])}if(typeof arguments[0]==="object"&&arguments[0].items){arguments[0].items={button:arguments[0].items}}return this.controlgroup.apply(this,arguments)}}return e.ui.button})},281:function(e,t,i){var n,o,a;(function(s){if(true){!(o=[i(1),i(129),i(295),i(296),i(141),i(297),i(298),i(12),i(46)],n=s,a=typeof n==="function"?n.apply(t,o):n,a!==undefined&&(e.exports=a))}else{}})(function(e){e.widget("ui.draggable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false,drag:null,start:null,stop:null},_create:function(){if(this.options.helper==="original"){this._setPositionRelative()}if(this.options.addClasses){this._addClass("ui-draggable")}this._setHandleClassName();this._mouseInit()},_setOption:function(e,t){this._super(e,t);if(e==="handle"){this._removeHandleClassName();this._setHandleClassName()}},_destroy:function(){if((this.helper||this.element).is(".ui-draggable-dragging")){this.destroyOnClear=true;return}this._removeHandleClassName();this._mouseDestroy()},_mouseCapture:function(t){var i=this.options;if(this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0){return false}this.handle=this._getHandle(t);if(!this.handle){return false}this._blurActiveElement(t);this._blockFrames(i.iframeFix===true?"iframe":i.iframeFix);return true},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){if(this.iframeBlocks){this.iframeBlocks.remove();delete this.iframeBlocks}},_blurActiveElement:function(t){var i=e.ui.safeActiveElement(this.document[0]),n=e(t.target);if(n.closest(i).length){return}e.ui.safeBlur(i)},_mouseStart:function(t){var i=this.options;this.helper=this._createHelper(t);this._addClass(this.helper,"ui-draggable-dragging");this._cacheHelperProportions();if(e.ui.ddmanager){e.ui.ddmanager.current=this}this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent(true);this.offsetParent=this.helper.offsetParent();this.hasFixedAncestor=this.helper.parents().filter(function(){return e(this).css("position")==="fixed"}).length>0;this.positionAbs=this.element.offset();this._refreshOffsets(t);this.originalPosition=this.position=this._generatePosition(t,false);this.originalPageX=t.pageX;this.originalPageY=t.pageY;i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt);this._setContainment();if(this._trigger("start",t)===false){this._clear();return false}this._cacheHelperProportions();if(e.ui.ddmanager&&!i.dropBehaviour){e.ui.ddmanager.prepareOffsets(this,t)}this._mouseDrag(t,true);if(e.ui.ddmanager){e.ui.ddmanager.dragStart(this,t)}return true},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:false,parent:this._getParentOffset(),relative:this._getRelativeOffset()};this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,i){if(this.hasFixedAncestor){this.offset.parent=this._getParentOffset()}this.position=this._generatePosition(t,true);this.positionAbs=this._convertPositionTo("absolute");if(!i){var n=this._uiHash();if(this._trigger("drag",t,n)===false){this._mouseUp(new e.Event("mouseup",t));return false}this.position=n.position}this.helper[0].style.left=this.position.left+"px";this.helper[0].style.top=this.position.top+"px";if(e.ui.ddmanager){e.ui.ddmanager.drag(this,t)}return false},_mouseStop:function(t){var i=this,n=false;if(e.ui.ddmanager&&!this.options.dropBehaviour){n=e.ui.ddmanager.drop(this,t)}if(this.dropped){n=this.dropped;this.dropped=false}if(this.options.revert==="invalid"&&!n||this.options.revert==="valid"&&n||this.options.revert===true||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)){e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){if(i._trigger("stop",t)!==false){i._clear()}})}else{if(this._trigger("stop",t)!==false){this._clear()}}return false},_mouseUp:function(t){this._unblockFrames();if(e.ui.ddmanager){e.ui.ddmanager.dragStop(this,t)}if(this.handleElement.is(t.target)){this.element.trigger("focus")}return e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){if(this.helper.is(".ui-draggable-dragging")){this._mouseUp(new e.Event("mouseup",{target:this.element[0]}))}else{this._clear()}return this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:true},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element;this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper),o=n?e(i.helper.apply(this.element[0],[t])):i.helper==="clone"?this.element.clone().removeAttr("id"):this.element;if(!o.parents("body").length){o.appendTo(i.appendTo==="parent"?this.element[0].parentNode:i.appendTo)}if(n&&o[0]===this.element[0]){this._setPositionRelative()}if(o[0]!==this.element[0]&&!/(fixed|absolute)/.test(o.css("position"))){o.css("position","absolute")}return o},_setPositionRelative:function(){if(!/^(?:r|a|f)/.test(this.element.css("position"))){this.element[0].style.position="relative"}},_adjustOffsetFromHelper:function(t){if(typeof t==="string"){t=t.split(" ")}if(e.isArray(t)){t={left:+t[0],top:+t[1]||0}}if("left"in t){this.offset.click.left=t.left+this.margins.left}if("right"in t){this.offset.click.left=this.helperProportions.width-t.right+this.margins.left}if("top"in t){this.offset.click.top=t.top+this.margins.top}if("bottom"in t){this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top}},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),i=this.document[0];if(this.cssPosition==="absolute"&&this.scrollParent[0]!==i&&e.contains(this.scrollParent[0],this.offsetParent[0])){t.left+=this.scrollParent.scrollLeft();t.top+=this.scrollParent.scrollTop()}if(this._isRootNode(this.offsetParent[0])){t={top:0,left:0}}return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition!=="relative"){return{top:0,left:0}}var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(!t?this.scrollParent.scrollTop():0),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(!t?this.scrollParent.scrollLeft():0)}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,o=this.options,a=this.document[0];this.relativeContainer=null;if(!o.containment){this.containment=null;return}if(o.containment==="window"){this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||a.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(o.containment==="document"){this.containment=[0,0,e(a).width()-this.helperProportions.width-this.margins.left,(e(a).height()||a.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(o.containment.constructor===Array){this.containment=o.containment;return}if(o.containment==="parent"){o.containment=this.helper[0].parentNode}i=e(o.containment);n=i[0];if(!n){return}t=/(scroll|auto)/.test(i.css("overflow"));this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relativeContainer=i},_convertPositionTo:function(e,t){if(!t){t=this.position}var i=e==="absolute"?1:-1,n=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*i+this.offset.parent.top*i-(this.cssPosition==="fixed"?-this.offset.scroll.top:n?0:this.offset.scroll.top)*i,left:t.left+this.offset.relative.left*i+this.offset.parent.left*i-(this.cssPosition==="fixed"?-this.offset.scroll.left:n?0:this.offset.scroll.left)*i}},_generatePosition:function(e,t){var i,n,o,a,s=this.options,r=this._isRootNode(this.scrollParent[0]),l=e.pageX,d=e.pageY;if(!r||!this.offset.scroll){this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}}if(t){if(this.containment){if(this.relativeContainer){n=this.relativeContainer.offset();i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]}else{i=this.containment}if(e.pageX-this.offset.click.left<i[0]){l=i[0]+this.offset.click.left}if(e.pageY-this.offset.click.top<i[1]){d=i[1]+this.offset.click.top}if(e.pageX-this.offset.click.left>i[2]){l=i[2]+this.offset.click.left}if(e.pageY-this.offset.click.top>i[3]){d=i[3]+this.offset.click.top}}if(s.grid){o=s.grid[1]?this.originalPageY+Math.round((d-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY;d=i?o-this.offset.click.top>=i[1]||o-this.offset.click.top>i[3]?o:o-this.offset.click.top>=i[1]?o-s.grid[1]:o+s.grid[1]:o;a=s.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX;l=i?a-this.offset.click.left>=i[0]||a-this.offset.click.left>i[2]?a:a-this.offset.click.left>=i[0]?a-s.grid[0]:a+s.grid[0]:a}if(s.axis==="y"){l=this.originalPageX}if(s.axis==="x"){d=this.originalPageY}}return{top:d-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.offset.scroll.top:r?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.offset.scroll.left:r?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging");if(this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval){this.helper.remove()}this.helper=null;this.cancelHelperRemoval=false;if(this.destroyOnClear){this.destroy()}},_trigger:function(t,i,n){n=n||this._uiHash();e.ui.plugin.call(this,t,[i,n,this],true);if(/^(drag|start|stop)/.test(t)){this.positionAbs=this._convertPositionTo("absolute");n.offset=this.positionAbs}return e.Widget.prototype._trigger.call(this,t,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i,n){var o=e.extend({},i,{item:n.element});n.sortables=[];e(n.options.connectToSortable).each(function(){var i=e(this).sortable("instance");if(i&&!i.options.disabled){n.sortables.push(i);i.refreshPositions();i._trigger("activate",t,o)}})},stop:function(t,i,n){var o=e.extend({},i,{item:n.element});n.cancelHelperRemoval=false;e.each(n.sortables,function(){var e=this;if(e.isOver){e.isOver=0;n.cancelHelperRemoval=true;e.cancelHelperRemoval=false;e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")};e._mouseStop(t);e.options.helper=e.options._helper}else{e.cancelHelperRemoval=true;e._trigger("deactivate",t,o)}})},drag:function(t,i,n){e.each(n.sortables,function(){var o=false,a=this;a.positionAbs=n.positionAbs;a.helperProportions=n.helperProportions;a.offset.click=n.offset.click;if(a._intersectsWith(a.containerCache)){o=true;e.each(n.sortables,function(){this.positionAbs=n.positionAbs;this.helperProportions=n.helperProportions;this.offset.click=n.offset.click;if(this!==a&&this._intersectsWith(this.containerCache)&&e.contains(a.element[0],this.element[0])){o=false}return o})}if(o){if(!a.isOver){a.isOver=1;n._parent=i.helper.parent();a.currentItem=i.helper.appendTo(a.element).data("ui-sortable-item",true);a.options._helper=a.options.helper;a.options.helper=function(){return i.helper[0]};t.target=a.currentItem[0];a._mouseCapture(t,true);a._mouseStart(t,true,true);a.offset.click.top=n.offset.click.top;a.offset.click.left=n.offset.click.left;a.offset.parent.left-=n.offset.parent.left-a.offset.parent.left;a.offset.parent.top-=n.offset.parent.top-a.offset.parent.top;n._trigger("toSortable",t);n.dropped=a.element;e.each(n.sortables,function(){this.refreshPositions()});n.currentItem=n.element;a.fromOutside=n}if(a.currentItem){a._mouseDrag(t);i.position=a.position}}else{if(a.isOver){a.isOver=0;a.cancelHelperRemoval=true;a.options._revert=a.options.revert;a.options.revert=false;a._trigger("out",t,a._uiHash(a));a._mouseStop(t,true);a.options.revert=a.options._revert;a.options.helper=a.options._helper;if(a.placeholder){a.placeholder.remove()}i.helper.appendTo(n._parent);n._refreshOffsets(t);i.position=n._generatePosition(t,true);n._trigger("fromSortable",t);n.dropped=false;e.each(n.sortables,function(){this.refreshPositions()})}}})}});e.ui.plugin.add("draggable","cursor",{start:function(t,i,n){var o=e("body"),a=n.options;if(o.css("cursor")){a._cursor=o.css("cursor")}o.css("cursor",a.cursor)},stop:function(t,i,n){var o=n.options;if(o._cursor){e("body").css("cursor",o._cursor)}}});e.ui.plugin.add("draggable","opacity",{start:function(t,i,n){var o=e(i.helper),a=n.options;if(o.css("opacity")){a._opacity=o.css("opacity")}o.css("opacity",a.opacity)},stop:function(t,i,n){var o=n.options;if(o._opacity){e(i.helper).css("opacity",o._opacity)}}});e.ui.plugin.add("draggable","scroll",{start:function(e,t,i){if(!i.scrollParentNotHidden){i.scrollParentNotHidden=i.helper.scrollParent(false)}if(i.scrollParentNotHidden[0]!==i.document[0]&&i.scrollParentNotHidden[0].tagName!=="HTML"){i.overflowOffset=i.scrollParentNotHidden.offset()}},drag:function(t,i,n){var o=n.options,a=false,s=n.scrollParentNotHidden[0],r=n.document[0];if(s!==r&&s.tagName!=="HTML"){if(!o.axis||o.axis!=="x"){if(n.overflowOffset.top+s.offsetHeight-t.pageY<o.scrollSensitivity){s.scrollTop=a=s.scrollTop+o.scrollSpeed}else if(t.pageY-n.overflowOffset.top<o.scrollSensitivity){s.scrollTop=a=s.scrollTop-o.scrollSpeed}}if(!o.axis||o.axis!=="y"){if(n.overflowOffset.left+s.offsetWidth-t.pageX<o.scrollSensitivity){s.scrollLeft=a=s.scrollLeft+o.scrollSpeed}else if(t.pageX-n.overflowOffset.left<o.scrollSensitivity){s.scrollLeft=a=s.scrollLeft-o.scrollSpeed}}}else{if(!o.axis||o.axis!=="x"){if(t.pageY-e(r).scrollTop()<o.scrollSensitivity){a=e(r).scrollTop(e(r).scrollTop()-o.scrollSpeed)}else if(e(window).height()-(t.pageY-e(r).scrollTop())<o.scrollSensitivity){a=e(r).scrollTop(e(r).scrollTop()+o.scrollSpeed)}}if(!o.axis||o.axis!=="y"){if(t.pageX-e(r).scrollLeft()<o.scrollSensitivity){a=e(r).scrollLeft(e(r).scrollLeft()-o.scrollSpeed)}else if(e(window).width()-(t.pageX-e(r).scrollLeft())<o.scrollSensitivity){a=e(r).scrollLeft(e(r).scrollLeft()+o.scrollSpeed)}}}if(a!==false&&e.ui.ddmanager&&!o.dropBehaviour){e.ui.ddmanager.prepareOffsets(n,t)}}});e.ui.plugin.add("draggable","snap",{start:function(t,i,n){var o=n.options;n.snapElements=[];e(o.snap.constructor!==String?o.snap.items||":data(ui-draggable)":o.snap).each(function(){var t=e(this),i=t.offset();if(this!==n.element[0]){n.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:i.top,left:i.left})}})},drag:function(t,i,n){var o,a,s,r,l,d,c,u,p,f,h=n.options,m=h.snapTolerance,g=i.offset.left,b=g+n.helperProportions.width,v=i.offset.top,y=v+n.helperProportions.height;for(p=n.snapElements.length-1;p>=0;p--){l=n.snapElements[p].left-n.margins.left;d=l+n.snapElements[p].width;c=n.snapElements[p].top-n.margins.top;u=c+n.snapElements[p].height;if(b<l-m||g>d+m||y<c-m||v>u+m||!e.contains(n.snapElements[p].item.ownerDocument,n.snapElements[p].item)){if(n.snapElements[p].snapping){n.options.snap.release&&n.options.snap.release.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[p].item}))}n.snapElements[p].snapping=false;continue}if(h.snapMode!=="inner"){o=Math.abs(c-y)<=m;a=Math.abs(u-v)<=m;s=Math.abs(l-b)<=m;r=Math.abs(d-g)<=m;if(o){i.position.top=n._convertPositionTo("relative",{top:c-n.helperProportions.height,left:0}).top}if(a){i.position.top=n._convertPositionTo("relative",{top:u,left:0}).top}if(s){i.position.left=n._convertPositionTo("relative",{top:0,left:l-n.helperProportions.width}).left}if(r){i.position.left=n._convertPositionTo("relative",{top:0,left:d}).left}}f=o||a||s||r;if(h.snapMode!=="outer"){o=Math.abs(c-v)<=m;a=Math.abs(u-y)<=m;s=Math.abs(l-g)<=m;r=Math.abs(d-b)<=m;if(o){i.position.top=n._convertPositionTo("relative",{top:c,left:0}).top}if(a){i.position.top=n._convertPositionTo("relative",{top:u-n.helperProportions.height,left:0}).top}if(s){i.position.left=n._convertPositionTo("relative",{top:0,left:l}).left}if(r){i.position.left=n._convertPositionTo("relative",{top:0,left:d-n.helperProportions.width}).left}}if(!n.snapElements[p].snapping&&(o||a||s||r||f)){n.options.snap.snap&&n.options.snap.snap.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[p].item}))}n.snapElements[p].snapping=o||a||s||r||f}}});e.ui.plugin.add("draggable","stack",{start:function(t,i,n){var o,a=n.options,s=e.makeArray(e(a.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});if(!s.length){return}o=parseInt(e(s[0]).css("zIndex"),10)||0;e(s).each(function(t){e(this).css("zIndex",o+t)});this.css("zIndex",o+s.length)}});e.ui.plugin.add("draggable","zIndex",{start:function(t,i,n){var o=e(i.helper),a=n.options;if(o.css("zIndex")){a._zIndex=o.css("zIndex")}o.css("zIndex",a.zIndex)},stop:function(t,i,n){var o=n.options;if(o._zIndex){e(i.helper).css("zIndex",o._zIndex)}}});return e.ui.draggable})},288:function(e,t,i){"use strict";var n=i(0);var o=i(19);var a=i(13);var s={getStyleSettingsVariants:()=>{return{default:{spacing:"@tk.spacing.s0_5"}}},getStyles(e){return{notices:{display:"flex"},notice:{marginRight:e.spacing,"&:last-child":{marginRight:"0"}}}}};var r={attributes:{builder:{type:"object"},state:{type:"object"},neededNotices:{type:"array"}},nodes:{},properties:{}};const{h:l}=Object(n["d"])();const d={[a["c"].noModel]:{handle:"sk-webicon-ink:no-connection",tooltip:'<tooltip text="Whoops! To display data, this component must be attached to a model." compact="true"/>'}};n["a"].register("skuidbuilder__builderNotices",Object.assign({},s,{schema:r,init(e,t,i){const{neededNotices:n}=t;(n||[]).forEach(e=>{const t=d[e]||{};Object(o["f"])(t.handle,this,{instanceName:i.getNoticeInstanceName(e),definition:t})})},renderVDom(e){const{builder:t,state:i}=e.getState(),n=e.shortcut("getStyledClasses"),o=e._getCPI(),a=t.getNotices&&t.getNotices(i);e.scheduleVirtualRender();return l("div",{key:"notices",class:n("notices")},a&&a.length&&a.map(e=>l("div",{key:e,class:n("notice")},[o.getNoticeInstance(e).renderVDom()])))},cpi:{getNoticeInstanceName(e){return"".concat(e,"-notice-instance")},getNoticeInstance(e){return this.get(this._getCPI().getNoticeInstanceName(e))}}}))},290:function(e,t,i){var n,o,a;(function(s){if(true){!(o=[i(1),i(46)],n=s,a=typeof n==="function"?n.apply(t,o):n,a!==undefined&&(e.exports=a))}else{}})(function(e){var t=/ui-corner-([a-z]){2,6}/g;return e.widget("ui.controlgroup",{version:"1.12.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:true,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar");this.refresh()},_destroy:function(){this._callChildMethod("destroy");this.childWidgets.removeData("ui-controlgroup-data");this.element.removeAttr("role");if(this.options.items.controlgroupLabel){this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()}},_initWidgets:function(){var t=this,i=[];e.each(this.options.items,function(n,o){var a;var s={};if(!o){return}if(n==="controlgroupLabel"){a=t.element.find(o);a.each(function(){var t=e(this);if(t.children(".ui-controlgroup-label-contents").length){return}t.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")});t._addClass(a,null,"ui-widget ui-widget-content ui-state-default");i=i.concat(a.get());return}if(!e.fn[n]){return}if(t["_"+n+"Options"]){s=t["_"+n+"Options"]("middle")}else{s={classes:{}}}t.element.find(o).each(function(){var o=e(this);var a=o[n]("instance");var r=e.widget.extend({},s);if(n==="button"&&o.parent(".ui-spinner").length){return}if(!a){a=o[n]()[n]("instance")}if(a){r.classes=t._resolveClassesValues(r.classes,a)}o[n](r);var l=o[n]("widget");e.data(l[0],"ui-controlgroup-data",a?a:o[n]("instance"));i.push(l[0])})});this.childWidgets=e(e.unique(i));this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(t){this.childWidgets.each(function(){var i=e(this),n=i.data("ui-controlgroup-data");if(n&&n[t]){n[t]()}})},_updateCornerClass:function(e,t){var i="ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all";var n=this._buildSimpleOptions(t,"label").classes.label;this._removeClass(e,null,i);this._addClass(e,null,n)},_buildSimpleOptions:function(e,t){var i=this.options.direction==="vertical";var n={classes:{}};n.classes[t]={middle:"",first:"ui-corner-"+(i?"top":"left"),last:"ui-corner-"+(i?"bottom":"right"),only:"ui-corner-all"}[e];return n},_spinnerOptions:function(e){var t=this._buildSimpleOptions(e,"ui-spinner");t.classes["ui-spinner-up"]="";t.classes["ui-spinner-down"]="";return t},_buttonOptions:function(e){return this._buildSimpleOptions(e,"ui-button")},_checkboxradioOptions:function(e){return this._buildSimpleOptions(e,"ui-checkboxradio-label")},_selectmenuOptions:function(e){var t=this.options.direction==="vertical";return{width:t?"auto":false,classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(t?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(t?"top":"left")},last:{"ui-selectmenu-button-open":t?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(t?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[e]}},_resolveClassesValues:function(i,n){var o={};e.each(i,function(a){var s=n.options.classes[a]||"";s=e.trim(s.replace(t,""));o[a]=(s+" "+i[a]).replace(/\s+/g," ")});return o},_setOption:function(e,t){if(e==="direction"){this._removeClass("ui-controlgroup-"+this.options.direction)}this._super(e,t);if(e==="disabled"){this._callChildMethod(t?"disable":"enable");return}this.refresh()},refresh:function(){var t,i=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction);if(this.options.direction==="horizontal"){this._addClass(null,"ui-helper-clearfix")}this._initWidgets();t=this.childWidgets;if(this.options.onlyVisible){t=t.filter(":visible")}if(t.length){e.each(["first","last"],function(e,n){var o=t[n]().data("ui-controlgroup-data");if(o&&i["_"+o.widgetName+"Options"]){var a=i["_"+o.widgetName+"Options"](t.length===1?"only":n);a.classes=i._resolveClassesValues(a.classes,o);o.element[o.widgetName](a)}else{i._updateCornerClass(t[n](),n)}});this._callChildMethod("refresh")}}})})},291:function(e,t,i){var n,o,a;(function(s){if(true){!(o=[i(1),i(156),i(292),i(293),i(46)],n=s,a=typeof n==="function"?n.apply(t,o):n,a!==undefined&&(e.exports=a))}else{}})(function(e){e.widget("ui.checkboxradio",[e.ui.formResetMixin,{version:"1.12.1",options:{disabled:null,label:null,icon:true,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var t,i;var n=this;var o=this._super()||{};this._readType();i=this.element.labels();this.label=e(i[i.length-1]);if(!this.label.length){e.error("No label found for checkboxradio widget")}this.originalLabel="";this.label.contents().not(this.element[0]).each(function(){n.originalLabel+=this.nodeType===3?e(this).text():this.outerHTML});if(this.originalLabel){o.label=this.originalLabel}t=this.element[0].disabled;if(t!=null){o.disabled=t}return o},_create:function(){var e=this.element[0].checked;this._bindFormResetHandler();if(this.options.disabled==null){this.options.disabled=this.element[0].disabled}this._setOption("disabled",this.options.disabled);this._addClass("ui-checkboxradio","ui-helper-hidden-accessible");this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget");if(this.type==="radio"){this._addClass(this.label,"ui-checkboxradio-radio-label")}if(this.options.label&&this.options.label!==this.originalLabel){this._updateLabel()}else if(this.originalLabel){this.options.label=this.originalLabel}this._enhance();if(e){this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active");if(this.icon){this._addClass(this.icon,null,"ui-state-hover")}}this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var t=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type;if(t!=="input"||!/radio|checkbox/.test(this.type)){e.error("Can't create checkboxradio on element.nodeName="+t+" and element.type="+this.type)}},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var t;var i=this.element[0].name;var n="input[name='"+e.ui.escapeSelector(i)+"']";if(!i){return e([])}if(this.form.length){t=e(this.form[0].elements).filter(n)}else{t=e(n).filter(function(){return e(this).form().length===0})}return t.not(this.element)},_toggleClasses:function(){var t=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",t);if(this.options.icon&&this.type==="checkbox"){this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",t)._toggleClass(this.icon,null,"ui-icon-blank",!t)}if(this.type==="radio"){this._getRadioGroup().each(function(){var t=e(this).checkboxradio("instance");if(t){t._removeClass(t.label,"ui-checkboxradio-checked","ui-state-active")}})}},_destroy:function(){this._unbindFormResetHandler();if(this.icon){this.icon.remove();this.iconSpace.remove()}},_setOption:function(e,t){if(e==="label"&&!t){return}this._super(e,t);if(e==="disabled"){this._toggleClass(this.label,null,"ui-state-disabled",t);this.element[0].disabled=t;return}this.refresh()},_updateIcon:function(t){var i="ui-icon ui-icon-background ";if(this.options.icon){if(!this.icon){this.icon=e("<span>");this.iconSpace=e("<span> </span>");this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")}if(this.type==="checkbox"){i+=t?"ui-icon-check ui-state-checked":"ui-icon-blank";this._removeClass(this.icon,null,t?"ui-icon-blank":"ui-icon-check")}else{i+="ui-icon-blank"}this._addClass(this.icon,"ui-checkboxradio-icon",i);if(!t){this._removeClass(this.icon,null,"ui-icon-check ui-state-checked")}this.icon.prependTo(this.label).after(this.iconSpace)}else if(this.icon!==undefined){this.icon.remove();this.iconSpace.remove();delete this.icon}},_updateLabel:function(){var e=this.label.contents().not(this.element[0]);if(this.icon){e=e.not(this.icon[0])}if(this.iconSpace){e=e.not(this.iconSpace[0])}e.remove();this.label.append(this.options.label)},refresh:function(){var e=this.element[0].checked,t=this.element[0].disabled;this._updateIcon(e);this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",e);if(this.options.label!==null){this._updateLabel()}if(t!==this.options.disabled){this._setOptions({disabled:t})}}}]);return e.ui.checkboxradio})},292:function(e,t,i){var n,o,a;(function(s){if(true){!(o=[i(1),i(616),i(12)],n=s,a=typeof n==="function"?n.apply(t,o):n,a!==undefined&&(e.exports=a))}else{}})(function(e){return e.ui.formResetMixin={_formResetHandler:function(){var t=e(this);setTimeout(function(){var i=t.data("ui-form-reset-instances");e.each(i,function(){this.refresh()})})},_bindFormResetHandler:function(){this.form=this.element.form();if(!this.form.length){return}var e=this.form.data("ui-form-reset-instances")||[];if(!e.length){this.form.on("reset.ui-form-reset",this._formResetHandler)}e.push(this);this.form.data("ui-form-reset-instances",e)},_unbindFormResetHandler:function(){if(!this.form.length){return}var t=this.form.data("ui-form-reset-instances");t.splice(e.inArray(this,t),1);if(t.length){this.form.data("ui-form-reset-instances",t)}else{this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}}}})},293:function(e,t,i){var n,o,a;(function(s){if(true){!(o=[i(1),i(12),i(156)],n=s,a=typeof n==="function"?n.apply(t,o):n,a!==undefined&&(e.exports=a))}else{}})(function(e){return e.fn.labels=function(){var t,i,n,o,a;if(this[0].labels&&this[0].labels.length){return this.pushStack(this[0].labels)}o=this.eq(0).parents("label");n=this.attr("id");if(n){t=this.eq(0).parents().last();a=t.add(t.length?t.siblings():this.siblings());i="label[for='"+e.ui.escapeSelector(n)+"']";o=o.add(a.find(i).addBack(i))}return this.pushStack(o)}})},294:function(e,t,i){var n,o,a;(function(s){if(true){!(o=[i(1),i(12)],n=s,a=typeof n==="function"?n.apply(t,o):n,a!==undefined&&(e.exports=a))}else{}})(function(e){return e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())})},295:function(e,t,i){var n,o,a;(function(s){if(true){!(o=[i(1),i(12)],n=s,a=typeof n==="function"?n.apply(t,o):n,a!==undefined&&(e.exports=a))}else{}})(function(e){return e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,n){return!!e.data(t,n[3])}})})},296:function(e,t,i){var n,o,a;(function(s){if(true){!(o=[i(1),i(12)],n=s,a=typeof n==="function"?n.apply(t,o):n,a!==undefined&&(e.exports=a))}else{}})(function(e){return e.ui.plugin={add:function(t,i,n){var o,a=e.ui[t].prototype;for(o in n){a.plugins[o]=a.plugins[o]||[];a.plugins[o].push([i,n[o]])}},call:function(e,t,i,n){var o,a=e.plugins[t];if(!a){return}if(!n&&(!e.element[0].parentNode||e.element[0].parentNode.nodeType===11)){return}for(o=0;o<a.length;o++){if(e.options[a[o][0]]){a[o][1].apply(e.element,i)}}}}})},297:function(e,t,i){var n,o,a;(function(s){if(true){!(o=[i(1),i(12)],n=s,a=typeof n==="function"?n.apply(t,o):n,a!==undefined&&(e.exports=a))}else{}})(function(e){return e.ui.safeBlur=function(t){if(t&&t.nodeName.toLowerCase()!=="body"){e(t).trigger("blur")}}})},298:function(e,t,i){var n,o,a;(function(s){if(true){!(o=[i(1),i(12)],n=s,a=typeof n==="function"?n.apply(t,o):n,a!==undefined&&(e.exports=a))}else{}})(function(e){return e.fn.scrollParent=function(t){var i=this.css("position"),n=i==="absolute",o=t?/(auto|scroll|hidden)/:/(auto|scroll)/,a=this.parents().filter(function(){var t=e(this);if(n&&t.css("position")==="static"){return false}return o.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return i==="fixed"||!a.length?e(this[0].ownerDocument||document):a}})},299:function(e,t,i){var n,o,a;(function(s){if(true){!(o=[i(1),i(129),i(618),i(296),i(12),i(46)],n=s,a=typeof n==="function"?n.apply(t,o):n,a!==undefined&&(e.exports=a))}else{}})(function(e){e.widget("ui.resizable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseFloat(e)||0},_isNumber:function(e){return!isNaN(parseFloat(e))},_hasScroll:function(t,i){if(e(t).css("overflow")==="hidden"){return false}var n=i&&i==="left"?"scrollLeft":"scrollTop",o=false;if(t[n]>0){return true}t[n]=1;o=t[n]>0;t[n]=0;return o},_create:function(){var t,i=this.options,n=this;this._addClass("ui-resizable");e.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)){this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance"));this.elementIsWrapper=true;t={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")};this.element.css(t);this.originalElement.css("margin",0);this.originalResizeStyle=this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this.originalElement.css(t);this._proportionallyResize()}this._setupHandles();if(i.autoHide){e(this.element).on("mouseenter",function(){if(i.disabled){return}n._removeClass("ui-resizable-autohide");n._handles.show()}).on("mouseleave",function(){if(i.disabled){return}if(!n.resizing){n._addClass("ui-resizable-autohide");n._handles.hide()}})}this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,i=function(t){e(t).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){i(this.element);t=this.element;this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t);t.remove()}this.originalElement.css("resize",this.originalResizeStyle);i(this.originalElement);return this},_setOption:function(e,t){this._super(e,t);switch(e){case"handles":this._removeHandles();this._setupHandles();break;default:break}},_setupHandles:function(){var t=this.options,i,n,o,a,s,r=this;this.handles=t.handles||(!e(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"});this._handles=e();if(this.handles.constructor===String){if(this.handles==="all"){this.handles="n,e,s,w,se,sw,ne,nw"}o=this.handles.split(",");this.handles={};for(n=0;n<o.length;n++){i=e.trim(o[n]);a="ui-resizable-"+i;s=e("<div>");this._addClass(s,"ui-resizable-handle "+a);s.css({zIndex:t.zIndex});this.handles[i]=".ui-resizable-"+i;this.element.append(s)}}this._renderAxis=function(t){var i,n,o,a;t=t||this.element;for(i in this.handles){if(this.handles[i].constructor===String){this.handles[i]=this.element.children(this.handles[i]).first().show()}else if(this.handles[i].jquery||this.handles[i].nodeType){this.handles[i]=e(this.handles[i]);this._on(this.handles[i],{mousedown:r._mouseDown})}if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)){n=e(this.handles[i],this.element);a=/sw|ne|nw|se|n|s/.test(i)?n.outerHeight():n.outerWidth();o=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join("");t.css(o,a);this._proportionallyResize()}this._handles=this._handles.add(this.handles[i])}};this._renderAxis(this.element);this._handles=this._handles.add(this.element.find(".ui-resizable-handle"));this._handles.disableSelection();this._handles.on("mouseover",function(){if(!r.resizing){if(this.className){s=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)}r.axis=s&&s[1]?s[1]:"se"}});if(t.autoHide){this._handles.hide();this._addClass("ui-resizable-autohide")}},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(t){var i,n,o=false;for(i in this.handles){n=e(this.handles[i])[0];if(n===t.target||e.contains(n,t.target)){o=true}}return!this.options.disabled&&o},_mouseStart:function(t){var i,n,o,a=this.options,s=this.element;this.resizing=true;this._renderProxy();i=this._num(this.helper.css("left"));n=this._num(this.helper.css("top"));if(a.containment){i+=e(a.containment).scrollLeft()||0;n+=e(a.containment).scrollTop()||0}this.offset=this.helper.offset();this.position={left:i,top:n};this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:s.width(),height:s.height()};this.originalSize=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()};this.sizeDiff={width:s.outerWidth()-s.width(),height:s.outerHeight()-s.height()};this.originalPosition={left:i,top:n};this.originalMousePosition={left:t.pageX,top:t.pageY};this.aspectRatio=typeof a.aspectRatio==="number"?a.aspectRatio:this.originalSize.width/this.originalSize.height||1;o=e(".ui-resizable-"+this.axis).css("cursor");e("body").css("cursor",o==="auto"?this.axis+"-resize":o);this._addClass("ui-resizable-resizing");this._propagate("start",t);return true},_mouseDrag:function(t){var i,n,o=this.originalMousePosition,a=this.axis,s=t.pageX-o.left||0,r=t.pageY-o.top||0,l=this._change[a];this._updatePrevProperties();if(!l){return false}i=l.apply(this,[t,s,r]);this._updateVirtualBoundaries(t.shiftKey);if(this._aspectRatio||t.shiftKey){i=this._updateRatio(i,t)}i=this._respectSize(i,t);this._updateCache(i);this._propagate("resize",t);n=this._applyChanges();if(!this._helper&&this._proportionallyResizeElements.length){this._proportionallyResize()}if(!e.isEmptyObject(n)){this._updatePrevProperties();this._trigger("resize",t,this.ui());this._applyChanges()}return false},_mouseStop:function(t){this.resizing=false;var i,n,o,a,s,r,l,d=this.options,c=this;if(this._helper){i=this._proportionallyResizeElements;n=i.length&&/textarea/i.test(i[0].nodeName);o=n&&this._hasScroll(i[0],"left")?0:c.sizeDiff.height;a=n?0:c.sizeDiff.width;s={width:c.helper.width()-a,height:c.helper.height()-o};r=parseFloat(c.element.css("left"))+(c.position.left-c.originalPosition.left)||null;l=parseFloat(c.element.css("top"))+(c.position.top-c.originalPosition.top)||null;if(!d.animate){this.element.css(e.extend(s,{top:l,left:r}))}c.helper.height(c.size.height);c.helper.width(c.size.width);if(this._helper&&!d.animate){this._proportionallyResize()}}e("body").css("cursor","auto");this._removeClass("ui-resizable-resizing");this._propagate("stop",t);if(this._helper){this.helper.remove()}return false},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left};this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};if(this.position.top!==this.prevPosition.top){e.top=this.position.top+"px"}if(this.position.left!==this.prevPosition.left){e.left=this.position.left+"px"}if(this.size.width!==this.prevSize.width){e.width=this.size.width+"px"}if(this.size.height!==this.prevSize.height){e.height=this.size.height+"px"}this.helper.css(e);return e},_updateVirtualBoundaries:function(e){var t,i,n,o,a,s=this.options;a={minWidth:this._isNumber(s.minWidth)?s.minWidth:0,maxWidth:this._isNumber(s.maxWidth)?s.maxWidth:Infinity,minHeight:this._isNumber(s.minHeight)?s.minHeight:0,maxHeight:this._isNumber(s.maxHeight)?s.maxHeight:Infinity};if(this._aspectRatio||e){t=a.minHeight*this.aspectRatio;n=a.minWidth/this.aspectRatio;i=a.maxHeight*this.aspectRatio;o=a.maxWidth/this.aspectRatio;if(t>a.minWidth){a.minWidth=t}if(n>a.minHeight){a.minHeight=n}if(i<a.maxWidth){a.maxWidth=i}if(o<a.maxHeight){a.maxHeight=o}}this._vBoundaries=a},_updateCache:function(e){this.offset=this.helper.offset();if(this._isNumber(e.left)){this.position.left=e.left}if(this._isNumber(e.top)){this.position.top=e.top}if(this._isNumber(e.height)){this.size.height=e.height}if(this._isNumber(e.width)){this.size.width=e.width}},_updateRatio:function(e){var t=this.position,i=this.size,n=this.axis;if(this._isNumber(e.height)){e.width=e.height*this.aspectRatio}else if(this._isNumber(e.width)){e.height=e.width/this.aspectRatio}if(n==="sw"){e.left=t.left+(i.width-e.width);e.top=null}if(n==="nw"){e.top=t.top+(i.height-e.height);e.left=t.left+(i.width-e.width)}return e},_respectSize:function(e){var t=this._vBoundaries,i=this.axis,n=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,o=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,a=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,s=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,r=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,d=/sw|nw|w/.test(i),c=/nw|ne|n/.test(i);if(a){e.width=t.minWidth}if(s){e.height=t.minHeight}if(n){e.width=t.maxWidth}if(o){e.height=t.maxHeight}if(a&&d){e.left=r-t.minWidth}if(n&&d){e.left=r-t.maxWidth}if(s&&c){e.top=l-t.minHeight}if(o&&c){e.top=l-t.maxHeight}if(!e.width&&!e.height&&!e.left&&e.top){e.top=null}else if(!e.width&&!e.height&&!e.top&&e.left){e.left=null}return e},_getPaddingPlusBorderDimensions:function(e){var t=0,i=[],n=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],o=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];for(;t<4;t++){i[t]=parseFloat(n[t])||0;i[t]+=parseFloat(o[t])||0}return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(!this._proportionallyResizeElements.length){return}var e,t=0,i=this.helper||this.element;for(;t<this._proportionallyResizeElements.length;t++){e=this._proportionallyResizeElements[t];if(!this.outerDimensions){this.outerDimensions=this._getPaddingPlusBorderDimensions(e)}e.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})}},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset();if(this._helper){this.helper=this.helper||e("<div style='overflow:hidden;'></div>");this._addClass(this.helper,this._helper);this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex});this.helper.appendTo("body").disableSelection()}else{this.helper=this.element}},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize,n=this.originalPosition;return{left:n.left+t,width:i.width-t}},n:function(e,t,i){var n=this.originalSize,o=this.originalPosition;return{top:o.top+i,height:n.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},sw:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,n]))},ne:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},nw:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,n]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]);t!=="resize"&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});e.ui.plugin.add("resizable","animate",{stop:function(t){var i=e(this).resizable("instance"),n=i.options,o=i._proportionallyResizeElements,a=o.length&&/textarea/i.test(o[0].nodeName),s=a&&i._hasScroll(o[0],"left")?0:i.sizeDiff.height,r=a?0:i.sizeDiff.width,l={width:i.size.width-r,height:i.size.height-s},d=parseFloat(i.element.css("left"))+(i.position.left-i.originalPosition.left)||null,c=parseFloat(i.element.css("top"))+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(l,c&&d?{top:c,left:d}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var n={width:parseFloat(i.element.css("width")),height:parseFloat(i.element.css("height")),top:parseFloat(i.element.css("top")),left:parseFloat(i.element.css("left"))};if(o&&o.length){e(o[0]).css({width:n.width,height:n.height})}i._updateCache(n);i._propagate("resize",t)}})}});e.ui.plugin.add("resizable","containment",{start:function(){var t,i,n,o,a,s,r,l=e(this).resizable("instance"),d=l.options,c=l.element,u=d.containment,p=u instanceof e?u.get(0):/parent/.test(u)?c.parent().get(0):u;if(!p){return}l.containerElement=e(p);if(/document/.test(u)||u===document){l.containerOffset={left:0,top:0};l.containerPosition={left:0,top:0};l.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}}else{t=e(p);i=[];e(["Top","Right","Left","Bottom"]).each(function(e,n){i[e]=l._num(t.css("padding"+n))});l.containerOffset=t.offset();l.containerPosition=t.position();l.containerSize={height:t.innerHeight()-i[3],width:t.innerWidth()-i[1]};n=l.containerOffset;o=l.containerSize.height;a=l.containerSize.width;s=l._hasScroll(p,"left")?p.scrollWidth:a;r=l._hasScroll(p)?p.scrollHeight:o;l.parentData={element:p,left:n.left,top:n.top,width:s,height:r}}},resize:function(t){var i,n,o,a,s=e(this).resizable("instance"),r=s.options,l=s.containerOffset,d=s.position,c=s._aspectRatio||t.shiftKey,u={top:0,left:0},p=s.containerElement,f=true;if(p[0]!==document&&/static/.test(p.css("position"))){u=l}if(d.left<(s._helper?l.left:0)){s.size.width=s.size.width+(s._helper?s.position.left-l.left:s.position.left-u.left);if(c){s.size.height=s.size.width/s.aspectRatio;f=false}s.position.left=r.helper?l.left:0}if(d.top<(s._helper?l.top:0)){s.size.height=s.size.height+(s._helper?s.position.top-l.top:s.position.top);if(c){s.size.width=s.size.height*s.aspectRatio;f=false}s.position.top=s._helper?l.top:0}o=s.containerElement.get(0)===s.element.parent().get(0);a=/relative|absolute/.test(s.containerElement.css("position"));if(o&&a){s.offset.left=s.parentData.left+s.position.left;s.offset.top=s.parentData.top+s.position.top}else{s.offset.left=s.element.offset().left;s.offset.top=s.element.offset().top}i=Math.abs(s.sizeDiff.width+(s._helper?s.offset.left-u.left:s.offset.left-l.left));n=Math.abs(s.sizeDiff.height+(s._helper?s.offset.top-u.top:s.offset.top-l.top));if(i+s.size.width>=s.parentData.width){s.size.width=s.parentData.width-i;if(c){s.size.height=s.size.width/s.aspectRatio;f=false}}if(n+s.size.height>=s.parentData.height){s.size.height=s.parentData.height-n;if(c){s.size.width=s.size.height*s.aspectRatio;f=false}}if(!f){s.position.left=s.prevPosition.left;s.position.top=s.prevPosition.top;s.size.width=s.prevSize.width;s.size.height=s.prevSize.height}},stop:function(){var t=e(this).resizable("instance"),i=t.options,n=t.containerOffset,o=t.containerPosition,a=t.containerElement,s=e(t.helper),r=s.offset(),l=s.outerWidth()-t.sizeDiff.width,d=s.outerHeight()-t.sizeDiff.height;if(t._helper&&!i.animate&&/relative/.test(a.css("position"))){e(this).css({left:r.left-o.left-n.left,width:l,height:d})}if(t._helper&&!i.animate&&/static/.test(a.css("position"))){e(this).css({left:r.left-o.left-n.left,width:l,height:d})}}});e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance"),i=t.options;e(i.alsoResize).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseFloat(t.width()),height:parseFloat(t.height()),left:parseFloat(t.css("left")),top:parseFloat(t.css("top"))})})},resize:function(t,i){var n=e(this).resizable("instance"),o=n.options,a=n.originalSize,s=n.originalPosition,r={height:n.size.height-a.height||0,width:n.size.width-a.width||0,top:n.position.top-s.top||0,left:n.position.left-s.left||0};e(o.alsoResize).each(function(){var t=e(this),n=e(this).data("ui-resizable-alsoresize"),o={},a=t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(a,function(e,t){var i=(n[t]||0)+(r[t]||0);if(i&&i>=0){o[t]=i||null}});t.css(o)})},stop:function(){e(this).removeData("ui-resizable-alsoresize")}});e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),i=t.size;t.ghost=t.originalElement.clone();t.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0});t._addClass(t.ghost,"ui-resizable-ghost");if(e.uiBackCompat!==false&&typeof t.options.ghost==="string"){t.ghost.addClass(this.options.ghost)}t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");if(t.ghost){t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})}},stop:function(){var t=e(this).resizable("instance");if(t.ghost&&t.helper){t.helper.get(0).removeChild(t.ghost.get(0))}}});e.ui.plugin.add("resizable","grid",{resize:function(){var t,i=e(this).resizable("instance"),n=i.options,o=i.size,a=i.originalSize,s=i.originalPosition,r=i.axis,l=typeof n.grid==="number"?[n.grid,n.grid]:n.grid,d=l[0]||1,c=l[1]||1,u=Math.round((o.width-a.width)/d)*d,p=Math.round((o.height-a.height)/c)*c,f=a.width+u,h=a.height+p,m=n.maxWidth&&n.maxWidth<f,g=n.maxHeight&&n.maxHeight<h,b=n.minWidth&&n.minWidth>f,v=n.minHeight&&n.minHeight>h;n.grid=l;if(b){f+=d}if(v){h+=c}if(m){f-=d}if(g){h-=c}if(/^(se|s|e)$/.test(r)){i.size.width=f;i.size.height=h}else if(/^(ne)$/.test(r)){i.size.width=f;i.size.height=h;i.position.top=s.top-p}else if(/^(sw)$/.test(r)){i.size.width=f;i.size.height=h;i.position.left=s.left-u}else{if(h-c<=0||f-d<=0){t=i._getPaddingPlusBorderDimensions(this)}if(h-c>0){i.size.height=h;i.position.top=s.top-p}else{h=c-t.height;i.size.height=h;i.position.top=s.top+a.height-h}if(f-d>0){i.size.width=f;i.position.left=s.left-u}else{f=d-t.width;i.size.width=f;i.position.left=s.left+a.width-f}}}});return e.ui.resizable})},30:function(t,i,n){"use strict";n.d(i,"b",function(){return g});n.d(i,"a",function(){return C});var o=n(5);var a=n(47);const s=e.builder,r=s.core,l=e.utils;const d=64;const c=[];const u=/Edge\/\d+/.test(window.navigator.userAgent);const p=(t,i)=>{return Array.from(u?e.$(t).find(i):t.querySelectorAll(":scope ".concat(i)))};const f="interactions, interaction, actions, action, optionGroups, optionGroup, options, option";const h="background, models, styles, resources, conditions, tooltip, hotkeys, renderConditions, enableConditions, styleVariantConditions";function m(e){if(!e.matches("action"))return false;const t=e.parentElement;if(t.matches("massActions, rowActions"))return true;const i=t&&t.parentElement;return!!i&&i.matches("skuid__table")}const g=(e,t)=>{let i=t&&t[e];if(!i)return"";return i.label||i.id||i.name};function b(t,i={}){Object.assign({surface:true},i);const n=Object(a["a"])(t),d=t.getAttribute("uniqueId")||t.getAttribute("uniqueid"),u=n?f+(n.indexSelectors.unsurfaced?", ".concat(n.indexSelectors.unsurfaced):""):i.unsurfacedSelector||f,g=n?h+(n.indexSelectors.ignored?", ".concat(n.indexSelectors.ignored):""):h,v=[],y=Array.from(t.children).filter(e=>!e.matches(g)).filter(e=>{if(e.matches(u)&&!m(e)){v.push(e);return false}return true});let C={name:d,data:t};const _=t.getAttribute("model");if(_){const e=s.getModelFromModelName(_)[0];const n=[...e?Array.from(e.querySelectorAll("field")).map(e=>e.getAttribute("id")):[],...p(t,"filters > skuid__filter").map(e=>e.getAttribute("conditionField"))];i.mostRecentModelFieldsMetadata=Object(o["h"])(_,n)}if(n){const i=e.$(t),o=n.neededNotices&&e.component.factory({type:"skuidbuilder__builderNotices",definition:{builder:n,state:i,neededNotices:n.neededNotices}});o&&c.push(o);C=Object.assign(C,{title:n.getName(i)||l.camelToTitle(t.tagName),icon:n.getIcon(i)||"",notices:o})}else{C=Object.assign(C,{title:l.camelToTitle(t.tagName.replace("skuid__","")),icon:"sk-webicon-ink:help"})}let w;if(n&&n.getSubtitle){w=n.getSubtitle(t,{modelFieldsMetadata:i.mostRecentModelFieldsMetadata})}if(!w)w=t.getAttribute("label")||t.getAttribute("title")||t.getAttribute("name");if(w)C.title="".concat(C.title," (").concat(w,")");if(t.tagName==="skuid__pageRegion"){const e=r.getPageXML().children("pageregioncontents").children('[regionid="'.concat(t.getAttribute("uniqueid"),'"]'))[0];if(e){C.sections=[b(e,i)]}}else if(y.length){const e=y[0];if(y.length==1&&!Object(a["a"])(e)&&!e.matches(g)){C.sections=Array.from(e.children).map(e=>{return b(e,i)})}else{C.sections=y.map(e=>b(e,i))}}if(!C.sections)C.sections=[];C._unsurfacedChildren=v||[];if(v.length){const e=t=>{t.forEach(t=>{const n=b(t,Object.assign(i,{unsurfacedSelector:u}));if(n.sections.length){C.sections=C.sections.concat(n.sections||[])}else if(n._unsurfacedChildren){e(n._unsurfacedChildren)}})};e(v)}C.sections=(C.sections||[]).filter(e=>e);return C}function v(){const e=r.getMasterPageXML();if(e)return e.children("components")[0];return r.getPageXML().children("components")[0]}let y;function C(){const t=()=>{c.forEach(e=>e.unregister());return b(v(),{}).sections||[]},i=l.debounce(()=>{n.set("sections",t());const e=s.componentRegistry.getSelectedComponent();if(e){n.getCPI().selectSectionByData(e.get("xmlState")[0])}},10,this);const n=e.component.createFromDefinition({componentType:"skuidbuilder__composerTree",fillButtonSpace:true,styleSettingsVariant:"pageBuilder",selectableFolders:true,indentMultiplier:2,minIndent:0,levelsShownByDefault:Infinity,sections:t(),emptyText:"No index to display",styles:{spacing:{marginTop:2}}});y&&y.disconnect();y=new MutationObserver(function(){setTimeout(()=>i())});const o=r.getPageXML().children("pageregioncontents")[0];let a=o&&o.hasChildNodes()?o:r.getPageXML().children("components")[0];y.observe(a,{attributes:true,childList:true,subtree:true});e.events.subscribe("skuid.pageComposer.component.selected",e=>{if(e.builder&&!e.builder.isInToolbar){n.getCPI().selectSectionByData(e.get("xmlState")[0],true)}});n.subscribe("viewchange",(t,i,o)=>{const a=s.selectedComponent,r=a&&a.get("xmlState"),l=a&&(r.attr("uniqueid")||r.attr("uniqueId"));if(a&&r[0]===i||t===l){a.cpi.select({focus:false});return}if(!["selectNextPrevious","click","keyboard"].includes(o.initiator))return;const c=e.$(i);const u="step, skuid__tabPanel, drawer, skuid__modal, skuid__slidingPanel";const p=Array.from(c.parents(u));const f=[];const h=e=>s.componentRegistry.getByState(e);if(c.is(u)){p.unshift(i)}const m=e.builder.componentRegistry.getComponentsList().filter(e=>{if(e.cpi.getBuilder()){return["skuid__modal","drawer","skuid__slidingPanel"].includes(e.cpi.getBuilder().id)}return false});if(m.length){m.forEach(e=>{if(!e.get("xmlState")[0].contains(i)){e.builderCPI.close()}})}p.reverse().forEach(t=>{const i=e.$(t);if(t.matches("skuid__modal")){e.builder.desktop.showModalBuilder({parentState:i.parent()});return}else if(t.matches("skuid__slidingPanel")){e.builder.desktop.showSlidingPanelBuilder({parentState:i.parent()});return}const n=h(i.parents("skuid__tabSet, skuid__tabContainer").first()[0]);if(n){n.builderCPI.showTabByIndex(i.index());if(!f.includes(n.projector))f.push(n.projector);return}const o=h(i.parents("skuid__wizard").first()[0]);if(o){o.builderCPI.showStepByIndex(i.index());if(!f.includes(o.projector))f.push(o.projector);return}if(t.tagName.toLowerCase()==="drawer"){const e=h(i.parents("skuid__table").first()[0]);e&&e.builderCPI.showDrawerBuilder({select:false});return}});f.forEach(e=>e.renderNow());let g=s.componentRegistry.getById(t);if(!g){g=s.componentRegistry.getByState(i)}if(i.tagName!=="skuid__modal"){s.pagebuilderui.cproperties.unsetFocusedProperty();g&&g.select({focus:false})}if(!g)return;const b=g.getElement();if(b&&document.contains(b)){const e=n.getParentPage();const t=e.getElement();const i=document.querySelector("#toolbar-and-buttons");const o=b.getBoundingClientRect().y-t.getBoundingClientRect().y;const a=i.getBoundingClientRect();window.scrollTo({top:o-a.height-d,behavior:"smooth"})}});return n}},300:function(e,t,i){var n,o,a;(function(s){if(true){!(o=[i(1),i(12)],n=s,a=typeof n==="function"?n.apply(t,o):n,a!==undefined&&(e.exports=a))}else{}})(function(e){e.ui.focusable=function(i,n){var o,a,s,r,l,d=i.nodeName.toLowerCase();if("area"===d){o=i.parentNode;a=o.name;if(!i.href||!a||o.nodeName.toLowerCase()!=="map"){return false}s=e("img[usemap='#"+a+"']");return s.length>0&&s.is(":visible")}if(/^(input|select|textarea|button|object)$/.test(d)){r=!i.disabled;if(r){l=e(i).closest("fieldset")[0];if(l){r=!l.disabled}}}else if("a"===d){r=i.href||n}else{r=n}return r&&e(i).is(":visible")&&t(e(i))};function t(e){var t=e.css("visibility");while(t==="inherit"){e=e.parent();t=e.css("visibility")}return t!=="hidden"}e.extend(e.expr[":"],{focusable:function(t){return e.ui.focusable(t,e.attr(t,"tabindex")!=null)}});return e.ui.focusable})},301:function(e,t,i){var n,o,a;(function(s){if(true){!(o=[i(1),i(12),i(52),i(302)],n=s,a=typeof n==="function"?n.apply(t,o):n,a!==undefined&&(e.exports=a))}else{}})(function(e){return e.effects.define("scale",function(t,i){var n=e(this),o=t.mode,a=parseInt(t.percent,10)||(parseInt(t.percent,10)===0?0:o!=="effect"?0:100),s=e.extend(true,{from:e.effects.scaledDimensions(n),to:e.effects.scaledDimensions(n,a,t.direction||"both"),origin:t.origin||["middle","center"]},t);if(t.fade){s.from.opacity=1;s.to.opacity=0}e.effects.effect.size.call(this,s,i)})})},302:function(e,t,i){var n,o,a;(function(s){if(true){!(o=[i(1),i(12),i(52)],n=s,a=typeof n==="function"?n.apply(t,o):n,a!==undefined&&(e.exports=a))}else{}})(function(e){return e.effects.define("size",function(t,i){var n,o,a,s=e(this),r=["fontSize"],l=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],d=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],c=t.mode,u=c!=="effect",p=t.scale||"both",f=t.origin||["middle","center"],h=s.css("position"),m=s.position(),g=e.effects.scaledDimensions(s),b=t.from||g,v=t.to||e.effects.scaledDimensions(s,0);e.effects.createPlaceholder(s);if(c==="show"){a=b;b=v;v=a}o={from:{y:b.height/g.height,x:b.width/g.width},to:{y:v.height/g.height,x:v.width/g.width}};if(p==="box"||p==="both"){if(o.from.y!==o.to.y){b=e.effects.setTransition(s,l,o.from.y,b);v=e.effects.setTransition(s,l,o.to.y,v)}if(o.from.x!==o.to.x){b=e.effects.setTransition(s,d,o.from.x,b);v=e.effects.setTransition(s,d,o.to.x,v)}}if(p==="content"||p==="both"){if(o.from.y!==o.to.y){b=e.effects.setTransition(s,r,o.from.y,b);v=e.effects.setTransition(s,r,o.to.y,v)}}if(f){n=e.effects.getBaseline(f,g);b.top=(g.outerHeight-b.outerHeight)*n.y+m.top;b.left=(g.outerWidth-b.outerWidth)*n.x+m.left;v.top=(g.outerHeight-v.outerHeight)*n.y+m.top;v.left=(g.outerWidth-v.outerWidth)*n.x+m.left}s.css(b);if(p==="content"||p==="both"){l=l.concat(["marginTop","marginBottom"]).concat(r);d=d.concat(["marginLeft","marginRight"]);s.find("*[width]").each(function(){var i=e(this),n=e.effects.scaledDimensions(i),a={height:n.height*o.from.y,width:n.width*o.from.x,outerHeight:n.outerHeight*o.from.y,outerWidth:n.outerWidth*o.from.x},s={height:n.height*o.to.y,width:n.width*o.to.x,outerHeight:n.height*o.to.y,outerWidth:n.width*o.to.x};if(o.from.y!==o.to.y){a=e.effects.setTransition(i,l,o.from.y,a);s=e.effects.setTransition(i,l,o.to.y,s)}if(o.from.x!==o.to.x){a=e.effects.setTransition(i,d,o.from.x,a);s=e.effects.setTransition(i,d,o.to.x,s)}if(u){e.effects.saveStyle(i)}i.css(a);i.animate(s,t.duration,t.easing,function(){if(u){e.effects.restoreStyle(i)}})})}s.animate(v,{queue:false,duration:t.duration,easing:t.easing,complete:function(){var t=s.offset();if(v.opacity===0){s.css("opacity",b.opacity)}if(!u){s.css("position",h==="static"?"relative":h).offset(t);e.effects.saveStyle(s)}i()}})})})},32:function(t,i,n){"use strict";n.d(i,"a",function(){return u});var o=n(21);var a=n(2);var s=n(5);var r=n(11);const l=e.$,d=e.utils,c=d.makeXMLDoc;class u{constructor(e){this.options=e;this.populatePropsFromOptions(e);if(this.breadcrumb&&this.breadcrumb.length){this.bci=u.processBreadCrumbInfo(this.breadcrumb,{showObjectPickerIfPolymorphic:this.showObjectPickerIfPolymorphic,dataSourceName:this.dataSourceName,model:this.model,state:this.state})}else{d.log("A breadcrumb option must be provided to the FieldSelector constructor",a["n"].WARNING)}}populatePropsFromOptions(e){this.allowModelFieldAdds=e.allowModelFieldAdds;this.allowRepeatedSelectionsOfSameField=e.allowRepeatedSelectionsOfSameField;this.breadcrumb=e.breadcrumb;this.childRelationshipsOnly=e.childRelationshipsOnly;this.dataSourceName=e.dataSourceName;this.element=e.element;this.filter=e.filter;this.filterboxwrapper=e.filterboxwrapper;this.headertext=e.headertext;this.isMultiselect=e.isMultiselect;this.isSelected=e.isSelected;this.mode=e.mode;this.model=e.model;this.onChange=e.onChange;this.onModelAddChange=e.onModelAddChange;this.selectable=e.selectable;this.selectedOnly=e.selectedOnly;this.showDragHandles=e.showDragHandles;this.showObjectPickerIfPolymorphic=e.showObjectPickerIfPolymorphic===true,this.showUiOnlyFields=e.showUiOnlyFields;this.state=e.state;this.useAliasNamesIfAggregate=e.useAliasNamesIfAggregate;this.useMetadataOverrides=e.useMetadataOverrides}render(){if(!this.breadcrumb||!this.breadcrumb.length){d.log("A breadcrumb option must be provided to the FieldSelector constructor",a["n"].WARNING);return d.resolve()}let{bci:e,breadcrumb:t,showObjectPickerIfPolymorphic:i,showUiOnlyFields:n}=this;this.buildFieldBody();this.buildHeaderElements();if(!this.bci){this.showMessage("Could not find the object information needed to display fields list");return d.reject("No breadcrumb info found for Field Selector")}this.headertext&&this.headertext.append(e.elements);if(e.endsobject&&e.endsobject.indexOf(",")!==-1&&i){t.splice(t.length-1,1);this.makeObjectSelectPopup(e.endsobject,e.endrel);return}this.filterbox&&this.filterbox.focus();let o=e.isSearchObject||e.dataSourceType.prop("composer.canFieldsBeSelected"),s=o?o({mode:n?"components":"model",model:e.model,breadcrumb:e}):true;if(s!==true){this.showMessage(s);return}this.addEventHandlers();const r={targetEntity:e.endsobject,path:e.prefix};return this.getItemsToUse(r).then(e=>{this.fieldbody.empty().append(e.map(e=>this.createRowForItem(e)))})}buildFieldBody(){if(!this.element)return;this.element.empty();let e=l('<table cellpadding="0" cellspacing="0">').addClass("nx-skootable-data");this.fieldbody=l("<tbody>").appendTo(e);this.element.append(e)}buildHeaderElements(){this.emptyHeaderElements();if(this.filterboxwrapper){this.filterboxwrapper.empty().addClass("nx-pagebuilder-filterbox");let e=l('<input type="text" placeholder="Search...">').addClass("nx-pagebuilder-toolbarpanel-headersearch");this.filterbox=e;this.filterboxwrapper.append(e)}}emptyHeaderElements(){this.headertext&&this.headertext.empty();this.filterboxwrapper&&this.filterboxwrapper.empty()}addEventHandlers(){let e=this.bci,t=this.breadcrumb,i=this.options,{allowRepeatedSelectionsOfSameField:n,childRelationshipsOnly:o,fieldbody:s,model:c,selectedOnly:p,onChange:f}=this,h=this.showDragHandles&&t.length&&t[0].id||false,m=this.isReadOnly(),g=this.isInAggregateAliasMode(),b=Object(r["g"])(c),v=function t(){let i=l(this).closest("tr"),a=i.data("field"),s=e.prefix+a,r=s,c=i.data("displaytype"),u=n?true:this.checked,m={fieldName:i.data("fieldname"),targetObjects:e.targetObjects,isChildRelationship:o,isChecked:u,displayType:c,ref:i.data("ref")};if(b&&d.startsWith(r,b)){r=r.substring(b.length+1)}m.fieldId=r;m.fullFieldId=s;if(g){m.fieldFunction=i.data("fieldfunction")}h&&i.find(".nx-draghandle").toggle(u);if(p)i.remove();f&&f(m)};if(!s){d.log("fieldbody does not exist. Cannot add event listeners",a["n"].WARNING);return}if(!m){if(n===true){s.on("click",".fieldpicker.sk-icon-add",v)}else{s.on("change",'input[type="checkbox"],input[type="radio"]',v)}if(typeof n==="function"){s.on("click",".fieldpicker.sk-icon-add",v)}}s.on("click",".sk-bi-follow-ref",function(){let e=l(this).closest("tr"),n=e.data("rel"),o=e.data("ref"),a=e.data("displaytype"),s=e.data("isPolymorphic");if(s&&o.indexOf(",")!==-1){this.makeObjectSelectPopup(o,n)}else{const s=t.length?t[t.length-1]:false;let r={rel:n,ref:o,isPolymorphic:false,displayType:a,isChildRelationship:s&&s.isChildRelationship,relationshipName:s&&s.relationshipName};if(o==="Name")r.possibleTargetObjects=e.data("possibleTargetObjects");t.push(r);const l=new u(Object.assign(i,{breadcrumb:t}));l.render()}});this.headertext&&this.headertext.off().on("click",".nx-pagebuilder-breadcrumb-link",function(){const e=t.slice(0,l(this).index()+1);const n=new u(Object.assign(i,{breadcrumb:e}));n.render()});if(this.filterbox){d.delayInputCallback(this.filterbox,function(e){if(!e){s.children().show()}else{s.children().hide();s.children().filter(function(){let t=l(this).attr("data-field"),i=l(this).attr("data-label"),n=t?t.toLowerCase().indexOf(e.toLowerCase())!==-1:false,o=i?i.toLowerCase().indexOf(e.toLowerCase())!==-1:false;return n||o}).show()}})}}getItemsToUse(e){let t=d.Deferred(),{model:i,dataSourceType:n,dataSourceName:o}=this,{path:a,targetEntity:s}=e,r=u.getDataSource({dataSourceName:o,model:i}),l=this.getMetadataLoadingMessage(r),c=n.skipMetadataWhenQueryingFields,p;if(typeof c==="function")c=c(i);if(c){p=this.getItemsFromModelXML(i,n,{childRelationshipsOnly:this.childRelationshipsOnly});t.resolve(p)}else{this.showMessage&&this.showMessage(l);const e=this;u.makeMetadataRequest({model:i,dataSourceName:o,targetEntity:s,path:a}).then(function(i){p=e.getItemsWithMetadataResult(i,a);t.resolve(p)}).catch(function(i){e.showMessage&&e.showMessage(i);t.reject(i)})}return t.promise()}getItemsFromModelXML(){const t=[],{model:i,dataSourceType:n,childRelationshipsOnly:o}=this;if(!o){i.children("fields").children().each(function(){t.push(new e.model.Field({xml:l(this),dataSourceType:n}))})}return t}getItemsWithMetadataResult(t,i){let n,o={},{childRelationshipsOnly:a,useMetadataOverrides:s,showUiOnlyFields:c,model:u,dataSourceType:p}=this,f=this.isInAggregateAliasMode()||false,h=Object(r["g"])(u);if(a){n=l.map(t.getChildRelationshipsList(),function(e){o[e.id]=1;return e})}else if(f){n=[];u.children("fields, groupby").children().each(function(){let e=l(this),i=e.attr("id"),a=e.attr("name"),s=e.attr("uionly"),r=t.getField(i)||t.getField(a);if(s)return;n.push({id:i,name:a,function:e.attr("function"),label:r?r.label:null,displaytype:r?r.displaytype:null,isGrouping:e.parent().is("groupby")});o[i]=1})}else{n=l.map(t.getSortedFieldsList(),function(e){o[e.id]=1;return e});if(s){let e=d.keyBy(n,"id");u.children("fields").children().each(function(){let t=l(this),i=t.attr("overridemetadata")==="true",n,o,a,s;if(i){s=t.attr("id"),a=e[s];if(a){n=t.attr("displaytype");o=t.attr("label");if(n){a.displaytype=n}if(o){a.label=o}}}})}}if(!a&&c){u.children("fields").children('[uionly="true"]').each(function(){let t=new e.model.Field({xml:l(this),dataSourceType:p,model:u});n.push(t);o[t.id]=1})}const m=p.prop("runtime.metadataSource"),g=m==="local"||m==="hybrid";if(!a&&g){const t=i?h?i.substring(h.length+1):i:null,a=!!t;u.children("fields").children().each(function(){if(this.getAttribute("uionly")==="true")return;const i=this.getAttribute("id");let s;if(a){if(i&&i.startsWith(t)){const n=i.replace(t,"");s=new e.model.Field({xml:l(this),dataSourceType:p,model:u});s.id=n}else return}else{if(i&&i.includes("."))return;s=new e.model.Field({xml:l(this),dataSourceType:p,model:u});s.isChildRelationship=this.getAttribute("type")==="childRelationship"}if(!o[s.id])n.push(s)})}return n}createRowForItem(t){let i=this.breadcrumb,n=this.bci,a=i.length?i[i.length-1]:false,c=a&&a.ref==="Name",u=c?a.possibleTargetObjects:false,p=Object(r["g"])(n.model),f=this.isReadOnly(),h=this.isInAggregateAliasMode(),{isSelected:m,selectedOnly:g,showDragHandles:b,childRelationshipsOnly:v,allowModelFieldAdds:y,onModelAddChange:C,allowRepeatedSelectionsOfSameField:_,isMultiselect:w,filter:x,selectable:k}=this;let S,I,T,A,P,E,M,D,N,F,O,R,L,B,j,U,V,H,q,z;if(v){S=t.relationshipName;t.displaytype=""}else{S=t.id}if(t.label){I=t.label}else{I=d.camelToTitle(t.relationshipName||t.id)}z=n.prefix+S;if(p){z=z.substring(p.length+1)}if(x&&!x(t,a,z)){return null}if(c&&!Object(s["n"])(t,u)){return null}D=m&&m(z);if(g&&!D){return null}N=t;T=N.displaytype;A=T==="REFERENCE";P=T==="OBJECT";E=T==="ARRAY";if(!T&&N.relationshipName){T="[Child Relationship]"}if(A||P||E){M=N.referenceTo}F=l("<tr>").attr({"data-field":S});if(n.isAggregate){F.attr({"data-fieldname":t.name,"data-fieldfunction":t["function"]})}if(a.isPolymorphic){F.attr({"data-ref":a.ref})}F.attr({"data-label":I,"data-displaytype":T});O=l("<td>").css("width","5px");if(b&&!P){R=l("<div>").addClass("nx-draghandle nx-pagebuilder-field").attr({"data-model":n.modelId,draggable:"true"});R.append('<div class="nx-draghandle-row">\n\t\t\t\t\t<div class="nx-draghandle-item"></div>\n\t\t\t\t\t<div class="nx-draghandle-item"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="nx-draghandle-row">\n\t\t\t\t\t<div class="nx-draghandle-item"></div>\n\t\t\t\t\t<div class="nx-draghandle-item"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="nx-draghandle-row">\n\t\t\t\t\t<div class="nx-draghandle-item"></div>\n\t\t\t\t\t<div class="nx-draghandle-item"></div>\n\t\t\t\t</div>');O.append(R);R[0].ondragstart=(t=>{const i=!v?"sk-webicon-ink:edit":"sk-webicon-ink:rules";e.builder.dragDrop.standardDragStart(t,I,i,new o["c"](new o["b"]({builderId:"model__field",model:n.modelId,isGlobalComponent:false}),new o["a"]({fieldId:N.id,fieldName:N.name,isChildRelationship:v})))});R[0].ondragend=(t=>{e.builder.dragDrop.standardDragEnd(t)})}L=l("<td>").css("width","24px");if(y&&!P&&C&&!g&&n.modelId&&Object(r["m"])(n.modelId,z)===false&&!f){let e={addIcon:"sk-bi-model-add",deleteIcon:"sk-bi-model-delete",addTitle:"Add field to model",deleteTitle:"Remove field from model"};let t=l("<div>").addClass("sk-icon "+e.addIcon).css({margin:"7px 4px 6px 4px",cursor:"pointer"}).attr("title",e.addTitle).on("click",function(){let t=l(this);if(t.hasClass(e.addIcon)){i(t)}else if(t.hasClass(e.deleteIcon)){n(t)}});let i=function t(i){C({fieldId:z,isChecked:true});B.show();i.removeClass(e.addIcon).addClass(e.deleteIcon).attr("title",e.deleteTitle).on("click",function(){n(i)})};let n=function t(n){C({fieldId:z,isChecked:false});B.hide();n.removeClass(e.deleteIcon).addClass(e.addIcon).attr("title",e.addTitle).on("click",function(){i(n)})};L.append(t)}j=l("<td>").css("width","24px");let W=false,G="9px 6px 8px";if(!k||k&&k(t,z)){if(_===true||typeof _==="function"&&_(t)){B=l('<div class="fieldpicker sk-icon sk-icon-add">').css("cursor","pointer");W=true}else{if(w){B=l('<input type="checkbox">')}else{B=l('<input type="radio" name="fieldpicker">')}B.prop("disabled",f);if(D){B.prop("checked",true)}}if(W){G+=" 3px"}B.css("margin",G);let e="checkbox"+S+d.generateGUID();B.prop("id",e);if(b&&!D){R&&R.hide()}j.append(B);j.append('<label for="'+e+'"><label>');if(y&&n.modelId&&Object(r["m"])(n.modelId,z)===false){B.hide()}}if(h){let e,i=t["function"];if(t.isGrouping){if(i){if(i==="DAY_ONLY"){e="DATE"}else{e="INTEGER"}}else if(A){e="ID"}else{e=T}}else{if(d.contains(i,"COUNT")){e="INTEGER"}else{e=T}}V=l("<td>").css("padding","8px").text(i?"".concat(i,"(").concat(S,")"):S);H=l("<td>").css("padding","8px").text(t.name);q=l("<td>").css("padding","8px").text(e);F.append(j,V,H,q)}else{U=l('<td style="width: 30px;">');if((A||P||E)&&M&&M.length&&N.rel!=="null"){F.attr({"data-rel":N.rel,"data-ref":N.ref,"data-displaytype":T});if(N.ref==="Name")F.data("possibleTargetObjects",N.possibleTargetObjects);F.data("isPolymorphic",N.isPolymorphic);U.append(l('<div class="sk-icon sk-bi-follow-ref">').css({margin:"6px",cursor:"pointer"}))}V=l("<td>").css("padding","8px").text(I);let e=t.childObject||t.childSObject;let i=t.keyField||t.field;H=l("<td>").css("padding","8px").text(v?"".concat(e," > ").concat(i):S);q=l("<td>").css("padding","8px").text((T||"")+(A&&M&&M.length?" ("+(M.length>2?M.length+" possible objects":N.ref)+")":""));b&&F.append(O);if(y&&C&&!g){F.append(L)}F.append(j,U,V,H,q)}return F}makeObjectSelectPopup(t,i){let{breadcrumb:n,options:o}=this,a=t.split(","),s={componentType:"skuid__select",uniqueId:d.generateUniqueId(),options:[]};a.forEach(e=>{const t=e==="User"&&d.endsWith(i,"Owner"),n=t?"unshift":"push",o={value:e,label:e};s.options[n](o)});s.value=s.options[0].value;const r=()=>{const a=e.$C(s.uniqueId),r=a.get("value"),l={ref:r,isPolymorphic:true};if(!r)return;if(i===t&&t.indexOf(",")!==-1){l.rel=r}else{l.rel=i}n.push(l);const d=new u(Object.assign(o,{breadcrumb:n}));d.render()};const l=d._floatingComponentFactory.createModal({zIndex:d.increaseAndGetZIndex(1400),title:"Choose a related object to pick fields from",components:[s],buttons:[{styleSettingsVariant:"primary",label:"Go",onClick:()=>l.cpi.close(),hotkeys:c('<hotkeys>\n\t\t\t\t\t\t\t<hotkey modifiers="" key="return" ignoretextinputs="true"/>\n\t\t\t\t\t\t</hotkeys>')}],onClose:r})}getMetadataLoadingMessage(e){if(!e)return"Loading metadata...";else return e.getEntityMetadataLoadingMessageFromBreadcrumb(this.bci)}showMessage(e){const t=this.fieldbody;let i=l('<div style="padding: 10px; font-size: 12pt;">').text(e);if(t&&t.length){t.append(i)}else{this.element.append(i)}}get model(){return this._model||this.bci&&this.bci.model}set model(e){this._model=e}get dataSourceType(){return this.bci&&this.bci.dataSourceType}isInAggregateAliasMode(){return this.useAliasNamesIfAggregate&&this.bci&&this.bci.isAggregate}isReadOnly(){return this.mode==="readonly"}static processBreadCrumbInfo(t,i){i=i||{};let n,o,a="",r="",d=t.length?t[0].id:false,p=!d&&t.length?c('<model sobject="'+t[0].rel+'"/>'):null,f=i.model||d&&Object(s["j"])(d)||p,h=u.getDataSource({dataSourceName:i.dataSourceName,model:f}),m,g=e.builder.core.actionSequences,b=g.getActionSequenceFromChildAction(i.state);if(b){if(f.length===0){f=g.getModelXMLForPickerOfInputModel(b,d);h=Object(s["b"])(f)}}l.each(t,function(e,t){h.populateBreadcrumbFromEntityMetadata({crumb:t,index:e,modelXML:f});if(!t.rel)return false;if(e!==0){r+=t.rel+"."}if(t.isPolymorphic){a+=t.ref+"."}if(t.ref&&t.ref.indexOf(",")!==-1){t.possibleTargetObjects=t.ref.split(",");if(i.showObjectPickerIfPolymorphic)t.isPolymorphic=true;else t.ref="Name"}});n=t[t.length-1].ref;o=t[t.length-1].rel;if(a.length>0&&a.indexOf(".")!==-1){a=a.substring(0,a.length-1)}m=u.buildBreadCrumbElements(t);return{dataSourceType:h.getDataSourceType(),elements:m,endsobject:n,endrel:o,isAggregate:f?f.attr("type")==="aggregate":false,modelId:d,model:f,prefix:r,targetObject:a}}static buildBreadCrumbElements(e){const t=[];l.each(e,function(i,n){if(!n.rel)return false;let o=l("<span>").text(n.rel+(n.isPolymorphic&&n.ref!==n.rel?"("+n.ref+")":"")).addClass("nx-pagebuilder-breadcrumb");if(i===e.length-1){o.addClass("last")}if(i<=e.length-2&&n.selectable!==false){o.addClass("nx-pagebuilder-breadcrumb-link")}t.push(o)});return t}static makeMetadataRequest(e){let{model:t,dataSourceName:i,targetEntity:n,path:o}=e,a=u.getDataSource({dataSourceName:i,model:t}),s=a.buildEntityMetadataRequest({model:t,targetEntity:n,path:o,ignorePathToContent:true}),r=a.getEntityMetadata({entities:s,ignoreMetadataOverrides:true,ignoreCache:s.ignoreCache});return r}static getDataSource(t){const{dataSourceName:i,model:n}=t;return i?e.dataSource.get(i):Object(s["b"])(n)}}},38:function(t,i,n){"use strict";n.d(i,"a",function(){return oe});var o=n(2);var a=n(54);let s=e.$,r=e.ui,l=e.utils,d=e.time,c=d.parseSFDate,u=d.parseSFDateTime,p=d.getSFDate,f=d.getSFDateTime,h=e.$L,m=l.encodeHTML,g=l.startsWith,b,v,y="placeholder",C="keydown.action.skuid",_=o["g"].ANYTYPE,w=o["g"].ARRAY,x=o["g"].BOOLEAN,k=o["g"].COMBOBOX,S=o["g"].CURRENCY,I=o["g"].CUSTOM,T=o["g"].DATE,A=o["g"].DATETIME,P=o["g"].DOUBLE,E=o["g"].EMAIL,M=o["g"].ID,D=o["g"].INTEGER,N=o["g"].LOCATION,F=o["g"].MULTIPICKLIST,O=o["g"].NUMBER,R=o["g"].PERCENT,L=o["g"].PHONE,B=o["g"].PICKLIST,j=o["g"].REFERENCE,U=o["g"].RICHTEXT,V=o["g"].STRING,H=o["g"].TEXT,q=o["g"].TEXTAREA,z=o["g"].URL,W=o["i"].CHILDREL,G=o["i"].COMBO,Y=o["i"].FILE,X=o["i"].IMAGE,K=[x,S,T,A,P,M,D,R,o["g"].TIME];function $(e,t){let i=e.options&&e.options.addfocusbox;e.element.html('<div class="nx-fieldtext">'+t+(i?'<div class="focusbox" tabindex="0"/>':"")+"</div>")}function Q(e){let t=e.model,i=e.row,n=t.getFieldValue(i,e.id),o=t.objectName,a=t.getNameFieldValueForRow(i),s;if(window.sforce&&sforce.interaction&&window.sendCTIMessage)s=window.sendCTIMessage;s&&s("/CLICK_TO_DIAL?DN="+encodeURIComponent(n)+(i.Id?"&ID="+i.Id:"")+"&ENTITY_NAME="+o+"&OBJECT_NAME="+encodeURIComponent(a))}function J(e,t){let i=e.metadata;return i&&i.displaytype&&s.inArray(i.displaytype,K)!=-1?t:m(t)}function Z(e){let t=e.options,i=t&&t[y];return i||e.metadata[y]}function ee(t,i,n){let o=false;let r=[];function l(t,i,o){let a=s("<div>").addClass("nx-radiowrapper"),r=e.utils.generateGUID(),l=s('<input type="radio" name="'+n.buttonSetName+'">').addClass("nx-radio").prop("id",r).prop("checked",o).prop("disabled",n.mode==="read"||n.mode==="readonly").val(t),d=s("<label>").prop("for",r).addClass("nx-radiolabel").html(m(i)).appendTo(a);a.append(l,d);return a}if(n.makeNoneOption){r.push(l("",Object(a["a"])(n.noneLabel),!t))}s.each(i,function(e,i){if(i.value){let e=i.value==t&&i.label!=="";if(e&&!o)o=true;r.push(l(i.value,i.label,e))}});if(!o&&(t||t==="0"||t==="false")){let e=l(t,t,true);if(n.makeNoneOption)r.splice(1,0,e);else r.unshift(e)}return r}function te(e){if(!e)e={};let t=e.value,i=l.userLocale,n=e.decimalPlaces||0,o=e.decimalsSeparator||i.decimalsSeparator,a=e.thousandsSeparator||i.thousandsSeparator,r=e.prefix||"",d=e.suffix||"",c;if(!t&&t!==0)t="";if(t===""||!s.isNumeric(t))c=t;else if(!isFinite(t))c="-";else c=r+s.number(t,n,o,a)+d;return e.wrapInElement?s("<div>").text(c):c}function ie(e){let t={},i=function i(n,o){let a=e[n];if(typeof a!=="undefined")t[o]=a};i("showYearPicker","changeYear");i("showMonthPicker","changeMonth");i("yearPickerRange","yearRange");return t}function ne(e,t){let i,n;i=s('<div class="nx-field-lengthcounter"></div>');n=function e(n){i.text(+n+"/"+t.length);if(n>t.length){i.addClass("nx-field-lengthcounter-error")}else{i.removeClass("nx-field-lengthcounter-error")}};n(t.value?t.value.length:0);e.append(i);return n}b={AUTOCOMPLETE:{edit:function e(t){t=t||{};if(!t.minLength&&t.minLength!==0){t.minLength=2}let i=s("<input>"),n,o=function e(){if(n){n.removeClass("ui-icon ui-icon-search");n.addClass("nx-spinner-small")}},a=function e(){if(n){n.removeClass("nx-spinner-small");n.addClass("ui-icon ui-icon-search")}},r=function e(){if(typeof t.source=="function"){return function(e,i){t.source(e,i,o,a)}}else{return t.source}};i.autocomplete({minLength:t.minLength,source:r(),select:t.onChange,focus:t.onFocus,close:t.onClose,appendTo:t.appendTo}).val(t.value);if(t.menuRenderer){i.data("ui-autocomplete")._renderMenu=t.menuRenderer}if(t.optionRenderer){i.data("ui-autocomplete")._renderItem=t.optionRenderer}i.on("keyup",function(e){if(s(this).val()===""&&e.keyCode!==9){t.onClear&&t.onClear()}});i.focus(function(){i.autocomplete("widget").css("z-index",parseInt(i.closest(".ui-front").css("z-index"),10)+1)});i.blur(function(){t.onBlur&&t.onBlur()});i.attr("placeholder",t.placeholder||"Type to search");if(t.showSearchIcon&&t.parentElem){n=s("<div>").addClass("ui-icon ui-icon-search nx-field-reference-search").css({cursor:"pointer"});t.parentElem.append(n);if(t.parentElem.is(i)){i.css("padding-right","22px")}}return i}},BOOLEAN:{edit:function e(t){let i=s('<input type="checkbox">').prop("checked",t.value).change(function(){t.onChange&&t.onChange(s(this).is(":checked"));i.focus()});return i}},COMBOBOX:{edit:function t(i){i=i||{};let n=".nx-combobox-renderer-button",o=function e(t){let n=i.entries;if(l.isFunction(n)){n=n(t)}return l.resolve(n)},a=function e(t){return{value:r(t),label:d(t)}},r=function e(t){return l.isString(t)?t:t.value},d=function e(t){return l.isString(t)?t:t.label?t.label:t.value},c=i.getErrorContainer,u=i.invalidEntryMessage||"Only entries in this list are allowed.",p=function t(i,n){C();o(i.term).then(function(t){_();n(t.filter(function(e){let t=i.term?i.term.toLowerCase():"";let n=function e(i){return i.toString().toLowerCase().indexOf(t)>-1};if(l.isObject(e)){return s.map(e,function(e){if(n(e))return e}).length>0}else return n(e)}).map(function(e){return a(this||e)}));if(l.runningTests()){e.events.publish("combobox.entries.ready")}}).catch(function(e){c().show().text(e);_();n([])})},f=i.onChange,h=i.parentElem,m=i.showLabelInTextInput,g=i.originalValue,b=i.restrictToEntries,v=s("<div>").addClass("ui-icon ui-icon-search nx-field-reference-search").css({cursor:"pointer"}),y=s("<select/>"),C=function e(){let t=h.find(n);if(v){t.css("display","none");v.removeClass("ui-icon ui-icon-search").addClass("nx-spinner-small").css({top:"5px"})}},_=function e(){let t=h.find(n);if(v){v.removeClass("nx-spinner-small").addClass("ui-icon ui-icon-search");t.css("display","block")}},w=i.label,x=i.value,k=m&&w?w:x,S={appendDropdown:i.appendDropdown,originalValue:i.originalValue,showLabelInTextInput:m,parentElem:h,required:i.required,searchicon:v,source:p,value:k,onBlur:function t(i){let n=c(),p=s(i.target),h=p.data("value"),v=i.target.value;if(m&&h&&h!==v&&w&&v==w){v=h}if(!v&&!x)return;o(v).then(function(t){let i=t.find(e=>v===r(e)||v===d(e));let o=!!i;let s=o?a(i):{value:v,label:v};v=s.value;if(b&&!o){n.show().text(u);if(l.runningTests()){e.events.publish("combobox.entry.error")}}else{n.hide();if(x===v)return;g=x;x=s.value;w=s.label;if(m&&o&&w){p.data("value",x);if(p.val()!==w){p.val(w)}}f&&f(x,g,{item:s})}}).catch(function(e){n.show("Error fetching entries: "+e)})},onChange:function e(t,i){let n=s(this);g=x;w=i.item.label;x=i.item.value;c().hide();if(f){f(x,g,{item:i.item})}if(m&&w){n.data("value",x);i.item.value=w}},onFocus:function e(t){t.target.select()}},I;if(!m||!x||m&&i.label){I=y.combobox(S);if(k!==x){h.find("input").data("value",x)}return I}return o(x).then(function(e){let t=e.filter(function(e){if(l.isObject(e)){return s.map(e,function(e){if(x===e)return e}).length>0}else return x===e})[0],i,n;if(l.isObject(t)){n=r(t);i=d(t)}else n=t;if(n)x=n;if(i)w=i;k=m&&w?w:x;I=y.combobox(s.extend(S,{value:k,getInputValue:function e(){return x}}));if(k!==x){h.find("input").data("value",x)}return I})}},CURRENCY:{read:function t(i){if(!i)i={};let n=l.userLocale,o=l.userInfo.defaultCurrency,a=i.value,r=i.decimalPlaces||0,d=i.decimalsSeparator,c=i.thousandsSeparator,u=i.valueCurrencyCode,p,f;if(typeof d==="undefined")d=n.decimalsSeparator;if(typeof c==="undefined")c=n.thousandsSeparator;if(!a&&a!==0)a="";f=a!==""&&s.isNumeric(a)?s.number(a,r,d,c):a;if(a!==""&&s.isNumeric(a)){if(l.isMultiCurrencyOrganization){f=u+" "+f;if(u&&u!=o){p=l.convertCurrency(a,u,o);if(p&&p!=a){f+=" ("+o+" "+s.number(p,r,d,c)+")"}}}else{f=e.currency.getSymbol(o)+f}}return i.wrapInElement?s("<div>").text(f):f}},DOUBLE:{read:te},DATE:{edit:function e(t){t=t||{};let i,n=false,o,a=t.value&&c(t.value);i=s("<input>").datepicker(s.extend(ie(t),{onSelect:function e(a,s){let r=3-2,l=s.selectedMonth-0+r+"",d=s.selectedDay+"",c;if(l.length===1)l="0"+l;if(d.length===1)d="0"+d;c=s.selectedYear+"-"+l+"-"+d;o=i.val();t.onChange&&t.onChange(c);n=true;i.focus();setTimeout(function(){n=false},200)},beforeShow:function e(){setTimeout(function(){s(".ui-datepicker").css("z-index",parseInt(i.closest(".ui-front, .sk-pagepanel").css("z-index")||0,10)+1)},0);if(n)return false}})).on("click",function(){i.datepicker("show")});i.datepicker("widget").click(function(e){e.stopPropagation()});a&&i.datepicker("setDate",a);o=i.val();i.bind("change keyup",function(){let e=s(this).val();if(e!=o){o=e;let n;if(e!==""){n=p(i.datepicker("getDate"))}else{n=""}t.onChange&&t.onChange(n)}});return i}},DATETIME:{edit:function e(t){let i=s("<div>"),n=s("<input>"),o,a,r,c=false;if(t.value){o=u(t.value);i.data("usedate",o)}n.datepicker(s.extend(ie(t),{onSelect:function e(o,a){let s=new Date,r,l,u,p=i.data("usedate");if(p){r=d.getLocalDateTime(p)}else{r=d.getLocalDateTime(s);r.setHours(0,0,0,0)}r.setFullYear(a.selectedYear,a.selectedMonth,a.selectedDay);l=d.getRealJSDateTimeFromLocal(r);u=f(l);t.onChange&&t.onChange(u);i.data("usedate",l);c=true;n.focus();setTimeout(function(){c=false},200)},beforeShow:function e(){setTimeout(function(){s(".ui-datepicker").css("z-index",parseInt(n.closest(".ui-front, .sk-pagepanel").css("z-index")||0,10)+1)},0);if(c)return false}})).click(function(){n.datepicker("show")});t.value&&o&&n.datepicker("setDate",d.getLocalDateTime(o));n.datepicker("widget").click(function(e){e.stopPropagation()});let p=n.val(),h,m,g=s("<div>").addClass("nx-dt-timewrapper"),b,v,y;n.bind("change keyup",function(){if(s(this).val()!=p){p=s(this).val();let e;if(s(this).val()!==""){let t=n.datepicker("getDate")||new Date,o,a;t.setHours(0,0,0,0);o=d.getLocalDateTime(i.data("usedate")||t);o.setFullYear(t.getFullYear(),t.getMonth(),t.getDate());a=d.getRealJSDateTimeFromLocal(o);e=f(a);i.data("usedate",a)}else{e="";i.data("usedate",null)}t.onChange&&t.onChange(e)}}).addClass("nx-dt-dateinput");h=new Date;if(o){m=d.getLocalDateTime(o)}else{m=d.getLocalDateTime(h);m.setHours(0,0,0,0)}let C=l.userLocale,_=C.timeFormat,w,x=d.amPm,k=function e(t){let i=w+1<_.length&&_.charAt(w+1)===t;if(i)w++;return i},S=false,I=function e(){let n=d.getLocalDateTime(i.data("usedate")||new Date),o;n.setHours((parseInt(b.val(),10)+(y&&y.val()==="pm"?12:0))%24);n.setMinutes(v.val());o=d.getRealJSDateTimeFromLocal(n);i.data("usedate",o);t.onChange&&t.onChange(f(o))},T=function e(t){g.append(s("<span>"+t+"</span>"))},A,P=function e(t,i,n,o){t.append(s("<option "+(n?"selected ":"")+'value="'+i+'">'+(o&&i<10?"0"+i:i)+"</option>"))};for(w=0;w<_.length;w++){A=_.charAt(w);if(S){if(A==="'"&&!k("'")){S=false}else{T(A)}}else{switch(A){case"a":if(!y){let e=m&&m.getHours()>=12;y=s("<select>").html("<option "+(e?"":"selected ")+'value="am">'+x[0]+"</option>"+"<option "+(e?"selected ":"")+'value="pm">'+x[1]+"</option>").appendTo(g).on("change",I)}break;case"h":case"K":case"k":case"H":if(!b){b=s("<select>");a=k(A);let e,t=A==="h"||A==="K"?12:24;for(let i=0;i<t;i++){if(A==="h"&&i===0)e=12;else if(A==="k")e=i-0+1;else e=i;r=false;if(m){r=i===(t>12?m.getHours():m.getHours()%12)}else if(i===8)r=true;b.append(s("<option "+(r?"selected ":"")+'value="'+i+'">'+(a&&e<10?"0"+e:e)+"</option>"))}b.appendTo(g).on("change",I)}break;case"m":if(!v){v=s("<select>");a=k("m");let e=t.minuteIncrement||5,i=m?m.getMinutes():0,n=m&&i%e===0;for(let t=0;t<60;t=t+e){r=t===i;if(!n&&t>i){P(v,i,true,a);n=true}P(v,t,r,a)}v.appendTo(g).on("change",I)}break;case"'":if(k("'")){T("'")}else{S=true}break;default:T(_.charAt(w))}}}if(C&&C.showTimeBeforeDate)i.append(g,n);else i.append(n,g);return i}},ENTITY:{edit:function t(i){if(!i)i={};let n=s('<div style="position: relative;">'),o=i.value,a=i.readOnly,r=function t(){let n=i.dataSource;if(l.isFunction(n))return n();else if(n)return n;else return e.dataSource.get(e.platform.getDefaultDataSourceName())},d=function e(t){let n=i.filter;if(l.isFunction(n)){return n(t)}else{return r().getEntityList()}},c=i.getErrorContainer||function(){let e=n.parent();let t=e.find(".nx-property-error");if(!t.length){t=s("<div>").addClass("nx-property-error").css("margin-top","8px").insertAfter(n);e.css("display","block")}return t},u=i.invalidEntryMessage||"Please select a valid entity.",p=function e(t,n){r().getEntityMetadata({entities:{objectName:t},ignoreMetadataOverrides:true}).catch(function(e){c().show().text(e)});o=t;i.onChange&&i.onChange(t,n)},f="x-metadata",h,m,g,b;if(a){m=r();h=o;if(m&&m.dataSourceType){if(m.dataSourceType.prop&&l.size(m.dataSourceType.prop(f))){g=m.dataSourceType.prop(f)[o];if(g&&g.label){h=g.label}}else if(m.dataSourceType.getEntityLabel){b=m.dataSourceType.getEntityLabel(o,m);if(b)h=b}}n.addClass("nx-fieldtext").css("margin-top","6px").text(h||"")}else{n.append(oe(k).edit({appendDropdown:true,entries:d,getErrorContainer:c,invalidEntryMessage:u,onChange:p,parentElem:n,restrictToEntries:true,showLabelInTextInput:i.showLabelInTextInput,value:o}))}return n}},INTEGER:{read:function e(t){if(!t)t={};s.extend(t,{decimalPlaces:0});return te(t)}},MULTIPICKLIST:{edit:function e(t){if(!t.valueDelimiter)t.valueDelimiter=";";let i=t.value,n=t.checkboxSetName,a=t.entries,r=t.maxSelected,d=t.valueDelimiter,c=t.selectedList||t.selectedList===0?t.selectedList:3,u=t.selectedText||h("Number_Selected"),p=t.noneSelectedText||h("None_Selected"),f=false,g=t.required||false,b;if(!i)i="";let v=i.length?i.split(d):[],y=r&&v.length>=r,_=t.element||s("<div>"),w=i,x;if(t.renderas==="CHECKBOXES"){_.addClass("nx-fieldtext").css("padding","0px");b=function e(){if(f)return;else f=true;let i=_.find('input[type="checkbox"]'),n=i.filter(function(){return s(this).prop("checked")}).map(function(){return this.value}).get(),o;if(r){if(n.length>=r){o=[];let e=0;i.each(function(){let t=s(this);if(t.prop("checked")){if(e++<r){o.push(t.val());return true}else{t.prop("checked",false)}}t.prop("disabled",true)})}else{i.each(function(){if(s(this).prop("disabled"))s(this).prop("disabled",false)})}}x=(r&&o?o:n).join(d);t.onChange&&t.onChange(x,w);w=x;f=false};s.each(a,function(e,t){if(t.value){let e="";if(s.inArray(t.value,v)!==-1&&t.value!==""){e='checked="yes"'}let i=s("<div>").addClass("nx-checkboxwrapper"),o=s("<input "+e+' type="checkbox">').val(t.value).prop("id","mscb_"+n+"_"+t.value).addClass("nx-checkbox").appendTo(i),a=s("<div>").addClass("nx-checkboxlabel").appendTo(i);if(y&&!e){o.prop("disabled",true)}a.append(s("<label>").html(m(t.label)).prop("for","mscb_"+n+"_"+t.value));_.append(i)}});_.off();_.on("change","input",function(){b()})}else{let e=s('<select multiple="multiple">').appendTo(_);s.each(a,function(t,i){let n="",o;if(s.inArray(i.value,v)!==-1&&i.label!==""){n='selected="selected"'}o=s("<option "+n+">").attr("value",i.value).text(i.label);e.append(o)});b=function i(){if(f)return;else f=true;let n={};let o=e.multiselect("getChecked").map(function(){n[this.value]=1;return this.value}).get();let a;let l;let c;if(r){l=e.multiselect("widget").find('input[type="checkbox"]');if(o.length>=r){a=[];c=0;l.each(function(){let e=s(this),t=e.val();if(e.prop("checked")){if(c++<r){a.push(t);n[t]=1;return true}else{delete n[t];this.click()}}e.prop("disabled",true).closest("label").addClass("ui-state-disabled")});e.children().each(function(){let e=s(this);if(!n[e.val()]){e.prop("disabled",true).removeAttr("aria-selected")}else{e.attr("aria-selected","true")}})}else{e.children().each(function(){let e=s(this);e.prop("disabled",false).attr("aria-selected",n[e.val()]?"true":"false")});l.each(function(){s(this).prop("disabled",false).closest("label").removeClass("ui-state-disabled")})}}x=(r&&a?a:o).join(d);t.onChange&&t.onChange(x,w);w=x;f=false};e.multiselect({selectedText:u,noneSelectedText:p,checkAllText:h("Check_All"),uncheckAllText:h("Uncheck_All"),selectedList:c,position:t.position,autoOpen:false,classes:g?"required":"",close:function e(){s(this).parent().find("button.ui-multiselect").removeAttr("tabindex").focus();if(l._ie){s(this).multiselect("disable")&&s(this).multiselect("enable")}t.onClose&&t.onClose.call(this)},click:function e(t,i){b(t,i)},open:function t(){s(this).parent().find("button.ui-multiselect").attr("tabindex","-1");e.multiselect("widget").find("li").on(C,function(e){if(e.which===o["k"].TAB)e.stopPropagation()})},create:function i(){if(e.val()&&e.val().length>=r){e.children().each(function(){let e=s(this);if(!e.prop("selected")){e.prop("disabled",true).removeAttr("aria-selected")}})}t.onCreate&&t.onCreate.call(this)}}).on("multiselectcheckall multiselectuncheckall",function(e,t){b(e,t)});let i=e.data("echMultiselect")||e.data("ech-multiselect");i&&i.menu&&i.menu.on("focusin",function(e){e.stopPropagation()});e.multiselect("getButton").attr({role:"button",tabindex:0}).on(C,function(t){if(t.which===o["k"].ENTER||t.which===o["k"].SPACE){let t=e.multiselect("isOpen")?"close":"open";e.multiselect(t)}});if(a.length>5){e.multiselectfilter({label:"",placeholder:h("Enter_keywords")})}}return _}},PERCENT:{read:function e(t){if(!t)t={};s.extend(t,{suffix:"%"});return te(t)}},PICKLIST:a["b"],TEXT:{edit:function e(t){let i=t.inputType,n=t.onChange,o={},a=s("<input "+(i?' type="'+i+'"':"")+">").val(t.value),r=s("<div>");["inputMode","maxLength",y].forEach(function(e){if(t[e]){o[e.toLowerCase()]=t[e]}});if(l.size(o)){a.attr(o)}if(n){l.delayInputCallback(a,function(e,t){n(e,t)},{dataPropertyName:t.dataPropertyName})}r.append(a);if(t.length!==undefined){let e=ne(r,t);a.on("input",function(){e(a.val().length)})}return r}},TEXTAREA:{edit:function e(t){let i=t.onChange,n=t.displayRows,o=t[y],a=s("<div>"),r=s("<textarea>").val(t.value).appendTo(a);if(n){r.attr("rows",n).css({height:"100%"})}else{r.flexText()}if(o){r.attr(y,o)}l.delayInputCallback(r,function(e,t){i&&i(e,t)});if(t.length!==undefined){let e=ne(a,t);r.on("input",function(){e(r.val().length)})}return a}},RICHTEXT:{edit:function t(i){i||(i={});let n=s("<div>").append(s('<div class="nx-spinner">')),o;function a(t){let a=i.config||{};let r;let d;let c=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);if(a instanceof Array){a=s.extend.apply(this,s.map(a,function(e){if(typeof e==="function")e=e();return e}))}r={allowedContent:true,disallowedContent:"style script iframe",toolbar:c?"Mobile":"FieldEditor"};if(typeof a==="function"){a(r)}else{r=s.extend(r,a)}d=s('<div class="nx-richtext-input" id="'+(i.id||l.generateUniqueId())+'">').on("mousedown.sk-richtext focus.sk-richtext",u);if(i.value){d.html(i.value)}if(!n.parent().hasClass("disabled")){d.attr("contenteditable","true");d[0].style["-webkit-user-select"]="text";d[0].style["user-select"]="text"}else{d.attr("sk-contenteditabledisabled","true")}n.empty().append(d);if(i.initialize._initializeWhenReady===true){u();i.initialize=function(){}}else{i.initialize=u}function u(){if(n.parent().hasClass("disabled"))return;if(o)return;d.off("click.sk-richtext focus.sk-richtext");r.removePlugins="ckeditor-gwf-plugin";o=t.inline(d[0],r);n.parent().attr("sk-ckeditorname",o.name);o.config.customConfig=l.getStaticResourceUrl("CKEditor","skuid","config.js",l.getCacheTimestamp());o.config.uiColor="#DDDDDD";function a(){let e=s(".cke");let t=s(e[e.length-1]);t.insertAfter(s(d[0]));if(t){t.removeClass("cke-sf1-fix");t.addClass("cke-sf1-fix")}}if(e.utils._oniOS()&&e.utils._inIframe()){o.on("contentDom",a);s(d[0]).on("click",a)}let c=2,u=function e(t){i.onChange&&i.onChange(t,c)};o.on("change",function(){u(o.getData())});o.on("mode",function(){if(c===2)c=false;else c=!c});o.on("key",function(){if(c){u(o.getData())}});i.onCreated&&i.onCreated(o);if(i.afterInit){i.afterInit({ckInstance:o})}}}i.initialize=function(){i.initialize._initializeWhenReady=true};e.utils.loadRichTextApi().then(a);return n}},COLOR:{read:function e(t){return r.Color.read(t)},edit:function e(t){return r.Color.edit(t)}}};v={TEXT:{read:function e(t,i){if(!i&&i!==0)i="";if(t.options&&t.options.type==="PASSWORD"){i=Array(i.length+1).join("*")}if(!l.isString(i)){i=""+i}let n=t.options.maxDisplayCharacters,o=t.metadata,a=o&&o.displaytype===z,s=t.model.getDataSourceType(),r,d,c=false,u;if(a){if(i&&!l.contains(i,"//")&&!g(i,"/"))i="http://"+i;if(!n)n=40}d=i;n&&(n-=0);if(!isNaN(n)&&n>0&&n<i.length){i=i.substring(0,n)+"..."}let p;if(s&&s.getNameFieldURLForTextField){p=s.getNameFieldURLForTextField(t,d,i);if(p){c=true;i=p}}if(a&&!p){u=m(d);i='<a href="'+u+'">'+m(i)+"</a>"}if(o?o.htmlFormatted:false){r=l.removeScriptTags(i)}else{r=l.nl2br(c?i:m(i))}$(t,r)},readonly:function e(t,i){ae(H).read(t,i)},edit:function e(t,i,n){let o=t.options,a=Z(t),r;if(!i&&i!==0)i="";r={inputType:n,value:i,onChange:function e(i){t.model.updateRow(t.row,t.id,i,t._getUpdateRowOptions())}};if(o&&o.type==="PASSWORD"){r.inputType="password"}if(a){r[y]=a}if(t.options.showLengthCounter&&t.metadata.length){r.length=t.metadata.length}t.element.append(oe(H).edit(r),s("<div>").addClass("sk-focusbar"))}},TEXTAREA:{read:function e(t,i){if(t._ckInstance){t._ckInstance.destroy();delete t._ckInstance}ae(t,H).read(t,i)},readonly:function e(t,i){ae(q).read(t,i)},edit:function e(t,i){let n=t.options||{},o=Z(t),a=n.displayRows,s=n.showLengthCounter?t.metadata.length:undefined;if(!i&&i!==0)i="";if(t.metadata.htmlFormatted){t.disableBlur=true;t.element.append(oe(U).edit({afterInit:function e(i){t._ckInstance=i.ckInstance},config:[{uiColor:"#DDDDDD"},n.ckEditorConfig||{}],field:t,length:s,onChange:function e(i){t.model.updateRow(t.row,t.id,i,t._getUpdateRowOptions())},value:i}))}else{t.element.append(oe(q).edit({displayRows:a,length:s,onChange:function e(i){t.model.updateRow(t.row,t.id,i,t._getUpdateRowOptions())},placeholder:o,value:i}))}},destroy:function e(t){let i;if(t.metadata.htmlFormatted){i=oe(U);if(i.destroy)i.destroy({field:t})}}},RICHTEXT:{read:function e(t,i){t.metadata.htmlFormatted=true;return ae(t,q).read(t,i)},readonly:function e(t,i){return ae(U).read(t,i)},edit:function e(t,i){t.metadata.htmlFormatted=true;return ae(t,q).edit(t,i)}},DOUBLE:{read:function e(t,i,n,o){let a=t.metadata,s=t.options.decimalPlaces,r;if(s||s==="0"){r=parseInt(s,10)}else if(a&&a.scale){r=a.scale}if(!r||!l.isNumber(r)){r=0}$(t,oe(P).read({value:i,decimalPlaces:r,prefix:n,suffix:o}))},readonly:function e(t,i){ae(P).read(t,i)},edit:function e(t,i){if(!i&&i!==0)i="";let n=l.userLocale,o=s('<input inputmode="numeric">').val(i!==""&&s.isNumeric(i)?s.number(i,t.metadata&&t.metadata.scale?t.metadata.scale:0,n.decimalsSeparator,n.thousandsSeparator):i);l.delayInputCallback(o,function(e){let i=t.metadata.displaytype,a=false,s=n.thousandsSeparator,r=n.decimalsSeparator,d=e.indexOf(r),c=e.split(r),u=c[0],p=parseInt(c[1],10),f=c[1]?c[1].length:0,h=p.toString().length,m=o.val(),g,b,v={k:3,m:6,b:9,t:12},y=m.toLowerCase().charAt(m.length-1),C=Math.pow(10,v[y]),_=C/10,w=new RegExp("[^\\dbkm"+(r==="."?"\\"+r:r)+(s==="."?"\\"+s:s)+"-]|[bkm"+r+"]{2,}","ig").exec(m)===null;if(s===".")s="\\.";e=e.toString().replace(new RegExp(s,"g"),"").replace(r,".");g=parseInt(e,10);if(u==="")u=0;else if(u==="-")u=-0;if(w&&isNaN(C)==false){if(d!==-1){for(h;h>1;h--){_=_/10}for(b=0;b<f;b++){if(c[1][b]==="0")_=_/10;else break}_=u>=0&&1/u>0?p*_:-(p*_);e=u*C+_}else e=g*C}if(e){if(i===D){a=parseInt(e,10)}else{a=parseFloat(e)}}if(a!==false&&!l.isExactlyNaN(a))e=a;t.model.updateRow(t.row,t.id,e,t._getUpdateRowOptions())});t.element.append(o)}},INTEGER:{read:function e(t,i){$(t,oe(D).read({value:i}))},readonly:function e(t,i){ae(D).read(t,i)},edit:function e(t,i){ae(t,P).edit(t,i)}},PERCENT:{read:function e(t,i){ae(t,P).read(t,i,"","%")},readonly:function e(t,i){ae(R).read(t,i)},edit:function e(t,i){ae(t,P).edit(t,i)}},CURRENCY:{read:function e(t,i){let n=t.metadata,o=t.options?t.options.decimalPlaces:null,a,s=t.row,r;if(o||o==="0"||o===0){a=parseInt(o,10)}else if(n&&n.scale){a=n.scale}if(!a||!l.isNumber(a)){a=0}if(i!==""&&s&&l.isMultiCurrencyOrganization){r=l.getRowCurrency({row:s,model:t.model,field:t.id})}$(t,oe(S).read({value:i,decimalPlaces:a,valueCurrencyCode:r}))},readonly:function e(t,i){ae(S).read(t,i)},edit:function e(t,i){ae(t,P).edit(t,i)}},BOOLEAN:{read:function e(t,i){let n=s("<div>").addClass("nx-fieldtext").css("padding","0px"),o=s('<input type="checkbox">').prop({checked:i,disabled:"true"});n.append(o);if(t.editable&&t.mode!=="readonly")n.append('<div class="focusbox" tabindex="0"/>');t.element.append(n)},readonly:function e(t,i){ae(x).read(t,i)},edit:function e(t,i){if(i==="true")i=true;t.element.append(oe(x).edit({value:i,onChange:function e(i){t.model.updateRow(t.row,t.id,i,{initiatorId:t._GUID})}}))}},DATE:{read:function e(t,i){$(t,d.makeFormattedDate(i))},readonly:function e(t,i){ae(T).read(t,i)},edit:function e(t,i){let n=t.options;t.element.append(oe(T).edit({value:i,renderas:n.type,showMonthPicker:n.showMonthPicker,showYearPicker:n.showYearPicker,yearPickerRange:n.yearPickerRange,onChange:function e(i){t.model.updateRow(t.row,t.id,i,t._getUpdateRowOptions())}}))}},DATETIME:{read:function e(t,i){$(t,d.makeFormattedLongDateTime(i))},readonly:function e(t,i){ae(A).read(t,i)},edit:function e(t,i){let n=t.options;t.element.append(oe(A).edit({value:i,showMonthPicker:n.showMonthPicker,showYearPicker:n.showYearPicker,yearPickerRange:n.yearPickerRange,minuteIncrement:n.minuteIncrement,onChange:function e(i){t.model.updateRow(t.row,t.id,i,t._getUpdateRowOptions())}}))}},EMAIL:{read:function e(t,i){if(!i&&i!==0)i="";if(i!==""){i=m(i);i='<a href="mailto:'+i+'">'+i+"</a>"}$(t,i)},edit:function e(t,i){ae(t,H).edit(t,i,"email")},readonly:function e(t,i){ae(E).read(t,i)}},LOCATION:{read:function e(t,i){let n=".",o="DECIMAL",a,r="",l,d,c=t.options.type||t.metadata.type||o,u;if(i){l=i.latitude;d=i.longitude;if(c===o){u=function e(t){let i=(t+"").split(n);return s.number(t,i.length>1?i[1].length:1,n,"")+""};l=u(l);d=u(d);if(l)r+=l;r+=" ";if(d)r+=d}else{a="&#39;";u=function e(t,i){let n=t<0,o=Math.abs(t),s=Math.floor(o),r=(o-s)*60,l=Math.floor(r),d=Math.round((r-l)*60);return s+"&deg;"+l+a+d+a+a+(i?n?"S":"N":n?"W":"E")};l=u(l,true);d=u(d);if(l)r+=l;r+=" ";if(d)r+=d}}$(t,r)},edit:function t(i){let n=i.row,o=i.model,a=i.id,s=a.substring(0,a.length-1),r=s+"Latitude__s",l=s+"Longitude__s";let d=new e.ui.Field(n,o,{fieldId:r});let c=new e.ui.Field(n,o,{fieldId:l});d.render();c.render();i.element.append(d.element,c.element)},readonly:function e(t,i){ae(N).read(t,i)}},PHONE:{read:function e(t,i){if(window.sforce&&i&&r.showClick2Dial){ae(t,H).read(t,i);let e=r.click2Dial;if(!e)e=Q;t.element.css("white-space","nowrap").append(s('<div class="sk-click2dial-wrapper">').append(s('<span class="ui-icon sk-icon sk-icon-phone inline">').attr("title","Click to dial")).on("click.skuid",function(){e(t)}).css("cursor","pointer"));t.element.children().css({display:"inline-block"})}else{let e;if(!i&&i!=="0"){i="";e=false}else{i=i+"";e=i.replace(/\D+/g,"")}if(i!==""){i=m(i);if(e||e==="0"){i='<a href="tel:'+e+'">'+i+"</a>"}}$(t,i)}},edit:function e(t,i){ae(t,H).edit(t,i,"tel")},readonly:function e(t,i){ae(L).read(t,i)}},PICKLIST:{read:function e(t,i,n){let o=s.extend({},t.options,n),a=t.metadata&&t.metadata.nameField,r=a?t.model.getDataSourceType():null,l=i,d,c,u=n&&n.picklistEntries||o.entries||o.picklistEntries,p,f;if(i===true||i===false){i=i+"";l=i}if(!u||u.length==0)u=t.getValidPicklistEntries();if(o.type==="RADIO_BUTTONS"){p=s("<div>").addClass("nx-fieldtext").css("padding","0px");f=ee(i,u,{makeNoneOption:!t.required||o.addNoneOption,mode:t.mode,buttonSetName:t.id+"_"+t._GUID,noneLabel:o.noneLabel});s.each(f,function(){p.append(this)});if(t.editable&&t.mode!=="readonly")p.append('<div class="focusbox" tabindex="0"/>');t.element.append(p)}else{if(u&&u.length){s.each(u,function(){if(this.value==i){if(this.label){l=this.label}return false}})}if(a&&r&&r.getNameFieldURLForTextField){c=r.getNameFieldURLForTextField(t,i,l);if(c){d=true;l=c}}$(t,l?d?l:m(l):"")}},readonly:function e(t,i,n){ae(B).read(t,i,n)},edit:function e(t,i,n){let o=s.extend({},t.options,n);if(i===true||i===false){i=i+""}t.element.append(oe(B).edit({addNoneOption:t.options.addNoneOption,buttonSetName:t.id+"_"+t._GUID,entries:o.picklistEntries||t.getValidPicklistEntries(),mode:t.mode,noneLabel:t.options.noneLabel,onChange:function e(i){t.model.updateRow(t.row,t.id,i,{initiatorId:t._GUID})},renderas:t.options.type,required:t.required,value:i}))}},MULTIPICKLIST:{read:function e(t,i,n,o){const a=s.extend({},t.options,o);let r=o&&o.picklistEntries||a.entries||a.picklistEntries;if(!n)n=";";let l=s("<div>").addClass("nx-fieldtext"),d=i?i:"",c=d.split(n);if(!r){r=t.getValidPicklistEntries()}if(t.options.type==="CHECKBOXES"){l.css("padding","0px");s.each(r,function(e,t){if(t.value){let e="";if(s.inArray(t.value,c)!==-1&&t.value!==""){e='checked="yes"'}let i=s("<div>").addClass("nx-checkboxwrapper");i.append(s("<input "+e+' type="checkbox" value="'+t.value+'">').addClass("nx-checkbox").prop("disabled",true));i.append(s("<div>"+m(t.label)+"</div>").addClass("nx-checkboxlabel"));l.append(i)}})}else{if(d){let e={},t=[];s.each(r,function(t,i){e[i.value]=i.label});s.each(c,function(){t.push(e[this]||this)});l.html(m(t.join(", ")))}else{l.html("")}}if(t.editable&&t.mode!=="readonly")l.append('<div class="focusbox" tabindex="0"/>');t.element.append(l)},readonly:function e(t,i,n,o){ae(F).read(t,i,n,o)},edit:function e(t,i,n){let o=";";n=n||{};if(l.isString(n)){o=n;n={}}else{o=n.valueDelimiter||o}let a=t.options;if(a.type!=="CHECKBOXES"){t.disableBlur=true}t.element.append(oe(F).edit({value:i,defaultValue:t.metadata.defaultValue,entries:n.picklistEntries||t.getValidPicklistEntries(),renderas:a.type,onChange:function e(i){t.model.updateRow(t.row,t.id,i,{initiatorId:t._GUID})},valueDelimiter:o,checkboxSetName:t.id+"_"+t._GUID,maxSelected:a.maxSelected,required:t.required,selectedList:a.selectedList}))}},COMBOBOX:{read:function e(t,i){ae(t,B).read(t,i)},readonly:function e(t,i){ae(k).read(t,i)},edit:function t(i,n){i.element.off("click.skuidLinkHandler");function o(){let e=i.element.find(".nx-error-inline");if(!e.length){e=s("<div>").addClass("nx-error-inline").appendTo(i.element)}return e}function a(t){n=t;let o=i.model.updateRow(i.row,i.id,n,{initiatorId:i._GUID});if(l.runningTests()){e.events.publish("combobox.onchange")}return o}i.element.append(oe(k).edit({entries:function e(){return i.getValidPicklistEntriesAccountingForDataSource()},getErrorContainer:o,onChange:a,parentElem:s("<div>").appendTo(i.element),restrictToEntries:i.metadata.limitEntries||false,showLabelInTextInput:true,value:n}))}},ARRAY:{read:function e(t,i,n){if(!n)n={};let o=s("<div>").addClass("nx-fieldtext").appendTo(t.element),a=t.row,r=t.model.getFieldValue(t.row,t.id,true),d,c,u=t.options.delimiter,p=n.dataPath||t.metadata.dataPath;if(!u)u="";if(r){d=r;if(p){d=l.getObjectProperty(d,p)}c=d.length;s.each(d,function(e,i){let n=t.model.mergeRow(i,t.options.template,{parentRow:a,childRelName:t.id,allowHTML:t.options&&t.options.allowHTML,registerFields:false});n.css("display","inline");o.append(n);if(e+1!==c){o.append("<span>"+u+"</span>")}})}t.element.append(o)},readonly:function e(t,i){ae(w).read(t,i)}},CHILDREL:{read:function e(t,i){ae(t,w).read(t,i,{dataPath:t.metadata.dataPath||"records"})},readonly:function e(t,i){ae(W).read(t,i)}},COMBO:{read:function e(t){let i=s("<div>").addClass("nx-fieldtext").appendTo(t.element),n=t.options;i.append(t.model.mergeRow(t.row,n.template,{allowHTML:n&&n.allowHTML,registerFields:false}));if(t.editable&&t.mode!=="readonly")i.append('<div class="focusbox" tabindex="0"/>');t.element.append(i).off("dblclick.skuid mouseenter.skuid mouseleave.skuid").css("cursor","auto")},readonly:function e(t,i){ae(G).read(t,i)},edit:function e(t,i){ae(G).read(t,i);let n=t.options,o=t.element,a=o.find(".focusbox").prop("tabindex","-1"),d=s('<input type="text">').addClass("nx-visuallyhidden"),c;a.before(d);c=function e(){let i,c,u,p=n.editModeBehavior==="custompopup",f=[{text:h("Done"),icons:{primary:"sk-icon-save sk-icon"},click:function e(){s(this).dialog("close")}}];function m(){s(this).click().find(":input").first().focus()}function g(){let e=o.find("input");let t=o.find(".focusbox");if(e.length){if(e[0]===d[0]){e.attr("data-preventaction","true")}}if(t.length){if(t[0]===a[0]){t.attr("data-preventaction","true")}}}function b(){let e=o.find("input");let t=o.find(".focusbox");if(e.length){if(e[0]!==d[0]){e.attr("data-preventaction","true").focus()}}else{if(t[0]!==a[0]){t.attr("data-preventaction","true").focus()}}setTimeout(function(){e.removeAttr("data-preventaction");t.removeAttr("data-preventaction")},100)}if(p){u=l.createPopupFromPopupXML(n.editModePopupXML,t,{open:m,close:b,beforeClose:g,buttons:f,modal:true,resizable:true})}else{i=t.model.getRowMergeResult(t.row,n.template);c=i.fields;u=s('<div title="'+n.label+'" class="nx-editor"/>');u.append(r.createFieldSet(c,{editor:t.editor}));u.dialog({resizable:true,modal:true,width:450,open:m,beforeClose:g,close:function e(){b();u.dialog("destroy").remove()},buttons:f})}t.editor.editModePopup=u};d.on("focus.skuid",function(){let e=s(this);if(e.attr("data-preventaction")){e.removeAttr("data-preventaction")}else{c()}});o.on("mouseenter.skuid mouseleave.skuid","> .nx-fieldtext",function(e){if(e.type==="mouseenter"){s(this).append(s("<div>").addClass("nx-edithover sk-icon-edit sk-icon inline").click(function(e){c();e.stopPropagation()}))}else{s(this).find("div.nx-edithover").remove()}}).css("cursor","pointer")}},CUSTOM:{read:function t(i,n){let o=e.snippet.get(i.options.snippet);if(o){o(i,J(i,n))}},readonly:function e(t,i){ae(I).read(t,i)},edit:function e(t,i){ae(I).read(t,i)}},FILE:{read:function e(t){let i=s("<div>").addClass("nx-fieldtext").css({padding:"0px","min-height":"26px"}).appendTo(t.element);new l.FileComponent(i,{model:t.model,row:t.row,displayAs:"filename",storeAs:"field",idField:t.id,deleteable:false,editable:false,_GUID:t._GUID})},readonly:function e(t,i){ae(Y).read(t,i)},edit:function t(i,n){if(e.offline.networkDown()){ae(Y).read(i,n);return false}let o=s("<div>").addClass("nx-fieldtext").appendTo(i.element);if(i.model.isRowNew(i.row)){o.css({"font-size":"8pt",color:"#aaa"});o.text("Save record before uploading files.")}else{o.attr("id",l.generateGUID()).css("padding","0px");new l.FileComponent(o,{model:i.model,row:i.row,displayAs:"filename",storeAs:"field",idField:i.id,deleteable:true,editable:true,_GUID:i._GUID})}}},REFERENCE:{read:function e(t,i){let n=!i&&i!==0?"":m(t.calculateReferenceText()),o,a=t.model.getDataSourceType();if(t.metadata.ref==="skuid__Image__c"){ae(t,Y).read(t,i);return false}n=l.nl2br(n);if(a&&a.getNameFieldURLForReferenceField){o=a.getNameFieldURLForReferenceField(t,i,n)}$(t,o||n)},readonly:function e(t,i){ae(j).read(t,i)},edit:function t(i,n){if(e.offline.networkDown()){ae(j).read(i,n);return false}if(i.metadata.ref==="skuid__Image__c"){ae(i,Y).edit(i,n);return false}if(!n&&n!==0)n="";let o=i.element,r=i.options,d=s("<input>"),c=i.metadata.ref,u=i.metadata.referenceTo,p=c&&c.indexOf(",")!=-1,f=i.metadata.dataSourceName?e.dataSource.getDataSource(i.metadata.dataSourceName):i.model.getDataSource(),b=f.getDataSourceType(),v=b&&b.getReferenceHandler&&b.getReferenceHandler(),y=s('<div class="ui-autocomplete-container"></div>'),C,_,w,x,k,S;if(s.isPlainObject(n)){x=true;s.each(n,function(e,t){if(!(l.isUndefined(t)||t===null)){x=false;return false}});if(x){n=""}}d.val(n);if(!v){ae(j).read(i,n);return false}let I=function e(t){let n=l.extractFieldsFromTemplate(r.searchTemplate||r.template),o=l.calculateReferenceMerges({targetObject:t,fieldMetadata:i.metadata,model:i.model});_=s("<div>").append(o.merges).text();w=[];s.each(n,function(e,t){w.push({id:i.metadata.rel&&t.indexOf(i.metadata.rel+".")===0?t.slice(i.metadata.rel.length+1):t})})};o.data("recordId",n);if(p){let e;i.element.addClass("nx-polymorphic");C=s("<select>").on("change",function(){e=C.val();o.data("selectedSObject",C.find('option[value="'+e+'"]').attr("data-sobject"));o.data("selectedSObjectPrefix",e);o.data("recordId","");o.data("recordLabel","");I(e);i.model.updateRow(i.row,i.id,null,{initiatorId:i._GUID});let t=C.next();t.val("");o.data("recordId","");o.data("recordLabel","");if(r.type==="REFPICK"){i.getReferenceOptions("",{searchFields:S(),returnFields:k(),referencedObject:o.data("selectedSObject")}).then(A)}t.focus()});let t={},n=[];s.each(u,function(e,i){t[i.label+"_"+i.objectName]=i});s.each(Object.keys(t).sort(),function(e,i){n.push(t[i])});s.each(n,function(e,t){C[t.objectName==="User"&&l.endsWith(i.id,"OwnerId")?"prepend":"append"](s("<option>").attr({value:t.keyPrefix,"data-sobject":t.objectName}).text(t.label))});if(o.data("recordId")&&o.data("recordId")!="undefined"){let e=i.model.getValueKeyPrefix(o.data("recordId"));if(e&&e.length===3){o.data("selectedSObjectPrefix",e)}}if(o.data("selectedSObjectPrefix")){C.val(o.data("selectedSObjectPrefix"))}let a=C.find('option[value="'+C.val()+'"]');if(a.length===0)a=C.find("option").first();o.data("selectedSObject",a.attr("data-sobject"))}else{o.data("selectedSObject",c)}I(o.data("selectedSObject"));o.data("recordLabel",o.data("recordId")===""?"":_);k=function e(){let t=i.options.returnFields;if(!t||!t.length){t=[];s.each(w,function(e,i){i.showInSearchDialog=true;t.push(i)})}return t};S=function e(){let t=i.options.searchFields;if(!t||!t.length){if(w&&w.length){t=[];s.each(w,function(e,i){t.push(i)})}else{t=[{id:f.getNameField(o.data("selectedSObject")),displaytype:V,filterable:true}]}}return t};let T=function e(t,n,a){if(!t&&t!==0&&t!==""){return}o.data("recordId",t);let l=f.getNameField&&f.getNameField(o.data("selectedSObject")),d=a||v&&v.getRowFromReferenceValue(n,t,i.metadata)||n.getRowById(t);if(d){let e=n.getRowMergeResult(d,r.searchTemplate||r.template||"{{"+l+"}}",{registerFields:false}),t=e.merges.text();o.data("recordLabel",t)}if(d&&l&&l!=="Name"&&l!=="Id"&&!("Name"in d)&&l in d){d.Name=d[l]}let c={},u=t;if(i.metadata&&d&&s.inArray(i.metadata.displaytype,[j,M])===-1&&d.__templabel){u=d.__templabel}c[i.id]=u;if(u||u===0){c[i.metadata.rel]=d}i.model.updateRow(i.row,c,{initiatorId:i._GUID})};let A=function e(t){d.empty();if(!i.element.hasClass("disabled")){d.prop("disabled",false)}let l=false;if(!i.required||!t.data.length||r.addNoneOption){l=!n;d.append(s("<option>").val("").text(Object(a["a"])(r.noneLabel,{model:i.model})).prop("selected",!n))}let c=f.getNameField(o.data("selectedSObject")),u=i.metadata.originalDisplayType,p=u===O||u===D||u===P,h=r.searchTemplate||r.template||"{{"+c+"}}";s.each(t.data,function(e,o){let a=v?v.getReferenceValue(o,i.metadata):o.Id;if(!l)l=n+""===a+"";let r=t.mergeRow(o,h,{registerFields:false}).text();d.append(s("<option>").val(a).text(r).prop("selected",n===a))});if(!l&&(n||n===0)){d.append(s("<option>").val(n).text(o.data("recordLabel")).prop("selected",true))}if(i.required&&!(n||n===0)){T(p?parseInt(d.val(),10):d.val(),t,null)}d.off("change.skuid").on("change.skuid",function(){let e=s(this).val();if(p)e=parseInt(e,10);T(e,t,null)})};if(r.type==="REFPICK"){d=s("<select>").prop("disabled",true).append(s('<option value="">').text(n?_:Object(a["a"])(r.noneLabel,{model:i.model})));i.getReferenceOptions("",{searchFields:S(),returnFields:k(),referencedObject:o.data("selectedSObject")}).then(A)}else{d=e.ui.getRenderer("AUTOCOMPLETE").edit({minLength:i.metadata.minInputLength||2,source:function e(t,n,a,l){a();let d,c=u&&u[0]&&u[0].objectName,p=function e(){i.getReferenceOptions(t.term,{searchFields:S(),returnFields:k(),relMetadata:d,referencedObject:o.data("selectedSObject")}).then(function(e,t){if(t&&t.isStale){n([]);return}o.data("tempmodel",e);let i=f.getNameField&&f.getNameField(o.data("selectedSObject")),a=r.searchTemplate||r.template||"{{"+i+"}}",d=a.indexOf("Name}}")!==-1;s.each(e.data,function(){if(d&&!this.Name&&i in this){this.Name=this[i]}this.__templabel=o.data("tempmodel").mergeRow(this,a,{registerFields:false}).text()});n(e.data);if(!t||t&&t.isFinal){l()}})};if(i.options.searchFields&&c){f.getEntityMetadata({entities:[c]}).then(function(e){d=e._unwrap();p()})}else{d={};p()}},onFocus:function e(t,i){d.val(i.item.__templabel);return false},onChange:function e(t,n){let a=v?v.getReferenceValue(n.item,i.metadata):n.item.Id;T(a,o.data("tempmodel"),n.item);let s=i.element.find(".nx-error-inline");d=i.element.find("input");s&&i.element.prepend(s);d.focus();return false},onClose:function e(){d.focus()},onBlur:function e(){setTimeout(function(){d.val(o.data("recordLabel"))},200)},onClear:function e(){let t=i.model.getFieldValue(i.row,i.id,true);if(t!==null&&t!==undefined){i.model.updateRow(i.row,i.id,null,{initiatorId:i._GUID});o.data("recordId","");o.data("recordLabel","")}},optionRenderer:function e(t,i){return s("<li></li>").data("ui-autocomplete-item",i).html("<a>"+m(i.__templabel)+"</a>").appendTo(t)},appendTo:undefined,value:o.data("recordLabel")||n,parentElem:o});y.insertAfter(o.children().last());let t=o.find(".ui-icon-search");t.on("click.skuid",function(t){t.stopPropagation();if(i.element.hasClass("disabled")){return}let n,a,c,u,p,f,m,b=function e(){f.unregister&&f.unregister();if(g(m.id,"_TempModel_")){m.unregister()}},y;e.snippet.registerSnippet("skuid.__referencepopupselect",function(e){let t,n;if(e.row)t=e.row;else if(e.component&&e.component.row)t=e.component.row;else if(e.item)t=e.item.row;if(e.model)n=e.model;else if(e.component&&e.component.list)n=e.component.list.model;let o=v?v.getReferenceValue(t,i.metadata):t.Id;T(o,n,t);d=i.element.find("input");b();d.focus()});u=o.data("selectedSObject");if(i.options&&i.options.optionsource==="model"){y=e.$M(i.options.optionmodel);if(y&&y.objectName===u&&y.label){u=y.label}}else if(i.metadata&&i.metadata.referenceTo&&i.metadata.referenceTo.length){s.each(i.metadata.referenceTo,function(){if(this.objectName===u){if(this.label){u=this.label}else{s.each(e.model.list(),function(){if(this.objectName===u&&this.label){u=this.label;return false}})}return false}})}if(!u&&i.metadata&&i.metadata.label){u=i.metadata.label}p=h("Select")+" "+l.encodeHTML(u+"");n=s("<div>").attr("title",h("Select")+" "+u);c=s("<div>").css("min-height","300px");n.append(c);i.getReferenceOptions(d.data("uiAutocomplete").term,{searchFields:S(),returnFields:k(),referencedObject:o.data("selectedSObject")}).then(function(t){if(!e.$M(t.id)){t.register()}m=t;s.each(m.fields,function(){if(this.nameField){this.nameField=false}});let n,o=r.tokenizeSearch?' tokenizesearch="true"':"",a=t.getNameField(),l=k(a),d=[],u=S(a),h="";if(l&&l.length){s.each(l,function(e,t){if(t.showInSearchDialog){d.push(t)}})}else{d.push({id:a})}if(u&&u.length||r.useSOSLSearch){h+="<searchfields"+(r.useSOSLSearch?' usesosl="true"':"")+(r.SOSLFields?' soslfields="'+r.SOSLFields+'"':"")+">";if(u&&u.length){s.each(u,function(){h+='<searchfield field="'+this.id+'"/>'})}h+="</searchfields>"}else{h=""}n='<skootable model="'+t.id+'"'+o+' pagesize="'+(i.options.pageSize||5)+'" mode="readonly" searchbox="true" showsavecancel="false" createrecords="false">'+"<fields>";s.each(d,function(e,t){n+='<field id="'+t.id+'" allowordering="true"';if(t.label){n+=">"+t.label+"</field>"}else{n+="/>"}});n+="</fields>"+"<rowactions>"+'<action type="custom" label="'+p+'" icon="sk-icon-add-reference" snippet="skuid.__referencepopupselect"/>'+"</rowactions>"+h+"</skootable>";f=e.component.factory({xmlDefinition:n});c.append(f.element);c.append(f.element);c.find(".searchbox").focus().select()});a=[{icons:{primary:"ui-button-icon-primary ui-icon sk-icon-remove-reference sk-icon inline"},text:"Clear Value",click:function e(){i.model.updateRow(i.row,i.id,null,{initiatorId:i._GUID});o.data("recordId","");o.data("recordLabel","");b();d.val("")}},{icons:{primary:"ui-button-icon-primary ui-icon sk-icon-cancel sk-icon inline"},text:h("Cancel"),click:function e(){b()}}];n.dialog({close:function e(){b()},modal:true,resizable:true,width:"90%",buttons:a});n.parent(".ui-dialog").addClass("sk-dialog-autocomplete");s(".ui-widget-overlay").addClass("sk-overlay-autocomplete")})}o.addClass("editable");if(C){let e=s("<label>").addClass("nx-basicfieldeditor-item-select-label");e.append(C);o.append(e,d)}else{o.append(d)}}},ID:{read:function e(t,i){ae(t,H).read(t,i)},readonly:function e(t,i){ae(M).read(t,i)},edit:function e(t,i){if(t.model.isRowNew(t.row)){i=null}t.metadata.ref=t.model.objectName;ae(t,j).edit(t,i)}},STRING:{read:function e(t,i){ae(t,H).read(t,i)},readonly:function e(t,i){ae(V).read(t,i)},edit:function e(t,i){ae(t,H).edit(t,i)}},IMAGE:{read:function t(i){let n=i.options,o=e.component.getById(n.parentComponentId),a=e.utils.makeXMLDoc("<image/>").attr({alt:i.model.getRowMergeResult(i.row,n.alt||"",{asText:true}),url:i.row[i.id]||i.model.getRowMergeResult(i.row,n.url||"",{asText:true}),model:i.model.id,dataSource:i.model.dataSourceName,source:"url"}),s,r;if(o){s=o.createChildComponent(a,i.element)}else{s=e.component.factory({element:i.element,xmlDefinition:a})}if(n.height){s.element.css({height:n.height,overflow:"hidden"});r=s.element.children().first();if(n.fill){r.addClass("nx-field-image-fill")}r.addClass("nx-field-image-withheight").attr("tabindex",0)}i.subComponents.push(s)},readonly:function e(t,i){ae(X).read(t,i)},edit:function e(t,i){ae(X).read(t,i)}},ANYTYPE:{read:function e(t,i){ae(t,l.getDisplayTypeOfEntity(i))[t.mode](t,i)},readonly:function e(t,i){ae(_).read(t,i)},edit:function e(t,i){ae(_).read(t,i)}}};s.each(v,function(t,i){i.loading=function(t){ae(t,H).read(t,e.$L("Loading"))}});function oe(t){t||(t={});let i=e.platform,n;if(l.isString(t)){n=t}else{n=t.displayType}let o=i.getRenderers&&i.getRenderers();if(o&&n in o){return o[n]}else if(n in b){return b[n]}}function ae(e,t){e||(e={});let i,n,a;if(l.isString(e)){i=e;n=t}else if(e instanceof r.Field||l.isString(t)){a=e;i=t}else if(e.displayType){i=e.displayType;n=e.dataSource;a=e.field}if(!n&&a){n=a.model.getDataSource()}if(!i&&a){i=a.metadata.displaytype}let s=n&&n.getFieldRenderers();if(s&&i in s){return s[i]}else if(i in v){return v[i]}else{l.log('Unable to find an appropriate renderer for "'+i+'"',o["n"].WARNING);return v[H]}}r.renderers=b;r.getRenderer=oe;r.fieldRenderers=v;r.getFieldRenderer=ae;r.click2Dial=Q},46:function(e,t,i){var n,o,a;(function(s){if(true){!(o=[i(1),i(12)],n=s,a=typeof n==="function"?n.apply(t,o):n,a!==undefined&&(e.exports=a))}else{}})(function(e){var t=0;var i=Array.prototype.slice;e.cleanData=function(t){return function(i){var n,o,a;for(a=0;(o=i[a])!=null;a++){try{n=e._data(o,"events");if(n&&n.remove){e(o).triggerHandler("remove")}}catch(e){}}t(i)}}(e.cleanData);e.widget=function(t,i,n){var o,a,s;var r={};var l=t.split(".")[0];t=t.split(".")[1];var d=l+"-"+t;if(!n){n=i;i=e.Widget}if(e.isArray(n)){n=e.extend.apply(null,[{}].concat(n))}e.expr[":"][d.toLowerCase()]=function(t){return!!e.data(t,d)};e[l]=e[l]||{};o=e[l][t];a=e[l][t]=function(e,t){if(!this._createWidget){return new a(e,t)}if(arguments.length){this._createWidget(e,t)}};e.extend(a,o,{version:n.version,_proto:e.extend({},n),_childConstructors:[]});s=new i;s.options=e.widget.extend({},s.options);e.each(n,function(t,n){if(!e.isFunction(n)){r[t]=n;return}r[t]=function(){function e(){return i.prototype[t].apply(this,arguments)}function o(e){return i.prototype[t].apply(this,e)}return function(){var t=this._super;var i=this._superApply;var a;this._super=e;this._superApply=o;a=n.apply(this,arguments);this._super=t;this._superApply=i;return a}}()});a.prototype=e.widget.extend(s,{widgetEventPrefix:o?s.widgetEventPrefix||t:t},r,{constructor:a,namespace:l,widgetName:t,widgetFullName:d});if(o){e.each(o._childConstructors,function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,a,i._proto)});delete o._childConstructors}else{i._childConstructors.push(a)}e.widget.bridge(t,a);return a};e.widget.extend=function(t){var n=i.call(arguments,1);var o=0;var a=n.length;var s;var r;for(;o<a;o++){for(s in n[o]){r=n[o][s];if(n[o].hasOwnProperty(s)&&r!==undefined){if(e.isPlainObject(r)){t[s]=e.isPlainObject(t[s])?e.widget.extend({},t[s],r):e.widget.extend({},r)}else{t[s]=r}}}}return t};e.widget.bridge=function(t,n){var o=n.prototype.widgetFullName||t;e.fn[t]=function(a){var s=typeof a==="string";var r=i.call(arguments,1);var l=this;if(s){if(!this.length&&a==="instance"){l=undefined}else{this.each(function(){var i;var n=e.data(this,o);if(a==="instance"){l=n;return false}if(!n){return e.error("cannot call methods on "+t+" prior to initialization; "+"attempted to call method '"+a+"'")}if(!e.isFunction(n[a])||a.charAt(0)==="_"){return e.error("no such method '"+a+"' for "+t+" widget instance")}i=n[a].apply(n,r);if(i!==n&&i!==undefined){l=i&&i.jquery?l.pushStack(i.get()):i;return false}})}}else{if(r.length){a=e.widget.extend.apply(null,[a].concat(r))}this.each(function(){var t=e.data(this,o);if(t){t.option(a||{});if(t._init){t._init()}}else{e.data(this,o,new n(a,this))}})}return l}};e.Widget=function(){};e.Widget._childConstructors=[];e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:false,create:null},_createWidget:function(i,n){n=e(n||this.defaultElement||this)[0];this.element=e(n);this.uuid=t++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=e();this.hoverable=e();this.focusable=e();this.classesElementLookup={};if(n!==this){e.data(n,this.widgetFullName,this);this._on(true,this.element,{remove:function(e){if(e.target===n){this.destroy()}}});this.document=e(n.style?n.ownerDocument:n.document||n);this.window=e(this.document[0].defaultView||this.document[0].parentWindow)}this.options=e.widget.extend({},this.options,this._getCreateOptions(),i);this._create();if(this.options.disabled){this._setOptionDisabled(this.options.disabled)}this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){var t=this;this._destroy();e.each(this.classesElementLookup,function(e,i){t._removeClass(i,e)});this.element.off(this.eventNamespace).removeData(this.widgetFullName);this.widget().off(this.eventNamespace).removeAttr("aria-disabled");this.bindings.off(this.eventNamespace)},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var n=t;var o;var a;var s;if(arguments.length===0){return e.widget.extend({},this.options)}if(typeof t==="string"){n={};o=t.split(".");t=o.shift();if(o.length){a=n[t]=e.widget.extend({},this.options[t]);for(s=0;s<o.length-1;s++){a[o[s]]=a[o[s]]||{};a=a[o[s]]}t=o.pop();if(arguments.length===1){return a[t]===undefined?null:a[t]}a[t]=i}else{if(arguments.length===1){return this.options[t]===undefined?null:this.options[t]}n[t]=i}}this._setOptions(n);return this},_setOptions:function(e){var t;for(t in e){this._setOption(t,e[t])}return this},_setOption:function(e,t){if(e==="classes"){this._setOptionClasses(t)}this.options[e]=t;if(e==="disabled"){this._setOptionDisabled(t)}return this},_setOptionClasses:function(t){var i,n,o;for(i in t){o=this.classesElementLookup[i];if(t[i]===this.options.classes[i]||!o||!o.length){continue}n=e(o.get());this._removeClass(o,i);n.addClass(this._classes({element:n,keys:i,classes:t,add:true}))}},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e);if(e){this._removeClass(this.hoverable,null,"ui-state-hover");this._removeClass(this.focusable,null,"ui-state-focus")}},enable:function(){return this._setOptions({disabled:false})},disable:function(){return this._setOptions({disabled:true})},_classes:function(t){var i=[];var n=this;t=e.extend({element:this.element,classes:this.options.classes||{}},t);function o(o,a){var s,r;for(r=0;r<o.length;r++){s=n.classesElementLookup[o[r]]||e();if(t.add){s=e(e.unique(s.get().concat(t.element.get())))}else{s=e(s.not(t.element).get())}n.classesElementLookup[o[r]]=s;i.push(o[r]);if(a&&t.classes[o[r]]){i.push(t.classes[o[r]])}}}this._on(t.element,{remove:"_untrackClassesElement"});if(t.keys){o(t.keys.match(/\S+/g)||[],true)}if(t.extra){o(t.extra.match(/\S+/g)||[])}return i.join(" ")},_untrackClassesElement:function(t){var i=this;e.each(i.classesElementLookup,function(n,o){if(e.inArray(t.target,o)!==-1){i.classesElementLookup[n]=e(o.not(t.target).get())}})},_removeClass:function(e,t,i){return this._toggleClass(e,t,i,false)},_addClass:function(e,t,i){return this._toggleClass(e,t,i,true)},_toggleClass:function(e,t,i,n){n=typeof n==="boolean"?n:i;var o=typeof e==="string"||e===null,a={extra:o?t:i,keys:o?e:t,element:o?this.element:e,add:n};a.element.toggleClass(this._classes(a),n);return this},_on:function(t,i,n){var o;var a=this;if(typeof t!=="boolean"){n=i;i=t;t=false}if(!n){n=i;i=this.element;o=this.widget()}else{i=o=e(i);this.bindings=this.bindings.add(i)}e.each(n,function(n,s){function r(){if(!t&&(a.options.disabled===true||e(this).hasClass("ui-state-disabled"))){return}return(typeof s==="string"?a[s]:s).apply(a,arguments)}if(typeof s!=="string"){r.guid=s.guid=s.guid||r.guid||e.guid++}var l=n.match(/^([\w:-]*)\s*(.*)$/);var d=l[1]+a.eventNamespace;var c=l[2];if(c){o.on(d,c,r)}else{i.on(d,r)}})},_off:function(t,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;t.off(i).off(i);this.bindings=e(this.bindings.not(t).get());this.focusable=e(this.focusable.not(t).get());this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function i(){return(typeof e==="string"?n[e]:e).apply(n,arguments)}var n=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t);this._on(t,{mouseenter:function(t){this._addClass(e(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t);this._on(t,{focusin:function(t){this._addClass(e(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,i,n){var o,a;var s=this.options[t];n=n||{};i=e.Event(i);i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase();i.target=this.element[0];a=i.originalEvent;if(a){for(o in a){if(!(o in i)){i[o]=a[o]}}}this.element.trigger(i,n);return!(e.isFunction(s)&&s.apply(this.element[0],[i].concat(n))===false||i.isDefaultPrevented())}};e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(n,o,a){if(typeof o==="string"){o={effect:o}}var s;var r=!o?t:o===true||typeof o==="number"?i:o.effect||i;o=o||{};if(typeof o==="number"){o={duration:o}}s=!e.isEmptyObject(o);o.complete=a;if(o.delay){n.delay(o.delay)}if(s&&e.effects&&e.effects.effect[r]){n[t](o)}else if(r!==t&&n[r]){n[r](o.duration,o.easing,a)}else{n.queue(function(i){e(this)[t]();if(a){a.call(n[0])}i()})}}});return e.widget})},47:function(t,i,n){"use strict";n.d(i,"a",function(){return o});n.d(i,"b",function(){return a});function o(t){const i=e.builder;let n=i.core.getBuilderByTagName(t.tagName);if(!n){const e=n=>{const o=i.core.getBuilderByTagName(n.tagName);if(o&&o.getChildBuilders()[t.tagName]){let e=o.resolveChildBuilder(t);if(e)return e;return o.getChildBuilders()[t.tagName]}return n.parentElement?e(n.parentElement):null};return t.parentElement?e(t.parentElement):null}return n}function a(t){const i=Array.from(e.$(t).parents());let n;i.some(e=>{const t=o(e);if(t&&t.providesContext){n=e.getAttribute(t.modelAttributeName||"model");return true}});return n}},48:function(t,i,n){"use strict";n.d(i,"b",function(){return c});n.d(i,"c",function(){return f});n.d(i,"a",function(){return m});let o=e.$,a=e.builder.ink,s=e.builder.core,r=e.utils.makeXMLDoc;const l=e=>[{value:"flex-start",label:e?"Top":"Left"},{value:"center",label:e?"Middle":"Center"},{value:"flex-end",label:e?"Bottom":"Right"}];const d=e=>[{value:"flex-start",label:e?"Left":"Top"},{value:"center",label:e?"Center":"Middle"},{value:"flex-end",label:e?"Right":"Bottom"},{value:"space-between",label:"Space between"},{value:"space-around",label:"Space around"},{value:"stretch",label:"Stretch"}];function c(t={}){let i=t.component,n=i.get("xmlState");t=Object.assign({spacing:false,styleVariants:true,size:false},t);function o(e){let t=n.children("styles");if(!t.length){t=r("<styles/>").appendTo(n)}let o=t.children("spacing");if(!o.length){o=r("<spacing/>").appendTo(t)}if(e&&this&&this.id){o.attr(this.id,e)}let a=false;["top","bottom","right","left"].forEach(e=>{if(o.attr(e)==="0"||o.attr(e)===""){o.removeAttr(e)}else if(o.attr(e)!==undefined){a=true}});if(!a){o.remove()}if(!t.children().length){t.remove()}i.save().refresh()}const a=[];if(t.styleVariants){a.push({id:"styleVariant",label:"Style Variant",defaultState:"<styleVariant/>",deleteable:false,icon:"sk-webicon-ink:styles",singleton:true,linkedComponent:i,showChildrenEvenIfNodeIsNotPresent:true,propsFunction:()=>{const i=e.builder.desktop.getVariantsForComponentType(t.componentTypeName||t.component.builderId);i.forEach(e=>{if(e.value==="default")e.value=""});return[{id:"styleSettingsVariant",label:"Style Variant",type:"picklist",default:"",options:i,onChange:o}]}})}if(t.spacing){a.push({id:"spacing",label:"Spacing",pathToNode:">styles>spacing",defaultStateFunction(){return e.utils.makeXMLDoc("<styles><spacing/></styles>")},deleteable:false,icon:"sk-webicon-ink:styles",singleton:true,isChild:true,linkedComponent:i,showChildrenEvenIfNodeIsNotPresent:true,propsFunction:()=>{const t=e.builder.desktop.getSpacingTokensAsPicklist();return[{id:"top",label:"Top Margin",type:"picklist",default:0,options:t,onChange:o},{id:"bottom",label:"Bottom Margin",type:"picklist",default:0,options:t,onChange:o},{id:"left",label:"Left Margin",type:"picklist",default:0,options:t,onChange:o},{id:"right",label:"Right Margin",type:"picklist",default:0,options:t,onChange:o}]}})}if(t.positioning){a.push(u(i,t.positioning))}if(t.background){a.push(p(i,t.propViewer))}if(t.scrolling){a.push(f(i,t.scrolling))}if(t.size){a.push(h(i,t.size))}return{name:"Styles",tree:a}}function u(e,t){const{container:i,item:n,isRow:o,defaultStateFunction:a}=t;return{id:"positioning",pathToNode:">positioning",label:"Layout",deleteable:false,icon:"sk-webicon-ink:styles",singleton:true,isChild:true,linkedComponent:e,showChildrenEvenIfNodeIsNotPresent:true,defaultStateFunction:a,propsFunction(){const e=[];let t;if(i){t=i.justifyContent;t&&e.push(Object.assign({id:"justifyContent",label:"Justify items",type:"picklist",picklistEntries:[{value:"",label:"Auto"},...d(o)]},typeof t==="object"?t:{}));t=i.alignItems;t&&e.push(Object.assign({id:"alignItems",label:"Align items",type:"picklist",picklistEntries:[{value:"",label:"Auto"},...l(o)]},typeof t==="object"?t:{}))}else if(n){t=n.alignSelf;t&&e.push(Object.assign({id:"alignSelf",label:"Align self",type:"picklist",picklistEntries:[{value:"",label:"Auto"},...l(o)]},typeof t==="object"?t:{}));t=n.ratio;t&&e.push(Object.assign({id:"ratio",label:"Flex ratio",helptext:"A unitless value that sets the amount of space an element can take up inside its container. Will be limited by maximum and minimum widths.",type:"text"},typeof t==="object"?t:{}));t=n.minWidth;t&&e.push(Object.assign({id:"minWidth",label:"Minimum width",type:"text"},typeof t==="object"?t:{}));t=n.maxWidth;t&&e.push(Object.assign({id:"maxWidth",label:"Maximum width",type:"text"},typeof t==="object"?t:{}))}return e}}}o.extend(a,{getInkStylesTab:c});const p=(t,i)=>{const n=i=>{i.element.addClass("nx-pagebuilder-prop-visualoptions-wrapper");if(i.additionalClass)i.element.addClass(i.additionalClass);i.element.append((i.items||[]).map(a=>{let s=i.itemComponent,r=s.get("xmlState"),l=i.styleProps,d=i.property,c=o("<div>"),u=o("<div>").addClass("visualoption-wrapper").append(c),p=e=>{if(r.attr(i.property))return e===r.attr(i.property);return e===i.defaultValue};if(!p&&l&&d){p=(e=>e===l[i.property])}if(a instanceof Array){c.addClass("visualoption-group");i.element=c;i.items=a;n(i);return u}c.addClass("visualoption ui-state-default");if(p(a.value))c.addClass("ui-state-highlight");c.append(o("<div>").addClass(a.fullCSS?a.fullCSS:i.cssPrefix+a.value.replace(" ","-")).attr("title",a.label));if(a.icon){c.append(e.ui.createIcon(a.icon))}if(a.minilabel){c.append(o("<div>").addClass("minilabel").text(a.minilabel))}if(s.node==="readonly"){c.addClass("visualoption-disabled")}else{c.on("click",function(){r.attr(d,a.value);i.onClick&&i.onClick(a.value);s.rebuildProps().refresh();t.save().refresh()})}return u}))};return{id:"background",pathToNode:">background",label:"Background",deleteable:false,icon:"sk-webicon-ink:styles",singleton:true,isChild:true,linkedComponent:t,showChildrenEvenIfNodeIsNotPresent:true,propsFunction(o){let a=o.get("xmlState"),r=a.attr("type")||"default",l=[{id:"type",label:"Background Type",type:"picklist",options:[{value:"",label:"Default"},{value:"image",label:"Image"},{value:"color",label:"Color"}],onChange(){o.rebuildProps();t.refresh()}}],d=t.refresh;switch(r){case"default":break;case"image":l=l.concat(s.getImageProperties({component:o,propViewer:i,filter:{noRecordContext:true},additionalOnRefresh(){t.refresh()},additionalOnRebuildProps(){t.save().refresh()},additionalOnRebuildAndRefresh(){t.save().refresh()}}));l.push({id:"size",label:"Size",type:"picklist",options:[{value:"auto",label:"Original"},{value:"contain",label:"Contain"},{value:"cover",label:"Cover"}],onChange:d},{label:"Position",type:"custom",renderProperty:e=>{n({additionalClass:"position-prop",element:e.element,forceNewLinesForGroups:true,items:[[{label:"Top Left",value:"top left",icon:"sk-webicon-ink:arrow-top-left"},{label:"Top Center",value:"top center",icon:"sk-webicon-ink:arrow-up"},{label:"Top Right",value:"top right",icon:"sk-webicon-ink:arrow-top-right"}],[{label:"Center Left",value:"center left",icon:"sk-webicon-ink:arrow-left"},{label:"Center",value:"center center",icon:"sk-webicon-ink:record"},{label:"Center Right",value:"center right",icon:"sk-webicon-ink:arrow-right"}],[{label:"Bottom Left",value:"bottom left",icon:"sk-webicon-ink:arrow-bottom-left"},{label:"Bottom Center",value:"bottom center",icon:"sk-webicon-ink:arrow-down"},{label:"Bottom Right",value:"bottom right",icon:"sk-webicon-ink:arrow-bottom-right"}]],property:"position",cssPrefix:"preview bg position_",itemComponent:o})},onChange:d},{id:"repeat",label:"Repeat",type:"picklist",options:[{value:"",label:"No repeat"},{value:"repeat-x",label:"Horizontally"},{value:"repeat-y",label:"Vertically"},{value:"repeat",label:"Both"}],onChange:d},{id:"attachment",label:"Special Effects",type:"picklist",options:[{value:"",label:"No effects"},{value:"fixed",label:"Parallax effect"}],onChange:d})}r!="default"&&l.push({id:"color",label:"Color",type:"color",defaultValue:"transparent",onChange(){t.refresh();e.events.publish("builder.colorcheck")}});return l}}};function f(t,i={}){const n=t.get("xmlState");return{label:"Height/Scrolling",linkedComponent:t,deleteable:false,propsFunction:o=>{const a=[{id:"heightStrategy",type:"picklist",label:"Height Strategy",picklistEntries:[{label:"Fit to content",value:""},{label:"Fixed height",value:"fixed"}],onChange:()=>{t.refresh();o.rebuildProps();i.onChange&&i.onChange()}}];const s=(s,r)=>{const l=e.utils.camelToTitle(s);a.push({id:s,type:"picklist",label:r||l,picklistEntries:[{label:s==="height"?"Fit to content":"None",value:""},{label:"Short",value:30},{label:"Medium",value:60},{label:"Tall",value:90},{label:"Custom",value:"custom"}],onChange:()=>{t.refresh();if(n.attr(s)!=="custom"){n.removeAttr("maxHeightCustom")}o.rebuildProps();i.onChange&&i.onChange()}},...n.attr(s)==="custom"?[{id:"".concat(s,"Custom"),type:"csssize",label:"Custom ".concat(l),onChange:()=>{t.refresh();i.onChange&&i.onChange()}}]:[])};const r=t.get("xmlState").attr("heightStrategy")==="fixed";if(!r)s("minHeight","Min Height (Optional)");if(!r)s("maxHeight","Max Height (Optional)");if(r)s("height");return a}}}function h(e){const t=e.get("xmlState"),i=t.attr("imageHeight"),n=t.attr("height"),o=t.attr("heightStrategy"),a=t.attr("heightCustom");if(!i&&o==="fixed"&&n){t.attr("imageHeight",n==="custom"?a:"".concat(8*n,"px"));t.attr("height","")}return{label:"Size",linkedComponent:e,deleteable:false,propsFunction:()=>{const t=[{id:"imageWidth",type:"string",label:"Width",placeholder:"Enter a number and sizing unit (px, em, rem, %, vh, vw).",onChange:()=>{e.save().refresh()}},{id:"imageHeight",type:"string",label:"Height",placeholder:"Enter a number and sizing unit (px, em, rem, %, vh, vw).",onChange:()=>{e.save().refresh()}}];return t}}}function m(t,i){const n=t.children("background").first(),o=s.builderSafeBackgroundProperties,a="background-image",r=[],l={};if(n.attr("type")==="image"){if(!o||o&&o.indexOf(a)!==-1){const t=n.attr("source"),i=n.attr("datasource"),o=e.dataSource.get(i),s=o&&o.getImageSource(t);if(s&&s.getSrc){r.push(s.getSrc({context:{},mergeSettings:{},dataSource:s.dataSource,xmlDef:n,prefix:""}).then(function(e){if(e){l[a]="url("+e+")"}else{l[a]=""}},function(){l[a]=""}))}}}Promise.all(r).then(function(){i.css(Object.assign({},l,{},{"background-position":n.attr("position")||"center center","background-size":n.attr("size")||"auto","background-repeat":n.attr("repeat")||"no-repeat","background-attachment":n.attr("attachment")||"scroll"}))});if(n.attr("type")){i.css({"background-color":n.attr("color")})}else{i.removeAttr("style")}}o.extend(s,{builderSafeBackgroundProperties:["background","background-image","background-size","background-attachment","background-repeat","background-position","background-color"],builderSafePositionProperties:["min-height","border","border-left","border-right","border-top","border-bottom","padding","padding-left","padding-top","padding-right","padding-bottom"],builderSafeFormatProperties:["color","font-size"]})},5:function(t,i,n){"use strict";n.d(i,"o",function(){return h});n.d(i,"a",function(){return b});n.d(i,"h",function(){return v});n.d(i,"g",function(){return y});n.d(i,"i",function(){return C});n.d(i,"e",function(){return _});n.d(i,"f",function(){return w});n.d(i,"c",function(){return x});n.d(i,"d",function(){return k});n.d(i,"b",function(){return S});n.d(i,"j",function(){return I});n.d(i,"m",function(){return T});n.d(i,"l",function(){return A});n.d(i,"k",function(){return E});n.d(i,"n",function(){return M});var o=n(11);const a=e.dataSource,s=e.utils,r=s.isString,l=s.escapeSelector,d=e.$,c=e.constants.DISPLAY_TYPES,u=c.BOOLEAN,p=c.INTEGER,f={SkuidDataService:1};const h={"data.length":p,hasChildRows:u,hasNoChildRows:u,hasRows:u,hasNoRows:u,hasChanged:u,isNew:u,isCloned:u,isSaved:u,isMarkedForDeletion:u};const m=["Id","LastReferencedDate","LastViewedDate","Name","Type"];const g=["FirstName","LastName"];const b=e=>{return!!f[e]};const v=(e,t)=>{const i={};t.forEach(t=>{if(!t)return;i[t]=y(e,t,T(e),{readMetadataFromFieldNode:true})});return i};function y(t,i,n,a){if(!a)a={};let s,c,u,p,f,h,m,g,b,v,y,C,_=false,w=a.readMetadataFromFieldNode!==false,x="",A,P,E,M;if(t){if(r(t)){s=I(t)}else if(t.length){s=t;t=s.attr("id")}}if(s){C=Object(o["g"])(s);y=(C?C+".":"")+i;p=s.children("fields,groupby").children('[id="'+l(i)+'"]')}if(!y)y=i;c=k(s);u=S(s);M=c.prop("runtime.metadataSource");E=M==="local"||M==="hybrid";if(p&&p.length){if(p.attr("uionly")==="true"||E&&w){return new e.model.Field({xml:p,dataSourceType:c,model:{pathToContent:C,id:t}})}else if(p.attr("type")==="childRelationship"){_=true}}if(a.isChildRelationship){_=a.isChildRelationship}if(!n){n=t&&T(t)}m=(y||"").split(".");g=m.pop();b=p&&p.attr("targetobjects");v=b&&b.split(",");if(!_){m.length&&d.each(m,function(e,t){x+=t+".";A=u.buildEntityMetadataRequest({model:s,targetEntity:n,path:x,ignorePathToContent:true});f=u.getCachedEntityMetadata({entities:A});if(f){d.each(f.getFieldsList(),function(e,i){if(i.rel===t){n=i.ref;return false}})}P=n?n.split(","):[];if(P.length>0){if(v){let e=v.shift();if(P.indexOf(e)){n=e}else{n=P[0]}}else if(P.length>1){n="Name"}else{n=P[0]}}})}A=u.buildEntityMetadataRequest({model:s,targetEntity:n,path:x,ignorePathToContent:true});f=u.getCachedEntityMetadata({entities:A});h=null;if(f){h=f["get"+(_?"ChildRelationship":"Field")](g);if(!h&&y){let e=y.indexOf(".");if(e!==-1){h=f["get"+(_?"ChildRelationship":"Field")](y.substring(e+1))}}}if(p&&p.length&&h&&p.attr("overridemetadata")==="true"&&w){return new e.model.Field({xml:p,field:d.extend({},h),dataSourceType:c,model:{pathToContent:C,id:t}})}return h}function C(e,t){if(!t)t={};let i=e.get("xmlState"),n=i.attr("field"),o,a=t.modelName,s;if(i.is("field")){o=i.attr("id");a=i.closest("model").attr("id")}else if(n){o=n;if(!a){if(i.is("condition")){a=i.closest("model").attr("id")}}}if(d.inArray(i.attr("sourcetype"),["modelproperty","rowproperty"])>-1){s={displaytype:h[i.attr("sourceproperty")]||"STRING"}}else if(o){let i={},n="readMetadataFromFieldNode";if(t[n]===false){i[n]=false}s=y(a,o,A(e),i)}if(!s)s=false;return s}function _(t){let i=I(t);let n=a.get(i.attr("datasource")||i.attr("service")||e.platform.getDefaultDataSourceName());return i?n.getDataSourceType():null}function w(e){let t=e.closest("model");if(!t.length){return}return k(t)}function x(e){let t=I(e);return S(t)}function k(e){let t=S(e);let i=t.getDataSourceType();if(typeof i==="undefined"){return a.getType()}return i}function S(t){return e.dataSource.getDataSourceFromXML(t)}function I(e){e=s.escapeSelector(e);let t=Object(o["j"])().children("models").children('model[id="'+e+'"]');if(!t.length){const i=Object(o["f"])();if(i)t=i.children("models").children('model[id="'+e+'"]')}return t}function T(e){return I(e).attr("sobject")}function A(e){let t,i=e.get("xmlState");if(i.is("field"))t=i.closest("model").attr("sobject");else if(e.isSubcondition){t=i.parent().closest("condition").attr("joinobject")}else if(e.isChildRelationshipCondition){let e=P(i.closest("model").attr("id"),i.closest("field, skuid__field").attr("id"));t=e.childObject||e.childSObject}else if(e.isLookupFilterCondition){let e=y(i.parent().closest("[model]").attr("model"),i.closest("field, skuid__field").attr("id"));if(!e){t=null}else if(e.ref.indexOf(",")!==-1&&i.attr("fieldtargetobjects")){t=i.attr("fieldtargetobjects")}else t=e.ref}else if(e.isReferenceFilterCondition){let e=y(i.parent().closest("[model]").attr("model"),i.closest("skuid__filter").attr("conditionField"));t=e?e.ref:null}else if(e.isRenderCondition||e.isUpdateAction){if(i.attr("fieldmodel")){t=T(i.attr("fieldmodel"))}else{t=T(i.closest("[model]").attr("model"))}}else if(e.isContextCondition){t=T(i.closest("[model]").attr("model"))}else{t=i.closest("model").attr("sobject")}return t}function P(e,t,i){if(!i){i=e&&T(e)}let n=I(e),o=S(n),a=o.getCachedEntityMetadata({entities:[{objectName:i}]});return a?a.getChildRelationship(t):null}function E(t){const i=I(t),n=i.attr("datasource"),o=i.attr("sobject")||i.attr("x-entityname")||i.attr("id");if(n&&o){const t=e.dataSource.get(n);if(t){const e=t.getCachedEntityMetadata()[o];i.children("fields").children().each(function(){const t=d(this);if(t.attr("overridemetadata")==="true"){Object.assign(e.getField(t.attr("id")),{displaytype:t.attr("displaytype"),label:t.attr("label")})}});return e}}}function M(e,t){return t.includes("User")||(t.includes("Contact")||t.includes("Lead"))&&g.includes(e.id)||m.includes(e.id)}},50:function(t,i,n){"use strict";n.d(i,"b",function(){return o});n.d(i,"a",function(){return a});const o=(t,i,n)=>{if(!i||!n){return t}const o=e.builder.core;const s=o.getModelFromModelName(i);const r=s&&s.find('condition[name="'.concat(n,'"]'));const l=r&&r.length&&r.attr("field");return a(t,i,l)};const a=(t,i,n)=>{if(!i||!(n||t.metadata)){return t}const o=e.builder.core;const a=o.getDataSourceFromModelName(i);const s=o.getSObjectNameFromModelName(i);const r=t.metadata||n&&o.getFieldInfoFromCache(i,n);const l={type:"combobox"};const d=r&&["PICKLIST","MULTIPICKLIST","COMBOBOX"].includes(r.displaytype);if(!d){return t}l.entries=(async()=>{if(r&&(r.uiOnly||r.overrideMetadata&&r.customPicklistEntriesProvided||["local","hybrid"].includes(a.getDataSourceType().prop("runtime.metadataSource")))){return r.picklistEntries||[]}const e=a.getCachedEntityMetadata(s);const t=e&&e.getField&&e.getField(n);if(t&&t.picklistEntries){return t.picklistEntries}const i=await a.getEntityMetadata({entities:[s],ignoreCache:true,ignoreMetadataOverrides:true,loadPicklistValues:true});if(!i)return[];const o=i.getField(n);if(!o||!o.picklistEntries)return[];return o.picklistEntries});Object.assign(t,l);return t}},51:function(t,i,n){"use strict";n.d(i,"a",function(){return d});var o=n(11);var a=n(5);const s=e.utils,r=s.makeXMLDoc,l=e.$;class d{constructor(e,t={}){this.fieldsTableUniqueId="mfs-table";this.fieldsModelUniqueId="mfs-fields-"+s.generateGUID();this.fieldsModel=this.initModel();this.fieldsFilter=t.filter;this.addFieldsToModel(e)}initModel(){return new e.model.Model({id:this.fieldsModelUniqueId,dataSource:e.dataSource.get("Ui-Only"),preventUnloadIfUnsavedChanges:false,createRowIfNoneFound:false,doQuery:false,fields:[{id:"field",displaytype:"TEXT"},{id:"fieldId",displaytype:"TEXT"},{id:"id",displaytype:"TEXT"},{id:"name",displaytype:"TEXT"},{id:"type",displaytype:"TEXT"}]}).initialize().register()}getFieldLabel(e){const t=e.getAttribute("id"),i=e.getAttribute("function"),n=e.getAttribute("label");if(this.isAggregate()){return i?"".concat(i,"(").concat(t,")"):t}return n||s.camelToTitle(t)}getMetadataForField(e){const t=e.closest("model").attr("id"),i=e.attr("id"),n=t?Object(a["m"])(t):"",o={readMetadataFromFieldNode:true};return Object(a["g"])(t,i,n,o)}addFieldsToModel(e){this.model=e;this.fieldsModel.emptyData();const t=this.fieldsFilter;e.children("fields, groupby").children().each((e,i)=>{const n=this.getMetadataForField(l(i));let o=i.getAttribute("id");let a=i.getAttribute("name");let s=a||o;if(t&&!t({displaytype:i.getAttribute("displaytype"),id:o,name:a},null,s)){return true}this.fieldsModel.adoptRow({field:this.getFieldLabel(i),fieldId:s,id:o,name:a,type:n&&n.displaytype||i.getAttribute("displaytype")},{doAppend:true})})}getFieldsTableConfig(e={}){const t=this.fieldsTableUniqueId=e.uniqueId||this.fieldsTableUniqueId;return Object.assign({},{componentType:"skuid__table",uniqueId:t,styleSettingsVariant:"compact",showSaveCancel:false,allowSortingByColumn:false,allowColumnAdjusting:false,showPageSizeSelect:false,pageSize:Infinity,showListHeader:false,showListFooter:false,maxHeight:"custom",maxHeightCustom:"450px",mode:"readonly",model:this.fieldsModel,fields:[{id:"field",label:"Field",columnWidth:"40%"},{id:"fieldId",label:"ID"},{id:"type",label:"Type"}],massActions:r('<massActions>\n\t\t\t\t\t<action type="none" />\n\t\t\t\t</massActions>')},e)}getFieldsTable(){return e.$C(this.fieldsTableUniqueId)}getSelectedFields(){const e=this.getFieldsTable(),t=e._getCPI().getSelectedRecords();return(t||[]).map(e=>e.name||e.id)}isAggregate(){return this.model.attr("type")==="aggregate"}addFieldsToState(e){const t=e.fieldsToAdd||this.getSelectedFields(),i=this.model,n=this.isAggregate(),a=n?"name":"id",s=e.addFieldsHandler,r=e.insertFieldStateHandler,l=e.component,d=e.fieldBuilder,c=e.defaultStateGenerator,u=e.state||l&&l.get("xmlState");if(typeof s==="function"){s(t)}else{t.forEach(e=>{const t={};let s=i.children("fields,groupby").find("field[".concat(a,'="').concat(e,'"]')),l=!!(n&&s.length);if(l){t.fieldName=s.attr("name")}else if(n){s=i.children("fields").find('field[id="'.concat(e,'"]'));t.fieldName=s.attr("id")}t.fieldId=s.attr("id");t.fieldDisplayType=s.attr("displaytype");t.isChildRelationship=s.attr("type")==="childRelationship";const p=(c||d.defaultStateGenerator)(t);if(Object(o["m"])(i,e,{searchByName:l})===true){if(typeof r==="function"){r(p)}else{u.children("fields").first().append(p)}}});l&&l.save().refresh()}}createModal(t){const i=t.modalTitle||"Add Fields",n=t.modalWidth||"800px",o=t.modalZIndex;this.modal=e.utils._floatingComponentFactory.createModal({title:i,width:n,zIndex:o,components:[this.getFieldsTableConfig({styles:{spacing:{marginBottom:3,marginRight:1,marginLeft:1,marginTop:1}}})],buttons:t.buttons||[{label:"Apply",styleSettingsVariant:"primary",onClick:()=>{this.addFieldsToState(t);this.modal.getCPI().close()}},{label:"Cancel",onClick:()=>{this.modal.getCPI().close()}}],onClose:()=>{this.modal.unregister()}});return this.modal}}},52:function(e,t,i){var n,o,a;(function(s){if(true){!(o=[i(1),i(12)],n=s,a=typeof n==="function"?n.apply(t,o):n,a!==undefined&&(e.exports=a))}else{}})(function(e){var t="ui-effects-",i="ui-effects-style",n="ui-effects-animated",o=e;e.effects={effect:{}};(function(e,t){var i="backgroundColor borderBottomColor borderLeftColor borderRightColor "+"borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",n=/^([\-+])=\s*(\d+\.?\d*)/,o=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1]*2.55,e[2]*2.55,e[3]*2.55,e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],a=e.Color=function(t,i,n,o){return new e.Color.fn.parse(t,i,n,o)},s={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},r={byte:{floor:true,max:255},percent:{max:1},degrees:{mod:360,floor:true}},l=a.support={},d=e("<p>")[0],c,u=e.each;d.style.cssText="background-color:rgba(1,1,1,.5)";l.rgba=d.style.backgroundColor.indexOf("rgba")>-1;u(s,function(e,t){t.cache="_"+e;t.props.alpha={idx:3,type:"percent",def:1}});function p(e,t,i){var n=r[t.type]||{};if(e==null){return i||!t.def?null:t.def}e=n.floor?~~e:parseFloat(e);if(isNaN(e)){return t.def}if(n.mod){return(e+n.mod)%n.mod}return 0>e?0:n.max<e?n.max:e}function f(t){var i=a(),n=i._rgba=[];t=t.toLowerCase();u(o,function(e,o){var a,r=o.re.exec(t),l=r&&o.parse(r),d=o.space||"rgba";if(l){a=i[d](l);i[s[d].cache]=a[s[d].cache];n=i._rgba=a._rgba;return false}});if(n.length){if(n.join()==="0,0,0,0"){e.extend(n,c.transparent)}return i}return c[t]}a.fn=e.extend(a.prototype,{parse:function(i,n,o,r){if(i===t){this._rgba=[null,null,null,null];return this}if(i.jquery||i.nodeType){i=e(i).css(n);n=t}var l=this,d=e.type(i),h=this._rgba=[];if(n!==t){i=[i,n,o,r];d="array"}if(d==="string"){return this.parse(f(i)||c._default)}if(d==="array"){u(s.rgba.props,function(e,t){h[t.idx]=p(i[t.idx],t)});return this}if(d==="object"){if(i instanceof a){u(s,function(e,t){if(i[t.cache]){l[t.cache]=i[t.cache].slice()}})}else{u(s,function(t,n){var o=n.cache;u(n.props,function(e,t){if(!l[o]&&n.to){if(e==="alpha"||i[e]==null){return}l[o]=n.to(l._rgba)}l[o][t.idx]=p(i[e],t,true)});if(l[o]&&e.inArray(null,l[o].slice(0,3))<0){l[o][3]=1;if(n.from){l._rgba=n.from(l[o])}}})}return this}},is:function(e){var t=a(e),i=true,n=this;u(s,function(e,o){var a,s=t[o.cache];if(s){a=n[o.cache]||o.to&&o.to(n._rgba)||[];u(o.props,function(e,t){if(s[t.idx]!=null){i=s[t.idx]===a[t.idx];return i}})}return i});return i},_space:function(){var e=[],t=this;u(s,function(i,n){if(t[n.cache]){e.push(i)}});return e.pop()},transition:function(e,t){var i=a(e),n=i._space(),o=s[n],l=this.alpha()===0?a("transparent"):this,d=l[o.cache]||o.to(l._rgba),c=d.slice();i=i[o.cache];u(o.props,function(e,n){var o=n.idx,a=d[o],s=i[o],l=r[n.type]||{};if(s===null){return}if(a===null){c[o]=s}else{if(l.mod){if(s-a>l.mod/2){a+=l.mod}else if(a-s>l.mod/2){a-=l.mod}}c[o]=p((s-a)*t+a,n)}});return this[n](c)},blend:function(t){if(this._rgba[3]===1){return this}var i=this._rgba.slice(),n=i.pop(),o=a(t)._rgba;return a(e.map(i,function(e,t){return(1-n)*o[t]+n*e}))},toRgbaString:function(){var t="rgba(",i=e.map(this._rgba,function(e,t){return e==null?t>2?1:0:e});if(i[3]===1){i.pop();t="rgb("}return t+i.join()+")"},toHslaString:function(){var t="hsla(",i=e.map(this.hsla(),function(e,t){if(e==null){e=t>2?1:0}if(t&&t<3){e=Math.round(e*100)+"%"}return e});if(i[3]===1){i.pop();t="hsl("}return t+i.join()+")"},toHexString:function(t){var i=this._rgba.slice(),n=i.pop();if(t){i.push(~~(n*255))}return"#"+e.map(i,function(e){e=(e||0).toString(16);return e.length===1?"0"+e:e}).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}});a.fn.parse.prototype=a.fn;function h(e,t,i){i=(i+1)%1;if(i*6<1){return e+(t-e)*i*6}if(i*2<1){return t}if(i*3<2){return e+(t-e)*(2/3-i)*6}return e}s.hsla.to=function(e){if(e[0]==null||e[1]==null||e[2]==null){return[null,null,null,e[3]]}var t=e[0]/255,i=e[1]/255,n=e[2]/255,o=e[3],a=Math.max(t,i,n),s=Math.min(t,i,n),r=a-s,l=a+s,d=l*.5,c,u;if(s===a){c=0}else if(t===a){c=60*(i-n)/r+360}else if(i===a){c=60*(n-t)/r+120}else{c=60*(t-i)/r+240}if(r===0){u=0}else if(d<=.5){u=r/l}else{u=r/(2-l)}return[Math.round(c)%360,u,d,o==null?1:o]};s.hsla.from=function(e){if(e[0]==null||e[1]==null||e[2]==null){return[null,null,null,e[3]]}var t=e[0]/360,i=e[1],n=e[2],o=e[3],a=n<=.5?n*(1+i):n+i-n*i,s=2*n-a;return[Math.round(h(s,a,t+1/3)*255),Math.round(h(s,a,t)*255),Math.round(h(s,a,t-1/3)*255),o]};u(s,function(i,o){var s=o.props,r=o.cache,l=o.to,d=o.from;a.fn[i]=function(i){if(l&&!this[r]){this[r]=l(this._rgba)}if(i===t){return this[r].slice()}var n,o=e.type(i),c=o==="array"||o==="object"?i:arguments,f=this[r].slice();u(s,function(e,t){var i=c[o==="object"?e:t.idx];if(i==null){i=f[t.idx]}f[t.idx]=p(i,t)});if(d){n=a(d(f));n[r]=f;return n}else{return a(f)}};u(s,function(t,o){if(a.fn[t]){return}a.fn[t]=function(a){var s=e.type(a),r=t==="alpha"?this._hsla?"hsla":"rgba":i,l=this[r](),d=l[o.idx],c;if(s==="undefined"){return d}if(s==="function"){a=a.call(this,d);s=e.type(a)}if(a==null&&o.empty){return this}if(s==="string"){c=n.exec(a);if(c){a=d+parseFloat(c[2])*(c[1]==="+"?1:-1)}}l[o.idx]=a;return this[r](l)}})});a.hook=function(t){var i=t.split(" ");u(i,function(t,i){e.cssHooks[i]={set:function(t,n){var o,s,r="";if(n!=="transparent"&&(e.type(n)!=="string"||(o=f(n)))){n=a(o||n);if(!l.rgba&&n._rgba[3]!==1){s=i==="backgroundColor"?t.parentNode:t;while((r===""||r==="transparent")&&s&&s.style){try{r=e.css(s,"backgroundColor");s=s.parentNode}catch(e){}}n=n.blend(r&&r!=="transparent"?r:"_default")}n=n.toRgbaString()}try{t.style[i]=n}catch(e){}}};e.fx.step[i]=function(t){if(!t.colorInit){t.start=a(t.elem,i);t.end=a(t.end);t.colorInit=true}e.cssHooks[i].set(t.elem,t.start.transition(t.end,t.pos))}})};a.hook(i);e.cssHooks.borderColor={expand:function(e){var t={};u(["Top","Right","Bottom","Left"],function(i,n){t["border"+n+"Color"]=e});return t}};c=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}})(o);(function(){var t=["add","remove","toggle"],i={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,i){e.fx.step[i]=function(e){if(e.end!=="none"&&!e.setAttr||e.pos===1&&!e.setAttr){o.style(e.elem,i,e.end);e.setAttr=true}}});function n(t){var i,n,o=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,a={};if(o&&o.length&&o[0]&&o[o[0]]){n=o.length;while(n--){i=o[n];if(typeof o[i]==="string"){a[e.camelCase(i)]=o[i]}}}else{for(i in o){if(typeof o[i]==="string"){a[i]=o[i]}}}return a}function a(t,n){var o={},a,s;for(a in n){s=n[a];if(t[a]!==s){if(!i[a]){if(e.fx.step[a]||!isNaN(parseFloat(s))){o[a]=s}}}}return o}if(!e.fn.addBack){e.fn.addBack=function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}}e.effects.animateClass=function(i,o,s,r){var l=e.speed(o,s,r);return this.queue(function(){var o=e(this),s=o.attr("class")||"",r,d=l.children?o.find("*").addBack():o;d=d.map(function(){var t=e(this);return{el:t,start:n(this)}});r=function(){e.each(t,function(e,t){if(i[t]){o[t+"Class"](i[t])}})};r();d=d.map(function(){this.end=n(this.el[0]);this.diff=a(this.start,this.end);return this});o.attr("class",s);d=d.map(function(){var t=this,i=e.Deferred(),n=e.extend({},l,{queue:false,complete:function(){i.resolve(t)}});this.el.animate(this.diff,n);return i.promise()});e.when.apply(e,d.get()).done(function(){r();e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})});l.complete.call(o[0])})})};e.fn.extend({addClass:function(t){return function(i,n,o,a){return n?e.effects.animateClass.call(this,{add:i},n,o,a):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(i,n,o,a){return arguments.length>1?e.effects.animateClass.call(this,{remove:i},n,o,a):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(t){return function(i,n,o,a,s){if(typeof n==="boolean"||n===undefined){if(!o){return t.apply(this,arguments)}else{return e.effects.animateClass.call(this,n?{add:i}:{remove:i},o,a,s)}}else{return e.effects.animateClass.call(this,{toggle:i},n,o,a)}}}(e.fn.toggleClass),switchClass:function(t,i,n,o,a){return e.effects.animateClass.call(this,{add:i,remove:t},n,o,a)}})})();(function(){if(e.expr&&e.expr.filters&&e.expr.filters.animated){e.expr.filters.animated=function(t){return function(i){return!!e(i).data(n)||t(i)}}(e.expr.filters.animated)}if(e.uiBackCompat!==false){e.extend(e.effects,{save:function(e,i){var n=0,o=i.length;for(;n<o;n++){if(i[n]!==null){e.data(t+i[n],e[0].style[i[n]])}}},restore:function(e,i){var n,o=0,a=i.length;for(;o<a;o++){if(i[o]!==null){n=e.data(t+i[o]);e.css(i[o],n)}}},setMode:function(e,t){if(t==="toggle"){t=e.is(":hidden")?"show":"hide"}return t},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper")){return t.parent()}var i={width:t.outerWidth(true),height:t.outerHeight(true),float:t.css("float")},n=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),o={width:t.width(),height:t.height()},a=document.activeElement;try{a.id}catch(e){a=document.body}t.wrap(n);if(t[0]===a||e.contains(t[0],a)){e(a).trigger("focus")}n=t.parent();if(t.css("position")==="static"){n.css({position:"relative"});t.css({position:"relative"})}else{e.extend(i,{position:t.css("position"),zIndex:t.css("z-index")});e.each(["top","left","bottom","right"],function(e,n){i[n]=t.css(n);if(isNaN(parseInt(i[n],10))){i[n]="auto"}});t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})}t.css(o);return n.css(i).show()},removeWrapper:function(t){var i=document.activeElement;if(t.parent().is(".ui-effects-wrapper")){t.parent().replaceWith(t);if(t[0]===i||e.contains(t[0],i)){e(i).trigger("focus")}}return t}})}e.extend(e.effects,{version:"1.12.1",define:function(t,i,n){if(!n){n=i;i="effect"}e.effects.effect[t]=n;e.effects.effect[t].mode=i;return n},scaledDimensions:function(e,t,i){if(t===0){return{height:0,width:0,outerHeight:0,outerWidth:0}}var n=i!=="horizontal"?(t||100)/100:1,o=i!=="vertical"?(t||100)/100:1;return{height:e.height()*o,width:e.width()*n,outerHeight:e.outerHeight()*o,outerWidth:e.outerWidth()*n}},clipToBox:function(e){return{width:e.clip.right-e.clip.left,height:e.clip.bottom-e.clip.top,left:e.clip.left,top:e.clip.top}},unshift:function(e,t,i){var n=e.queue();if(t>1){n.splice.apply(n,[1,0].concat(n.splice(t,i)))}e.dequeue()},saveStyle:function(e){e.data(i,e[0].style.cssText)},restoreStyle:function(e){e[0].style.cssText=e.data(i)||"";e.removeData(i)},mode:function(e,t){var i=e.is(":hidden");if(t==="toggle"){t=i?"show":"hide"}if(i?t==="hide":t==="show"){t="none"}return t},getBaseline:function(e,t){var i,n;switch(e[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=e[0]/t.height}switch(e[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=e[1]/t.width}return{x:n,y:i}},createPlaceholder:function(i){var n,o=i.css("position"),a=i.position();i.css({marginTop:i.css("marginTop"),marginBottom:i.css("marginBottom"),marginLeft:i.css("marginLeft"),marginRight:i.css("marginRight")}).outerWidth(i.outerWidth()).outerHeight(i.outerHeight());if(/^(static|relative)/.test(o)){o="absolute";n=e("<"+i[0].nodeName+">").insertAfter(i).css({display:/^(inline|ruby)/.test(i.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:i.css("marginTop"),marginBottom:i.css("marginBottom"),marginLeft:i.css("marginLeft"),marginRight:i.css("marginRight"),float:i.css("float")}).outerWidth(i.outerWidth()).outerHeight(i.outerHeight()).addClass("ui-effects-placeholder");i.data(t+"placeholder",n)}i.css({position:o,left:a.left,top:a.top});return n},removePlaceholder:function(e){var i=t+"placeholder",n=e.data(i);if(n){n.remove();e.removeData(i)}},cleanUp:function(t){e.effects.restoreStyle(t);e.effects.removePlaceholder(t)},setTransition:function(t,i,n,o){o=o||{};e.each(i,function(e,i){var a=t.cssUnit(i);if(a[0]>0){o[i]=a[0]*n+a[1]}});return o}});function o(t,i,n,o){if(e.isPlainObject(t)){i=t;t=t.effect}t={effect:t};if(i==null){i={}}if(e.isFunction(i)){o=i;n=null;i={}}if(typeof i==="number"||e.fx.speeds[i]){o=n;n=i;i={}}if(e.isFunction(n)){o=n;n=null}if(i){e.extend(t,i)}n=n||i.duration;t.duration=e.fx.off?0:typeof n==="number"?n:n in e.fx.speeds?e.fx.speeds[n]:e.fx.speeds._default;t.complete=o||i.complete;return t}function a(t){if(!t||typeof t==="number"||e.fx.speeds[t]){return true}if(typeof t==="string"&&!e.effects.effect[t]){return true}if(e.isFunction(t)){return true}if(typeof t==="object"&&!t.effect){return true}return false}e.fn.extend({effect:function(){var t=o.apply(this,arguments),i=e.effects.effect[t.effect],a=i.mode,s=t.queue,r=s||"fx",l=t.complete,d=t.mode,c=[],u=function(t){var i=e(this),o=e.effects.mode(i,d)||a;i.data(n,true);c.push(o);if(a&&(o==="show"||o===a&&o==="hide")){i.show()}if(!a||o!=="none"){e.effects.saveStyle(i)}if(e.isFunction(t)){t()}};if(e.fx.off||!i){if(d){return this[d](t.duration,l)}else{return this.each(function(){if(l){l.call(this)}})}}function p(o){var s=e(this);function r(){s.removeData(n);e.effects.cleanUp(s);if(t.mode==="hide"){s.hide()}u()}function u(){if(e.isFunction(l)){l.call(s[0])}if(e.isFunction(o)){o()}}t.mode=c.shift();if(e.uiBackCompat!==false&&!a){if(s.is(":hidden")?d==="hide":d==="show"){s[d]();u()}else{i.call(s[0],t,u)}}else{if(t.mode==="none"){s[d]();u()}else{i.call(s[0],t,r)}}}return s===false?this.each(u).each(p):this.queue(r,u).queue(r,p)},show:function(e){return function(t){if(a(t)){return e.apply(this,arguments)}else{var i=o.apply(this,arguments);i.mode="show";return this.effect.call(this,i)}}}(e.fn.show),hide:function(e){return function(t){if(a(t)){return e.apply(this,arguments)}else{var i=o.apply(this,arguments);i.mode="hide";return this.effect.call(this,i)}}}(e.fn.hide),toggle:function(e){return function(t){if(a(t)||typeof t==="boolean"){return e.apply(this,arguments)}else{var i=o.apply(this,arguments);i.mode="toggle";return this.effect.call(this,i)}}}(e.fn.toggle),cssUnit:function(t){var i=this.css(t),n=[];e.each(["em","px","%","pt"],function(e,t){if(i.indexOf(t)>0){n=[parseFloat(i),t]}});return n},cssClip:function(e){if(e){return this.css("clip","rect("+e.top+"px "+e.right+"px "+e.bottom+"px "+e.left+"px)")}return s(this.css("clip"),this)},transfer:function(t,i){var n=e(this),o=e(t.to),a=o.css("position")==="fixed",s=e("body"),r=a?s.scrollTop():0,l=a?s.scrollLeft():0,d=o.offset(),c={top:d.top-r,left:d.left-l,height:o.innerHeight(),width:o.innerWidth()},u=n.offset(),p=e("<div class='ui-effects-transfer'></div>").appendTo("body").addClass(t.className).css({top:u.top-r,left:u.left-l,height:n.innerHeight(),width:n.innerWidth(),position:a?"fixed":"absolute"}).animate(c,t.duration,t.easing,function(){p.remove();if(e.isFunction(i)){i()}})}});function s(e,t){var i=t.outerWidth(),n=t.outerHeight(),o=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/,a=o.exec(e)||["",0,i,n,0];return{top:parseFloat(a[1])||0,right:a[2]==="auto"?i:parseFloat(a[2]),bottom:a[3]==="auto"?n:parseFloat(a[3]),left:parseFloat(a[4])||0}}e.fx.step.clip=function(t){if(!t.clipInit){t.start=e(t.elem).cssClip();if(typeof t.end==="string"){t.end=s(t.end,t.elem)}t.clipInit=true}e(t.elem).cssClip({top:t.pos*(t.end.top-t.start.top)+t.start.top,right:t.pos*(t.end.right-t.start.right)+t.start.right,bottom:t.pos*(t.end.bottom-t.start.bottom)+t.start.bottom,left:t.pos*(t.end.left-t.start.left)+t.start.left})}})();(function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,i){t[i]=function(t){return Math.pow(t,e+2)}});e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return e===0||e===1?e:-Math.pow(2,8*(e-1))*Math.sin(((e-1)*80-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){var t,i=4;while(e<((t=Math.pow(2,--i))-1)/11){}return 1/Math.pow(4,3-i)-7.5625*Math.pow((t*3-2)/22-e,2)}});e.each(t,function(t,i){e.easing["easeIn"+t]=i;e.easing["easeOut"+t]=function(e){return 1-i(1-e)};e.easing["easeInOut"+t]=function(e){return e<.5?i(e*2)/2:1-i(e*-2+2)/2}})})();return e.effects})},54:function(t,i,n){"use strict";n.d(i,"a",function(){return s});n.d(i,"b",function(){return r});const o=e.utils,a=e.$;function s(t,i){return o.mergeAsTextInContext(t||e.$L("Select_Option_None"),i||{})}const r={edit:function e(t){let i,n=t.entries,r="change.skuid",l=t.onChange,d;if(o.isFunction(n)){n=n()}i=a("<select>");let c=false,u=t.value||t.value===""||t.value===0,p={},f=t.defaultValue,h=[],m=u?t.value:"",g=o.isString(m)?m.replace(/\"/g,'\\"'):m,b=o.isString(f)?f.replace(/\"/g,'\\"'):f;if(n){a.each(n,function(e,t){let i=t.value,n=a("<option>").attr("value",i).text(t.label);if(t.disabled===true)n.prop("disabled",true);p[i]=n;h.push(n)})}if(m&&o.isUndefined(p[m])){p[m]=a("<option>").attr("value",m).text(t.label?t.label:m);h.unshift(p[m])}if(!t.required||t.addNoneOption){h.unshift(a("<option>").attr("value","").text(s(t.noneLabel)))}if(h.length){i.append(h)}if(u&&m in p){c=true}if(u&&c){i.val(m);i.children('[value="'+g+'"]').attr("selected",true)}else{if(typeof f!=="undefined"&&f in p){i.val(f);i.children('[value="'+b+'"]').attr("selected",true)}}if(l){d=i.val();i.off(r).on(r,function(){l(i.val(),d);d=i.val()})}return i}}},597:function(t,i){(function(e){let t=e.$;let i={init(i){i||(i={});let n={text:i.notext!==true,label:i.label,disabled:i.disabled},o;if(i.icon){o=i.icon.indexOf("sk-webicon")>-1;if(!o){n.icons||(n.icons={});n.icons.primary=i.icon}}if(i.secondaryIcon){n.icons||(n.icons={});n.icons.secondary=i.secondaryIcon}this.button(n);if(o){let n=e.ui.createIcon(i.icon,{isWebIcon:true,additionalClass:i.iconPosition==="right"?"sk-webicon--right":null});this.removeClass("ui-button-text-only");if(i.iconPosition&&i.iconPosition==="right"){this.addClass("ui-button-text-icon-secondary").append(t("<span>").addClass("ui-button-icon-secondary").append(n))}else{this.addClass("ui-button-text-icon-primary").prepend(t("<span>").addClass("ui-button-icon-primary").append(n))}}this.attr({role:"button",tabindex:0});this.find(".ui-icon").addClass("sk-icon inline");i.hoverText&&this.skootip(i.hoverText);this.data("object",this);return this},option(){let e,i,n,o,a;if(arguments.length===0){e=this.button("option");i={icon:e.icons&&e.icons.primary,secondaryIcon:e.icons&&e.icons.secondary,disabled:e.disabled,notext:!e.text};return i}else{e=this.button("option");if(arguments.length===1){n=arguments[0];t.extend(e,{text:n.notext!==true,label:n.label,disabled:n.disabled});if(n.icon){e.icons.primary=n.icon}if(n.secondaryIcon){e.icons.secondary=n.secondaryIcon}}else{o=arguments[0];a=arguments[1];if(o==="icon"){e.icons.primary=a}else if(o==="secondaryIcon"){e.icons.secondary=a}else{e[o]=a}}}if(!e.icons.primary){delete e.icons.primary}if(!e.icons.secondary){delete e.icons.secondary}if(!e.icons.primary&&!e.icons.secondary){delete e.icons}this.button("option",e);this.find(".ui-icon").addClass("sk-icon inline");let s=n&&n.hoverText||o==="hoverText"&&a;if(s)this.skootip(s)},destroy(){this.button("destroy");this.removeData("object");this.removeAttr("tabindex");return this}};e.utils.registerPlugin("skooButton",i)})(e)},598:function(t,i){(function(e){let t=e.$,i=e.builder.core,n=e.utils.makeXMLDoc,o=i.determineQuotedness;function a(a){let s=a.propViewer,r=a.component,l=a.model,d=a.showOnHideDataBehaviorProp,c=a.showMessageWhenDisabledProp,u=a.conditionsNodeId||"renderconditions",p=a.conditionsNodeLabel||"Render Conditions",f=a.conditionsNodeIcon||"sk-webicon-ink:rules",h=a.doLabel||"Render",m=a.undoLabel||"Don't render",g=a.conditionNodeId||"rendercondition",b=a.addConditionNodeLabel||"Add new Render Condition",v=a.conditionsIndent||0,y=a.showStyleVariantProp,C=a.nodeIsDeleteable||false,_=a.labelFunction,w=a.helptext;return{id:u,label:p,labelFunction:_,deleteable:C,icon:f,isChild:true,linkedComponent:r,propsFunction:function t(i){let n=[],o=i.get("xmlState"),a=o.attr("logictype");if(!a){a="and";o.attr("logictype",a)}w&&n.push({type:"helptext",html:w});n.push({id:"logictype",type:"picklist",label:h+" if...",defaultValue:"and",picklistEntries:[{label:"ALL Conditions are met",value:"and"},{label:"ANY Conditions are met",value:"or"},{label:"Custom logic is met",value:"custom"}],onChange:function e(t,n){if(t==="custom"&&!o.attr("logic")){let e=o.children(),t=[];if(e.length){e.each(function(e){t.push(e+1)});o.attr("logic",t.join(" AND "));i.save()}}if(t&&n){i.rebuildProps(s)}}});if(a==="custom"){n.push({id:"logic",type:"string",label:"Condition Logic",helptext:"Custom logic for grouping and applying these Conditions, e.g. ((1 AND 2) OR (3 AND 4))."})}if(y){let t=e.builder.desktop.getVariantsForComponentType(r.builderId);n.push({id:"styleSettingsVariantOverride",label:"Style Variant",type:"picklist",defaultValue:"",picklistEntries:t,onChange:()=>i.refresh(),helptext:"Override the component's Style Variant with this one if conditions are met"})}if(d){let e="onhidedatabehavior";if(o.attr(e)===""){o.attr(e,"cancel")}n.push({id:e,type:"picklist",label:"If hidden, Model field changes should be...",helptext:"When this Field is hidden by Conditional Rendering, by default any changes to this Field's Model data will be left in the Model. You may want to have hidden data changes cancelled, so that the changes are not saved along with visible data changes.",defaultValue:"keep",picklistEntries:[{label:"Retained in Model",value:"keep"},{label:"Cancelled",value:"cancel"}]})}if(c){n.push({id:"message",isNew:true,type:"string",label:"Message to show when disabled",helptext:"When disabled, the user will be shown this message to explain why."})}return n},children:[{id:g,indent:v,addtooltip:b,labelFunction:function e(t){return i.getConditionDisplayString(t)},defaultStateFunction:function e(){return n("<"+g+' type="fieldvalue" operator="=" enclosevalueinquotes="true"/>')},propsFunction:function n(a){a.isRenderCondition=true;let r=a.get("xmlState"),d=r.attr("fieldmodel"),c=r.attr("datasource"),u,p,f,g=[],b,v={},y=false,C=function e(t){return t==="modelproperty"||t==="rowproperty"},_=r.attr("sourcetype")||"fieldvalue",w=C(_),x=_==="rowproperty",k=r.attr("sourceproperty"),S=r.attr("value"),I=function e(){a.refresh()},T=function e(t,i){r.attr(t,i);y=true},A=[{label:"Model field value",value:"fieldvalue"},{label:"Model property",value:"modelproperty"},{label:"Row property",value:"rowproperty"},{label:"Page/URL Parameter value",value:"param"},{label:"Running User attribute",value:"userinfo"},{label:"Snippet returns true",value:"snippet"},{label:"Viewport width",value:"viewport"}],P={id:"sourcetype",type:"picklist",label:"Source Type",defaultValue:"fieldvalue",picklistEntries:A,onChange:function e(t,i){if(i&&t!==i){if(C(t)){if(C(i)){r.removeAttr("sourceproperty")}r.removeAttr("field value operator")}o(a,v);a.save().refresh().rebuildProps(s)}}},E={id:"fieldmodel",type:"model",label:"Source Model",helptext:"The Model to use when evaluating this Condition. If there is a row in context that is in this Model, Conditions will be evaluated against the context row. Otherwise, Conditions will be evaluated against this Model's first row.",onChange:function e(){a.refresh().rebuildProps(s)}},M="Skip other Conditions, and ",D={id:"nosourcerowbehavior",type:"picklist",label:"If no rows in Model...",helptext:"Specifies the action to take if no rows are returned by the source model.",defaultValue:"deactivate",picklistEntries:[{label:"Ignore this Condition",value:"deactivate"},{label:M+h.toLowerCase(),value:"skipandrender"},{label:M+m.toLowerCase(),value:"skipandnorender"}]},N={id:"sourceparam",type:"string",label:"Parameter Name",onChange:I},F={id:"sourceuserinfotype",type:"picklist",label:"User attribute",helptext:"The name of the property on the running User's record to compare against",defaultValue:"profilename",picklistEntries:[],onChange:I},O=t.map(e.dataSource.map(),function(e,t){let i=e.getDataSourceType();if(i&&i.getUserInfoProperties){return{value:t,label:t}}}),R=O.length&&O[0].value,L={id:"datasource",type:"picklist",picklistEntries:O,defaultValue:R,label:"Data Source"},B={id:"sourcedatasourcetypeuserinfo",type:"picklist",label:"Data Source user attribute",helptext:"The name of the property on the running User's record for a particular Data Source to compare against",onChange:I},j={id:"operator",type:"picklist",label:"Is",picklistEntries:[{value:"=",label:"True"},{value:"!=",label:"False"}],onChange:I},U={id:"value",type:"string",label:"Feature Name",helptext:"The name of the feature we want to check for",onChange:I},V={id:"permissionnamespace",type:"picklist",label:"Permission Namespace",helptext:"The namespace of the permission we want to check for"},H={id:"value",type:"picklist",label:"Permission Name",helptext:"The name of the permission we want to check for",onChange:I},q={id:"value",type:"csssize",label:"Viewport width",onChange:I,allowUnits:["px","em","rem"]},z={id:"sourceproperty",type:"picklist",label:"Model Property",defaultValue:"hasRows",picklistEntries:[{value:"data.length",label:"# of rows in Model"},{value:"hasNoRows",label:"Doesn't have data rows"},{value:"hasRows",label:"Has data rows"},{value:"hasChanged",label:"Has unsaved changes"},{value:"label",label:"Model label"},{value:"labelPlural",label:"Model plural label"}],onChange:function e(t){if(t==="hasRows"||t==="hasNoRows"){r.removeAttr("type enclosevalueinquotes operator value")}else{if(t==="hasChanged"){if(!r.attr("value")){r.attr({type:"fieldvalue",value:"true",enclosevalueinquotes:"false"})}}o(a,v)}a.save().refresh().rebuildProps(s)}},W={id:"sourceproperty",type:"picklist",label:"Row Property",defaultValue:"isNew",picklistEntries:[{value:"hasChanged",label:"Has unsaved changes"},{value:"isNew",label:"Is new record"},{value:"isSaved",label:"Is existing record in database"},{value:"isCloned",label:"Is unsaved clone of existing record"},{value:"isMarkedForDeletion",label:"Is marked for deletion"}],onChange:function e(t){if(["hasChanged","isCloned","isMarkedForDeletion"].includes(t)){if(!r.attr("value")){r.attr({type:"fieldvalue",value:"true",enclosevalueinquotes:"false"})}}else{r.removeAttr("type enclosevalueinquotes operator value")}o(a,v);a.save().refresh().rebuildProps(s)}},G={id:"sourcesnippet",type:"snippet",label:"Snippet Name",helptext:"The name of the Skuid JavaScript Snippet to run to determine whether to render.",onChange:I},Y={id:"connection",type:"picklist",label:"Render/Enable if...",defaultValue:"online",picklistEntries:[{value:"online",label:"User is Online"},{value:"offline",label:"User is Offline"}],onChange:I};if(e.settings.offline("enabled")){A.push({label:"Connection Status",value:"connection"})}c=c||R;if(c){P.picklistEntries.push({label:"Data Source user attribute",value:"datasourceuserinfo"});u=e.dataSource.getDataSource(c);p=u&&u.getDataSourceType();if(p.getUserInfoProperties){B.picklistEntries=p.getUserInfoProperties({renderCondition:true});t.each(B.picklistEntries,function(e,t){if(t.defaultValue){B.defaultValue=t.value;return false}})}}if(e.utils.inPlatform(e.constants.NATIVE)){A.splice(5,0,{label:"Running User has permission",value:"userhaspermission"});H.picklistEntries=[{value:"configure_self",label:"Configure Self"},{value:"configure_site",label:"Configure Site"}];V.picklistEntries=[{label:"Skuid",value:"skuid"}]}if(_==="feature"){A.unshift({label:"Feature is enabled",value:"feature"})}t.each(i.userinfomap,function(e,t){F.picklistEntries.push({label:t.label,value:e})});if(d){b=d}else if(l){b=l;T("fieldmodel",b)}else{let e=i.getLastSelectedModelComponent();if(e&&e.get("xmlState")){b=e.get("xmlState").attr("id")}else{b=i.getAllModelsInPage().children().first().attr("id")}T("fieldmodel",b)}v.modelName=b;if(w){if(!k){if(x){k=W.defaultValue}else{k=z.defaultValue}T("sourceproperty",k)}if(x&&["isCloned","hasChanged","isMarkedForDeletion"].includes(k)){if(typeof S==="undefined"){T("value","true")}if(r.attr("enclosevalueinquotes")!=="false")T("enclosevalueinquotes","false")}else if(!x&&["data.length","hasChanged"].includes(k)){if(typeof S==="undefined"){if(k==="hasChanged")T("value","true")}if(r.attr("enclosevalueinquotes")!=="false"){T("enclosevalueinquotes","false")}}}if(y){y=false;a.save().refresh()}g.push(P);f=i.getMetadataForField(a,{modelName:b});let X={showObjectPickerIfPolymorphic:true,addFieldToModel:true,handleChange:function e(){a.rebuildProps(s)},showUiOnlyFormulaFields:true};X.modelName=r.attr("fieldmodel")?r.attr("fieldmodel"):b;let K=[E],$={feature:[U,j],fieldvalue:K,modelproperty:[E,z],rowproperty:[E,W],param:[N],userinfo:[F],userhaspermission:[V,H,j],datasourceuserinfo:[L,B],snippet:[G],connection:[Y],viewport:[i.getConditionOperatorPropObj(a,{defaultValue:"gt",conditionType:"viewport",fieldMetadata:{displaytype:"STRING"}}),q]};if(!l||l!==b){K.push(D)}K.push(i.getConditionFieldPropObj(a,X));t.each($[_],function(){g.push(this)});if(w&&["hasRows","hasNoRows","hasChildRows","hasNoChildRows","isNew","isSaved"].includes(k)||["feature","snippet","userhaspermission","connection","viewport"].includes(_)){return g}else{g.push(i.getConditionOperatorPropObj(a,{fieldMetadata:f}));return g.concat(i.getConditionValueProperties(a,{handleRefresh:function e(){a.rebuildProps(s)},handleChange:function e(){a.refresh()},modelName:b,validTypes:["isCloned","hasChanged","isMarkedForDeletion"].includes(k)?["fieldvalue"]:["fieldvalue","multiple","blank","userinfo","param"]}))}}}]}}function s(t={}){let i=t.component;return{id:"styleVariantConditions",label:"Style Variant Conditions",deleteable:false,icon:"sk-webicon-ink:rules",isChild:true,linkedComponent:i,addtooltip:"Add a new rule",props:[{type:"helptext",html:"Create rules with one or more condition to override the style variant specified for this component in the Styles tab.<br>Evaluation of rules stops when conditions are met for one."}],children:[a(Object.assign({},t,{showOnHideDataBehaviorProp:false,showMessageWhenDisabledProp:false,conditionsNodeId:t.styleVariantConditionsNodeId||"rule",conditionsNodeLabel:"Rule",doLabel:"Use this Style Variant",undoLabel:"Don't use this Style Variant",conditionNodeId:"condition",addConditionNodeLabel:"Add a new condition",conditionsIndent:1,showStyleVariantProp:true,nodeIsDeleteable:true,labelFunction:function t(n){let o=n.index()+1;let a="",s=n.attr("styleSettingsVariantOverride")||"";if(s){a=e.builder.desktop.getLabelForStyleVariant(i.builderId,s)}return"".concat(o,": ").concat(a)}}))]}}function r(e){if(!e)e={};let i=e.hideRenderConditions||false,n=e.showEnableDisableConditions||false,o=e.showSelectedConditions||false,r=e.showStyleVariantConditions||false,l=e.showOpenConditions||false,d=[];if(!i){d.push(a(t.extend({},e,{showOnHideDataBehaviorProp:e.showOnHideDataBehaviorProp,showMessageWhenDisabledProp:false,showStyleVariantProp:false})))}if(n){d.push(a(Object.assign({},e,{showOnHideDataBehaviorProp:false,showMessageWhenDisabledProp:true,conditionsNodeId:e.enableConditionsNodeId||"enableconditions",conditionsNodeLabel:"Enable Conditions",doLabel:"Enable",undoLabel:"Disable",conditionNodeId:"condition",addConditionNodeLabel:"Add new Enable Condition"})))}if(o){d.push(a(Object.assign({},e,{showOnHideDataBehaviorProp:false,showMessageWhenDisabledProp:false,conditionsNodeId:e.selectedConditionsNodeId||"selectedconditions",conditionsNodeLabel:"Selected Conditions",doLabel:"Enable",undoLabel:"Disable",conditionNodeId:"condition",addConditionNodeLabel:"Add new Selected Condition"})))}if(l){d.push(a(Object.assign({},e,{showOnHideDataBehaviorProp:false,showMessageWhenDisabledProp:false,conditionsNodeId:e.openConditionsNodeId||"openConditions",conditionsNodeLabel:"Open Conditions",doLabel:"Open",undoLabel:"Close",conditionNodeId:"condition",addConditionNodeLabel:"Add new Open Condition"})))}if(r){d.push(s(t.extend({},e,{})))}return{name:"Display Logic",tree:d}}t.extend(i,{getRenderingCategory:r})})(e)},599:function(t,i){(function(e){let t="custom-props";let i="custom-prop";let n="id";let o="value";let a="type";let s="dst";let r=e.utils.isUndefined;let l=e.builder.core;let d=e.utils.makeXMLDoc;let c=e.$;function u(e,t,i){let n=i.get("xmlState"),o=e.id,a=e.type;f(e,t,i);let s={id:t.name+"-"+o,label:e.label,type:a,isStateless:true,defaultValue:e.defaultValue,helptext:e.helptext,onChange:function n(o,a){p(e,t,i,o,a)},valueFunction:function e(){return I(n,o)}};if(e.picklistEntries){s.picklistEntries=e.picklistEntries}return s}function p(e,t,i,n,o){let a=i.get("xmlState"),s=e.id,r=e.type,l=e.onChange;h(t,a);b(a,s,n,r);S(l,n,o);i.save()}function f(e,t,i){let n=e.defaultValue;if(r(n))return;let o=i.get("xmlState");let a=I(o,e.id);if(!r(a))return;p(e,t,i,n)}function h(e,i){let n=i.children(t);if(!n.length){k(e,i);return}if(n.attr(s)!==e.name){w(i);k(e,i)}}function m(e,t){let n=x(e);let o=n&&n.children(i+"[id='"+t+"']");if(o.length){return o}}function g(e,t,i,n){let o=_(t,i,n);let a=x(e);o.appendTo(a)}function b(e,t,i,n){let o=m(e,t);if(o){y(o,i,n);return}g(e,t,i,n)}function v(e){return d("<"+e+"/>")}function y(e,t,i){e.attr(a,i);e.attr(o,t)}function C(e){let i=v(t);i.attr(s,e.name);return i}function _(e,t,o){let a=v(i);a.attr(n,e);y(a,t,o);return a}function w(e){e.remove(t)}function x(e){return e.children(t)}function k(e,t){let i=C(e);i.appendTo(t)}function S(e,t,i){if(e){return e(t,i)}}function I(e,t){let i=m(e,t);if(i){return i.attr(o)}}c.extend(l,{createDSTSpecificProp:u})})(e)},600:function(t,i){(function(e){let t=e.$,i=e.builder.core;function n(){let i=[];Array.prototype.push.apply(i,e.events.getRegisteredGlobalEvents());t.each(e.events.getRegisteredComponentEvents(),function(e,t){Array.prototype.push.apply(i,t)});return i.filter(function(e){return e.isSubscribable()}).map(function(e){return{value:e.getName(),label:e.getLabel()}})}function o(t){let i=e.events.get(t);return i?i.getLabel():t}t.extend(i,{getEventLabelByName:o,getSubscribableEventEntries:n})})(e)},601:function(t,i){(function(e){let t=e.$,i=e.builder.core,n=e.utils.makeXMLDoc,o=[{label:"Alt",value:"alt"},{label:"Ctrl",value:"ctrl"},{label:"Command",value:"meta"},{label:"Shift",value:"shift"}],a={disabled:true,label:"",value:""},s=function e(t){return{disabled:true,label:t,value:""}},r=[s("Letters/Numbers")],l=1;"ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890".split("").forEach(function(e){r.push({label:e,value:e.toLowerCase()})});r.push(a,s("Arrow Keys"));["Left","Up","Right","Down"].forEach(function(e){r.push({label:e,value:e.toLowerCase()})});r.push(a,s("Special Keys"));t.each([{l:"Backspace/Delete",v:"backspace"},{l:"Delete Right",v:"del"},{l:"End",v:"end"},{l:"Home",v:"home"},{l:"Page Down",v:"pagedown"},{l:"Page Up",v:"pageup"},{l:"Tab",v:"tab "}],function(){r.push({label:this.l,value:this.v})});r.push(a,s("Function Keys"));for(;l<13;l++){r.push({label:"F"+l,value:"f"+l})}function d(e){e||(e={});let a=e.propViewer,s=e.allowChildActions||false,l=e.id||"hotkeys",d=e.label||"Hotkeys",c={id:"hotkey",deletetooltip:"Remove Hotkey",labelFunction:function e(i){let n=i.attr("modifiers"),a=i.attr("key"),s="";if(n){t.each(n.split(","),function(e,i){t.each(o,function(){if(this.value===i){s+=this.label+"+";return false}})})}t.each(r,function(){if(this.value===a){s+=this.label;return false}});return s},defaultStateFunction:function e(){return n('<hotkey modifiers="ctrl" key="n"/>')},propsFunction:function e(t){let i=function e(){t.refresh&&t.refresh()};let n=[{id:"modifiers",location:"attribute",type:"multipicklist",label:"Modifiers",helptext:"Choose one or more modifiers that must be pressed at the same time as the principal hot key",picklistEntries:o,defaultValue:"ctrl",noneSelectedText:"Select Modifiers...",onChange:function e(n){if(!n||n==="shift"){t.get("xmlState").attr("ignoretextinputs","true");t.save().rebuildProps(a)}i()}},{id:"key",type:"picklist",label:"Key",picklistEntries:r,defaultValue:"S",onChange:i},{id:"ignoretextinputs",type:"boolean",label:"Ignore Hot Key if user is typing in input element",helptext:"If true, then this Hot Key will be ignored while a user is entering text into any text input area. This option should be used if the Hot Key would conflict with typical data entry Hot Keys, such as arrow keys, copy/paste, etc."}];return n}};if(s){c.childrenFunction=function(e){return[i.getActionTreeNode({component:e,propViewer:a,treeNode:{indent:1,invisibleParent:"actions"}})]};c.addtooltip="Add Hotkey Action"}return{name:d,tree:{id:l,label:d,linkedComponent:e.linkedComponent,deleteable:false,icon:"sk-webicon-ink:actions",addtooltip:"Add Hotkey",isChild:true,children:[c]}}}i.getHotkeysCategory=d})(e)},602:function(t,i){(function(e){let t=e.$,i=e.builder.core;function n(n,o,a){let s=n&&i.getModelFromModelName(n);let r=s?i.getDataSourceFromModel(s):e.dataSource.get(o||e.platform.getDefaultDataSourceName());return t.map(r.getImageSources(),function(e,t){if(a){if(a.needsRecordContext&&!e.needsRecordContext)return null;if(a.needsFieldContext&&!e.needsFieldContext)return null;if(a.noRecordContext&&e.needsRecordContext)return null}return{label:e.label,value:t,needsFieldContext:e.needsFieldContext,needsRecordContext:e.needsRecordContext,optionalRecordContext:e.optionalRecordContext,relatedObjectName:e.relatedObjectName,automaticFieldMappings:e.automaticFieldMappings,builderProps:e.builderProps,dataSource:r}})}function o(e,t){let i=e.filter(function(e){return e.value===t});if(i&&i.length){return i[0]}else{return null}}function a(e){let a=e.component,s=e.propViewer,r=e.additionalOnRebuildProps,l=e.additionalOnRebuildAndRefresh,d=e.prefix||"";let c=a.get("xmlState"),u=c.attr(d+"source"),p=e.modelName?[]:i.getDataSourceSelectionProps(a,s,{autoClearStateOnChange:false}),f=c.attr("datasource"),h=n(e.modelName,f,e.filter),m,g,b;if(h&&h.length){if(!t.map(h,function(e){return e.value===u?true:null}).length){c.attr(d+"source",h[0].value);u=h[0].value}}m=o(h,u);a.currentImageSource=m;p.push({id:d+"source",label:"Image Source",type:"picklist",options:h,onChange:function e(){a.refresh().rebuildProps();l&&l()}});if(m){if(m.needsRecordContext||m.optionalRecordContext){if(!e.modelName){p.push({id:"model",type:"model",label:"Model",onChange:function e(){a.rebuildProps();r&&r()}})}if(m.needsFieldContext){g=i.getModelFromModelName(e.modelName||c.attr("model"));b=g.attr("sobject");if(m.automaticFieldMappings&&m.automaticFieldMappings.hasOwnProperty(b)){c.attr("field","")}else{let t={id:e.customFieldPropId||"field",type:"field",label:"Image Field",helptext:"A field that contains an Image ID",modelprop:"model"};if(m.relatedObjectName){t.displayTypeFilter="REFERENCE";t.refFilter=m.relatedObjectName}if(e.modelName){t.modelname=e.modelName}else{t.modelprop="model"}p.push(t)}}}if(m.builderProps){if(typeof m.builderProps==="function"){p=p.concat(m.builderProps(a,c,t.extend({},e,{dataSource:m.dataSource})))}else{t.each(m.builderProps,function(){p.push(this)})}}}return p}t.extend(i,{getImageProperties:a})})(e)},603:function(t,i){const n=e.$,o=e.builder.core,a=e.utils.makeXMLDoc;function s(e){e||(e={});let t=e.linkedComponent,i=e.indent||0;return{invisibleParent:"optionGroups",id:"optionGroup",labelFunction(e){return e.attr("label")||"Menu Section"},addtooltip:"Add Menu Section",deleteable:true,icon(e){return e.attr("icon")},indent:i,linkedComponent:t,refreshLinkedComponent:true,propsFunction(e){const t={type:"helptext",html:"You can provide a label and icon to distinguish this menu section, or just leave it blank."},i={id:"label",label:"Label",type:"string",onChange(){e.refresh()}},n={id:"icon",type:"icon",label:"Icon",onChange(){e.refresh()}};return[t,i,n]},childrenFunction(){return[{id:"option",labelFunction(e){return e.attr("label")},icon(e){return e.attr("icon")},invisibleParent:"options",indent:i+1,addicon:"sk-webicon-ink:add",deleteicon:"sk-webicon-ink:delete",addtooltip:"Add Option",deletetooltip:"Remove Option",propsFunction(e){const t={id:"label",label:"Label",type:"string",onChange(){e.refresh()}},i={id:"icon",type:"icon",label:"Icon",onChange(){e.refresh()}};return[t,i]},childrenFunction(){return[o.getActionTreeNode(n.extend({},e,{treeNode:{invisibleParent:"actions",invisibleParentLabel:"Actions",indent:i+2,addtooltip:"Add Action",deletetooltip:"Remove Action",linkedComponent:t,refreshLinkedComponent:true}}))]},defaultStateFunction(){return a('<option label="New Option"/>')}}]},defaultStateFunction(){return a("<optionGroup/>")}}}n.extend(o,{getOptionGroupsNode:s})},604:function(t,i){(function(e){let t=e.builder.core;function i(i,n){n=n||{};let o=[{name:"Basic",props:[{id:"title",type:"template",location:"attribute",label:"Popup Title",onChange:function e(t){i.element.dialog("option","title",t)}},{id:"width",type:"csssize",label:"Width",onChange:function e(t){i.element.dialog("option","width",t)}}]},{name:"Advanced",props:[{id:"closeicon",type:"icon",label:"Close Icon",defaultValue:"sk-webicon-ink:close",onChange:function t(n){i.element.parent().find(".ui-dialog-titlebar-close .ui-icon, .ui-dialog-titlebar-close .sk-icon, .ui-dialog-titlebar-close .sk-webicon").after(e.$(e.ui.createIcon(n||"sk-webicon-ink:close")).css("left","0")).remove()}}]}];if(n.useAfterCloseActions){o.push(t.getActionsCategory({customNodeId:"afterclose",label:"After Close Actions",linkedComponent:i}))}return o}function n(i,n){n=n||{};let o=i.get("xmlState");let a=[{id:"title",type:"template",location:"attribute",label:"Title",onChange:function e(t){i.modalEl.dialog("option","title",t)}},{id:"fullScreen",type:"boolean",defaultValue:false,label:"Full screen modal",onChange(){i.rebuildProps()}},o.attr("fullScreen")!="true"&&{id:"width",type:"csssize",label:"Width",onChange:function e(t){i.element.dialog("option","width",t)}},{id:"showCloseIcon",label:"Show close icon",defaultValue:true,type:"boolean",onChange(){i.rebuildProps()}},o.attr("showCloseIcon")!="false"&&{id:"closeIcon",type:"icon",label:"Close icon",defaultValue:"sk-webicon-ink:close",onChange(){i.refresh()}},{id:"showHeader",label:"Show header",defaultValue:true,type:"boolean",onChange(){i.refresh()}},{id:"showFooter",label:"Show button footer",defaultValue:true,type:"boolean",onChange(){i.rebuildProps().refresh()}},o.attr("showFooter")!="false"&&{id:"buttonsJustification",type:"picklist",label:"Footer button alignment",defaultValue:"",picklistEntries:[{label:"Left",value:""},{label:"Middle",value:"center"},{label:"Right",value:"right"}],onChange(){i.refresh()}}];const s=[{name:"Basic",props:a},{name:"Advanced",props:[t.coreProps.uniqueIdProp({component:i})]},e.builder.ink.getInkStylesTab({component:i,propViewer:n.propertiesObj,spacing:false})];if(n.useAfterCloseActions){s.push(t.getActionsCategory({customNodeId:"afterCloseActions",label:"After Close Actions",linkedComponent:i}))}return s}t.getModalProperties=n;t.getPopupProperties=i})(e)},605:function(t,i){(function(e){let t=e.$,i=e.builder.core,n=e.utils,o=i.defaultJavaScriptResourceBodies,a=i.defaultJavaScriptResourceNames,s=e.platform.getEntityFieldNames("static_resource");function r(t){let i=t.get("xmlState"),r=true,l=[{label:e.$L("File_Resource"),value:"staticresource"},{label:"External",value:"external"},{label:"In-Line",value:"inline"},{label:"In-Line (Snippet)",value:"inlinesnippet"}];if(e.platform.hasFeature("CustomDisplayMethods")){l.push({label:"Display Method",value:"displaymethod"})}if(i.attr("content_type")){r=i.attr("content_type")===e.constants.MIME_TYPES.ZIP}let d={id:"location",type:"picklist",label:"Resource Location",defaultValue:"staticresource",picklistEntries:l,onChange:function e(s,r){if(s==="staticresource"){i.attr({url:"",cachelocation:"false",name:"",namespace:""})}else if(s!=="external"){i.attr("url","")}if(s&&r&&r!==s&&(n.startsWith(s,"inline")||s==="displaymethod")){if(!i.text()||i.text()===o[r]){i.text(o[s])}if(!i.attr("name")||i.attr("name")===a[r]){i.attr("name",a[s])}}t.save().refresh().rebuildProps()}};let c=e.platform.builder.getStaticResourceProperty({id:"name",valueTemplates:{name:"{{{"+s.name+"}}}",namespace:"{{{"+s.namespace+"}}}",content_type:"{{{"+s.content_type+"}}}"},helptext:"The name of the Static Resource where this JavaScript is stored.",onChange:function e(){if(i.attr("filepath")){i.removeAttr("filepath");t.save()}t.refresh().rebuildProps()}});let u={type:"code",syntax:"javascript",label:"Resource Body",divisionSize:"2"};let p={id:"name",type:"string",label:"Snippet Name",onChange:function e(){t.refresh()}};let f={type:"code",syntax:"javascript",label:"Snippet Body",divisionSize:"2"};let h={id:"name",type:"string",label:"Display Method Name",onChange:function e(){t.refresh()}};let m={id:"name",type:"string",label:"Component Name",onChange:function e(){t.refresh()}};let g={type:"code",label:"Component Body",syntax:"javascript",divisionSize:"2"};let b={id:"namespace",type:"string",label:"Namespace (if in managed package)",helptext:"ONLY needed if this StaticResource is included in a Managed Package."};let v={id:"name",type:"string",label:"Resource Name (optional)",onChange:function e(){t.refresh()}};let y={id:"url",type:"string",label:"Resource URL",divisionSize:"2",onChange:function e(){t.refresh()}};let C={id:"cachelocation",type:"boolean",label:"Cache Resource Location",helptext:"Leave UNCHECKED unless the contents of your Static Resource "+"are very stable and will not be changing."};let _=e.platform.builder.getNestedPathProperty({state:i,nameProperty:"name",namespaceProperty:"namespace"});let w={external:[d,v,y],inline:[d,v,u],inlinesnippet:[d,p,f],inlinecomponent:[d,m,g],displaymethod:[d,h,f],staticresource:[d,c,b,C],DEFAULT:[d,v,b]};if(!e.utils.inPlatform([e.constants.VISUALFORCE,e.constants.LIGHTNING])){e.$.each([b,C],function(e,t){let i=w.staticresource.indexOf(t);i!==-1&&w.staticresource.splice(i,1)})}if(i.attr("name")&&r)w.staticresource.push(_);return w[i.attr("location")||"DEFAULT"]}function l(e){let t={id:"id",type:"string",label:"Label Id"};if(e&&e.onChange){t.onChange=e.onChange}return[t]}t.extend(i,{getLabelProperties:l,getJSItemProperties:r})})(e)},606:function(t,i){(function(e){let t=e.builder,i=e.$,n=t.core,o=e.utils,a=e.voiceCommands,s=o.makeXMLDoc,r=o.grab;function l(e){let t=n.getPageXML();let i=a.getDataSourceConfiguredForVoiceOnPage(t),o=i&&i.getDataSourceType();if(!a.pageIsVoiceEnabled(t)){return[{id:"no-voice",label:"Voice is not enabled for this page."}]}if(!i){return[{id:"no-voice",label:"No data source is set for voice on this page."}]}let s=r(o,"voiceCommands","props","actionSequence","topLevelProps");if(!s)return[];return s(e,i)}function d(){let e=a.getDataSourceConfiguredForVoiceOnPage(n.getPageXML());if(!e)return;return e.getDataSourceType()}function c(){let t=[];i.each(e.dataSource.mapTypes(),function(e,i){if(i.supportsVoiceCommands&&i.supportsVoiceCommands()){Array.prototype.push.apply(t,n.getDataSourcesOfType(e))}});return t}function u(){return[{value:"voice-command",label:"Listen for a voice command"}]}function p(e){let t=a.getDataSourceConfiguredForVoiceOnPage(n.getPageXML()),i=t&&t.getDataSourceType(),o=r(i,"voiceCommands","props","actionSequence","shouldHaveInputs"),s=[];if(o&&o(e.get("xmlState"))){s=n.actionSequences.getInputsCategory(e,{staticInputs:true})}return s.concat(f(e))}function f(e){let t=e;return[{name:"Example Commands",tree:{id:"example-commands",label:"Examples",addtooltip:"Add Example Command",deleteable:false,icon:"sk-icon-component-pack",isChild:true,linkedComponent:e,props:[],refreshLinkedComponent:false,childrenFunction:function e(i){return[{id:"example-command",deletetooltip:"Remove command example",refreshLinkedComponent:false,linkedComponent:t,indent:0,icon:function e(){return"sk-webicon-ink:actions"},labelFunction:function e(t){return t.attr("value")||"New Example Command"},defaultStateFunction:function e(){return s('<example-command value="Example valid voice command"/>')},propsFunction:function e(){return[{id:"value",label:"Example Command",type:"string",onChange:function e(){i.refresh()}}]}}]}}}]}function h(e,t){let i=e.attr("voice-command");return"(Voice: "+(i?'"'+i+'"':"Not specified")+")"+(t?" "+t:"")}function m(e){let t=d();let i=r(t,"voiceCommands","props","action");let n=i&&i();return o.mergeArrays(e,n)}function g(t){let i=t.get("xmlState"),a=(i.attr("voice-enabled")||"false")!=="false",s=i.attr("voice-datasource"),r=!!s,l=[{id:"voice-enabled",type:"boolean",label:"Enable Voice",onChange:function e(){t.refresh().rebuildProps()}}],d,c,u;if(!a)return l;l.push({id:"voice-datasource",label:"Voice Data Source",type:"picklist",defaultValue:"",onChange:function e(){t.refresh().rebuildProps()},picklistEntries:function e(){return[{label:"--None--",value:""}].concat(n.voiceCommands.getVoiceEnabledDataSources())}});if(!r)return l;d=e.dataSource.getDataSource(s);if(!d)return l;c=d.getDataSourceType();if(!c)return l;u=o.getObjectProperty(c,"voiceCommands.props.page");if(!u)return l;return l.concat(u(d,t))}function b(e){let t=e.linkedComponent;return{name:"Voice",props:g(t)}}n.voiceCommands={appendVoiceCommandProps:m,getActionSequenceLabel:h,getDataSourceTypeConfiguredForVoice:d,getVoiceCategory:b,getVoiceCommandActionOption:u,getVoiceEnabledDataSources:c,getVoiceTriggeredCategories:p,getVoiceTriggeredSequenceProperties:l}})(e)},607:function(t,i){const n=e.component.DisplayMethod,o=e.component.displayMethodRegistry;o.register("CSS_SIZE",new n({editModeStrategy:"component",edit:(e,t)=>{const{disabled:i,iconLeft:n,iconRight:o,rightAlign:a,showLengthCounter:s,buttonInstance:r,placeholder:l}=e.getState();const d=e.createChildComponent(Object.assign(t,{componentType:"skuid__inputCss",disabled:i,iconLeft:n,iconRight:o,rightAlign:a,showLengthCounter:s,withButton:r!==undefined,placeholder:l}));return d},useDelay:false}))},608:function(t,i){(function(e){let t=e.$,i=e.utils,n=e.builder,o=n.core,a=i.makeXMLDoc;o.registerBuilder(new o.Builder({id:"condition",name:"Condition",hideFromComponentsList:true,hideWrapper:true,isInToolbar:true,handleStateEvent:function t(i,n,a){if(n.type==="model.remove"||n.type==="model.idChange"){o.handleModelRemove(i,n,{component:a});if(o.handleModelIdChange(i,n)){if(a)e.events.publish("skuidBuilderComponentNeedsRefresh",[a])}}},defaultStateGenerator:function e(t){let i=a('<condition type="fieldvalue" value="" enclosevalueinquotes="true"/>'),n=t&&t.model&&o.getDataSourceFromModel(t.model);if(n&&n.dataSourceTypeName==="REST"){i.attr("sourcetype","param")}return i},componentRenderer:function n(s){let r=s.get("xmlState"),l=r.attr("type"),d=r.attr("name"),c=d&&i.startsWith(d,"__autofilter__");s.body.append(t("<div>").addClass("nx-pagebuilder-conditiontag nx-pagebuilder-tag").append(t("<div>").addClass("nx-pagebuilder-tag-icon").append(e.ui.createIcon("sk-webicon-ink:rules")),t("<div>").addClass("nx-pagebuilder-conditionlabel nx-pagebuilder-tag-text").text(o.getConditionDisplayString(r))));s.isSubcondition=r.parent().is("condition")||r.parent().parent().is("condition");if(c){s.body.css("opacity","0.4")}else if(r.attr("state")!=="filterablerequired"){s.addActionItem("","sk-webicon-ink:delete",function(){let e=s.element.parent().parent().parent().data("object");s.remove();e&&e.refresh().select()},s.isSubcondition?"Remove this Sub-Condition":"Remove this Condition",null,"sk-delete-icon")}let u=t("<div>").addClass("nx-pagebuilder-conditionschildren").show(),p=o.getBuilder("condition");let f=function e(t){let i=o.componentFactory(t,p);i.element.css("margin-left","24px");u.append(i.element)};r.children("conditions, condition").each(function(){let e=t(this);if(e.is("conditions")){e.children().each(function(){f(t(this))})}else f(e)});if(!s.isSubcondition&&l==="join"){s.addActionItem("","sk-webicon-ink:add",function(){let e=s.get("xmlState").attr("joinobject"),t=typeof e!=="undefined"&&e!==false;if(l==="join"&&!t){window.alert("You must choose a Join Object for this Condition before creating Sub-Conditions.")}else{let e=s.get("xmlState").children("conditions");if(!e.length){e=a("<conditions/>");s.get("xmlState").append(e)}let t=p.getDefaultState();e.append(t);let i=o.componentFactory(t,p);i.element.css("margin-left","24px");u.append(i.element);s.save()}},"Add a Sub-Condition")}s.body.append(u)},propertiesRenderer:function e(n,a){let s=a.get("xmlState"),r=s.attr("name"),l=r&&i.startsWith(r,"__autofilter__"),d=s.closest("model"),c=d.attr("id"),u=o.getDataSourceFromModel(d),p=u.getDataSourceType(),f=p.prop("composer.modelConditionLabel")||"Condition",h=t("<div>").css("height","100%"),m,g=s.find("picklistentries > entry"),b,v,y,C;n.setTitle(f||" Properties");function _(e){return function(){e.refresh()}}function w(e){return function(){e.rebuildProps&&e.rebuildProps();e.renderProperties&&e.renderProperties(n)}}if(l){h.text("This Condition was automatically generated by a Filter --- it cannot be modified or removed, except by the Filter that created it.").css("padding","8px");n.body.append(h)}else{v=d.attr("sobject");C=p.prop("validConditionTypes");y=p.prop("composer.validConditionStates");b=[];if(!C||!C.length){C=["fieldvalue","multiple","param","userinfo","blank","modelmerge","join"]}else{C=C.slice(0)}if(a.isSubcondition){for(let e=C.length-1;e>=0;e--){if(C[e]==="join")C.splice(e,1)}}m=u.getConditionSourceProperties(a,{handleChange:_,handleRefresh:w});if(!m||m.length===0){m=o.getFieldAndOperatorProperties(a,n)}Array.prototype.push.apply(b,m);b.push({label:"Value",deleteable:false,linkedComponent:a,summaryFunction:function e(t){return o.conditionDescriptionRenderers.value(t,v)},propsFunction:function e(t){return o.getConditionValueProperties(a,{handleChange:_(t),handleRefresh:w(t),validTypes:C,modelName:c,picklistEntries:g})}},{label:"State",deleteable:false,linkedComponent:a,summaryFunction:function e(t){return o.conditionDescriptionRenderers.state(t,f.toLowerCase())},propsFunction:function e(t){return o.getConditionStateProperties(a,{handleChange:_(t),modelName:c,handleRefresh:w(t),validStates:y})}});n.applyProps({tree:b},s)}}}))})(e)},609:function(t,i){(e=>{const t=e.$,i="skuid-native-update-user-location",n="skuid-native-sort-by-proximity",o="skuid-native-add-distance-and-time-data",a="skuid-native-open-in-map",s="skuid-native-send-push-notifications",r="skuid-native-share",l="skuid-native-take-picture",d="skuid-native-access-photo-library",c="skuid-native-scan-barcode",u=e.builder,p=u.core,f=p.native={};function h(){return e.platform.hasFeature("Native")}f.addActions=(()=>{return h()?[{value:"-",label:"",disabled:true},{value:"-",label:"Geolocation actions",disabled:true},{value:i,label:"Refresh user location"},{value:n,label:"Sort rows by driving distance from user"},{value:o,label:"Show distance and estimated travel time"},{value:a,label:"Open address in map application"},{value:"-",label:"",disabled:true},{value:"-",label:"Native mobile actions",disabled:true},{value:s,label:"Send push notifications"},{value:r,label:"Share content"},{value:l,label:"Take a Picture"},{value:d,label:"Access Photo Library"},{value:c,label:"Scan Barcode"}]:[]});f.appendActionProps=((d,c,u,p)=>{if(d===i){return}if(d===n||d===o){c.push({label:"Model",type:"model",id:"model",value:p},{label:"Address field(s)",id:"address",helptext:"A merge template used to create a full address string for each row in the model, which is then used for geolocation functionality.",type:"template",value:"{{streetline}} {{city}} {{state}}",location:"attribute"})}if(d===a){c.push({label:"Address field(s)",id:"address",helptext:"Result will be used as target address",type:"template",value:"{{streetline}} {{city}} {{state}}",location:"attribute"})}if(d===o){c.push({label:"Units",id:"units",type:"picklist",defaultValue:"imperial",picklistEntries:[{label:"Imperial",value:"imperial"},{label:"Metric",value:"metric"}]},{id:"distance-field",type:"field",label:"Field to display drive distance",modelprop:"model"},{id:"duration-field",type:"field",label:"Field to display estimated trip time",modelprop:"model"})}if(d===s){let i=[];c.push({id:"app",label:"App",type:"combobox",entries:function n(){if(i.length)return i;return e.ajax.direct({method:"GET",url:"/api/v1/native-service/proxy/apps",contentType:"application/json",headers:{"skuid-organization":e.utils.userInfo.organizationId}}).then(function(e){i=t.map(e.body,function(e){return{label:e.name,value:e.id}});return i})},state:u.get("xmlState")},{id:"method",type:"picklist",label:"Type",defaultValue:"model",picklistEntries:[{label:"Model",value:"model"},{label:"All Users",value:"all"}],onChange:function e(){u.refresh().rebuildProps()}});if(u.get("xmlState").attr("method")!=="all"){c.push({id:"model",type:"model",label:"Model with User IDs"},{id:"field",type:"field",label:"User ID field",helptext:"A field that contains Skuid Platform user IDs",modelprop:"model"})}c.push({id:"title",type:"template",helptext:"Header text of the push notification",label:"Notification Title",location:"attribute"},{id:"body",type:"template",helptext:"Body text of the push notification",label:"Notification Body",location:"attribute"})}if(d===r){c.push({label:"URL (optional)",id:"url",type:"template",value:"",location:"attribute"},{label:"Message",helptext:"Default message to include if selected sharing method includes a message.",id:"message",type:"template",value:"",location:"attribute"},{label:"Sharing widget title",id:"title",type:"template",value:"",location:"attribute"})}if(d===l){c.push({label:"Save Picture to Photo Library",id:"savetodevice",type:"boolean",value:false,location:"attribute"})}});f.getNativeCategory=(()=>{return{name:"Native",props:[{id:"ask-location-on-page-load",type:"boolean",label:"Ask for user's location before page load"}]}})})(e)},610:function(t,i){(function(e){let t=e.$,i=e.builder,n=i.core,o=e.utils,a=o.makeXMLDoc,s=e.constants.DISPLAY_TYPES,r=[s.INTEGER,s.NUMBER,s.PERCENT,s.CURRENCY,s.DOUBLE],l=100,d=1e3;let c=i.listHelper={isNumericType(e,t){if(!t)return false;const i=n.getFieldInfoFromCache(t,e),o=i&&i.displaytype;return!!(o&&r.includes(o))},fieldStateGenerator(e){let t=a("<".concat(e.fieldNodeName||"field","/>"));if(e){if(e.fieldName){e.label=o.camelToTitle(e.fieldName)}e.fieldId&&t.attr("id",e.fieldId);e.fieldName&&t.attr("name",e.fieldName);e.label&&t.attr("label",e.label);if(e.isChildRelationship){t.attr({type:"CHILDREL",label:o.camelToTitle(e.fieldId||"Child Relationship"),delimiter:", "})}else if(e.componentId==="template"){t.attr({type:"COMBO",label:"Template"})}}return t},getSection:function e(i,n){n=n||{};let o=t("<div>").addClass("nx-componentsection").css("width",n.width||"25%").append(t("<div>").addClass("nx-componentsection-header").append(t("<span>").addClass("nx-componentsection-header-actiontext").text(n.label||""),t("<span>").addClass("nx-componentsection-header-actionicon").text("ADD").skootip(n.tip||"").click(function(e){e.stopPropagation();n.addItemFunction&&n.addItemFunction()}))),a=t("<div>").appendTo(o);if(n.parentStateSelector){a.sortableComponent({axis:"y",component:i,parentStateSelector:n.parentStateSelector})}return{section:o,container:a}},actionBuilder:function o(s,r){let l=s.get("xmlState"),d=s.builder;r=t.extend(true,{componentLabel:d&&d.name||""},r);return new n.Builder({id:"action",name:"Action",hideWrapper:true,componentRenderer:function i(n){let o=n.get("xmlState"),a=o.attr("label"),r={multi:"Run Multiple Actions"},d=o.attr("icon"),u=o.attr("type"),p=n.body,f="nx-componentsection-icon";if(!a){a=e.$L(r[u]||"action")}if(!d){d="sk-webicon-ink:magic-wand"}if(d){p.prepend(e.ui.createIcon(d,{additionalClass:f}))}p.append(t("<div>").addClass("nx-componentsection-body").text(a));n.addActionItem("","sk-webicon-ink:delete",function(){let e=o.parent(),t=o.siblings();n.remove();s.buildRowActionsPreview&&s.buildRowActionsPreview();if(t.length===0){s.handleOptionChange();if(e.is("massactions"))s.massActionsBtn.hide();else if(e.is("actions"))s.globalActionsBtn.hide()}},null,null,"ui-button nx-button-destructive sk-delete-icon");p.off("dblclick").on("dblclick",function(e){c.actionOnClickHandler({action:n,state:o,event:e,getModelName:function e(){return l.attr("model")}})})},propertiesRenderer:function e(o,l){o.setTitle(r.componentLabel+" Action Properties");let d=s.get("xmlState").attr("model"),c=l.get("xmlState"),u,f=c.parent(),h=f.is("rowactions"),m={id:"type",type:"picklist",label:"Action Type",defaultValue:"multi",picklistEntries:[{label:"Run Multiple Actions",value:"multi"},{label:"Go to URL",value:"redirect"}],onChange:function e(t,i){let n=c.children("actions");if(t==="multi"&&!n.length){let e=a("<actions/>"),t;if(i==="redirect"){t=a('<action type="redirect"/>').attr({url:c.attr("url"),window:c.attr("window")})}if(t){t.appendTo(e);e.appendTo(c)}}if(i==="multi"&&n.length){n.remove()}if(t!=="redirect")c.removeAttr("url window");l.save().rebuildProps().refresh();s.buildRowActionsPreview&&s.buildRowActionsPreview()}},g=m.picklistEntries;p(c,d);u=c.attr("type");if(r.permittedMassActions&&r.permittedMassActions.length){let e=[];t.each(g,function(t,i){if(r.permittedMassActions.indexOf(i.value)>-1){e.push(i)}});g=e;m.picklistEntries=e}let b={id:"label",type:"string",label:"Action Label",onChange:function e(){l.refresh()}},v={id:"snippet",type:"string",label:"Snippet Name"},y={id:"icon",type:"icon",label:"Action Icon",defaultValue:"",onChange:function e(){l.refresh();s.buildRowActionsPreview()}},C={id:"url",type:"template",displayAs:"input",location:"attribute",label:"URL",helptext:"The URL to redirect the user to when this Action is selected. Can include template syntax, e.g. '/{{Model.KeyPrefix}}'"},_={id:"window",type:"picklist",label:"Open URL in",defaultValue:"self",picklistEntries:[{label:"Current window",value:"self"},{label:"Blank window",value:"blank"},{label:"Parent window",value:"parent"}]},w={id:"appendorprepend",type:"picklist",label:"Place row...",defaultValue:"prepend",picklistEntries:[{label:"At start of table",value:"prepend"},{label:"At end of table",value:"append"}]},x={parentComponent:l,getContextModelName:function e(){return s.get("xmlState").attr("model")}},k={redirect:[m,b,y,C,_],createrow:[m,w,y,b],custom:[m,b,y,v],drawer:[m,b,y].concat(i.getDrawerProps(x)),massupdate:[m,y],massedit:[m,y],massdelete:[m,y],edit:[m,y],delete:[m,y],multi:[m,b,y]},S=[{name:"Basic",props:k[u]||[m]}];if(u==="multi"){let e=[];if(s.get("xmlState")[0].tagName==="skuid__table"){e.push(i.getDrawerActionOption(x))}S.push(n.getActionsCategory({getModelName:()=>s.get("xmlState").attr("model"),linkedComponent:l,additionalActionOptions:e}))}if(!h){S.push(n.getHotkeysCategory({linkedComponent:l}))}S.push(n.getRenderingCategory({component:l,model:h?d:null,propViewer:o}));o.applyPropsWithCategories(S,c)},defaultStateGenerator:function e(){return a('<action type="multi" label="Run actions" icon="sk-webicon-ink:magic-wand"/>')}})},actionOnClickHandler:function e(o){let a=o.action,s=o.event,r=o.getModelName,l=s.type==="dblclick",d=o.state||a.data("state"),c=d.attr("type"),u=n.getCanvasComponentFromState(d),p=i.desktop;if(l&&p){let e={parentComponent:u,getContextModelName:r};let i=function e(i){return t.extend({},i,{useAfterCloseActions:true})};if(c==="multi"){let o=d.children("actions").children();if(o.length){t.each(o,function(){let o=t(this),a=o.attr("type");if(a==="showModal"||a==="drawer"){e.parentComponent=n.getCanvasComponentFromState(o);e.parentState=o;if(a==="drawer"){p.showDrawerBuilder(e)}else{p.showModalBuilder(i(e))}return false}})}}}else{u&&u.select()}s.stopPropagation()},interactionBuilder:function i(o){let s=o.get("xmlState");return new n.Builder({id:"interaction",name:"Interactions",hideWrapper:true,componentRenderer:function i(n){let a=n.get("xmlState"),r={tap:"Click",swipe:"Swipe",swiperight:"Swipe Right",swipeleft:"Swipe Left",press:"Press"},l=a.attr("type"),d=a.attr("icon"),u=n.body,p=r[l],f="nx-componentsection-icon";switch(l){case"tap":d="sk-webicon-ink:delete";f+=" delete-action";break;case"swipe":d="sk-webicon-ink:edit";break;case"swiperight":d="sk-webicon-ink:edit";f+=" edit-action";break;case"swipeleft":d="sk-webicon-ink:delete";break;case"press":d="sk-webicon-ink:edit";break;default:d="sk-webicon-ink:magic-wand"}if(d){u.prepend(e.ui.createIcon(d,{additionalClass:f}))}u.append(t("<div>").addClass("nx-componentsection-body").text(p));n.addActionItem("","sk-webicon-ink:delete",function(){let e=a.parent(),t=a.siblings();n.remove();o.buildRowActionsPreview&&o.buildRowActionsPreview();if(t.length===0){o.handleOptionChange();if(e.is("massactions"))o.massActionsBtn.hide();else if(e.is("actions"))o.globalActionsBtn.hide()}},null,null,"ui-button nx-button-destructive sk-delete-icon");u.off("dblclick").on("dblclick",function(e){c.actionOnClickHandler({action:n,state:a,event:e,getModelName:function e(){return s.attr("model")}})})},propertiesRenderer:function e(t,i){t.setTitle("Interactions");t.applyPropsWithCategories([{name:"Interaction",tree:n.getInteractionTree({linkedComponent:i,isChild:false,refreshLinkedComponent:true,deleteable:false,getModelName:()=>s.attr("model")})}],i.get("xmlState"))},defaultStateGenerator:function e(){return a('<interaction type="press" direction="either">'+'<action type="showPopup">'+"<models/>"+'<popup title="{{Model.label}}: {{Name}}" width="80%">'+"<components/>"+"</popup>"+"</action>"+"</interaction>")}})},massActionsButtonBuilder:function e(t){return u(t,"mass")},globalActionsButtonBuilder:function e(t){return u(t,"global")},exportPropertiesBuilder:function i(o){return new n.Builder({id:"exportProperties",name:"Export Properties",componentRenderer:function i(n){n.body.append(t("<div>").append(e.ui.createIcon("sk-webicon-ink:export-page",{additionalClass:"nx-componentsection-icon"})),t("<div>").addClass("nx-componentsection-body").text("Export Options"))},propertiesRenderer:function e(t,i){const n=i.get("xmlState");t.setTitle("Export Properties");t.applyPropsWithCategories([c.getExportTab(i,{parentId:o,state:n})],n)},hideWrapper:true,defaultStateGenerator:function e(){return c.getExportDefaultState()}})},getExportTab:function e(t,i={}){const o=i.parentId||t.getCPI().getBuilder().id,s="appendRowIdColumn",r="loadAllRecords",l="useTableColumns",d="headerType";let c=i.state||t.get("xmlState").children("exportProperties").first(),u=c.closest(o).attr("model"),p=c.attr(l)==="true",f=[{id:l,label:"Use Table Columns as Export Columns",helptext:"If this is unchecked, you can specify which fields are exported.",type:"boolean",onChange(){t.rebuildProps()}}],h=[{label:"Export Options",icon:"sk-webicon-ink:export-page",linkedComponent:t,state:c,deleteable:false,props:f}];if(p){f.push({id:s,label:"Append Row Id Column",helptext:"By default, Skuid export will append a column containing the Id of each exported row. Uncheck to prevent this column from being added.",defaultValue:true,type:"boolean"})}f.push({id:r,label:"Attempt to Load in All Records Before Export",helptext:"If this is checked, Skuid will attempt to load in the full dataset before performing the export. (Max 10,000 Records)",type:"boolean"},{id:"filename",label:"Custom File Name",helptext:"A custom name to use for the exported file. Can contain template fields. If blank, an auto-generated file name will be used.",type:"string"});if(c.attr(l)!=="true"){h.push({id:"columns",label:"Export Columns",icon:"sk-bi-fields",linkedComponent:t,deleteable:false,isChild:true,children:[{id:"column",indent:1,addtooltip:"Add New Column",labelFunction(e){let t,i=e.attr("type"),o,a,s,r;if(i==="field"){o=e.attr("field");if(o){t=n.getFieldInfoFromCache(u,e.attr("field"));if(t){r=t.id;a=e.attr(d);if(a==="fieldlabel"){s=t.label}else if(a==="apiname"){s=t.id}else{s=e.children("label").first().text()||e.attr("label")}}else{r="[No Field Selected]"}}else{r="[No Field Selected]"}}else if(i==="template"){r=e.children("template").first().text();s=e.children("label").first().text()||e.attr("label")}else{return""}return(r||"")+(s?" ("+s+")":"")},defaultStateFunction(){return a('<column type="field" '.concat(d,'="fieldlabel"/>'))},propsFunction(e){const t=[],i=e.get("xmlState"),n={id:"type",label:"Column Type",type:"picklist",picklistEntries:[{label:"Field",value:"field"},{label:"Template",value:"template"}],onChange(){e.refresh().rebuildProps()}};t.push(n);let o={id:"field",type:"field",label:"Field",modelname:u,addFieldToModel:true,onChange(){e.refresh()}};let a={id:"template",type:"template",label:"Template",displayAs:"input",onChange(){e.refresh()}};let s={id:d,label:"Header Type",type:"picklist",location:"attribute",picklistEntries:[{label:"Use Field Label",value:"fieldlabel"},{label:"Use Field API Name",value:"apiname"},{label:"Custom Label",value:"custom"}],onChange(){e.refresh().rebuildProps()}};let r={id:"label",type:"template",label:"Label",displayAs:"input",location:"attribute",onChange(){e.refresh()}};if(i.attr("type")==="field"){t.push(o,s);if(i.attr(d)==="custom"){t.push(r)}}else if(i.attr("type")==="template"){t.push(a,r)}return t}}]})}return{name:"Export",tree:h,state:c}},getExportDefaultState:function e(){return a('<exportProperties useTableColumns="true"/>')},addFeatureActions:function e(t,i){let o=t.get("xmlState"),e={},s,r,l,d,u;i=i||{};if(i.views&&i.viewsContainer){s=c.viewBuilder();e.addView=function(){if(!o.children("views").length){o.append(a("<views />"));t.save()}let e=s.getDefaultState(),r;o.children("views").first().append(e);r=n.componentFactory(e,s);t.save();i.viewsContainer.append(r.element);r.select();t.buildRowActionsPreview&&t.buildRowActionsPreview();t.handleOptionChange&&t.handleOptionChange()}}if(i.massActions&&i.massActionsContainer){r=c.massActionsButtonBuilder(t),d=c.actionBuilder(t,i);e.addMassAction=function(){if(o.children("massactions").length===0){let e=r.defaultStateGenerator();o.append(e);let i=n.componentFactory(e,r);t.massActionsBtn=i.element;t.globalAndMassWrapper.append(i.element);t.save()}else if(t.massActionsBtn.is(":hidden"))t.massActionsBtn.show();let e=d.getDefaultState("multi"),a;o.children("massactions").append(e);a=n.componentFactory(e,d);t.save();i.massActionsContainer.append(a.element);a.select()}}if(i.globalActions&&i.globalActionsContainer){l=l||c.globalActionsButtonBuilder(t);d=d||c.actionBuilder(t,i);e.addGlobalAction=function(){if(o.children("actions").length===0){let e=l.defaultStateGenerator();o.append(e);let i=n.componentFactory(e,l);t.globalActionsBtn=i.element;t.globalAndMassWrapper.append(i.element);t.save()}else if(t.globalActionsBtn.is(":hidden"))t.globalActionsBtn.show();let e=d.getDefaultState("multi");o.children("actions").append(e);let a=n.componentFactory(e,d);t.save();i.globalActionsContainer.append(a.element);a.select()}}if(i.rowActions&&i.rowActionsContainer){d=d||c.actionBuilder(t,i);e.addRowAction=function(){if(t.get("xmlState").children("rowactions").length===0){t.get("xmlState").append(a("<rowactions/>"));t.save()}let e=d.getDefaultState("multi");t.get("xmlState").children("rowactions").first().append(e);let o=n.componentFactory(e,d);t.save();i.rowActionsContainer.append(o.element);o.select();t.buildRowActionsPreview();t.handleOptionChange()}}if(i.interactions&&i.interactionsContainer){u=u||c.interactionBuilder(t,i);e.addInteraction=function(){if(t.get("xmlState").children("interactions").length===0){t.get("xmlState").append(a("<interactions/>"));t.save()}let e=u.getDefaultState();t.get("xmlState").children("interactions").first().append(e);let o=n.componentFactory(e,u);t.save();i.interactionsContainer.append(o.element);o.select();t.handleOptionChange()}}if(i.filters){e.addFilter=function(){if(o.children("filters").length===0){o.append(a("<filters/>"));t.save()}let e=n.getBuilder("filter"),s=e.getDefaultState();o.children("filters").first().append(s);let r=n.componentFactory(s,e);t.save();t.filterWrapper.append(r.element);if(!i.filterSetFocus){r.select()}t.handleOptionChange()}}return e},propertiesFactory:{pageSize(e){return Object.assign({id:"pageSize",type:"picklist",label:"Visible Rows",defaultValue:"10",noticeText:"The number of rows shown in the component preview while building does not reflect the number of rows rendered at runtime.",picklistEntries:[{label:"5",value:"5"},{label:"10",value:"10"},{label:"25",value:"25"},{label:"50",value:"50"},{label:"Show All",value:"Infinity"}]},e)},mode(e){return Object.assign({id:"mode",label:"Display as",type:"picklist",defaultValue:"read",picklistEntries:[{label:"Read with inline-editing",value:"read"},{label:"Edit",value:"edit"},{label:"Read-only",value:"readonly"}]},e)},resetPaginationOnQuery(){return{id:"resetPaginationOnQuery",label:"Reset Pagination on Query",type:"boolean",defaultValue:true}},showListHeader(e){return Object.assign({id:"showListHeader",type:"boolean",label:"Show header",helptext:"Shows the section that contains actions, filters, title, save/cancel, and table configuration button. NOTE: the functionality of these features will not be available if they are hidden",defaultValue:true},e)},showListFooter(e){return Object.assign({id:"showListFooter",type:"boolean",label:"Show footer",helptext:"Shows the section that contains page size select, load more button, as well as the pagination. NOTE: the functionality of these features will not be available if they are hidden",defaultValue:true},e)}},renderHeaderFooterVisibilityHelper(e){const i=o.capitalizeFirst(e),n=e;return t("<span>").text("(".concat(i," hidden)")).skootip("".concat(i," will not show up in runtime. To show the ").concat(n,' check the "Show ').concat(n,"\" checkbox under Display > Other in this table's properties.")).css({float:"right",margin:"8px",color:"#666666"})},updateNumRowsInModel(e,t,n={}){const o=i.getModelFromModelName(t)[0];const a=e=>o.getAttribute(e);const s=n.createRowData;let r=1;if(o){if(a("query")==="false"||a("datasource")==="Ui-Only"){r=1}else if(a("limit")){const e=Number.parseInt(a("limit"));r=Number.isNaN(e)?r:e}else{r=l}}r=Math.min(d,r);if(e.getRows().length===r)return;e.emptyData();for(let t=r-1;t>=0;t--){const i=e.createRow();e.updateRow(i,Object.assign({index:t},s?s(t):undefined))}e.save()},goToPageActionProps:{value:"goToPage",type:"picklist",label:"Go to page",props:[{id:"targetPage",label:"Target page",type:"picklist",defaultValue:"first",entries:[{value:"first",label:"First page"},{value:"last",label:"Last page"},{value:"previous",label:"Previous page"},{value:"next",label:"Next page"}]}]}};function u(o,s){let r,l;if(s==="global"){r="Global Actions";l="actions"}else{r="Mass Actions";l="massactions"}return new n.Builder({id:"actions",name:r,hideWrapper:true,componentRenderer:function i(n){r=n.get("xmlState").attr("defaultlabel")||r;n.body.css("padding","0px");let o=t("<div>").css("margin","0px").addClass("nx-actionselect nx-actionbutton"),a=n.get("xmlState").attr("defaulticon");t("<div>").addClass("nx-actionselect-text").text(r).appendTo(o);let l;if(a&&n.get("xmlState").attr("usefirstitemasdefault")==="true"){l=t("<div>").addClass().append(e.ui.createIcon(a,{additionalClass:"nx-actionselect-icon"}));o.prepend(l)}o.appendTo(n.body);if(s!=="mass"&&n.get("xmlState").attr("usefirstitemasdefault")==="true")l&&l.hide()},propertiesRenderer:function e(t,o){t.setTitle(r+" Properties");let a=o.get("xmlState"),l={id:"usefirstitemasdefault",type:"boolean",label:"Use First Item as Default Selection",defaultValue:true,onChange:function e(){o.rebuildProps().refresh()}},d={id:"defaultlabel",type:"string",label:"Button Label",defaultValue:a.attr("defaultlabel")||r,onChange:function e(){o.refresh()}},c={id:"defaulticon",type:"icon",label:"Button Icon",defaultValue:"sk-webicon-ink:magic-wand",onChange:function e(){o.refresh()}},u=[];if(s==="global"){u.push(l)}if(a.attr("usefirstitemasdefault")==="false"&&s==="global"){u.push(d,c)}u.push(n.coreProps.uniqueIdProp({component:o}),i.cssClassProp);t.applyProps(u,a,{mode:t.mode})},defaultStateGenerator:function e(){return a("<"+l+"/>").attr({defaultlabel:r,defaulticon:"sk-webicon-ink:magic-wand",usefirstitemasdefault:"true"})}})}function p(e,t){if(e.attr("type")!=="createrow")return;let i=a("<actions/>"),n=a("<action/>");e.attr("type","multi");if(!e.attr("icon")){e.attr("icon","sk-webicon-ink:add")}n.attr({type:"createRow",model:t,appendorprepend:e.attr("appendorprepend"),defaultmodefornewitems:"edit"});i.append(a("<defaults/>"),n);e.removeAttr("appendorprepend");e.append(i)}})(e)},611:function(t,i){(function(e){if(e.platform.getName()===e.constants.NATIVE)return;const t=e.$,i=e.time,n=e.utils,o=e.model,a="undefined",s="number",r="function",l="string",d=e.collaboration||(e.collaboration={}),c="pageInteractions",u={};t.extend(d,{serviceTypes:{PAGE_INTERACTIONS:c},register:p,getActiveServices:h,destroyAll:m});function p(e){e||(e={});let t=e.type,i,n,o;switch(t){case c:u[c]||(u[c]=[]);n=e.pageId;o=e.listener;i=O({pageId:n,listener:o,maxInteractionAge:e.maxInteractionAge,schedulerStateChangedHandler:e.schedulerStateChangedHandler,updateInterval:e.updateInterval});u[c].push(i)}if(i){i.getType=function(){return c};let e=i.destroy;i.destroy=function(){if(typeof e===r)e();f(i)}}return i}function f(e){let t=e.getType();u[t]=u[t].filter(function(t){return t!==e})}function h(e){e||(e={});if(typeof e===l)e={type:e};let i=e.type,n=i&&u[i],o=[];if(n)o=n.slice(0);else{t.each(u,function(e,t){o=o.concat(t)})}return o}function m(e){let t=h(e);if(t)t.forEach(function(e){e.destroy()})}let g={},b=false,v=60,y=4,C=60,_="mousemove.pgIntSvc click.pgIntSvc keydown.pgIntSvc scroll.pgIntSvc",w="composerOpened",x="composerUnsavedChanges",k=[w,x],S="skuid__Page_Interaction__c",I="Id",T="skuid__Page__c",A="skuid__User__c",P="skuid__User__r",E=P+".Name",M=P+".SmallPhotoUrl",D="skuid__Type__c",N="skuid__Data__c",F="LastModifiedDate";d.interactions={flags:{IT_COMPOSER_OPENED:w,IT_COMPOSER_UNSAVED_CHANGES:x}};function O(e){e||(e={});if(typeof e.pageId===a||typeof e.listener!==r)return;return R(e)}function R(s){s||(s={});let l=s.pageId,d=function e(){return n.userInfo.userId},c=g[l],u={},p={},f=function e(){return n.size(p)>0},h=false,m=e.page.params.disablepolling||e.settings.composer("disableCollaborationPolling")?true:false;if(typeof l===a)return;if(c){c.registerListener(s.listener);return c}let P=s.maxInteractionAge||v,O=new o.Model({id:"sk-pi-"+n.generateGUID(),objectName:S,fields:[{id:I},{id:T},{id:A},{id:E},{id:M},{id:D},{id:N},{id:F}],conditions:[new o.Condition({field:T,value:l}),new o.Condition({field:D,type:"multiple",operator:"in",values:[w,x]}),new o.Condition({field:F,name:"LastMod",operator:"gte",value:i.getSFDateTime(ie({age:P})),encloseValueInQuotes:false}),new o.Condition({field:A,value:d()})],conditionLogic:"(1AND2AND(3OR4))",doQuery:true,preventUnloadIfUnsavedChanges:false,recordsLimit:100,needsMetadataLoad:true}),R=s.listener?[s.listener]:[],L=(s.updateInterval||y)*1e3,j=H({interval:L,callback:q,hibernateTimeout:C,hibernate:true,stateChangedHandler:s.schedulerStateChangedHandler}),U=false,V=false;if(!m){O.initialize().register().load().then(function(){if(h)return;z();j.resume()});t(window).on(_,j.keepAwake)}return{registerListener:te,reportComposerOpened:W,reportComposerClosed:G,reportComposerUnsavedChanges:Y,reportComposerChangesSaved:X,reportComposerChangesCancelled:K,resetPreviousReports:$,getCurrentUsersInteractions:Z,getCurrentUsersInteractionsMap:ee,destroy:ne};function q(){if(U){if(f()){V=true}return}else{z()}}function z(e){if(h)return;e||(e={});if(U){return}let o=j.getState()===B,s=e.isInitial===true;if(o)j.hibernate();U=true;const l=function e(){if(h)return;if(V){setTimeout(function(){U=false;V=false;z()},0)}else{U=false}if(o)j.resume()};const c=function e(){if(h)return;m().then(l,l)};f().then(c,c);return;function f(){let i={};t.extend(i,p||{},e.interactions||{});if(typeof i[w]===a){i[w]={type:w}}t.each(i,function(e,t){if(k.indexOf(e)===-1)return true;let i=J({type:e}),n=t.data||JSON.stringify({timestamp:Date.now()}),o=t.cancel,a,s={};if(o&&i.length===0)return;if(o){O.deleteRows(i)}else if(i.length===0){a=O.createRow();s[D]=e;s[N]=n;O.updateRow(a,s)}else{if(i.length>1){O.deleteRows(i.slice(1))}s[N]=n;O.updateRow(i[0],s)}});return O.save().then(function(){p={}}).catch(function(){O.cancel()})}function m(){let e=n.Deferred();if(b===true){e.resolve();return e.promise()}if(O.hasChanged)O.cancel();O.updateData(null,{syncOnly:!s}).then(function(){let t={},o=[];u=O.getRows().reduce(function(e,a){let s=function e(t){return O.getFieldValue(a,t,true)},r=s(T),l=s(A),c=s(I),u=s(D),p=s(N),f=i.parseSFDateTime(s(F)),h=t[r];if(!h){h=t[r]={id:r,usersMap:{},users:[]};o.push(h)}let m=h.usersMap,g=h.users,b=h.usersMap[l];if(!b){b=m[l]={id:l,name:s(E),photoUrl:s(M)||n.getDefaultImageUrl("person"),interactionsMap:{},interactions:[]};g.push(b)}let v={id:c,type:u,data:p,lastModified:f};b.interactionsMap[u]=v;b.interactions.push(v);if(l===d()){e[u]={type:u}}return e},{});R.forEach(function(e){if(typeof e===r){e(o)}});e.resolve()}).catch(function(){e.resolve()});return e.promise()}}function W(){return Q({type:w})}function G(){b=true;return Q([{type:w,cancel:true},{type:x,cancel:true}])}function Y(){return Q({type:x})}function X(){return Q({type:x,cancel:true})}function K(){return Q({type:x,cancel:true})}function $(){if(h)return;t.each(p,function(e,t){t.cancel=true});Q(Z().map(function(e){return{type:e.type,cancel:true}}))}function Q(e){if(h)return;if(!t.isArray(e))e=[e];let i=false;e.forEach(function(e){let t=e.type;i=i||!(t in u)||e.cancel===true;p[t]=e});if(i)q()}function J(e){return O.getRows([{field:T,value:l},{field:A,value:d()},{field:D,value:e.type}])}function Z(){if(h)return[];return O.getRows().filter(function(e){return e.skuid__User__c===d()}).map(function(e){return{type:e.skuid__Type__c}})}function ee(){return Z().reduce(function(e,t){e[t.type]=t;return e},{})}function te(e){if(h)return;if(e&&typeof e.listener===r){R.push(e.listener)}}function ie(e){let t=e.age||NaN,i=new Date;return new Date(i.setMinutes(i.getMinutes()-t))}function ne(){if(h)return;h=true;t(window).off(_);j.hibernate();j=null;delete g[l];u={};p={};O.unregister();O=null}}let L="unstarted",B="running",j="hibernating",U="restarting",V="processing";d.schedulerService={flags:{STATE_UNSTARTED:L,STATE_RUNNING:B,STATE_HIBERNATING:j,STATE_RESTARTING:U,STATE_PROCESSING:V}};function H(e){let t=e.interval,i=e.callback,n=e.callbackParams||{},o=null,a=e.hibernateTimeout||Infinity,l=Date.now(),d=false,c=e.hibernate===true,u=e.stateChangedHandler,p=L;if(typeof t!==s||typeof i!==r)return;if(!c)m();return{hibernate:g,resume:b,getState:h,keepAwake:y};function f(e){let t=p;if(t===e)return;p=e;if(typeof u===r)u(e,t)}function h(){return p}function m(){d||(d=true);if(h()===B){f(U);g()}o=window.setTimeout(v,t);f(B)}function g(){if(h()===L&&h()===j)return;window.clearTimeout(o);o=null;f(j)}function b(){if(h()===B||h()===U)return;if(h()===j)f(U);m()}function v(){f(V);o=null;let e=i(n)||{};if(typeof e.always===r){e.then(t,t)}else{t()}function t(){let e=(Date.now()-l)/1e3;if(e<a){m()}else{f(j)}}}function y(){l=Date.now();if(h()===j){m()}}}})(e)},612:function(t,i){(e=>{if(e.platform.getName()===e.constants.NATIVE)return;let t=e.builder,i=t.core,n=e.collaboration,o=n.schedulerService.flags,a=n.interactions.flags,s=e.events,r=s.subscribe,l=e.$M,d=e.$C,c=e.utils,u="page",p="collaboration-avatars",f=30,h=a.IT_COMPOSER_OPENED,m=a.IT_COMPOSER_UNSAVED_CHANGES,g=[m,h],b="row.updated",v="models.saved",y="models.cancelled",C="beforeunload";class _{constructor(){if(e.collaboration.disablePolling||e.settings.composer("disableCollaborationPolling"))return;const t=this.pageModel=l(u),i=t.getFirstRow(),o=i&&t.getFieldValue(i,"Id"),a=n.register({type:n.serviceTypes.PAGE_INTERACTIONS,pageId:o,listener:this.interactionListener.bind(this),schedulerStateChangedHandler:this.collaborationSchedulerStateChanged.bind(this)});this.prefix="sk-pc-".concat(o,"-").concat(c.generateGUID(),"-");this.component=d(p);a.resetPreviousReports();r(b,e=>{const t=e.modelId;if(t===u){a.reportComposerUnsavedChanges()}});r(v,e=>{if(u in e.models&&e.totalsuccess===true){a.reportComposerChangesSaved()}});r(y,e=>{if(u in e.models){a.reportComposerChangesCancelled()}});window.addEventListener(C,()=>{a.reportComposerClosed()})}collaborationSchedulerStateChanged(e){this.hibernating=e===o.STATE_HIBERNATING}interactionListener(e){if(!Array.isArray(e)||e.length===0)return;let t=e[0],i=t.users.filter(e=>e.id!==c.userInfo.userId);i.forEach(e=>{let t=Number.MAX_SAFE_INTEGER,i=-1;e.interactions.forEach(e=>{t=Math.min(t,g.indexOf(e.type));i=Math.max(i,e.lastModified.getTime())});e._interactionPriority=t+1;e._interactionGroup=g[t];e._lastInteractionDate=new Date(i)});i.sort((e,t)=>{let i=0;let n=e._interactionPriority,o=e._lastInteractionDate.getTime(),a=t._interactionPriority,s=t._lastInteractionDate.getTime();i=n-a;if(i===0){i=(o-s)*-1}return i});this.updateUi({users:i})}parseUser(e){let t=e.id===c.userInfo.userId?"You":e.name,i=((new Date).getTime()-e._lastInteractionDate.getTime())/1e3,n=i>=f,o=e=>'<tooltip compact="true" text="'.concat(e,'"/>'),a=e.name?"text":"icon",s=a==="icon"?"sk-webicon-ink:user":e.name.split(" ").map(e=>e[0]).join(""),r={uniqueId:"collab-avatar-".concat(e.id),styleSettingsVariant:"circular",fallbackType:a,fallback:s,url:e.photoUrl,context:null};if(n){r.styleSettingsVariant="circularInactive";r.tooltip=o("".concat(t," is idle on this page."))}else if(e._interactionGroup===h){r.tooltip=o("".concat(t," is viewing this page."))}else if(e._interactionGroup===m){r.styleSettingsVariant="circularActive";r.tooltip=o("".concat(t," has unsaved changes on this page."))}return r}updateUi(e){let t=e.users,i=[],n={},o=this.avatarMap||{},a=false;t.forEach(e=>{const t=this.parseUser(e);i.push(t);n[t.uniqueId]=true;if(!o[t.uniqueId]){a=true}});if(a){this.component.set("group",i)}else{i.forEach(e=>{const t=d(e.uniqueId);t.set(e)})}this.avatars=i;this.avatarMap=n}}e.events.subscribeOnce("skuid.pageBuilder.complete",()=>{new _});e.snippet.register("CopyCurrentPageState",function(t){let n=t.model,o=t.row,a=e.$M("page"),s=a.getFirstRow();n.updateRow(o,{Name:s.Name+"-"+(new Date).toISOString().replace(/[:.]/g,"-"),skuid__Type__c:s.skuid__Type__c,skuid__API_Version__c:s.skuid__API_Version__c,skuid__Module__c:s.skuid__Module__c,skuid__Composer_Settings__c:s.skuid__Composer_Settings__c,skuid__IsMaster__c:s.skuid__IsMaster__c,skuid__MasterPage__c:s.skuid__MasterPage__c,skuid__Max_Auto_Saves__c:s.skuid__Max_Auto_Saves__c});i.save(i.pageXML[0],n,o)});e.snippet.register("CreateNewPageVersion",function(t){let i=t.context,n=e.snippet.get("addSavedPageVersion"),o=e.$M("versions");n({model:o});i.model=o;i.row=o.getFirstRow()})})(e)},613:function(t,i){const n=e.constants.KEYCODES;(function(e){let t=e.$,i=e.utils,o="focus.skuid",a="click.skuid",s="keydown.navigation.skuid",r=a+" "+s,l;function d(i,r,l,d){r&&r.off("click.skuid").empty();let c=d.actionSelect,u=d.selectItem,p=d.itemDefinition;r.addClass(d.baseClass+"-dropdown-item").attr("tabindex",-1).on(a,function(e){if(c.type!=="button"&&c.list.getSelected()===u){}else{if(!c.hasClass("unavailable")){c.actionSelect("selectItem",u);c.selectBox&&c.selectBox.hide("fast")}e.stopPropagation()}}).data("rendered",true);r.off(s).on(s,function(e){let i=t(this),o=u===c.actionSelect("getSelectedItem");if(o&&(e.which===n.ENTER||e.which===n.SPACE)){i.trigger(a,true);e.stopPropagation()}else if(e.which===n.ESCAPE&&!o){c.selectBox&&c.selectBox.hide("fast");if(c.type==="button"){c.actionArrow.attr("aria-expanded",false).trigger("focus")}else{c.actionText.children().first().attr("aria-expanded",false).trigger("focus")}}else if(e.which===n.ENTER||e.which===n.SPACE){e.stopPropagation();c.actionSelect("selectItem",u,{event:e})}else if(e.which===n.UP||e.which===n.DOWN){let t=i.parent().children(),o=i.index(),a;o=(e.which===n.UP?o-1:o+1)%t.length;a=t.eq(o);a.trigger("focus.skuid")}});r.off(o).on(o,function(e){e.stopPropagation();if(u.onFocus&&typeof u.onFocus==="function"){u.onFocus.apply(this,arguments)}});if(u.content){r.append(u.content)}else{r.text(u.label)}if(p.icon){r.prepend(e.ui.createIcon(p.icon,{additionalClass:d.baseClass+"-icon inline"}))}if(!c.list.getSelected()){c.actionSelect("selectItem",u,{triggerHandlers:false})}if(!d.isInitialDraw){c.actionSelect("redraw")}}function c(e,t,i,n){let o=n.actionSelect,a=n.selectItem;t.empty().removeClass(n.baseClass+"-dropdown-item").data("rendered",false);o.list.unselectItem(a);if(!n.isInitialDraw){o.actionSelect("redraw")}}l={init:function e(n){let o=this;o.data("component",o);o.config=n||{};o.config.baseClass=o.config.baseClass||"nx-actionselect";o._GUID=o.config.uniqueId||i.generateGUID();o.type=o.config.type?o.config.type:"state-selector";o.addClass(o.config.baseClass).prop("id",o._GUID);o.list=new u;o.onItemSelect=n.onItemSelect||false;o.selectOptionsById={};let a={isInitialDraw:true};n.items&&t.each(n.items,function(e,t){o.actionSelect("addItem",t,a)});o.actionSelect("draw");return o},getSelectedItem:function e(){return this.list.getSelected()},addItem:function n(o,a){a||(a={});let s=new p(o),r=this,l=a.prependInsteadOfAppend||false,u=a.redrawAfterAdd||false,f=o.renderConditionsXML,h=t("<div>"),m={selectItem:s,actionSelect:r,itemDefinition:o,renderConditions:f,isInitialDraw:a.isInitialDraw,baseClass:this.config.baseClass};r.list.addItem(s,l);s.onSelect=o.onSelect||false;s.onFocus=o.onFocus||false;if(f){i.conditionallyRender(d,c,null,h,s.id(),m);if(h.data("rendered")!==true){r.list.unselectItem(s)}}else{d(null,h,s.id(),m)}delete m.isInitialDraw;if(o.hotkeysXML){e.hotkeys.unbind(s.id());e.hotkeys.bind(o.hotkeysXML,s.id(),function(){h.trigger("click.skuid")},r)}r.selectOptionsById[s.id()]=h;return u?r.actionSelect("draw"):r},prepend:function e(t){return this.actionSelect("addItem",t,{prependInsteadOfAppend:true,redrawAfterAdd:true})},append:function e(t){return this.actionSelect("addItem",t,{prependInsteadOfAppend:false,redrawAfterAdd:true})},selectItem:function e(i,n){let o=this,a=o.list,s=a.size(),r,l=false,d=a.selectedIndex,c=a.items[d];if(typeof i!=="undefined"){if(typeof i.value!=="undefined"){r=a.indexOf(i)}else{r=i}}else{throw Error("No Item provided.")}if(s>1){let e;if(c){e=t(o.selectOptionsById[c.id()])}a.selectItem(r);if(a.selectedIndex!==d){l=a.items[a.selectedIndex];if(o.type!=="button"&&!o.config.preventLabelChangeOnSelect){if(c){let t=d-1;if(t!==-1){e.insertAfter(o.selectBox.children().eq(t))}else{e.prependTo(o.selectBox)}}t(o.selectOptionsById[l.id()]).appendTo(o.actionText)}}}else if(s===1){a.selectItem(r)}l||(l=c);if(o.type==="button"||a.selectedIndex!==d||s==1){if(!n||n.triggerHandlers!==false){l&&l.onSelect&&l.onSelect(l,n);o.onItemSelect&&o.onItemSelect(l)}}},safeEmpty:function e(){let t=this;t.actionText&&t.actionText.children().detach();t.selectBox&&t.selectBox.children().detach();t.empty()},redraw:function e(){let t=this;if(!t.needsRedraw){t.needsRedraw=true;t.actionSelect("safeEmpty");setTimeout(function(){if(t.needsRedraw){t.needsRedraw=false;t.actionSelect("draw")}},1)}return t},draw:function a(){let s=this,l=s.list,d=0,c=s.selectOptionsById,u;s.actionSelect("safeEmpty");if(i.size(c)){t.each(c,function(e,t){if(t.data("rendered")){d++}})}let p=function e(){return t(window).innerHeight()/2+"px"};if(d){u=l.getSelected();if(!u){t.each(l.items,function(e,t){let i=t.id(),n=c[i];if(n.data("rendered")){s.actionSelect("selectItem",e,{triggerHandlers:false});u=l.getSelected();return false}})}if(!u)return s;s.actionText=t('<div class="'+s.config.baseClass+'-text">');if(s.type==="button"){s.actionText.append(c[u.id()].clone(true,true))}else{s.actionText.append(c[u.id()])}s.append(s.actionText);if(d>1){let e=s.config.baseClass.indexOf("dropnav")>-1?"":"ui-icon ui-icon-triangle-1-s";s.actionArrow=t('<div class="'+s.config.baseClass+'-arrow">').append(t("<div>").addClass(e));s.append(s.actionArrow);let i=[];if(s.type==="button"){i.push(s.actionArrow);s.actionText.on(r,function(e){if(!(e.type==="click"||e.which===n.ENTER||e.which===n.SPACE))return;e.stopPropagation();s.list.selectItem(s.actionText.index());let t=l.getSelected();t.onSelect&&t.onSelect(t);s.onItemSelect&&s.onItemSelect(t)});s.actionText.attr("tabindex",0)}else{i.push(s)}let a=s.type==="button"?s.actionArrow:s.actionText.children("."+s.config.baseClass+"-dropdown-item");a.attr({tabindex:0,"aria-haspopup":true,"aria-expanded":false});t.each(i,function(){t(this).on(r,function(e,i){if(!(e.type==="click"||e.which===n.ENTER||e.which===n.SPACE))return;let r=this,d=t("<div>").addClass("sk-subnavigation-inner");i=i||false;a.attr("aria-expanded",true);if(e.which===n.ENTER||e.which===n.SPACE)i=true;e.stopPropagation();if(!s.hasClass("unavailable")){if(!s.selectBox||!s.selectBox.children().length){s.selectBox=t('<div class="'+s.config.baseClass+'-dropdown">').css("min-width","100%");if(s.config.maxHeight){if(!s.selectBox.find(".sk-subnavigation-inner").length){s.selectBox.css({"max-height":p});s.selectBox.wrapInner(d.css({"max-height":p}))}if(s.selectBox.hasClass("nx-actionselect-dropdown")){s.selectBox.css({"max-height":s.config.maxHeight,"overflow-y":"auto"});s.selectBox.find(".sk-subnavigation-inner").css("max-height","")}}t.each(l.items,function(e,t){if(t.isSelected!==true){let e=c[t.id()];if(e&&e.data("rendered")){if(s.config.maxHeight){e.children().css({position:"static"});d.append(e)}else s.selectBox.append(e)}}});s.selectBox.appendTo(s);s.trigger("actionselect.populate");let e=t(window).width(),i=s.selectBox.offset().left,n=s.selectBox.width();if(i+n+8>e){s.selectBox.css("right","0px")}s.selectBox.css("display","none").show("fast");let o;s.mouseleave(function(){o=setTimeout(function(){s.selectBox.hide("fast");t(r).attr("aria-expanded",false)},1e3)}).mouseenter(function(){clearTimeout(o)})}else{if(!s.selectBox.parent().length){s.append(s.selectBox)}s.selectBox.toggle("fast")}if(i&&s.selectBox.children().length>0){s.selectBox.children().first().trigger(o)}}})})}else{s.actionText.attr("tabindex",0);s.actionText.on(r,function(e){if(!(e.type==="click"||e.which===n.ENTER||e.which===n.SPACE))return;u.onSelect&&u.onSelect(u);s.onItemSelect&&s.onItemSelect(u)})}}if(s.config.maxHeight){e.events.subscribe("ui.reflow",function(){t(".sk-subnavigation-inner").css({"max-height":p})})}return s}};i.registerPlugin("actionSelect",l);function u(){this.items=[];this.itemsMap={};this.selectedIndex=this.selectedKey=false}u.prototype={getItems:function e(){return this.items},addItem:function e(i,n){let o=this,a=o.items,s;if(!i._GUID){throw Error("Invalid SelectItem.")}if(t.inArray(i,a)!==-1)throw Error("Item is already in the List.");if(i.isSelected){if(o.selectedIndex!==false){a[o.selectedIndex].isSelected=false}}if(n){a.unshift(i)}else{a.push(i)}s=n?0:a.length-1;if(i.isSelected){o.selectedIndex=s;o.selectedKey=i.value}else{if(n&&o.selectedIndex!==false)o.selectedIndex++}o.itemsMap[i.value]=i;if(o.selectedIndex===false){o.selectedIndex=s;o.selectedKey=i.value;i.isSelected=true}},getSelected:function e(){return this.selectedIndex===false?null:this.items[this.selectedIndex]},addItems:function e(i,n){let o=this;i&&t.each(i,function(){o.addItem(this,n)})},size:function e(){return this.items?this.items.length:0},removeItemAtIndex:function e(t){this._validateIndex(t);let i=this.items[t],n=i.isSelected;if(i){if(i.value&&i.value in this.itemsMap){delete this.itemsMap[i.value]}this.items.splice(t,1);i.isSelected=false}if(n!==false){this.selectedIndex=false;this.selectedKey=false;if(this.size()>0)this.selectItemAtIndex(0)}},getItemAtIndex:function e(t){return this.items[t]},getItemById:function e(i){return t.grep(this.items,function(){return this.id()===i})},selectItemAtIndex:function e(t){this._validateIndex(t);if(this.selectedIndex!==false){if(t===this.selectedIndex)return true;else this.items[this.selectedIndex].isSelected=false}this.items[t].isSelected=true;this.selectedIndex=t;this.selectedKey=this.items[t].value},unselectItemAtIndex:function e(t){this._validateIndex(t);if(t===this.selectedIndex){this.items[t].isSelected=false;this.selectedIndex=false;this.selectedKey=false}},_getItemIndex:function e(t){let n;if(i.isNumber(t))n=t;else n=this.indexOf(t);if(n!==-1)return n;else throw Error("Invalid Item")},selectItem:function e(t){this.selectItemAtIndex(this._getItemIndex(t))},unselectItem:function e(t){this.unselectItemAtIndex(this._getItemIndex(t))},removeItem:function e(t){this.removeItemAtIndex(this._getItemIndex(t))},indexOf:function e(i){if(!(i instanceof p)&&i.value&&i.value in this.itemsMap){i=this.itemsMap[i.value]}return i?t.inArray(i,this.items):-1},contains:function e(t){return this.indexOf(t)!==-1},_validateIndex:function e(t){if(t>=this.size()||t<0)throw Error("Invalid Index");return true}};function p(i){let n=this;n._GUID="SelectItem-"+e.runtime.incrementGlobalCounter();if(!i){throw Error("You must provide a configuration object when creating a new SelectItem.")}if(!("value"in i)){throw Error("Value is required.")}t.extend(n,i);if(!("label"in i)){n.label=n.value}n.isSelected||(n.isSelected=false)}p.prototype.id=function(){return this._GUID}})(e)},614:function(e,t,i){var n,o,a;(function(s){if(true){!(o=[i(1),i(12),i(80),i(140),i(46)],n=s,a=typeof n==="function"?n.apply(t,o):n,a!==undefined&&(e.exports=a))}else{}})(function(e){return e.widget("ui.accordion",{version:"1.12.1",options:{active:0,animate:{},classes:{"ui-accordion-header":"ui-corner-top","ui-accordion-header-collapsed":"ui-corner-all","ui-accordion-content":"ui-corner-bottom"},collapsible:false,event:"click",header:"> li > :first-child, > :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var t=this.options;this.prevShow=this.prevHide=e();this._addClass("ui-accordion","ui-widget ui-helper-reset");this.element.attr("role","tablist");if(!t.collapsible&&(t.active===false||t.active==null)){t.active=0}this._processPanels();if(t.active<0){t.active+=this.headers.length}this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:!this.active.length?e():this.active.next()}},_createIcons:function(){var t,i,n=this.options.icons;if(n){t=e("<span>");this._addClass(t,"ui-accordion-header-icon","ui-icon "+n.header);t.prependTo(this.headers);i=this.active.children(".ui-accordion-header-icon");this._removeClass(i,n.header)._addClass(i,null,n.activeHeader)._addClass(this.headers,"ui-accordion-icons")}},_destroyIcons:function(){this._removeClass(this.headers,"ui-accordion-icons");this.headers.children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeAttr("role");this.headers.removeAttr("role aria-expanded aria-selected aria-controls tabIndex").removeUniqueId();this._destroyIcons();e=this.headers.next().css("display","").removeAttr("role aria-hidden aria-labelledby").removeUniqueId();if(this.options.heightStyle!=="content"){e.css("height","")}},_setOption:function(e,t){if(e==="active"){this._activate(t);return}if(e==="event"){if(this.options.event){this._off(this.headers,this.options.event)}this._setupEvents(t)}this._super(e,t);if(e==="collapsible"&&!t&&this.options.active===false){this._activate(0)}if(e==="icons"){this._destroyIcons();if(t){this._createIcons()}}},_setOptionDisabled:function(e){this._super(e);this.element.attr("aria-disabled",e);this._toggleClass(null,"ui-state-disabled",!!e);this._toggleClass(this.headers.add(this.headers.next()),null,"ui-state-disabled",!!e)},_keydown:function(t){if(t.altKey||t.ctrlKey){return}var i=e.ui.keyCode,n=this.headers.length,o=this.headers.index(t.target),a=false;switch(t.keyCode){case i.RIGHT:case i.DOWN:a=this.headers[(o+1)%n];break;case i.LEFT:case i.UP:a=this.headers[(o-1+n)%n];break;case i.SPACE:case i.ENTER:this._eventHandler(t);break;case i.HOME:a=this.headers[0];break;case i.END:a=this.headers[n-1];break}if(a){e(t.target).attr("tabIndex",-1);e(a).attr("tabIndex",0);e(a).trigger("focus");t.preventDefault()}},_panelKeyDown:function(t){if(t.keyCode===e.ui.keyCode.UP&&t.ctrlKey){e(t.currentTarget).prev().trigger("focus")}},refresh:function(){var t=this.options;this._processPanels();if(t.active===false&&t.collapsible===true||!this.headers.length){t.active=false;this.active=e()}else if(t.active===false){this._activate(0)}else if(this.active.length&&!e.contains(this.element[0],this.active[0])){if(this.headers.length===this.headers.find(".ui-state-disabled").length){t.active=false;this.active=e()}else{this._activate(Math.max(0,t.active-1))}}else{t.active=this.headers.index(this.active)}this._destroyIcons();this._refresh()},_processPanels:function(){var e=this.headers,t=this.panels;this.headers=this.element.find(this.options.header);this._addClass(this.headers,"ui-accordion-header ui-accordion-header-collapsed","ui-state-default");this.panels=this.headers.next().filter(":not(.ui-accordion-content-active)").hide();this._addClass(this.panels,"ui-accordion-content","ui-helper-reset ui-widget-content");if(t){this._off(e.not(this.headers));this._off(t.not(this.panels))}},_refresh:function(){var t,i=this.options,n=i.heightStyle,o=this.element.parent();this.active=this._findActive(i.active);this._addClass(this.active,"ui-accordion-header-active","ui-state-active")._removeClass(this.active,"ui-accordion-header-collapsed");this._addClass(this.active.next(),"ui-accordion-content-active");this.active.next().show();this.headers.attr("role","tab").each(function(){var t=e(this),i=t.uniqueId().attr("id"),n=t.next(),o=n.uniqueId().attr("id");t.attr("aria-controls",o);n.attr("aria-labelledby",i)}).next().attr("role","tabpanel");this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide();if(!this.active.length){this.headers.eq(0).attr("tabIndex",0)}else{this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"})}this._createIcons();this._setupEvents(i.event);if(n==="fill"){t=o.height();this.element.siblings(":visible").each(function(){var i=e(this),n=i.css("position");if(n==="absolute"||n==="fixed"){return}t-=i.outerHeight(true)});this.headers.each(function(){t-=e(this).outerHeight(true)});this.headers.next().each(function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")}else if(n==="auto"){t=0;this.headers.next().each(function(){var i=e(this).is(":visible");if(!i){e(this).show()}t=Math.max(t,e(this).css("height","").height());if(!i){e(this).hide()}}).height(t)}},_activate:function(t){var i=this._findActive(t)[0];if(i===this.active[0]){return}i=i||this.active[0];this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop})},_findActive:function(t){return typeof t==="number"?this.headers.eq(t):e()},_setupEvents:function(t){var i={keydown:"_keydown"};if(t){e.each(t.split(" "),function(e,t){i[t]="_eventHandler"})}this._off(this.headers.add(this.headers.next()));this._on(this.headers,i);this._on(this.headers.next(),{keydown:"_panelKeyDown"});this._hoverable(this.headers);this._focusable(this.headers)},_eventHandler:function(t){var i,n,o=this.options,a=this.active,s=e(t.currentTarget),r=s[0]===a[0],l=r&&o.collapsible,d=l?e():s.next(),c=a.next(),u={oldHeader:a,oldPanel:c,newHeader:l?e():s,newPanel:d};t.preventDefault();if(r&&!o.collapsible||this._trigger("beforeActivate",t,u)===false){return}o.active=l?false:this.headers.index(s);this.active=r?e():s;this._toggle(u);this._removeClass(a,"ui-accordion-header-active","ui-state-active");if(o.icons){i=a.children(".ui-accordion-header-icon");this._removeClass(i,null,o.icons.activeHeader)._addClass(i,null,o.icons.header)}if(!r){this._removeClass(s,"ui-accordion-header-collapsed")._addClass(s,"ui-accordion-header-active","ui-state-active");if(o.icons){n=s.children(".ui-accordion-header-icon");this._removeClass(n,null,o.icons.header)._addClass(n,null,o.icons.activeHeader)}this._addClass(s.next(),"ui-accordion-content-active")}},_toggle:function(t){var i=t.newPanel,n=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(true,true);this.prevShow=i;this.prevHide=n;if(this.options.animate){this._animate(i,n,t)}else{n.hide();i.show();this._toggleComplete(t)}n.attr({"aria-hidden":"true"});n.prev().attr({"aria-selected":"false","aria-expanded":"false"});if(i.length&&n.length){n.prev().attr({tabIndex:-1,"aria-expanded":"false"})}else if(i.length){this.headers.filter(function(){return parseInt(e(this).attr("tabIndex"),10)===0}).attr("tabIndex",-1)}i.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(e,t,i){var n,o,a,s=this,r=0,l=e.css("box-sizing"),d=e.length&&(!t.length||e.index()<t.index()),c=this.options.animate||{},u=d&&c.down||c,p=function(){s._toggleComplete(i)};if(typeof u==="number"){a=u}if(typeof u==="string"){o=u}o=o||u.easing||c.easing;a=a||u.duration||c.duration;if(!t.length){return e.animate(this.showProps,a,o,p)}if(!e.length){return t.animate(this.hideProps,a,o,p)}n=e.show().outerHeight();t.animate(this.hideProps,{duration:a,easing:o,step:function(e,t){t.now=Math.round(e)}});e.hide().animate(this.showProps,{duration:a,easing:o,complete:p,step:function(e,i){i.now=Math.round(e);if(i.prop!=="height"){if(l==="content-box"){r+=i.now}}else if(s.options.heightStyle!=="content"){i.now=Math.round(n-t.outerHeight()-r);r=0}}})},_toggleComplete:function(e){var t=e.oldPanel,i=t.prev();this._removeClass(t,"ui-accordion-content-active");this._removeClass(i,"ui-accordion-header-active")._addClass(i,"ui-accordion-header-collapsed");if(t.length){t.parent()[0].className=t.parent()[0].className}this._trigger("activate",null,e)}})})},615:function(e,t,i){var n,o,a;(function(s){if(true){!(o=[i(1),i(279),i(80),i(148),i(141),i(12),i(46)],n=s,a=typeof n==="function"?n.apply(t,o):n,a!==undefined&&(e.exports=a))}else{}})(function(e){e.widget("ui.autocomplete",{version:"1.12.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:false,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var t,i,n,o=this.element[0].nodeName.toLowerCase(),a=o==="textarea",s=o==="input";this.isMultiLine=a||!s&&this._isContentEditable(this.element);this.valueMethod=this.element[a||s?"val":"text"];this.isNewMenu=true;this._addClass("ui-autocomplete-input");this.element.attr("autocomplete","off");this._on(this.element,{keydown:function(o){if(this.element.prop("readOnly")){t=true;n=true;i=true;return}t=false;n=false;i=false;var a=e.ui.keyCode;switch(o.keyCode){case a.PAGE_UP:t=true;this._move("previousPage",o);break;case a.PAGE_DOWN:t=true;this._move("nextPage",o);break;case a.UP:t=true;this._keyEvent("previous",o);break;case a.DOWN:t=true;this._keyEvent("next",o);break;case a.ENTER:if(this.menu.active){t=true;o.preventDefault();this.menu.select(o)}break;case a.TAB:if(this.menu.active){this.menu.select(o)}break;case a.ESCAPE:if(this.menu.element.is(":visible")){if(!this.isMultiLine){this._value(this.term)}this.close(o);o.preventDefault()}break;default:i=true;this._searchTimeout(o);break}},keypress:function(n){if(t){t=false;if(!this.isMultiLine||this.menu.element.is(":visible")){n.preventDefault()}return}if(i){return}var o=e.ui.keyCode;switch(n.keyCode){case o.PAGE_UP:this._move("previousPage",n);break;case o.PAGE_DOWN:this._move("nextPage",n);break;case o.UP:this._keyEvent("previous",n);break;case o.DOWN:this._keyEvent("next",n);break}},input:function(e){if(n){n=false;e.preventDefault();return}this._searchTimeout(e)},focus:function(){this.selectedItem=null;this.previous=this._value()},blur:function(e){if(this.cancelBlur){delete this.cancelBlur;return}clearTimeout(this.searching);this.close(e);this._change(e)}});this._initSource();this.menu=e("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance");this._addClass(this.menu.element,"ui-autocomplete","ui-front");this._on(this.menu.element,{mousedown:function(t){t.preventDefault();this.cancelBlur=true;this._delay(function(){delete this.cancelBlur;if(this.element[0]!==e.ui.safeActiveElement(this.document[0])){this.element.trigger("focus")}})},menufocus:function(t,i){var n,o;if(this.isNewMenu){this.isNewMenu=false;if(t.originalEvent&&/^mouse/.test(t.originalEvent.type)){this.menu.blur();this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)});return}}o=i.item.data("ui-autocomplete-item");if(false!==this._trigger("focus",t,{item:o})){if(t.originalEvent&&/^key/.test(t.originalEvent.type)){this._value(o.value)}}n=i.item.attr("aria-label")||o.value;if(n&&e.trim(n).length){this.liveRegion.children().hide();e("<div>").text(n).appendTo(this.liveRegion)}},menuselect:function(t,i){var n=i.item.data("ui-autocomplete-item"),o=this.previous;if(this.element[0]!==e.ui.safeActiveElement(this.document[0])){this.element.trigger("focus");this.previous=o;this._delay(function(){this.previous=o;this.selectedItem=n})}if(false!==this._trigger("select",t,{item:n})){this._value(n.value)}this.term=this._value();this.close(t);this.selectedItem=n}});this.liveRegion=e("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body);this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible");this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching);this.element.removeAttr("autocomplete");this.menu.element.remove();this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t);if(e==="source"){this._initSource()}if(e==="appendTo"){this.menu.element.appendTo(this._appendTo())}if(e==="disabled"&&t&&this.xhr){this.xhr.abort()}},_isEventTargetInWidget:function(t){var i=this.menu.element[0];return t.target===this.element[0]||t.target===i||e.contains(i,t.target)},_closeOnClickOutside:function(e){if(!this._isEventTargetInWidget(e)){this.close()}},_appendTo:function(){var t=this.options.appendTo;if(t){t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)}if(!t||!t[0]){t=this.element.closest(".ui-front, dialog")}if(!t.length){t=this.document[0].body}return t},_initSource:function(){var t,i,n=this;if(e.isArray(this.options.source)){t=this.options.source;this.source=function(i,n){n(e.ui.autocomplete.filter(t,i.term))}}else if(typeof this.options.source==="string"){i=this.options.source;this.source=function(t,o){if(n.xhr){n.xhr.abort()}n.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){o(e)},error:function(){o([])}})}}else{this.source=this.options.source}},_searchTimeout:function(e){clearTimeout(this.searching);this.searching=this._delay(function(){var t=this.term===this._value(),i=this.menu.element.is(":visible"),n=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;if(!t||t&&!i&&!n){this.selectedItem=null;this.search(null,e)}},this.options.delay)},search:function(e,t){e=e!=null?e:this._value();this.term=this._value();if(e.length<this.options.minLength){return this.close(t)}if(this._trigger("search",t)===false){return}return this._search(e)},_search:function(e){this.pending++;this._addClass("ui-autocomplete-loading");this.cancelSearch=false;this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return e.proxy(function(e){if(t===this.requestIndex){this.__response(e)}this.pending--;if(!this.pending){this._removeClass("ui-autocomplete-loading")}},this)},__response:function(e){if(e){e=this._normalize(e)}this._trigger("response",null,{content:e});if(!this.options.disabled&&e&&e.length&&!this.cancelSearch){this._suggest(e);this._trigger("open")}else{this._close()}},close:function(e){this.cancelSearch=true;this._close(e)},_close:function(e){this._off(this.document,"mousedown");if(this.menu.element.is(":visible")){this.menu.element.hide();this.menu.blur();this.isNewMenu=true;this._trigger("close",e)}},_change:function(e){if(this.previous!==this._value()){this._trigger("change",e,{item:this.selectedItem})}},_normalize:function(t){if(t.length&&t[0].label&&t[0].value){return t}return e.map(t,function(t){if(typeof t==="string"){return{label:t,value:t}}return e.extend({},t,{label:t.label||t.value,value:t.value||t.label})})},_suggest:function(t){var i=this.menu.element.empty();this._renderMenu(i,t);this.isNewMenu=true;this.menu.refresh();i.show();this._resizeMenu();i.position(e.extend({of:this.element},this.options.position));if(this.options.autoFocus){this.menu.next()}this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var n=this;e.each(i,function(e,i){n._renderItemData(t,i)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return e("<li>").append(e("<div>").text(i.label)).appendTo(t)},_move:function(e,t){if(!this.menu.element.is(":visible")){this.search(null,t);return}if(this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)){if(!this.isMultiLine){this._value(this.term)}this.menu.blur();return}this.menu[e](t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){if(!this.isMultiLine||this.menu.element.is(":visible")){this._move(e,t);t.preventDefault()}},_isContentEditable:function(e){if(!e.length){return false}var t=e.prop("contentEditable");if(t==="inherit"){return this._isContentEditable(e.parent())}return t==="true"}});e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var n=new RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,function(e){return n.test(e.label||e.value||e)})}});e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var i;this._superApply(arguments);if(this.options.disabled||this.cancelSearch){return}if(t&&t.length){i=this.options.messages.results(t.length)}else{i=this.options.messages.noResults}this.liveRegion.children().hide();e("<div>").text(i).appendTo(this.liveRegion)}});return e.ui.autocomplete})},616:function(e,t,i){var n,o,a;(function(s){if(true){!(o=[i(1),i(12)],n=s,a=typeof n==="function"?n.apply(t,o):n,a!==undefined&&(e.exports=a))}else{}})(function(e){return e.fn.form=function(){return typeof this[0].form==="string"?this.closest("form"):e(this[0].form)}})},617:function(e,t,i){var n,o,a;(function(s){if(true){!(o=[i(1),i(280),i(281),i(129),i(299),i(300),i(80),i(148),i(141),i(297),i(619),i(140),i(12),i(46)],n=s,a=typeof n==="function"?n.apply(t,o):n,a!==undefined&&(e.exports=a))}else{}})(function(e){e.widget("ui.dialog",{version:"1.12.1",options:{appendTo:"body",autoOpen:true,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:true,closeText:"Close",draggable:true,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:false,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var i=e(this).css(t).offset().top;if(i<0){e(this).css("top",t.top-i)}}},resizable:true,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:true,height:true,maxHeight:true,maxWidth:true,minHeight:true,minWidth:true,width:true},resizableRelatedOptions:{maxHeight:true,maxWidth:true,minHeight:true,minWidth:true},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height};this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)};this.originalTitle=this.element.attr("title");if(this.options.title==null&&this.originalTitle!=null){this.options.title=this.originalTitle}if(this.options.disabled){this.options.disabled=false}this._createWrapper();this.element.show().removeAttr("title").appendTo(this.uiDialog);this._addClass("ui-dialog-content","ui-widget-content");this._createTitlebar();this._createButtonPane();if(this.options.draggable&&e.fn.draggable){this._makeDraggable()}if(this.options.resizable&&e.fn.resizable){this._makeResizable()}this._isOpen=false;this._trackFocus()},_init:function(){if(this.options.autoOpen){this.open()}},_appendTo:function(){var t=this.options.appendTo;if(t&&(t.jquery||t.nodeType)){return e(t)}return this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._untrackInstance();this._destroyOverlay();this.element.removeUniqueId().css(this.originalCss).detach();this.uiDialog.remove();if(this.originalTitle){this.element.attr("title",this.originalTitle)}e=t.parent.children().eq(t.index);if(e.length&&e[0]!==this.element[0]){e.before(this.element)}else{t.parent.append(this.element)}},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var i=this;if(!this._isOpen||this._trigger("beforeClose",t)===false){return}this._isOpen=false;this._focusedElement=null;this._destroyOverlay();this._untrackInstance();if(!this.opener.filter(":focusable").trigger("focus").length){e.ui.safeBlur(e.ui.safeActiveElement(this.document[0]))}this._hide(this.uiDialog,this.options.hide,function(){i._trigger("close",t)})},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,i){var n=false,o=this.uiDialog.siblings(".ui-front:visible").map(function(){return+e(this).css("z-index")}).get(),a=Math.max.apply(null,o);if(a>=+this.uiDialog.css("z-index")){this.uiDialog.css("z-index",a+1);n=true}if(n&&!i){this._trigger("focus",t)}return n},open:function(){var t=this;if(this._isOpen){if(this._moveToTop()){this._focusTabbable()}return}this._isOpen=true;this.opener=e(e.ui.safeActiveElement(this.document[0]));this._size();this._position();this._createOverlay();this._moveToTop(null,true);if(this.overlay){this.overlay.css("z-index",this.uiDialog.css("z-index")-1)}this._show(this.uiDialog,this.options.show,function(){t._focusTabbable();t._trigger("focus")});this._makeFocusTarget();this._trigger("open")},_focusTabbable:function(){var e=this._focusedElement;if(!e){e=this.element.find("[autofocus]")}if(!e.length){e=this.element.find(":tabbable")}if(!e.length){e=this.uiDialogButtonPane.find(":tabbable")}if(!e.length){e=this.uiDialogTitlebarClose.filter(":tabbable")}if(!e.length){e=this.uiDialog}e.eq(0).trigger("focus")},_keepFocus:function(t){function i(){var t=e.ui.safeActiveElement(this.document[0]),i=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);if(!i){this._focusTabbable()}}t.preventDefault();i.call(this);this._delay(i)},_createWrapper:function(){this.uiDialog=e("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo());this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front");this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE){t.preventDefault();this.close(t);return}if(t.keyCode!==e.ui.keyCode.TAB||t.isDefaultPrevented()){return}var i=this.uiDialog.find(":tabbable"),n=i.filter(":first"),o=i.filter(":last");if((t.target===o[0]||t.target===this.uiDialog[0])&&!t.shiftKey){this._delay(function(){n.trigger("focus")});t.preventDefault()}else if((t.target===n[0]||t.target===this.uiDialog[0])&&t.shiftKey){this._delay(function(){o.trigger("focus")});t.preventDefault()}},mousedown:function(e){if(this._moveToTop(e)){this._focusTabbable()}}});if(!this.element.find("[aria-describedby]").length){this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})}},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>");this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix");this._on(this.uiDialogTitlebar,{mousedown:function(t){if(!e(t.target).closest(".ui-dialog-titlebar-close")){this.uiDialog.trigger("focus")}}});this.uiDialogTitlebarClose=e("<button type='button'></button>").button({label:e("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:false}).appendTo(this.uiDialogTitlebar);this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close");this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault();this.close(e)}});t=e("<span>").uniqueId().prependTo(this.uiDialogTitlebar);this._addClass(t,"ui-dialog-title");this._title(t);this.uiDialogTitlebar.prependTo(this.uiDialog);this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){if(this.options.title){e.text(this.options.title)}else{e.html("&#160;")}},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>");this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix");this.uiButtonSet=e("<div>").appendTo(this.uiDialogButtonPane);this._addClass(this.uiButtonSet,"ui-dialog-buttonset");this._createButtons()},_createButtons:function(){var t=this,i=this.options.buttons;this.uiDialogButtonPane.remove();this.uiButtonSet.empty();if(e.isEmptyObject(i)||e.isArray(i)&&!i.length){this._removeClass(this.uiDialog,"ui-dialog-buttons");return}e.each(i,function(i,n){var o,a;n=e.isFunction(n)?{click:n,text:i}:n;n=e.extend({type:"button"},n);o=n.click;a={icon:n.icon,iconPosition:n.iconPosition,showLabel:n.showLabel,icons:n.icons,text:n.text};delete n.click;delete n.icon;delete n.iconPosition;delete n.showLabel;delete n.icons;if(typeof n.text==="boolean"){delete n.text}e("<button></button>",n).button(a).appendTo(t.uiButtonSet).on("click",function(){o.apply(t.element[0],arguments)})});this._addClass(this.uiDialog,"ui-dialog-buttons");this.uiDialogButtonPane.appendTo(this.uiDialog)},_makeDraggable:function(){var t=this,i=this.options;function n(e){return{position:e.position,offset:e.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(i,o){t._addClass(e(this),"ui-dialog-dragging");t._blockFrames();t._trigger("dragStart",i,n(o))},drag:function(e,i){t._trigger("drag",e,n(i))},stop:function(o,a){var s=a.offset.left-t.document.scrollLeft(),r=a.offset.top-t.document.scrollTop();i.position={my:"left top",at:"left"+(s>=0?"+":"")+s+" "+"top"+(r>=0?"+":"")+r,of:t.window};t._removeClass(e(this),"ui-dialog-dragging");t._unblockFrames();t._trigger("dragStop",o,n(a))}})},_makeResizable:function(){var t=this,i=this.options,n=i.resizable,o=this.uiDialog.css("position"),a=typeof n==="string"?n:"n,e,s,w,se,sw,ne,nw";function s(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:i.maxWidth,maxHeight:i.maxHeight,minWidth:i.minWidth,minHeight:this._minHeight(),handles:a,start:function(i,n){t._addClass(e(this),"ui-dialog-resizing");t._blockFrames();t._trigger("resizeStart",i,s(n))},resize:function(e,i){t._trigger("resize",e,s(i))},stop:function(n,o){var a=t.uiDialog.offset(),r=a.left-t.document.scrollLeft(),l=a.top-t.document.scrollTop();i.height=t.uiDialog.height();i.width=t.uiDialog.width();i.position={my:"left top",at:"left"+(r>=0?"+":"")+r+" "+"top"+(l>=0?"+":"")+l,of:t.window};t._removeClass(e(this),"ui-dialog-resizing");t._unblockFrames();t._trigger("resizeStop",n,s(o))}}).css("position",o)},_trackFocus:function(){this._on(this.widget(),{focusin:function(t){this._makeFocusTarget();this._focusedElement=e(t.target)}})},_makeFocusTarget:function(){this._untrackInstance();this._trackingInstances().unshift(this)},_untrackInstance:function(){var t=this._trackingInstances(),i=e.inArray(this,t);if(i!==-1){t.splice(i,1)}},_trackingInstances:function(){var e=this.document.data("ui-dialog-instances");if(!e){e=[];this.document.data("ui-dialog-instances",e)}return e},_minHeight:function(){var e=this.options;return e.height==="auto"?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");if(!e){this.uiDialog.show()}this.uiDialog.position(this.options.position);if(!e){this.uiDialog.hide()}},_setOptions:function(t){var i=this,n=false,o={};e.each(t,function(e,t){i._setOption(e,t);if(e in i.sizeRelatedOptions){n=true}if(e in i.resizableRelatedOptions){o[e]=t}});if(n){this._size();this._position()}if(this.uiDialog.is(":data(ui-resizable)")){this.uiDialog.resizable("option",o)}},_setOption:function(t,i){var n,o,a=this.uiDialog;if(t==="disabled"){return}this._super(t,i);if(t==="appendTo"){this.uiDialog.appendTo(this._appendTo())}if(t==="buttons"){this._createButtons()}if(t==="closeText"){this.uiDialogTitlebarClose.button({label:e("<a>").text(""+this.options.closeText).html()})}if(t==="draggable"){n=a.is(":data(ui-draggable)");if(n&&!i){a.draggable("destroy")}if(!n&&i){this._makeDraggable()}}if(t==="position"){this._position()}if(t==="resizable"){o=a.is(":data(ui-resizable)");if(o&&!i){a.resizable("destroy")}if(o&&typeof i==="string"){a.resizable("option","handles",i)}if(!o&&i!==false){this._makeResizable()}}if(t==="title"){this._title(this.uiDialogTitlebar.find(".ui-dialog-title"))}},_size:function(){var e,t,i,n=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0});if(n.minWidth>n.width){n.width=n.minWidth}e=this.uiDialog.css({height:"auto",width:n.width}).outerHeight();t=Math.max(0,n.minHeight-e);i=typeof n.maxHeight==="number"?Math.max(0,n.maxHeight-e):"none";if(n.height==="auto"){this.element.css({minHeight:t,maxHeight:i,height:"auto"})}else{this.element.height(Math.max(0,n.height-e))}if(this.uiDialog.is(":data(ui-resizable)")){this.uiDialog.resizable("option","minHeight",this._minHeight())}},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){if(this.iframeBlocks){this.iframeBlocks.remove();delete this.iframeBlocks}},_allowInteraction:function(t){if(e(t.target).closest(".ui-dialog").length){return true}return!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(!this.options.modal){return}var t=true;this._delay(function(){t=false});if(!this.document.data("ui-dialog-overlays")){this._on(this.document,{focusin:function(e){if(t){return}if(!this._allowInteraction(e)){e.preventDefault();this._trackingInstances()[0]._focusTabbable()}}})}this.overlay=e("<div>").appendTo(this._appendTo());this._addClass(this.overlay,null,"ui-widget-overlay ui-front");this._on(this.overlay,{mousedown:"_keepFocus"});this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)},_destroyOverlay:function(){if(!this.options.modal){return}if(this.overlay){var e=this.document.data("ui-dialog-overlays")-1;if(!e){this._off(this.document,"focusin");this.document.removeData("ui-dialog-overlays")}else{this.document.data("ui-dialog-overlays",e)}this.overlay.remove();this.overlay=null}}});if(e.uiBackCompat!==false){e.widget("ui.dialog",e.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super();this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(e,t){if(e==="dialogClass"){this.uiDialog.removeClass(this.options.dialogClass).addClass(t)}this._superApply(arguments)}})}return e.ui.dialog})},618:function(e,t,i){var n,o,a;(function(s){if(true){!(o=[i(1),i(12)],n=s,a=typeof n==="function"?n.apply(t,o):n,a!==undefined&&(e.exports=a))}else{}})(function(e){return e.fn.extend({disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.off(".ui-disableSelection")}})})},619:function(e,t,i){var n,o,a;(function(s){if(true){!(o=[i(1),i(12),i(300)],n=s,a=typeof n==="function"?n.apply(t,o):n,a!==undefined&&(e.exports=a))}else{}})(function(e){return e.extend(e.expr[":"],{tabbable:function(t){var i=e.attr(t,"tabindex"),n=i!=null;return(!n||i>=0)&&e.ui.focusable(t,n)}})})},620:function(e,t,i){var n,o,a;(function(s){if(true){!(o=[i(1),i(281),i(129),i(12),i(46)],n=s,a=typeof n==="function"?n.apply(t,o):n,a!==undefined&&(e.exports=a))}else{}})(function(e){e.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:true,greedy:false,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,i=this.options,n=i.accept;this.isover=false;this.isout=true;this.accept=e.isFunction(n)?n:function(e){return e.is(n)};this.proportions=function(){if(arguments.length){t=arguments[0]}else{return t?t:t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}}};this._addToManager(i.scope);i.addClasses&&this._addClass("ui-droppable")},_addToManager:function(t){e.ui.ddmanager.droppables[t]=e.ui.ddmanager.droppables[t]||[];e.ui.ddmanager.droppables[t].push(this)},_splice:function(e){var t=0;for(;t<e.length;t++){if(e[t]===this){e.splice(t,1)}}},_destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];this._splice(t)},_setOption:function(t,i){if(t==="accept"){this.accept=e.isFunction(i)?i:function(e){return e.is(i)}}else if(t==="scope"){var n=e.ui.ddmanager.droppables[this.options.scope];this._splice(n);this._addToManager(i)}this._super(t,i)},_activate:function(t){var i=e.ui.ddmanager.current;this._addActiveClass();if(i){this._trigger("activate",t,this.ui(i))}},_deactivate:function(t){var i=e.ui.ddmanager.current;this._removeActiveClass();if(i){this._trigger("deactivate",t,this.ui(i))}},_over:function(t){var i=e.ui.ddmanager.current;if(!i||(i.currentItem||i.element)[0]===this.element[0]){return}if(this.accept.call(this.element[0],i.currentItem||i.element)){this._addHoverClass();this._trigger("over",t,this.ui(i))}},_out:function(t){var i=e.ui.ddmanager.current;if(!i||(i.currentItem||i.element)[0]===this.element[0]){return}if(this.accept.call(this.element[0],i.currentItem||i.element)){this._removeHoverClass();this._trigger("out",t,this.ui(i))}},_drop:function(i,n){var o=n||e.ui.ddmanager.current,a=false;if(!o||(o.currentItem||o.element)[0]===this.element[0]){return false}this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var n=e(this).droppable("instance");if(n.options.greedy&&!n.options.disabled&&n.options.scope===o.options.scope&&n.accept.call(n.element[0],o.currentItem||o.element)&&t(o,e.extend(n,{offset:n.element.offset()}),n.options.tolerance,i)){a=true;return false}});if(a){return false}if(this.accept.call(this.element[0],o.currentItem||o.element)){this._removeActiveClass();this._removeHoverClass();this._trigger("drop",i,this.ui(o));return this.element}return false},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});var t=e.ui.intersect=function(){function e(e,t,i){return e>=t&&e<t+i}return function(t,i,n,o){if(!i.offset){return false}var a=(t.positionAbs||t.position.absolute).left+t.margins.left,s=(t.positionAbs||t.position.absolute).top+t.margins.top,r=a+t.helperProportions.width,l=s+t.helperProportions.height,d=i.offset.left,c=i.offset.top,u=d+i.proportions().width,p=c+i.proportions().height;switch(n){case"fit":return d<=a&&r<=u&&c<=s&&l<=p;case"intersect":return d<a+t.helperProportions.width/2&&r-t.helperProportions.width/2<u&&c<s+t.helperProportions.height/2&&l-t.helperProportions.height/2<p;case"pointer":return e(o.pageY,c,i.proportions().height)&&e(o.pageX,d,i.proportions().width);case"touch":return(s>=c&&s<=p||l>=c&&l<=p||s<c&&l>p)&&(a>=d&&a<=u||r>=d&&r<=u||a<d&&r>u);default:return false}}}();e.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(t,i){var n,o,a=e.ui.ddmanager.droppables[t.options.scope]||[],s=i?i.type:null,r=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(n=0;n<a.length;n++){if(a[n].options.disabled||t&&!a[n].accept.call(a[n].element[0],t.currentItem||t.element)){continue}for(o=0;o<r.length;o++){if(r[o]===a[n].element[0]){a[n].proportions().height=0;continue e}}a[n].visible=a[n].element.css("display")!=="none";if(!a[n].visible){continue}if(s==="mousedown"){a[n]._activate.call(a[n],i)}a[n].offset=a[n].element.offset();a[n].proportions({width:a[n].element[0].offsetWidth,height:a[n].element[0].offsetHeight})}},drop:function(i,n){var o=false;e.each((e.ui.ddmanager.droppables[i.options.scope]||[]).slice(),function(){if(!this.options){return}if(!this.options.disabled&&this.visible&&t(i,this,this.options.tolerance,n)){o=this._drop.call(this,n)||o}if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],i.currentItem||i.element)){this.isout=true;this.isover=false;this._deactivate.call(this,n)}});return o},dragStart:function(t,i){t.element.parentsUntil("body").on("scroll.droppable",function(){if(!t.options.refreshPositions){e.ui.ddmanager.prepareOffsets(t,i)}})},drag:function(i,n){if(i.options.refreshPositions){e.ui.ddmanager.prepareOffsets(i,n)}e.each(e.ui.ddmanager.droppables[i.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible){return}var o,a,s,r=t(i,this,this.options.tolerance,n),l=!r&&this.isover?"isout":r&&!this.isover?"isover":null;if(!l){return}if(this.options.greedy){a=this.options.scope;s=this.element.parents(":data(ui-droppable)").filter(function(){return e(this).droppable("instance").options.scope===a});if(s.length){o=e(s[0]).droppable("instance");o.greedyChild=l==="isover"}}if(o&&l==="isover"){o.isover=false;o.isout=true;o._out.call(o,n)}this[l]=true;this[l==="isout"?"isover":"isout"]=false;this[l==="isover"?"_over":"_out"].call(this,n);if(o&&l==="isout"){o.isout=false;o.isover=true;o._over.call(o,n)}})},dragStop:function(t,i){t.element.parentsUntil("body").off("scroll.droppable");if(!t.options.refreshPositions){e.ui.ddmanager.prepareOffsets(t,i)}}};if(e.uiBackCompat!==false){e.widget("ui.droppable",e.ui.droppable,{options:{hoverClass:false,activeClass:false},_addActiveClass:function(){this._super();if(this.options.activeClass){this.element.addClass(this.options.activeClass)}},_removeActiveClass:function(){this._super();if(this.options.activeClass){this.element.removeClass(this.options.activeClass)}},_addHoverClass:function(){this._super();if(this.options.hoverClass){this.element.addClass(this.options.hoverClass)}},_removeHoverClass:function(){this._super();if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass)}}})}return e.ui.droppable})},621:function(e,t,i){var n,o,a;(function(s){if(true){!(o=[i(1),i(12),i(80)],n=s,a=typeof n==="function"?n.apply(t,o):n,a!==undefined&&(e.exports=a))}else{}})(function(e){e.extend(e.ui,{datepicker:{version:"1.12.1"}});var t;function i(e){var t,i;while(e.length&&e[0]!==document){t=e.css("position");if(t==="absolute"||t==="relative"||t==="fixed"){i=parseInt(e.css("zIndex"),10);if(!isNaN(i)&&i!==0){return i}}e=e.parent()}return 0}function n(){this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._datepickerShowing=false;this._inDialog=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:"c-10:c+10",showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,autoSize:false,disabled:false};e.extend(this._defaults,this.regional[""]);this.regional.en=e.extend(true,{},this.regional[""]);this.regional["en-US"]=e.extend(true,{},this.regional.en);this.dpDiv=o(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}e.extend(n.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){s(this._defaults,e||{});return this},_attachDatepicker:function(t,i){var n,o,a;n=t.nodeName.toLowerCase();o=n==="div"||n==="span";if(!t.id){this.uuid+=1;t.id="dp"+this.uuid}a=this._newInst(e(t),o);a.settings=e.extend({},i||{});if(n==="input"){this._connectDatepicker(t,a)}else if(o){this._inlineDatepicker(t,a)}},_newInst:function(t,i){var n=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:n,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:!i?this.dpDiv:o(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}},_connectDatepicker:function(t,i){var n=e(t);i.append=e([]);i.trigger=e([]);if(n.hasClass(this.markerClassName)){return}this._attachments(n,i);n.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp);this._autoSize(i);e.data(t,"datepicker",i);if(i.settings.disabled){this._disableDatepicker(t)}},_attachments:function(t,i){var n,o,a,s=this._get(i,"appendText"),r=this._get(i,"isRTL");if(i.append){i.append.remove()}if(s){i.append=e("<span class='"+this._appendClass+"'>"+s+"</span>");t[r?"before":"after"](i.append)}t.off("focus",this._showDatepicker);if(i.trigger){i.trigger.remove()}n=this._get(i,"showOn");if(n==="focus"||n==="both"){t.on("focus",this._showDatepicker)}if(n==="button"||n==="both"){o=this._get(i,"buttonText");a=this._get(i,"buttonImage");i.trigger=e(this._get(i,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:a,alt:o,title:o}):e("<button type='button'></button>").addClass(this._triggerClass).html(!a?o:e("<img/>").attr({src:a,alt:o,title:o})));t[r?"before":"after"](i.trigger);i.trigger.on("click",function(){if(e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]){e.datepicker._hideDatepicker()}else if(e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]){e.datepicker._hideDatepicker();e.datepicker._showDatepicker(t[0])}else{e.datepicker._showDatepicker(t[0])}return false})}},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,i,n,o,a=new Date(2009,12-1,20),s=this._get(e,"dateFormat");if(s.match(/[DM]/)){t=function(e){i=0;n=0;for(o=0;o<e.length;o++){if(e[o].length>i){i=e[o].length;n=o}}return n};a.setMonth(t(this._get(e,s.match(/MM/)?"monthNames":"monthNamesShort")));a.setDate(t(this._get(e,s.match(/DD/)?"dayNames":"dayNamesShort"))+20-a.getDay())}e.input.attr("size",this._formatDate(e,a).length)}},_inlineDatepicker:function(t,i){var n=e(t);if(n.hasClass(this.markerClassName)){return}n.addClass(this.markerClassName).append(i.dpDiv);e.data(t,"datepicker",i);this._setDate(i,this._getDefaultDate(i),true);this._updateDatepicker(i);this._updateAlternate(i);if(i.settings.disabled){this._disableDatepicker(t)}i.dpDiv.css("display","block")},_dialogDatepicker:function(t,i,n,o,a){var r,l,d,c,u,p=this._dialogInst;if(!p){this.uuid+=1;r="dp"+this.uuid;this._dialogInput=e("<input type='text' id='"+r+"' style='position: absolute; top: -100px; width: 0px;'/>");this._dialogInput.on("keydown",this._doKeyDown);e("body").append(this._dialogInput);p=this._dialogInst=this._newInst(this._dialogInput,false);p.settings={};e.data(this._dialogInput[0],"datepicker",p)}s(p.settings,o||{});i=i&&i.constructor===Date?this._formatDate(p,i):i;this._dialogInput.val(i);this._pos=a?a.length?a:[a.pageX,a.pageY]:null;if(!this._pos){l=document.documentElement.clientWidth;d=document.documentElement.clientHeight;c=document.documentElement.scrollLeft||document.body.scrollLeft;u=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[l/2-100+c,d/2-150+u]}this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");p.settings.onSelect=n;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);if(e.blockUI){e.blockUI(this.dpDiv)}e.data(this._dialogInput[0],"datepicker",p);return this},_destroyDatepicker:function(i){var n,o=e(i),a=e.data(i,"datepicker");if(!o.hasClass(this.markerClassName)){return}n=i.nodeName.toLowerCase();e.removeData(i,"datepicker");if(n==="input"){a.append.remove();a.trigger.remove();o.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)}else if(n==="div"||n==="span"){o.removeClass(this.markerClassName).empty()}if(t===a){t=null}},_enableDatepicker:function(t){var i,n,o=e(t),a=e.data(t,"datepicker");if(!o.hasClass(this.markerClassName)){return}i=t.nodeName.toLowerCase();if(i==="input"){t.disabled=false;a.trigger.filter("button").each(function(){this.disabled=false}).end().filter("img").css({opacity:"1.0",cursor:""})}else if(i==="div"||i==="span"){n=o.children("."+this._inlineClass);n.children().removeClass("ui-state-disabled");n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",false)}this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e})},_disableDatepicker:function(t){var i,n,o=e(t),a=e.data(t,"datepicker");if(!o.hasClass(this.markerClassName)){return}i=t.nodeName.toLowerCase();if(i==="input"){t.disabled=true;a.trigger.filter("button").each(function(){this.disabled=true}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else if(i==="div"||i==="span"){n=o.children("."+this._inlineClass);n.children().addClass("ui-state-disabled");n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",true)}this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e});this._disabledInputs[this._disabledInputs.length]=t},_isDisabledDatepicker:function(e){if(!e){return false}for(var t=0;t<this._disabledInputs.length;t++){if(this._disabledInputs[t]===e){return true}}return false},_getInst:function(t){try{return e.data(t,"datepicker")}catch(e){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,i,n){var o,a,r,l,d=this._getInst(t);if(arguments.length===2&&typeof i==="string"){return i==="defaults"?e.extend({},e.datepicker._defaults):d?i==="all"?e.extend({},d.settings):this._get(d,i):null}o=i||{};if(typeof i==="string"){o={};o[i]=n}if(d){if(this._curInst===d){this._hideDatepicker()}a=this._getDateDatepicker(t,true);r=this._getMinMaxDate(d,"min");l=this._getMinMaxDate(d,"max");s(d.settings,o);if(r!==null&&o.dateFormat!==undefined&&o.minDate===undefined){d.settings.minDate=this._formatDate(d,r)}if(l!==null&&o.dateFormat!==undefined&&o.maxDate===undefined){d.settings.maxDate=this._formatDate(d,l)}if("disabled"in o){if(o.disabled){this._disableDatepicker(t)}else{this._enableDatepicker(t)}}this._attachments(e(t),d);this._autoSize(d);this._setDate(d,a);this._updateAlternate(d);this._updateDatepicker(d)}},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);if(t){this._updateDatepicker(t)}},_setDateDatepicker:function(e,t){var i=this._getInst(e);if(i){this._setDate(i,t);this._updateDatepicker(i);this._updateAlternate(i)}},_getDateDatepicker:function(e,t){var i=this._getInst(e);if(i&&!i.inline){this._setDateFromField(i,t)}return i?this._getDate(i):null},_doKeyDown:function(t){var i,n,o,a=e.datepicker._getInst(t.target),s=true,r=a.dpDiv.is(".ui-datepicker-rtl");a._keyEvent=true;if(e.datepicker._datepickerShowing){switch(t.keyCode){case 9:e.datepicker._hideDatepicker();s=false;break;case 13:o=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",a.dpDiv);if(o[0]){e.datepicker._selectDay(t.target,a.selectedMonth,a.selectedYear,o[0])}i=e.datepicker._get(a,"onSelect");if(i){n=e.datepicker._formatDate(a);i.apply(a.input?a.input[0]:null,[n,a])}else{e.datepicker._hideDatepicker()}return false;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(a,"stepBigMonths"):-e.datepicker._get(a,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(a,"stepBigMonths"):+e.datepicker._get(a,"stepMonths"),"M");break;case 35:if(t.ctrlKey||t.metaKey){e.datepicker._clearDate(t.target)}s=t.ctrlKey||t.metaKey;break;case 36:if(t.ctrlKey||t.metaKey){e.datepicker._gotoToday(t.target)}s=t.ctrlKey||t.metaKey;break;case 37:if(t.ctrlKey||t.metaKey){e.datepicker._adjustDate(t.target,r?+1:-1,"D")}s=t.ctrlKey||t.metaKey;if(t.originalEvent.altKey){e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(a,"stepBigMonths"):-e.datepicker._get(a,"stepMonths"),"M")}break;case 38:if(t.ctrlKey||t.metaKey){e.datepicker._adjustDate(t.target,-7,"D")}s=t.ctrlKey||t.metaKey;break;case 39:if(t.ctrlKey||t.metaKey){e.datepicker._adjustDate(t.target,r?-1:+1,"D")}s=t.ctrlKey||t.metaKey;if(t.originalEvent.altKey){e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(a,"stepBigMonths"):+e.datepicker._get(a,"stepMonths"),"M")}break;case 40:if(t.ctrlKey||t.metaKey){e.datepicker._adjustDate(t.target,+7,"D")}s=t.ctrlKey||t.metaKey;break;default:s=false}}else if(t.keyCode===36&&t.ctrlKey){e.datepicker._showDatepicker(this)}else{s=false}if(s){t.preventDefault();t.stopPropagation()}},_doKeyPress:function(t){var i,n,o=e.datepicker._getInst(t.target);if(e.datepicker._get(o,"constrainInput")){i=e.datepicker._possibleChars(e.datepicker._get(o,"dateFormat"));n=String.fromCharCode(t.charCode==null?t.keyCode:t.charCode);return t.ctrlKey||t.metaKey||(n<" "||!i||i.indexOf(n)>-1)}},_doKeyUp:function(t){var i,n=e.datepicker._getInst(t.target);if(n.input.val()!==n.lastVal){try{i=e.datepicker.parseDate(e.datepicker._get(n,"dateFormat"),n.input?n.input.val():null,e.datepicker._getFormatConfig(n));if(i){e.datepicker._setDateFromField(n);e.datepicker._updateAlternate(n);e.datepicker._updateDatepicker(n)}}catch(e){}}return true},_showDatepicker:function(t){t=t.target||t;if(t.nodeName.toLowerCase()!=="input"){t=e("input",t.parentNode)[0]}if(e.datepicker._isDisabledDatepicker(t)||e.datepicker._lastInput===t){return}var n,o,a,r,l,d,c;n=e.datepicker._getInst(t);if(e.datepicker._curInst&&e.datepicker._curInst!==n){e.datepicker._curInst.dpDiv.stop(true,true);if(n&&e.datepicker._datepickerShowing){e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])}}o=e.datepicker._get(n,"beforeShow");a=o?o.apply(t,[t,n]):{};if(a===false){return}s(n.settings,a);n.lastVal=null;e.datepicker._lastInput=t;e.datepicker._setDateFromField(n);if(e.datepicker._inDialog){t.value=""}if(!e.datepicker._pos){e.datepicker._pos=e.datepicker._findPos(t);e.datepicker._pos[1]+=t.offsetHeight}r=false;e(t).parents().each(function(){r|=e(this).css("position")==="fixed";return!r});l={left:e.datepicker._pos[0],top:e.datepicker._pos[1]};e.datepicker._pos=null;n.dpDiv.empty();n.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});e.datepicker._updateDatepicker(n);l=e.datepicker._checkOffset(n,l,r);n.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":r?"fixed":"absolute",display:"none",left:l.left+"px",top:l.top+"px"});if(!n.inline){d=e.datepicker._get(n,"showAnim");c=e.datepicker._get(n,"duration");n.dpDiv.css("z-index",i(e(t))+1);e.datepicker._datepickerShowing=true;if(e.effects&&e.effects.effect[d]){n.dpDiv.show(d,e.datepicker._get(n,"showOptions"),c)}else{n.dpDiv[d||"show"](d?c:null)}if(e.datepicker._shouldFocusInput(n)){n.input.trigger("focus")}e.datepicker._curInst=n}},_updateDatepicker:function(i){this.maxRows=4;t=i;i.dpDiv.empty().append(this._generateHTML(i));this._attachHandlers(i);var n,o=this._getNumberOfMonths(i),s=o[1],r=17,l=i.dpDiv.find("."+this._dayOverClass+" a");if(l.length>0){a.apply(l.get(0))}i.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");if(s>1){i.dpDiv.addClass("ui-datepicker-multi-"+s).css("width",r*s+"em")}i.dpDiv[(o[0]!==1||o[1]!==1?"add":"remove")+"Class"]("ui-datepicker-multi");i.dpDiv[(this._get(i,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");if(i===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(i)){i.input.trigger("focus")}if(i.yearshtml){n=i.yearshtml;setTimeout(function(){if(n===i.yearshtml&&i.yearshtml){i.dpDiv.find("select.ui-datepicker-year:first").replaceWith(i.yearshtml)}n=i.yearshtml=null},0)}},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,i,n){var o=t.dpDiv.outerWidth(),a=t.dpDiv.outerHeight(),s=t.input?t.input.outerWidth():0,r=t.input?t.input.outerHeight():0,l=document.documentElement.clientWidth+(n?0:e(document).scrollLeft()),d=document.documentElement.clientHeight+(n?0:e(document).scrollTop());i.left-=this._get(t,"isRTL")?o-s:0;i.left-=n&&i.left===t.input.offset().left?e(document).scrollLeft():0;i.top-=n&&i.top===t.input.offset().top+r?e(document).scrollTop():0;i.left-=Math.min(i.left,i.left+o>l&&l>o?Math.abs(i.left+o-l):0);i.top-=Math.min(i.top,i.top+a>d&&d>a?Math.abs(a+r):0);return i},_findPos:function(t){var i,n=this._getInst(t),o=this._get(n,"isRTL");while(t&&(t.type==="hidden"||t.nodeType!==1||e.expr.filters.hidden(t))){t=t[o?"previousSibling":"nextSibling"]}i=e(t).offset();return[i.left,i.top]},_hideDatepicker:function(t){var i,n,o,a,s=this._curInst;if(!s||t&&s!==e.data(t,"datepicker")){return}if(this._datepickerShowing){i=this._get(s,"showAnim");n=this._get(s,"duration");o=function(){e.datepicker._tidyDialog(s)};if(e.effects&&(e.effects.effect[i]||e.effects[i])){s.dpDiv.hide(i,e.datepicker._get(s,"showOptions"),n,o)}else{s.dpDiv[i==="slideDown"?"slideUp":i==="fadeIn"?"fadeOut":"hide"](i?n:null,o)}if(!i){o()}this._datepickerShowing=false;a=this._get(s,"onClose");if(a){a.apply(s.input?s.input[0]:null,[s.input?s.input.val():"",s])}this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if(e.blockUI){e.unblockUI();e("body").append(this.dpDiv)}}this._inDialog=false}},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(!e.datepicker._curInst){return}var i=e(t.target),n=e.datepicker._getInst(i[0]);if(i[0].id!==e.datepicker._mainDivId&&i.parents("#"+e.datepicker._mainDivId).length===0&&!i.hasClass(e.datepicker.markerClassName)&&!i.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&!(e.datepicker._inDialog&&e.blockUI)||i.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==n){e.datepicker._hideDatepicker()}},_adjustDate:function(t,i,n){var o=e(t),a=this._getInst(o[0]);if(this._isDisabledDatepicker(o[0])){return}this._adjustInstDate(a,i+(n==="M"?this._get(a,"showCurrentAtPos"):0),n);this._updateDatepicker(a)},_gotoToday:function(t){var i,n=e(t),o=this._getInst(n[0]);if(this._get(o,"gotoCurrent")&&o.currentDay){o.selectedDay=o.currentDay;o.drawMonth=o.selectedMonth=o.currentMonth;o.drawYear=o.selectedYear=o.currentYear}else{i=new Date;o.selectedDay=i.getDate();o.drawMonth=o.selectedMonth=i.getMonth();o.drawYear=o.selectedYear=i.getFullYear()}this._notifyChange(o);this._adjustDate(n)},_selectMonthYear:function(t,i,n){var o=e(t),a=this._getInst(o[0]);a["selected"+(n==="M"?"Month":"Year")]=a["draw"+(n==="M"?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10);this._notifyChange(a);this._adjustDate(o)},_selectDay:function(t,i,n,o){var a,s=e(t);if(e(o).hasClass(this._unselectableClass)||this._isDisabledDatepicker(s[0])){return}a=this._getInst(s[0]);a.selectedDay=a.currentDay=e("a",o).html();a.selectedMonth=a.currentMonth=i;a.selectedYear=a.currentYear=n;this._selectDate(t,this._formatDate(a,a.currentDay,a.currentMonth,a.currentYear))},_clearDate:function(t){var i=e(t);this._selectDate(i,"")},_selectDate:function(t,i){var n,o=e(t),a=this._getInst(o[0]);i=i!=null?i:this._formatDate(a);if(a.input){a.input.val(i)}this._updateAlternate(a);n=this._get(a,"onSelect");if(n){n.apply(a.input?a.input[0]:null,[i,a])}else if(a.input){a.input.trigger("change")}if(a.inline){this._updateDatepicker(a)}else{this._hideDatepicker();this._lastInput=a.input[0];if(typeof a.input[0]!=="object"){a.input.trigger("focus")}this._lastInput=null}},_updateAlternate:function(t){var i,n,o,a=this._get(t,"altField");if(a){i=this._get(t,"altFormat")||this._get(t,"dateFormat");n=this._getDate(t);o=this.formatDate(i,n,this._getFormatConfig(t));e(a).val(o)}},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t,i=new Date(e.getTime());i.setDate(i.getDate()+4-(i.getDay()||7));t=i.getTime();i.setMonth(0);i.setDate(1);return Math.floor(Math.round((t-i)/864e5)/7)+1},parseDate:function(t,i,n){if(t==null||i==null){throw"Invalid arguments"}i=typeof i==="object"?i.toString():i+"";if(i===""){return null}var o,a,s,r=0,l=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff,d=typeof l!=="string"?l:(new Date).getFullYear()%100+parseInt(l,10),c=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,u=(n?n.dayNames:null)||this._defaults.dayNames,p=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,f=(n?n.monthNames:null)||this._defaults.monthNames,h=-1,m=-1,g=-1,b=-1,v=false,y,C=function(e){var i=o+1<t.length&&t.charAt(o+1)===e;if(i){o++}return i},_=function(e){var t=C(e),n=e==="@"?14:e==="!"?20:e==="y"&&t?4:e==="o"?3:2,o=e==="y"?n:1,a=new RegExp("^\\d{"+o+","+n+"}"),s=i.substring(r).match(a);if(!s){throw"Missing number at position "+r}r+=s[0].length;return parseInt(s[0],10)},w=function(t,n,o){var a=-1,s=e.map(C(t)?o:n,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});e.each(s,function(e,t){var n=t[1];if(i.substr(r,n.length).toLowerCase()===n.toLowerCase()){a=t[0];r+=n.length;return false}});if(a!==-1){return a+1}else{throw"Unknown name at position "+r}},x=function(){if(i.charAt(r)!==t.charAt(o)){throw"Unexpected literal at position "+r}r++};for(o=0;o<t.length;o++){if(v){if(t.charAt(o)==="'"&&!C("'")){v=false}else{x()}}else{switch(t.charAt(o)){case"d":g=_("d");break;case"D":w("D",c,u);break;case"o":b=_("o");break;case"m":m=_("m");break;case"M":m=w("M",p,f);break;case"y":h=_("y");break;case"@":y=new Date(_("@"));h=y.getFullYear();m=y.getMonth()+1;g=y.getDate();break;case"!":y=new Date((_("!")-this._ticksTo1970)/1e4);h=y.getFullYear();m=y.getMonth()+1;g=y.getDate();break;case"'":if(C("'")){x()}else{v=true}break;default:x()}}}if(r<i.length){s=i.substr(r);if(!/^\s+/.test(s)){throw"Extra/unparsed characters found in date: "+s}}if(h===-1){h=(new Date).getFullYear()}else if(h<100){h+=(new Date).getFullYear()-(new Date).getFullYear()%100+(h<=d?0:-100)}if(b>-1){m=1;g=b;do{a=this._getDaysInMonth(h,m-1);if(g<=a){break}m++;g-=a}while(true)}y=this._daylightSavingAdjust(new Date(h,m-1,g));if(y.getFullYear()!==h||y.getMonth()+1!==m||y.getDate()!==g){throw"Invalid date"}return y},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:((1970-1)*365+Math.floor(1970/4)-Math.floor(1970/100)+Math.floor(1970/400))*24*60*60*1e7,formatDate:function(e,t,i){if(!t){return""}var n,o=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,a=(i?i.dayNames:null)||this._defaults.dayNames,s=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,r=(i?i.monthNames:null)||this._defaults.monthNames,l=function(t){var i=n+1<e.length&&e.charAt(n+1)===t;if(i){n++}return i},d=function(e,t,i){var n=""+t;if(l(e)){while(n.length<i){n="0"+n}}return n},c=function(e,t,i,n){return l(e)?n[t]:i[t]},u="",p=false;if(t){for(n=0;n<e.length;n++){if(p){if(e.charAt(n)==="'"&&!l("'")){p=false}else{u+=e.charAt(n)}}else{switch(e.charAt(n)){case"d":u+=d("d",t.getDate(),2);break;case"D":u+=c("D",t.getDay(),o,a);break;case"o":u+=d("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=d("m",t.getMonth()+1,2);break;case"M":u+=c("M",t.getMonth(),s,r);break;case"y":u+=l("y")?t.getFullYear():(t.getFullYear()%100<10?"0":"")+t.getFullYear()%100;break;case"@":u+=t.getTime();break;case"!":u+=t.getTime()*1e4+this._ticksTo1970;break;case"'":if(l("'")){u+="'"}else{p=true}break;default:u+=e.charAt(n)}}}}return u},_possibleChars:function(e){var t,i="",n=false,o=function(i){var n=t+1<e.length&&e.charAt(t+1)===i;if(n){t++}return n};for(t=0;t<e.length;t++){if(n){if(e.charAt(t)==="'"&&!o("'")){n=false}else{i+=e.charAt(t)}}else{switch(e.charAt(t)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":if(o("'")){i+="'"}else{n=true}break;default:i+=e.charAt(t)}}}return i},_get:function(e,t){return e.settings[t]!==undefined?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()===e.lastVal){return}var i=this._get(e,"dateFormat"),n=e.lastVal=e.input?e.input.val():null,o=this._getDefaultDate(e),a=o,s=this._getFormatConfig(e);try{a=this.parseDate(i,n,s)||o}catch(e){n=t?"":n}e.selectedDay=a.getDate();e.drawMonth=e.selectedMonth=a.getMonth();e.drawYear=e.selectedYear=a.getFullYear();e.currentDay=n?a.getDate():0;e.currentMonth=n?a.getMonth():0;e.currentYear=n?a.getFullYear():0;this._adjustInstDate(e)},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,i,n){var o=function(e){var t=new Date;t.setDate(t.getDate()+e);return t},a=function(i){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),i,e.datepicker._getFormatConfig(t))}catch(e){}var n=(i.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,o=n.getFullYear(),a=n.getMonth(),s=n.getDate(),r=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=r.exec(i);while(l){switch(l[2]||"d"){case"d":case"D":s+=parseInt(l[1],10);break;case"w":case"W":s+=parseInt(l[1],10)*7;break;case"m":case"M":a+=parseInt(l[1],10);s=Math.min(s,e.datepicker._getDaysInMonth(o,a));break;case"y":case"Y":o+=parseInt(l[1],10);s=Math.min(s,e.datepicker._getDaysInMonth(o,a));break}l=r.exec(i)}return new Date(o,a,s)},s=i==null||i===""?n:typeof i==="string"?a(i):typeof i==="number"?isNaN(i)?n:o(i):new Date(i.getTime());s=s&&s.toString()==="Invalid Date"?n:s;if(s){s.setHours(0);s.setMinutes(0);s.setSeconds(0);s.setMilliseconds(0)}return this._daylightSavingAdjust(s)},_daylightSavingAdjust:function(e){if(!e){return null}e.setHours(e.getHours()>12?e.getHours()+2:0);return e},_setDate:function(e,t,i){var n=!t,o=e.selectedMonth,a=e.selectedYear,s=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=s.getDate();e.drawMonth=e.selectedMonth=e.currentMonth=s.getMonth();e.drawYear=e.selectedYear=e.currentYear=s.getFullYear();if((o!==e.selectedMonth||a!==e.selectedYear)&&!i){this._notifyChange(e)}this._adjustInstDate(e);if(e.input){e.input.val(n?"":this._formatDate(e))}},_getDate:function(e){var t=!e.currentYear||e.input&&e.input.val()===""?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var i=this._get(t,"stepMonths"),n="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(n,-i,"M")},next:function(){e.datepicker._adjustDate(n,+i,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(n)},selectDay:function(){e.datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this);return false},selectMonth:function(){e.datepicker._selectMonthYear(n,this,"M");return false},selectYear:function(){e.datepicker._selectMonthYear(n,this,"Y");return false}};e(this).on(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,i,n,o,a,s,r,l,d,c,u,p,f,h,m,g,b,v,y,C,_,w,x,k,S,I,T,A,P,E,M,D,N,F,O,R,L,B,j,U=new Date,V=this._daylightSavingAdjust(new Date(U.getFullYear(),U.getMonth(),U.getDate())),H=this._get(e,"isRTL"),q=this._get(e,"showButtonPanel"),z=this._get(e,"hideIfNoPrevNext"),W=this._get(e,"navigationAsDateFormat"),G=this._getNumberOfMonths(e),Y=this._get(e,"showCurrentAtPos"),X=this._get(e,"stepMonths"),K=G[0]!==1||G[1]!==1,$=this._daylightSavingAdjust(!e.currentDay?new Date(9999,9,9):new Date(e.currentYear,e.currentMonth,e.currentDay)),Q=this._getMinMaxDate(e,"min"),J=this._getMinMaxDate(e,"max"),Z=e.drawMonth-Y,ee=e.drawYear;if(Z<0){Z+=12;ee--}if(J){t=this._daylightSavingAdjust(new Date(J.getFullYear(),J.getMonth()-G[0]*G[1]+1,J.getDate()));t=Q&&t<Q?Q:t;while(this._daylightSavingAdjust(new Date(ee,Z,1))>t){Z--;if(Z<0){Z=11;ee--}}}e.drawMonth=Z;e.drawYear=ee;i=this._get(e,"prevText");i=!W?i:this.formatDate(i,this._daylightSavingAdjust(new Date(ee,Z-X,1)),this._getFormatConfig(e));n=this._canAdjustMonth(e,-1,ee,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click'"+" title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(H?"e":"w")+"'>"+i+"</span></a>":z?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(H?"e":"w")+"'>"+i+"</span></a>";o=this._get(e,"nextText");o=!W?o:this.formatDate(o,this._daylightSavingAdjust(new Date(ee,Z+X,1)),this._getFormatConfig(e));a=this._canAdjustMonth(e,+1,ee,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click'"+" title='"+o+"'><span class='ui-icon ui-icon-circle-triangle-"+(H?"w":"e")+"'>"+o+"</span></a>":z?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+o+"'><span class='ui-icon ui-icon-circle-triangle-"+(H?"w":"e")+"'>"+o+"</span></a>";s=this._get(e,"currentText");r=this._get(e,"gotoCurrent")&&e.currentDay?$:V;s=!W?s:this.formatDate(s,r,this._getFormatConfig(e));l=!e.inline?"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>":"";d=q?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(H?l:"")+(this._isInRange(e,r)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'"+">"+s+"</button>":"")+(H?"":l)+"</div>":"";c=parseInt(this._get(e,"firstDay"),10);c=isNaN(c)?0:c;u=this._get(e,"showWeek");p=this._get(e,"dayNames");f=this._get(e,"dayNamesMin");h=this._get(e,"monthNames");m=this._get(e,"monthNamesShort");g=this._get(e,"beforeShowDay");b=this._get(e,"showOtherMonths");v=this._get(e,"selectOtherMonths");y=this._getDefaultDate(e);C="";for(w=0;w<G[0];w++){x="";this.maxRows=4;for(k=0;k<G[1];k++){S=this._daylightSavingAdjust(new Date(ee,Z,e.selectedDay));I=" ui-corner-all";T="";if(K){T+="<div class='ui-datepicker-group";if(G[1]>1){switch(k){case 0:T+=" ui-datepicker-group-first";I=" ui-corner-"+(H?"right":"left");break;case G[1]-1:T+=" ui-datepicker-group-last";I=" ui-corner-"+(H?"left":"right");break;default:T+=" ui-datepicker-group-middle";I="";break}}T+="'>"}T+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+I+"'>"+(/all|left/.test(I)&&w===0?H?a:n:"")+(/all|right/.test(I)&&w===0?H?n:a:"")+this._generateMonthYearHeader(e,Z,ee,Q,J,w>0||k>0,h,m)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>";A=u?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"";for(_=0;_<7;_++){P=(_+c)%7;A+="<th scope='col'"+((_+c+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+p[P]+"'>"+f[P]+"</span></th>"}T+=A+"</tr></thead><tbody>";E=this._getDaysInMonth(ee,Z);if(ee===e.selectedYear&&Z===e.selectedMonth){e.selectedDay=Math.min(e.selectedDay,E)}M=(this._getFirstDayOfMonth(ee,Z)-c+7)%7;D=Math.ceil((M+E)/7);N=K?this.maxRows>D?this.maxRows:D:D;this.maxRows=N;F=this._daylightSavingAdjust(new Date(ee,Z,1-M));for(O=0;O<N;O++){T+="<tr>";R=!u?"":"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(F)+"</td>";for(_=0;_<7;_++){L=g?g.apply(e.input?e.input[0]:null,[F]):[true,""];B=F.getMonth()!==Z;j=B&&!v||!L[0]||Q&&F<Q||J&&F>J;R+="<td class='"+((_+c+6)%7>=5?" ui-datepicker-week-end":"")+(B?" ui-datepicker-other-month":"")+(F.getTime()===S.getTime()&&Z===e.selectedMonth&&e._keyEvent||y.getTime()===F.getTime()&&y.getTime()===S.getTime()?" "+this._dayOverClass:"")+(j?" "+this._unselectableClass+" ui-state-disabled":"")+(B&&!b?"":" "+L[1]+(F.getTime()===$.getTime()?" "+this._currentClass:"")+(F.getTime()===V.getTime()?" ui-datepicker-today":""))+"'"+((!B||b)&&L[2]?" title='"+L[2].replace(/'/g,"&#39;")+"'":"")+(j?"":" data-handler='selectDay' data-event='click' data-month='"+F.getMonth()+"' data-year='"+F.getFullYear()+"'")+">"+(B&&!b?"&#xa0;":j?"<span class='ui-state-default'>"+F.getDate()+"</span>":"<a class='ui-state-default"+(F.getTime()===V.getTime()?" ui-state-highlight":"")+(F.getTime()===$.getTime()?" ui-state-active":"")+(B?" ui-priority-secondary":"")+"' href='#'>"+F.getDate()+"</a>")+"</td>";F.setDate(F.getDate()+1);F=this._daylightSavingAdjust(F)}T+=R+"</tr>"}Z++;if(Z>11){Z=0;ee++}T+="</tbody></table>"+(K?"</div>"+(G[0]>0&&k===G[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"");x+=T}C+=x}C+=d;e._keyEvent=false;return C},_generateMonthYearHeader:function(e,t,i,n,o,a,s,r){var l,d,c,u,p,f,h,m,g=this._get(e,"changeMonth"),b=this._get(e,"changeYear"),v=this._get(e,"showMonthAfterYear"),y="<div class='ui-datepicker-title'>",C="";if(a||!g){C+="<span class='ui-datepicker-month'>"+s[t]+"</span>"}else{l=n&&n.getFullYear()===i;d=o&&o.getFullYear()===i;C+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>";for(c=0;c<12;c++){if((!l||c>=n.getMonth())&&(!d||c<=o.getMonth())){C+="<option value='"+c+"'"+(c===t?" selected='selected'":"")+">"+r[c]+"</option>"}}C+="</select>"}if(!v){y+=C+(a||!(g&&b)?"&#xa0;":"")}if(!e.yearshtml){e.yearshtml="";if(a||!b){y+="<span class='ui-datepicker-year'>"+i+"</span>"}else{u=this._get(e,"yearRange").split(":");p=(new Date).getFullYear();f=function(e){var t=e.match(/c[+\-].*/)?i+parseInt(e.substring(1),10):e.match(/[+\-].*/)?p+parseInt(e,10):parseInt(e,10);return isNaN(t)?p:t};h=f(u[0]);m=Math.max(h,f(u[1]||""));h=n?Math.max(h,n.getFullYear()):h;m=o?Math.min(m,o.getFullYear()):m;e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";for(;h<=m;h++){e.yearshtml+="<option value='"+h+"'"+(h===i?" selected='selected'":"")+">"+h+"</option>"}e.yearshtml+="</select>";y+=e.yearshtml;e.yearshtml=null}}y+=this._get(e,"yearSuffix");if(v){y+=(a||!(g&&b)?"&#xa0;":"")+C}y+="</div>";return y},_adjustInstDate:function(e,t,i){var n=e.selectedYear+(i==="Y"?t:0),o=e.selectedMonth+(i==="M"?t:0),a=Math.min(e.selectedDay,this._getDaysInMonth(n,o))+(i==="D"?t:0),s=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(n,o,a)));e.selectedDay=s.getDate();e.drawMonth=e.selectedMonth=s.getMonth();e.drawYear=e.selectedYear=s.getFullYear();if(i==="M"||i==="Y"){this._notifyChange(e)}},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max"),o=i&&t<i?i:t;return n&&o>n?n:o},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");if(t){t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])}},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return t==null?[1,1]:typeof t==="number"?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,n){var o=this._getNumberOfMonths(e),a=this._daylightSavingAdjust(new Date(i,n+(t<0?t:o[0]*o[1]),1));if(t<0){a.setDate(this._getDaysInMonth(a.getFullYear(),a.getMonth()))}return this._isInRange(e,a)},_isInRange:function(e,t){var i,n,o=this._getMinMaxDate(e,"min"),a=this._getMinMaxDate(e,"max"),s=null,r=null,l=this._get(e,"yearRange");if(l){i=l.split(":");n=(new Date).getFullYear();s=parseInt(i[0],10);r=parseInt(i[1],10);if(i[0].match(/[+\-].*/)){s+=n}if(i[1].match(/[+\-].*/)){r+=n}}return(!o||t.getTime()>=o.getTime())&&(!a||t.getTime()<=a.getTime())&&(!s||t.getFullYear()>=s)&&(!r||t.getFullYear()<=r)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");t=typeof t!=="string"?t:(new Date).getFullYear()%100+parseInt(t,10);return{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,n){if(!t){e.currentDay=e.selectedDay;e.currentMonth=e.selectedMonth;e.currentYear=e.selectedYear}var o=t?typeof t==="object"?t:this._daylightSavingAdjust(new Date(n,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),o,this._getFormatConfig(e))}});function o(t){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.on("mouseout",i,function(){e(this).removeClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!==-1){e(this).removeClass("ui-datepicker-prev-hover")}if(this.className.indexOf("ui-datepicker-next")!==-1){e(this).removeClass("ui-datepicker-next-hover")}}).on("mouseover",i,a)}function a(){if(!e.datepicker._isDisabledDatepicker(t.inline?t.dpDiv.parent()[0]:t.input[0])){e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");e(this).addClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!==-1){e(this).addClass("ui-datepicker-prev-hover")}if(this.className.indexOf("ui-datepicker-next")!==-1){e(this).addClass("ui-datepicker-next-hover")}}}function s(t,i){e.extend(t,i);for(var n in i){if(i[n]==null){t[n]=i[n]}}return t}e.fn.datepicker=function(t){if(!this.length){return this}if(!e.datepicker.initialized){e(document).on("mousedown",e.datepicker._checkExternalClick);e.datepicker.initialized=true}if(e("#"+e.datepicker._mainDivId).length===0){e("body").append(e.datepicker.dpDiv)}var i=Array.prototype.slice.call(arguments,1);if(typeof t==="string"&&(t==="isDisabled"||t==="getDate"||t==="widget")){return e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i))}if(t==="option"&&arguments.length===2&&typeof arguments[1]==="string"){return e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i))}return this.each(function(){typeof t==="string"?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(i)):e.datepicker._attachDatepicker(this,t)})};e.datepicker=new n;e.datepicker.initialized=false;e.datepicker.uuid=(new Date).getTime();e.datepicker.version="1.12.1";return e.datepicker})},622:function(e,t,i){var n,o,a;(function(s){if(true){!(o=[i(1),i(12),i(46)],n=s,a=typeof n==="function"?n.apply(t,o):n,a!==undefined&&(e.exports=a))}else{}})(function(e){return e.widget("ui.progressbar",{version:"1.12.1",options:{classes:{"ui-progressbar":"ui-corner-all","ui-progressbar-value":"ui-corner-left","ui-progressbar-complete":"ui-corner-right"},max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue();this.element.attr({role:"progressbar","aria-valuemin":this.min});this._addClass("ui-progressbar","ui-widget ui-widget-content");this.valueDiv=e("<div>").appendTo(this.element);this._addClass(this.valueDiv,"ui-progressbar-value","ui-widget-header");this._refreshValue()},_destroy:function(){this.element.removeAttr("role aria-valuemin aria-valuemax aria-valuenow");this.valueDiv.remove()},value:function(e){if(e===undefined){return this.options.value}this.options.value=this._constrainedValue(e);this._refreshValue()},_constrainedValue:function(e){if(e===undefined){e=this.options.value}this.indeterminate=e===false;if(typeof e!=="number"){e=0}return this.indeterminate?false:Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value;this._super(e);this.options.value=this._constrainedValue(t);this._refreshValue()},_setOption:function(e,t){if(e==="max"){t=Math.max(this.min,t)}this._super(e,t)},_setOptionDisabled:function(e){this._super(e);this.element.attr("aria-disabled",e);this._toggleClass(null,"ui-state-disabled",!!e)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).width(i.toFixed(0)+"%");this._toggleClass(this.valueDiv,"ui-progressbar-complete",null,t===this.options.max)._toggleClass("ui-progressbar-indeterminate",null,this.indeterminate);if(this.indeterminate){this.element.removeAttr("aria-valuenow");if(!this.overlayDiv){this.overlayDiv=e("<div>").appendTo(this.valueDiv);this._addClass(this.overlayDiv,"ui-progressbar-overlay")}}else{this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t});if(this.overlayDiv){this.overlayDiv.remove();this.overlayDiv=null}}if(this.oldValue!==t){this.oldValue=t;this._trigger("change")}if(t===this.options.max){this._trigger("complete")}}})})},623:function(e,t,i){var n,o,a;(function(s){if(true){!(o=[i(1),i(129),i(12),i(46)],n=s,a=typeof n==="function"?n.apply(t,o):n,a!==undefined&&(e.exports=a))}else{}})(function(e){return e.widget("ui.selectable",e.ui.mouse,{version:"1.12.1",options:{appendTo:"body",autoRefresh:true,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t=this;this._addClass("ui-selectable");this.dragged=false;this.refresh=function(){t.elementPos=e(t.element[0]).offset();t.selectees=e(t.options.filter,t.element[0]);t._addClass(t.selectees,"ui-selectee");t.selectees.each(function(){var i=e(this),n=i.offset(),o={left:n.left-t.elementPos.left,top:n.top-t.elementPos.top};e.data(this,"selectable-item",{element:this,$element:i,left:o.left,top:o.top,right:o.left+i.outerWidth(),bottom:o.top+i.outerHeight(),startselected:false,selected:i.hasClass("ui-selected"),selecting:i.hasClass("ui-selecting"),unselecting:i.hasClass("ui-unselecting")})})};this.refresh();this._mouseInit();this.helper=e("<div>");this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item");this._mouseDestroy()},_mouseStart:function(t){var i=this,n=this.options;this.opos=[t.pageX,t.pageY];this.elementPos=e(this.element[0]).offset();if(this.options.disabled){return}this.selectees=e(n.filter,this.element[0]);this._trigger("start",t);e(n.appendTo).append(this.helper);this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0});if(n.autoRefresh){this.refresh()}this.selectees.filter(".ui-selected").each(function(){var n=e.data(this,"selectable-item");n.startselected=true;if(!t.metaKey&&!t.ctrlKey){i._removeClass(n.$element,"ui-selected");n.selected=false;i._addClass(n.$element,"ui-unselecting");n.unselecting=true;i._trigger("unselecting",t,{unselecting:n.element})}});e(t.target).parents().addBack().each(function(){var n,o=e.data(this,"selectable-item");if(o){n=!t.metaKey&&!t.ctrlKey||!o.$element.hasClass("ui-selected");i._removeClass(o.$element,n?"ui-unselecting":"ui-selected")._addClass(o.$element,n?"ui-selecting":"ui-unselecting");o.unselecting=!n;o.selecting=n;o.selected=n;if(n){i._trigger("selecting",t,{selecting:o.element})}else{i._trigger("unselecting",t,{unselecting:o.element})}return false}})},_mouseDrag:function(t){this.dragged=true;if(this.options.disabled){return}var i,n=this,o=this.options,a=this.opos[0],s=this.opos[1],r=t.pageX,l=t.pageY;if(a>r){i=r;r=a;a=i}if(s>l){i=l;l=s;s=i}this.helper.css({left:a,top:s,width:r-a,height:l-s});this.selectees.each(function(){var i=e.data(this,"selectable-item"),d=false,c={};if(!i||i.element===n.element[0]){return}c.left=i.left+n.elementPos.left;c.right=i.right+n.elementPos.left;c.top=i.top+n.elementPos.top;c.bottom=i.bottom+n.elementPos.top;if(o.tolerance==="touch"){d=!(c.left>r||c.right<a||c.top>l||c.bottom<s)}else if(o.tolerance==="fit"){d=c.left>a&&c.right<r&&c.top>s&&c.bottom<l}if(d){if(i.selected){n._removeClass(i.$element,"ui-selected");i.selected=false}if(i.unselecting){n._removeClass(i.$element,"ui-unselecting");i.unselecting=false}if(!i.selecting){n._addClass(i.$element,"ui-selecting");i.selecting=true;n._trigger("selecting",t,{selecting:i.element})}}else{if(i.selecting){if((t.metaKey||t.ctrlKey)&&i.startselected){n._removeClass(i.$element,"ui-selecting");i.selecting=false;n._addClass(i.$element,"ui-selected");i.selected=true}else{n._removeClass(i.$element,"ui-selecting");i.selecting=false;if(i.startselected){n._addClass(i.$element,"ui-unselecting");i.unselecting=true}n._trigger("unselecting",t,{unselecting:i.element})}}if(i.selected){if(!t.metaKey&&!t.ctrlKey&&!i.startselected){n._removeClass(i.$element,"ui-selected");i.selected=false;n._addClass(i.$element,"ui-unselecting");i.unselecting=true;n._trigger("unselecting",t,{unselecting:i.element})}}}});return false},_mouseStop:function(t){var i=this;this.dragged=false;e(".ui-unselecting",this.element[0]).each(function(){var n=e.data(this,"selectable-item");i._removeClass(n.$element,"ui-unselecting");n.unselecting=false;n.startselected=false;i._trigger("unselected",t,{unselected:n.element})});e(".ui-selecting",this.element[0]).each(function(){var n=e.data(this,"selectable-item");i._removeClass(n.$element,"ui-selecting")._addClass(n.$element,"ui-selected");n.selecting=false;n.selected=true;n.startselected=true;i._trigger("selected",t,{selected:n.element})});this._trigger("stop",t);this.helper.remove();return false}})})},624:function(e,t,i){var n,o,a;(function(s){if(true){!(o=[i(1),i(279),i(156),i(292),i(80),i(293),i(148),i(140),i(12),i(46)],n=s,a=typeof n==="function"?n.apply(t,o):n,a!==undefined&&(e.exports=a))}else{}})(function(e){return e.widget("ui.selectmenu",[e.ui.formResetMixin,{version:"1.12.1",defaultElement:"<select>",options:{appendTo:null,classes:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"},disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:false,change:null,close:null,focus:null,open:null,select:null},_create:function(){var t=this.element.uniqueId().attr("id");this.ids={element:t,button:t+"-button",menu:t+"-menu"};this._drawButton();this._drawMenu();this._bindFormResetHandler();this._rendered=false;this.menuItems=e()},_drawButton:function(){var t,i=this,n=this._parseOption(this.element.find("option:selected"),this.element[0].selectedIndex);this.labels=this.element.labels().attr("for",this.ids.button);this._on(this.labels,{click:function(e){this.button.focus();e.preventDefault()}});this.element.hide();this.button=e("<span>",{tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true",title:this.element.attr("title")}).insertAfter(this.element);this._addClass(this.button,"ui-selectmenu-button ui-selectmenu-button-closed","ui-button ui-widget");t=e("<span>").appendTo(this.button);this._addClass(t,"ui-selectmenu-icon","ui-icon "+this.options.icons.button);this.buttonItem=this._renderButtonItem(n).appendTo(this.button);if(this.options.width!==false){this._resizeButton()}this._on(this.button,this._buttonEvents);this.button.one("focusin",function(){if(!i._rendered){i._refreshMenu()}})},_drawMenu:function(){var t=this;this.menu=e("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu});this.menuWrap=e("<div>").append(this.menu);this._addClass(this.menuWrap,"ui-selectmenu-menu","ui-front");this.menuWrap.appendTo(this._appendTo());this.menuInstance=this.menu.menu({classes:{"ui-menu":"ui-corner-bottom"},role:"listbox",select:function(e,i){e.preventDefault();t._setSelection();t._select(i.item.data("ui-selectmenu-item"),e)},focus:function(e,i){var n=i.item.data("ui-selectmenu-item");if(t.focusIndex!=null&&n.index!==t.focusIndex){t._trigger("focus",e,{item:n});if(!t.isOpen){t._select(n,e)}}t.focusIndex=n.index;t.button.attr("aria-activedescendant",t.menuItems.eq(n.index).attr("id"))}}).menu("instance");this.menuInstance._off(this.menu,"mouseleave");this.menuInstance._closeOnDocumentClick=function(){return false};this.menuInstance._isDivider=function(){return false}},refresh:function(){this._refreshMenu();this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(this._getSelectedItem().data("ui-selectmenu-item")||{}));if(this.options.width===null){this._resizeButton()}},_refreshMenu:function(){var e,t=this.element.find("option");this.menu.empty();this._parseOptions(t);this._renderMenu(this.menu,this.items);this.menuInstance.refresh();this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup").find(".ui-menu-item-wrapper");this._rendered=true;if(!t.length){return}e=this._getSelectedItem();this.menuInstance.focus(null,e);this._setAria(e.data("ui-selectmenu-item"));this._setOption("disabled",this.element.prop("disabled"))},open:function(e){if(this.options.disabled){return}if(!this._rendered){this._refreshMenu()}else{this._removeClass(this.menu.find(".ui-state-active"),null,"ui-state-active");this.menuInstance.focus(null,this._getSelectedItem())}if(!this.menuItems.length){return}this.isOpen=true;this._toggleAttr();this._resizeMenu();this._position();this._on(this.document,this._documentClick);this._trigger("open",e)},_position:function(){this.menuWrap.position(e.extend({of:this.button},this.options.position))},close:function(e){if(!this.isOpen){return}this.isOpen=false;this._toggleAttr();this.range=null;this._off(this.document);this._trigger("close",e)},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderButtonItem:function(t){var i=e("<span>");this._setText(i,t.label);this._addClass(i,"ui-selectmenu-text");return i},_renderMenu:function(t,i){var n=this,o="";e.each(i,function(i,a){var s;if(a.optgroup!==o){s=e("<li>",{text:a.optgroup});n._addClass(s,"ui-selectmenu-optgroup","ui-menu-divider"+(a.element.parent("optgroup").prop("disabled")?" ui-state-disabled":""));s.appendTo(t);o=a.optgroup}n._renderItemData(t,a)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-selectmenu-item",t)},_renderItem:function(t,i){var n=e("<li>"),o=e("<div>",{title:i.element.attr("title")});if(i.disabled){this._addClass(n,null,"ui-state-disabled")}this._setText(o,i.label);return n.append(o).appendTo(t)},_setText:function(e,t){if(t){e.text(t)}else{e.html("&#160;")}},_move:function(e,t){var i,n,o=".ui-menu-item";if(this.isOpen){i=this.menuItems.eq(this.focusIndex).parent("li")}else{i=this.menuItems.eq(this.element[0].selectedIndex).parent("li");o+=":not(.ui-state-disabled)"}if(e==="first"||e==="last"){n=i[e==="first"?"prevAll":"nextAll"](o).eq(-1)}else{n=i[e+"All"](o).eq(0)}if(n.length){this.menuInstance.focus(t,n)}},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex).parent("li")},_toggle:function(e){this[this.isOpen?"close":"open"](e)},_setSelection:function(){var e;if(!this.range){return}if(window.getSelection){e=window.getSelection();e.removeAllRanges();e.addRange(this.range)}else{this.range.select()}this.button.focus()},_documentClick:{mousedown:function(t){if(!this.isOpen){return}if(!e(t.target).closest(".ui-selectmenu-menu, #"+e.ui.escapeSelector(this.ids.button)).length){this.close(t)}}},_buttonEvents:{mousedown:function(){var e;if(window.getSelection){e=window.getSelection();if(e.rangeCount){this.range=e.getRangeAt(0)}}else{this.range=document.selection.createRange()}},click:function(e){this._setSelection();this._toggle(e)},keydown:function(t){var i=true;switch(t.keyCode){case e.ui.keyCode.TAB:case e.ui.keyCode.ESCAPE:this.close(t);i=false;break;case e.ui.keyCode.ENTER:if(this.isOpen){this._selectFocusedItem(t)}break;case e.ui.keyCode.UP:if(t.altKey){this._toggle(t)}else{this._move("prev",t)}break;case e.ui.keyCode.DOWN:if(t.altKey){this._toggle(t)}else{this._move("next",t)}break;case e.ui.keyCode.SPACE:if(this.isOpen){this._selectFocusedItem(t)}else{this._toggle(t)}break;case e.ui.keyCode.LEFT:this._move("prev",t);break;case e.ui.keyCode.RIGHT:this._move("next",t);break;case e.ui.keyCode.HOME:case e.ui.keyCode.PAGE_UP:this._move("first",t);break;case e.ui.keyCode.END:case e.ui.keyCode.PAGE_DOWN:this._move("last",t);break;default:this.menu.trigger(t);i=false}if(i){t.preventDefault()}}},_selectFocusedItem:function(e){var t=this.menuItems.eq(this.focusIndex).parent("li");if(!t.hasClass("ui-state-disabled")){this._select(t.data("ui-selectmenu-item"),e)}},_select:function(e,t){var i=this.element[0].selectedIndex;this.element[0].selectedIndex=e.index;this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(e));this._setAria(e);this._trigger("select",t,{item:e});if(e.index!==i){this._trigger("change",t,{item:e})}this.close(t)},_setAria:function(e){var t=this.menuItems.eq(e.index).attr("id");this.button.attr({"aria-labelledby":t,"aria-activedescendant":t});this.menu.attr("aria-activedescendant",t)},_setOption:function(e,t){if(e==="icons"){var i=this.button.find("span.ui-icon");this._removeClass(i,null,this.options.icons.button)._addClass(i,null,t.button)}this._super(e,t);if(e==="appendTo"){this.menuWrap.appendTo(this._appendTo())}if(e==="width"){this._resizeButton()}},_setOptionDisabled:function(e){this._super(e);this.menuInstance.option("disabled",e);this.button.attr("aria-disabled",e);this._toggleClass(this.button,null,"ui-state-disabled",e);this.element.prop("disabled",e);if(e){this.button.attr("tabindex",-1);this.close()}else{this.button.attr("tabindex",0)}},_appendTo:function(){var t=this.options.appendTo;if(t){t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)}if(!t||!t[0]){t=this.element.closest(".ui-front, dialog")}if(!t.length){t=this.document[0].body}return t},_toggleAttr:function(){this.button.attr("aria-expanded",this.isOpen);this._removeClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"closed":"open"))._addClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"open":"closed"))._toggleClass(this.menuWrap,"ui-selectmenu-open",null,this.isOpen);this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var e=this.options.width;if(e===false){this.button.css("width","");return}if(e===null){e=this.element.show().outerWidth();this.element.hide()}this.button.outerWidth(e)},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){var e=this._super();e.disabled=this.element.prop("disabled");return e},_parseOptions:function(t){var i=this,n=[];t.each(function(t,o){n.push(i._parseOption(e(o),t))});this.items=n},_parseOption:function(e,t){var i=e.parent("optgroup");return{element:e,index:t,value:e.val(),label:e.text(),optgroup:i.attr("label")||"",disabled:i.prop("disabled")||e.prop("disabled")}},_destroy:function(){this._unbindFormResetHandler();this.menuWrap.remove();this.button.remove();this.element.show();this.element.removeUniqueId();this.labels.attr("for",this.ids.element)}}])})},625:function(e,t,i){var n,o,a;(function(s){if(true){!(o=[i(1),i(129),i(80),i(12),i(46)],n=s,a=typeof n==="function"?n.apply(t,o):n,a!==undefined&&(e.exports=a))}else{}})(function(e){return e.widget("ui.slider",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:false,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=false;this._mouseSliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this._calculateNewMax();this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content");this._refresh();this._animateOff=false},_refresh:function(){this._createRange();this._createHandles();this._setupEvents();this._refreshValue()},_createHandles:function(){var t,i,n=this.options,o=this.element.find(".ui-slider-handle"),a="<span tabindex='0'></span>",s=[];i=n.values&&n.values.length||1;if(o.length>i){o.slice(i).remove();o=o.slice(0,i)}for(t=o.length;t<i;t++){s.push(a)}this.handles=o.add(e(s.join("")).appendTo(this.element));this._addClass(this.handles,"ui-slider-handle","ui-state-default");this.handle=this.handles.eq(0);this.handles.each(function(t){e(this).data("ui-slider-handle-index",t).attr("tabIndex",0)})},_createRange:function(){var t=this.options;if(t.range){if(t.range===true){if(!t.values){t.values=[this._valueMin(),this._valueMin()]}else if(t.values.length&&t.values.length!==2){t.values=[t.values[0],t.values[0]]}else if(e.isArray(t.values)){t.values=t.values.slice(0)}}if(!this.range||!this.range.length){this.range=e("<div>").appendTo(this.element);this._addClass(this.range,"ui-slider-range")}else{this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max");this.range.css({left:"",bottom:""})}if(t.range==="min"||t.range==="max"){this._addClass(this.range,"ui-slider-range-"+t.range)}}else{if(this.range){this.range.remove()}this.range=null}},_setupEvents:function(){this._off(this.handles);this._on(this.handles,this._handleEvents);this._hoverable(this.handles);this._focusable(this.handles)},_destroy:function(){this.handles.remove();if(this.range){this.range.remove()}this._mouseDestroy()},_mouseCapture:function(t){var i,n,o,a,s,r,l,d,c=this,u=this.options;if(u.disabled){return false}this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();i={x:t.pageX,y:t.pageY};n=this._normValueFromMouse(i);o=this._valueMax()-this._valueMin()+1;this.handles.each(function(t){var i=Math.abs(n-c.values(t));if(o>i||o===i&&(t===c._lastChangedValue||c.values(t)===u.min)){o=i;a=e(this);s=t}});r=this._start(t,s);if(r===false){return false}this._mouseSliding=true;this._handleIndex=s;this._addClass(a,null,"ui-state-active");a.trigger("focus");l=a.offset();d=!e(t.target).parents().addBack().is(".ui-slider-handle");this._clickOffset=d?{left:0,top:0}:{left:t.pageX-l.left-a.width()/2,top:t.pageY-l.top-a.height()/2-(parseInt(a.css("borderTopWidth"),10)||0)-(parseInt(a.css("borderBottomWidth"),10)||0)+(parseInt(a.css("marginTop"),10)||0)};if(!this.handles.hasClass("ui-state-hover")){this._slide(t,s,n)}this._animateOff=true;return true},_mouseStart:function(){return true},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);this._slide(e,this._handleIndex,i);return false},_mouseStop:function(e){this._removeClass(this.handles,null,"ui-state-active");this._mouseSliding=false;this._stop(e,this._handleIndex);this._change(e,this._handleIndex);this._handleIndex=null;this._clickOffset=null;this._animateOff=false;return false},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,n,o,a;if(this.orientation==="horizontal"){t=this.elementSize.width;i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else{t=this.elementSize.height;i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)}n=i/t;if(n>1){n=1}if(n<0){n=0}if(this.orientation==="vertical"){n=1-n}o=this._valueMax()-this._valueMin();a=this._valueMin()+n*o;return this._trimAlignValue(a)},_uiHash:function(e,t,i){var n={handle:this.handles[e],handleIndex:e,value:t!==undefined?t:this.value()};if(this._hasMultipleValues()){n.value=t!==undefined?t:this.values(e);n.values=i||this.values()}return n},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(e,t){return this._trigger("start",e,this._uiHash(t))},_slide:function(e,t,i){var n,o,a=this.value(),s=this.values();if(this._hasMultipleValues()){o=this.values(t?0:1);a=this.values(t);if(this.options.values.length===2&&this.options.range===true){i=t===0?Math.min(o,i):Math.max(o,i)}s[t]=i}if(i===a){return}n=this._trigger("slide",e,this._uiHash(t,i,s));if(n===false){return}if(this._hasMultipleValues()){this.values(t,i)}else{this.value(i)}},_stop:function(e,t){this._trigger("stop",e,this._uiHash(t))},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){this._lastChangedValue=t;this._trigger("change",e,this._uiHash(t))}},value:function(e){if(arguments.length){this.options.value=this._trimAlignValue(e);this._refreshValue();this._change(null,0);return}return this._value()},values:function(t,i){var n,o,a;if(arguments.length>1){this.options.values[t]=this._trimAlignValue(i);this._refreshValue();this._change(null,t);return}if(arguments.length){if(e.isArray(arguments[0])){n=this.options.values;o=arguments[0];for(a=0;a<n.length;a+=1){n[a]=this._trimAlignValue(o[a]);this._change(null,a)}this._refreshValue()}else{if(this._hasMultipleValues()){return this._values(t)}else{return this.value()}}}else{return this._values()}},_setOption:function(t,i){var n,o=0;if(t==="range"&&this.options.range===true){if(i==="min"){this.options.value=this._values(0);this.options.values=null}else if(i==="max"){this.options.value=this._values(this.options.values.length-1);this.options.values=null}}if(e.isArray(this.options.values)){o=this.options.values.length}this._super(t,i);switch(t){case"orientation":this._detectOrientation();this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation);this._refreshValue();if(this.options.range){this._refreshRange(i)}this.handles.css(i==="horizontal"?"bottom":"left","");break;case"value":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case"values":this._animateOff=true;this._refreshValue();for(n=o-1;n>=0;n--){this._change(null,n)}this._animateOff=false;break;case"step":case"min":case"max":this._animateOff=true;this._calculateNewMax();this._refreshValue();this._animateOff=false;break;case"range":this._animateOff=true;this._refresh();this._animateOff=false;break}},_setOptionDisabled:function(e){this._super(e);this._toggleClass(null,"ui-state-disabled",!!e)},_value:function(){var e=this.options.value;e=this._trimAlignValue(e);return e},_values:function(e){var t,i,n;if(arguments.length){t=this.options.values[e];t=this._trimAlignValue(t);return t}else if(this._hasMultipleValues()){i=this.options.values.slice();for(n=0;n<i.length;n+=1){i[n]=this._trimAlignValue(i[n])}return i}else{return[]}},_trimAlignValue:function(e){if(e<=this._valueMin()){return this._valueMin()}if(e>=this._valueMax()){return this._valueMax()}var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,n=e-i;if(Math.abs(i)*2>=t){n+=i>0?t:-t}return parseFloat(n.toFixed(5))},_calculateNewMax:function(){var e=this.options.max,t=this._valueMin(),i=this.options.step,n=Math.round((e-t)/i)*i;e=n+t;if(e>this.options.max){e-=i}this.max=parseFloat(e.toFixed(this._precision()))},_precision:function(){var e=this._precisionOf(this.options.step);if(this.options.min!==null){e=Math.max(e,this._precisionOf(this.options.min))}return e},_precisionOf:function(e){var t=e.toString(),i=t.indexOf(".");return i===-1?0:t.length-i-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(e){if(e==="vertical"){this.range.css({width:"",left:""})}if(e==="horizontal"){this.range.css({height:"",bottom:""})}},_refreshValue:function(){var t,i,n,o,a,s=this.options.range,r=this.options,l=this,d=!this._animateOff?r.animate:false,c={};if(this._hasMultipleValues()){this.handles.each(function(n){i=(l.values(n)-l._valueMin())/(l._valueMax()-l._valueMin())*100;c[l.orientation==="horizontal"?"left":"bottom"]=i+"%";e(this).stop(1,1)[d?"animate":"css"](c,r.animate);if(l.options.range===true){if(l.orientation==="horizontal"){if(n===0){l.range.stop(1,1)[d?"animate":"css"]({left:i+"%"},r.animate)}if(n===1){l.range[d?"animate":"css"]({width:i-t+"%"},{queue:false,duration:r.animate})}}else{if(n===0){l.range.stop(1,1)[d?"animate":"css"]({bottom:i+"%"},r.animate)}if(n===1){l.range[d?"animate":"css"]({height:i-t+"%"},{queue:false,duration:r.animate})}}}t=i})}else{n=this.value();o=this._valueMin();a=this._valueMax();i=a!==o?(n-o)/(a-o)*100:0;c[this.orientation==="horizontal"?"left":"bottom"]=i+"%";this.handle.stop(1,1)[d?"animate":"css"](c,r.animate);if(s==="min"&&this.orientation==="horizontal"){this.range.stop(1,1)[d?"animate":"css"]({width:i+"%"},r.animate)}if(s==="max"&&this.orientation==="horizontal"){this.range.stop(1,1)[d?"animate":"css"]({width:100-i+"%"},r.animate)}if(s==="min"&&this.orientation==="vertical"){this.range.stop(1,1)[d?"animate":"css"]({height:i+"%"},r.animate)}if(s==="max"&&this.orientation==="vertical"){this.range.stop(1,1)[d?"animate":"css"]({height:100-i+"%"},r.animate)}}},_handleEvents:{keydown:function(t){var i,n,o,a,s=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:t.preventDefault();if(!this._keySliding){this._keySliding=true;this._addClass(e(t.target),null,"ui-state-active");i=this._start(t,s);if(i===false){return}}break}a=this.options.step;if(this._hasMultipleValues()){n=o=this.values(s)}else{n=o=this.value()}switch(t.keyCode){case e.ui.keyCode.HOME:o=this._valueMin();break;case e.ui.keyCode.END:o=this._valueMax();break;case e.ui.keyCode.PAGE_UP:o=this._trimAlignValue(n+(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.PAGE_DOWN:o=this._trimAlignValue(n-(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(n===this._valueMax()){return}o=this._trimAlignValue(n+a);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(n===this._valueMin()){return}o=this._trimAlignValue(n-a);break}this._slide(t,s,o)},keyup:function(t){var i=e(t.target).data("ui-slider-handle-index");if(this._keySliding){this._keySliding=false;this._stop(t,i);this._change(t,i);this._removeClass(e(t.target),null,"ui-state-active")}}}})})},626:function(e,t,i){var n,o,a;(function(s){if(true){!(o=[i(1),i(129),i(295),i(294),i(298),i(12),i(46)],n=s,a=typeof n==="function"?n.apply(t,o):n,a!==undefined&&(e.exports=a))}else{}})(function(e){return e.widget("ui.sortable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:false,options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,i){return e>=t&&e<t+i},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){this.containerCache={};this._addClass("ui-sortable");this.refresh();this.offset=this.element.offset();this._mouseInit();this._setHandleClassName();this.ready=true},_setOption:function(e,t){this._super(e,t);if(e==="handle"){this._setHandleClassName()}},_setHandleClassName:function(){var t=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle");e.each(this.items,function(){t._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--){this.items[e].item.removeData(this.widgetName+"-item")}return this},_mouseCapture:function(t,i){var n=null,o=false,a=this;if(this.reverting){return false}if(this.options.disabled||this.options.type==="static"){return false}this._refreshItems(t);e(t.target).parents().each(function(){if(e.data(this,a.widgetName+"-item")===a){n=e(this);return false}});if(e.data(t.target,a.widgetName+"-item")===a){n=e(t.target)}if(!n){return false}if(this.options.handle&&!i){e(this.options.handle,n).find("*").addBack().each(function(){if(this===t.target){o=true}});if(!o){return false}}this.currentItem=n;this._removeCurrentsFromItems();return true},_mouseStart:function(t,i,n){var o,a,s=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(t);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=this._generatePosition(t);this.originalPageX=t.pageX;this.originalPageY=t.pageY;s.cursorAt&&this._adjustOffsetFromHelper(s.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};if(this.helper[0]!==this.currentItem[0]){this.currentItem.hide()}this._createPlaceholder();if(s.containment){this._setContainment()}if(s.cursor&&s.cursor!=="auto"){a=this.document.find("body");this.storedCursor=a.css("cursor");a.css("cursor",s.cursor);this.storedStylesheet=e("<style>*{ cursor: "+s.cursor+" !important; }</style>").appendTo(a)}if(s.opacity){if(this.helper.css("opacity")){this._storedOpacity=this.helper.css("opacity")}this.helper.css("opacity",s.opacity)}if(s.zIndex){if(this.helper.css("zIndex")){this._storedZIndex=this.helper.css("zIndex")}this.helper.css("zIndex",s.zIndex)}if(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"){this.overflowOffset=this.scrollParent.offset()}this._trigger("start",t,this._uiHash());if(!this._preserveHelperProportions){this._cacheHelperProportions()}if(!n){for(o=this.containers.length-1;o>=0;o--){this.containers[o]._trigger("activate",t,this._uiHash(this))}}if(e.ui.ddmanager){e.ui.ddmanager.current=this}if(e.ui.ddmanager&&!s.dropBehaviour){e.ui.ddmanager.prepareOffsets(this,t)}this.dragging=true;this._addClass(this.helper,"ui-sortable-helper");this._mouseDrag(t);return true},_mouseDrag:function(t){var i,n,o,a,s=this.options,r=false;this.position=this._generatePosition(t);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs){this.lastPositionAbs=this.positionAbs}if(this.options.scroll){if(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"){if(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<s.scrollSensitivity){this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+s.scrollSpeed}else if(t.pageY-this.overflowOffset.top<s.scrollSensitivity){this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-s.scrollSpeed}if(this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<s.scrollSensitivity){this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+s.scrollSpeed}else if(t.pageX-this.overflowOffset.left<s.scrollSensitivity){this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-s.scrollSpeed}}else{if(t.pageY-this.document.scrollTop()<s.scrollSensitivity){r=this.document.scrollTop(this.document.scrollTop()-s.scrollSpeed)}else if(this.window.height()-(t.pageY-this.document.scrollTop())<s.scrollSensitivity){r=this.document.scrollTop(this.document.scrollTop()+s.scrollSpeed)}if(t.pageX-this.document.scrollLeft()<s.scrollSensitivity){r=this.document.scrollLeft(this.document.scrollLeft()-s.scrollSpeed)}else if(this.window.width()-(t.pageX-this.document.scrollLeft())<s.scrollSensitivity){r=this.document.scrollLeft(this.document.scrollLeft()+s.scrollSpeed)}}if(r!==false&&e.ui.ddmanager&&!s.dropBehaviour){e.ui.ddmanager.prepareOffsets(this,t)}}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!=="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!=="x"){this.helper[0].style.top=this.position.top+"px"}for(i=this.items.length-1;i>=0;i--){n=this.items[i];o=n.item[0];a=this._intersectsWithPointer(n);if(!a){continue}if(n.instance!==this.currentContainer){continue}if(o!==this.currentItem[0]&&this.placeholder[a===1?"next":"prev"]()[0]!==o&&!e.contains(this.placeholder[0],o)&&(this.options.type==="semi-dynamic"?!e.contains(this.element[0],o):true)){this.direction=a===1?"down":"up";if(this.options.tolerance==="pointer"||this._intersectsWithSides(n)){this._rearrange(t,n)}else{break}this._trigger("change",t,this._uiHash());break}}this._contactContainers(t);if(e.ui.ddmanager){e.ui.ddmanager.drag(this,t)}this._trigger("sort",t,this._uiHash());this.lastPositionAbs=this.positionAbs;return false},_mouseStop:function(t,i){if(!t){return}if(e.ui.ddmanager&&!this.options.dropBehaviour){e.ui.ddmanager.drop(this,t)}if(this.options.revert){var n=this,o=this.placeholder.offset(),a=this.options.axis,s={};if(!a||a==="x"){s.left=o.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)}if(!a||a==="y"){s.top=o.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)}this.reverting=true;e(this.helper).animate(s,parseInt(this.options.revert,10)||500,function(){n._clear(t)})}else{this._clear(t,i)}return false},cancel:function(){if(this.dragging){this._mouseUp(new e.Event("mouseup",{target:null}));if(this.options.helper==="original"){this.currentItem.css(this._storedCSS);this._removeClass(this.currentItem,"ui-sortable-helper")}else{this.currentItem.show()}for(var t=this.containers.length-1;t>=0;t--){this.containers[t]._trigger("deactivate",null,this._uiHash(this));if(this.containers[t].containerCache.over){this.containers[t]._trigger("out",null,this._uiHash(this));this.containers[t].containerCache.over=0}}}if(this.placeholder){if(this.placeholder[0].parentNode){this.placeholder[0].parentNode.removeChild(this.placeholder[0])}if(this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode){this.helper.remove()}e.extend(this,{helper:null,dragging:false,reverting:false,_noFinalSort:null});if(this.domPosition.prev){e(this.domPosition.prev).after(this.currentItem)}else{e(this.domPosition.parent).prepend(this.currentItem)}}return this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];t=t||{};e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);if(i){n.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}});if(!n.length&&t.key){n.push(t.key+"=")}return n.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];t=t||{};i.each(function(){n.push(e(t.item||this).attr(t.attribute||"id")||"")});return n},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,n=this.positionAbs.top,o=n+this.helperProportions.height,a=e.left,s=a+e.width,r=e.top,l=r+e.height,d=this.offset.click.top,c=this.offset.click.left,u=this.options.axis==="x"||n+d>r&&n+d<l,p=this.options.axis==="y"||t+c>a&&t+c<s,f=u&&p;if(this.options.tolerance==="pointer"||this.options.forcePointerForContainers||this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]){return f}else{return a<t+this.helperProportions.width/2&&i-this.helperProportions.width/2<s&&r<n+this.helperProportions.height/2&&o-this.helperProportions.height/2<l}},_intersectsWithPointer:function(e){var t,i,n=this.options.axis==="x"||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),o=this.options.axis==="y"||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),a=n&&o;if(!a){return false}t=this._getDragVerticalDirection();i=this._getDragHorizontalDirection();return this.floating?i==="right"||t==="down"?2:1:t&&(t==="down"?2:1)},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),n=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();if(this.floating&&o){return o==="right"&&i||o==="left"&&!i}else{return n&&(n==="down"&&t||n==="up"&&!t)}},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return e!==0&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return e!==0&&(e>0?"right":"left")},refresh:function(e){this._refreshItems(e);this._setHandleClassName();this.refreshPositions();return this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var i,n,o,a,s=[],r=[],l=this._connectWith();if(l&&t){for(i=l.length-1;i>=0;i--){o=e(l[i],this.document[0]);for(n=o.length-1;n>=0;n--){a=e.data(o[n],this.widgetFullName);if(a&&a!==this&&!a.options.disabled){r.push([e.isFunction(a.options.items)?a.options.items.call(a.element):e(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a])}}}}r.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);function d(){s.push(this)}for(i=r.length-1;i>=0;i--){r[i][0].each(d)}return e(s)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var i=0;i<t.length;i++){if(t[i]===e.item[0]){return false}}return true})},_refreshItems:function(t){this.items=[];this.containers=[this];var i,n,o,a,s,r,l,d,c=this.items,u=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],p=this._connectWith();if(p&&this.ready){for(i=p.length-1;i>=0;i--){o=e(p[i],this.document[0]);for(n=o.length-1;n>=0;n--){a=e.data(o[n],this.widgetFullName);if(a&&a!==this&&!a.options.disabled){u.push([e.isFunction(a.options.items)?a.options.items.call(a.element[0],t,{item:this.currentItem}):e(a.options.items,a.element),a]);this.containers.push(a)}}}}for(i=u.length-1;i>=0;i--){s=u[i][1];r=u[i][0];for(n=0,d=r.length;n<d;n++){l=e(r[n]);l.data(this.widgetName+"-item",s);c.push({item:l,instance:s,width:0,height:0,left:0,top:0})}}},refreshPositions:function(t){this.floating=this.items.length?this.options.axis==="x"||this._isFloating(this.items[0].item):false;if(this.offsetParent&&this.helper){this.offset.parent=this._getParentOffset()}var i,n,o,a;for(i=this.items.length-1;i>=0;i--){n=this.items[i];if(n.instance!==this.currentContainer&&this.currentContainer&&n.item[0]!==this.currentItem[0]){continue}o=this.options.toleranceElement?e(this.options.toleranceElement,n.item):n.item;if(!t){n.width=o.outerWidth();n.height=o.outerHeight()}a=o.offset();n.left=a.left;n.top=a.top}if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this)}else{for(i=this.containers.length-1;i>=0;i--){a=this.containers[i].element.offset();this.containers[i].containerCache.left=a.left;this.containers[i].containerCache.top=a.top;this.containers[i].containerCache.width=this.containers[i].element.outerWidth();this.containers[i].containerCache.height=this.containers[i].element.outerHeight()}}return this},_createPlaceholder:function(t){t=t||this;var i,n=t.options;if(!n.placeholder||n.placeholder.constructor===String){i=n.placeholder;n.placeholder={element:function(){var n=t.currentItem[0].nodeName.toLowerCase(),o=e("<"+n+">",t.document[0]);t._addClass(o,"ui-sortable-placeholder",i||t.currentItem[0].className)._removeClass(o,"ui-sortable-helper");if(n==="tbody"){t._createTrPlaceholder(t.currentItem.find("tr").eq(0),e("<tr>",t.document[0]).appendTo(o))}else if(n==="tr"){t._createTrPlaceholder(t.currentItem,o)}else if(n==="img"){o.attr("src",t.currentItem.attr("src"))}if(!i){o.css("visibility","hidden")}return o},update:function(e,o){if(i&&!n.forcePlaceholderSize){return}if(!o.height()){o.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10))}if(!o.width()){o.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10))}}}}t.placeholder=e(n.placeholder.element.call(t.element,t.currentItem));t.currentItem.after(t.placeholder);n.placeholder.update(t,t.placeholder)},_createTrPlaceholder:function(t,i){var n=this;t.children().each(function(){e("<td>&#160;</td>",n.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(i)})},_contactContainers:function(t){var i,n,o,a,s,r,l,d,c,u,p=null,f=null;for(i=this.containers.length-1;i>=0;i--){if(e.contains(this.currentItem[0],this.containers[i].element[0])){continue}if(this._intersectsWith(this.containers[i].containerCache)){if(p&&e.contains(this.containers[i].element[0],p.element[0])){continue}p=this.containers[i];f=i}else{if(this.containers[i].containerCache.over){this.containers[i]._trigger("out",t,this._uiHash(this));this.containers[i].containerCache.over=0}}}if(!p){return}if(this.containers.length===1){if(!this.containers[f].containerCache.over){this.containers[f]._trigger("over",t,this._uiHash(this));this.containers[f].containerCache.over=1}}else{o=1e4;a=null;c=p.floating||this._isFloating(this.currentItem);s=c?"left":"top";r=c?"width":"height";u=c?"pageX":"pageY";for(n=this.items.length-1;n>=0;n--){if(!e.contains(this.containers[f].element[0],this.items[n].item[0])){continue}if(this.items[n].item[0]===this.currentItem[0]){continue}l=this.items[n].item.offset()[s];d=false;if(t[u]-l>this.items[n][r]/2){d=true}if(Math.abs(t[u]-l)<o){o=Math.abs(t[u]-l);a=this.items[n];this.direction=d?"up":"down"}}if(!a&&!this.options.dropOnEmpty){return}if(this.currentContainer===this.containers[f]){if(!this.currentContainer.containerCache.over){this.containers[f]._trigger("over",t,this._uiHash());this.currentContainer.containerCache.over=1}return}a?this._rearrange(t,a,null,true):this._rearrange(t,null,this.containers[f].element,true);this._trigger("change",t,this._uiHash());this.containers[f]._trigger("change",t,this._uiHash(this));this.currentContainer=this.containers[f];this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[f]._trigger("over",t,this._uiHash(this));this.containers[f].containerCache.over=1}},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):i.helper==="clone"?this.currentItem.clone():this.currentItem;if(!n.parents("body").length){e(i.appendTo!=="parent"?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0])}if(n[0]===this.currentItem[0]){this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}}if(!n[0].style.width||i.forceHelperSize){n.width(this.currentItem.width())}if(!n[0].style.height||i.forceHelperSize){n.height(this.currentItem.height())}return n},_adjustOffsetFromHelper:function(t){if(typeof t==="string"){t=t.split(" ")}if(e.isArray(t)){t={left:+t[0],top:+t[1]||0}}if("left"in t){this.offset.click.left=t.left+this.margins.left}if("right"in t){this.offset.click.left=this.helperProportions.width-t.right+this.margins.left}if("top"in t){this.offset.click.top=t.top+this.margins.top}if("bottom"in t){this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();if(this.cssPosition==="absolute"&&this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])){t.left+=this.scrollParent.scrollLeft();t.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&e.ui.ie){t={top:0,left:0}}return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else{return{top:0,left:0}}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,o=this.options;if(o.containment==="parent"){o.containment=this.helper[0].parentNode}if(o.containment==="document"||o.containment==="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,o.containment==="document"?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,(o.containment==="document"?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!/^(document|window|parent)$/.test(o.containment)){t=e(o.containment)[0];i=e(o.containment).offset();n=e(t).css("overflow")!=="hidden";this.containment=[i.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(n?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(n?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(t,i){if(!i){i=this.position}var n=t==="absolute"?1:-1,o=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,a=/(html|body)/i.test(o[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():a?0:o.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():a?0:o.scrollLeft())*n}},_generatePosition:function(t){var i,n,o=this.options,a=t.pageX,s=t.pageY,r=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,l=/(html|body)/i.test(r[0].tagName);if(this.cssPosition==="relative"&&!(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0])){this.offset.relative=this._getRelativeOffset()}if(this.originalPosition){if(this.containment){if(t.pageX-this.offset.click.left<this.containment[0]){a=this.containment[0]+this.offset.click.left}if(t.pageY-this.offset.click.top<this.containment[1]){s=this.containment[1]+this.offset.click.top}if(t.pageX-this.offset.click.left>this.containment[2]){a=this.containment[2]+this.offset.click.left}if(t.pageY-this.offset.click.top>this.containment[3]){s=this.containment[3]+this.offset.click.top}}if(o.grid){i=this.originalPageY+Math.round((s-this.originalPageY)/o.grid[1])*o.grid[1];s=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-o.grid[1]:i+o.grid[1]:i;n=this.originalPageX+Math.round((a-this.originalPageX)/o.grid[0])*o.grid[0];a=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-o.grid[0]:n+o.grid[0]:n}}return{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():l?0:r.scrollTop()),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():l?0:r.scrollLeft())}},_rearrange:function(e,t,i,n){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],this.direction==="down"?t.item[0]:t.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var o=this.counter;this._delay(function(){if(o===this.counter){this.refreshPositions(!n)}})},_clear:function(e,t){this.reverting=false;var i,n=[];if(!this._noFinalSort&&this.currentItem.parent().length){this.placeholder.before(this.currentItem)}this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(i in this._storedCSS){if(this._storedCSS[i]==="auto"||this._storedCSS[i]==="static"){this._storedCSS[i]=""}}this.currentItem.css(this._storedCSS);this._removeClass(this.currentItem,"ui-sortable-helper")}else{this.currentItem.show()}if(this.fromOutside&&!t){n.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))})}if((this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!t){n.push(function(e){this._trigger("update",e,this._uiHash())})}if(this!==this.currentContainer){if(!t){n.push(function(e){this._trigger("remove",e,this._uiHash())});n.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer));n.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer))}}function o(e,t,i){return function(n){i._trigger(e,n,t._uiHash(t))}}for(i=this.containers.length-1;i>=0;i--){if(!t){n.push(o("deactivate",this,this.containers[i]))}if(this.containers[i].containerCache.over){n.push(o("out",this,this.containers[i]));this.containers[i].containerCache.over=0}}if(this.storedCursor){this.document.find("body").css("cursor",this.storedCursor);this.storedStylesheet.remove()}if(this._storedOpacity){this.helper.css("opacity",this._storedOpacity)}if(this._storedZIndex){this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex)}this.dragging=false;if(!t){this._trigger("beforeStop",e,this._uiHash())}this.placeholder[0].parentNode.removeChild(this.placeholder[0]);if(!this.cancelHelperRemoval){if(this.helper[0]!==this.currentItem[0]){this.helper.remove()}this.helper=null}if(!t){for(i=0;i<n.length;i++){n[i].call(this,e)}this._trigger("stop",e,this._uiHash())}this.fromOutside=false;return!this.cancelHelperRemoval},_trigger:function(){if(e.Widget.prototype._trigger.apply(this,arguments)===false){this.cancel()}},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}})})},627:function(e,t,i){var n,o,a;(function(s){if(true){!(o=[i(1),i(280),i(12),i(80),i(141),i(46)],n=s,a=typeof n==="function"?n.apply(t,o):n,a!==undefined&&(e.exports=a))}else{}})(function(e){function t(e){return function(){var t=this.element.val();e.apply(this,arguments);this._refresh();if(t!==this.element.val()){this._trigger("change")}}}e.widget("ui.spinner",{version:"1.12.1",defaultElement:"<input>",widgetEventPrefix:"spin",options:{classes:{"ui-spinner":"ui-corner-all","ui-spinner-down":"ui-corner-br","ui-spinner-up":"ui-corner-tr"},culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:true,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max);this._setOption("min",this.options.min);this._setOption("step",this.options.step);if(this.value()!==""){this._value(this.element.val(),true)}this._draw();this._on(this._events);this._refresh();this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t=this._super();var i=this.element;e.each(["min","max","step"],function(e,n){var o=i.attr(n);if(o!=null&&o.length){t[n]=o}});return t},_events:{keydown:function(e){if(this._start(e)&&this._keydown(e)){e.preventDefault()}},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){if(this.cancelBlur){delete this.cancelBlur;return}this._stop();this._refresh();if(this.previous!==this.element.val()){this._trigger("change",e)}},mousewheel:function(e,t){if(!t){return}if(!this.spinning&&!this._start(e)){return false}this._spin((t>0?1:-1)*this.options.step,e);clearTimeout(this.mousewheelTimer);this.mousewheelTimer=this._delay(function(){if(this.spinning){this._stop(e)}},100);e.preventDefault()},"mousedown .ui-spinner-button":function(t){var i;i=this.element[0]===e.ui.safeActiveElement(this.document[0])?this.previous:this.element.val();function n(){var t=this.element[0]===e.ui.safeActiveElement(this.document[0]);if(!t){this.element.trigger("focus");this.previous=i;this._delay(function(){this.previous=i})}}t.preventDefault();n.call(this);this.cancelBlur=true;this._delay(function(){delete this.cancelBlur;n.call(this)});if(this._start(t)===false){return}this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){if(!e(t.currentTarget).hasClass("ui-state-active")){return}if(this._start(t)===false){return false}this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseleave .ui-spinner-button":"_stop"},_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap("<span>").parent().append("<a></a><a></a>")},_draw:function(){this._enhance();this._addClass(this.uiSpinner,"ui-spinner","ui-widget ui-widget-content");this._addClass("ui-spinner-input");this.element.attr("role","spinbutton");this.buttons=this.uiSpinner.children("a").attr("tabIndex",-1).attr("aria-hidden",true).button({classes:{"ui-button":""}});this._removeClass(this.buttons,"ui-corner-all");this._addClass(this.buttons.first(),"ui-spinner-button ui-spinner-up");this._addClass(this.buttons.last(),"ui-spinner-button ui-spinner-down");this.buttons.first().button({icon:this.options.icons.up,showLabel:false});this.buttons.last().button({icon:this.options.icons.down,showLabel:false});if(this.buttons.height()>Math.ceil(this.uiSpinner.height()*.5)&&this.uiSpinner.height()>0){this.uiSpinner.height(this.uiSpinner.height())}},_keydown:function(t){var i=this.options,n=e.ui.keyCode;switch(t.keyCode){case n.UP:this._repeat(null,1,t);return true;case n.DOWN:this._repeat(null,-1,t);return true;case n.PAGE_UP:this._repeat(null,i.page,t);return true;case n.PAGE_DOWN:this._repeat(null,-i.page,t);return true}return false},_start:function(e){if(!this.spinning&&this._trigger("start",e)===false){return false}if(!this.counter){this.counter=1}this.spinning=true;return true},_repeat:function(e,t,i){e=e||500;clearTimeout(this.timer);this.timer=this._delay(function(){this._repeat(40,t,i)},e);this._spin(t*this.options.step,i)},_spin:function(e,t){var i=this.value()||0;if(!this.counter){this.counter=1}i=this._adjustValue(i+e*this._increment(this.counter));if(!this.spinning||this._trigger("spin",t,{value:i})!==false){this._value(i);this.counter++}},_increment:function(t){var i=this.options.incremental;if(i){return e.isFunction(i)?i(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1)}return 1},_precision:function(){var e=this._precisionOf(this.options.step);if(this.options.min!==null){e=Math.max(e,this._precisionOf(this.options.min))}return e},_precisionOf:function(e){var t=e.toString(),i=t.indexOf(".");return i===-1?0:t.length-i-1},_adjustValue:function(e){var t,i,n=this.options;t=n.min!==null?n.min:0;i=e-t;i=Math.round(i/n.step)*n.step;e=t+i;e=parseFloat(e.toFixed(this._precision()));if(n.max!==null&&e>n.max){return n.max}if(n.min!==null&&e<n.min){return n.min}return e},_stop:function(e){if(!this.spinning){return}clearTimeout(this.timer);clearTimeout(this.mousewheelTimer);this.counter=0;this.spinning=false;this._trigger("stop",e)},_setOption:function(e,t){var i,n,o;if(e==="culture"||e==="numberFormat"){i=this._parse(this.element.val());this.options[e]=t;this.element.val(this._format(i));return}if(e==="max"||e==="min"||e==="step"){if(typeof t==="string"){t=this._parse(t)}}if(e==="icons"){n=this.buttons.first().find(".ui-icon");this._removeClass(n,null,this.options.icons.up);this._addClass(n,null,t.up);o=this.buttons.last().find(".ui-icon");this._removeClass(o,null,this.options.icons.down);this._addClass(o,null,t.down)}this._super(e,t)},_setOptionDisabled:function(e){this._super(e);this._toggleClass(this.uiSpinner,null,"ui-state-disabled",!!e);this.element.prop("disabled",!!e);this.buttons.button(e?"disable":"enable")},_setOptions:t(function(e){this._super(e)}),_parse:function(e){if(typeof e==="string"&&e!==""){e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e}return e===""||isNaN(e)?null:e},_format:function(e){if(e===""){return""}return window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var e=this.value();if(e===null){return false}return e===this._adjustValue(e)},_value:function(e,t){var i;if(e!==""){i=this._parse(e);if(i!==null){if(!t){i=this._adjustValue(i)}e=this._format(i)}}this.element.val(e);this._refresh()},_destroy:function(){this.element.prop("disabled",false).removeAttr("autocomplete role aria-valuemin aria-valuemax aria-valuenow");this.uiSpinner.replaceWith(this.element)},stepUp:t(function(e){this._stepUp(e)}),_stepUp:function(e){if(this._start()){this._spin((e||1)*this.options.step);this._stop()}},stepDown:t(function(e){this._stepDown(e)}),_stepDown:function(e){if(this._start()){this._spin((e||1)*-this.options.step);this._stop()}},pageUp:t(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:t(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){if(!arguments.length){return this._parse(this.element.val())}t(this._value).call(this,e)},widget:function(){return this.uiSpinner}});if(e.uiBackCompat!==false){e.widget("ui.spinner",e.ui.spinner,{_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml())},_uiSpinnerHtml:function(){return"<span>"},_buttonHtml:function(){return"<a></a><a></a>"}})}return e.ui.spinner})},628:function(e,t,i){var n,o,a;(function(s){if(true){!(o=[i(1),i(156),i(80),i(141),i(140),i(12),i(46)],n=s,a=typeof n==="function"?n.apply(t,o):n,a!==undefined&&(e.exports=a))}else{}})(function(e){e.widget("ui.tabs",{version:"1.12.1",delay:300,options:{active:null,classes:{"ui-tabs":"ui-corner-all","ui-tabs-nav":"ui-corner-all","ui-tabs-panel":"ui-corner-bottom","ui-tabs-tab":"ui-corner-top"},collapsible:false,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var e=/#.*$/;return function(t){var i,n;i=t.href.replace(e,"");n=location.href.replace(e,"");try{i=decodeURIComponent(i)}catch(e){}try{n=decodeURIComponent(n)}catch(e){}return t.hash.length>1&&i===n}}(),_create:function(){var t=this,i=this.options;this.running=false;this._addClass("ui-tabs","ui-widget ui-widget-content");this._toggleClass("ui-tabs-collapsible",null,i.collapsible);this._processTabs();i.active=this._initialActive();if(e.isArray(i.disabled)){i.disabled=e.unique(i.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()}if(this.options.active!==false&&this.anchors.length){this.active=this._findActive(i.active)}else{this.active=e()}this._refresh();if(this.active.length){this.load(i.active)}},_initialActive:function(){var t=this.options.active,i=this.options.collapsible,n=location.hash.substring(1);if(t===null){if(n){this.tabs.each(function(i,o){if(e(o).attr("aria-controls")===n){t=i;return false}})}if(t===null){t=this.tabs.index(this.tabs.filter(".ui-tabs-active"))}if(t===null||t===-1){t=this.tabs.length?0:false}}if(t!==false){t=this.tabs.index(this.tabs.eq(t));if(t===-1){t=i?false:0}}if(!i&&t===false&&this.anchors.length){t=0}return t},_getCreateEventData:function(){return{tab:this.active,panel:!this.active.length?e():this._getPanelForTab(this.active)}},_tabKeydown:function(t){var i=e(e.ui.safeActiveElement(this.document[0])).closest("li"),n=this.tabs.index(i),o=true;if(this._handlePageNav(t)){return}switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:n++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:o=false;n--;break;case e.ui.keyCode.END:n=this.anchors.length-1;break;case e.ui.keyCode.HOME:n=0;break;case e.ui.keyCode.SPACE:t.preventDefault();clearTimeout(this.activating);this._activate(n);return;case e.ui.keyCode.ENTER:t.preventDefault();clearTimeout(this.activating);this._activate(n===this.options.active?false:n);return;default:return}t.preventDefault();clearTimeout(this.activating);n=this._focusNextTab(n,o);if(!t.ctrlKey&&!t.metaKey){i.attr("aria-selected","false");this.tabs.eq(n).attr("aria-selected","true");this.activating=this._delay(function(){this.option("active",n)},this.delay)}},_panelKeydown:function(t){if(this._handlePageNav(t)){return}if(t.ctrlKey&&t.keyCode===e.ui.keyCode.UP){t.preventDefault();this.active.trigger("focus")}},_handlePageNav:function(t){if(t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP){this._activate(this._focusNextTab(this.options.active-1,false));return true}if(t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN){this._activate(this._focusNextTab(this.options.active+1,true));return true}},_findNextTab:function(t,i){var n=this.tabs.length-1;function o(){if(t>n){t=0}if(t<0){t=n}return t}while(e.inArray(o(),this.options.disabled)!==-1){t=i?t+1:t-1}return t},_focusNextTab:function(e,t){e=this._findNextTab(e,t);this.tabs.eq(e).trigger("focus");return e},_setOption:function(e,t){if(e==="active"){this._activate(t);return}this._super(e,t);if(e==="collapsible"){this._toggleClass("ui-tabs-collapsible",null,t);if(!t&&this.options.active===false){this._activate(0)}}if(e==="event"){this._setupEvents(t)}if(e==="heightStyle"){this._setupHeightStyle(t)}},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,i=this.tablist.children(":has(a[href])");t.disabled=e.map(i.filter(".ui-state-disabled"),function(e){return i.index(e)});this._processTabs();if(t.active===false||!this.anchors.length){t.active=false;this.active=e()}else if(this.active.length&&!e.contains(this.tablist[0],this.active[0])){if(this.tabs.length===t.disabled.length){t.active=false;this.active=e()}else{this._activate(this._findNextTab(Math.max(0,t.active-1),false))}}else{t.active=this.tabs.index(this.active)}this._refresh()},_refresh:function(){this._setOptionDisabled(this.options.disabled);this._setupEvents(this.options.event);this._setupHeightStyle(this.options.heightStyle);this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1});this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"});if(!this.active.length){this.tabs.eq(0).attr("tabIndex",0)}else{this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0});this._addClass(this.active,"ui-tabs-active","ui-state-active");this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})}},_processTabs:function(){var t=this,i=this.tabs,n=this.anchors,o=this.panels;this.tablist=this._getList().attr("role","tablist");this._addClass(this.tablist,"ui-tabs-nav","ui-helper-reset ui-helper-clearfix ui-widget-header");this.tablist.on("mousedown"+this.eventNamespace,"> li",function(t){if(e(this).is(".ui-state-disabled")){t.preventDefault()}}).on("focus"+this.eventNamespace,".ui-tabs-anchor",function(){if(e(this).closest("li").is(".ui-state-disabled")){this.blur()}});this.tabs=this.tablist.find("> li:has(a[href])").attr({role:"tab",tabIndex:-1});this._addClass(this.tabs,"ui-tabs-tab","ui-state-default");this.anchors=this.tabs.map(function(){return e("a",this)[0]}).attr({role:"presentation",tabIndex:-1});this._addClass(this.anchors,"ui-tabs-anchor");this.panels=e();this.anchors.each(function(i,n){var o,a,s,r=e(n).uniqueId().attr("id"),l=e(n).closest("li"),d=l.attr("aria-controls");if(t._isLocal(n)){o=n.hash;s=o.substring(1);a=t.element.find(t._sanitizeSelector(o))}else{s=l.attr("aria-controls")||e({}).uniqueId()[0].id;o="#"+s;a=t.element.find(o);if(!a.length){a=t._createPanel(s);a.insertAfter(t.panels[i-1]||t.tablist)}a.attr("aria-live","polite")}if(a.length){t.panels=t.panels.add(a)}if(d){l.data("ui-tabs-aria-controls",d)}l.attr({"aria-controls":s,"aria-labelledby":r});a.attr("aria-labelledby",r)});this.panels.attr("role","tabpanel");this._addClass(this.panels,"ui-tabs-panel","ui-widget-content");if(i){this._off(i.not(this.tabs));this._off(n.not(this.anchors));this._off(o.not(this.panels))}},_getList:function(){return this.tablist||this.element.find("ol, ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).data("ui-tabs-destroy",true)},_setOptionDisabled:function(t){var i,n,o;if(e.isArray(t)){if(!t.length){t=false}else if(t.length===this.anchors.length){t=true}}for(o=0;n=this.tabs[o];o++){i=e(n);if(t===true||e.inArray(o,t)!==-1){i.attr("aria-disabled","true");this._addClass(i,null,"ui-state-disabled")}else{i.removeAttr("aria-disabled");this._removeClass(i,null,"ui-state-disabled")}}this.options.disabled=t;this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,t===true)},_setupEvents:function(t){var i={};if(t){e.each(t.split(" "),function(e,t){i[t]="_eventHandler"})}this._off(this.anchors.add(this.tabs).add(this.panels));this._on(true,this.anchors,{click:function(e){e.preventDefault()}});this._on(this.anchors,i);this._on(this.tabs,{keydown:"_tabKeydown"});this._on(this.panels,{keydown:"_panelKeydown"});this._focusable(this.tabs);this._hoverable(this.tabs)},_setupHeightStyle:function(t){var i,n=this.element.parent();if(t==="fill"){i=n.height();i-=this.element.outerHeight()-this.element.height();this.element.siblings(":visible").each(function(){var t=e(this),n=t.css("position");if(n==="absolute"||n==="fixed"){return}i-=t.outerHeight(true)});this.element.children().not(this.panels).each(function(){i-=e(this).outerHeight(true)});this.panels.each(function(){e(this).height(Math.max(0,i-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")}else if(t==="auto"){i=0;this.panels.each(function(){i=Math.max(i,e(this).height("").height())}).height(i)}},_eventHandler:function(t){var i=this.options,n=this.active,o=e(t.currentTarget),a=o.closest("li"),s=a[0]===n[0],r=s&&i.collapsible,l=r?e():this._getPanelForTab(a),d=!n.length?e():this._getPanelForTab(n),c={oldTab:n,oldPanel:d,newTab:r?e():a,newPanel:l};t.preventDefault();if(a.hasClass("ui-state-disabled")||a.hasClass("ui-tabs-loading")||this.running||s&&!i.collapsible||this._trigger("beforeActivate",t,c)===false){return}i.active=r?false:this.tabs.index(a);this.active=s?e():a;if(this.xhr){this.xhr.abort()}if(!d.length&&!l.length){e.error("jQuery UI Tabs: Mismatching fragment identifier.")}if(l.length){this.load(this.tabs.index(a),t)}this._toggle(t,c)},_toggle:function(t,i){var n=this,o=i.newPanel,a=i.oldPanel;this.running=true;function s(){n.running=false;n._trigger("activate",t,i)}function r(){n._addClass(i.newTab.closest("li"),"ui-tabs-active","ui-state-active");if(o.length&&n.options.show){n._show(o,n.options.show,s)}else{o.show();s()}}if(a.length&&this.options.hide){this._hide(a,this.options.hide,function(){n._removeClass(i.oldTab.closest("li"),"ui-tabs-active","ui-state-active");r()})}else{this._removeClass(i.oldTab.closest("li"),"ui-tabs-active","ui-state-active");a.hide();r()}a.attr("aria-hidden","true");i.oldTab.attr({"aria-selected":"false","aria-expanded":"false"});if(o.length&&a.length){i.oldTab.attr("tabIndex",-1)}else if(o.length){this.tabs.filter(function(){return e(this).attr("tabIndex")===0}).attr("tabIndex",-1)}o.attr("aria-hidden","false");i.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(t){var i,n=this._findActive(t);if(n[0]===this.active[0]){return}if(!n.length){n=this.active}i=n.find(".ui-tabs-anchor")[0];this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop})},_findActive:function(t){return t===false?e():this.tabs.eq(t)},_getIndex:function(t){if(typeof t==="string"){t=this.anchors.index(this.anchors.filter("[href$='"+e.ui.escapeSelector(t)+"']"))}return t},_destroy:function(){if(this.xhr){this.xhr.abort()}this.tablist.removeAttr("role").off(this.eventNamespace);this.anchors.removeAttr("role tabIndex").removeUniqueId();this.tabs.add(this.panels).each(function(){if(e.data(this,"ui-tabs-destroy")){e(this).remove()}else{e(this).removeAttr("role tabIndex "+"aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded")}});this.tabs.each(function(){var t=e(this),i=t.data("ui-tabs-aria-controls");if(i){t.attr("aria-controls",i).removeData("ui-tabs-aria-controls")}else{t.removeAttr("aria-controls")}});this.panels.show();if(this.options.heightStyle!=="content"){this.panels.css("height","")}},enable:function(t){var i=this.options.disabled;if(i===false){return}if(t===undefined){i=false}else{t=this._getIndex(t);if(e.isArray(i)){i=e.map(i,function(e){return e!==t?e:null})}else{i=e.map(this.tabs,function(e,i){return i!==t?i:null})}}this._setOptionDisabled(i)},disable:function(t){var i=this.options.disabled;if(i===true){return}if(t===undefined){i=true}else{t=this._getIndex(t);if(e.inArray(t,i)!==-1){return}if(e.isArray(i)){i=e.merge([t],i).sort()}else{i=[t]}}this._setOptionDisabled(i)},load:function(t,i){t=this._getIndex(t);var n=this,o=this.tabs.eq(t),a=o.find(".ui-tabs-anchor"),s=this._getPanelForTab(o),r={tab:o,panel:s},l=function(e,t){if(t==="abort"){n.panels.stop(false,true)}n._removeClass(o,"ui-tabs-loading");s.removeAttr("aria-busy");if(e===n.xhr){delete n.xhr}};if(this._isLocal(a[0])){return}this.xhr=e.ajax(this._ajaxSettings(a,i,r));if(this.xhr&&this.xhr.statusText!=="canceled"){this._addClass(o,"ui-tabs-loading");s.attr("aria-busy","true");this.xhr.done(function(e,t,o){setTimeout(function(){s.html(e);n._trigger("load",i,r);l(o,t)},1)}).fail(function(e,t){setTimeout(function(){l(e,t)},1)})}},_ajaxSettings:function(t,i,n){var o=this;return{url:t.attr("href").replace(/#.*$/,""),beforeSend:function(t,a){return o._trigger("beforeLoad",i,e.extend({jqXHR:t,ajaxSettings:a},n))}}},_getPanelForTab:function(t){var i=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}});if(e.uiBackCompat!==false){e.widget("ui.tabs",e.ui.tabs,{_processTabs:function(){this._superApply(arguments);this._addClass(this.tabs,"ui-tab")}})}return e.ui.tabs})},629:function(e,t,i){var n,o,a;(function(s){if(true){!(o=[i(1),i(80),i(148),i(140),i(12),i(46)],n=s,a=typeof n==="function"?n.apply(t,o):n,a!==undefined&&(e.exports=a))}else{}})(function(e){e.widget("ui.tooltip",{version:"1.12.1",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:true,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:true,track:false,close:null,open:null},_addDescribedBy:function(t,i){var n=(t.attr("aria-describedby")||"").split(/\s+/);n.push(i);t.data("ui-tooltip-id",i).attr("aria-describedby",e.trim(n.join(" ")))},_removeDescribedBy:function(t){var i=t.data("ui-tooltip-id"),n=(t.attr("aria-describedby")||"").split(/\s+/),o=e.inArray(i,n);if(o!==-1){n.splice(o,1)}t.removeData("ui-tooltip-id");n=e.trim(n.join(" "));if(n){t.attr("aria-describedby",n)}else{t.removeAttr("aria-describedby")}},_create:function(){this._on({mouseover:"open",focusin:"open"});this.tooltips={};this.parents={};this.liveRegion=e("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body);this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible");this.disabledTitles=e([])},_setOption:function(t,i){var n=this;this._super(t,i);if(t==="content"){e.each(this.tooltips,function(e,t){n._updateContent(t.element)})}},_setOptionDisabled:function(e){this[e?"_disable":"_enable"]()},_disable:function(){var t=this;e.each(this.tooltips,function(i,n){var o=e.Event("blur");o.target=o.currentTarget=n.element[0];t.close(o,true)});this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter(function(){var t=e(this);if(t.is("[title]")){return t.data("ui-tooltip-title",t.attr("title")).removeAttr("title")}}))},_enable:function(){this.disabledTitles.each(function(){var t=e(this);if(t.data("ui-tooltip-title")){t.attr("title",t.data("ui-tooltip-title"))}});this.disabledTitles=e([])},open:function(t){var i=this,n=e(t?t.target:this.element).closest(this.options.items);if(!n.length||n.data("ui-tooltip-id")){return}if(n.attr("title")){n.data("ui-tooltip-title",n.attr("title"))}n.data("ui-tooltip-open",true);if(t&&t.type==="mouseover"){n.parents().each(function(){var t=e(this),n;if(t.data("ui-tooltip-open")){n=e.Event("blur");n.target=n.currentTarget=this;i.close(n,true)}if(t.attr("title")){t.uniqueId();i.parents[this.id]={element:this,title:t.attr("title")};t.attr("title","")}})}this._registerCloseHandlers(t,n);this._updateContent(n,t)},_updateContent:function(e,t){var i,n=this.options.content,o=this,a=t?t.type:null;if(typeof n==="string"||n.nodeType||n.jquery){return this._open(t,e,n)}i=n.call(e[0],function(i){o._delay(function(){if(!e.data("ui-tooltip-open")){return}if(t){t.type=a}this._open(t,e,i)})});if(i){this._open(t,e,i)}},_open:function(t,i,n){var o,a,s,r,l=e.extend({},this.options.position);if(!n){return}o=this._find(i);if(o){o.tooltip.find(".ui-tooltip-content").html(n);return}if(i.is("[title]")){if(t&&t.type==="mouseover"){i.attr("title","")}else{i.removeAttr("title")}}o=this._tooltip(i);a=o.tooltip;this._addDescribedBy(i,a.attr("id"));a.find(".ui-tooltip-content").html(n);this.liveRegion.children().hide();r=e("<div>").html(a.find(".ui-tooltip-content").html());r.removeAttr("name").find("[name]").removeAttr("name");r.removeAttr("id").find("[id]").removeAttr("id");r.appendTo(this.liveRegion);function d(e){l.of=e;if(a.is(":hidden")){return}a.position(l)}if(this.options.track&&t&&/^mouse/.test(t.type)){this._on(this.document,{mousemove:d});d(t)}else{a.position(e.extend({of:i},this.options.position))}a.hide();this._show(a,this.options.show);if(this.options.track&&this.options.show&&this.options.show.delay){s=this.delayedShow=setInterval(function(){if(a.is(":visible")){d(l.of);clearInterval(s)}},e.fx.interval)}this._trigger("open",t,{tooltip:a})},_registerCloseHandlers:function(t,i){var n={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var n=e.Event(t);n.currentTarget=i[0];this.close(n,true)}}};if(i[0]!==this.element[0]){n.remove=function(){this._removeTooltip(this._find(i).tooltip)}}if(!t||t.type==="mouseover"){n.mouseleave="close"}if(!t||t.type==="focusin"){n.focusout="close"}this._on(true,i,n)},close:function(t){var i,n=this,o=e(t?t.currentTarget:this.element),a=this._find(o);if(!a){o.removeData("ui-tooltip-open");return}i=a.tooltip;if(a.closing){return}clearInterval(this.delayedShow);if(o.data("ui-tooltip-title")&&!o.attr("title")){o.attr("title",o.data("ui-tooltip-title"))}this._removeDescribedBy(o);a.hiding=true;i.stop(true);this._hide(i,this.options.hide,function(){n._removeTooltip(e(this))});o.removeData("ui-tooltip-open");this._off(o,"mouseleave focusout keyup");if(o[0]!==this.element[0]){this._off(o,"remove")}this._off(this.document,"mousemove");if(t&&t.type==="mouseleave"){e.each(this.parents,function(t,i){e(i.element).attr("title",i.title);delete n.parents[t]})}a.closing=true;this._trigger("close",t,{tooltip:i});if(!a.hiding){a.closing=false}},_tooltip:function(t){var i=e("<div>").attr("role","tooltip"),n=e("<div>").appendTo(i),o=i.uniqueId().attr("id");this._addClass(n,"ui-tooltip-content");this._addClass(i,"ui-tooltip","ui-widget ui-widget-content");i.appendTo(this._appendTo(t));return this.tooltips[o]={element:t,tooltip:i}},_find:function(e){var t=e.data("ui-tooltip-id");return t?this.tooltips[t]:null},_removeTooltip:function(e){e.remove();delete this.tooltips[e.attr("id")]},_appendTo:function(e){var t=e.closest(".ui-front, dialog");if(!t.length){t=this.document[0].body}return t},_destroy:function(){var t=this;e.each(this.tooltips,function(i,n){var o=e.Event("blur"),a=n.element;o.target=o.currentTarget=a[0];t.close(o,true);e("#"+i).remove();if(a.data("ui-tooltip-title")){if(!a.attr("title")){a.attr("title",a.data("ui-tooltip-title"))}a.removeData("ui-tooltip-title")}});this.liveRegion.remove()}});if(e.uiBackCompat!==false){e.widget("ui.tooltip",e.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var e=this._superApply(arguments);if(this.options.tooltipClass){e.tooltip.addClass(this.options.tooltipClass)}return e}})}return e.ui.tooltip})},630:function(e,t,i){var n,o,a;(function(s){if(true){!(o=[i(1),i(12),i(52)],n=s,a=typeof n==="function"?n.apply(t,o):n,a!==undefined&&(e.exports=a))}else{}})(function(e){return e.effects.define("blind","hide",function(t,i){var n={up:["bottom","top"],vertical:["bottom","top"],down:["top","bottom"],left:["right","left"],horizontal:["right","left"],right:["left","right"]},o=e(this),a=t.direction||"up",s=o.cssClip(),r={clip:e.extend({},s)},l=e.effects.createPlaceholder(o);r.clip[n[a][0]]=r.clip[n[a][1]];if(t.mode==="show"){o.cssClip(r.clip);if(l){l.css(e.effects.clipToBox(r))}r.clip=s}if(l){l.animate(e.effects.clipToBox(r),t.duration,t.easing)}o.animate(r,{queue:false,duration:t.duration,easing:t.easing,complete:i})})})},631:function(e,t,i){var n,o,a;(function(s){if(true){!(o=[i(1),i(12),i(52)],n=s,a=typeof n==="function"?n.apply(t,o):n,a!==undefined&&(e.exports=a))}else{}})(function(e){return e.effects.define("bounce",function(t,i){var n,o,a,s=e(this),r=t.mode,l=r==="hide",d=r==="show",c=t.direction||"up",u=t.distance,p=t.times||5,f=p*2+(d||l?1:0),h=t.duration/f,m=t.easing,g=c==="up"||c==="down"?"top":"left",b=c==="up"||c==="left",v=0,y=s.queue().length;e.effects.createPlaceholder(s);a=s.css(g);if(!u){u=s[g==="top"?"outerHeight":"outerWidth"]()/3}if(d){o={opacity:1};o[g]=a;s.css("opacity",0).css(g,b?-u*2:u*2).animate(o,h,m)}if(l){u=u/Math.pow(2,p-1)}o={};o[g]=a;for(;v<p;v++){n={};n[g]=(b?"-=":"+=")+u;s.animate(n,h,m).animate(o,h,m);u=l?u*2:u/2}if(l){n={opacity:0};n[g]=(b?"-=":"+=")+u;s.animate(n,h,m)}s.queue(i);e.effects.unshift(s,y,f+1)})})},632:function(e,t,i){var n,o,a;(function(s){if(true){!(o=[i(1),i(12),i(52)],n=s,a=typeof n==="function"?n.apply(t,o):n,a!==undefined&&(e.exports=a))}else{}})(function(e){return e.effects.define("clip","hide",function(t,i){var n,o={},a=e(this),s=t.direction||"vertical",r=s==="both",l=r||s==="horizontal",d=r||s==="vertical";n=a.cssClip();o.clip={top:d?(n.bottom-n.top)/2:n.top,right:l?(n.right-n.left)/2:n.right,bottom:d?(n.bottom-n.top)/2:n.bottom,left:l?(n.right-n.left)/2:n.left};e.effects.createPlaceholder(a);if(t.mode==="show"){a.cssClip(o.clip);o.clip=n}a.animate(o,{queue:false,duration:t.duration,easing:t.easing,complete:i})})})},633:function(e,t,i){var n,o,a;(function(s){if(true){!(o=[i(1),i(12),i(52)],n=s,a=typeof n==="function"?n.apply(t,o):n,a!==undefined&&(e.exports=a))}else{}})(function(e){return e.effects.define("drop","hide",function(t,i){var n,o=e(this),a=t.mode,s=a==="show",r=t.direction||"left",l=r==="up"||r==="down"?"top":"left",d=r==="up"||r==="left"?"-=":"+=",c=d==="+="?"-=":"+=",u={opacity:0};e.effects.createPlaceholder(o);n=t.distance||o[l==="top"?"outerHeight":"outerWidth"](true)/2;u[l]=d+n;if(s){o.css(u);u[l]=c+n;u.opacity=1}o.animate(u,{queue:false,duration:t.duration,easing:t.easing,complete:i})})})},634:function(e,t,i){var n,o,a;(function(s){if(true){!(o=[i(1),i(12),i(52)],n=s,a=typeof n==="function"?n.apply(t,o):n,a!==undefined&&(e.exports=a))}else{}})(function(e){return e.effects.define("explode","hide",function(t,i){var n,o,a,s,r,l,d=t.pieces?Math.round(Math.sqrt(t.pieces)):3,c=d,u=e(this),p=t.mode,f=p==="show",h=u.show().css("visibility","hidden").offset(),m=Math.ceil(u.outerWidth()/c),g=Math.ceil(u.outerHeight()/d),b=[];function v(){b.push(this);if(b.length===d*c){y()}}for(n=0;n<d;n++){s=h.top+n*g;l=n-(d-1)/2;for(o=0;o<c;o++){a=h.left+o*m;r=o-(c-1)/2;u.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-o*m,top:-n*g}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:m,height:g,left:a+(f?r*m:0),top:s+(f?l*g:0),opacity:f?0:1}).animate({left:a+(f?0:r*m),top:s+(f?0:l*g),opacity:f?1:0},t.duration||500,t.easing,v)}}function y(){u.css({visibility:"visible"});e(b).remove();i()}})})},635:function(e,t,i){var n,o,a;(function(s){if(true){!(o=[i(1),i(12),i(52)],n=s,a=typeof n==="function"?n.apply(t,o):n,a!==undefined&&(e.exports=a))}else{}})(function(e){return e.effects.define("fade","toggle",function(t,i){var n=t.mode==="show";e(this).css("opacity",n?0:1).animate({opacity:n?1:0},{queue:false,duration:t.duration,easing:t.easing,complete:i})})})},636:function(e,t,i){var n,o,a;(function(s){if(true){!(o=[i(1),i(12),i(52)],n=s,a=typeof n==="function"?n.apply(t,o):n,a!==undefined&&(e.exports=a))}else{}})(function(e){return e.effects.define("fold","hide",function(t,i){var n=e(this),o=t.mode,a=o==="show",s=o==="hide",r=t.size||15,l=/([0-9]+)%/.exec(r),d=!!t.horizFirst,c=d?["right","bottom"]:["bottom","right"],u=t.duration/2,p=e.effects.createPlaceholder(n),f=n.cssClip(),h={clip:e.extend({},f)},m={clip:e.extend({},f)},g=[f[c[0]],f[c[1]]],b=n.queue().length;if(l){r=parseInt(l[1],10)/100*g[s?0:1]}h.clip[c[0]]=r;m.clip[c[0]]=r;m.clip[c[1]]=0;if(a){n.cssClip(m.clip);if(p){p.css(e.effects.clipToBox(m))}m.clip=f}n.queue(function(i){if(p){p.animate(e.effects.clipToBox(h),u,t.easing).animate(e.effects.clipToBox(m),u,t.easing)}i()}).animate(h,u,t.easing).animate(m,u,t.easing).queue(i);e.effects.unshift(n,b,4)})})},637:function(e,t,i){var n,o,a;(function(s){if(true){!(o=[i(1),i(12),i(52)],n=s,a=typeof n==="function"?n.apply(t,o):n,a!==undefined&&(e.exports=a))}else{}})(function(e){return e.effects.define("highlight","show",function(t,i){var n=e(this),o={backgroundColor:n.css("backgroundColor")};if(t.mode==="hide"){o.opacity=0}e.effects.saveStyle(n);n.css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(o,{queue:false,duration:t.duration,easing:t.easing,complete:i})})})},638:function(e,t,i){var n,o,a;(function(s){if(true){!(o=[i(1),i(12),i(52),i(301)],n=s,a=typeof n==="function"?n.apply(t,o):n,a!==undefined&&(e.exports=a))}else{}})(function(e){return e.effects.define("puff","hide",function(t,i){var n=e.extend(true,{},t,{fade:true,percent:parseInt(t.percent,10)||150});e.effects.effect.scale.call(this,n,i)})})},639:function(e,t,i){var n,o,a;(function(s){if(true){!(o=[i(1),i(12),i(52)],n=s,a=typeof n==="function"?n.apply(t,o):n,a!==undefined&&(e.exports=a))}else{}})(function(e){return e.effects.define("pulsate","show",function(t,i){var n=e(this),o=t.mode,a=o==="show",s=o==="hide",r=a||s,l=(t.times||5)*2+(r?1:0),d=t.duration/l,c=0,u=1,p=n.queue().length;if(a||!n.is(":visible")){n.css("opacity",0).show();c=1}for(;u<l;u++){n.animate({opacity:c},d,t.easing);c=1-c}n.animate({opacity:c},d,t.easing);n.queue(i);e.effects.unshift(n,p,l+1)})})},640:function(e,t,i){var n,o,a;(function(s){if(true){!(o=[i(1),i(12),i(52)],n=s,a=typeof n==="function"?n.apply(t,o):n,a!==undefined&&(e.exports=a))}else{}})(function(e){return e.effects.define("shake",function(t,i){var n=1,o=e(this),a=t.direction||"left",s=t.distance||20,r=t.times||3,l=r*2+1,d=Math.round(t.duration/l),c=a==="up"||a==="down"?"top":"left",u=a==="up"||a==="left",p={},f={},h={},m=o.queue().length;e.effects.createPlaceholder(o);p[c]=(u?"-=":"+=")+s;f[c]=(u?"+=":"-=")+s*2;h[c]=(u?"-=":"+=")+s*2;o.animate(p,d,t.easing);for(;n<r;n++){o.animate(f,d,t.easing).animate(h,d,t.easing)}o.animate(f,d,t.easing).animate(p,d/2,t.easing).queue(i);e.effects.unshift(o,m,l+1)})})},641:function(e,t,i){var n,o,a;(function(s){if(true){!(o=[i(1),i(12),i(52)],n=s,a=typeof n==="function"?n.apply(t,o):n,a!==undefined&&(e.exports=a))}else{}})(function(e){return e.effects.define("slide","show",function(t,i){var n,o,a=e(this),s={up:["bottom","top"],down:["top","bottom"],left:["right","left"],right:["left","right"]},r=t.mode,l=t.direction||"left",d=l==="up"||l==="down"?"top":"left",c=l==="up"||l==="left",u=t.distance||a[d==="top"?"outerHeight":"outerWidth"](true),p={};e.effects.createPlaceholder(a);n=a.cssClip();o=a.position()[d];p[d]=(c?-1:1)*u+o;p.clip=a.cssClip();p.clip[s[l][1]]=p.clip[s[l][0]];if(r==="show"){a.cssClip(p.clip);a.css(d,p[d]);p.clip=n;p[d]=o}a.animate(p,{queue:false,duration:t.duration,easing:t.easing,complete:i})})})},642:function(e,t,i){var n,o,a;(function(s){if(true){!(o=[i(1),i(12),i(52)],n=s,a=typeof n==="function"?n.apply(t,o):n,a!==undefined&&(e.exports=a))}else{}})(function(e){var t;if(e.uiBackCompat!==false){t=e.effects.define("transfer",function(t,i){e(this).transfer(t,i)})}return t})},65:function(t,i,n){"use strict";n.d(i,"b",function(){return c});n.d(i,"a",function(){return u});var o=n(2);var a=n(9);var s=n.n(a);const{READONLY:r,WRITEABLE:l}=o["a"];const d={actions:Symbol("actions"),cpi:Symbol("cpi"),emptyBeforeRender:Symbol("emptyBeforeRender"),events:Symbol("events"),getStyles:Symbol("getStyles"),getStyleSettings:Symbol("getStyleSettings"),getStyleSettingsVariants:Symbol("getStyleSettingsVariants"),getStyleSettingsVariantsChildren:Symbol("getStyleSettingsVariantsChildren"),init:Symbol("init"),initBuilder:Symbol("initBuilder"),label:Symbol("label"),needsModelMetadata:Symbol("needsModelMetadata"),onlyRenderOnce:Symbol("onlyRenderOnce"),render:Symbol("render"),renderStrategy:Symbol("renderStrategy"),renderVDom:Symbol("renderVDom"),schema:Symbol("schema"),styles:Symbol("styles"),type:Symbol("type")};const c={attributes:{projector:{type:"object"},styleSettingsVariant:{type:"string"},componentType:{type:"string"},uniqueId:{type:"string"},afterCreateFunction:{type:"string"},styles:{type:"object"},show:{type:"boolean"},_:{type:"object"},_themeSettings:{type:"object"},enableBuilderCanvasMode:{type:"boolean"}},properties:{context:true}};class u{constructor(t){let i=t.schema,n=Object.assign({},t.cpi);if(i){i=s()({},c,i);if(i.access&&i.access.cpi){if(!n)n={};for(let t in i.access.cpi.publicProperties){if(!i.access.cpi.public)i.access.cpi.public=[];let o=i.access.cpi.publicProperties[t];if(o===l){const o="set".concat(e.utils.capitalizeFirst(t));n[o]=function(e){return this.set(t,e)};i.access.cpi.public.push(o)}if(o===l||o===r){const o="get".concat(e.utils.capitalizeFirst(t));n[o]=function(){return this.get(t)};i.access.cpi.public.push(o)}}}}if(!t.renderVDom&&!t.init&&!t.render){throw Error("Invalid Component Type definition. Component Type must be initialized with with either a render(), renderVDom(), or init() method.")}Object.assign(this,{[d.actions]:t.actions,[d.cpi]:n,[d.emptyBeforeRender]:t.emptyBeforeRender,[d.events]:t.events,[d.getStyles]:t.getStyles,[d.getStyleSettingsVariants]:t.getStyleSettingsVariants,[d.getStyleSettings]:t.getStyleSettings,[d.getStyleSettingsVariantsChildren]:t.getStyleSettingsVariantsChildren,[d.init]:t.init,[d.initBuilder]:t.initBuilder,[d.label]:t.label,[d.needsModelMetadata]:t.needsModelMetadata,[d.onlyRenderOnce]:t.onlyRenderOnce,[d.render]:t.render,[d.renderStrategy]:t.render?"element":"virtual",[d.renderVDom]:t.renderVDom,[d.schema]:i,[d.styles]:t.styles,[d.type]:t.type});["appendToProjector","overrideStylesWith","drilldown","drilldownByID","drillup","setDrillupButton","initCharts","renderChart","renderChartByID","renderChartByIndex"].forEach(e=>this[e]=t[e])}get actions(){return this[d.actions]}get cpi(){return this[d.cpi]}get events(){return this[d.events]}get emptyBeforeRender(){return this[d.emptyBeforeRender]}get getStyles(){return this[d.getStyles]}get getStyleSettings(){return this[d.getStyleSettings]}get getStyleSettingsVariants(){return this[d.getStyleSettingsVariants]}get getStyleSettingsVariantsChildren(){return this[d.getStyleSettingsVariantsChildren]}get init(){return this[d.init]}get initBuilder(){return this[d.initBuilder]}set initBuilder(t){if(!e.builder){throw Error('Cannot set "initBuilder" outside of the page composer environment.')}this[d.initBuilder]=t}get label(){return this[d.label]}get needsModelMetadata(){return this[d.needsModelMetadata]}get onlyRenderOnce(){return this[d.onlyRenderOnce]}get render(){return this[d.render]}get renderStrategy(){return this[d.renderStrategy]}get renderVDom(){return this[d.renderVDom]}get schema(){return this[d.schema]}get styles(){return this[d.styles]}get type(){return this[d.type]}}},67:function(t,i,n){"use strict";n.d(i,"a",function(){return c});var o=n(65);var a=n(74);const s=e.$,r=e.$L,l="Basic",d="Advanced";class c{constructor(t,i){this.propertiesViewer=i;i.clearExtras();const n=this.component=t,o=this.builder=n.builder,a=this.compType=e.componentType.get(n.builderId),s=this.schema=a&&a.schema;if(n.mode){i.mode=n.mode}else{delete i.mode}if(o.propertiesRenderer){this.renderBuilderPropertiesRenderer()}else{i.clear();i.setTitle((o&&o.name||n.builderId)+" "+r("Properties"));if(!s){this.renderNoPropertiesRenderer()}else{this.renderSchemaPropertiesRenderer()}}}renderBuilderPropertiesRenderer(){this.builder.propertiesRenderer(this.propertiesViewer,this.component)}renderNoPropertiesRenderer(){this.propertiesViewer.body.append(s("<div>").addClass("nx-pagebuilder-infotext").text(r("pb_No_properties_renderer")))}renderSchemaPropertiesRenderer(){const e=this.createProperties(this.schema);this.renderProperties(e)}renderProperties(e){this.propertiesViewer.applyPropsWithCategories(e,this.component.get("xmlState"))}createProperties(){const e=this.schema,t=e.properties,{actions:i,interactions:n,styles:o,tooltip:a,hotkeys:s,enableConditions:r,openConditions:l,renderConditions:d,selectedConditions:c,styleVariantConditions:u,context:p}=t,f=this.component,h={propertiesObject:this.propertiesViewer},m=r||l||d||c||u,g=this.constructor,b=[...g.createAttributeCategories(f,e),i&&g.createActionsCategory(f),n&&g.createInteractionsCategory(f),g.createStylesCategory(f,Object.assign({},h,{styles:o})),a&&g.createTooltipCategory(),s&&g.createHotkeysCategory(f),m&&g.createDisplayLogicCategory(f,t,h),p&&g.createContextCategory(f,h)];return b.filter(e=>!!e)}static createAttributeCategories(t,i){const n={[l]:this.createCategory(l),[d]:this.createCategory(d,[e.builder.core.coreProps.uniqueIdProp({component:t})])};const s=i.attributes||{};const r=t.get("xmlState");Object.keys(s).forEach(e=>{const i=s[e];if(o["b"].attributes[e])return;if(i.showInBuilder===false)return;if(i.showInBuilderFunc&&!i.showInBuilderFunc(r))return;const d=i.category||l,c=n[d]=n[d]||this.createCategory(d);c.props.push(new a["a"](e,i,t))});return Object.values(n)}static createActionsCategory(t){return e.builder.core.getActionsCategory({getModelName:()=>t.get("xmlState").attr("model"),linkedComponent:t})}static createInteractionsCategory(t){return e.builder.core.getInteractionsCategory({getModelName:()=>t.get("xmlState").attr("model"),linkedComponent:t})}static createStylesCategory(t,i={}){return e.builder.ink.getInkStylesTab({component:t,propViewer:i.propertiesObject,spacing:!!i.styles})}static createTooltipCategory(){return e.builder.ink.getTooltipProperties()}static createHotkeysCategory(t){return e.builder.core.getHotkeysCategory({linkedComponent:t})}static createDisplayLogicCategory(t,i,n={}){const{enableConditions:o,openConditions:a,renderConditions:s,selectedConditions:r,styleVariantConditions:l}=i;const d=t.get("xmlState");return e.builder.core.getRenderingCategory({showEnableDisableConditions:!!o,showOpenConditions:!!a,hideRenderConditions:s?false:true,showSelectedConditions:!!r,showStyleVariantConditions:!!l,component:t,model:d.attr("model"),propViewer:n.propertiesObject,conditionsNodeId:"renderConditions",conditionNodeId:"renderCondition",enableConditionsNodeId:"enableConditions",selectedConditionsNodeId:"selectedConditions"})}static createContextCategory(t,i={}){const n=t.get("xmlState");return e.builder.core.getContextCategory({propViewer:i.propertiesObject,state:n,model:n.attr("model")})}static createCategory(e,t=[]){return{name:e,props:t}}}},72:function(e,t,i){"use strict";i.d(t,"a",function(){return o});var n=i(81);class o{constructor(e,t={}){const i=new n["a"];const o=this;this._undoRedoObserver=new MutationObserver(function(){o._xmlActionPerformed.apply(o,arguments)});this._xmlDoc=e;this._undoStack=i;this._afterUndo=t.afterUndo;this._afterRedo=t.afterRedo;this._afterStackUpdate=t.afterStackUpdate;this._mutationRecordsModifier=t.mutationRecordsModifier;this._afterBatchUpdate=t.afterBatchUpdate;this._connect()}undo(){this._disconnect();const e=this._undoStack.undo();this._afterUndo&&this._afterUndo(e);this._connect()}redo(){this._disconnect();const e=this._undoStack.redo();this._afterRedo&&this._afterRedo(e);this._connect()}destroy(){this._disconnect()}get undoStack(){return this._undoStack}startBatching(){this._batching=true;this._batchedRecords=[]}stopBatching(){const e=this;let t=this._batchedRecords;if(this._mutationRecordsModifier)t=this._mutationRecordsModifier(t);this._undoStack.push(function(){e._performUndoRedo.apply(e,arguments)},t);this._afterStackUpdate&&this._afterStackUpdate();this._batching=false;delete this._batchedRecords}connectNewXml(e){this._xmlDoc=e;this._undoStack=new n["a"];this._disconnect();this._connect()}_connect(){this._undoRedoObserver.observe(this._xmlDoc,{attributes:true,attributeOldValue:true,childList:true,subtree:true})}_disconnect(){this._undoRedoObserver.disconnect()}_performUndoRedo(e,t){const i=t.filter(e=>e.type==="childList").sort((t,i)=>{const n=e=>e&&e.length;let o=0;if(n(t.addedNodes)&&n(i.removedNodes))o=-1;if(n(t.removedNodes)&&n(i.addedNodes))o=1;if(e)return-o;return o});const n=t.filter(e=>e.type!=="childList");if(!e)n.reverse();t=[...i,...n];for(let i=0;i<t.length;i++){const n=t[i];let o,a,s;switch(n.type){case"attributes":o=e?n.newValue:n.oldValue;if(o===null){n.target.removeAttribute(n.attributeName,o)}else{n.target.setAttribute(n.attributeName,o)}break;case"childList":if(e){a=n.removedNodes;s=n.addedNodes}else{a=n.addedNodes;s=n.removedNodes}if(a.length){Array.prototype.forEach.apply(a,[e=>e.remove()])}else if(s.length){Array.prototype.forEach.apply(s,[e=>{n.target.insertBefore(e,n.nextSibling||null)}])}}}}_xmlActionPerformed(e){e=e.map(e=>{const{addedNodes:t,attributeName:i,nextSibling:n,oldValue:o,previousSibling:a,removedNodes:s,target:r,type:l}=e;switch(l){case"attributes":return{attributeName:i,oldValue:o,target:r,type:l,newValue:e.target.getAttribute(i)};case"childList":return{addedNodes:t,removedNodes:s,previousSibling:a,nextSibling:n,target:r,type:l}}return e});if(this._batching){this._batchedRecords=this._batchedRecords.concat(e);this._afterBatchUpdate&&this._afterBatchUpdate()}else{const t=this;if(this._mutationRecordsModifier)e=this._mutationRecordsModifier(e);this._undoStack.push(function(){t._performUndoRedo.apply(t,arguments)},e);this._afterStackUpdate&&this._afterStackUpdate()}}customActionPerformed(e,t){this.undoStack.push(e,t);this._afterStackUpdate&&this._afterStackUpdate()}}},736:function(t,i,n){"use strict";n.r(i);var o=n(597);var a=n(155);var s=n(75);var r=n(150);class l{constructor(t,i,n){this.xmlState=t;this.parentComponent=i;this.columnBuilder=i.createChildComponent({componentType:"skuidbuilder__builderComponent",_xmlNode:e.$(t),_customBuilder:e.builder.core.getBuilder(n)})}renderVDom(e){this.columnBuilder.set("nodes",e,false);return this.columnBuilder.renderVDom()}unregister(){this.columnBuilder.unregister()}}const d=(e,t,i,n)=>{n=n||"_";let o=t.get("_cachedSpoofers");if(!o){o={_:[]};t.set("_cachedSpoofers",o)}if(!o[n])o[n]=[];let a=o[n].find(t=>t.xmlState===e);if(a)return a;const s=new l(e,t,i);o[n].push(s);return s};var c=n(38);var u=n(5);var p=n(11);var f=n(32);var h=n(51);function m(e,t){let i=e.attr("id"),n=Object(p["g"])(e),o=e.attr("sobject"),a=[{rel:o,ref:o,id:i,selectable:true}],s;if(t&&t.isPolymorphic)a[0].isPolymorphic=true;if(n){s=n.split(".");a[0].selectable=false;s.forEach(function(e,t){a.push({rel:e,ref:e,id:i,selectable:t===s.length-1})})}return a}let g=e.$,b=e.utils,v=e.events.publish;function y(e){const t=new h["a"](e.model,{filter:e.filter});t.createModal(e)}function C(t){if(e.platform.hasFeature("PageComposerStaging")){let e=g(".ui-dialog"),i=Object.assign({},t);if(e.length){i.modalZIndex=e.css("z-index")+1}return y(i)}let i=g("<div>").addClass("nx-picker-wrapper"),n=g("<div>").addClass("nx-pagebuilder-fieldpicker-header").appendTo(i),o=g("<div>").appendTo(n),a=g("<div>").addClass("nx-pagebuilder-buttonwrapper").css({float:"right",margin:"0px 6px 4px"}).appendTo(n),s=g("<div>").text("All Fields").addClass("nx-pagebuilder-toolbarpanel-propgroup").appendTo(a),r=g("<div>").text("Selected Fields").addClass("nx-pagebuilder-toolbarpanel-propgroup on").appendTo(a),l=g("<div>").addClass("nx-pagebuilder-fieldpicker-headertext").appendTo(n),d=g("<div>").addClass("nx-pagebuilder-fieldpicker-body").appendTo(i),c=[],h=[],C=t.model,_=Object(u["b"])(C),w=t.breadcrumb||m(C),x=C.attr("type")==="aggregate",k=!x&&t.showAllFields!==false,S=t.addFieldsHandler,I=t.insertFieldStateHandler,T=t.component,A=t.state||T&&T.get("xmlState"),P=t.filter;let E=function e(i,n){const a=C.children("fields,groupby");function s(e){const t=[];const i=e.children();g.each(i,(e,i)=>{let n=g(i);let o=n.attr("name")||n.attr("id");if(!o)return;t.push(o)});return t}const r=s(a);if(x)n="selectedOnly";const d=new f["a"]({breadcrumb:w,element:i,headertext:l,filterboxwrapper:o,isSelected:t.isSelected||function(e){return g.inArray(e,c)>-1},showUiOnlyFields:true,useMetadataOverrides:true,onChange:t.onChange||function(e){let t=x&&e.fieldName?e.fieldName:e.fieldId,i=e.isChecked;if(i===true){c.push(t)}else if(i===false){c=c.filter(function(e){return e!==t})}},isMultiselect:t.isMultiselect,filter:function e(t,i,o){let l=x&&!t.uiOnly,d=i&&!!i.isChildRelationship,c=["REFERENCE","OBJECT"].includes(t.displaytype),u=d&&i.relationshipName;if(P){return P(t,i,o)}if(x||n==="selectedOnly"){let e=a;let t=r;if(d){e=a.children('field[id="'+b.escapeSelector(u)+'"]').children("fields");t=s(e)}let i=e.children('field[id="'+b.escapeSelector(o)+'"]'+(l?',field[name="'+b.escapeSelector(o)+'"]':""));if(i.length===0){if(!c)return false;let e=_.getReferenceFieldRelationshipName(o);if(!e)return true;const i=!!t.find(t=>t.includes(e));return i}}return true},selectable:t.selectable||function(e,t){let i=true,o=x&&!e.uiOnly,a=o?e.name:t;if(x||n==="selectedOnly"){let e=o?"name":"id",t=C.children("fields,groupby").find("field["+e+'="'+b.escapeSelector(a)+'"]');if(t.length===0)i=false}return i},allowModelFieldAdds:!x&&n!=="selectedOnly"&&t.allowModelFieldAdds===true,onModelAddChange:t.onModelAddChange||function(e){let t=e.fieldId,i=e.isChecked;if(i===true){h.push(t)}else if(i===false){h=h.filter(function(e){return e!==t})}},useAliasNamesIfAggregate:true});d.render()};if(k){s.click(function(){if(!s.hasClass("on")){s.addClass("on");r.removeClass("on");d.empty();E(d,"allFields")}});r.click(function(){if(!r.hasClass("on")){r.addClass("on");s.removeClass("on");d.empty();E(d,"selectedOnly")}})}else{s.hide();r.hide()}E(d,"selectedOnly");i.dialog({closeText:"",autoOpen:true,draggable:true,resizable:false,width:800,height:468,title:"Add Field(s)",modal:true,close(){g(this).remove()},open(){g(this).css("z-index",b.increaseAndGetZIndex())},buttons:[{text:"Apply",id:"apply",click(){if(!x&&h.length>0){g.each(h,function(){e.builder.core.addFieldToModel({fieldId:this,model:C})});v("skuidBuilderSave")}if(c.length>0){if(typeof S==="function"){S(c)}else{g.each(c,function(){let e=x?"name":"id",i=C.children("fields,groupby").find("field["+e+'="'+this+'"]'),n={},o=x;if(x&&!i.length)o=false;if(o){n.fieldName=i.attr("name")}else if(x){i=C.children("fields").find('field[id="'+this+'"]');n.fieldName=i.attr("id")}n.fieldId=i.attr("id");n.fieldDisplayType=i.attr("displaytype");n.isChildRelationship=i.attr("type")==="childRelationship";let a=t.fieldBuilder.defaultStateGenerator(n);if(Object(p["m"])(C,this,{searchByName:o})===true){if(typeof I==="function"){I(a)}else{A.children("fields").first().append(a)}}});T.save().refresh()}}i.dialog("close")}},{text:"Cancel",id:"cancel",class:"nx-button-secondary",click(){i.dialog("close")}}]})}const{$:_,utils:w}=e;const x=()=>e.builder.core;function k(){return x().formula.getFormulasAsItems()}function S({insertAtCursor:e}){return _('<div class="nx-actionbutton">').actionSelect({onItemSelect:function t(i){if(i.value){e(i.value)}},maxHeight:"400px",items:[{value:"",label:"Operators",icon:"sk-icon-add"},{value:"+",label:"+  Add"},{value:"-",label:"-  Subtract"},{value:"*",label:"*  Multiply"},{value:"/",label:"/  Divide"},{value:"%",label:"%  Remainder"},{value:"==",label:"== Equals"},{value:"!=",label:"!= Does not Equal"},{value:">",label:"> Greater than"},{value:">=",label:">= Greater than or Equal to"},{value:"<",label:"< Less than"},{value:"<=",label:"<= Less than or Equal to"},{value:" and ",label:"And"},{value:" or ",label:"Or"}],type:"button"})}function I({insertAtCursor:e,formulaOptions:t}){return _('<div class="nx-actionbutton">').actionSelect({uniqueId:"function-inserter",onItemSelect:function t(i){if(i.value){e(i.value)}},maxHeight:"400px",items:[{value:"",label:"Functions",icon:"sk-icon-add"}].concat(t||k()),type:"button"})}function T({customAddMergeSelectorLabel:e,customAddMergeSelectorOptions:t,fieldName:i,formulaOptions:n,insertAtCursor:o,modelName:a,showCustomAddMergeSelector:s,showModelFieldSelector:r=false}){const l=_("<div>").addClass("nx-pagebuilder-property-button-wrapper").css({position:"relative",display:"inline-block"}).append(S({insertAtCursor:o}),I({insertAtCursor:o,formulaOptions:n}));if(r){l.append(_('<div class="nx-actionbutton">').actionSelect({items:[{value:"",label:"Fields",icon:"sk-icon-add",onSelect:function e(){let t,n,s=false,r;function l(){if(a)n=Object(u["j"])(a);s=Object(u["m"])(a)}l();if(!s||n){r=s?s:a;t=[{rel:r,ref:r,id:a}];if(n&&Object(p["g"])(n)&&t){t=x().createBreadcrumbForModel(n)}C({breadcrumb:t,model:n,isMultiselect:true,showAllFields:false,addFieldsHandler:function e(t){if(!(t&&Array.isArray(t))){return}o("{{"+t.join("}}{{")+"}}")},filter:function e(t,n,o){return i!==o}})}}}],type:"button"}))}else if(s){l.append(_('<div class="nx-actionbutton">').actionSelect({onItemSelect:function e(t){if(t.value){o("{{".concat(t.value,"}}"))}},maxHeight:"400px",items:[{value:"",label:e,icon:"sk-icon-add"}].concat(t),type:"button"}))}return l}function A(){return _("<div>").css({position:"relative",float:"right","margin-top":"20px"}).append(_("<a>").attr({href:"https://docs.skuid.com/latest/v2/en/skuid/formula-function.html",target:"_blank"}).text("Formula Help"))}function P({customAddMergeSelectorOptions:e,customAddMergeSelectorLabel:t,fieldName:i,formulaOptions:n,modelName:o,onChange:a,readOnly:s,showCustomAddMergeSelector:r,showLabel:l,showModelFieldSelector:d,showObjectPickerIfPolymorphic:c,value:u}={}){let p=_("<div>").addClass("nx-field").css({float:"left",width:"100%",display:"block !important"}),f=_("<textarea>").css({height:"155px","font-family":"Courier"}).appendTo(p),h=function e(t){let i=f.val(),n=f.getCursorPosition(),o=[];if(n===0){t+=i}else if(n===i.length){t=i+t}else{o[0]=i.substring(0,n);o[1]=i.substring(n,i.length);t=o[0]+t+o[1]}f.val(t).trigger("change")},m=_("<div>").text("Enter Formula").addClass("nx-basicfieldeditor-item-label").css({float:"left",width:"20%",clear:"none"}),g=_("<div>");if(s){const e=[];if(l){m.text("Formula Value");e.push(m)}e.push(x().propertyRenderers.readonly(u));return e}if(l)g.append(m);g.append(T({customAddMergeSelectorLabel:t,customAddMergeSelectorOptions:e,fieldName:i,formulaOptions:n,insertAtCursor:h,modelName:o,showCustomAddMergeSelector:r,showModelFieldSelector:d,showObjectPickerIfPolymorphic:c}),A());if(u)f.val(u);w.delayInputCallback(f,function(e){a(e)});return[g,p]}var E=n(23);const M=new s["a"];(function(e){const t=e.$,i=e.builder={},n=i.core={},o=e.utils,a=e.platform,s=o.isString,f=o.escapeSelector,h=o.makeXMLDoc,g=e.snippet,b=e.events.publish,v=e.dataSource,y={},C=e.constants.LOCAL_STORAGE_KEYS.DEFAULT_DATA_SOURCE,_=e.constants.DISPLAY_TYPES,w=_.BASE64,x=_.BOOLEAN,k=_.CURRENCY,S=_.DATE,I=_.DATETIME,P=_.DOUBLE,D=_.EMAIL,N=_.INTEGER,F=_.NUMBER,O=_.MULTIPICKLIST,R=_.PERCENT,L=_.PHONE,B=_.PICKLIST,j=_.REFERENCE,U=_.STRING,V=_.TEXTAREA,H=_.TEXT,q=_.TIME,z=_.URL,W="skuidBuilderSave",{ACTION_TYPES:{PLATFORM_ACTION:G},SALESFORCE:Y}=e.constants,X="node",K="attribute",$=/^[-A-Za-z0-9_]+$/,Q=/[^-A-Za-z0-9_]+/g,J=/[^A-Za-z0-9_]+/g;let Z={inline:"(function(skuid){\nvar $ = skuid.$;\n\t$(document.body).one('pageload',function(){\n\t\tvar myModel = skuid.model.getModel('MyModelId');\n\t\tvar myComponent = skuid.component.getById('MyComponentUniqueId');\n\n\t\t\n\t});\n})(skuid)",inlinesnippet:"var params = arguments[0],\n\t$ = skuid.$;",displaymethod:'var DisplayMethod = skuid.component.DisplayMethod,\n\t// h() takes 3 arguments:\n\t// 1. String name of DOM element to render, e.g. "div", "span"\n\t// 2. (optional) Object of attributes to apply to the DOM element\n\t// 3. (optional) Array of child elements to append to this element, can be strings or instances of hyperScript.\n\t// e.g. [ "h1", {}, [ "Hello" ] ],\n\th = skuid.virtualDom.hyperScript;\n\nreturn new DisplayMethod({\n\t// Options are "virtual", or "element"\n\treadModeStrategy: "virtual",\n\tread: function (fieldComponent) {\n\t\tvar context = fieldComponent.getCPI().getContext();\n\n\t\treturn h("div", {\n\t\t\tstyles: {\n\t\t\t\tfontWeight: "bold",\n\t\t\t\tfontSize: "20px",\n\t\t\t\tcolor: "black",\n\t\t\t}\n\t\t}, [\n\t\t\tcontext.value,\n\t\t]);\n\t},\n\t// Options are "virtual", or "element",\n\teditModeStrategy: "virtual",\n\tedit: function (fieldComponent) {\n\t\tvar context = fieldComponent.getCPI().getContext();\n\n\t\treturn h("input", {\n\t\t\tvalue: context.value,\n\t\t\toninput: function (event) {\n\t\t\t\tvar changes = {};\n\t\t\t\tchanges[context.field.id] = event.target.value;\n\t\t\t\tcontext.model.updateRow(context.row, changes);\n\t\t\t}\n\t\t});\n\t}\n});'};let ee={inline:"newInlineJS",inlinesnippet:"newSnippet",inlinecomponent:"newComponent",displaymethod:"newDisplayMethod"};let te=a.getEntityFieldName("page","composer_settings");n.fonts={webFontsLoaded:false,web:[],standard:["Arial/Arial, Helvetica, sans-serif",'Comic Sans MS/"Comic Sans MS", cursive, sans-serif','Courier New/"Courier New", Courier, monospace',"Georgia/Georgia, serif",'Lucida Sans Unicode/"Lucida Sans Unicode", "Lucida Grande", sans-serif',"Tahoma/Tahoma, Geneva, sans-serif",'Times New Roman/"Times New Roman", Times, serif','Trebuchet MS/"Trebuchet MS", Helvetica, sans-serif',"Verdana/Verdana, Geneva, sans-serif"]};n.prefillMetadataForObject=function(e,t,i){v.getDataSource(t).prefillMetadataForObject(e,i)};i.ink={};n.validators={modelId:function e(t,i){if(!$.test(t)){return"Model Ids must not be blank and can only contain letters, numbers, dashes, and underscores."}else{let e=Object(u["j"])(t);if(e.length&&e[0]!==i.get("xmlState")[0]){return"There is already another Model with this name."}}return true},fieldId:function e(t){let i=t.field,n=t.model,o=t.newFieldId,a;a=n?n.children("fields, groupby").children('[id="'+f(o)+'"]'):null;if(a&&a.length&&a.index()!==i.index()){return"There is already another Field in this Model with this id."}return true},conditionName:function e(t,i={}){if(Q.test(t)){return"Condition Names can only contain letters, numbers, or underscores."}else{let e=Object(p["c"])(t,i.get("xmlState").closest("model").attr("id"));if(e.length&&e[0]!==i[0]){return'There is already another Condition with the name "'+t+'" on this Model."'}}return true},alphaNumericUnder:function e(t,i={}){let n=i.description||"Input";if(J.test(t)){return n+" may only contain letters, numbers, or underscores."}return true},uniqueAttribute:function e(i,n,o={}){if(o.hasOwnProperty("attribute")===false)o.attribute="id";let a=true,s=o.description||"item",r=o.attributeDescription||"value";if(o.hasOwnProperty("nodeList")===true){t.each(o.nodeList,function(){let e=t(this);if(e.attr(o.attribute)===i&&e!==n.get("xmlState")){a="There is already another "+s+" with the "+r+" of "+i;return false}})}return a},numericOnly:function e(t){if(o.isNumber(t)===false){return"Must contain a numeric value"}return true},integerOnly:function e(t){if(o.isInteger(t)===false){return"Must contain only numbers"}return true}};const ie=()=>{const t=e.data.v2.localStorage.getItem(C)||e.platform.getDefaultDataSourceName();if(!e.dataSource.getDataSource(t))return e.platform.getDefaultDataSourceName();return t};n.recordDataSourceSelection=(t=>{e.data.v2.localStorage.setItem(C,t)});n.defaultStateGenerators={model:function e(){const t=ie();const i=h('<model id="'.concat(oe(),'" limit="20" query="true" createrowifnonefound="false" datasource="').concat(t,'"/>'));const n=Object(u["d"])(i);if(n&&n.onDataSourceChange){n.onDataSourceChange(i)}return i},field:function e(t){let i=s(t),n=i?t:t.id,o=h('<field id="'+n+'"/>');if(!i&&t.needsAlias){let e=t.functionName;o.attr("name",t.alias?t.alias:se(n,e));e&&o.attr("function",e)}if(t.isRelationship){o.attr({type:"childRelationship",limit:"10"});if(t.keyField){o.attr({keyfield:t.keyField,anchorfield:t.anchorField,childobject:t.childObject})}}return o},label:function e(t){return h("<label"+(t?' id="'+t+'"':"")+"/>")},jsitem:function e(){return h('<jsitem location="inlinesnippet" name="newSnippet" cachelocation="false"/>').text(Z.inlinesnippet)},cssitem:function e(){return h('<cssitem location="inline" name="newcss" cachelocation="false"/>')},javascript:function e(){return h("<javascript/>")},labels:function e(){return h("<labels/>")},css:function e(){return h("<css/>")}};n.coreProps={uniqueIdProp:function t(i){let o=i&&i.component,a=i.isSubComponent;if(!o&&a!==true){throw Error("A component param is required to use uniqueIdProp")}let r={id:"uniqueid",type:"string",label:i.label||"Unique Id",helptext:i.helptext||"Required parameter that uniquely identifies this component within the Skuid framework.",validator:function e(t){if(i.validator){let e=i.validator(t);if(e!==true)return e}if(a===true)return true;if(!s(t)||t===null||t.trim().length===0){return"Unique Id is a required field. Please provide a non-empty value."}let r,l=[],d=me();for(r in d){if(d[r].hideFromComponentsList!==true){l.push(r)}}let c=Object(p["j"])().find("> components").find(l.join(","));return n.validators.uniqueAttribute(t,o,{attribute:"uniqueid",description:"component",attributeDescription:"Unique Id",nodeList:c})},onChange:function t(n,o){if(a!==true){e.events.publish("skuid.builder.component.uniqueIdChange",[o,n])}i.onChange&&i.onChange(n,o)}};return r},domIdProp:function e(i){let n={id:"domid",type:"string",label:"DOM Id",helptext:"Optional parameter that gives this component's DOM element an id attribute."};return t.extend(n,i||{})},cssClassProp:function e(i){let n={id:"cssclass",type:"string",label:"CSS Class",helptext:"Optional parameter that gives this component's DOM element a CSS class."};return t.extend(n,i||{})}};function ne(e){let t=e.starter,i=e.isUnique;if(!t)t="NewValue";let n,a,s=t.substring(t.length-1,t.length);if(o.isNumber(s)){a=parseInt(s,10)-2+3;t=t.substring(0,t.length-1);n=t+a}else{n=t;a=1}while(!i(n)){n=t+""+a++}return n}function oe(e){return ne({starter:e||"NewModel",isUnique:function e(t){return Object(u["j"])(t).length===0}})}function ae(e,t){return ne({starter:e||"NewField",isUnique:function e(i){return t.children("groupby, fields").children('[id="'+i+'"]').length===0}})}function se(e,t){let i=e.split("."),n=i.shift(),o=n.charAt(0),a=(t?t.toLowerCase()+o.toUpperCase():o.toLowerCase())+n.slice(1),s;if(i.length){for(s=0;s<i.length;s++){n=i[s];a+=n.charAt(0).toUpperCase()+n.slice(1)}}return a.replace(/_/g,"").substring(0,25)}function re(e){let t,i,n,o;if(e.jquery&&e.attr){t=e.attr("name");i=e.attr("function");n=e.attr("id");o=e.attr("uionly")==="true"}else{t=e.name;i=e["function"];n=e.id;o=e.uiOnly}return(t?t+" - "+(i?i+"("+n+")":n):n)+(o?" (Ui-Only)":"")}g.registerSnippet("skuid.builder.page.preview",function(i){let s=i.model,r=i.row||s.getFirstRow(),l=i.saveFirst===true,d=i.editor,c=i.params||{},p,f,m=false,g=false,b=yt(),y=a.getEntityFieldNames("page");function C(e){f=window.open(e||"")}E["g"]();function _(e,i){let n=a.getBasePreviewUrl(e,i);if(c&&!t.isEmptyObject(c)){n+=(n.includes("?")?"&":"?")+o.param(c)}if(f)f.location=n;else C(n)}function w(){const e=o._floatingComponentFactory.createModal({title:"Preview: ".concat(r[y.name]),components:[{componentType:"skuid__text",contents:"Click <b>Go</b> to preview this page in a new window",styles:{spacing:{marginBottom:3}}}],buttons:[{styleSettingsVariant:"primary",label:"Go",onClick:()=>{e.getCPI().close();t()}},{label:"Cancel",onClick:()=>e.getCPI().close()}]});function t(){_(r)}}function x(){let e='condition[type="param"][inactive!="true"]',t=n.getPageModels(),i=t.find(e);if(n.masterPage){let t=n.getMasterPageXML().children("models");i=i.add(t.find(e))}return i}function k(){let e='field[defaultvaluetype="param"]',t=n.getPageModels(),i=t.find(e);if(n.masterPage){let t=n.getMasterPageXML().children("models");i=i.add(t.find(e))}return i}function S(){let i=x();let n=i.toArray().reduce(function(e,i){i=t(i);let n=i.closest("model"),o=n&&n.attr("datasource");if(o&&!e.includes(o))e.push(o);return e},[]);if(!n.length){return o.resolve()}return e.loader.service.loadDataSourcesAndDependencies(n)}function I(){let i=x(),n=k(),a={},s=[],d;function c(e,t,i){let n=Object(u["b"])(i),o=n.buildEntityMetadataRequest({model:i,targetEntity:e}),a,s=n.getCachedEntityMetadata(o),r=!s,l=t&&s&&!s.getField(t),c;if(r||l){c=d[n.name];if(!c){c=d[n.name]={}}delete o.dataSource;a=JSON.stringify(o);if(!c[a]){c[a]={}}}}if(i.length||n.length){a={};d={};i.each(function(){let e=t(this),i=e.attr("value");if(!i){return true}let n=e.closest('condition[type="join"][joinobject][inactive!="true"]'),o=e.closest("model"),a,r=e.attr("field");if(n.length){a=n.attr("joinobject")}else{a=o.attr("sobject")}if(a){c(a,r,o)}s.push(e)});n.each(function(){let e=t(this),i=e.attr("id"),n=e.attr("defaultValue"),o=e.closest("model"),a=o.attr("sobject");if(!n){return true}if(a){c(a,i,o)}s.push(e)});const l=[];let p=function i(){s.forEach(e=>{const i=e.prop("tagName")==="field";let n=i?e.attr("defaultValue"):e.attr("value"),o=i?e.attr("id"):e.attr("field"),s,r,l=e.closest('condition[type="join"][joinobject]'),d=e.closest("model"),c,p=Object(u["b"])(d);if(l.length){c=l.attr("joinobject")}else{c=d.attr("sobject")}s=o?t.extend(true,{},Object(u["g"])(d,o,c)):{displaytype:H};const f=p.getIdFields(c),h=p.getNameFields(c),m=p.getCachedEntityMetadata(c);if(c){if(s.displaytype==="ID"||f&&f.includes(s.id)){let e=n+"__FakeLookup";s.id=e+"__c";o=s.id;Object.assign(s,{filterable:true,displaytype:j,ref:c,rel:e+"__r",relationshipName:e+"__r",referenceTo:[{objectName:c,accessible:true,filterable:true,searchable:true,label:m&&m.getLabel(),labelPlural:m&&m.getLabelPlural()}]});r=h.map(e=>{return Object.assign({},m.getField(e),{id:s.rel+"."+e})})}else if(s.displaytype===j&&s.referenceTo&&s.referenceTo.length){if(s.referenceTo&&s.referenceTo.length){s.referenceTo.forEach(e=>{const t=e.objectName||e.o;const i=e.label||e.l;if(!i){const i=p.getCachedEntityMetadata(t);if(i){e.label=i.getLabel();e.labelPlural=i.getLabelPlural()}}e.accessible=true;e.searchable=true;e.filterable=true})}const e={accessible:true,createable:true,editable:true};if(s.ref.includes(",")){const t=p.getCachedEntityMetadata("Name");r=[Object.assign({},t?t.getField("Name"):e,{id:s.rel+".Name"})]}else{const t=p.getCachedEntityMetadata(s.ref);r=p.getNameFields(s.ref).map(i=>{return Object.assign({},t?t.getField(i):e,{id:s.rel+"."+i})})}}else if(s.displaytype===j&&(!s.referenceTo||!s.referenceTo.length)){s.displaytype=H}else if(s.displaytype===B){s.displaytype=H}}s.accessible=true;s.createable=true;s.editable=true;s.overrideMetadata=true;if(n&&!(n.toLowerCase()in a)){a[n.toLowerCase()]={field:o,fieldInfo:s,relatedNameFieldsToQuery:r,sobject:c,dataSource:p}}});let n=[],d=[],c=[];o.eachObject(a,(t,i)=>{let{dataSource:o,field:a,fieldInfo:s,relatedNameFieldsToQuery:r,sobject:u}=t,p=o.name,f=o.getDataSourceTypeName(),h=f==="REST",m=i,g;if(s.ref){m+=" (";if(s.ref.includes(","))m+="multiple objects";else{let e=o.getCachedEntityMetadata(s.ref);if(e){m+=e.getLabel()}else{m+=s.ref}}m+=")"}g=new e.model.Model(Object.assign({fields:r?[s].concat(r):[s],data:[],conditions:[],createRowIfNoneFound:false,doClone:false,objectName:u,preventUnloadIfUnsavedChanges:false,dataSourceName:p,dataSourceTypeName:f,createable:true},h?{methods:[{type:"insert",verb:"POST"}]}:{})).setMetadataHasLoaded().initialize().register();n.push(g);l.push(g.once("initialized").then(()=>{t.fieldInfo.createable=true;c.push(i);d.push({id:a,model:g,mode:"edit",label:m,row:g.createRow(),tokenizeSearch:true,useSOSL:true,soslFields:"Name Fields"})}))});function p(){function i(){let e=p.get("dialogInstance").getChildComponentsOfType("skuid__field"),i=[],n={};(e||[]).forEach((e,a)=>{let{field:s,inputInstance:r}=e.getState(),l=c[a],d=s.metadata&&s.metadata.id?o.getObjectProperty(s.row,s.id):r.get("value");if(s.metadata&&s.metadata.keyField){d=d[s.metadata.keyField]}if(!d||d&&s&&t.inArray(s,["ID",j])!==-1&&d.length<15){i.push("Please select a value for Parameter "+l);return true}if(d){if(typeof d==="object"&&d.referenceId){d=d.referenceId}n[l]=d}});if(!i.length){_(r,o.param(n));p.getCPI().close()}else{o._floatingComponentFactory.createToast(i.join("\n"),{styleSettingsVariant:"error"})}}function a(){if(n&&n.length){t.each(n,function(e,t){t.unregister()})}}const s=o.generateGUID(),l="PreviewWindowGo_"+s,u="PreviewWindowCancel_"+s,p=o._floatingComponentFactory.createModal({title:"Set Parameters needed to View Page: ".concat(r[y.name]),components:[{componentType:"skuid__text",contents:'A condition/default values was set for this page that references a URL parameter. \n\t\t\t\t\t\t\t\t\t\t\tPlease provide a sample value for that URL Parameter so that the Page will behave appropriately.\n\t\t\t\t\t\t\t\t\t\t\t<br/><br/>\n\t\t\t\t\t\t\t\t\t\t\tIf the Parameter is on a Reference field, please enter the Name (e.g. "ACME"), not the Id, in the Autocomplete. \n\t\t\t\t\t\t\t\t\t\t\tSkuid will grab the related record and use its Id for the preview.',styles:{spacing:{marginBottom:3}}}].concat(d.map(e=>Object.assign({},e,{componentType:"skuid__field",styles:{spacing:{marginBottom:2}}}))),buttons:[{styleSettingsVariant:"primary",label:"Go",uniqueId:l,onClick:()=>i()},{label:"Cancel",uniqueId:u,onClick:()=>p.getCPI().close()}],onClose:()=>{a();e.hotkeys.unbind(l)}});e.hotkeys.bind(h("<keys/>").append(h('<k key="return" ignoretextinputs="true"/>')),l,()=>i(),t("#"+l))}Promise.all(l).then(p)};let f=o.Deferred(),g=o.size(d);if(g){m=true;t.blockUI({message:"Retrieving metadata for fields associated with URL Parameter Conditions..."});const e=[];t.each(d,function(i,n){const a=v.getDataSource(i||"salesforce"),s=o.Deferred(),r=[];e.push(s.promise());t.each(n,function(e,t){let i=JSON.parse(e);i.dataSource=a;if(t.fields)i.fields=Object.keys(t.fields);r.push(i)});a.getEntityMetadata({entities:r,ignoreMetadataOverrides:true}).then(function(){s.resolve()},function(e){s.reject(e)})});Promise.all(e).then(function(){f.resolve()},function(e){f.reject(e)})}else{f.resolve()}f.then(()=>{p();t.unblockUI()}).catch(e=>{p();t.blockUI({message:e,timeout:4e3})})}else{if(!m&&!g&&!l){_(r)}else{w()}}}let T=o.Deferred();if(i.xml){T.resolve(i.xml)}else{let i=false;t.each(b,function(e,t){if(r.hasOwnProperty(t)){i=true;return false}});if(!i){g=true;t.blockUI({message:"Loading page layout data to check for required parameters..."});T=e.loader.service.page(r[y.name],r[y.module]).then(function(e){return e.xml})}else{T.resolve(s.getFieldValues(r,b,true).join(""))}}T.then(function(e){t.unblockUI();if(e.jquery){n.pageXML=e}else if(e){p=h(e);n.pageXML=p}else{window.alert("This page does not have any layout yet. Please continue building your page before previewing.");return}if(l){t.blockUI({message:"Saving Page..."});let e=function e(i){t.unblockUI();if(i.totalsuccess)I()};if(d){d.save({callback:function t(i){e(i)}})}else if(s){s.save({callback:function t(i){e(i)}})}}else{S().then(function(){I()})}})});g.registerSnippet("skuid.builder.page.triggerVersionCheck",function(e){ye(e.model,e.row)});g.registerSnippet("skuid.builder.downloadAsXMLFile",()=>{const t=n.pageModel,i=t.getFirstRow(),o=t.getFieldValue(i,e.platform.getEntityFieldName("page","name")),a=Object(p["j"])()[0].outerHTML;e.utils.downloadStringAsFile(_t(a),o+".xml")});const le={},de={};function ce(e){le[e.id]=e;de[e.xmlTag]=e}function ue(e){if(!s(e)&&e.id){e=i.id}delete le[e];delete de[i.xmlTag]}function pe(e){t.each(e,function(){ce(this)})}function fe(e){return le[e]}function he(e){return de[e]}function me(){return le}function ge(e,i){if(!i){i={location:X}}let n=i.storeAs,o=i.location,a=i.isStateless===true,s=i.id,r;if(!o){if(s)o=K;else o=X}if(a===true){r=i.value||i.valueFunction&&i.valueFunction()}else if(!n){if(o===K)r=e.attr(s);else{if(s)r=e.children(s).first().text();else r=e.text()}}else{if(n.type===X&&n.name){let i=e.children(s).first().children(n.name);if(i.length===1){r=i.first().text()}else if(i.length>1){r=[];t.each(i,function(){r.push(t(this).text())})}}}return r}function be(e,t,i){const n={value:i},o=t.location||K;if(o===K){n.key=t.id}else if(o===X&&t.id){n.childNodeName=t.id}return ve(e,n)}function ve(i,n={}){let o=false;if(i){let e=i,a;if(n.selector)e=i.find(n.selector);else if(n.childNodeName){e=i.children(n.childNodeName);if(e.length<1){e=h("<"+n.childNodeName+"/>").appendTo(i)}}if(n.storeAs&&n.storeAs.type&&n.storeAs.type==="node"){e.empty();t.each(n.value,function(t,i){e.append(h("<"+n.storeAs.name+"/>").text(i))});o=true}else if(n.key){a=e.attr(n.key);o=typeof n.value!=="undefined"&&n.value!==a;if(o)e.attr(n.key,n.value)}else{o=n.value!==e.text();if(o)e.text(n.value)}if(n.value===""&&n.key&&!n.keepEmptyValues){e.removeAttr(n.key)}if(n.childNodeName&&(typeof n.value==="undefined"||n.value==="")){e.remove()}}if(o){e.events.publish(W)}}function ye(e,t){let i=null,n,o={};if(e.hasChanged){i=e.getField("skuid__Last_Modified_Date_Check__c");n=e.getFieldValue(t,"LastModifiedDate");if(i&&n){o[i.id]=n;e.updateRow(t,o)}}}function Ce(e,i,n){o.writeXmlToPageLayoutFields(e,i,n);ye(i,n);let a=o.size(y);if(a>0){t.each(y,function(e,t){if(a>0){t&&t.refresh&&t.refresh();delete y[e];a--}else return true})}}let _e=[F,N,x,k,S,I,P,R],we=[U,H,V,L,D,B,z,w],xe=[F,U,V,L,D,B,z,w,S,I,P,N,R,k,q],ke={name:"=",longname:"is",validFor:["fieldvalue","param","userinfo","datasourceuserinfo","blank","modelmerge","dependent","searchfield","contextrow","viewport"]},Se={"":ke,"=":ke,"!=":{name:"!=",longname:"is not",validFor:["blank","contextrow","datasourceuserinfo","dependent","fieldvalue","modelmerge","param","userhaspermission","userinfo","viewport"]},gt:{name:">",longname:"is greater than",validFor:["fieldvalue","param","userinfo","modelmerge","dependent","viewport"],validForDisplayTypes:xe},lt:{name:"<",longname:"is less than",validFor:["fieldvalue","param","userinfo","modelmerge","dependent","viewport"],validForDisplayTypes:xe},gte:{name:">=",longname:"is greater than or equal to",validFor:["fieldvalue","param","userinfo","modelmerge","dependent","viewport"],validForDisplayTypes:xe},lte:{name:"<=",longname:"is less than or equal to",validFor:["fieldvalue","param","userinfo","modelmerge","dependent","viewport"],validForDisplayTypes:xe},in:{name:"in",longname:"is in the set of values",validFor:["modelmerge","multiple","join","search","contextrows","datasourceuserinfo"]},"not in":{name:"not in",longname:"is not in the set of values",validFor:["modelmerge","multiple","join","contextrows"]},includes:{name:"includes",longname:"includes one or more of these values",validFor:["fieldvalue","param","userinfo","modelmerge","dependent","multiple","searchfield"],validForDisplayTypes:[O]},excludes:{name:"excludes",longname:"does not include any of these values",validFor:["fieldvalue","param","userinfo","modelmerge","dependent","multiple"],validForDisplayTypes:[O]},"starts with":{name:"starts with",validFor:["fieldvalue","param","userinfo","modelmerge","dependent","searchfield"],validForDisplayTypes:we},"ends with":{name:"ends with",validFor:["fieldvalue","param","userinfo","modelmerge","dependent"],validForDisplayTypes:we},contains:{name:"contains",validFor:["fieldvalue","param","userinfo","modelmerge","dependent","searchfield"],validForDisplayTypes:we},"does not contain":{name:"does not contain",validFor:["fieldvalue","param","userinfo","modelmerge","dependent"],validForDisplayTypes:we},"does not start with":{name:"does not start with",validFor:["fieldvalue","param","userinfo","modelmerge","dependent"],validForDisplayTypes:we},"does not end with":{name:"does not end with",validFor:["fieldvalue","param","userinfo","modelmerge","dependent"],validForDisplayTypes:we}},Ie={defaultcurrency:{label:"Default Currency"},firstname:{label:"First Name"},lastname:{label:"Last Name"},email:{label:"Email"},federationid:{label:"Federation Id"},locale:{label:"Locale"},name:{label:"Name",value:"name"},organizationid:{label:"Organization Id"},organizationname:{label:"Organization Name"},profileid:{label:"Profile Id"},profilename:{label:"Profile Name"},sessionid:{label:"Session Id"},userid:{label:"User Id"},username:{label:"User Name"},userroleid:{label:"User Role Id"},usertype:{label:"User Type"},ismulticurrencyorganization:{label:"Is Multi Currency Org"}},Te={YESTERDAY:{label:"Yesterday"},TODAY:{label:"Today"},TOMORROW:{label:"Tomorrow"},NOW:{label:"Now"},LAST_WEEK:{label:"Last Week"},THIS_WEEK:{label:"This Week"},NEXT_WEEK:{label:"Next Week"},LAST_N_WEEKS:{label:"Last n Weeks",merge:true},NEXT_N_WEEKS:{label:"Next n Weeks",merge:true},N_WEEKS_AGO:{label:"n Weeks Ago",merge:true},LAST_MONTH:{label:"Last Month"},THIS_MONTH:{label:"This Month"},NEXT_MONTH:{label:"Next Month"},LAST_N_MONTHS:{label:"Last n Months",merge:true},NEXT_N_MONTHS:{label:"Next n Months",merge:true},N_MONTHS_AGO:{label:"n Months Ago",merge:true},LAST_90_DAYS:{label:"Last 90 Days"},NEXT_90_DAYS:{label:"Next 90 Days"},LAST_N_DAYS:{label:"Last n Days",merge:true},NEXT_N_DAYS:{label:"Next n Days",merge:true},N_DAYS_AGO:{label:"n Days Ago",merge:true},THIS_QUARTER:{label:"This Quarter"},LAST_QUARTER:{label:"Last Quarter"},NEXT_QUARTER:{label:"Next Quarter"},NEXT_N_QUARTERS:{label:"Next n Quarters",merge:true},LAST_N_QUARTERS:{label:"Last n Quarters",merge:true},N_QUARTERS_AGO:{label:"n Quarters Ago",merge:true},THIS_YEAR:{label:"This Year"},LAST_YEAR:{label:"Last Year"},NEXT_YEAR:{label:"Next Year"},NEXT_N_YEARS:{label:"Next n Years",merge:true},LAST_N_YEARS:{label:"Last n Years",merge:true},N_YEARS_AGO:{label:"n Years Ago",merge:true},THIS_FISCAL_QUARTER:{label:"This Fiscal Quarter",serverside:true},LAST_FISCAL_QUARTER:{label:"Last Fiscal Quarter",serverside:true},NEXT_FISCAL_QUARTER:{label:"Next Fiscal Quarter",serverside:true},NEXT_N_FISCAL_QUARTERS:{label:"Next n Fiscal Quarters",serverside:true,merge:true},LAST_N_FISCAL_QUARTERS:{label:"Last n Fiscal Quarters",serverside:true,merge:true},N_FISCAL_QUARTERS_AGO:{label:"n Fiscal Quarters Ago",serverside:true,merge:true},THIS_FISCAL_YEAR:{label:"This Fiscal Year",serverside:true},LAST_FISCAL_YEAR:{label:"Last Fiscal Year",serverside:true},NEXT_FISCAL_YEAR:{label:"Next Fiscal Year",serverside:true},NEXT_N_FISCAL_YEARS:{label:"Next n Fiscal Years",serverside:true,merge:true},LAST_N_FISCAL_YEARS:{label:"Last n Fiscal Years",serverside:true,merge:true},N_FISCAL_YEARS_AGO:{label:"n Fiscal Years Ago",serverside:true,merge:true}};function Ae(e){let i=e.index()+1,n=i+": ",a=e.attr("type"),s=a==="search",r=e.attr("value"),l=e.attr("sourcetype"),d=e.attr("fieldfunction"),c,p=e.attr("operator"),f=e.attr("enclosevalueinquotes")!=="false",h=Object(u["f"])(e),m,g;if(l==="param"){c=e.attr("sourceparam");n+=c?"(param) '"+c+"'":"[No Parameter]"}else if(l==="snippet"){c=e.attr("sourcesnippet");return c?"Snippet '"+c+"' returns true":"[No Snippet]"}else if(l==="boolean"){c=e.attr("sourceparam");n+="(boolean) '"+c+"'"}else if(l==="userinfo"){c=e.attr("sourceuserinfotype");n+=c?"(userinfo) "+c:"[No Property]"}else if(l==="connection"){c=e.attr("connection");return c?"User is "+c:"[No Selection]"}else if(["feature","userhaspermission"].includes(l)){c=e.attr("value");if(!c){return"[No ".concat(l==="feature"?"Feature":"Permission"," selected]")}else{return"(user ".concat(p==="!="?"does not have":"has"," ").concat(l==="feature"?"feature":"perm",") ").concat(c)}}else if(l==="designSystem"){n="Design System"}else if(l==="datasourceuserinfo"){c=e.attr("sourcedatasourcetypeuserinfo");n+=c?"(userinfo) "+c:"[No Property]"}else if(l==="modelproperty"||l==="rowproperty"){c=e.attr("sourceproperty");if(c){let t=e.attr("fieldmodel"),i;if(t){i=t+" Model "}else{i="Context Model "}if(l==="modelproperty"){if(c==="hasRows"||c==="hasNoRows"){return n+i+"has"+(c==="hasNoRows"?" no":"")+" data rows"}else if(c==="hasChildRows"||c==="hasNoChildRows"){return n+"Context row in the "+i+"has"+(c==="hasNoRows"?" no":"")+(e.attr("childrel")||"[No Child Relationship]")+" data rows"}else if(c==="data.length"){n+="# of rows in the "+i}else if(c==="hasChanged"){n+=i+" has unsaved changes"}else{n+=i+" "+c}}else{i="Context Row in "+i;if(c==="isNew"){return n+i+" is new"}else if(c==="isCloned"){n+=i+" is clone of existing record"}else if(c==="hasChanged"){n+=i+" has unsaved changes"}else if(c==="isSaved"){return n+=i+" already exists in database"}else if(c==="isMarkedForDeletion"){n+=i+" is marked for deletion"}}}else{return n+"[No Property selected]"}}else if(l==="viewport"){return"Viewport width ".concat(Se[p||""].name," ").concat(r||"[No value]")}else{n+=(d&&!s?d+"(":"")+(e.attr("field")||"[No Field]");let t=e.attr("locationsource"),i=e.attr("latitudefield"),o=e.attr("longitudefield");if(t){n+=",";if(t==="userlocation"){n+="User Location"}else if(t==="param"){n+="("+(i?"(param) '"+i+"'":"[No Latitude Parameter]")+","+(o?"(param) '"+o+"'":"[No Longitude Parameter]")+")"}else if(t==="modelmerge"){let t=e.attr("locationmodel")||"[No Location Model]";n+="("+t+")"+"("+(i?i:"[No Latitude Field]")+","+(o?o:"[No Longitude Field]")+")"}}n+=d&&!s?")":""}n+=" "+Se[p||""].name+" ";if(a=="param"){n+="(param) "}else if(a=="userinfo"){m=Ie[e.attr("userinfotype")];g=m?m.label:"User Id";n+="(userinfo) "+g}else if(a=="datasourceuserinfo"){let t=h&&h.getUserInfoProperties&&h.getUserInfoProperties()||[],i=o.keyBy(t,"value"),a=t.length&&t.find(function(e){return e.defaultValue}),s=e.attr("userinfotype")||a&&a.value;m=i[s];g=m?m.label:s;n+="(data source user) "+g}else if(a=="join"){n+="(SELECT "+(e.attr("joinfield")||"")+" FROM "+(e.attr("joinobject")||"");let t=e.children("condition");if(t.length){n+=" WHERE (<Sub Conditions>)"}n+=")"}else if(a==="modelmerge"){n+="("+(e.attr("model")||"")+")("+(e.attr("mergefield")||"")+")"}else if(a==="multiple"){n+="(";let i=e.children("values").children();if(i.length){i.each(function(){n+=(f?"'":"")+t(this).text()+(f?"',":",")});n=n.substring(0,n.length-1)}n+=")"}else if(a==="dependent"){let t=e.attr("depfield")||"<Unspecified>";n+="the value of the '"+t+"' field from the current row"}else if(s){n+="the search of "+d+" for "+"'"+r+"'"}if(["datasourceuserinfo","param","userinfo"].includes(a)){f=false}if(["blank","boolean","datasourceuserinfo","fieldvalue","param","userinfo"].includes(a)){if(a==="blank"&&r==="null"){r="blank"}if(f)n+="'";n+=r||"";let t=e.attr("units");t&&(n+=" "+t);if(f)n+="'"}if((e.attr("state")==="filterableon"||e.attr("state")==="filterableoff")&&e.attr("name")){n+=" (filterable as "+e.attr("name")+")"}if(e.attr("inactive")==="true"){n+=" (inactive)"}return n}function Pe(e,i){let n=e.get("xmlState"),o=Object(u["i"])(e,i),a,s=n.attr("sourcetype"),r=n.attr("type");if(o){a=o.displaytype}if(r==="blank"||t.inArray(s,["modelproperty","rowproperty"])>-1&&u["o"][n.attr("sourceproperty")]||a&&t.inArray(a,_e)!==-1){n.attr("enclosevalueinquotes","false")}else{n.attr("enclosevalueinquotes","true")}}function Ee(e,t,i){let o=n.getBuilder(t);if(o.createFromModel){return o.createFromModel(e,i)}else{return o.getDefaultState(i,{setUniqueId:true})}}function Me(){let e=n.pageModel.getFieldValue(n.pageRow,te,true);if(e&&s(e)){e=JSON.parse(e)}else if(!e){e={}}return e}function De(e){n.pageModel.updateRow(n.pageRow,te,JSON.stringify(e))}function Ne(e){return new o.KeyValueService({id:e,type:"model",get:Me,set:De})}function Fe(e){return new o.KeyValueService({id:e,type:"component",get:Me,set:De})}function Oe(e){if(n.masterPage&&e&&e[0]&&e[0].ownerDocument.childNodes[0]===n.getMasterPageXML()[0])return true;return false}function Re(){return i.pagebuilderui.row}function Le(e){const t=n.getComponentFromState(Object(p["h"])());return t.builderCPI.createModel(e)}function Be(i){if(!i)i={};let a=i.fieldId,s=i.view,r=i.isChildRelationship||s&&s==="childonly",l=i.model,d=i.fieldBuilder||e.builder.fieldBuilder,c=i.addChildComponentFunction,p,m;if(d){p=function e(t){return d.getDefaultState(t)}}else{p=n.defaultStateGenerators.field}if(a&&l){let e=i.fieldsNode,s=i.fieldsElement,g,v=i.targetObjects;if(!e)e=l.children("fields");if(!s){g=dt(e);s=g&&g.element.find(".nx-pagebuilder-fieldschildren")}let y=e.children('[id="'+f(a)+'"]'),C=l.attr("type")==="aggregate",_=y.length&&y.attr("uionly"),w=C?e.is("groupby"):false,x=l.attr("id"),T=Object(u["g"])(x,a,null,{isChildRelationship:i.isChildRelationship}),A=T?T.displaytype:null,E=[],M=Object(u["b"])(l),D=M.getDataSourceType(),F=D.prop("runtime.metadataSource"),O=F==="local"||F==="hybrid";if(!_&&C||y.length===0){let i={id:a,needsAlias:C},g,y;if(C){if(w){if(A===I&&D.name===Y){g="CALENDAR_YEAR"}}else{if(T&&t.inArray(A,["NUMBER",k,P,N])>-1){g="SUM"}else if(T&&A===R){g="AVG"}else if(T&&(A===S||A===I)){g="MAX"}else{g="COUNT"}}}if(g)i.functionName=g;let _;if(r){_=o.Deferred();let e=Object(u["b"])(l);i.isRelationship=true;let t=e.getCachedEntityMetadata(T.childObject||T.childSObject);if(t){_.resolve(t)}else{e.getEntityMetadata({entities:T.childObject,ignoreMetadataOverrides:true}).then(function(e){_.resolve(e)},function(e){_.reject(e)})}if(T.keyField){i.anchorField=T.anchorField;i.childObject=T.childObject;i.keyField=T.keyField}}else{_=o.resolve()}y=a!=="Id"&&A===j;let F=p(i);E.push(F);_.then(function(e){if(e){let t=F.children("fields");if(!t.length){t=h("<fields/>");F.append(t)}let i=e.get("idFields");if(i){i.forEach(function(e){t.append(n.defaultStateGenerators.field({id:e}))})}}}).catch(function(e){t.blockUI({message:e,timeout:4e3})});let L=function i(o){t.each(o,function(i,o){v&&o.attr("targetobjects",v);if(O){let e=Object(u["g"])(x,o.attr("id"),null,{readMetadataFromFieldNode:false});e&&t.each(e,function(e,t){if(typeof t!=="undefined"&&t!==null&&e!=="id"&&typeof t!=="object"){o.attr(e.toLowerCase(),t)}})}e.append(o);if(s&&d){const e=n.componentFactory(o,d);c&&c(e);s.append(e.element)}})};let B=function i(n,o){if(n.dataSourceType.getDefaultFieldsForReferenceField){m=n.dataSourceType.getDefaultFieldsForReferenceField(a,T,n);t.each(m,function(t,i){if(!i)return true;if(e.children('[id="'+f(i)+'"]').length===0){o.push(p({id:i,needsAlias:C}))}})}};if(y&&(!C||w)&&T.referenceTo&&T.referenceTo.length&&T.rel&&T.rel!=="null"){let e=T.referenceTo[0].objectName,t=T.referenceTo.length===1?e:"Name";if(t){if(!(t in M.getCachedEntityMetadata())){M.getEntityMetadata({entities:t,ignoreMetadataOverrides:true}).then(()=>{const e=[];B(M,e);L(e);if(e.length){b(W)}})}else{B(M,E)}}}L(E)}if(E.length){return E}}return false}let je=function e(t,i,n){let o,a;if(n){o=n.modelPropId;a=n.component}if(!o)o="model";if(i.type==="model.remove"&&t.attr(o)===i.modelId){if(a)a.remove(false,true);else t.remove();b("skuidBuilderNeedSave");return true}return false};let Ue=function e(t,i,n){if(i.type==="model.idChange"&&t.attr(n||"model")===i.oldId){t.attr(n||"model",i.newId);b("skuidBuilderNeedSave");return true}return false};let Ve=function e(i,o){let a=fe(i.prop("tagName")),s;if(a&&a.handleStateEvent){s=a.handleStateEvent(i,o,n.getComponentFromState(i))}if(s!==false){i.children().each(function(){e(t(this),o)})}};let He={field:function e(t,i){if(t.attr("type")==="search")return"Id";else{if(t.attr("field")){let e=t.attr("fieldfunction"),n=e&&e==="DISTANCE";return i+" records where <b>"+(e&&!n?e.toUpperCase()+"(":"")+t.attr("field")+(e&&!n?")":"")+"</b>"}else{return"[No Field Selected]"}}},operator:function e(t){let i=t.attr("type")==="search"?"in":t.attr("operator")||"",o=n.operatormap[i];return"<b>"+(o.longname||o.name)+"</b>"},value:function e(i){let n,a=i.attr("type"),s=Object(u["f"])(i),r=i.attr("locationsource"),l,d;if(a==="fieldvalue"){n="<b>"+i.attr("value")+"</b>"}else if(a==="multiple"){n="";i.children("values").children().each(function(){n+=t(this).text()+", "});n=n.substring(0,n.length-2)}else if(a==="param"){n=i.attr("value")?"the <b>"+i.attr("value")+" page parameters</b>":"[No Parameter Given]"}else if(a==="userinfo"){l=Ie[i.attr("userinfotype")];d=l?l.label:"User Id";n="the <b>"+d+"</b> of the user running this page"}else if(a==="datasourceuserinfo"){let e=s&&s.getUserInfoProperties&&s.getUserInfoProperties()||[],t=o.keyBy(e,"value"),a=e.length&&e.find(function(e){return e.defaultValue}),r=i.attr("userinfotype")||a&&a.value;l=t[r];d=l?l.label:r;n="the <b>"+d+"</b> of the Data Source user accessing this Model's data"}else if(a==="blank"){n="a <b>blank</b> value"}else if(a==="modelmerge"){let e=t.inArray(i.attr("operator"),["in","not in"])!==-1;n=i.attr("mergefield")?(e?"containing":"the value of")+" the <b>"+i.attr("mergefield")+"</b> field from "+(e?"any":"the first")+" row returned by the <b>"+i.attr("model")+"</b> model":"[No Merge Field Selected]"}else if(a==="join"){n=i.attr("joinfield")?"specified by returning <b>"+i.attr("joinfield")+"</b> values from a subquery on the <b>"+i.attr("joinobject")+"</b> object":"[No Join Field Selected]"}else if(a==="search"){n="returned by searching <b>"+(i.attr("fieldfunction")||"Name Fields")+"</b> for '<b>"+i.attr("value")+"</b>'"}if(r){let e=i.attr("units");if(e){n+=" <b>"+(e==="km"?"kilometers":"miles")+"</b> from "}if(r==="userlocation"){n+=" the running user's location."}else if(r==="param"){n+=" the location provided in the <b>"+(i.attr("latitudefield")||"[No Latitude Parameter]")+"</b> and <b>"+(i.attr("longitudefield")||"[No Longitude Parameter]")+"</b> page parameters"}else if(r==="modelmerge"){let e=i.attr("locationmodel");if(!e)n+="[Please choose a Location Model and Latitude, Longitude Fields]";else{n+=" the location provided in values of the <b>"+(i.attr("latitudefield")||"[No Latitude Field]")+"</b> and <b>"+(i.attr("longitudefield")||"[No Longitude Field]")+"</b> fields in the <b>"+i.attr("locationmodel")+"</b> model."}}}return n},state:function e(t,i){let n="This "+i,o=t.attr("state");if(!o){n+=" is <b>always on</b>."}else if(o==="filterableon"||o==="filterableoff"){if(t.attr("name")){n+=", named <b>"+t.attr("name")+"</b>,"}n+=" can be modified by filters, but is <b>"+(o==="filterableon"?"on":"off")+" by default</b>."}else if(o==="filterablerequired"){if(t.attr("name")){n+=", named <b>"+t.attr("name")+"</b>,"}n+=" can be modified by filters, but is required and thus cannot be deactivated."}else if(o==="fixed"){if(t.attr("name")){n+=", named <b>"+t.attr("name")+"</b>,"}n+=" cannot be modified by filters, and is required, therefore it cannot be deactivated."}else{n+=" is <b>always off</b>"}return n},parameter:function e(t){let i=t.attr("sourceparam");if(i){return"<b>"+o.encodeHTML(i)+"</b> equals "}else{return"[No Parameter provided]"}}};function qe(e){return t.inArray(e,["LOCATION","ADDRESS"])!==-1}function ze(e){let i={},o,a,r=arguments;if(e&&!s(e)&&r.length===1){o=e.type;a=e.displayType}else{o=r[0];a=r[1]}t.each(n.operatormap,function(e,n){if(e&&t.inArray(o||"fieldvalue",n.validFor)!==-1){let o=n.validForDisplayTypes,s=true;if(o&&o.length&&a&&t.inArray(a,o)===-1){s=false}if(s)i[e]=n}});return i}function We(i,a,s,r){let l,d,u,p,f,h,m,g,b,v=i.isStateless===true,y=function e(){if(i.valueFunction){return i.valueFunction()}if(r){return r.text()}else if(s){return a.attr(s)}else{return i.value||i.defaultValue||""}},C=function e(t,n){if(i.beforeChange){i.beforeChange(t,n)}if(!v){ve(p,{key:f,value:t,keepEmptyValues:!!i.defaultValue})}i.onChange&&i.onChange(t,n)},_=i.validator,w="currentValue";if(i.metadata){d=i.metadata.displaytype;if(a.is("condition")){const t=a.attr("fieldfunction");if(t){const n=a.closest("model"),o=e.builder.core,s=n&&n.length&&o.getDataSourceFromModelName(n.attr("id")),r=s&&s.getDisplayTypeForFieldFunction(t,i.metadata);if(r){d=r}}}m=d===S||d===I}if(r){p=r;f=undefined}else if(s){p=a;f=s}else{p=undefined;f=undefined}if(typeof ge(a,i)==="undefined"&&i.defaultValue){be(a,i,i.defaultValue)}u=y();if(d===x){l={value:u==="true",onChange:function e(t){let i=t?"true":"false",n=t?"false":"true";C(i,n)}}}else if(d===B&&i.metadata.picklistEntries){C=function e(t,n){if(i.beforeChange){i.beforeChange(t,n)}if(!v){ve(p,{key:f,value:t,required:true})}i.onChange&&i.onChange(t,n)};l={value:o.decodeHTML(u),onChange:function e(t,i){C(t,i)},entries:i.metadata.picklistEntries}}else if(m){g=u;b="";if(u&&u.indexOf(":")!==-1){let e=u.split(":");g=e[0];b=e[1]}l={value:o.decodeHTML(u),onChange:function e(t,i){C(t,i)}}}else{d=H;u=u||"";l={value:u,onChange:function e(i,n){if(i===n)return;let o=true,a=h.parent().find(".nx-property-error");if(_)o=_(i);if(o===true){if(a.length)a.hide();C(i,y())}else{if(!a.length){a=t('<div class="nx-property-error">').insertAfter(h)}else{a.show()}a.text(o)}}}}if(_){l.dataPropertyName=w}h=e.ui.renderers[d].edit(l);if(_){let t="skuid.pageComposer.propertyPanel.beforeRender",i="blur.skuid",n,o=function t(){if(!h.closest(".nx-pagebuilder-toolbarpanel").length){e.events.unsubscribe(n);return}let i=h.val(),o,a=_(i);if(a!==true){o=y();if(o!==i){h.val(o);h.data(w,o);h.parent().find(".nx-property-error").hide()}}};h.off(i).on(i,o);if(n)e.events.unsubscribe(n);n=e.events.subscribe(t,o)}if(d=="BOOLEAN"){let e="sk-builder-check-meta",i=t("<div>");h.attr("id",e);i.append(h,'<label for="'+e+'"></label>');h=i}if(m){let e=function e(){o==="NONE"?r.show():r.hide();b?u.show():u.hide()};let o,s=n.dateliteralmap[g],r,l,d,u,m=[],v=a.is("rendercondition")||a.is("action[type=updateRow]")||a.is("action > defaults > default");m.push({label:"Specific Date",value:"NONE"});t.each(n.dateliteralmap,function(e){if(v&&this.serverside===true)return;m.push({label:this.label,value:e})});if(s){o=g}else{o="NONE";b=""}r=h;l=Object(c["a"])(B).edit({value:o,onChange:function t(a){let l;if(a){s=n.dateliteralmap[a];if(s){o=a;if(s.merge){b="1";u.val(b);l=o+":"+b}else{l=o;b=""}}else{o="NONE";l="";b=""}}else{l="";o="NONE";b=""}if(r.is(".hasDatepicker")){r.datepicker("setDate","")}else{r.find(".hasDatepicker").datepicker("setDate","")}ve(p,{key:f,value:l});i.onChange&&i.onChange(l);e()},entries:m,required:true});u=Object(c["a"])(H).edit({value:b,onChange:function e(t){let n=l.val()+":"+t;ve(p,{key:f,value:n});i.onChange&&i.onChange(n)}});e();r.css({margin:"6px 0"});r.find(".nx-dt-timewrapper > select").wrap('<label class="nx-basicfieldeditor-item-select-label">');d=t('<label class="nx-basicfieldeditor-item-select-label">').append(l);h=t("<div>").append(d,r,u)}else{if(i.placeholder)h.children().attr("placeholder",i.placeholder)}return h}let Ge=[],Ye=function e(t,i){return t&&t.attr?t.attr(i):0};function Xe(){const t=[{value:"-",label:"Logic",disabled:true},{value:"branch",label:function e(t){let e=Ye(t,"label");return"Branch"+(e?": "+e:"")}},{value:"-",label:"",disabled:true},{value:"-",label:"Model Conditions / Querying",disabled:true},{value:"setCondition",label:function e(t){let i=Ye(t,"model"),n=Ye(t,"condition");return i?"Activate & Set Model Condition: "+i+(n?" > "+n:""):"Activate & Set value of Model Condition"}},{value:"activateCondition",label:function e(t){let i=Ye(t,"model"),n=Ye(t,"condition");return"Activate Model Condition"+(i?": "+i+(n?" > "+n:""):"")}},{value:"deactivateCondition",label:function e(t){let i=Ye(t,"model"),n=Ye(t,"condition");return"Deactivate Model Condition"+(i?": "+i+(n?" > "+n:""):"")}},{value:"deactivateFilterableConditions",label:function e(t){let i=t&&t.children?t.children("models").children():0;if(i&&i.length){if(i.length===1){return"Deactivate Filterable Conditions: "+i.first().text()}return"Deactivate Filterable Conditions: "+i.length+" Models"}return"Deactivate Filterable Model Conditions"}},{value:"requeryModel",label:function e(t){let i=Ye(t,"model");return"Query Model"+(i?": "+i:"")}},{value:"requeryModels",label:function e(t){let i=t&&t.children?t.children("models").children():0;if(i&&i.length){if(i.length===1){return"Query Model: "+i.first().text()}else{return"Query "+i.length+" Models"}}return"Query Models"}},{value:"searchModel",label:function e(t){let i=Ye(t,"model");return"Search Model"+(i?": "+i:"")}},{value:"sortModel",label:function e(t){let i=t&&t.attr("model");let n=t&&t.attr("field");let e="Sort Model";if(i){e+=": "+i;if(n){e+=" by "+n}}return e}},{value:"-",label:"",disabled:true},{value:"-",label:"Model data changes",disabled:true},{value:"createRow",label:function e(t){let i=Ye(t,"model");return(i?i+": ":"")+"Create new row(s)"}},{value:"updateRow",label:function e(t){const i=Ye(t,"fieldmodel");if(i){return i+": Update row(s)"}return"Update row(s)"}},{value:"markRowsForDeletion",label:"Mark row(s) for deletion"},{value:"unmarkRowsForDeletion",label:"Unmark row(s) for deletion"},{value:"unmarkAllRowsForDeletion",label:"Unmark all rows for deletion"},{value:"emptyModelData",label:function e(t){let i=t&&t.children?t.children("models").children():0;if(i&&i.length){if(i.length===1){return"Remove all rows in Model: "+i.first().text()}else{return"Remove all rows in "+i.length+" Models"}}return"Remove all rows from Model"}},{value:"abandonRows",label:function e(t){let i=Ye(t,"model");return"Remove row(s) from Model"+(i?": "+i:"")}},{value:"cancel",label:function e(t){let i=t&&t.children?t.children("models").children():0;if(i&&i.length){if(i.length===1){return"Cancel changes in Model: "+i.first().text()}else{return"Cancel changes in "+i.length+" Models"}}return"Cancel Model changes"}},{value:"save",label:function e(t){let i=t&&t.children?t.children("models").children():0;if(i&&i.length){if(i.length===1){return"Save changes in Model: "+i.first().text()}else{return"Save changes in "+i.length+" Models"}}return"Save Model changes"}},{value:"adoptRows",label:function e(t){let i=Ye(t,"sourcemodel"),n=Ye(t,"targetmodel");return"Adopt rows into "+(n&&i?n+" from "+i:"Model")}},{value:"-",label:"",disabled:true},{value:"-",label:"Data Source Specific Actions",disabled:true},{value:"datasource-action",label:function e(t){let i=Ye(t,"datasource");if(i)return"Run "+i+" Action";return"Run Data Source Action"}}];if(e.platform.getActions&&e.platform.getActions().length){t.push({value:"-",label:"",disabled:true},{value:"-",label:"Platform Actions",disabled:true},{value:G,label:function t(i){const n=Ye(i,G);let o="Run Platform Action";if(n&&e.platform.getActions){let t=e.platform.getActions().find(e=>{return e.name===n});if(t){o+=": "+t.label}}return o}})}t.push({value:"-",label:"",disabled:true},{value:"-",label:"Advanced",disabled:true},{value:"action-sequence",label:function e(t){return n.actionSequences.getLabelForActionSequenceAction(t)}},{value:"custom",label:function e(t){let i=Ye(t,"snippet");return i?"Run Snippet: "+i:"Run a Skuid JavaScript Snippet"}},{value:"publish",label:function t(i){let n=Ye(i,"event");let o=e.events.get(n);if(n){return"Publish: "+(o?o.getLabel():n)}else{return"Publish Event"}}});return t}function Ke(e){t.each(e,function(){Ge.push(this)})}function $e(){let t=Ge;t=t.concat(e.offline.addActions());t=t.concat(n.native.addActions());return t}function Qe(e,i){let n,o=$e(),a=e.attr("type"),s=function i(n){let o;if(n){t.each(n,function(t,i){if(i.value===a){if(typeof i.label==="function"){o=i.label(e)}else{o=i.label}return false}})}return o};n=s(o)||s(i);return n||a}function Je(e){let i=e.attr("location"),n={};if(i==="external"){t.extend(n,{prefix:"(External)",name:e.attr("name")||e.attr("url")})}else{n.name=e.attr("name");n.prefix="(";if(i==="inlinesnippet"){n.prefix+="Snippet"}else if(i==="inlinecomponent"){n.prefix+="Component"}else if(i==="inline"){n.prefix+="Inline"}else if(i==="staticresource"){n.prefix+="Static Resource"}else if(i==="displaymethod"){n.prefix+="Display Method"}n.prefix+=")"}return n}function Ze(e){let i=e.attr("location"),n={};if(i==="external"){t.extend(n,{prefix:"(External)",name:e.attr("name")||e.attr("url")})}else{n.name=e.attr("name");n.prefix="(";if(i==="inline"){n.prefix+="Inline"}else if(i==="staticresource"){n.prefix+="Static Resource"}n.prefix+=")"}return n}function et(e){let t,i=e.attr("filterOffOptionLabel"),n=e.attr("conditionField");switch(e.attr("type")){case"multiselect":case"select":if(e.attr("conditionSource")==="auto"){if(!n){t="(No field selected)"}else{if(i){t=i}else{t=n}}}else{t=(e.attr("createfilteroffoption")==="true"&&i?i:"Filter")+(e.attr("condition")?" - "+e.attr("condition"):"")}return t;case"toggle":return e.attr("label")||"Filter";case"daterange":case"numericrange":t="Range: ";if(e.attr("conditionSource")==="auto"){if(!n){t+="(No field selected)"}else{i=i!=="New Filter"?i:"";t=i?i:t+n}}else{if(e.attr("startConditionName")&&e.attr("endConditionName")){t+=e.attr("startConditionName")+" <-> "+e.attr("endConditionName")}}return t}}function tt(e){let t,i=e.attr("action");let n=e.closest("source");if(i==="set"){const i=(e.attr("condition")||"[No Condition]")+" --\x3e ";if(n.length&&n.attr("type")==="metadata"){t=i+"[Selected Option]"}else{t=i+e.attr("value")}}else{t=(i==="activate"?"Activate ":"Deactivate ")+(e.attr("condition")||"[No Condition]")}return t}let it=false;e.events.subscribe("skuidBuilderNeedSave",function(){it=true});e.events.subscribe("skuidBuilderComponentNeedsRefresh",function(e){y[e._GUID]=e});let nt=function e(i){let n=Object(p["j"])(),o=i&&i.type;if(n){t.each(M.getComponentsList(),function(e,t){let n=t.builder,o;if(n){o=n.handleStateEvent;o&&o(t.get("xmlState"),i,t)}});Ve(n,i);if(it){it=false;b(W)}}if(o){b("__skuid.builder."+o,[i])}};let ot,at=function e(){if(ot&&ot.get("xmlState")){let e=Object(u["j"])(ot.get("xmlState").attr("id"));if(e&&e.length){return ot}}ot=null;return ot},st=function e(t){ot=t};let rt=function i(n){e.events.publish("builder.codeEditorOpened");let a=n.state,s=n.property,r=n.syntax,l=n.onChange,d=n.onClose,c=n.readonly===true,u=n.actionItems,p=s&&s.type==="formula",f=ge(a,s),h=t("<div>"),m,g;const b=n.codeComponent=e.component.createFromDefinition({componentType:"skuid__code",format:r||"text",contents:It(f),minHeight:"500px",mode:c===true?"readonly":"edit"},{element:h});b.subscribeChange("value",o.debounce(e=>{be(a,s||{},e);l&&l(e)},500));h.dialog({appendTo:e.builder.pagebuilderui,width:n.width||"80%",height:"auto",minHeight:600,title:n.title||(c===true?"View":"Edit")+" "+(p?"Formula":"Inline Code"),resizable:true,modal:true,closeText:"",close:function t(){let i=b.getCPI().getValue();h.dialog("destroy");h.remove();d&&d(i);b.unregister();e.events.publish("builder.codeEditorClosed")}});t(".ui-dialog").addClass("sk-dialog-codeeditor");t(".ui-widget-overlay").addClass("sk-overlay-codeeditor");if(u&&u.length){m=h.siblings(".ui-dialog-titlebar");g=t("<div>").addClass("ui-dialog-titlebar-actionswrapper").css({position:"absolute",top:0,right:m.find(".ui-dialog-titlebar-close").outerWidth()}).appendTo(m);t.each(u,function(e,i){let n=i.text,o=i.icon,a=i.action,s=i.tooltip,r=i.element=t("<div>").addClass("nx-pagebuilder-component-actionitem").append(t("<div>").addClass("nx-pagebuilder-component-actionicon sk-icon "+o)).appendTo(g);if(n){t("<div>").addClass("nx-pagebuilder-component-actiontext").text(n).appendTo(r)}r.append(t("<div>").addClass("nx-pagebuilder-component-actionspacer"));if(s){r.skootip(s)}r.click(function(e){a&&a();e.stopPropagation()})})}if(p){let e=s.modelName;if(!e&&s.modelProp){e=a.attr(s.modelProp)}let t=s.fieldName||(a.is("field")?a.prop("id"):null);const i=T({fieldName:t,insertAtCursor:e=>b.getCPI().insertValue(e),modelName:e,onChange:l,showModelFieldSelector:!!e});const n=A();h.prepend(i,n)}};function lt(e){let i;t.each(M.getComponentsList(),function(){const{xmlState:t,_builder:n}=this.getState(),o=n&&n.isInPropertiesPane;if(n&&!o&&e[0]&&t&&t[0]&&t[0]===e[0]){i=this;return false}i=false});return i}function dt(e){let i;t.each(M.getComponentsList(),function(){const t=this.get("xmlState"),n=this.builder&&this.builder.id;if(n&&e[0]&&t&&t[0]&&t[0]===e[0]){i=this;return false}i=false});return i}function ct(){const i={},n={},s={},r=[],l=a.builder.getAvailableComponentPacks();if(l){t.map(JSON.parse(JSON.stringify(l)),e=>e).sort((e,t)=>e.orderIndex-t.orderIndex).forEach(({components:t,errors:a,folders:l,id:d})=>{if(t&&t.length){t.forEach(e=>{const t=d+"__"+e.id;let a=t.split("__"),s;if(fe(t)){s=t}else{a.shift();s=a.join("__")}e.builder=fe(s);if(!e.builder)return;if(e.builder.platforms&&!o.inPlatform(e.builder.platforms))return;if(e.folderId){if(e.folderId in i){}else{i[e.folderId]={}}i[e.folderId][t]=e}else{n[d+"__"+e.id]=e}})}if(l&&l.length){l.forEach(e=>{e.components=i[e.id];s[d+"__"+e.id]=e;r.push(e)})}if(a&&a.length){e.component.getByType("skuid__page")[0].addProblems(a)}})}return{activeFolders:s,activeFoldersList:r,noFolderComponents:n}}function ut(e,i){if(!e||!i)return false;let n=e.emitsComponentAspects,o=i.acceptsComponentAspects,a=i.rejectsComponentAspects;let s=e.rejectByDefault?false:true;if(o&&o.length){if(n&&n.length){s=false;t.each(o,function(e,t){if(n.indexOf(t)!==-1){s=true;return false}})}else{return false}}if(s&&a&&a.length){if(n&&n.length){t.each(a,function(e,t){if(n.indexOf(t)!==-1){s=false;return false}})}}return s}function pt(e){let t=e.component,i=e.refreshComponent===true,n=e.labelOnChange,o=e.labelid||"label",a=e.labelName||"Label",s=e.iconOnChange,r=e.iconid||"icon",l=e.iconName||"Icon";return[{id:o,type:"string",label:a,onChange:function e(o,a){if(i===true)t.refresh();n&&n(o,a)}},{id:r,type:"icon",label:l,onChange:function e(n){if(i===true)t.refresh();s&&s(n)}}]}function ft(){let e=[],t=Object(p["f"])();if(t&&t.length){t.children("components").find("pageregion").each(function(){e.push(this)})}n.getPageXML().children("components").find("pageregion").each(function(){e.push(this)});return e}function ht(e){if(!e)return false;let t=e.indexOf("(");let i=e.indexOf(")");if(!t&&i)return false;let n=e.substring(t+1,i).trim();return n.split(",")}function mt(e){let t=e.css("background-color"),i,n;if(t&&t!=="rgba(0, 0, 0, 0)"&&t!=="transparent"){i=ht(t);n=i[3];if(i&&n&&parseFloat(n)<.2){}else{return t}}if(e&&e.length&&e[0]!==document.body){return mt(e.parent())}else{return false}}function gt(e){let t=ht(e);if(!t)return false;return(t[0]*299+t[1]*587+t[2]*114)/1e3}function bt(e){if(!e)e={};let t=h("<conditions/>"),i,n=e.isMultiRow===true,o=e.state;if(n===true)i=h('<condition type="contextrows" field="Id" mergefield="Id" operator="in" autocreated="true"/>');else i=h('<condition type="contextrow" field="Id" mergefield="Id" autocreated="true"/>');t.append(i);if(o)o.append(t);return t}function vt(e){return e.replace(/__.$/g,"").replace(/^.+__/g,"").replace("_"," ")}function yt(){return o.getLayoutFields()}function Ct(e,t={}){if(!e.get("enableBuilderCanvasMode"))return;return{"data-builder-nointeract":t.noInteract===false?undefined:"true","data-builder-prophint":t.propHint}}function _t(e){let i="",n=/(>)(<)(\/*)/g,o=0;e=e.replace(n,"$1\r\n$2$3");t.each(e.split("\r\n"),function(e,t){let n=0,a="",s=0;if(t.match(/.+<\/\w[^>]*>$/)){n=0}else if(t.match(/^<\/\w/)){if(o!==0){o-=1}}else if(t.match(/^<\w[^>]*[^\/]>.*$/)){n=1}else{n=0}for(;s<o;s++){a+="\t"}i+=a+t+"\r\n";o+=n});return i}let wt,xt;const kt=(t,i)=>{if(typeof i!=="object")return;if(!xt||wt!==t){const{ThemeSettings:n}=e.themeSettings;let o=wt;wt=t;xt=i instanceof n?i:new n(i);if(o){e.events.publish("skuid.builder.themeChanged")}}};const St=(t=false)=>{return t||e.platform.hasFeature("PageComposerStaging")?xt:null};const It=(e="")=>{if(e.indexOf("{{")>-1){const t="{{$CurlyOpen}}";const i="{{$CurlyClose}}";const n=t.length;const o=i.length;let a=0;while(a<e.length){if(e[a]==="{"){e=e.substring(0,a)+t+e.substring(a+1);a+=n}else if(e[a]==="}"){e=e.substring(0,a)+i+e.substring(a+1);a+=o}else{a++}}}return e};function Tt(e,t,i){const n=Array.from(t[0].children).indexOf(e[0]);if(n>-1&&i>n)i--;e.remove();if(i===0)t.prepend(e);else if(i>=t.children().length)t.append(e);else e.insertBefore(t.children().eq(i))}i.componentRegistry=M,t.extend(n,{Builder:r["a"],createSpooferLight:d,SpooferLight:l,getBuilder:fe,getBuilderByTagName:he,getBuilders:me,getLayoutFields:yt,registerBuilder:ce,registerBuilders:pe,unregisterBuilder:ue,escapeMergeSyntax:It,defaultJavaScriptResourceNames:ee,defaultJavaScriptResourceBodies:Z,componentsNeedingRefresh:y,getStoredValue:ge,updateState:ve,getStateProperty:ge,updateStateProperty:be,getFieldInfoFromCache:u["g"],getConditionDisplayString:Ae,getModelFieldComponentLabel:re,save:Ce,userinfomap:Ie,operatormap:Se,dateliteralmap:Te,getValidOperators:ze,determineQuotedness:Pe,getMetadataForField:u["i"],isValidFieldForPossibleTargetObjects:u["n"],isDistanceQueryable:qe,getConditionByName:p["c"],isFilterableCondition:p["n"],getDomProperties:Ct,getDefaultAliasName:se,getPageSettings:Me,updatePageSettings:De,createComponentFromModel:Ee,createModel:Le,createModelSettingsService:Ne,createComponentSettingsService:Fe,formatXML:_t,getPageXML:p["j"],getMasterPageXML:p["f"],getPageSnippets:p["i"],getMasterPageSnippets:p["e"],getSnippets:p["l"],getSnippetNames:p["k"],isInMasterPage:Oe,getPageRegions:ft,getAllModelsInPage:p["a"],getPageModels:p["h"],getPageRow:Re,getFirstModel:p["d"],getModelFromModelName:u["j"],getDataSourceTypeFromModelName:u["e"],getDataSourceTypeFromModel:u["d"],getDataSourceFromModel:u["b"],getDataSourceFromModelName:u["c"],getModelPathToContent:p["g"],getSObjectForField:u["l"],getSObjectNameFromModelName:u["m"],getUniqueModelName:oe,getUniqueFieldName:ae,isFieldInModel:p["m"],addFieldToModel:Be,getLastSelectedModelComponent:at,setLastSelectedModelComponent:st,createBreadcrumbForModel:m,prettyPrintAPIName:vt,publishStateEvent:nt,handleModelRemove:je,handleModelIdChange:Ue,getCanvasComponentFromState:lt,getComponentFromState:dt,getAvailableComponentsWithFolders:ct,getAttrFromClosestParentComponent:p["b"],doesParentAcceptComponent:ut,showCodeEditor:rt,getValueEditorFromMetadata:We,conditionDescriptionRenderers:He,getCoreActionOptions:Xe,getValidActionOptions:$e,addValidActionOptions:Ke,getActionLabel:Qe,getJSItemLabel:Je,getCSSItemLabel:Ze,getFilterItemLabel:et,getEffectItemLabel:tt,getIconLabelProps:pt,getClosestBackground:mt,getColorLightness:gt,getDefaultConditions:bt,setActiveThemeSettings:kt,getActiveThemeSettings:St,moveXmlToIndex:Tt})})(e);(function(e){let t={init:function t(i){return this.each(function(){let t=e(this),n=i.axis,o=i.parentStateSelector,a=i.grandparentStateSelector,s=i.component,r=i.items,l,d=i.placeholder,c=i.connectWith,u=i.containment;if(r)l=r.substr(2);if(!s){}else{t.sortable({items:r?r:"> *",placeholder:d?d:false,axis:n,opacity:.75,delay:200,handle:i.handle,tolerance:"pointer",revert:200,connectWith:c?c:false,containment:u?u:false,start:function e(t,i){if(r=="> *"){i.item.startingIndex=i.item.index()}else{i.item.startingIndex=i.item.parent().children(l).index(i.item)}let n=i.item.parent().closest(".nx-pagebuilder-component"),o=n.parent().children(".nx-pagebuilder-component");i.item.parentStartingIndex=o.index(n)},stop:function e(t,n){let d=n.item.startingIndex,c=r=="> *"?n.item.index():n.item.parent().children(l).index(n.item),u,p,f,h=n.item.parentStartingIndex,m=n.item.parent().closest(".nx-pagebuilder-component"),g=m.parent().children(".nx-pagebuilder-component"),b=g.index(m);if(h!=b){let e=s.get("xmlState").find(a).eq(h).children(o).first(),t=s.get("xmlState").find(a).eq(b).children(o).first();p=e.children().eq(d);p.detach();f=t.children().length;if(c<f){p.insertBefore(t.children().eq(c))}else if(c>=f){p.appendTo(t)}}else{if(!o){u=s.get("xmlState")}else if(o&&a){u=s.get("xmlState").find(a).eq(b).children(o).first()}else{u=s.get("xmlState").find(o).first()}p=u.children().eq(d);p.detach();f=u.children().length;if(c<f){p.insertBefore(u.children().eq(c))}else if(c>=f){p.appendTo(u)}}s.save();i.onSort&&i.onSort(n.item)}})}})}};e.fn.sortableComponent=function(i){if(t[i]){return t[i].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof i==="object"||!i){return t.init.apply(this,arguments)}else{e.error("Method "+i+" does not exist on the sortableComponent plugin")}}})(e.$);(function(e){let t=e.$,i=t.each,n=e.lib.Mustache,o=e.builder.core,a=e.utils,s=o.getAllModelsInPage,r=o.getPageXML,l=o.getStoredValue,d={},u,p,f={},h=o.updateState,m=e.constants.DISPLAY_TYPES,g=m.PICKLIST,b=m.BOOLEAN,v=m.MULTIPICKLIST,y=m.COMBOBOX,C=m.TEXT,_="node",w="attribute";function x(t){let n=t||r().attr("theme")||e.settings.designSystem("default"),o,s,l,d,c,u=e.components.config.skuid__pageBuilder.themes;if(!u)return e.utils.resolve();if(n){i(u,function(e,t){if(t.name===n){c=t;return false}});if(c){if(c.resourceName){l=c.resourceNamespace;s=c.resourceName}else{l=null;s=c.name}}}else{d=e.page.runtimeThemeResource.split("__");if(d.length===2){l=d[0];s=d[1]}else{l=null;s=d[0]}}if(s){o=e.platform.themeBuilder.getThemeResourceUrl({name:s,namespace:l,modstamp:(new Date).getTime()})}if(o){let t={Name:s,NamespacePrefix:l},i=(l?l+"__":"")+s,n=f[i],r;if(n){return a.resolve(n)}r=["skuid_theme.json","resources.json"].map(i=>{return e.platform.themeBuilder.getResource(t,i)});return Promise.all(r).then(e=>{let t=a.parseAsJSONIfString,n={url:o,"skuid_theme.json":t(e[0]),"resources.json":t(e[1])};f[i]=n;return n})}return e.utils.resolve()}let k={};function S(n){let o=e.constants.WEB_ICON_SET_PREFIXES.indexOf(p)>-1;n.empty();function s(a){a=a.sort(function(e,t){let i=e.split(":")[1]||e.substr(p.length+1),n=t.split(":")[1]||t.substr(p.length+1);if(i<n){return-1}if(i>n){return 1}return 0});i(a,function(i,a){let s=a.split(":")[1]||a.substr(p.length+1),r=(o?"sk-webicon-":"")+a,l=t(e.ui.createIcon(r)).addClass("nx-picker-icon").attr({handle:r});t('<div class="nx-picker-icon-wrapper">').attr("title",s).append(l).appendTo(n)});n.skootip()}if(o){if(!k[p]){const i=e.ui.preloadIconSetDependencies(p)||a.resolve();const n=e=>t("#icons-svg-".concat(e,"-v2"));i.then(function(){k[p]=n(p).find("symbol").map(function(){return a.makeXMLDoc(this.outerHTML).attr("id")});s(k[p])});e.constants.WEB_ICON_SET_PREFIXES.forEach(t=>{if(!k[t]&&t!==p){const i=e.ui.preloadIconSetDependencies(t)||a.resolve();i.then(function(){k[t]=n(t).find("symbol").map(function(){return a.makeXMLDoc(this.outerHTML).attr("id")})})}})}else{s(k[p])}}else if(d&&d[p]){s(Object.keys(d[p].icons))}}function I(n,o,s){n.addClass("nx-picker-wrapper").appendTo("body");let r=t('<div class="nx-picker-body">'),l=t('<div class="nx-picker-filter-input-icon sk-icon sk-icon-cancel">').skootip("Clear Filter Text").hide(),c=t('<div class="nx-picker-filter-input-icon sk-icon sk-icon-search">').css({cursor:"default","pointer-events":"none"}),u=t('<select class="nx-picker-header-category-select">'),f=t('<label class="nx-picker-header-category-select-label">All Icon Sets</label>'),h=t('<div class="nx-picker-header-category-select-wrapper">'),m=a.generateUniqueId(),g=t('<div class="nx-picker-header">'),b=t('<input type="text" class="nx-picker-filter-input" placeholder="Search">'),v=t('<div class="nx-picker-filter-input-wrapper">'),y=t('<div class="nx-picker-header-category-wrapper">');let C='<div style="margin: 8px 20px; padding: 1.25rem 1.25rem 0.5rem; border-radius: 0.25rem; color: #004085; background-color: #cce5ff; border: solid 1px #b8daff;"><h1 style="font-size: 125%">Use of the Salesforce Lightning Design System icons requires proper attribution in your app.</h1><p>Here is an example of proper attribution:</p><div style="border: dashed 1px #b8daff;padding: 8px 16px; background: #f0f0f0;"><strong>Salesforce <a href="https://www.lightningdesignsystem.com/icons/" target="_blank">Lightning Design System</a> icons are used with permission under the <a href="http://creativecommons.org/licenses/by-nd/4.0" target="_blank">Creative Commons Attribution-NoDerivatives 4.0</a> license.</strong></div><p>Copy it (including the links) into a visible page in your app such as on a Help or About page.</p></div>';u.attr("id",m);f.attr("for",m);h.append(f,u);g.append(y,h,v.append(b,l,c));n.append(g,r);i(e.constants.WEB_ICON_SET_PREFIXES,function(t,i){u.append('<option value="'+i+'">'+e.constants.WEB_ICON_SET_LABELS[i]+"</option>");if(!d[i]){d[i]={}}});function _(e){p=e;u.val(e);y.find(".nx-picker-selected").removeClass("nx-picker-selected");t.each(y.children(),function(i,n){let o=t(n);if(o.data("prefix")===e){o.addClass("nx-picker-selected")}});S(r);if(e==="lightning-icons"){r.prepend(C)}b.val("")}y.on("click",".nx-picker-header-category",function(){_(t(this).data("prefix"))});u.on("change",function(){_(this.value)});a.delayInputCallback(b,function(e){let t=r.parent();e=e.toLowerCase();r.detach();if(e===""){r.find(".nx-picker-icon-wrapper").css("display","");l.hide();c.show()}else{l.show();c.hide();r.find(".nx-picker-icon-wrapper").not('[title*="'+e+'"]').css("display","none");r.find('.nx-picker-icon-wrapper[title*="'+e+'"]').css("display","")}r.appendTo(t)});l.click(function(){b.val("").change()});r.on("click",".nx-picker-icon-wrapper",function(){let e=t(this).children(".sk-webicon, .sk-icon").first(),i=e.attr("handle");o.val(e.attr("handle")).change();if(e.attr("handle")){s.attr("icon",i)}else{s.addClass("nx-picker-icon "+p+" inline "+p+"-"+i)}n.dialog("close")});function w(n){let o=n["skuid_theme.json"],a,s;d=o.iconsets||{};a=Object.keys(d).concat(o.iconsetsSVG||[]);s=function t(i){return o.iconsets[i]&&o.iconsets[i].label?o.iconsets[i].label:e.constants.WEB_ICON_SET_LABELS[i]||i};p=a[0]||e.constants.WEB_ICON_SET_PREFIXES[0];if(a){i(a,function(e,i){let n=t('<div class="nx-picker-header-category">').text(s(i));n.data("category",i);if(p===i){n.addClass("nx-picker-selected")}n.data("prefix",i);y.append(n);if(!d[i]){d[i]={}}});for(let e=a.length-1;e>=0;e--){let t=a[e];u.children('option[value="'+t+'"]').remove();u.prepend('<option value="'+t+'">'+s(t)+"</otion>")}p&&u.val(p)}S(r)}x().then(w)}function T(e){let i=e.parent();let n=i.find(".nx-property-error");if(!n.length){n=t("<div>").addClass("nx-property-error").css("margin-top","8px").insertAfter(e);i.css("display","block")}return n}function A(e,n){let a=[],r=e.entryFilter,l,d=e.type=="multipicklist",c=e.id,u,p=[],f=e.storeAs,h;if(!d||f&&f.type!=="node"){h=n.attr(c);l=h&&h!="undefined";if(l)p.push(h)}else{u=n.children(c);h="";l=u.length;if(l){if(f&&f.type==="node"){i(u.children(f.name),function(){p.push(t(this).text())});h=p.join(",")}}}s().children().each(function(){let e=t(this),i=e.attr("id");if(typeof r==="function"&&!r(e))return true;a.push({value:i,label:i})});let m=o.actionSequences;let g=m.getActionSequenceFromChildAction(n);if(g){let e=m.getModelInputsFromActionSequenceXML(g);t.each(e,function(e,t){let i=t.attr("name");a.push({value:m.addInputMerge(i),label:i+" (input)"})})}return a}function E(e,i){let n=[],a=e.modelName||(e.modelProp?i.attr(e.modelProp):null),s=o.getDataSourceTypeFromModelName(a),r=o.getModelFromModelName(a),l=e.filter,d={};if(!r.length){let e=o.actionSequences;let t=e.getActionSequenceFromChildAction(i);if(t){r=e.getModelXMLForPickerOfInputModel(t,a)}}if(r.length){if(l&&Array.isArray(l)){l=function i(n,o){return o&&t.inArray(o.displaytype,e.filter)>-1}}r.find("> fields > field").each(function(){let e=t(this).attr("name")||t(this).attr("id"),i,a=s&&s.isRelationshipField&&s.isRelationshipField(e);if(!a){i=o.getFieldInfoFromCache(r,e);if(!l||l(e,i)){d[e]=i&&i.label||e;n.push(e)}}});n.sort();return t.map(n,function(e){return{value:e,label:d[e]}})}else{return[]}}function M(){let e;s().children().each(function(){let i=t(this);e=i.attr("id");return-1});return e}u={readonly:function e(i){return t('<div class="nx-fieldtext">').text(i===undefined?"":i).addClass("nx-pagebuilder-readonly-text")},datasource:function i(n,o){let a=n.id,s=n.isStateless===true,r=s===false?o.attr(a):n.value||n.valueFunction&&n.valueFunction(),l=r&&typeof r!=="undefined",d=n.filter,p=e.dataSource.list(),f=(d?p.filter(d):p).map(function(e){let t=e.name,i=e.getDataSourceTypeName();return{label:"".concat(t," (").concat(i,")"),value:t}}).sort(function(e,t){return e.label.toLowerCase()<t.label.toLowerCase()?-1:1}),m=n.required===false?false:true;if(n.noneOption){f.unshift(n.noneOption)}if(m&&!l&&f.length){r=n.defaultValue||f[0].value;l=r&&typeof r!=="undefined";if(r&&l&&!s){h(o,{key:a,value:r})}else if(s&&r&&l){n.onChange&&n.onChange(r)}}if(n.readonly){return u.readonly(r)}let b=Object(c["a"])(g).edit({value:r,entries:f,required:m,onChange:function e(t,i){if(!s){h(o,{key:a,value:t})}n.onChange&&n.onChange(t,false,i)}});let v=t('<label class="nx-basicfieldeditor-item-select-label">').append(b);return v},models:function e(t,i,n){t.type="multipicklist";if(!t.storeAs){t.storeAs={type:"node",name:"model"}}if(!t.location)t.location="node";if(!t.noneSelectedText)t.noneSelectedText="Select Models...";t.picklistEntries=A(t,i);return u.multipicklist(t,i,n)},model:function e(i,n){let o=i.id,a=i.isStateless===true,s=a===false?n.attr(o):i.value||i.valueFunction&&i.valueFunction(),r=s&&typeof s!=="undefined",l=A(i,n),d=i.required===false?false:true;if(i.noneOption){l.unshift(i.noneOption)}if(d&&!r&&l.length){s=i.defaultValue||l[0].value;r=s&&typeof s!=="undefined";if(s&&r&&!a){h(n,{key:o,value:s})}else if(a&&s&&r){i.onChange&&i.onChange(s)}}if(i.readonly){return u.readonly(s)}let p=Object(c["a"])(g).edit({value:s,entries:l,required:d,onChange:function e(t,s){if(!a){h(n,{key:o,value:t})}i.onChange&&i.onChange(t,false,s)}});let f=t('<label class="nx-basicfieldeditor-item-select-label">').append(p);return f},attributesNode:function e(t,i){let n=t.id,o=i.children(n),a=o.attr()||{},s=t.onChange;delete t.id;t.value=a[t.name];t.onChange=function(e){h(i,{childNodeName:n,key:t.name,value:e});if(s){s.apply(arguments)}};return u.standard(t,i)},multifield:function e(t,i,n){t.type="multipicklist";if(!t.storeAs){t.storeAs={type:"node",name:"field"}}if(!t.location)t.location="node";if(t.location==="attribute"){t.valueDelimiter="::"}if(!t.noneSelectedText)t.noneSelectedText="Select Field(s)...";t.picklistEntries=E(t,i);return u.multipicklist(t,i,n)},boolean:function e(i,n){let o=i.id,s,r,l=i.isStateless===true;if(l===true){s=i.value||i.valueFunction&&i.valueFunction()||i.defaultValue}else if(n.attr(o)==="true"){s=true}else if(n.attr(o)){s=false}else{s=i.defaultValue||false}r=Object(c["a"])(b).edit({value:s,onChange:function e(t){let a=i.beforeChange?i.beforeChange(t):null;if(a===false){r.val(!r.val())}else{if(!l){h(n,{key:o,value:t})}i.onChange&&i.onChange(t)}}});if(i.readonly)r.prop("disabled",true);let d=a.generateGUID();let u="sk-builder-check-"+d;r.attr("id",u);let p=t("<div>");p.append(r,'<label for="'+u+'"></label>');return p},condition:function e(i,n){let r=i.id,l=i.isStateless===true,d=l===false?n.attr(r):i.value||i.valueFunction&&i.valueFunction(),p=i.filter,f,m=o.actionSequences;if(i.modelName){let e=s().children('[id="'+i.modelName+'"]'),o;if(!e.length){let t=m.getActionSequenceFromChildAction(n);if(t){e=m.getModelXMLForPickerOfInputModel(t,i.modelName)}}o=e.children("conditions, havings").find("[name]");f=o.map(function(){let e=t(this),i=e.attr("name"),n=m.removeInputMerge(i);if(!a.startsWith(i,"__autofilter__")&&(!p||p(e))){return{value:i,label:n}}})}if(i.readonly){return u.readonly(d)}let b=Object(c["a"])(g).edit({value:d,entries:f,onChange:function e(t){let o=n.attr(r);if(!l){h(n,{key:r,value:t})}i.onChange&&i.onChange(t,o)},noneLabel:"--None--"});let v=t('<label class="nx-basicfieldeditor-item-select-label">').append(b);return v},picklist:function e(n,o){let s=n.type=="multipicklist",r=n.id,d=n.storeAs,p=n.options||n.entries||n.picklistEntries,f=n.valueDelimiter||",",m,b,y=[],C=n.isStateless===true;if(!p||Array.isArray(p)&&p.length===0){return u.standard(n,o)}function _(e){let t;if(s&&d&&d.type==="node"){t={childNodeName:r,storeAs:d,value:e?e.split(","):[]};y=t.value}else{t={key:r,value:e||""}}if(!C)h(o,t);b=true;m=e}function w(e){let t=l(o,n);if(n.beforeChange)n.beforeChange(e,t);_(e);n.onChange&&n.onChange(e,t)}function x(e){if(s){return Object(c["a"])(v).edit({value:m,entries:e,maxSelected:n.maxSelected,noneSelectedText:n.noneSelectedText,valueDelimiter:f,selectedList:4,onChange:function e(t,i){w(t,i)}})}else{let i=Object(c["a"])(g).edit({value:m,entries:e,defaultValue:n.defaultValue,required:n.required!==false,onChange:function e(t,i){w(t,i)}});let o=t('<label class="nx-basicfieldeditor-item-select-label">').append(i);return o}}function k(e){let t=e.filter(function(e){if(!e.value&&!m)return true;return e.value===m});let i=t.length&&t[0].label?t[0].label:m;return u.readonly(i)}function S(e){if(n.readonly||n.writeOnce===true&&m!==undefined){return k(e)}else{return x(e)}}if(C===true){m=n.value||n.valueFunction&&n.valueFunction()||n.defaultValue;b=m&&typeof m!=="undefined"}else if(!s||!d||d.type!=="node"){m=o.attr(r);b=m&&typeof m!=="undefined"}else{let e=o.children(r);m="";b=e.length;if(b){if(d&&d.type==="node"){i(e.children(d.name),function(){y.push(t(this).text())});m=y.join(f)}}}const I="defaultValue"in n;const T=n.picklistEntries&&n.picklistEntries.length;if(!s&&!b&&(I||T)){if(I){_(n.defaultValue)}else if(T){if(n.required!==false){const e=n.picklistEntries[0].value;if(e!==""&&typeof e!=="undefined"){_(e)}}}}if(s&&I&&!b){_(n.defaultValue)}if(a.isFunction(p)){p=p()}if(a.isPromise(p)){return p.then(e=>S(e))}return S(p)},filepath:function n(o,s){let r,l,d=o.id,u=o.isStateless===true,p=u===false?s.attr(d):o.value||o.valueFunction&&o.valueFunction(),f,m,g=function t(){let n;r=o.getResourceName();l=o.getResourceNamespace();if(!r){m=false;return a.reject()}else if(m&&m.length>=0){return a.resolve(m)}n=e.platform.getSiteResourceUrl({name:r,namespace:l,path:undefined,modstamp:(new Date).getTime()});return a.loadJS(e.platform.getResourceUrl({ns:"skuid",path:"js/lib/jSZip.js"})).then(function(){let t=a.Deferred();e.lib.JSZipUtils.getBinaryContent(n,function(n,o){if(n)t.reject(n);let s;try{s=new e.lib.JSZip(o);m=[];if(s.files){i(s.files,function(e,t){if((!t.options||!t.options.dir)&&!a.startsWith(e,".")&&!a.contains(e,"/.")){m.push(e)}})}t.resolve(m)}catch(e){t.reject(e)}});return t.promise()})};if(o.readonly){f=t("<div>").addClass("nx-fieldtext").text(p||"").css("margin-top","6px")}else{f=t("<div>");let e=Object(c["a"])("AUTOCOMPLETE").edit({source:function e(t,i,n,o){n();g().then(function(e){o();i(e.filter(function(e){return e.toLowerCase().indexOf(t.term.toLowerCase())!==-1}))},function(){o();i([])})},onChange:function e(t,i){let n=i.item.value;if(!u){h(s,{key:d,value:n})}o.onChange&&o.onChange(n)},value:p,parentElem:f});f.append(e)}return f},entity:function t(i,n){let o=i.id,a=i.isStateless===true,s=a===false?n.attr(o):i.value||i.valueFunction&&i.valueFunction(),r=function e(){if(i.readonly===false)return false;else return s||i.readonly},l=i.invalidEntryMessage;if(!l&&i.type==="sobject"){l="Please select a valid SObject."}return Object(c["a"])("ENTITY").edit({value:s,filter:i.filter,dataSource:function t(){return e.dataSource.get(i.dataSourceName||e.platform.getDefaultDataSourceName())},invalidEntryMessage:l,readOnly:r(),showLabelInTextInput:i.showLabelInTextInput,onChange:function t(s,r){if(!a){h(n,{key:o,value:s})}const l=i.onChange&&(()=>{i.onChange(s,r)});const d=e.dataSource.get(i.dataSourceName||e.platform.getDefaultDataSourceName());if(d.getCachedEntityMetadata(s)||!l){l&&l()}else{d.getEntityMetadata({entities:[s],ignoreMetadataOverrides:true}).then(l,l)}}})},autocomplete:function o(s,r){let l=t("<div>").addClass("nx-field"),d=s.id,p=s.sobject,f=s.order,m=s.onChange,g=s.dataSource||e.dataSource.get(e.platform.getDefaultDataSourceName()),b,v=s.fieldsToSearch||["Name"],y=s.fieldsToReturn||["Name"],C=s.displayTemplate||"{{Name}}",_=s.valueTemplates||{},w={},x,k=s.filter,S=d&&r.attr(d)||s.valueFunction&&s.valueFunction(),I=s.isStateless===true;if(!(d in _)){_[d]="{{Name}}"}b=s.readonly?u.readonly(a.decodeHTML(S||"")):Object(c["a"])("AUTOCOMPLETE").edit({minLength:2,value:a.decodeHTML(S),source:s.source||function(t,n,o,a){if(t.term in w){n(w[t.term]);return}x=t.term.split(" ");let s=1,r=[],l={dataSource:g,fields:[{id:"Id"}],conditions:[],objectName:p,doQuery:true},d;i(y,function(e,t){if(t.toLowerCase()!="Id"){l.fields.push({id:t})}});f&&(l.orderByClause=f);i(v,function(e,t){i(x,function(e,i){l.conditions.push({field:t,operator:"LIKE",value:"%"+i+"%"})})});for(;s<=l.conditions.length;s++){r.push(""+s)}l.conditionLogic=r.join(" OR ");d=new e.model.Model(l);o();g.load([d]).then(function(e){a();let i=e[0];let o=i.data;if(k){o=k(o)}w[t.term]=o;n(o)},function(){a();n([])})},onChange:function e(t,o){let a={};i(_,function(e,t){let i=n.render(t,o.item);a[e]=i;if(!I){h(r,{key:e,value:i})}});m&&m(a[d],o.item);return false},onFocus:function e(t,i){b.val(n.render(_[d],i.item));return false},onClose:function e(){b.focus()},onClear:function e(){let t={};i(_,function(e){let i="";t[e]=i;h(r,{key:e,value:i})});m&&m(t[d]);return false},optionRenderer:function e(o,a){let s="<a>"+n.render(C,a)+"</a>";x&&i(x,function(e,t){s=s.replace(t,"<b>"+t+"</b>")});return t("<li></li>").data("ui-autocomplete-item",a).append(s).appendTo(o)},parentElem:l});l.append(b);return l},combobox:function e(i,n){let o=i.id,s=i.isStateless===true,r=t('<div style="position: relative;">'),l=s===false?n.attr(o):i.value||i.valueFunction&&i.valueFunction(),d=i.entries||i.source||i.picklistEntries;function p(e,t){if(!s){h(n,{key:o,value:e})}l=e;if(i.onChange){i.onChange(e,t)}}function f(){return T(r)}function m(e){let t=e.filter(function(e){return e.value===l});let i=t.length&&t[0].label?t[0].label:l;r.append(u.readonly(i))}if(i.readonly||i.writeOnce===true&&l!==undefined){if(a.isFunction(d)){d=d();if(a.isPromise(d)){d.then(m)}else{m(d)}}else{m(d)}}else{r.append(Object(c["a"])(y).edit({entries:d,getErrorContainer:f,invalidEntryMessage:i.invalidEntryMessage,onChange:p,parentElem:r,showLabelInTextInput:true,value:l}))}return r},icon:function i(n,o){let s=n.id,r=n.isStateless===true,l=s&&o.attr(s)||n.valueFunction&&n.valueFunction()||n.defaultValue||"",d=t("<div>").addClass("nx-pagebuilder-property-button-area"),c=t("<input>").attr("type","text").addClass("nx-picker-icon-input").val(l).appendTo(d),p=t("<button>").addClass("nx-picker-icon-btn nx-picker-icon-runtime ui-button nx-button-secondary"),i=t("<div>").append(e.ui.createIcon(l===""?"sk-webicon-ink:warning":l)),f,m=t("<div>").addClass("nx-pagebuilder-property-button-wrapper");if(n.readonly){let e=t("<div>").addClass("nx-pagebuilder-property-button-area").append(u.readonly(l));m.append(i).css("margin-top","6px");return[m,e]}p.append(i);p.on("click",function(){if(!f){f=t("<div>");I(f,c,i);f.dialog({appendTo:e.builder.pagebuilderui,width:Math.max(document.documentElement.clientWidth*.7,800),height:Math.max(document.documentElement.clientHeight*.6,600),title:"Choose an Icon",resizable:false,modal:true,closeText:"",open:function e(){let i=t(".nx-picker-header");t(".nx-picker-body").height(i.parent().outerHeight()-i.outerHeight()-21)}})}else{f.dialog("open")}});m.append(p);a.delayInputCallback(c,function(t){i.empty().append(e.ui.createIcon(t===""?"sk-webicon-font-awesome:question":t));if(!r){h(o,{key:s,value:t})}n.onChange&&n.onChange(t)});return[m,d]},formula:function e(t,i){let n=t.fieldState,a,s=t.id,r,d=t.modelName,c={},u=function e(t){c.value=t;h(i,c)},p=o.getComponentFromState(i),f=t.readonly||p&&p.mode==="readonly";if(t.modelProp){d=i.attr(t.modelProp)}if(n){a=n.attr("name")?n.attr("name"):n.attr("id")}if(t.location==_&&s){c.childNodeName=s}else if(t.location==w){c.key=s}r=l(i,t);if(!r&&t.defaultValue){r=t.defaultValue;c.value=r;h(i,c)}return P({fieldName:a,modelName:d,onChange:function e(i){u(i);t.onChange&&t.onChange(i)},readOnly:f,showLabel:t.showLabel,showModelFieldSelector:!!d,showObjectPickerIfPolymorphic:t.showObjectPickerIfPolymorphic,value:r})},numberbox:function e(n,o){let a=l(o,n)||0,s=t("<div>").addClass("sk-numberbox-wrapper"),r=[],e,d,c=n.boxes,p=function e(n){i(r,function(e){t(this).toggleClass("sk-selected",e<n)})};if(n.readonly){return u.readonly(a)}for(d=0;d<c;d++){e=t("<div>").addClass("sk-numberbox").css("width",100/c+"%");r.push(e)}s.append(r);p(a);s.on("click",".sk-numberbox",function(){let e=t(this).index()+1;h(o,{value:e,key:n.id});p(e);n.onChange&&n.onChange(e)});return s},quicknumber:function e(n,o){let a=l(o,n),s=t("<div>").css({width:"80%",display:"inline-block"}),r=t("<div>").css({width:"20%",display:"inline-block"}),d,p=function e(o){let a=s.children();a.filter(".sk-selected").removeClass("sk-selected");i(a,function(e){if(o==n.options[e]){t(this).addClass("sk-selected")}})},f=function e(t){h(o,{value:t,key:n.id});p(t);if(d.val()!=t){d.val(t)}n.onChange&&n.onChange(t)};if(n.options){i(n.options,function(){let e=t("<div>").addClass("sk-optionbutton").text(this);if(a==this){e.addClass("sk-selected")}s.append(e)});s.on("click",".sk-optionbutton",function(){f(n.options[t(this).index()])})}if(n.readonly){r.append(u.readonly(a));s.off("click")}else{d=Object(c["a"])(C).edit({value:l(o,n),onChange:f});r.append(d)}return[s,r]},color:function e(t,i){let n=t.id,o=t.isStateless===true,a=n&&i.attr(n)||t.valueFunction&&t.valueFunction()||t.defaultValue||"";return Object(c["a"])("COLOR")[t.readonly?"read":"edit"]({value:a,placeholder:t.placeholder,onChange:function e(a,s){if(t.beforeChange){t.beforeChange(a,s)}if(!o){h(i,{key:n,value:a})}t.onChange&&t.onChange(a)}})},csssize:function e(t,i){let n=t.id,a=n&&i.attr(n)||t.valueFunction&&t.valueFunction()||t.defaultValue||"";if(t.readonly){return u.readonly(a||"")}return o.getValueEditorFromMetadata(t,i,t.id)},component:function i(n,s){let l=n.id,d=n.isStateless===true,c=n.defaultItems,u=n.filter,p=u&&a.isString(u),f=u&&Array.isArray(u),m,g;let b=["skuid__table","skuid__form"];if(d===true){m=n.value||n.valueFunction&&n.valueFunction()||n.defaultValue}else if(s.attr(l)){m=s.attr(l)}else{m=n.defaultValue||""}g=t("<select>");if(Array.isArray(c)){c.forEach(e=>{g.append('<option value="'.concat(e.value,'">').concat(e.label||e.value,"</option>"))})}const v=r().find("components [uniqueId], components [uniqueid]");v.each((e,i)=>{const n=t(i),a=o.getBuilder(i.nodeName);if(!a)return;let s=a.name,r=s.toLowerCase().match(/[a-zA-Z]/g).join(""),l="",d="";if(u&&(p&&r!==u||f&&t.inArray(r,u)<0)){return true}if(r==="field"){b.forEach(e=>{if(n.parents(e).length){d=e;let t=o.getBuilder(e);if(t){l=t.name+" "}}})}r=d+r;if(g.find("[componentname="+r+"]").length==0){g.append('<optgroup componentname="'+r+'" label="'+l+s+'"> <optgroup>')}g.find("[componentname="+r+"]").append("<option>"+(n.attr("uniqueid")||n.attr("uniqueId"))+"</option>")});g.val(m);g.on("change",function(t){let i=t.target.value;const o=e.themeSettings.getThemeSettings().getToken("utility","focusColor"),a=e.builder.componentRegistry.getComponents()[i];a&&a.getCPI().blinkOutline(o,3);h(s,{key:l,value:i});n.onChange&&n.onChange(i,m)});return t("<div>").append(t('<label class="nx-basicfieldeditor-item-select-label">').append(g))},custom:function i(n,o){let a=n.renderProperty,s=t("<div>");if(!a||typeof a!=="function")return s;let r={element:s,state:o,updateState:function t(){let i=arguments,n;if(i.length>=1){if(i.length===1){n={key:i[0].key,value:i[0].value}}else{n={key:i[0],value:i[1]}}h(o,n)}else{e.events.publish("skuidBuilderSave")}}};a(r);return r.element},standard:function e(t,i){if(t.readonly){return u.readonly(l(i,t))}else{return o.getValueEditorFromMetadata(t,i,t.id)}},snippet:function e(i,n){if(i.readonly){return u.readonly(l(n,i))}let a=t("<div>"),s=i.id,r=n.attr(s);function d(){return T(a)}function p(e){h(n,{key:s,value:e})}a.append(Object(c["a"])(y).edit({entries:i.entries||o.getSnippetNames,getErrorContainer:d,onChange:p,parentElem:a,value:r}));return a},reorder:function i(n,o){let a=t("<div>"),s=t("<button>").addClass("nx-picker-icon-btn ui-button nx-button-secondary").append(t('<div class="nx-picker-icon">').append(e.ui.createIcon("sk-webicon-ink:arrow-left"))),r=t("<button>").addClass("nx-picker-icon-btn ui-button nx-button-secondary").append(t('<div class="nx-picker-icon">').append(e.ui.createIcon("sk-webicon-ink:arrow-right"))),l=()=>o.index(),d=o.parent(),c=d.children().length;let u=()=>{const e=l()<=0;const t=l()>=c-1;s.toggleClass("nx-disabled",e);s.prop("disabled",e);r.toggleClass("nx-disabled",t);r.prop("disabled",t)};s.click(function(){if(s.hasClass("nx-disabled"))return;o.insertBefore(d.children().eq(l()-1));n.onChange&&n.onChange(o);u()});r.click(function(){if(r.hasClass("nx-disabled"))return;if(l()+2<c){o.insertBefore(d.children().eq(l()+2))}else if(l()+2>=c){o.appendTo(d)}n.onChange&&n.onChange(o);u()});u();a.append(s,r);return a}};e.ui.renderers.FORMULA={edit:P};i({sobject:"entity",multipicklist:"picklist"},function(e,t){u[e]=u[t]});o.buildIconPicker=I;o.getThemeResources=x;o.propertyRenderers=u;o.getFirstModelOnPage=M})(e);var D=n(50);(function(e){const t=e.$,i=e.builder.core,n=function t(){return e.builder.desktop},o=e.utils,a=o.makeXMLDoc,s=i.getActionLabel,r=t.each,l={tap:"Click",swipeeither:"Swipe",swipe:"Swipe",swipeleft:"Swipe Left",swiperight:"Swipe Right",press:"Press",onrender:"On Render"},{EVENT_SCOPES:d,LIGHTNING:c,NATIVE:p,ACTION_TYPES:{PAGE_REDIRECT:f,PLATFORM_ACTION:h},VALUE_SOURCES:{BLANK:m,DS_USER_INFO:g,FIELD_VALUE:b,FORMULA:v,MODEL_MERGE:y,PARAM:C,USER_INFO:_},VISUALFORCE:w}=e.constants,x=o.mergeArrays;function k(e){const t=e.attr("valuesource")||b,i=e.attr("value"),n=a("<update/>").attr({valuesource:t,field:e.attr("field")});switch(t){case _:case g:n.attr("userinfotype",e.attr("userinfotype"));break;case v:n.append(e.children("formula"));break;case y:n.attr({sourcemodel:e.attr("sourcemodel"),sourcefield:e.attr("sourcefield")});break;case b:case C:default:n.attr("value",i)}return n}function S(e,t=e.attr("type")){return t==="updateRow"&&!e.children("updates").length&&!e.attr("x-removed")}function I(e){const i=e.children("action"),n=[],s={nodesToRemove:n};let r=false;i.each(function(e){const s=t(this),l=s.attr("type");if(S(s,l)){r=true;const o=s.attr("fieldmodel"),l=a("<updates/>").appendTo(s);l.append(k(s));for(let a=e+1;a<i.length;a++){let e=t(i[a]);if(S(e)&&e.attr("fieldmodel")===o){l.append(k(e));e.attr("x-removed","true");n.push(e)}else{break}}s.removeAttr("valuesource field sourcemodel sourcefield userinfotype value")}else if(l==="createRow"){s.children("defaults").children("default").each(function(){const e=t(this),i=e.attr("type");if(i){if(i===m){e.attr("valuesource",m).removeAttr("type value enclosevalueinquotes operator")}else{e.attr("valuesource",b).removeAttr("type operator enclosevalueinquotes")}r=true}})}else if(l==="branch"&&s.children("iftrueactions").length){const e=I(s.children("iftrueactions"));if(e.nodesToRemove.length){o.mergeArrays(n,e.nodesToRemove)}if(e.needSave){r=true}}else if(s.children("onerroractions").length){const e=I(s.children("onerroractions"));if(e.nodesToRemove.length){o.mergeArrays(n,e.nodesToRemove)}if(e.needSave){r=true}}});s.needSave=r;return s}function T(e,t){const{nodesToRemove:i,needSave:n}=I(e);if(i.length){i.forEach(e=>e.remove())}if(n){t.save()}}function A(a,s,r,l){l=l||{};let d=a.get("xmlState"),c=d.attr("type"),u=[],p=[],f=l.onActionTypeChange,h=l.additionalActionOptions||[],m=t.merge([],i.getValidActionOptions());if(h&&h.length){m.push({value:"-",label:"",disabled:true},{value:"-",label:"Additional actions",disabled:true});t.each(h,function(){m.push(this);if(c===this.value){this.props&&x(p,this.props);this.propsFunction&&x(p,this.propsFunction(a))}})}u.push({id:"type",label:"Action Type",type:"picklist",options:m,onChange:function e(t){o.removeAllAttrsExcept(d,["type"]);if(t==="blockUI"){d.attr("styleSettingsVariant","dark")}a.save();a.refresh().rebuildProps(s);f&&f(t)}});if(c==="showModal"){u.push({type:"customaction",label:"Configure Modal",icon:"sk-webicon-ink:open",mode:"edit",customAction:function e(){n().showModalBuilder({parentComponent:a,getContextModelName:r,useAfterCloseActions:true})}})}else if(c==="showToast"){u.push({id:"message",type:"template",label:"Message to display",location:"attribute"},{id:"duration",type:"picklist",label:"Display duration",options:[{value:"0",label:"Indefinite"},{value:"2",label:"2 seconds"},{value:"4",label:"4 seconds"},{value:"10",label:"10 seconds"}],defaultValue:4,location:"attribute"},{id:"clickToDismiss",type:"boolean",location:"attribute",label:"Click to dismiss"},{id:"styleSettingsVariant",type:"picklist",label:"Message type",picklistEntries:e.builder.desktop.getVariantsForComponentType("skuid__toast"),defaultValue:"default"})}else if(c==="toggleSlidingPanel"||c==="openSlidingPanel"){u.push({type:"customaction",label:"Configure Panel",icon:"sk-webicon-ink:open",mode:"edit",customAction:function e(){n().showSlidingPanelBuilder({parentComponent:a,getContextModelName:r,useAfterCloseActions:true})}})}else if(c==="toggleMenu"){const t=e.builder.getBuilders(),i={skuid__button:true,skuid__image:true};u.push({id:"componentId",type:"component",label:"Component to render menu on",helptext:"The default will be to render the menu at the current component, but you may choose a different component.",defaultItems:[{value:"",label:"Current component"}],filter:Object.keys(t).map(e=>t[e]).filter(e=>!!i[e.id]).map(e=>e.name.toLowerCase().replace(/[^a-z]/g,""))})}const g=X({component:a,getContextModelName:r,propViewer:s});function b(e){x(u,e);x(u,p);return u}if(o.isPromise(g)){return g.then(b)}else{return b(g)}}function P(e,t){let i=e.get("xmlState"),n=i.attr("type"),o=[],a=[{value:"tap",label:"Click"}];o.push({id:"type",label:"Action Type",type:"picklist",options:a,onChange:function n(o){if(o==="blockUI"){i.attr("styleSettingsVariant","dark")}else{i.removeAttr("styleSettingsVariant")}e.refresh().rebuildProps(t)}});if(n==="swipe"){o.push({id:"direction",label:"Direction",type:"picklist",options:[{value:"either",label:"Either"},{value:"left",label:"Left"},{value:"right",label:"Right"}],onChange:function t(){e.refresh()}})}return o}function E(n,a,s,{contextModelName:r,modelWithField:l,onValueChange:d}={}){const c=n.get("xmlState"),f="valuesource",h=o.inPlatform(p)?"Skuid":"Salesforce",w=[],x=s&&s.displaytype||"TEXT",k=function e(){n.refresh().rebuildProps(a)},S={id:"value",type:"text",label:"Value",metadata:s,onChange:d};w.push({id:f,label:"Field Value Source",defaultValue:b,type:"picklist",options:[{label:"Single specified value",value:b},{label:"Blank value",value:m},{label:"Result of a Formula",value:v},{label:"Field from another model",value:y},{label:"Page/URL parameter value",value:C},{label:h+" user attribute",value:_},{label:"Data Source user attribute",value:g}],onChange:k});switch(c.attr(f)){default:case b:switch(x){case"BOOLEAN":S.type="boolean";break;case"MULTIPICKLIST":case"COMBOBOX":case"PICKLIST":{let e=l||r;Object(D["a"])(S,e,s.id);break}}w.push(S);break;case m:break;case g:{let t=Object(u["c"])(r).name,i=c.attr("datasource")||t,n=i&&e.dataSource.getDataSource(i),o=n&&n.getDataSourceType(),a=o&&o.getUserInfoProperties?o.getUserInfoProperties():[];w.push({id:"datasource",type:"datasource",label:"Data Source",defaultValue:t,filter:function e(t){return!!t.getDataSourceType().getUserInfoProperties},onChange:function e(){c.removeAttr("userinfotype");k()}},{id:"userinfotype",type:"picklist",label:"Data Source User attribute",helptext:"An attribute about the Model Data Source User to merge in as the value for the selected field, e.g. the User's first name, username, or user id.",picklistEntries:a,defaultValue:(a.find(function(e){return e&&e.defaultValue===true})||{}).value,onChange:k});break}case v:w.push({id:"formula",type:"formula",label:"Formula",location:"node",modelName:r});break;case C:S.label="Parameter";w.push(S);break;case _:w.push({id:"userinfotype",type:"picklist",label:h+" User attribute",helptext:"An attribute about the running User to merge in as the value for the selected field, e.g. the User's first name, username, or user id.",defaultValue:"userid",picklistEntries:t.map(i.userinfomap,function(e,t){return{label:e.label,value:t}}),onChange:k});break;case y:w.push({id:"sourcemodel",type:"model",label:"Source Model",helptext:"The Model whose first row's specified Merge Field's value will be used as the merge value for this Condition.",onChange:k},{id:"sourcefield",type:"field",label:"Source Field",modelprop:"sourcemodel",displayTypeFilter:function e(t,n){let o=c.attr("sourcemodel");return o?i.isFieldInModel(o,n):false},onChange:k});break}return w}function M(e){e||(e={});let o,r=e.treeNode||{},l=e.propViewer,d=e.linkedComponent,c=e.refreshLinkedComponent,u=()=>{return e.getModelName?e.getModelName():undefined},p=r.indent||e.indent||0;o={id:e.customNodeId||"action",addtooltip:e.addtooltip||"Add Action",deletetooltip:e.deletetooltip||"Remove Action",refreshLinkedComponent:c,linkedComponent:d,indent:p,icon:function e(t){return t.attr("type")==="branch"?"sk-webicon-ink:rules":"sk-webicon-ink:actions"},labelFunction:function t(i){return s(i,e.additionalActionOptions)},labelEventHandlers:{dblclick:function e(t){let i=t.get("xmlState"),o=i.attr("type");if(n()){if(o==="drawer"){n().showDrawerBuilder({parentComponent:t,getContextModelName:u})}else if(o==="openSlidingPanel"||o==="toggleSlidingPanel"){n().showSlidingPanelBuilder({parentComponent:t,getContextModelName:u})}else if(o==="showModal"){n().showModalBuilder({parentComponent:t,getContextModelName:u,useAfterCloseActions:true})}}}},defaultStateFunction:function e(){return a('<action type="save"/>')},propsFunction:function t(i){return A(i,l,u,e)},actionItemsFunction:function e(t){let n=t.get("xmlState").attr("type");if(n==="action-sequence"){return i.actionSequences.getActionSequenceActionItems(t)}},childrenFunction:function n(o){let a=o.get("xmlState"),s=a.attr("type"),r=e.additionalActionOptions,c=[];switch(s){case"branch":return[N(p,e)];case"updateRow":return[R(p,a,l)];case"createRow":return[L(p,a,l)];case f:return[j(p)];case"publish":return[V(p,a.attr("event"))];case"action-sequence":case"custom":case"datasource-action":case h:case"modelAction":case"requeryModel":case"requeryModels":case"runProcessPlugin":case"save":case"searchModel":case"sfdc-custom-apex":case"go-online":return[B(p,e)];case"toggleMenu":return[i.getOptionGroupsNode(t.extend({},e,{indent:p+1,linkedComponent:d}))]}if(r){t.each(r,function(){if(this.value===s&&this.childrenFunction){let e=this.childrenFunction(o);if(t.isArray(e)){x(c,e)}else{c.push(e)}}})}return c}};if(r)t.extend(o,r);return o}function N(e,i){return M(t.extend({},i,{treeNode:{invisibleParent:"iftrueactions",invisibleParentLabel:"If-True Actions",indent:1+e,addtooltip:"Add If-True Action",deletetooltip:"Remove If-True Action"}}))}function F(e){let t=e.attr("field")||"[No Field]",i=e.attr("value"),n=e.attr("valuesource"),o=e.attr("userinfotype"),a=e.attr("sourcemodel"),s=e.attr("sourcefield"),r;if(!n)r="[No Value Source]";else{switch(n){default:case b:r=i||"[No Value]";break;case v:r="[Formula Result]";break;case C:r=i?"(Param) "+i:"[No Param]";break;case _:r=o?"(User) "+o:"[No Attribute]";break;case y:r=a&&s?"(".concat(a,")(").concat(s,")"):a?"(".concat(a,")[No Source Field]"):"[No Source Model/Field]";break;case m:r="[Blank]";break;case g:r=o?"(DS User) "+o:"[No Attribute]";break}}return t+": "+r}function O(e,t){return function(n){n.isUpdateAction=true;const o=e.attr("type");const a=n.get("xmlState").attr("field");const s=e.attr(o==="updateRow"?"fieldmodel":"model");const r=i.getFieldInfoFromCache(s,a);const l=i.getConditionFieldPropObj(n,{handleChange:function e(){if(n){n.refresh().rebuildProps(t)}},modelName:s});return[l].concat(E(n,t,r,{onValueChange:()=>n.refresh(),contextModelName:s,modelWithField:s}))}}function R(e,t,i){return{id:"update",labelFunction:F,invisibleParent:"updates",invisibleParentLabel:"Field Updates",indent:1+e,addtooltip:"Add Field to update",deletetooltip:"Remove Field",propsFunction:O(t,i),defaultStateFunction:function e(){return a("<update/>")}}}function L(e,t,i){return{id:"default",labelFunction:F,invisibleParent:"defaults",invisibleParentLabel:"Default Values",indent:1+e,addtooltip:"Add Default Value",deletetooltip:"Remove Default Value",propsFunction:O(t,i),defaultStateFunction:function e(){return a("<default/>")}}}function B(e,i){let n={invisibleParent:"onerroractions",invisibleParentLabel:"On-Error Actions",indent:1+e,icon:"sk-webicon-ink:warning",addicon:"sk-webicon-ink:warning",addtooltip:"Add on-error Action",deletetooltip:"Remove on-error Action",defaultStateFunction:function e(){return a('<action type="blockUI" message="There was an error" timeout="3000"/>')}};return M(t.extend({},i,{treeNode:n}))}function j(e){return{id:"param",labelFunction:function e(t){let i=t.attr("key")||"[No Key]",n=t.attr("value");if(typeof n==="undefined")n="[No Value]";return i+": "+n},invisibleParent:"params",invisibleParentLabel:"Parameters",indent:1+e,addtooltip:"Add Parameter",deletetooltip:"Remove Parameter",propsFunction:function e(t){const i=()=>t.refresh();return[{id:"key",type:"text",label:"Key",onChange:i},{id:"value",type:"text",label:"Value",onChange:i}]},defaultStateFunction:function e(){return a("<param/>")}}}function U(t){let i=t.closest("action").attr("event");let n=e.events.get(i);if(n){return n.getParam(t.attr("name"))}}function V(t,i){let n=e.events.get(i);return{id:"param",labelFunction:function e(t){let i=t.attr("name");let n=t.attr("value");let a=U(t);let s=a?a.getLabel():i||"[No Name]";if(o.isUndefined(n)){n="[No Value]"}return s+": "+n},invisibleParent:"params",invisibleParentLabel:"Event Parameters",indent:1+t,addtooltip:"Add Parameter",deletetooltip:"Remove Parameter",mode:n?"readonly":"edit",propsFunction:function e(t){let i=U(t.get("xmlState"));let n={id:"value",label:"Value",onChange:function e(){t&&t.refresh()}};let o=false;let a;if(i){o=true;a=i.getMetadata()||{};n.defaultValue=a.defaultValue;n.required=a.required===true;switch(i.getDisplayType()){case"PICKLIST":n.type="picklist";n.picklistEntries=a.picklistEntries;break;case"BOOLEAN":n.type="boolean";break}}if(!n.type){n.type="template";n.location="attribute"}return[{id:"name",type:"string",label:"Parameter Name",onChange:function e(){t&&t.refresh()},readonly:o},n]},defaultStateFunction:function e(){return a("<param/>")}}}function H(e){e||(e={});let t=e.linkedComponent,n=false,o={},a=e.actionsIndent,s=e.customNodeId||"actions";if(a)o.indent=a;if(t){if(e.refreshLinkedComponent)n=true;T(t.get("xmlState").children(s),t)}return{id:s,label:e.label||"Actions",addtooltip:"Add Action",addlabel:"Add Action",deleteable:false,icon:e.icon||"sk-webicon-ink:actions",isChild:true,linkedComponent:t,props:e.props,actionItemsFunction:i.actionSequences.convertActionsToActionSequenceItem,refreshLinkedComponent:n,childrenFunction:function i(a){return[M({linkedComponent:t,refreshLinkedComponent:n,component:a,propViewer:e.propViewer,getModelName:e.getModelName,additionalActionOptions:e.additionalActionOptions,treeNode:o})]}}}function q(e){e||(e={});let t=e.linkedComponent,i=false,n={},o=e.actionsIndent;if(o)n.indent=o;if(t&&e.refreshLinkedComponent)i=true;return{id:e.customNodeId||"interactions",label:e.label||"Interactions",addtooltip:"Add Interaction",deleteable:false,icon:"sk-webicon-ink:actions",isChild:true,linkedComponent:t,refreshLinkedComponent:i,childrenFunction:function t(){return[z(e)]}}}function z(e){e||(e={});let t=e.linkedComponent,n=false,o={},s=e.actionsIndent,r=e.propViewer,d=e.isChild===true,c=e.deleteable!==undefined?e.deleteable:true;if(s)o.indent=s;if(t&&e.refreshLinkedComponent)n=true;return{id:"interaction",label:"Interaction",addtooltip:"Add Interaction",deleteable:c,icon:"sk-bi-interaction",isChild:d,linkedComponent:t,actionItemsFunction:i.actionSequences.convertActionsToActionSequenceItem,props:e.props,refreshLinkedComponent:n,childrenFunction:function i(a){return[M({linkedComponent:t,refreshLinkedComponent:n,component:a,propViewer:e.propViewer,getModelName:e.getModelName,additionalActionOptions:e.additionalActionOptions,treeNode:o,indent:1})]},labelFunction:function e(t){return l[t.attr("type")+(t.attr("type")==="swipe"?t.attr("direction"):"")]},defaultStateFunction:e.childStateFunction||function(){return a('<interaction type="tap"/>')},propsFunction:function e(t){return P(t,r)}}}function W(e){return{name:e&&e.label?e.label:"Actions",tree:H(e)}}function G(e){return{name:e&&e.label?e.label:"Interactions",tree:q(e)}}let Y={emptyModelData:[{id:"idxrows",type:"idxrows",label:"Abandoned Rows",helptext:"Rows are indexed by Model Id. E.g., {{$Output.output_name.model_id.0.field_name}}"}],createRow:[{id:"rows",type:"rows",label:"Created Rows"}],adoptRows:[{id:"rows",type:"rows",label:"Adopted Rows"}],updateRow:[{id:"rows",type:"rows",label:"Updated Rows"}],abandonRows:[{id:"rows",type:"rows",label:"Abandoned Rows"}],requeryModel:[{id:"rows",type:"rows",label:"Queried Rows"}],requeryModels:[{id:"idxrows",type:"idxrows",label:"Queried Rows",helptext:"Rows are indexed by Model Id. E.g., {{$Output.output_name.model_id.0.field_name}}"}]};function X(n){let s=n.component,r=n.propViewer,l=n.getContextModelName?n.getContextModelName():n.contextModelName,m=s.get("xmlState"),g=m.attr("type"),b=i.getAttrFromClosestParentComponent(m,"model"),v=b?i.getModelFromModelName(b):false,y=v?v.attr("datasource"):"",C=[],_=function e(){s&&s.refresh()},x=function e(t){let n=t.parent(),o;if(n.length){if(n[0]&&(n[0].nodeName==="skuid__page"||n[0].nodeName==="skuidpage")){return false}o=i.getComponentFromState(n);if(o&&o.globalContext){return true}else if(o){return e(n)}}else{return false}}(m),k=Y[g]||[],S={id:"behavior",type:"picklist",label:"Query Behavior",defaultValue:"standard",picklistEntries:[{label:"Standard - Completely Replace Data",value:"standard"},{label:"Get More - Merge in new Rows with old",value:"loadmore"}]},I={id:"affectedrows",type:"picklist",label:"Rows to use",defaultValue:"context",picklistEntries:[{label:"Rows in context",value:"context"},{label:"All rows in model",value:"all"}]},T=t.extend({},I,{picklistEntries:[{label:"Rows in context",value:"context"},{label:"None",value:"all"}]});if(["cancel","deactivateFilterableConditions","emptyModelData","requeryModels","save","unmarkAllRowsForDeletion"].includes(g)){let e="Models";if(g==="save")e+=" to Save";else if(g==="cancel")e+=" to Cancel";else if(g==="requeryModels")e+=" to Query";else if(g==="emptyModelData")e+=" to Empty";else if(g==="deactivateFilterableConditions")e="Deactive Filterable Conditions on";C.push({id:"models",label:e,type:"models",defaultValue:l,onChange:_});if(g==="save"){C.push({id:"rollbackonanyerror",label:"Roll back entire save on any error",helptext:"If true, then if there is any error while saving any of the selected Models, then the entire save operation will be rolled-back, as if no part of it ever occurred. ",type:"boolean"})}else if(g==="requeryModels"){C.push(S)}else if(g==="emptyModelData"){}else if(g==="deactivateFilterableConditions"){C.push({id:"rememberInPersonalization",label:"Update Personalization",helptext:"Remember changes to the condition on page reload by storing the changes in the Personalization Framework",type:"boolean",defaultValue:false})}}else if(g==="branch"){C.push({id:"model",label:"Formula Context Model (optional)",type:"model",helptext:"Use to forcibly set the Context Model to use for Formula merges, otherwise the default context Model will be used.",required:false,onChange:function e(){s&&s.rebuildProps()}},{id:"formula",label:"Branch Formula",type:"formula",location:"node",modelProp:"model"},{id:"label",type:"string",label:"Description",helptext:"Friendly label for this Branch to describe its purpose.",onChange:_},{id:"whenfinished",type:"picklist",label:"After running the branch",helptext:"Use to change the behavior of the branch when the formula is true: stop running additional actions, or continue with the next action after the branch.",defaultValue:"stop",picklistEntries:[{label:"Do not run any additional actions",value:"stop"},{label:"Continue with the next action",value:"continue"}]})}else if(g==="redirect"){C.push({id:"url",label:"URL",type:"template",location:"attribute"},{id:"window",type:"picklist",label:"Open URL in",defaultValue:"self",picklistEntries:[{label:"Current window",value:"self"},{label:"Blank window",value:"blank"},{label:"Parent window",value:"parent"}]})}else if(g===f){C.push({id:"redirectType",type:"picklist",label:"Navigation Type",defaultValue:"page",platform:[p],options:[{value:"page",label:"Skuid Page"},{value:"route",label:"Route"}],onChange:function e(){m.removeAttr("page route");s.rebuildProps()}});if(m.attr("redirectType")!=="route"){C.push(e.platform.builder.getPageSelectProperty({id:"page",label:"Skuid Page",valueTemplates:{page:"{{{name}}}"}}))}if(m.attr("redirectType")==="route"){C.push(e.platform.builder.getRouteSelectProperty({id:"route",label:"Skuid Route",platform:[p]}))}}else if(g==="blockUI"){C.push({id:"message",type:"string",label:"Message"},{id:"subtext",type:"string",label:"Subtext"});let t={id:"timeout",type:"picklist",label:"Timeout (seconds)",picklistEntries:[{label:"Never",value:""}]};let i=1;for(;i<=20;i++){t.picklistEntries.push({value:i*500,label:i/2})}C.push(t);C.push({id:"showPlaceholder",type:"boolean",label:"Show Spinner"},{id:"styleSettingsVariant",type:"picklist",label:"Style",picklistEntries:e.builder.desktop.getVariantsForComponentType("skuid__uiBlocker")})}else if(g==="publish"){let t=m.attr("event"),i=t&&e.events.get(t),n=i&&i.getScope(),r="By default, this event will only be published to this page's subscribers. "+"This event may also be published to other active Skuid pages in the current window. ",l=[{value:d.SKUID,label:"All active pages"},{value:d.PAGE,label:"Only this page"}];if(o.inPlatform([w,c])){r+="If within Lightning Experience, you can also publish this event to "+'Lightning Components that handle the "skuid:event" Application Event.',l.unshift({value:d.GLOBAL,label:"All active pages and Lightning Components"})}C.push({id:"event",label:"Event Name",type:"combobox",entries:function t(){return e.events.getRegisteredGlobalEvents().map(function(e){return{label:e.getLabel(),value:e.getName()}})},onChange:function t(i){let n,r=e.events.get(i),l=r?r.getScope():null,c=m.children("params");if(!c.length){c=a("<params/>").appendTo(m)}if(r){n=r.getParameters().map(function(e){let t=e.getMetadata()||{};let i=t.defaultValue;return a("<param/>").attr({name:e.getName(),value:!o.isUndefined(i)?i:""})})}else{n=[]}m.attr("scope",l||d.PAGE);c.empty().append(n);s.save().refresh().rebuildProps()}},{id:"scope",label:"Publishing Scope",type:"picklist",defaultValue:d.PAGE,readonly:!!n,helptext:r,picklistEntries:l},{id:"channel",type:"template",displayAs:"input",label:"Channel",location:"attribute",helptext:"(Optional) A targeted channel on which to publish event. If specified, "+"subscribers to this event will only be notified if they are listening on this channel."})}else if(g==="runProcessPlugin"){C.push({id:"pluginname",label:"Plugin Name",type:"string"})}else if(t.inArray(g,["abandonRows","createRow","markRowsForDeletion","requeryModel","unmarkRowsForDeletion"])>-1){C.push({id:"model",label:"Model",type:"model",defaultValue:l,location:"attribute",onChange:function e(t,i,n){if(t&&n&&g==="createRow"){m.children("defaults").children("default").remove();s.save()}s.refresh()}});if(g==="createRow"){C.push({id:"appendorprepend",type:"picklist",label:"Place row at...",defaultValue:"prepend",picklistEntries:[{label:"Start of Model data",value:"prepend"},{label:"End of Model data",value:"append"}]},{id:"defaultmodefornewitems",type:"picklist",label:"Have associated Components initially show this row in...",defaultValue:"edit",picklistEntries:[{value:"edit",label:"Edit mode"},{value:"read",label:"Read mode w/ inline-editing"}],helptext:"When this row is created, Components bound to this Model will create a new Item corresponding to the row. What Mode should the new Item start in?"});if(!x){C.push(T)}}else if(g==="requeryModel"){C.push(S)}}else if(g==="sortModel"){C=C.concat(Z(m,s,b,l))}else if(g==="searchModel"){let e=true;let t=m.attr("model")||l;let n=t&&i.getDataSourceTypeFromModelName(t);if(n){if(n.prop("canServerSearch")===false){e=false}}C.push({id:"model",label:"Model",type:"model",location:"attribute",defaultValue:l,onChange:e=>{const t=i.getDataSourceTypeFromModelName(e);if(t&&!t.modelsCanSearch()){m.attr("searchMethod","client")}else{m.attr("searchMethod","server")}s.rebuildProps().refresh().save()}},{id:"searchMethod",type:"picklist",label:"Search Method",readonly:!e,defaultValue:e?"server":"client",helptext:'By default, search is performed server-side, meaning that all records in the database will be searched for the text in the search box. To search just the records initially retrieved in the model, select "Client" instead.',picklistEntries:e?[{label:"Server",value:"server"},{label:"Client",value:"client"}]:[{label:"Client",value:"client"}]},{id:"search",type:"template",location:"attribute",modelName:l,label:"Search Text",displayAs:"input"})}else if(g==="adoptRows"){C.push({id:"sourcemodel",label:"Source Model",type:"model",location:"attribute"},{id:"targetmodel",label:"Target Model",type:"model",location:"attribute"})}else if(g==="updateRow"){C.push({id:"fieldmodel",label:"Model",type:"model",defaultValue:l,required:true,location:"attribute",onChange:function e(t,i,n){if(t&&n){m.children("updates").children("update").remove();s.save()}s.refresh().rebuildProps(r)}});I.label="Rows to update"}else if(g==="openSlidingPanel"){C.push({id:"openbehavior",type:"picklist",label:"Behavior",defaultValue:"open",picklistEntries:[{value:"open",label:"Open"},{value:"toggle",label:"Toggle"}]})}else if(g==="closeSlidingPanel"){C.push({id:"closebehavior",type:"picklist",label:"Behavior",defaultValue:"close",picklistEntries:[{value:"close",label:"Close all"},{value:"topmost",label:"Close topmost"}]})}else if(g==="toggleRenderComponent"){C.push({id:"behavior",type:"picklist",label:"Behavior",defaultValue:"toggle",picklistEntries:[{value:"toggle",label:"Toggle"},{value:"show",label:"Show"},{value:"hide",label:"Hide"}]},{id:"componentid",label:"Component",type:"component",location:"attribute"})}else if(g==="runComponentAction"){K(C,n)}else if(g===h){return $(C,n)}else if(g==="custom"){C.push({id:"snippet",label:"Name of Snippet to run",type:"snippet",location:"attribute",onChange:_})}else if(t.inArray(g,["setCondition","activateCondition","deactivateCondition"])!==-1){C.push({id:"model",label:"Model",type:"model",defaultValue:l,location:"attribute",onChange:function e(t,i,n){if(!s)return;m.removeAttr("condition");s.save();if(i!==true&&n!==t){s.rebuildProps(r)}s.refresh()}});let e=m.attr("model");if(!e){e=i.getFirstModel();if(e)e=e.attr("id");else e=null}C.push({id:"condition",label:"Condition",type:"condition",modelName:e,location:"attribute",onChange:()=>{_();s.rebuildProps()},filter:function e(t){return(g!=="deactivateCondition"||t.attr("state")!=="filterablerequired")&&t.attr("state")!=="fixed"}});if(g==="setCondition"){const t=m.attr("condition");const n=Object(u["j"])(e);const o=t&&n.find('condition[type="fieldvalue"][name="'.concat(t,'"]'));const a=o&&o.length&&o.attr("field");const d=a&&i.getFieldInfoFromCache(e,a);const c=E(s,r,d,{onValueChange:()=>s.refresh(),contextModelName:l,modelWithField:e});C.push(...c)}C.push({id:"rememberInPersonalization",label:"Update Personalization",helptext:"Remember changes to the condition on page reload by storing the changes in the Personalization Framework",type:"boolean",defaultValue:false})}else if(o.startsWith(g,"sfdc-")){g="datasource-action";m.attr("type",g);m.attr("actionname","apex")}if(g==="datasource-action"){return J(C,n,y)}else if(g==="action-sequence"){i.actionSequences.appendActionSequenceActionProps(C,s,l)}else if(o.startsWith(g,"skuid-native")){i.native.appendActionProps(g,C,s,l)}else if(g==="voice-command"){i.voiceCommands.appendVoiceCommandProps(C,s,l)}if(!x&&t.inArray(g,["unmarkRowsForDeletion","markRowsForDeletion","updateRow","abandonRows","adoptRows"])!==-1){C.push(I)}let A;if(k.length){A=m.children("outputs");if(!A.length){A=a("<outputs/>")}C.push({label:"Named Outputs",helptext:'Use Named Outputs to "tag" data created or modified by this action and make it accessible in following actions via the $Output merge variable.',type:"custom",renderProperty:function e(n){n.element.append(k.map(function(e){let o=e.label,s=e.id,r=e.type,l=t("[id="+s+"]",A),d;if(!l.length){l=a("<output/>").attr({id:s,type:r})}if(e.helptext){d=t("<div>").addClass("sk-icon sk-icon-help inline").css({"vertical-align":"top","margin-left":"4px"});d.skootip(e.helptext)}return t("<div>").append(t('<div class="nx-basicfieldeditor-item-label--above-field">').text(o).append(d),i.propertyRenderers.standard({id:"name",label:o,validator:i.validators.alphaNumericUnder,onChange:function e(i){let o=t.contains(A[0],l[0]);if(o&&(!i||i.length<1)){l.detach();if(!A.children().length){A.detach()}n.updateState()}else if(!o&&i&&i.length>0){l.appendTo(A);if(!t.contains(m[0],A[0])){A.appendTo(m)}n.updateState()}}},l))}))}})}return C}function K(t,i){let n=i.component,a=n.get("xmlState"),s=a.attr("componentid"),r=s?e.builder.componentRegistry.getById(s):null,l=e.builder.getBuilders(),d=Object.keys(l).map(e=>l[e]).filter(e=>!!e.actions).map(e=>e.name.toLowerCase().replace(/[^a-z]/g,""));t.push({id:"componentid",label:"Component",type:"component",location:"attribute",filter:d,onChange(){o.removeAllAttrsExcept(a,["componentid","type"]);n.save().refresh().rebuildProps()}});if(!r)return;let c=r.builder,u=c.actions||[],p=a.attr("action"),f;if(!u.length){o.removeAllAttrsExcept(a,["type"]);return}f=u.find(e=>e.value===p)||u[0];t.push({id:"action",label:"Action to Run",type:"picklist",defaultValue:f.value,picklistEntries:u,onChange(e,t){if(e&&t&&e!==t){n.save().refresh().rebuildProps()}}});if(f.props)x(t,f.props);else if(f.propsFunction)x(t,f.propsFunction(n,a))}function $(t,i){const n=i.component,a=n.get("xmlState"),s=e.platform.getActions?e.platform.getActions():[],r=s.map(e=>{return{value:e.name,label:e.label}});let l=a.attr(h);if(!l&&r.length){l=r[0].value;a.attr(h,l);n.save().refresh()}let d=l?s.find(e=>e.name===l):null;t.push({id:h,label:"Platform Action",type:"picklist",entries:r,onChange(){o.removeAllAttrsExcept(a,[h,"type"]);n.save().refresh().rebuildProps()}});if(d){const e=d.getProperties(n);if(o.isPromise(e)){return e.then(e=>{return t.concat(e)})}else{return t.concat(e)}}else{return t}}function Q(e,t){return e.label.localeCompare(t.label)}function J(i,n,a){let s=n.component,l=s.get("xmlState"),d=l.attr("datasource"),c,p,f=[],h=n.propViewer,m=[],g=l.attr("actionname"),b={},v={type:"string",label:"Action",value:"No Actions for this datasource",readonly:true,isStateless:true},y=function e(){s&&s.refresh().rebuildProps(h)};r(e.dataSource.map(),function(e){if(Object(u["a"])(e)){return}f.push({label:e,value:e})});f.sort(Q);d=d||a||f[0].value;p={id:"datasource",type:"picklist",picklistEntries:f,label:"Data Source",defaultValue:d,onChange:function e(t,i){o.removeAllAttrsExcept(l,["datasource","type"]);s.save();if(!t){l.attr("datasource",i||d)}else{y()}}};i.push(p);if(!d)return i;c=e.dataSource.getDataSource(d);const C=c.getCachedActions(l,n);if(!C){c.getActions(l,n).then(()=>{return o.delay(10)}).then(()=>y());i.push({type:"string",label:"Action",value:"Loading actions ...",readonly:true,isStateless:true});return i}let _={};if(!C||!o.size(C)){i.push(v);return i}if(Array.isArray(C)){m=t.map(C,function(e){if(e.deprecated)return;return{label:e.label,value:e.name,disabled:e.disabled}});r(C,function(e,t){if(!t.disabled){_[t.name]=t}})}else{r(C,function(e,t){if(t.deprecated)return;m.push({label:t.label,value:e})});m.sort(Q);_=C}if(m.length&&!g){let e=0;while(!g){if(e===m.length)break;if(!m[e].disabled){g=m[e].value}e++}}b={id:"actionname",type:"picklist",picklistEntries:m,label:"Action",defaultValue:g,onChange:function e(){o.removeAllAttrsExcept(l,["datasource","type","actionname"]);s.save();y()}};if(m.length){i.push(b)}else{i.push(v)}if(g){let e=_[g];if(e){let t=e.builderProps;let n=o.isFunction(t)?t(s):t;return o.resolve(n).then(function(e){x(i,e);return i})}else{i.push({type:"string",label:"Action Properties",value:"This action has no metadata",readonly:true,isStateless:true})}}return i}function Z(e,t,n,o){let a=[],s=e.attr("client-side")==="true",r=function e(t){if(!t)return false;let n=i.getDataSourceTypeFromModelName(t);return n&&n.prop("supportsServerSideSort")!==false};a.push({id:"model",label:"Model",type:"model",defaultValue:o,location:"attribute",onChange:function i(n){let o=!r(n);if(o){e.attr("client-side","true")}t.save().refresh().rebuildProps()}},{id:"field",label:"Field",type:"field",addFieldToModel:true,displayTypeFilter:function e(t){if(s)return true;return t.sortable},modelprop:"model",location:"attribute"},{id:"method",label:"Sort Behavior",type:"picklist",defaultValue:"toggle",picklistEntries:[{value:"toggle",label:"Cycle Sort"},{value:"asc",label:"Ascending"},{value:"desc",label:"Descending"},{value:"clear",label:"Clear Sort"}]});let l={id:"client-side",label:"Sort Client Side",helptext:"When enabled, only rows within the modeland not records on the server sidewill be sorted.",type:"boolean",onChange:function e(){t.refresh().rebuildProps()}},d=e.attr("model")||n;if(!r(d)){l.isStateless=true;l.value="This model only supports client-side sorting.";l.readonly=true;l.type="text";e.attr("client-side","true")}a.push(l);if(e.attr("client-side")!=="true"){a.push({id:"should-query",helptext:"When enabled, the model will immediately requery for results after its field sorting is set.",label:"Query After Setting Sort",defaultValue:"true",type:"boolean"})}a.push({id:"rememberInPersonalization",label:"Update Personalization",helptext:"Remember the sort order on page reload by storing it in the Personalization Framework",type:"boolean",defaultValue:false});return a}e.events.subscribe(["__skuid.builder.model.idChange","__skuid.builder.model.field.remove","__skuid.builder.model.remove"],function(n){let o=i.getPageXML().find("renderconditions > rendercondition, enableconditions > condition");if(o.length){t.each(o,function(){let o=t(this);i.handleModelIdChange(o,n,"fieldmodel");i.handleModelRemove(o,n,{modelPropId:"fieldmodel"});if(n.type==="model.field.remove"&&o.attr("field")===n.fieldId){o.remove()}e.events.publish("skuidBuilderSave")})}});e.events.subscribe("skuid.builder.component.uniqueIdChange",(t,n)=>{i.getPageXML().find('action[componentid="'+t+'"]').attr("componentid",n);e.events.publish("skuidBuilderSave")});t.extend(i,{getActionTreeNode:M,getActionsCategory:W,getInteractionsCategory:G,getActionsTree:H,getInteractionTree:z,getInteractionsTree:q});if(e.utils.runningTests()){t.extend(i,{getComponentActionProperties:K,migrateActionsNode:T})}})(e);var N=n(598);const{$:F,builder:{core:O,core:{isDistanceQueryable:R,getMetadataForField:L}},utils:B,utils:{makeXMLDoc:j},constants:U,constants:{DISPLAY_TYPES:V,SALESFORCE:H}}=e,q="type",z="value",W="name",G="clientorserver",Y="field",X="sourceparam",K="sourcetype",$="operator",Q="model",J="datasourceuserinfo",Z="fieldvalue",ee="multiple",te="param",ie="userinfo",ne="modelmerge",oe="blank",ae="join",se="dependent",re="search",le="boolean";function de(e,t){const i=e.get("xmlState"),n=i.closest("model"),o=n&&n.attr("sobject"),a=n&&n.attr("id"),s=O.getDataSourceFromModel(n),r=s&&s.getDataSourceType(),l=e=>{return()=>{e.refresh()}},d=e=>{return()=>{e.rebuildProps&&e.rebuildProps();e.renderProperties&&e.renderProperties(t)}};let c=r&&r.prop("composer.validConditionOperators"),u=O.getMetadataForField(e);if(B.isFunction(c)){c=c(n,i)}return[{label:"Field",deleteable:false,linkedComponent:e,summaryFunction:function e(t){return O.conditionDescriptionRenderers.field(t,o||a)},propsFunction:function i(n){return O.getConditionFieldProperties(e,{fieldMetadata:u,handleChange:function t(){u=O.getMetadataForField(e);l(n)()},handleRefresh:d(n),modelName:a,showUiOnlyFields:!e.isSubcondition},t)}},{label:"Operator",deleteable:false,linkedComponent:e,summaryFunction:function e(t){return O.conditionDescriptionRenderers.operator(t)},propsFunction:function t(i){return[O.getConditionOperatorPropObj(e,{fieldMetadata:u,handleChange:l(i),validOperators:c})]}}]}function ce(e,t){t=t||{};let i=e.get("xmlState"),n=i.attr("state")==="filterablerequired",o=i.attr("state")==="fixed",a,s,r,l,d=t.modelName,c=O.getDataSourceFromModelName(d),{dataSourceType:u}=c,p=u&&u.getUserInfoProperties?u.getUserInfoProperties():[],f=t.isDefaultValueField,h=f?"defaultValue":z,m=f?"defaultvaluetype":q,g=i.attr(m)||Z,b={modelName:d},v,y=[],C=B.inPlatform(U.NATIVE)?"Skuid":H;if(t.fieldMetadata){a=t.fieldMetadata}else{a=L(e,b)}s=a?a.displaytype:false;let _=[V.PICKLIST,V.MULTIPICKLIST,V.COMBOBOX].includes(s);r=R(s);y.push({label:"Single specified value",value:Z},{label:"Multiple specified values",value:ee},{label:"Field from another model",value:ne},{label:"Page/URL parameter value",value:te},{label:C+" user attribute",value:ie},{label:"Data Source user attribute",value:J},{label:"True or False",value:le});if(!f){y.push({label:"None - blank value",value:oe},{label:"Result of subquery",value:ae},{label:"Another field from row",value:se})}if(r){l=[Z,te,oe,ne]}else{l=t.validTypes}if(n||o){v=l.indexOf(oe);if(v>-1)l.splice(v)}let w={id:m,type:"picklist",label:(r?"Distance value ":"")+"Content",defaultValue:Z,picklistEntries:y,onChange:function n(o,a){let s=L(e,b),r=s?s.displaytype:null;if(a===Z&&o===ee&&(i.attr(h)||f)){i.append(j("<values/>").append(j("<value/>").text(i.attr(h))))}else{if(f){let e=i.children("values");e&&e.length&&e[0].remove()}else{i.empty()}}i.attr(h,"");if(!f&&!(i.attr($)in O.getValidOperators(o,r))){i.attr($,F.inArray(o,[ee,ae])!==-1?"in":"=")}i.removeAttr("enclosevalueinquotes model joinfield joinobject");if(o===ne){i.attr(Q,O.getFirstModel().attr("id"))}if(o===oe){i.attr(h,"null")}O.determineQuotedness(e,b);e.save().refresh();if(t.handleChange)t.handleChange();if(t.handleRefresh)t.handleRefresh()}};if(l){let e=[];F.each(w.picklistEntries,function(){if(F.inArray(this.value,l)!==-1){e.push(this)}});w.picklistEntries=e}let x={id:h,type:"string",label:"Value",onChange:function i(){e.refresh();if(t.handleChange)t.handleChange()},metadata:a};if(a.displaytype==="BOOLEAN"&&h==="defaultValue"){x.type="picklist";x.picklistEntries=[{label:"--None--",value:""},{label:"true",value:"true"},{label:"false",value:"false"}]}if(_&&g===Z){Object(D["a"])(x,d,a.id)}let k={id:h,type:"boolean",label:"Value",onChange:function i(){e.refresh();if(t.handleChange)t.handleChange()},metadata:a};let S={id:h,type:"string",label:"Parameter",onChange:function i(){e.refresh();if(t.handleChange)t.handleChange()}};let I={id:"novaluebehavior",type:"picklist",label:"If this Parameter is not provided, then...",helptext:"Specifies the action to take if the specified URL Parameter is not provided.",defaultValue:"",picklistEntries:[{label:"Set its value to Blank",value:""},{label:"Deactivate this Condition",value:"deactivate"},{label:"Abort this Model's Query",value:"noquery"}]};let T={id:"userinfotype",type:"picklist",label:C+" User attribute",helptext:"An attribute about the running User to merge in as the value for the selected field, e.g. the User's first name, username, or user id.",defaultValue:"userid",picklistEntries:F.map(O.userinfomap,function(e,t){return{label:e.label,value:t}}),onChange:function i(){e.refresh();if(t.handleChange)t.handleChange()}};let A={id:"userinfotype",type:"picklist",label:"Data Source User attribute",helptext:"An attribute about the Model Data Source User to merge in as the value for the selected field, e.g. the User's first name, username, or user id.",picklistEntries:p,defaultValue:p.length&&p.find(function(e){return e.defaultValue===true}).value,onChange:function i(){e.refresh();if(t.handleChange)t.handleChange()}};let P={id:"mergefield",type:"field",label:"Source Field",modelprop:Q,defaultValue:"Id",displayTypeFilter:function t(i,n){let o=e.get("xmlState").attr(Q);if(!o)return false;return O.isFieldInModel(o,n)},onChange:function i(){e.refresh();if(t.handleChange)t.handleChange()}};let E={id:Q,type:"model",label:"Source Model",helptext:"The Model whose first row's specified Merge Field's value will be used as the merge value for this Condition.",onChange:function i(){e.refresh();if(t.handleChange)t.handleChange();if(t.handleRefresh)t.handleRefresh()}};let M={id:"novaluebehavior",type:"picklist",label:"If no row in Source Model, then...",helptext:"Specifies the action to take if no rows are returned by the source model.",defaultValue:"deactivate",picklistEntries:[{label:"Deactivate this Condition",value:"deactivate"},{label:"Abort this Model's Query",value:"noquery"}]};let N={id:"joinobject",dataSourceName:d?O.getModelFromModelName(d).attr("datasource"):null,type:"sobject",label:"Join Object",helptext:"The Object to join in when performing a Semi-Join Sub-Select, e.g. Case in 'WHERE Id in (SELECT ContactId FROM Case)' ",onChange:function i(){e.refresh();if(t.handleChange)t.handleChange();if(t.handleRefresh)t.handleRefresh()}};let W={id:"joinfield",type:"field",label:"Join Field",helptext:"The field to join when performing a Semi-Join Sub-Select, e.g. ContactId in 'WHERE Id in (SELECT ContactId FROM Case)' ",sobject:i.attr("joinobject"),displayTypeFilter:u.joinFieldDisplayTypeFilter?u.joinFieldDisplayTypeFilter:[V.ID,V.REFERENCE],onChange:function i(){e.refresh();if(t.handleChange)t.handleChange()}};let G={id:"logic",type:"string",label:"Subcondition Logic",onChange:function t(){e.refresh()}};let Y={id:"values",location:"node",type:"multiitem",storeAs:{type:"node",name:"value"},label:"Values",onChange:function i(){e.refresh();if(t.handleChange)t.handleChange()},metadata:a};let X={id:"depfield",type:"field",label:"Depends On",modelname:d,onChange:function t(){e.refresh()}};let K=[w,S],re=[w,E,P],de={},ce,ue,pe;de[Z]=[w,x];de[ee]=[w,Y];de[te]=K;de[ie]=[w,T];de[J]=[w,A];de[ne]=re;de[le]=[w,k];if(!f){de[oe]=[w];de[ae]=[w,N,W,G];de[se]=[w,X];re.push(M);if(!e.isRenderCondition){K.push(I)}}ce=de[i.attr(m)||Z];if(r){ue={id:"locationsource",type:"picklist",label:"Comparison Location Source",helptext:'For "DISTANCE from Location" queries, you must specify a source Latitude and Longitude defining the Location to compare against. The Latitude and Longitude can be retrieved from fields on another Model, or from Page/URL Parameters.',defaultValue:ne,picklistEntries:[{label:"Page/URL parameter values",value:te},{label:"Running user's location",value:"userlocation"},{label:"Fields from another model",value:ne}],onChange:function n(o){i.removeAttr("locationmodel latitudefield longitudefield");if(o===ne){i.attr("locationmodel",O.getFirstModel().attr("id"))}e.save().refresh();if(t.handleChange)t.handleChange();if(t.handleRefresh)t.handleRefresh()}};ce.push({id:"units",type:"picklist",label:"Units",defaultValue:"mi",picklistEntries:[{label:"Miles",value:"mi"},{label:"Kilometers",value:"km"}],onChange:function i(){e.refresh();if(t.handleChange)t.handleChange()}},ue);pe=i.attr(ue.id)||ue.defaultValue;if(pe===ne){ce.push({id:"locationmodel",type:"model",label:"Location Source Model",helptext:"The Model whose first row's specified Latitude / Longitude Fields' values will be used as the source for this DISTANCE Condition.",onChange:function i(){e.refresh();if(t.handleChange)t.handleChange();if(t.handleRefresh)t.handleRefresh()}},{id:"locationnovaluebehavior",type:"picklist",label:"If no row in Location Source Model, then...",helptext:"Specifies the action to take if no rows are returned by the Location Source Model.",defaultValue:"deactivate",picklistEntries:[{label:"Deactivate this Condition",value:"deactivate"},{label:"Abort this Model's Query",value:"noquery"}]},{id:"latitudefield",type:"field",label:"Latitude Source Field",modelprop:"locationmodel",displayTypeFilter:[V.STRING,V.DOUBLE,V.NUMBER],onChange:function i(){e.refresh();if(t.handleChange)t.handleChange()}},{id:"longitudefield",type:"field",label:"Longitude Source Field",modelprop:"locationmodel",displayTypeFilter:[V.STRING,V.DOUBLE,V.NUMBER],onChange:function i(){e.refresh();if(t.handleChange)t.handleChange()}})}else if(pe===te){ce.push({id:"latitudefield",type:"string",label:"Latitude Parameter",onChange:function i(){e.refresh();if(t.handleChange)t.handleChange()}},{id:"longitudefield",type:"string",label:"Longitude Parameter",onChange:function i(){e.refresh();if(t.handleChange)t.handleChange()}},{id:"locationnovaluebehavior",type:"picklist",label:"If Latitude / Longitude Parameters are not provided, then...",helptext:"Specifies the action to take if either the Latitude or Longitude URL Parameters are not provided.",defaultValue:"deactivate",picklistEntries:[{label:"Deactivate this Condition",value:"deactivate"},{label:"Abort this Model's Query",value:"noquery"}]})}else if(pe==="userlocation"){ce.push({id:"locationnovaluebehavior",type:"picklist",label:"If user's location cannot be determined, then...",helptext:"Specifies the action to take if the user's location cannot be determined, which may happen if the user decides to deny the browser permission to access location data.",defaultValue:"deactivate",picklistEntries:[{label:"Deactivate this Condition",value:"deactivate"},{label:"Abort this Model's Query",value:"noquery"}]},{id:"locationchangebehavior",type:"boolean",label:"Re-query Model when user's location changes",helptext:"If true, then whenever the user's location changes by more than a certain amount, this Model will be requeried.",defaultValue:true,onChange:function e(){if(t.handleChange)t.handleChange();if(t.handleRefresh)t.handleRefresh()}});if(i.attr("locationchangebehavior")!=="false"){ce.push({id:"locationdelta",type:"string",label:"Minimum change in location before re-query (in meters)",helptext:"The user's location must change by at least this many meters before this Model will be re-queried.",defaultValue:"100",validator:function e(t){return t&&t>0&&B.isNumber(t)?true:"Value must be a number greater than 0."}})}}}return ce}function ue(e,t={}){const{addFieldToModel:i=false,handleChange:n,modelName:o=t.modelname,modelprop:a,showObjectPickerIfPolymorphic:s=false,showUiOnlyFields:r=true,sobject:l}=t;let{showUiOnlyFormulaFields:d=false}=t;d=d&&r;let c=e.get("xmlState"),u=false;if(c.attr(q)===re){u=true;c.attr(Y,"Id")}let p={id:Y,type:"field",label:"Field",readonly:u,showUiOnlyFields:r!==false,onChange:function t(i,a,s){O.updateState(c,{key:"fieldtargetobjects",value:s});let r=L(e),l=r?r.displaytype:false;if(c.attr(q)===Z){if(l===V.BOOLEAN){if(c.attr(z)!=="false"){c.attr(z,"true")}}else if(l===V.INTEGER){c.attr(z,"0")}else if(F.inArray(l,[V.CURRENCY,V.DOUBLE])!==-1){c.attr(z,"0.0")}else if(F.inArray(l,[V.DATE,V.DATETIME])!==-1){c.attr(z,"")}}if(!R(l)){c.removeAttr("fieldfunction locationsource latitudefield longitudefield locationnovaluebehavior")}O.determineQuotedness(e,{modelName:o});e.save().refresh();if(n)n();e.rebuildProps()},displayTypeFilter:e=>{const t=e.displaytype==="OBJECT";const i=e.calculated&&e.uiOnly;return!t&&(!i||d)}};if(l){p.sobject=l}else if(a){p.modelprop=a}else if(o){p.modelname=o}if(i)p.addFieldToModel=true;if(s)p.showObjectPickerIfPolymorphic=true;return p}function pe(t,i,n){i=i||{};let o=t.get("xmlState"),a=ue(t,i),s=[a],r=i.fieldMetadata||L(t),l=e.builder.core,d=l.getDataSourceFromModelName(i.modelName);if(r&&d){const e=d.getFieldFunctionProperty(t,n,r,Object.assign({isCondition:true},i));if(e){s.push(e)}if(e===false){return false}}if(t.isSubcondition&&o.parent().closest("condition").attr(q)===ae){a.sobject=o.parent().closest("condition").attr("joinobject")}return s}function fe(e,t){if(!t)t={};let i=e.get("xmlState"),n=t.id||$,o=t.label||"Operator",a=t.defaultValue||"=",s=t.conditionType||i.attr(q),r=t.fieldMetadata||false,l=r?r.displaytype:false,d=O.getValidOperators({type:s,displayType:l}),c=t.validOperators,u={id:n,type:"picklist",label:o,defaultValue:a,onChange:function i(n){e.save().refresh();if(t.handleChange)t.handleChange(n)}};if(R(l)){u.picklistEntries=[{label:"<",value:"lt"},{label:">",value:"gt"}]}else if(c&&c.length){u.picklistEntries=F.map(c,function(e){let t=d[e];if(t)return{label:t.name,value:e}})}else{u.picklistEntries=F.map(d,function(e,t){return{label:e.name,value:t}})}return u}function he(e,t){t=t||{};let i=t.modelName,n=O.getDataSourceTypeFromModelName(i),o=i&&O.getModelFromModelName(i),a=e.get("xmlState"),s=a.attr("field"),r=a.attr("sourcetype"),l=o&&s&&o.find('field[id="'.concat(s,'"]')),d=a.attr("state"),c=d==="filterablerequired",u=d==="fixed",p,f,h=r==="fieldvalue"||!r;if(u){p=[{label:"Fixed, Required",value:"fixed"}]}else if(c){p=[{label:"Filterable, Required",value:"filterablerequired"}]}else{p=t.validStates||[{label:"Always On",value:""},{label:"Filterable Default On",value:"filterableon"},{label:"Filterable Default Off",value:"filterableoff"},{label:"Always Off",value:"off"}]}let m={id:"state",type:"picklist",label:"Condition State",defaultValue:"",picklistEntries:p,readonly:c||u,onChange:function i(n){if(!n||n==="filterableon"){a.attr("inactive","false")}else{a.attr("inactive","true")}if(n!=="filterableon"&&n!=="filterableoff"){a.removeAttr(W)}else{if(!a.attr(W)&&(a.attr(Y)||a.attr(X))){let e=a.attr(Y)||a.attr(X),t=e,i=1;while(O.getConditionByName(t,a.closest("model").attr("id")).length){t=e+""+i++}a.attr(W,t)}}e.save().refresh();if(t.handleChange)t.handleChange();if(t.handleRefresh)t.handleRefresh()}};let g={id:W,type:"string",label:"Condition Name",helptext:"A unique name for this Condition, allowing it to be affected by Filters.",validator:function t(i){return O.validators.conditionName(i,e)},onChange:function i(n,o){O.publishStateEvent({type:"model.condition.nameChange",modelId:a.closest("model").attr("id"),oldName:o,newName:n});e.save().refresh();if(t.handleChange)t.handleChange()}};if(l&&l.attr("uionly")==="true"){f=true}if(n&&n.prop("onlySupportsClientSideFieldConditions")&&h){f=true}const b=[{label:"Server",value:"server"},{label:"Client",value:"client"}];let v={id:G,type:"picklist",label:"Condition location",defaultValue:f?"client":"server",picklistEntries:f?b.filter(e=>e.value==="client"):b,readonly:f,helptext:"Server: Condition will be used to form a query directly against the data source."+" Client: Condition will only be applied to the data returned AFTER the model has received data from the data source."};let y=[m];if(B.startsWith(d,"filterable")){y.push(g)}if(h){y.push(v)}return y}function me(e,t){t=t||{};let i=e.get("xmlState"),n=i.closest("model"),o,a={id:X,label:"URL Merge Parameter Name",onChange:function n(){if(i.attr(K)!==te){i.attr(K,te);e.save()}e.refresh();if(t.handleChange)t.handleChange()}};function s(e){if(e){let t=B.extractFieldsFromTemplate(e,{ignoreGlobals:true}),i;if(t&&t.length){i=t.length-1;for(;i>=0;i--){if(t[i]===".")t.splice(i,1)}if(!o){o=t}else{Array.prototype.push.apply(o,t)}}}}if(t.url){s(t.url)}else if(n.attr(q)==="readwrite"){n.children("methods").first().children().each(function(){s(F(this).attr("endpoint"))})}else{s(n.attr("endpoint"))}if(o&&o.length){a.type="picklist";a.picklistEntries=F.map(o.sort(),function(e){return{value:e,label:e}})}else{a.type="readonly";a.value="This Model's Service URL does not contain any Merge Parameters.";a.isStateless=true}return[a]}F.extend(O,{getConditionFieldPropObj:ue,getConditionFieldProperties:pe,getConditionOperatorPropObj:fe,getConditionParameterProperties:me,getConditionValueProperties:ce,getConditionStateProperties:he,getFieldAndOperatorProperties:de});var ge=n(47);let be=e.builder.core,ve=e.utils.makeXMLDoc;function ye(e){if(!e)e={};let t=e.state,i=Object(ge["b"])(t[0]),n=t.children("conditions").children("condition").length===0;if(!i&&n){return false}return{name:"Context",tree:{id:"conditions",label:"Context Conditions",deleteable:false,isChild:true,linkedComponent:e.linkedComponent,children:[{id:"condition",labelFunction(e){let t=e.attr("field")||"Id",i=be.operatormap[e.attr("operator")||""].name,n=e.attr("mergefield")||"Id",o=e.attr("type")==="contextrows"?"rows":"row";return t+" of record"+" "+i+" "+n+" of "+o+" in context."},defaultStateFunction(){return ve('<condition type="contextrow" field="Id" mergefield="Id" />')},propsFunction(e){e.isContextCondition=true;let n=t.attr("model");if(!n){return[{type:"readonly",defaultValue:"A model must be defined on this component in order to edit context properties"}]}return[{id:"field",type:"field",label:"Field",helptext:"The field on this component's model that will be checked against a field on the row in context.",modelname:n,useAliasNamesIfAggregate:true,onChange(){e.refresh()}},{id:"mergefield",type:"field",label:"Merge Field",helptext:"The field on the row in context that will be checked against a field on this component's model.",modelname:i,onChange(){e.refresh()}},be.getConditionOperatorPropObj(e,{fieldMetadata:be.getMetadataForField(e,{modelName:n})})]}}]}}}be.getContextCategory=ye;var Ce=n(599);var _e=n(600);(function(e){let t=e.$,i=e.builder.core,n=e.utils,o=n.makeXMLDoc,a=e.model,s=e.lib.cookie,r=i.getConditionByName,l=i.getModelFromModelName,d=i.getFieldInfoFromCache,c=e.constants.DISPLAY_TYPES;function u(){return i.getPageRow().Id}function p(e){let t=e.closest("skuid__table, skuid__list, eventview, skuid__deck, skuid__filterSet"),i;if(t.is("skuid__table, skuid__list, skuid__deck, skuid__filterSet")){i=t.attr("model")}else if(t.is("eventview")){i=t.attr("groupingmodel")}return i}function f(t){let i=t.get("xmlState");t.modelName=p(i);let n={id:"action",type:"picklist",label:"Action",defaultValue:"activate",picklistEntries:[{label:"Activate and Set Value",value:"set"},{label:"Activate",value:"activate"},{label:"De-Activate",value:"deactivate"}],onChange:function e(){t.refresh().rebuildProps()}};let o={id:"condition",label:"Model Condition",modelName:t.modelName,type:"condition",onChange:function e(i,n){t.refresh().rebuildProps();if(n){s.remove(a.getConditionCookieName(t.modelName,n,u()))}}};let r=[n,o],l=i.parent().parent(),d=l&&l.is("source");if(i.attr("action")==="set"){if(d&&l.attr("type")==="model"){r.push({id:"value",label:"Value",type:"template",location:"attribute",displayAs:"input",defaultValue:"{{Id}}",onChange:function e(){t.refresh()}});return r}if(d&&l.attr("type")==="metadata"){return r}let n={id:"value",label:"Value",type:"string",onChange:function e(){t.refresh()}};let o=t.modelName;let a=i.attr("condition");if(!o||!a){r.push(n);return r}const s=e.builder.core;const c=s.getModelFromModelName(o);const u=c&&c.find('condition[name="'.concat(a,'"]'));const p=u&&u.attr("field");const f=p&&s.getFieldInfoFromCache(o,p);if(f.displaytype==="BOOLEAN"){n.type="boolean"}else{n=Object(D["b"])(n,o,a)}r.push(n)}return r}function h(e){return"__autofilter__start__"+e}function m(e){return"__autofilter__end__"+e}function g(e){return"__autofilter__nstart__"+e}function b(e){return"__autofilter__nend__"+e}function v(e){return"__autofilter__"+e}function y(e){if(!e)e={};let t=e.currentOperator,n=e.filterType,o=e.fieldName,a=e.modelName,s=n==="multiselect",r,l,u;if(s){if(a&&o){r=d(a,o);l=r?r.displaytype:false;if(l){u=i.getValidOperators({type:"multiple",displayType:l})}}if(u&&t&&t in u)return t;else if(l===c.MULTIPICKLIST){return"includes"}else{return"in"}}else{return"="}}function C(t,i){if(t.attr("type")==="manual")return true;const n=t.attr("conditionField"),o=l(i);const a=o.find('field[id="'.concat(n,'"]'));if(a.attr("uionly")==="true"){return false}const s=e.dataSource.getDataSource(o.attr("datasource"));if(s.dataSourceType.prop("onlySupportsClientSideFieldConditions")){return false}return true}function _(e,t){if(C(e,t)){return e.attr("filtermethod")||"server"}return"client"}function w(e,t){let i=e.attr("type"),a=e.attr("conditionField"),s=_(e,t),d=l(t),c=d.children("conditions"),u,p,f;if(c.length){if(i==="daterange"){f=h(a);if(!r(f,c).length){c.append(o("<condition/>").attr({type:"fieldvalue",field:a,operator:"gte",inactive:"true",enclosevalueinquotes:"false",name:f,clientorserver:s,state:"filterableoff",value:""}),o("<condition/>").attr({type:"fieldvalue",field:a,operator:"lte",inactive:"true",enclosevalueinquotes:"false",name:m(a),clientorserver:s,state:"filterableoff",value:""}))}}else if(i==="numericrange"){f=g(a);if(!r(f,c).length){c.append(o("<condition/>").attr({type:"fieldvalue",field:a,operator:"gte",inactive:"true",enclosevalueinquotes:"false",name:f,clientorserver:s,state:"filterableoff",value:""}),o("<condition/>").attr({type:"fieldvalue",field:a,operator:"lte",inactive:"true",enclosevalueinquotes:"false",name:b(a),clientorserver:s,state:"filterableoff",value:""}))}}else if(n.contains(i,"select")){u=v(a);p=i==="multiselect";if(!r(u,c).length){c.append(o("<condition/>").attr({type:p?"multiple":"fieldvalue",field:a,operator:y({fieldName:a,modelName:t,currentOperator:e.attr("conditionoperator"),filterType:i}),inactive:"true",enclosevalueinquotes:"true",name:u,clientorserver:s,state:"filterableoff",value:""}))}}}}function x(e,i,o){let r=o||e.attr("type"),d=e.attr("conditionField"),c=l(i),p=c.children("conditions").children(),f,y,C;if(!d)return;if(p.length){if(r==="daterange"){C=h(d);y=m(d);s.remove(a.getConditionCookieName(i,C,u()));s.remove(a.getConditionCookieName(i,y,u()));p.each(function(){let e=t(this),i=e.attr("name");if(i===C||i===y){e.remove()}})}else if(r==="numericrange"){C=g(d);y=b(d);s.remove(a.getConditionCookieName(i,C,u()));s.remove(a.getConditionCookieName(i,y,u()));p.each(function(){let e=t(this),i=e.attr("name");if(i===C||i===y){e.remove()}})}else if(n.contains(r,"select")){f=v(d);s.remove(a.getConditionCookieName(i,f,u()));p.each(function(){let e=t(this);if(e.attr("name")===f){e.remove();return false}})}}}function k(e,i,o){let r=e.attr("type"),d=e.attr("conditionField"),c=l(i),p=c.children("conditions").children(),f=false,C=false,x=false,k,S,I,T,A,P;const E=_(e,i);if(p.length){if(r==="daterange"){P=h(o);A=m(o);I=h(d);k=m(d);p.each(function(){let e=t(this),n=e.attr("name"),o=n===P,r=n===A;if(o||r){if(o){x=true;e.attr("name",I)}else if(r){C=true;e.attr("name",k)}e.attr("field",d);e.attr("clientorserver",E);s.remove(a.getConditionCookieName(i,n,u()))}});if(!x||!C){w(e,i)}}else if(r==="numericrange"){P=g(o);A=b(o);I=g(d);k=b(d);p.each(function(){let e=t(this),n=e.attr("name"),o=n===P,r=n===A;if(o||r){if(o){x=true;e.attr("name",I)}else if(r){C=true;e.attr("name",k)}e.attr("field",d);e.attr("clientorserver",E);s.remove(a.getConditionCookieName(i,n,u()))}});if(!x||!C){w(e,i)}}else if(n.contains(r,"select")){T=v(o);S=v(d);p.each(function(){let n=t(this);if(n.attr("name")===T){f=true;n.attr({name:S,clientorserver:E,field:d,operator:y({fieldName:d,modelName:i,currentOperator:e.attr("conditionoperator"),filterType:r})});s.remove(a.getConditionCookieName(i,T,u()));return false}});if(!f){w(e,i)}}}}t.extend(i,{getEffectItemProperties:f,removeModelConditionsForAutoFilter:x,getFilterDefaultModelName:p,adjustFieldForAutoFilterConditions:k,filterSupportsServer:C,addModelConditionsForAutoFilter:w,getSelectAutoFilterConditionName:v,getDateRangeAutoFilterEndConditionName:m,getDateRangeAutoFilterStartConditionName:h,getNumericRangeAutoFilterStartConditionName:g,getNumericRangeAutoFilterEndConditionName:b})})(e);var we=n(601);var xe=n(602);var ke=n(603);(function(e){const t=e.$,i=e.builder.core,n=e.utils,o=e.constants,a=o.DISPLAY_TYPES,s=o.SALESFORCE,r=i.getDefaultAliasName,l="Allow Page Render Before Query Completes",d="Intercept Response Payload",c="aggregate";function p(e){if(!e)e={};let i=[];let n=e.state;let o;if(n&&n.attr("batch")==="true"){i.push("POST")}else{i.push("DELETE")}o={query:["GET","POST"],insert:["POST"],update:["PUT","PATCH","POST"],delete:i};return{id:"verb",type:"picklist",label:"Data Source HTTP Verb",defaultValue:"GET",picklistEntries:t.map(o[e.type||"query"],function(e){return{value:e,label:e}}),onChange:e.onChange}}function f(e){let i=e.component,o=i.get("xmlState"),s=o.is("model"),r=s?o:o.closest("model");return{id:"pathtocontent",type:"field",ignorePathToContent:true,displayTypeFilter:[a.OBJECT,a.ARRAY],modelprop:s?"id":false,modelName:s?false:r.attr("id"),label:"Path to Contents",helptext:"The path through the result of this GET request to the desired contents of this Model.",onChange:function e(o,a,s,l){r.children("fields").children().each(function(){let e=t(this),i=e.attr("id"),a;if(o&&n.startsWith(i,o)){a=i.substring(o.length+1)}else if(!o&&l){a=l+"."+i}e.attr("id",a)});i.save().refresh()}}}function h(e,t,i={}){const n=[],o=i.isLocked,a=i.filter,s=i.autoClearStateOnChange===false?false:true,r=w({autoClearStateOnChange:s,component:e,filter:a,isLocked:o,propViewer:t}),l=x({autoClearStateOnChange:s,component:e,isLocked:o,propViewer:t});if(r)n.push(r);if(l)n.push(l);return n}function m(e,t){return e.label.localeCompare(t.label)}function g(e,t){if(e.value===s)return-1;if(t.value===s)return 1;return m(e,t)}function b(i){return t.map(e.dataSource.map(),function(e,t){if(e.getDataSourceTypeName()===i){if(Object(u["a"])(t)){return}return{value:t,label:t===s?"Current Salesforce Org":t}}}).sort(g)}function v(e){e.children("fields, groupby, conditions, actions, methods").empty();const n=i.getDataSourceFromModel(e),o=n.getDataSourceType(),a=["datasource","id","limit","query","service","unloadwarningifunsavedchanges"],s=t.map(e.attr(),(e,t)=>{if(!a.includes(t)){return t}}).join(" ");e.removeAttr(s);if(o&&o.onDataSourceChange)o.onDataSourceChange(e)}function y(n){let o=n.component,a=n.propViewer;return{id:"id",type:"string",label:"Model Id",helptext:"A unique identifier for this Model. Can only contain letters, numbers, or underscores.",validator:function e(t){return i.validators.modelId(t,o)},onChange:function n(s,r){if(o.headerTitle){o.headerTitle.text(o.builder.name+" - "+s)}else if(o.getElement()){let e=t(o.getElement());e.find(".nx-pagebuilder-modeltag").children().eq(1).text(s);e.find(".nx-pagebuilder-fieldtag").attr("data-model",s)}if(a)a.setTitle(o.builder.name+" - "+s);i.publishStateEvent({type:"model.idChange",oldId:r,newId:s});e.events.publish("skuidBuilderRefreshModelList")}}}function C({component:e,propViewer:t}){return{id:"type",helptext:"Basic Models allow for reading, creating, and modifying data. Aggregate Models are read-only, and enable retrieval of grouped, aggregated data from Data Sources.",type:"picklist",label:"Model Behavior",picklistEntries:[{label:"Basic",value:""},{label:"Aggregate",value:c}],onChange:function i(n,o){let a=e.get("xmlState");a.children("fields, groupby").empty();if(n===c){a.attr("limit","")}else if(n===""&&o===c){a.removeAttr("limit")}e.save().refresh().rebuildProps(t)}}}function _(t){const i=e.dataSource.listByType();return e.snippet.get("skuid.settings.dataSources.getDataSourceTypePicklistEntries")(n=>{const o=n.value,a=e.dataSource.getDataSourceType(o);return i[o]&&i[o].length&&(t?t(a):true)},m)}function w(t){let o=t.component,a=t.propViewer,s=t.isLocked,r=t.filter,l=o.get("xmlState"),d=e.dataSource.listAllTypes(),c;["datasourcetype","adapter"].forEach(function(e){if(!n.isUndefined(l.attr(e))){l.removeAttr(e)}});if(d.length){c={id:"datasourcetype",isStateless:true,valueFunction:function e(){return i.getDataSourceFromModel(o.get("xmlState")).getDataSourceTypeName()},type:"picklist",label:"Data Source Type",picklistEntries:_(r),readonly:s===true,onChange:function e(n,s){let r=b(n);o.dataSourceTypeValue=n;if(r&&r[0]){i.recordDataSourceSelection(r[0].value);l.attr("datasource",r[0].value)}if(typeof n!=="undefined"&&typeof s!=="undefined"&&t.autoClearStateOnChange!==false){v(l)}o.save().refresh().rebuildProps(a)}}}return c}function x(t){let n="datasource",o="service",a=t.component,s=t.propViewer,r=t.isLocked,l=a.get("xmlState"),d=e.platform.getDefaultDataSourceTypeName(),c=i.getDataSourceFromModel(l),u=a.dataSourceTypeValue||c&&c.dataSourceTypeName||d,p=l.attr(n)||l.attr(o),f=b(u).filter(t.filter||function(){return true}),h;let m=l.attr(o),g=l.attr(n);if(f.length>0){if(m){if(!g){l.attr(n,m)}l.removeAttr(o)}if(u===d&&!p){l.attr(n,e.platform.getDefaultDataSourceName());a.save()}else if(typeof c==="undefined"){t.autoClearStateOnChange=false;f.unshift({value:p,label:"* "+p+" (invalid)"})}h={id:n,type:f&&f.length>1?"picklist":"readonly",label:"Data Source",picklistEntries:f,readonly:r===true,onChange:function e(n,o){if(typeof n!=="undefined"&&typeof o!=="undefined"&&t.autoClearStateOnChange!==false){v(l)}i.recordDataSourceSelection(n);a.save().refresh().rebuildProps(s)}}}return h}function k(e){let t=e.component,i=e.propViewer,n=e.isDataSourceLocked,o=[y({component:t,propViewer:i})],a=w({component:t,propViewer:i,isLocked:n,filter:function e(t){return t.modelable!==false}}),s=x({component:t,propViewer:i,isLocked:n});if(a)o.push(a);if(s)o.push(s);return o}function S(){return[{id:"label",type:"string",label:"Model Label"},{id:"labelplural",type:"string",label:"Model Plural Label"}]}function I(e){let t=e.component,i=t.get("xmlState"),n=i&&i.attr("datasource")==="Ui-Only",o;if(i.closest("skuid__page").attr("unsavedchangeswarning")==="yes"){o={id:"unloadwarningifunsavedchanges",type:"boolean",defaultValue:n?false:true,label:"Prevent users from leaving page if this Model has unsaved changes",helptext:"This Skuid Page has been configured to prevent users from navigating away from it if any of its Models have unsaved changes. Uncheck this property to tell Skuid to ignore this particular Model when performing its check for unsaved changes."}}return o}function T(e){let t=e.component,i=e.propViewer;return{id:"query",type:"boolean",label:"Query on Page Load",helptext:"If true, an initial query for data on this model will be performed upon page load.  If false, the model will not be queried on page load, meaning it will contain no data and must be queried by other means.",defaultValue:true,onChange:function e(n){let o=i.body,a=o.find("div:contains('"+l+"')").last(),s=a.parent(),r=s.find("input");if(n){a.removeClass("nx-basicfieldeditor-item-disabled");r.prop("disabled",false)}else{a.addClass("nx-basicfieldeditor-item-disabled");r.prop("disabled",true)}t.save()}}}function A(){return{id:"limit",type:"string",label:"Max # of records (Limit)",helptext:"The maximum number of data records to pull in to this Model, out of all data records that match the Model's Conditions",defaultValue:"20"}}function P(){return{id:"orderby",type:"string",label:"Fields to order records by",helptext:"How to order the data records pulled in to this Model, e.g. 'LastName DESC, FirstName' would order by LastName going from Z to A, then by FirstName going from A to Z (this is the ORDER BY clause of the generated query)."}}function E(){return{id:"batchable",type:"boolean",label:"Request data in the same transfer as other Models",defaultValue:true,helptext:"By default, if the data source supports it, all Models will be requested together and merged by the data server. Set to false if this Model should be requested separately by default."}}function M(e){return{id:"createrowifnonefound",type:"boolean",label:"Create default row if Model has none",defaultValue:!!e,helptext:"Typically used for Pages functioning as Overrides for the 'New' action. If true, then when this Page loads, if no data records exist in the Model, then a default row will be automatically created."}}function D(e){let t=e.component,i=t.get("xmlState"),n=i.attr("query")==="true",o=e.defaultValue;return{id:"async",type:"boolean",label:l,defaultValue:!!o,disabled:!n,init:function e(t){t=t||{};let i=t.label;if(this.disabled){this.readonly=true;if(i)i.addClass("nx-basicfieldeditor-item-disabled")}},helptext:"If true, the Skuid page will proceed to render while this initial query takes place (Useful for large data sets or slower data sources that may delay page rendering). If false, the Skuid page will not render until this models initial query is completed."}}function N(e){return{id:"deferfieldrendering",type:"boolean",label:"Defer Rendering",defaultValue:!!e,helptext:"Some entities require multiple queries to be made at a single time.  This allows you to specify if fields should be rendered before any additional requests are made, if those fields require an additional request.  If checked, these fields will be loaded asynchronously."}}function F(e){let i=e.get("xmlState"),n=i.children("fields").children("field");return{id:"fieldstodefer",type:"multipicklist",label:"Fields To Defer",picklistEntries:t.map(n,function(e){e=t(e);return{label:e.attr("id"),value:e.attr("id")}})}}function O(){return{id:"cacheforoffline",type:"boolean",label:"Allow skuid to cache this model's data for offline use.",defaultValue:true}}function R(e,t){let n=e.get("xmlState"),o=i.getDataSourceFromModel(n),a=o.getDataSourceType();return a&&a.getModelProperties(e,t,o)}function L(o){function s(e){let i=[],n={Checkbox:{value:a.BOOLEAN,label:"Checkbox"},Currency:{value:a.CURRENCY,label:"Currency"},Date:{value:a.DATE,label:"Date"},Datetime:{value:a.DATETIME,label:"Datetime"},Email:{value:a.EMAIL,label:"Email"},Formula:{value:a.FORMULA,label:"Formula"},Percent:{value:a.PERCENT,label:"Percent"},Picklist:{value:a.PICKLIST,label:"Picklist"},MultiPicklist:{value:a.MULTIPICKLIST,label:"Multi-select Picklist"},Number:{value:a.DOUBLE,label:"Number"},Reference:{value:a.REFERENCE,label:"Reference"},Text:{value:a.TEXT,label:"Text"},Textarea:{value:a.TEXTAREA,label:"Textarea"},Url:{value:a.URL,label:"Url"},UUID:{value:a.UUID,label:"Unique Id (UUID)"}},o=0;if(e){e=e.sort();for(;o<e.length;o++){i.push(n[e[o]])}}else{i=t.map(n,function(e){return e})}return i}let l=o.component,d=l.get("xmlState"),u=d.closest("model").first(),p=u.attr("type")===c,f=d.parent().is("groupby"),m=e.dataSource.get(u.attr("datasource")||u.attr("service")||e.platform.getDefaultDataSourceName()),g=m.dataSourceType,b=g.prop("isUiOnly"),v=s(),y=d.attr("id"),C=d.attr("name"),_=d.attr("readonly")==="true",w=d.attr("uionly")==="true"||b,x=w?null:i.getMetadataForField(l,{readMetadataFromFieldNode:false}),k=g&&g.prop("runtime.metadataSource"),S=k==="local"||k==="hybrid",I=d.attr("overridemetadata")==="true",T=o.propViewer,A=T,P,E,M,D,N,F,O,R,L,B,j,U,V,H,q,z,W,G,Y,X,K,$,Q,J,Z,ee,te,ie,ne;function oe(){let e="Field: "+i.getModelFieldComponentLabel(d);if(p){e=(f?"Grouping ":"Aggregation")+" "+e}A.setTitle(e)}if(p&&!w){Q=[];if(!f){if(g&&g.getAggregateFieldProperties){n.mergeArrays(Q,g.getAggregateFieldProperties(l,T))}}else if(f){if(g&&g.getAggregateGroupingProperties){n.mergeArrays(Q,g.getAggregateGroupingProperties(l,T,x))}}Q.push({id:"name",type:"string",label:"Alias Name",helptext:"An alias for this field to be used in Components that refer to it. Must be alphanumeric and have 3-25 characters.",onChange:function e(t){if(!t){d.attr("name",r(d.attr("id"),d.attr("function")))}l.save().refresh();oe()}});oe();return[{name:"Basic",props:Q}]}H={id:"id",type:"string",readonly:!w&&!S,label:"Field Id",validator:function e(t){return i.validators.fieldId({field:d,model:u,newFieldId:t})},onChange:function e(){oe();l.refresh()}};Y={id:"overridemetadata",type:"boolean",label:"Override field metadata",defaultValue:false,onChange:function e(t){let i;if(x&&x.displaytype){if(!d.attr("ogdisplaytype")){d.attr("ogdisplaytype",x.displaytype)}i=x.displaytype;if(t){switch(i){case a.ADDRESS:case a.ENCRYPTEDSTRING:case a.ID:case a.LOCATION:case a.OBJECT:case a.PHONE:case a.STRING:i=a.TEXT;break;case a.INTEGER:i=a.DOUBLE;break}}d.attr("displaytype",i);l.save()}l.rebuildProps(T)}};E=[H];if(!w&&!S){E.push(Y)}if(S&&!b){E.push({type:"boolean",id:"uionly",defaultValue:false,label:"Ui-Only",helptext:"If true, then this field will not be sent with any insert or update requests, and will not be requested as part of any queries."})}if(w||I||S){D=a.TEXT;z={id:"label",type:"template",modelName:u.attr("id"),location:"attribute",displayAs:"input",label:"Label",onChange:function e(t){i.publishStateEvent({type:"model.field.metadataChange",fieldId:y,fieldName:C,modelId:u.attr("id"),changes:{label:t},newMetadata:d})}};U={id:"helptext",displayAs:"textarea",label:"Inline Help Text",type:"string"};X={id:"placeholder",displayAs:"input",label:"Placeholder",location:"attribute",type:"template"};G={id:"required",label:"Required",type:"boolean"};$={id:"precision",label:"Length",type:"picklist",helptext:"Number of digits to the LEFT of the decimal point",defaultValue:w?"9":"",picklistEntries:[]};Z={id:"returntype",label:"Return Type",type:"picklist",required:true,defaultValue:a.TEXT,picklistEntries:[{value:a.BOOLEAN,label:"Checkbox"},{value:a.CURRENCY,label:"Currency"},{value:a.DATE,label:"Date"},{value:a.DATETIME,label:"Datetime"},{value:a.PERCENT,label:"Percent"},{value:a.DOUBLE,label:"Number"},{value:a.TEXT,label:"Text"}],onChange:function e(){l.rebuildProps(T)}};B={id:"formula",label:"Edit Formula",type:"formula",location:"node",modelName:u.attr("id"),fieldState:d,showLabel:false};te={id:"scale",label:"Decimal Places",type:"picklist",helptext:"Number of digits to the RIGHT of the decimal point",defaultValue:w?"2":"",picklistEntries:[]};J={id:"readonly",label:"Read-Only",type:"boolean"};P=i.getConditionValueProperties(l,{handleChange:function e(){l.refresh()},handleRefresh:function e(){l.rebuildProps&&l.rebuildProps();l.renderProperties&&l.renderProperties(T)},validTypes:["fieldvalue","multiple","param","userinfo","blank","modelmerge","join"],modelName:u.attr("id"),isDefaultValueField:true});ne={id:"displayasrichtext",label:"Rich text",type:"boolean",helptext:""};if(x&&x.required){G.isStateless=true;G.readonly=true;G.value=true}if(I&&x){ee=x.scale;K=x.precision;te.picklistEntries.push({value:"",label:"(Use field default"+(ee?": "+ee:"")+")"});$.picklistEntries.push({value:"",label:"(Use field default"+(K?": "+K:"")+")"})}V=0;while(V<18){$.picklistEntries.push({value:""+V,label:""+V});if(V<10){te.picklistEntries.push({value:""+V,label:""+V})}V++}if(!w&&x){if(x.label)z.placeholder=x.label;if(x.inlineHelpText)U.placeholder=x.inlineHelpText}F=d.attr("displaytype")||D;if(!(w||S)){switch(d.attr("ogdisplaytype")||d.attr("displaytype")){case a.BOOLEAN:O=s(["Checkbox","Formula","Picklist"]);break;case a.CURRENCY:O=s(["Currency","Formula","Number","Text","Textarea","Picklist"]);break;case a.DATE:O=s(["Date","Datetime","Formula","Text"]);break;case a.DATETIME:O=s(["Date","Datetime","Formula","Text"]);break;case a.EMAIL:O=s(["Email","Formula","Text","Textarea","Url","Picklist"]);break;case a.INTEGER:case a.DOUBLE:O=s(["Formula","Currency","Number","Text","Textarea","Picklist","Reference"]);break;case a.PERCENT:O=s(["Formula","Currency","Number","Percent","Text","Textarea","Picklist"]);break;case a.LOCATION:O=s(["Formula","Number","Text","Textarea"]);break;case a.PHONE:O=s(["Formula","Number","Text","Textarea","Picklist"]);break;case a.PICKLIST:O=s(["Formula","Text","Textarea","MultiPicklist","Picklist"]);break;case a.MULTIPICKLIST:O=s(["Formula","Text","Textarea","Picklist","MultiPicklist"]);break;case a.REFERENCE:O=s(["Formula","Text","Textarea","Reference"]);break;case a.STRING:case a.ENCRYPTEDSTRING:case a.TEXT:case a.TEXTAREA:O=s(["Email","Formula","Currency","Number","Text","Textarea","Picklist","MultiPicklist","Reference","UUID"]);break;case a.URL:O=s(["Email","Formula","Text","Textarea","Url","Picklist"]);break;default:O=v;break}}else{O=v}if(F===a.ARRAY){O.unshift({value:a.ARRAY,label:"Array"})}R={id:"displaytype",label:"Display Type",type:"picklist",defaultValue:D,picklistEntries:O,onChange:function e(t,n){if(!d.attr("ogdisplaytype")){d.attr("ogdisplaytype",n)}l.save().rebuildProps(T);i.publishStateEvent({type:"model.field.metadataChange",fieldId:y,fieldName:C,modelId:u.attr("id"),changes:{displaytype:t},newMetadata:d})}};q=d.attr("displaytype")===a.FORMULA;E.push(z,U,R);if(!_)E.push(G);if(t.inArray(F,[a.PICKLIST,a.MULTIPICKLIST,a.COMBOBOX])>-1){const e="manual";if(!d.attr("picklistsource"))d.attr("picklistsource",e);const t={id:"picklistsource",label:"Picklist Source",type:"picklist",defaultValue:e,picklistEntries:[{value:"manual",label:"Manual"},{value:"rowsinmodel",label:"Rows in Model"},{value:"snippet",label:"Snippet"}],onChange:function e(){l.save().rebuildProps(T)}};E.push(t,Z);if(d.attr("picklistsource")==="snippet"){E.push({id:"snippet",label:"Snippet",helptext:"A snippet that returns an array in the form of [{value, label}, ...] for picklist entries",type:"snippet",location:"attribute"})}}if(!q){E.push(J)}else{E.push({label:"Read-Only",id:"readonly",type:"custom",renderProperty:function e(t){const n=t.state;if(n.attr("readonly")!=="true"){n.attr("readonly","true");l.save()}i.propertyRenderers.boolean({isStateless:true,value:true,readonly:true},n).appendTo(t.element)}})}if(F===a.PICKLIST||F===a.MULTIPICKLIST||F===a.COMBOBOX){ie=d.attr("picklistsource");if(F===a.COMBOBOX){E.push({id:"limitentries",label:"Restrict Input to Picklist Entries",type:"boolean",defaultValue:false,helptext:"By default, users can enter values that do not correspond the specified picklist entries. If this property is checked, then users must select one of the provided picklist entries, otherwise their input will be discarded."})}M=[{name:"Basic",props:E}];if(ie==="manual"){M.push({name:"Picklist Entries",tree:{id:"picklistentries",label:"Picklist Entries",deleteable:false,icon:"sk-bi-options",isChild:true,children:[{id:"entry",labelFunction:function e(t){return t.attr("label")||"[No Label]"},defaultStateFunction:function e(){return n.makeXMLDoc('<entry value="New Entry" label="New Entry"/>')},propsFunction:function e(t){return[{id:"value",label:"Value",type:"string"},{id:"label",label:"Label",type:"template",displayAs:"input",location:"attribute",onChange:function e(){t.save().refresh()}}]}}]}})}else if(ie==="rowsinmodel"){M.push({name:"Picklist Model",props:[{id:"picklistmodel",type:"model",label:"Model"},{id:"entryvalue",type:"template",label:"Entry Value",defaultValue:"{{Id}}",location:"attribute",displayAs:"input"},{id:"entrylabel",type:"template",label:"Entry Label",defaultValue:"{{Name}}",location:"attribute",displayAs:"input"}]})}}else if(F===a.REFERENCE){const e=i.getDataSourceFromModel(d),t=e.getDataSourceType(),n=t.getReferenceHandler&&t.getReferenceHandler();let o=h(l,T,{autoClearStateOnChange:false,filter:e=>!!e.getReferenceHandler});if(n){if(n.getBaseReferenceProps){o=o.concat(n.getBaseReferenceProps(l))}o.push({id:"keyfield",type:"string",placeholder:'e.g. "id"',label:"Related Entity: Key Field",helptext:"The name of the primary key / id field on the related entity that will be used as the key to link the data."},{id:"rel",type:"string",label:"Relationship Field Name",helptext:"The name of the (Ui-Only) field that will be created, if it does not exist already, to store related information about the referenced record."})}else{o.push({type:"helptext",html:"This Data Source Type does not support referencing."})}M=[{name:"Basic",props:E}];const a=[{label:"Reference Setup",linkedComponent:l,deleteable:false,props:o}];let s="Related-data fields";if(n){if(n.getOverrideSearchProperties){a.push({label:"Search Route",linkedComponent:l,deleteable:false,props:n.getOverrideSearchProperties(l)})}if(n.getBatchFieldsCategoryLabel){s=n.getBatchFieldsCategoryLabel()}a.push({id:"batchfields",label:s,linkedComponent:l,isChild:true,deleteable:false,propsFunction:function e(t){if(n.getOverrideBatchProperties){return n.getOverrideBatchProperties(t)}else{return[]}},noItemsFunction:n.getOverrideBatchNoItemsFunction&&n.getOverrideBatchNoItemsFunction(l),childrenFunction:n.getOverrideBatchFieldChildrenFunction&&n.getOverrideBatchFieldChildrenFunction(l)})}M.push({name:"Reference",tree:a})}else if(t.inArray(F,[a.DOUBLE,a.CURRENCY,a.PERCENT])!==-1){M=[{name:"Basic",props:E.concat($,te)}]}else if(F===a.INTEGER){N={id:"digits",label:"Length",type:"picklist",defaultValue:w?"9":"",picklistEntries:[]};if(!w){N.picklistEntries.push({value:"",label:"(Use field default"+(x?": "+x.digits:"")+")"})}V=0;while(V<18){N.picklistEntries.push({value:""+V,label:""+V});V++}M=[{name:"Basic",props:E.concat(N)}]}else if(t.inArray(F,[a.TEXT,a.TEXTAREA,a.STRING])!==-1){W={id:"length",label:"Length",type:"string",helptext:"The maximum number of characters that can be entered in this field",defaultValue:w?"255":""};if(!w&&x&&x.length){W.placeholder="Default: "+x.length}M=[{name:"Basic",props:x&&x.htmlFormatted?E.concat(W):E.concat(X,W)}];if(F===a.TEXTAREA){M[0].props.push(ne)}}else if(t.inArray(F,[a.PHONE,a.URL,a.EMAIL])!==-1){M=[{name:"Basic",props:E.concat(X)}]}else if(F===a.FORMULA){Z.label="Formula Return Type";Z.required=true;j=E.concat(Z);if([a.DOUBLE,a.CURRENCY,a.PERCENT].includes(d.attr("returntype"))){j.push($,te)}j.push(B);M=[{name:"Basic",props:j}]}else if(F===a.ARRAY){M=[{name:"Basic",props:E}];R.readonly=true}else{M=[{name:"Basic",props:E}]}if(F!==a.FORMULA){M.push({name:"Default Items",props:P})}}else{L=d.attr("displaytype")||x&&x.displaytype;if(L){E.push({label:"Display Type",id:"displaytype",type:"string",isStateless:true,value:L,readonly:true})}M=[{name:"Basic",props:E}]}oe();return M}function B(e){let t=e.component,o=t.get("xmlState").closest("model"),a=i.getDataSourceFromModel(o),s=a.getDataSourceType(),r=e.propertiesViewer,l=[],d;if(s){if(n.isFunction(s.prop("canConditionsBeGrouped"))){d=s.prop("canConditionsBeGrouped")(o)}else d=s.prop("canConditionsBeGrouped")}if(d){l.push({id:"logic",type:"string",label:"Grouping Logic",helptext:"How to group and apply these Conditions when loading the Model, e.g. ((1 AND 2) OR (3 AND 4)). By default, all Conditions are applied."})}r.setTitle((s?s.prop("composer.modelConditionsLabel"):"")||"Conditions");return l}function j(){return{id:"idfields",filter:[a.INTEGER,a.DOUBLE,a.PICKLIST,a.STRING,a.TEXT,a.UUID],label:"Id Field / Primary Key",maxSelected:5,modelProp:"id",noneSelectedText:"Select Field...",type:"multifield"}}function U(){return{id:"namefield",displayTypeFilter:[a.FORMULA,a.PICKLIST,a.STRING,a.TEXT,a.UUID],label:"Name Field",location:"attribute",storeAs:{type:"attribute"},maxSelected:1,modelProp:"id",noneSelectedText:"Select Field...",type:"multifield"}}function V(e){return{id:"requestBodyFields",label:"Additional Fields to Send In Request Body",modelName:e,noneSelectedText:"Select Field...",type:"multifield"}}function H(e){let t=e.component,i=e.propertiesViewer;return{id:"useresponsesnippet",type:"boolean",label:d,helptext:"Typically used to modify a payload for Skuid use. Skuid will run a snippet that receives the initial payload as an argument. The value returned by the snippet is then treated as if it were the payload of the request.",defaultValue:false,onChange:function e(n){let o=i.body,a=o.find("div:contains('"+d+"')").last();if(n){a.addClass("nx-basicfieldeditor-item-disabled")}else{a.removeClass("nx-basicfieldeditor-item-disabled")}t.rebuildProps()}}}function q(e){return{id:"payloadcontenttype",helptext:"Determines the response format Skuid should expect after a query.",type:"picklist",label:"Response Format",picklistEntries:[{label:"JSON",value:"JSON"},{label:"XML",value:"XML"}],defaultValue:"JSON",onChange:e.onChange}}function z(e){return{id:"paginationmethod",type:"picklist",label:"Pagination Method",picklistEntries:[{label:"--None--",value:""},{label:"Single URL Parameter",value:"simple"}],defaultValue:"",onChange:e.onChange}}function W(e){return{id:"limitmethod",type:"picklist",label:"Limit Method",picklistEntries:[{label:"--None--",value:""},{label:"Single URL Parameter",value:"simple"}],defaultValue:"",onChange:e.onChange}}t.extend(i,{getAllModelFieldsProperty:V,getAsyncLoadProperty:D,getCacheProperty:O,getConditionsBuilderProperties:B,getCoreModelBasicProperties:k,getCreateDefaultRowProperty:M,getDeferFieldRenderingProperty:N,getLimitMethodProperty:W,getPaginationMethodProperty:z,getFieldsToDeferProperty:F,getDataSourceAccessMethodProperty:p,getDataSourceSelectionProps:h,getDataSourcesOfType:b,getModelFieldProperties:L,getModelIdFieldProperty:j,getModelLabelProperties:S,getModelLimitProperty:A,getModelNameFieldProperty:U,getModelOrderByProperty:P,getModelBatchProperty:E,getModelProperties:R,getModelQueryOnPageLoadProperty:T,getModelTypeProperty:C,getPathToContentProperty:f,getPayloadContentTypeProperty:q,getResponseInterceptionProperty:H,getUnsavedChangesWarningProperty:I})})(e);var Se=n(604);var Ie=n(605);var Te=n(606);class Ae{constructor(t,i={}){this.element=e.$("<div>");const n={componentType:"skuidbuilder__componentAcceptor",componentsXML:t};["customBuilder","acceptsBuilderIds","rejectsBuilderIds","requiresModels","requiresDatasources","requiresEntities","requiresGlobalComponent","mode","subtleTitle","layout"].forEach(e=>{if(i[e]!==undefined){n[e]=i[e]}});this.acceptorComponent=e.component.createFromDefinition(n,{element:this.element});if(i.parentComponent){i.parentComponent.subscribe("beforeUnregister",()=>this.acceptorComponent.unregister())}}get acceptorElement(){return this.element}get componentsXML(){return this.acceptorComponent.get("componentsXML")}set componentsXML(e){this.acceptorComponent.set("componentsXML",e)}isEmpty(){return this.acceptorComponent.getCPI().isEmpty()}canAcceptComponent(e){return this.acceptorComponent.getCPI().canAcceptComponent(e)}refresh(){}addComponent(e){return this.acceptorComponent.getCPI().addComponent(e)}addClass(e){this.acceptorComponent.getCPI().addClass(e)}setStyle(e){this.acceptorComponent.getCPI().setStyle(e)}}var Pe=n(607);var Ee=n(21);let Me=e.$,De=e.builder,Ne=De.core,Fe=e.utils;class Oe{constructor(){let t=this;this.element=Me("<div>").addClass("nx-pagebuilder-components-inner");this.components=[];this.folders=[];function i(e){let t=e.data("builder"),i=De.pagebuilderui.cproperties,n;i.clear();i.setTitle(t.name);if(t.helplink){i.header.prepend(Me("<a>").css({float:"right","font-size":"7pt"}).attr({target:"_blank",href:t.helplink}).append(Me("<div>").text(t.name+" Help").css({display:"inline-block","vertical-align":"middle"}),Me("<div>").addClass("inline sk-icon sk-icon-help").css({margin:"8px","vertical-align":"middle"})))}let o=t.description;if(Fe.isFunction(o)){n=o()}else{n=o}De.pagebuilderui.cproperties.body.empty().append(Me("<div>").addClass("nx-pagebuilder-infotext").html(n))}function n(n,o,a){const s=Me("<div>").addClass("nx-pagebuilder-componenttag nx-pagebuilder-tag").attr({"data-ctype":o.id,draggable:"true"}).data({builder:o}).append(Me("<div>").addClass("nx-pagebuilder-tag-icon").append(e.ui.createIcon(o.icon||"sk-webicon-ink:components")),Me("<div>").addClass("nx-pagebuilder-tag-text").text(o.name)).appendTo(a);s[0].ondragstart=(t=>{i(s);e.builder.dragDrop.standardDragStart(t,o.name,o.icon,new Ee["c"](new Ee["b"]({builderId:o.id,isGlobalComponent:true}),new Ee["a"]({builderToUse:o})));e.builder.dragDrop.dragData.builderToUse=o});s[0].ondragend=(t=>{e.builder.dragDrop.standardDragEnd(t,o.name,o.icon)});t.components.push(s)}function o(i,n,o){let s=Me("<div>").addClass("nx-pagebuilder-folderwrapper"),r=Me("<div>").addClass("nx-pagebuilder-foldertag nx-pagebuilder-tag").append(Me("<div>").addClass("nx-pagebuilder-tag-icon"+(n.autoopen?" nx-pagebuilder-foldertag-open":"")).append(e.ui.createIcon("sk-webicon-ink:chevron-small-down",{additionalClass:"sk-arrow-down-icon"}),e.ui.createIcon("sk-webicon-ink:chevron-small-right",{additionalClass:"sk-arrow-right-icon"})),Me("<div>").addClass("nx-pagebuilder-tag-text").text(n.name)),l=Me("<div>").addClass("nx-pagebuilder-foldercomponentswrapper");if(n.autoopen){l.show()}else{l.hide()}s.append(r,l);o.append(s);a(n.components,l);t.folders.push(s)}function a(t,i){if(Fe.size(t)>0){Me.each(t,function(t){let o=this.builder;if(o){if(o.hideFromComponentsList){return true}n(t,o,i)}else{e.component.getByType("skuid__page")[0].addProblem("Could not load the builder for the "+t+" component.")}})}}this.filterComponents=function(e){let i,n,o;if(this.prevFilter===undefined||this.prevFilter===""){for(i=0;i<t.folders.length;i++){n=Me(t.folders[i]).find(".nx-pagebuilder-foldertag");o=Me(t.folders[i]).find(".nx-pagebuilder-foldercomponentswrapper");o.data("prevDisplay",o.css("display"));o.show();n.hide()}}if(e===""){for(i=0;i<t.folders.length;i++){n=Me(t.folders[i]).find(".nx-pagebuilder-foldertag");o=Me(t.folders[i]).find(".nx-pagebuilder-foldercomponentswrapper");o.css("display",o.data("prevDisplay"));n.show()}}for(i=0;i<t.components.length;i++){let n=Me(t.components[i]);let o=n.data("builder").name.toLowerCase().split(" ").join("");if(o.match(e.toLowerCase().split(" ").join(""))){n.show()}else{n.hide()}}this.prevFilter=e};const{activeFolders:s,noFolderComponents:r}=Ne.getAvailableComponentsWithFolders();a(r,t.element);Me.each(s,(e,i)=>o(e,i,t.element));this.element.on("dblclick",".nx-pagebuilder-componenttag",function(){let e=Me(this),t=e.data("builder"),i=e.data("generateOptions"),n=t.setUniqueId!==false;mt(t.getDefaultState(i,{setUniqueId:n}),{customBuilder:t}).then(e=>Object(E["a"])(e,"dblclick"))}).on("click",".nx-pagebuilder-componenttag",function(){i(Me(this))}).on("click",".nx-pagebuilder-foldertag",function(){let e=Me(this);e.find(".nx-pagebuilder-tag-icon").toggleClass("nx-pagebuilder-foldertag-open");Fe.niceExpand(e.parent(),e.parent().children(".nx-pagebuilder-foldercomponentswrapper").first(),0)})}}let Re=e.$,Le=e.builder,Be=Le.core,je=e.utils,Ue=je.makeXMLDoc,Ve=e.events.publish,He=e.dataSource;function qe(t,i,n){n=n||{};n.columnCount=n.columnCount||2;i=i.filter(Boolean);let o=Re("<div>").addClass("nx-editor-contents"),a={},s=[],r=Be.getComponentFromState(t),l=n.mode||r.mode;for(let e=0;e<n.columnCount;e++){let e=Re("<div>").addClass("nx-pagebuilder-propcolumn").css("width",100/n.columnCount+"%");s.push(e);o.append(e)}let d=i.length;while(d--){let t=i[d];if(t.platform&&!je.inPlatform(t.platform)||t.requiresFeature&&!e.platform.hasFeature(t.requiresFeature)){i.splice(d,1)}}Re.each(i,function(o,d){if(l==="readonly"&&typeof d.mode==="undefined"||d.mode==="readonly"){d.readonly=true}let c=Re("<div>").addClass("nx-basicfieldeditor-item nx-pagebuilder-property-item"),u=d.id,p,h=d.label||u,m=Re("<div>").addClass("nx-basicfieldeditor-item-label").text(h),g=d.storeAs,b=d.state||t,v,y,_,w,x;p=d.id||(d.label?d.label.toLowerCase().replace(/[^a-z]/g,"-").replace(/-+/g,"-"):null);if(p){c.attr("id","".concat(r.builderId,"-").concat(p))}d.init&&d.init({label:m});s[Math.floor(o*n.columnCount/i.length)].append(c);a[d.id]=c;c.append(m);if(d.isUpdated||d.isNew){m.css("position","relative");m.append(Re("<div>").addClass("nx-pagebuilder-"+(d.isUpdated?"new":"updated")+"prop").text(d.isUpdated?"Updated":"New"))}if(d.helptext){let e=Re("<div>").addClass("sk-icon sk-icon-help inline").css({"vertical-align":"top","margin-left":"4px"});e.skootip(d.helptext);m.append(e)}let k=Re('<div class="nx-field" data-prop-id="'.concat(u,'">')),S;if(d.type==="formula"){k.css("display","block")}c.append(k);if(!d.type){}else{if(d.type==="readonly"){let e=u&&b.attr(u)||d.value||d.valueFunction&&d.valueFunction()||d.defaultValue,t=Re("<div>").addClass("nx-fieldtext").text(e||"").addClass("nx-pagebuilder-readonly-text");k.append(t)}else if(d.type==="helptext"){c.empty().html(d.html).addClass("nx-pagebuilder-property-helptext").removeClass("nx-basicfieldeditor-item")}else if(d.type==="multiitem"){let t=b.children(u),i=Re("<div>");i.addClass("nx-pagebuilder-multiitem-container");let n=function t(i){let n=Re("<div>").addClass("nx-pagebuilder-multiitem-item"),o=Re("<div>").addClass("nx-pagebuilder-property-button-area"),a=Re("<button>").addClass("nx-picker-icon-btn ui-button nx-button-secondary").append(Re("<div>").addClass("nx-picker-icon").append(e.ui.createIcon("sk-webicon-ink:delete")));a.on("click",function(){i.remove();n.remove();Ve("skuidBuilderSave");d.onChange&&d.onChange()});o.append(Be.getValueEditorFromMetadata(d,b,u,i));let s=Re("<div>").addClass("nx-pagebuilder-property-button-wrapper").append(a);n.append(s,o);return n};if(!t.length){t=Ue("<values/>").append(Ue("<value/>"));t.appendTo(b)}if(d.readonly){let e=Re.map(t.children(g.name),function(e){return Re(e).text()}).join(", ");k.append(Re("<div>").html(e))}else{t.children(g.name).each(function(){i.append(n(Re(this)))});k.addClass("nx-flex-wrap");k.append(i,Re("<div>").addClass("ui-button-borderless").css({margin:"0 0 8px 0"}).skooButton({label:"Add another value",icon:"sk-webicon-ink:add"}).click(function(){let e=Ue("<value/>").appendTo(t);i.append(n(e));Ve("skuidBuilderSave");d.onChange&&d.onChange()}))}}else if(d.type==="field"){x=Re("<div>").addClass("nx-pagebuilder-property-button-area");let t="[No Field Selected]",i=u&&b.attr(u),n=i||d.defaultValue||t,o=d.isMultiselect||false,a=false,s=o?"Select Fields":"Select Field",r=Re("<div>").addClass("nx-fieldtext").text(d.labelFunction?d.labelFunction(b):n).appendTo(x).addClass("nx-pagebuilder-property-button-area-inner"),l,c=false,p,h,m;if(d.readonly){k.append(x)}else{y=Re("<button>").addClass("nx-picker-icon-btn ui-button nx-button-secondary");v=Re("<div>").appendTo(y).skootip(s).addClass("nx-picker-icon").append(e.ui.createIcon("sk-webicon-ink:edit-form"));let g=function e(t,i){let a=d.ignorePathToContent?t.fullFieldId:t.fieldId,s=t.isChecked,l=t.targetObjects,c=t.fieldName||a,p=n;if(d.addFieldToModel){if(a&&s&&h){Be.addFieldToModel({fieldId:a,model:h})}}if(u){Be.updateState(b,{key:u,value:c})}if(t.ref){Be.updateState(b,{key:"fieldtargetobjects",value:t.ref})}d.onChange&&d.onChange(c,s,l,p);r.text(d.labelFunction?d.labelFunction(b):c);n=c;if(!o){i&&i.dialog("close")}};m=d.selectedFunction||function(e){return e===u&&b.attr(u)};l=function e(){if(d.modelname){p=d.modelname}else if(d.modelprop){p=b.attr(d.modelprop)}else{p=b.closest("model").attr("id")||b.attr("fieldmodel")||b.closest("[model]").attr("model")}if(p){h=Be.getModelFromModelName(p);if(!h.attr("id")&&d.isSearchObject){let e=Re('<model id="'+d.modelname+'" createrowifnonefound="false" datasource="'+d.dataSourceName+'" type=""/>');if(He.get(d.dataSourceName).getDataSourceTypeName()==="REST"){e.attr({verb:"GET",endpoint:d.modelname,pathtocontent:b.attr("pathtocontent")})}else{e.attr("x-entityname",d.modelname)}h=e}}if(d.sobject){a=d.sobject}else{a=Be.getSObjectNameFromModelName(p)}};if(n&&i!==n&&n!==t){l();g({fieldId:n,isChecked:true})}y.on("click",function(){if(c){return false}c=true;_=Re("<div>").addClass("nx-picker-wrapper").css("z-index","104");let t=Re("<div>").appendTo(_).addClass("nx-pagebuilder-fieldpicker-header"),i=Re("<div>").appendTo(t),n=Re("<div>").appendTo(t).addClass("nx-pagebuilder-fieldpicker-headertext"),r=Re("<div>").appendTo(_).addClass("nx-pagebuilder-fieldpicker-body"),u,v=d.showObjectPickerIfPolymorphic;l();u=[{rel:a,ref:a,id:p}];if(v)u[0].isPolymorphic=true;if(!d.ignorePathToContent&&h&&Be.getModelPathToContent(h)&&u.length){u=Be.createBreadcrumbForModel(h,{isPolymorphic:v})}const y=new f["a"]({breadcrumb:u,state:b,ignorePathToContent:d.ignorePathToContent,showObjectPickerIfPolymorphic:v,showUiOnlyFields:d.showUiOnlyFields!==false,useMetadataOverrides:true,element:r,headertext:n,filterboxwrapper:i,isSelected:m,useAliasNamesIfAggregate:d.useAliasNamesIfAggregate,onChange(e){g(e,_)},dataSourceName:d.dataSourceName,isMultiselect:o,model:h,filter(e,t,i){let n=true;if(d.displayTypeFilter){n=false;let t=d.displayTypeFilter;if(t instanceof Array){n=Re.inArray(e.displaytype,t)!=-1}else if(typeof t==="function"){n=t(e,i)}else if(e.displaytype===t){n=true}}return Re.inArray(e.displaytype,["REFERENCE","OBJECT"])>-1||n},selectable(e,t){let i=true;if(d.displayTypeFilter){i=false;let n=d.displayTypeFilter;if(n instanceof Array){i=Re.inArray(e.displaytype,n)!=-1}else if(typeof n==="function"){i=n(e,t)}else if(e.displaytype===n){i=true}}if(d.refFilter){i=false;if(e.ref===d.refFilter){i=true}}return i}});const C=function t(){c=false;_.dialog({closeText:"",appendTo:e.builder.pagebuilderui,width:800,height:400,title:s,resizable:false,modal:true})};y.render().then(C,C)});if(!d.readonly){w=Re("<div>").addClass("nx-pagebuilder-property-button-wrapper").append(y);k.append(w)}k.prepend(x)}}else if(["code","formula","template"].includes(d.type)){if(!d.location)d.location="node";let t=Be.getStoredValue(b,d);if(!t&&d.defaultValue){t=d.defaultValue;Be.updateStateProperty(b,d,t)}if(d.readonly&&d.type==="template"){k.append(Be.propertyRenderers.readonly(t))}else if(d.type==="template"){let i=d.displayAs,n,o,a,s=Re("<div>").addClass("nx-pagebuilder-property-button-area"),r=Re("<"+(i==="input"?"input":"textarea")+">").val(t).appendTo(s);if(d.modelprop){n=b.attr(d.modelprop);if(typeof n!=="undefined")o=n}else if(d.modelName){o=d.modelName}if(!o){o=b.closest("[model]").attr("model")}if(o){a=Be.getModelFromModelName(o)}if(d.placeholder)r.attr("placeholder",d.placeholder);v=Re("<div>").addClass("nx-picker-icon").append(e.ui.createIcon("sk-webicon-ink:edit-form"));y=Re("<button>").append(v).addClass("nx-picker-icon-btn ui-button nx-button-secondary");if(!a){y.addClass("ui-state-disabled").attr("disabled",true)}else{y.skootip("Select a Field to insert")}y.on("click",function(){let e,t;if(a){e=a.attr("sobject");t=Be.getFieldInfoFromCache(a,b.attr("id"));let i=[],s=false;if(d.fieldContext&&n){i.push({rel:d.fieldContext.rel,ref:d.fieldContext.ref,id:o})}else if(d.fieldContext){i.push({rel:e,ref:e,id:o});let t=d.fieldId,n=t.split(".");if(n.length){Re.each(n,function(e,t){if(e<n.length-1){i.push({rel:t,ref:t,id:o})}})}n.pop();n.push(d.fieldContext.rel);s=n.join(".");i.push({rel:d.fieldContext.rel,ref:d.fieldContext.ref,id:o})}else{i.push({rel:e,ref:e,id:o})}let l,c=b.attr("id")||b.attr("fieldId");if(t){l=t.displaytype}if(b.attr("type")==="CHILDREL"){let t=c,n=Be.getDataSourceFromModel(a).getCachedEntityMetadata(e).getChildRelationship(t);if(n){e=n.childObject||n.childSObject;i=[{rel:e,ref:e,id:o,isChildRelationship:true,relationshipName:n.relationshipName}]}}else if(l==="ARRAY"){if(t.rel&&t.ref){i.push({rel:t.rel,ref:t.ref})}else{let e=c.split(".");Re.each(e,function(e,t){let n=t;i.push({rel:n,ref:n})})}s=c}if(a&&Be.getModelPathToContent(a)&&i.length){i=Be.createBreadcrumbForModel(a)}C({breadcrumb:i,model:a,isMultiselect:true,showAllFields:false,addFieldsHandler(e){if(!e||!Array.isArray(e)){return}let t=a.attr("type")==="aggregate",i=e.reduce((e,i)=>{if(s){i=i.substring(s.length+1,i.length)}return e+(t?"{{{"+i+"}}}":"{{"+i+"}}")},"");r.insertAtCaret(i).focus();r.trigger("input")}})}});w=Re("<div>").addClass("nx-pagebuilder-property-button-wrapper").append(y);let l=Re("<button>").addClass("nx-picker-icon-btn ui-button nx-button-secondary");Re("<div>").appendTo(l).skootip("Open Resource Editor").addClass("nx-picker-icon").append(e.ui.createIcon("sk-webicon-ink:code-block"));let c=function e(i){t=i;r.val(t)};l.on("click",function(){let e=[];let t={actionItems:e,onChange:d.onChange,onClose:c,property:d,readonly:d.readonly,state:b,syntax:d.syntax};let i;if(a){e.push({text:"Insert Field(s)",icon:"sk-bi-field-pick",action(){C({model:a,isMultiselect:true,addFieldsHandler(e){if(!e||!Array.isArray(e)){return}let t=a.attr("type")==="aggregate",n=e.reduce((e,i)=>{return e+(t?"{{{"+i+"}}}":"{{"+i+"}}")},"");i.getCPI().insertValue(n)}})}})}Be.showCodeEditor(t);i=t.codeComponent});let u=Re("<div>").addClass("nx-pagebuilder-property-button-wrapper").append(l);if(d.noFieldSelector){k.append(s,u)}else{k.append(s,w,u)}je.delayInputCallback(r,function(e){Be.updateStateProperty(b,d,e);d.onChange&&d.onChange(e)})}else{x=Re("<div>").addClass("nx-pagebuilder-property-button-area");y=Re("<button>").addClass("nx-picker-icon-btn ui-button nx-button-secondary");v=Re("<div>").appendTo(y).skootip("Open Resource Editor").addClass("nx-picker-icon").append(e.ui.createIcon("sk-webicon-ink:code-block"));let i=Re("<div>").addClass("nx-fieldtext").appendTo(x).addClass("nx-pagebuilder-property-button-area-inner"),n=function e(t){i.text(t&&t.length>200?t.substring(0,200)+" ...":t)};n(t);y.on("click",function(){Be.showCodeEditor({onChange:d.onChange,onClose:n,property:d,readonly:d.readonly,state:b,syntax:d.syntax})});w=Re("<div>").addClass("nx-pagebuilder-property-button-wrapper").append(y);k.append(x,w)}}else if(d.type==="customaction"){if(!d.readonly){y=Re("<button>").addClass("nx-picker-icon-btn ui-button nx-button-secondary");v=Re("<div>").appendTo(y).skootip(d.label).addClass("nx-picker-icon").append(e.ui.createIcon(d.icon));y.on("click",function(){d.customAction&&d.customAction()});k.append(y)}}else{S=Be.propertyRenderers[d.type]||Be.propertyRenderers.standard;const t=()=>{let e=S(d,b);if(je.isPromise(e)){e.then(function(e){k.append(e)})}else{k.append(e)}};const i=d.onChange;d=Object.assign({},d,{onChange(n,o){if(d.isStateless){const a=(e,n)=>{i&&i.call(this,e,n);k.empty();t()};e.events.publish("statelessChange",[a,n,o])}i&&i.call(this,n,o)}});t()}}if(n.focusedProperty&&n.focusedProperty.id===d.id){k.find("input, select, textarea").eq(n.focusedProperty.index).addClass("sk-refocus")}if(n.propertiesViewer){k.find("input, select, textarea").focus(function(e){n.propertiesViewer.setFocusedProperty({id:d.id,index:k.find("input, select, textarea").index(e.target)})})}if(d.noticeText){const e=Re('<div class="nx-field" style="display: block">').append(k);e.append('<div class="nx-pagebuilder-notice-text"">'.concat(d.noticeText,"</div>"));c.append(e)}});return o}let ze=e.$,We=e.builder,Ge=We.core,Ye=e.utils,Xe=Ye.makeXMLDoc;const Ke={propConfig:Symbol("propConfig"),focusedProperty:Symbol("focusedProperty"),applyPropTree:Symbol("applyPropTree")};class $e{constructor(){this.element=ze("<div>").addClass("nx-pagebuilder-toolbarpanel");this.header=ze("<div>").addClass("nx-pagebuilder-toolbarpanel-header ui-widget-header");this.headertext=ze("<div>").addClass("nx-pagebuilder-toolbarpanel-headertext").html("&nbsp;").appendTo(this.header);this.propGroups=ze("<div>").addClass("nx-pagebuilder-toolbarpanel-propgroups").appendTo(this.header);this.body=ze("<div>").addClass("nx-pagebuilder-toolbarpanel-body");this.element.append(this.header,this.body);let t=this[Ke.propConfig]={};e.events.subscribe("skuid.pageComposer.component.selected",e=>{t.selectComponent=(()=>{let t=e.get("xmlState");let i=We.componentRegistry.getByState(t[0]);i&&i.select();return t.parent().length})});e.events.subscribe("skuid.builder.propertyCategoryChanged",e=>{t.categoryName=e;t.setCategory=(()=>this.setCategory(e));delete t.applyPropTree;delete t.applyPropTreeItem;delete t.selectTreeItem});e.events.subscribe("skuid.builder.propTreeApplied",(e,i,n)=>{t.applyPropTree=(()=>this[Ke.applyPropTree](e,i,n))});e.events.subscribe("skuid.builder.propTreeItemApplied",(e,i,n)=>{t.applyPropTreeItem=(()=>this.applyPropTreeItem(e,i,n))});e.events.subscribe("skuid.builder.propCategoriesApplied",(e,i)=>{t.applyPropsWithCategories=(()=>{let t=We.componentRegistry.getByState(e[0]);t&&t.cpi.rebuildProps(i)})});e.events.subscribe("skuid.builder.treeItemSelected",e=>{const i=Array.from(e.element.parents(".nx-pagebuilder-propsidebar").find("[data-builder-id]")).indexOf(e.element[0]);t.selectTreeItem=(()=>{ze(".nx-pagebuilder-propsidebar").find("[data-builder-id]").eq(i)[0].dispatchEvent(new Event("mousedown"))})})}clear(e){this.setTitle(e?"":"Nothing Selected");this.headertext.detach();this.propGroups.empty().detach();this.header.empty().append(this.headertext,this.propGroups);this.body.empty();return this}clearExtras(){this.header.find(".nx-pagebuilder-filterbox, .nx-pagebuilder-toolbarpanel-actions").remove()}showCorrectPropertyTabOrTree(e){e=e||this.propConfig;if(!e)return;this.setFocusedProperty(e.focusedProperty);if(e.selectComponent){let t=e.selectComponent();if(!t){this.clear();return}}if(e.applyPropsWithCategories)e.applyPropsWithCategories();if(e.setCategory)e.setCategory();if(e.applyPropTree)e.applyPropTree();if(e.applyPropTreeItem)e.applyPropTreeItem();if(e.selectTreeItem)e.selectTreeItem()}get propConfig(){return this[Ke.propConfig]}setTitle(e){this.headertext.empty();e&&this.headertext.text(e);return this}createBuilderFromTreeObj(t,i,n){n=n||{};let o=this,a=t.linkedComponent,s=n.wrapper,r=n.proparea;if(!s||!r)return false;if(n.mode){t.mode=n.mode}return new Ge.Builder({id:t.id,name:t.id,isInToolbar:true,isInPropertiesPane:true,componentRenderer(n,l){l=l||{};let d,c,u,p=t.labelFunction&&t.labelFunction(n.get("xmlState"))||t.label,f=t.summaryFunction&&t.summaryFunction(n.get("xmlState"))||t.summary,h=p&&f?true:false;if(a&&t.refreshLinkedComponent&&l.isRefresh){a.refresh()}if(t.icon){u=typeof t.icon==="function"?t.icon(n.get("xmlState")):t.icon}if(h===true){n.body.css({padding:"0px"});d=ze("<div>").addClass("nx-pagebuilder-propertytag");let e=ze("<div>").addClass("nx-pagebuilder-propertytaglabel").text(p);if(u){e.append(ze("<div>").css("float","left").addClass("sk-icon "+u))}c=ze("<div>").addClass("nx-pagebuilder-propertytagbody").html(f);d.append(e,c)}else{n.body.addClass("nx-pagebuilder-labelwrapper");d=ze("<div>").addClass("nx-pagebuilder-labelstag nx-pagebuilder-tag");c=ze("<div>").addClass("nx-pagebuilder-tag-text");if(p){c.text(p)}else if(f){c.html(f)}d.append(ze("<div>").addClass("nx-pagebuilder-tag-icon").append(e.ui.createIcon(u||"sk-webicon-ink:rules")),c)}let m=t.labelEventHandlers;if(m){ze.each(m,function(e,t){n.body.on(e,function(){t(n)})})}if(t.isUpdated||t.isNew){c.append(ze("<div>").css({position:"static",display:"inline-block","vertical-align":"top","margin-left":"5px","margin-top":"1px"}).addClass("nx-pagebuilder-"+(t.isUpdated?"new":"updated")+"prop").text(t.isUpdated?"Updated":"New"))}if(t.indent){d.css("padding-left",(parseInt(t.indent,10)+1)*24+"px")}if(t.deleteableFunction?t.deleteableFunction(n.get("xmlState")):t.deleteable!==false){n.addActionItem(t.deletetooltip||"Remove",t.deleteicon||"sk-webicon-ink:delete",function(){if(t.beforeDelete){t.beforeDelete(n)}n.remove({preventUnselect:true,preventSelectNext:true});if(t.linkedComponent){if(t.linkedComponent===Ge.getCanvasComponentFromState(n.get("xmlState"))){t.linkedComponent.remove(true)}else if(t.refreshLinkedComponent){t.linkedComponent.refresh()}}let e=s.closest(".nx-childwrapper").siblings(".nx-noitemwrapper");if(e.length&&!s.children().length){e.show()}r.empty();if(t.afterDelete){t.afterDelete(n)}})}n.body.append(d);n.body.children(".nx-childwrapper").remove();let g=ze('<div class="nx-childwrapper">'),b,v=false,y=t.childrenFunction&&t.childrenFunction(n)||t.children;if(y){ze.each(y,function(){let e=this,a=e.filterFunction,s=e.parentState||i,l=function t(){let i=ze(this);if(a&&a(i)===false)return true;o.addTreeComponent(e,i,{wrapper:g,proparea:r});v=true};if(e.invisibleParent){s.children(e.invisibleParent).each(function(){ze(this).children(e.id).each(l)})}else{if(s.children(e.id).length===0&&t.showChildrenEvenIfNodeIsNotPresent){l.apply(e.defaultState||"<"+e.id+"/>")}s.children(e.id).each(l)}if(e.mode==="readonly")return true;g.sortableComponent({axis:"y",component:n,parentStateSelector:e.invisibleParent,placeholder:"sk-placeholder",items:"> :not(.nx-pagebuilder-component-readonly)"});if(e.singleton)return;n.addActionItem(e.addlabel||e.addtooltip||"Add Child",e.addicon||"sk-webicon-ink:add",function(){let i;if(e.invisibleParent){let t=s.children(e.invisibleParent);if(!t.length){t=Xe("<"+e.invisibleParent+"/>");s.append(t)}i=t}else{i=s}let a=e.defaultStateFunction&&e.defaultStateFunction()||Xe("<"+e.id+"/>");i.append(a);n.save();o.addTreeComponent(e,a,{wrapper:g,proparea:r});if(e.refreshLinkedComponent&&e.linkedComponent&&e.linkedComponent.refresh){e.linkedComponent.refresh()}if(t.noItemsFunction){b&&b.hide()}},e.addtooltip?e.addtooltip:t.addtooltip)})}if(t.noItemsFunction){b=n.body.find(".nx-noitemwrapper");if(!b.length){b=ze("<div>").addClass("nx-noitemwrapper").css("margin-left",(parseInt(t.indent,10)||0)+1*32+"px").appendTo(n.body)}let e=t.noItemsFunction(n.get("xmlState"));b.empty().append(e);if(v||!e){b.hide()}else{b.show()}}if(t.actionItemsFunction){let e=t.actionItemsFunction(n);if(e&&e.length){ze.each(e,function(){let e=this;n.addActionItem(e.label,e.icon,e.action,e.tooltip,e.id)})}}n.body.append(g)},onSelect(t){e.events.publish("skuid.builder.treeItemSelected",[t])},propertiesRenderer(e,i){const n=t.propsFunction&&t.propsFunction(i)||t.props||[],a={columnCount:1,mode:i.mode,propertiesViewer:o,focusedProperty:o.getFocusedProperty()};if(n.then){n.then(e=>{r.empty();qe(i.get("xmlState"),e||[],a).appendTo(r)})}else{r.empty();qe(i.get("xmlState"),n,a).appendTo(r)}},hideWrapper:true,defaultStateGenerator(){return t.defaultStateFunction&&t.defaultStateFunction()||Xe("<"+t.id+"/>")}})}addTreeComponent(e,t,i={}){let n=e.state?e.state:t,o=at(n,this.createBuilderFromTreeObj(e,n,i));i.wrapper.append(o.element);return o}applyPropTreeItem(t,i,n){e.events.publish("skuid.builder.propTreeItemApplied",[t,i,n]);n=n||{};let o,a=()=>t.pathToNode?i.find(t.pathToNode):i.children(t.id),s;if(t.isChild){s=a();if(!s.length){e.snippet.get("__skuid.pagebuilder.undoManager.disconnect")();i.append(t.defaultStateFunction&&t.defaultStateFunction()||Xe("<"+t.id+"/>"));e.snippet.get("__skuid.pagebuilder.undoManager.connect")()}s=a();o=this.addTreeComponent(t,s,n)}else{o=this.addTreeComponent(t,i,n)}if(n.autoselect){o.select({resetPropCategory:false})}this._refocus()}[Ke.applyPropTree](t,i,n){e.events.publish("skuid.builder.propTreeApplied",[t,i,n]);let o=this,a=ze("<div>").css("height","100%"),s=ze("<div>").addClass("nx-pagebuilder-propsidebar"),r=ze("<div>").addClass("nx-pagebuilder-propmainbar");if(t instanceof Array){ze.each(t,function(e){o.applyPropTreeItem(this,i,{autoselect:e===0,wrapper:s,proparea:r,mode:n&&n.mode})})}else{o.applyPropTreeItem(t,i,{autoselect:true,wrapper:s,proparea:r})}a.append(s,r);this.body.append(a);this._refocus();return this}applyPropsWithCategories(t,i,n={}){e.events.publish("skuid.builder.propCategoriesApplied",[i,n]);let o=this;o.body.empty();o.propGroups.empty();o.catObj=t;o.propCatState=i;n.focusedProperty=n.focusedProperty||this.getFocusedProperty();if(o.mode)n.mode=o.mode;ze.each(t,function(){let e=this;if(e.props&&e.props.length>0||e.customPropFunction||e.tree){const t=ze('<div class="nx-pagebuilder-toolbarpanel-propgroup" data-name="'.concat(e.name,'">').concat(e.name,"</div>")).click(()=>o.setCategory(e.name));o.propGroups.append(t);if(e.isUpdated||e.isNew){t.css({position:"relative",paddingLeft:"".concat(e.isUpdated?54:37,"px")});const i="nx-pagebuilder-".concat(e.isUpdated?"new":"updated","prop");ze('<div class="'.concat(i,'}">').concat(e.isUpdated?"Updated":"New","</div>")).css({top:"3px",left:"6px"}).appendTo(t)}}});let a;if(i===this._lastState)a=t.find(e=>e.name===this.propConfig.categoryName);if(!a)a=t.find(e=>e&&e.name);this.setCategory(a&&a.name,n);this._refocus();this._lastState=i;return this}applyProps(e,t,i){this.body.empty();this.propGroups.empty();if(e.tree){this[Ke.applyPropTree](e.tree,t,i)}else{this.body.append(qe(t,e,i))}this._refocus();this._lastState=t;return this}applyHtml(e){this.body.empty();this.propGroups.empty();this.body.append(ze("<div>").addClass("nx-pagebuilder-infotext").html(e))}_refocus(){Ye.delay().then(()=>{const e=this.body.find(".sk-refocus")[0];e&&e.focus()})}unsetFocusedProperty(){delete this[Ke.focusedProperty]}setFocusedProperty(e){if(!e)return;this[Ke.focusedProperty]=e}getFocusedProperty(){return this[Ke.focusedProperty]}get focusedProperty(){return this[Ke.focusedProperty]}set focusedProperty(e){this.setFocusedProperty(e)}focusPropertyByPropId(e){this.body.find('[data-prop-id="'.concat(e,'"]')).find("input, select, textarea").focus()}setCategory(t,i={}){const n=(this.catObj||[]).find(e=>e&&e.name===t);if(!n)return;const o=this,a=n.state?n.state:o.propCatState,s=o.propGroups.find('[data-name="'.concat(t,'"]'));i.focusedProperty=i.focusedProperty||this.getFocusedProperty();n.beforeChange&&n.beforeChange();o.propGroups.children().removeClass("on");s.find(".little-span").remove();s.addClass("on");s.append('<span class="little-span"></span>');o.category=n.name;o.body.empty();let r;if(n.customPropFunction){r=ze("<div>");n.customPropFunction(r,a,i)}else if(n.tree){o[Ke.applyPropTree](n.tree,a,i)}else{i.propertiesViewer=o;r=qe(a,n.props,i);o.body.empty()}o.body.append(r);if(typeof n.afterPropsRendered==="function"){n.afterPropsRendered(r)}e.events.publish("skuid.builder.propertyCategoryChanged",[t])}setSubcategory(e){const t=this.body.find(".nx-pagebuilder-propsidebar").children();t.each((t,i)=>{if(i.innerText===e){let e=ze.Event("mousedown");e.currentTarget=i;ze(i).trigger(e)}})}}let Qe=e.$,Je=e.builder,Ze=Je.core,et,tt,it=e.utils,nt=it.makeXMLDoc,ot=it.camelToTitle;tt=Je.desktop={};et=tt;Ze.addValidActionOptions([{value:"-",label:"Visual navigation",disabled:true},{value:"closeAllPopups",label:"Close all Modals"},{value:"closeTopmostPopup",label:"Close topmost Modal"},{value:"showModal",label:"Show Modal"},{value:"showToast",label:"Show Message"},{value:"blockUI",label:"Show message and block UI"},{value:"unblockUI",label:"Unblock the UI"},{value:"redirect",label:"Go to URL"},{value:"toggleMenu",label:"Show/hide menu"}]);if(it.inPlatform(e.constants.NATIVE)){Ze.addValidActionOptions([{value:"pageredirect",label:"Go to Skuid Page"}])}Ze.addValidActionOptions([{value:"openSlidingPanel",label:"Open Sliding Panel"},{value:"closeSlidingPanel",label:"Close Sliding Panel"},{value:"toggleRenderComponent",label:"Toggle Component"},{value:"runComponentAction",label:function t(i){let n=i&&i.attr("componentid"),o=e.builder.componentRegistry.getById(n),a=o?o.builder.name:null;return"Run ".concat(a||"Component"," Action")}},{value:"-",label:"",disabled:true}]);Ze.addValidActionOptions(Ze.getCoreActionOptions());if(e.platform.hasFeature("Voice")&&e.voiceCommands.voiceIsConfigurableForOrg()){Ze.addValidActionOptions(Ze.voiceCommands.getVoiceCommandActionOption())}function at(t,i,n,o,a={}){const s={componentType:"skuidbuilder__builderComponent",_xmlNode:t,_customBuilder:i,_makeDraggable:n,_isGlobalComponent:o,_builderComponent:{},projector:a.projector};if(a.parentComponent){s._forceRenderToElement=true;return a.parentComponent.createChildComponent(s)}else{return e.component.createFromDefinition(s)}}function st(e,t,i,n,o={}){let a=Ze.getCanvasComponentFromState(e);if(!a){a=at(e,t,i,n,o)}else{a.refresh()}return a}function rt(e,t,i){i=i||{};let n=[];Qe.each(t,function(){let e=Qe(this),t=st(e,i.customBuilder,i.makeDraggable,i.isGlobalComponent);n.push(t.element)});if(n.length){e.append(n)}}function lt(e){let t=e.component,i=[];e=Qe.extend({allowModelFieldAdds:true,isMultiselect:true,showTemplate:true,showImage:true},e||{});i.push({text:"Model Fields",icon:"sk-webicon-ink:models",action:function i(){let n=t&&t.get("xmlState"),o=typeof e.modelName==="function"?e.modelName():e.modelName||n.attr("model"),a=Ze.getModelFromModelName(o);C(Qe.extend(e,{model:a}))}});if(e.showTemplate){i.push({text:"Template",icon:"sk-webicon-ink:code-block",action:function i(){if(e.addTemplateHandler){return e.addTemplateHandler()}let n=e.fieldBuilder.defaultStateGenerator({componentId:"template"});t.get("xmlState").children("fields").first().append(n);t.save().refresh()}})}if(e.showAvatar){i.push({text:"Avatar",icon:"sk-webicon-ink:image",action:function i(){if(e.addAvatarHandler){return e.addAvatarHandler()}let n=e.fieldBuilder.defaultStateGenerator({componentId:"avatar"});t.get("xmlState").children("fields").first().append(n);t.save().refresh()}})}if(e.showIcon){i.push({text:"Icon",icon:"sk-webicon-ink:image",action:function i(){if(e.addIconHandler){return e.addIconHandler()}let n=e.fieldBuilder.defaultStateGenerator({componentId:"icon"});t.get("xmlState").children("fields").first().append(n);t.save().refresh()}})}if(e.showImage){i.push({text:"Image",icon:"sk-webicon-ink:image",action:function i(){if(e.addImageHandler){return e.addImageHandler()}let n=e.fieldBuilder.defaultStateGenerator({componentId:"image"});t.get("xmlState").children("fields").first().append(n);t.save().refresh()}})}return i}function dt(e={}){let t=e.parentComponent,i=e.parentState||t.get("xmlState"),n=e.getContextModelName,o=t.drawerComponent,a,s;if(!o){s=i.children("drawer");if(s.length===0){s=a.defaultStateGenerator({id:"drawer",title:"Drawer Area"});s.attr("closehandle","true");i.append(s)}a=et.makePopupBuilder({title:"Drawer Properties",width:"90%",getContextModelName:n,customProps:[{name:"Basic",props:[{id:"closehandle",label:"Show Close Handle",type:"boolean"}]},Ze.getActionsCategory({customNodeId:"beforeLoad",label:"Before Load Actions",getModelName:n,linkedComponent:t})],linkedComponent:t}),o=t.drawerComponent=at(s,a,true)}o.builderCPI.open();o.select()}function ct(e){if(!e)e={};return[{type:"customaction",label:"Configure Drawer",icon:"sk-webicon-ink:open",mode:"edit",customAction:function t(){dt(e)}},{id:"openicon",type:"icon",label:"Drawer Opened Icon",helpText:"Optional icon to show when the drawer is currently open."}]}function ut(e){return{value:"drawer",label:"Open/Close a Drawer",propsFunction:function t(i){let n={};Qe.extend(n,e);if(i)n.parentComponent=i;return ct(n)}}}function pt(t){if(!t)t={};let i=t.width,n=t.title,o=t.linkedComponent;return new Ze.Builder({id:t.id||"popup",name:t.name||"Popup",icon:t.icon,hideWrapper:true,addChildComponent:function e(t,i){if(t.acceptor.canAcceptComponent(i)){t.acceptor.addComponent(i);return true}else{return false}},componentRenderer:function t(a){let s=a.get("xmlState"),r="components",l=s.children(r),d;const c=Qe("<div>"),u=Qe("<div>").appendTo(c);a.modalEl=c;c.attr("id",a.id()).attr("title",n||s.attr("title")).css({padding:"0px",margin:"0px"});u.css("border","0px solid white");let p;c.dialog({appendTo:e.builder.pagebuilderui,autoOpen:false,position:{my:"center top",at:"center top",of:e.builder.pagebuilderui,collision:"none"},closeText:"",draggable:false,resizable:false,open:function t(){const i=e.builder.pagebuilderui;Qe("body").children(".ui-widget-overlay");p=Qe("<div>").addClass("ui-widget-overlay").appendTo(i.layoutcontainer);p.on("click",()=>a.builderCPI.close())},close:function e(){p.remove();o&&o.select()},width:i||a.get("xmlState").attr("width"),height:530});c.data("uiDialog")._focusTabbable=function(){};a.dialogwrapper=c.parent();a.dialogwrapper.css({"z-index":"110","box-shadow":"4px 4px 10px rgba(0,0,0,.25)"}).addClass("nx-pagebuilder-workspace");a.dialogwrapper.on("mousedown",".ui-dialog-title",function(){a.select()});if(l.length===0){l=nt("<"+r+"/>").appendTo(s)}d=a.acceptor=new tt.ComponentAcceptor(l,{mode:a.mode,parentComponent:a});c.parent().find(".ui-dialog-titlebar-close .ui-icon, .ui-dialog-titlebar-close .sk-icon, .ui-dialog-titlebar-close .sk-webicon").after(e.$(e.ui.createIcon(s.attr("closeicon")||"sk-webicon-ink:close")).css("left","0")).remove();u.append(d.element);c.data("uiDialog")._focusTabbable=function(){}},propertiesRenderer:function e(i,n){i.setTitle(t.title||"Popup Properties");let o,a=t.customProps||(t.getCustomProps?t.getCustomProps(i,n):{});if(t.makePropsEditor){i.body.append(t.makePropsEditor(i,n))}else if(Qe.isFunction(a)){o=a(n)}else if(it.size(a)){o=a}else{o=Ze.getPopupProperties(n,{useAfterCloseActions:t.useAfterCloseActions})}if(o){i.applyPropsWithCategories(o,n.get("xmlState"))}},defaultStateGenerator:function e(t){if(!t)t={};let i=t.id||"popup",n=t.title||"New Popup",o=t.width||"90%",a=nt("<components/>");if(t.childComponents){a.append(t.childComponents)}return nt("<"+i+' title="'+n+'" width="'+o+'"/>').attr(t.additionalAttributes||{}).append(a)},cpi:{open(){this.modalEl.dialog("open");Qe("html, body").animate({scrollTop:Qe(".nx-page").first().offset().top+56},100,"swing");this.modalEl.data("uiDialog").opener={filter:()=>({trigger:()=>["foo"]})}},close(){this.modalEl.dialog("close")}}})}function ft(t={}){let i=t.parentComponent,n=t.parentState||i.get("xmlState");let o=n.children("skuid__modal");let a=Ze.getBuilder("skuid__modal");if(o.length===0){o=a.defaultStateGenerator();n.append(o)}const s=Je.componentRegistry.getByState(o[0]);if(s){s.builderCPI.open();return}let r=e.component.createFromDefinition({componentType:"skuidbuilder__builderComponent",_xmlNode:o,_customBuilder:a,_makeDraggable:true,_builderComponent:{}});r.builderCPI.open();r.cpi.select()}function ht(t={}){let i=t.parentComponent,n=t.parentState||i.get("xmlState"),o="skuid__slidingPanel",a=Ze.getBuilder("skuid__slidingPanel"),s;s=n.children(o);if(s.length===0){s=a.defaultStateGenerator({id:o,title:"Sliding Panel Contents",additionalAttributes:{uniqueid:it.generateUniqueId(),size:"270px",origin:"left",closeOnPageClick:"true"}});s.removeAttr("width");s.removeAttr("title");n.append(s)}const r=Je.componentRegistry.getByState(s[0]);if(r){r.builderCPI.open();return}let l=e.component.createFromDefinition({componentType:"skuidbuilder__builderComponent",_xmlNode:s,_customBuilder:a,_makeDraggable:true,_builderComponent:{}});l.builderCPI.open();l.cpi.select()}function mt(t,i){i=Qe.extend({cleanIds:false,nest:true,customBuilder:false},i);if(i.cleanIds){let e=it.getXML(t[0]);e=e.split(/uniqueid="[^"]+"/).reduce(function(e,t){return e?e+'uniqueid="'+it.generateUniqueId()+'"'+t:t});e=e.split(/uniqueId="[^"]+"/).reduce(function(e,t){return e?e+'uniqueId="'+it.generateUniqueId()+'"'+t:t});t=nt(e)}let n;if(e.platform.hasFeature("PageComposerStaging")&&i.customBuilder&&i.customBuilder.quicklyConfigure){n=i.customBuilder.quicklyConfigure(t)}else{n=it.resolve()}return n.then(()=>{let n=e.component.createFromDefinition({componentType:"skuidbuilder__builderComponent",_xmlNode:t,_customBuilder:i.customBuilder,_isGlobalComponent:true,_makeDraggable:true}),o=Je.componentRegistry.getSelectedComponent(),a=o&&Qe(o.getElement()),s=false,r,l,d=Qe(".ui-dialog-content:visible").last(),c=["skuid__modal","skuid__tabPanel"];if(a&&!document.contains(a[0])&&a.attr("id")){a=Qe(document.getElementById(a.attr("id")))}if(a&&a.length&&a.attr("data-readonly")!=="true"&&a.is(":visible")&&(!d.length||a.closest(".ui-dialog-content:visible").is(d))){if((i.nest||c.indexOf(o.builderId)>-1)&&o.addChildComponent(n)){s=true}else{r=a.parent().closest(".nx-pagebuilder-acceptor:visible");if(r&&r.length){l=e.component.getById(r.last()[0].getAttribute("id"));if(l&&l.getCPI().canAcceptComponent(n)){const e=o.get("xmlState");const t=l.getCPI().getComponentsXML()[0].contains(e[0])?e.index()+1:Infinity;l.getCPI().addComponent(n,{index:t});s=true}}}}if(!s){let t=Ze.masterPage?".nx-pagebuilder-region":"> .nx-pagebuilder-workspace >";r=Je.pagebuilderui.find("".concat(t," .nx-pagebuilder-component .nx-pagebuilder-acceptor:visible"));if(r&&r.length){for(let t=0;t<r.length;t++){l=e.component.getById(r[t].getAttribute("id"));if(l.getCPI().canAcceptComponent(n)){l.getCPI().addComponent(n);s=true;break}}}}if(s){it.delay().then(()=>n.cpi.select());return n}n.unregister();return null})}function gt(t={}){let i=new e.model.Model({accessible:true,createable:true,createRowIfNoneFound:false,dataSource:e.dataSource.get("Ui-Only"),fields:[{id:"ComponentType",label:"Component",accessible:true,createable:true,editable:true,displaytype:"PICKLIST",defaultValue:"skuid__table",defaultvaluetype:"fieldvalue",required:true,picklistEntries:Qe.map(Ze.getBuilders(),function(e){return e}).filter(function(e){return!!e.createFromModel}).map(function(e){return{value:e.id,label:e.name}})}]}).initialize().register(),n=t.title||"Create Component",o=t.buttonLabel||"Create Component";return i.load().then(()=>{i.createRow();const a=e.utils._floatingComponentFactory.createModal({title:n,model:i,components:[{componentType:"skuid__form",showSaveCancel:false,mode:"edit",model:i,showErrorsInline:false,sections:[{showHeading:false,rows:[{fields:[{id:"ComponentType",displayAs:"RADIO"}]}]}],styles:{spacing:{marginBottom:2}}}],buttons:[{styleSettingsVariant:"primary",label:o,onClick:()=>{const e=i.getFieldValue(i.getFirstRow(),"ComponentType",true);t.onComponentSelection(e);a.getCPI().close()},hotkeys:nt('\n\t\t\t\t\t<hotkeys>\n\t\t\t\t\t\t<hotkey modifiers="" key="return" ignoretextinputs="true"/>\n\t\t\t\t\t</hotkeys>\n\t\t\t\t')},{label:e.$L("Cancel"),onClick:()=>a.getCPI().close()}],onClose:()=>{i.unregister();t.onCancel&&t.onCancel()}})})}function bt(){const t=e.builder.core.getActiveThemeSettings(true);if(!t)return[];const i=e=>t.get("tokens.spacing".concat(e?"."+e:""));const n=t._getBasePixels(),o=Object.keys(i()).map(e=>{const t=parseFloat(i("".concat(e,".value")));return{value:t/n,label:(i("".concat(e,".label"))||ot(e))+" ("+t+"px)"}});o.unshift({value:0,label:"None"});return o}function vt(t){const i=e.builder.core.getActiveThemeSettings(true);if(!i)return[];const n=e.componentStylesRegistry.get(t);if(!n)throw Error('No component type named "'.concat(t,'"'));const o=e.themes._getVariants(n,i,false,true);const a=[];for(const e in o){a.push({value:e==="default"?"":e,label:i.get("styleSettingsVariants.".concat(t,".").concat(e,".label"))||ot(e)})}return a}function yt(t,i){const n=e.builder.core.getActiveThemeSettings(true);if(!n)return i;const o=e.componentStylesRegistry.get(t);if(!o)throw Error('No component type named "'.concat(t,'"'));return n.get("styleSettingsVariants.".concat(t,".").concat(i,".label"))||ot(i)||i}e.events.subscribe("skuid.builder.component.uniqueIdChange",(e,t)=>{Je.componentRegistry.updateId(e,t)});function Ct(){return"To add this component to a page, drag it into the component workspace."}Ze.componentFactory=at;Ze.componentFactoryWithCache=st;Ze.appendComponents=rt;Je.Builder=Ze.Builder;Je.registerBuilder=Ze.registerBuilder;Je.getBuilders=Ze.getBuilders;Je.getBuilder=Ze.getBuilder;Je.updateState=Ze.updateState;Je.save=Ze.save;Je.getConditionDisplayString=Ze.getConditionDisplayString;Je.userinfomap=Ze.userinfomap;Je.operatormap=Ze.operatormap;Je.determineQuotedness=Ze.determineQuotedness;Je.getFieldInfoFromCache=Ze.getFieldInfoFromCache;Je.getMetadataForField=Ze.getMetadataForField;Je.getSObjectForField=Ze.getSObjectForField;Je.isValidFieldForPossibleTargetObjects=Ze.isValidFieldForPossibleTargetObjects;Je.getModelFromModelName=Ze.getModelFromModelName;Je.getSObjectNameFromModelName=Ze.getSObjectNameFromModelName;Je.addFieldToModel=Ze.addFieldToModel;Je.getLastSelectedModelComponent=Ze.getLastSelectedModelComponent;Je.setLastSelectedModelComponent=Ze.setLastSelectedModelComponent;Je.getConditionFieldPropObj=Ze.getConditionFieldPropObj;Je.getConditionOperatorPropObj=Ze.getConditionOperatorPropObj;Je.getConditionValueProperties=Ze.getConditionValueProperties;Je.getFieldProperties=Ze.getFieldProperties;Je.ComponentAcceptor=et.ComponentAcceptor=Ae;Je.ComponentsViewer=et.ComponentsViewer=Oe;Je.PropertiesViewer=et.PropertiesViewer=$e;Je.sObjectList=et.sObjectList=e.utils.sObjectList;Je.makeAddFieldActionButton=et.makeAddFieldActionButton=lt;Je.showModelFieldPicker=et.showModelFieldPicker=C;Je.getDrawerActionOption=et.getDrawerActionOption=ut;Je.getDrawerProps=et.getDrawerProps=ct;Je.showDrawerBuilder=et.showDrawerBuilder=dt;et.showSlidingPanelBuilder=ht;et.insertComponentAfterSelected=mt;et.showComponentSelectionPopup=gt;et.getDescriptionTag=Ct;et.getSpacingTokensAsPicklist=bt;et.getVariantsForComponentType=vt;et.getLabelForStyleVariant=yt;Je.makePopupBuilder=et.makePopupBuilder=pt;Je.popupbuilder=tt.popupbuilder=pt();Je.showModalBuilder=tt.showModalBuilder=ft;Je.domIdProp=tt.domIdProp=Ze.coreProps.domIdProp();Je.cssClassProp=tt.cssClassProp=Ze.coreProps.cssClassProp();if(e.page.params.tour){e.events.subscribeOnce("skuid.pageBuilder.complete",()=>{e.utils.loadJS(e.platform.getResourceUrl({ns:"skuid",path:"js/tours/tourController.js"})).then(()=>{e.tour.tourController.configureTour()})})}var _t=n(608);var wt=n(609);var xt=n(610);var kt=n(0);var St=n(145);var It={getStyleSettingsVariants(e){return{default:{color:"@palette.neutral.2",fontSize:"@tk.fontSize.body",fontWeight:"@tk.fontWeight.bold",focus:{boxShadow:"0 0 0 1px @tk.utility.focusColor inset"},background:"repeating-linear-gradient(to bottom, #f5f7f8, #f5f7f8 48px, #edeeef 48px, #edeeef 96px)",border:"@tk.borderSize.primary @tk.borderStyle.primary @tk.utility.borderColor",paddingTop:0,sectionHeading:{padding:"@tk.spacing.s2",border:"@tk.borderSize.primary @tk.borderStyle.primary @tk.utility.borderColor",background:"@palette.white"},sectionTitle:{padding:"@tk.spacing.s2 0",fontSize:"@tk.fontSize.body",background:"@palette.neutral.7",backgroundOdd:"#F5F7F8",selected:{color:"@palette.white",background:"@palette.primary.2",borderRadius:0},separatorborderBottom:"4px @tk.borderStyle.primary @tk.utility.borderColor",minHeight:"none"},_icon:St["a"].getStyleSettings(e),icon:{spacing:"@tk.spacing.s1",color:"@palette.neutral.4"},chevron:{spacing:"@tk.spacing.s0_5"}},pageBuilder:{background:"transparent",border:"none",color:"@tk.utility.fontColor",paddingTop:"@tk.spacing.s2",sectionTitle:{padding:"0",fontSize:"@tk.fontSize.small",background:"transparent",backgroundOdd:"transparent",selected:{color:"@palette.white",background:"@palette.primary",borderRadius:"3px"},separatorborderBottom:"4px @tk.borderStyle.primary @tk.utility.borderColor",minHeight:"@tk.spacing.s3"},icon:{spacing:"@tk.spacing.s1"},chevron:{spacing:"@tk.spacing.s0_5"}}}},getStyles:e=>({"composer-tree":{width:"100%",overflow:"auto",background:e.background,border:e.border,borderRight:"none",borderBottom:"none",boxSizing:"border-box",fontWeight:e.fontWeight,fontSize:e.fontSize,color:e.color,userSelect:"none","-ms-user-select":"none","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","&:focus":{outline:"none"}},"section-heading":{cursor:"pointer",padding:e.sectionHeading.padding,borderTop:e.sectionHeading.border,borderBottom:e.sectionHeading.border,background:e.sectionHeading.background,"&:first-child":{borderTop:"none"}},"section-title":{display:"flex",alignItems:"center",minHeight:e.sectionTitle.minHeight,wordBreak:"break-all"},"section-title--selected":{color:e.sectionTitle.selected.color},"section-title--with-separator":{borderBottom:e.sectionTitle.separatorborderBottom},"icon-wrapper":{marginRight:e.icon.spacing,position:"relative",top:"1px",color:e.icon.color},"icon-wrapper--selected":{color:e.sectionTitle.selected.color},"chevron-wrapper":{marginRight:e.chevron.spacing,position:"relative",top:"1px",color:e.icon.color},"chevron-wrapper--selected":{color:e.sectionTitle.selected.color},"chevron-spacer":{width:"21px",height:"100%"},"section-wrapper":{},"section-title-wrapper":{cursor:"pointer",color:e.textColor,padding:e.sectionTitle.padding,fontSize:e.sectionTitle.fontSize,background:e.sectionTitle.background,"&:nth-child(odd)":{background:e.sectionTitle.backgroundOdd}},"section-title-wrapper--selected":{background:e.sectionTitle.selected.background&&"".concat(e.sectionTitle.selected.background," !important"),borderRadius:e.sectionTitle.selected.borderRadius},"section-title-wrapper--selected--focused":{boxShadow:e.focus.boxShadow},icon:St["a"].getStyles(e._icon).icon,"section-notices":{display:"flex",flex:"1",justifyContent:"flex-end",marginRight:e.icon.spacing},"empty-text":{opacity:.6,textAlign:"center"}})};var Tt={attributes:{_unsurfacedChildren:{},enableKeyboardControls:{default:true,type:"boolean"},title:{type:"string"},icon:{type:"string"},notices:{type:"array"},name:{type:"string"},data:{type:"object"},selected:{type:"boolean"},withSeparator:{type:"boolean"},selectableFolders:{type:"boolean"},levelsShownByDefault:{type:"number"},minIndent:{type:"number",default:2},indentMultiplier:{type:"number",default:2.5},fillButtonSpace:{type:"boolean",default:false},fillHeight:{type:"boolean",default:false},emptyText:{type:"string",default:""}},nodes:{sections:{type:"array",childNode:{section:"skuidbuilder__composerTree"}}},properties:{renderConditions:true},access:{cpi:{public:["focus","selectSectionByData","selectBySearch","selectNext","selectPrevious"]}}};var At=n(10);const{h:Pt,div:Et}=Object(kt["d"])();kt["c"].componentType.register("skuidbuilder__composerTree",Object.assign({},It,{schema:Tt,init(e,t,i){i.updateSections(t.sections);e.subscribeChange("sections",e=>{i.updateSections(e)});e.set({selectedSections:{},topPosition:154,chevronIconInstanceClosed:e.createChildComponent({componentType:"skuid__icon",handle:"sk-webicon-ink:chevron-small-right",alignBottom:false,asBlock:true}),chevronIconInstanceOpen:e.createChildComponent({componentType:"skuid__icon",handle:"sk-webicon-ink:chevron-small-down",alignBottom:false,asBlock:true}),iconUrlOpen:kt["c"].ui.getIconURLFromHandle("ink:chevron-small-down"),iconUrlClosed:kt["c"].ui.getIconURLFromHandle("ink:chevron-small-right")})},renderVDom(e){const{_sections:t,emptyText:i,enableKeyboardControls:n,fillHeight:o,topPosition:a}=e.getState(),s=e._getCPI(),r=e.shortcut("getStyledClasses");return Et({key:e,class:r("composer-tree"),styles:o?{maxHeight:"calc(100vh - ".concat(a,"px)")}:{},afterCreate:s.afterCreate,onkeydown:n&&s.onKeyDown,tabindex:n&&"0",onfocus:()=>e.set("focused",true),onblur:()=>e.set("focused",false)},[t.length?s.renderSubSections(t,0):Pt("div",{key:"empty-text",class:r("empty-text")},[i])])},cpi:{renderSubSections(e,t){const{uniqueId:i,indentMultiplier:n,minIndent:o,fillButtonSpace:a,iconUrlOpen:s,iconUrlClosed:r,focused:l}=this.getState(),d=this._getCPI(),c=this.shortcut("getStyledClasses");return e?e.map((e,u)=>{const p=e.selected,f=e.notices,h=e.name&&"".concat(e.name.toLowerCase().replace(/ /g,"-"),"-nav-item");return e&&[Et({id:h,key:"".concat(i,"-section-").concat(u),"aria-controls":e.id,"aria-expanded":e.show+"",role:"button",classes:c({"section-title-wrapper":true,"section-title-wrapper--selected":p,"section-title-wrapper--selected--focused":p&&l,"section-title--with-separator":e.withSeparator}),onclick:d.onClickSectionHeader.bind(this,e),styles:{"padding-left":this.getThemeSettings().spacing(o+n*t)},afterCreate:e=>p&&d.afterCreateUpdate(e),afterUpdate:e=>p&&d.afterCreateUpdate(e)},[Et({classes:c({"section-title":true,"section-title--selected":p}),key:"".concat(i,"-section-heading-").concat(u)},[e.sections&&e.sections.length?Pt("span",{key:"chevron",classes:c({"chevron-wrapper":true,"chevron-wrapper--selected":p}),onclick:d.onClickChevron.bind(this,e)},[Object(At["a"])(e.show?s:r,{classes:c(["icon"])})]):a&&Pt("div",{key:"chevron-spacer",classes:c({"chevron-spacer":true})}),!!e.iconUrl&&Pt("span",{key:"icon",classes:c({"icon-wrapper":true,"icon-wrapper--selected":p})},[Object(At["a"])(e.iconUrl,{classes:c(["icon"])})]),Pt("span",{key:"".concat(i,"-section-").concat(u,"--title"),classes:c({"section-title":true})},[e.title]),f&&Pt("span",{key:"notices",classes:c({"section-notices":true})},[f.renderVDom()])])]),e.show?[e.sections?e.sections?d.renderSubSections(e.sections,t+1):[]:[]]:[]]}):[]},onClickSectionHeader(e){this._getCPI().selectSection(e,false,{initiator:"click"})},onClickChevron(e,t){t.stopPropagation();e.show=!e.show;this.scheduleVirtualRender()},selectSection(e,t,i={}){let{enableKeyboardControls:n,sectionsById:o,selectableFolders:a}=this.getState();if(a||!e.sections){Object.keys(o).map(e=>{o[e].selected=false});e.selected=true;kt["c"].events.publish("composer.navigation.viewchange",[e.name]);this.publish("viewchange",[e.name,e.data,i])}const s=e=>{if(e.parentSection){e.parentSection.show=true;s(e.parentSection)}};s(e);this.set({justSelectedNotByClick:i.initiator!=="click"||i.scrollIntoView,selectedSection:e});if(t)e.show=true;if((i.initiator==="click"||i.initiator==="keyboard")&&n)this.cpi.focus();this.scheduleVirtualRender()},afterCreate(e){this.set("topPosition",e.getBoundingClientRect().y)},focus(){this.getElement()&&this.getElement().focus()},onKeyDown(e){let{_sections:t,selectedSection:i}=this.getState();let n=this._cpi;const o=()=>{const e=[];const i=t=>{t.forEach(t=>{e.push(t);if(t.show&&t.sections){i(t.sections)}})};i(t);return e};const a=e=>n.selectSection(e,false,{initiator:"keyboard"});let s,r;switch(e.keyCode){case 38:s=o();r=Math.max(0,s.indexOf(i)-1);a(s[r]);e.preventDefault();break;case 40:s=o();r=Math.min(s.length-1,s.indexOf(i)+1);a(s[r]);e.preventDefault();break;case 37:if(i.sections&&i.sections.length&&i.show){i.show=false;this.scheduleVirtualRender()}else if(i.parentSection){a(i.parentSection)}e.preventDefault();break;case 39:if(i.sections&&i.sections.length){if(i.show){a(i.sections[0])}else{i.show=true;this.scheduleVirtualRender()}}e.preventDefault();break}},selectSectionByData(e,t){const i=this.get("sectionsById");for(const n in i){const o=i[n];if(o.data===e){if(!o.selected)this._getCPI().selectSection(o,t);return true}}},updateSections(e){const t={},i=this.get("sectionsById"),n=[];for(const e in i){const t=i[e];n.push(t);if(t){t.iconInstance&&t.iconInstance.unregister()}}const o=(e,t=0)=>{for(let i=0;i<n.length;i++){const o=t+i;if(o<n.length&&o>=0){const t=n[o];if(t.data===e)return t}const a=t-i;if(a<n.length&&a>=0){const t=n[a];if(t.data===e)return t}}};let a=0;const s=(e,i,n)=>{return e.map(e=>{const r=e.data&&o(e.data,a);const l=kt["c"].utils.generateGUID()+"",d=t[l]=Object.assign({},e,{id:l,parentSection:n,show:r?r.show:i>0,selected:!!e.selected});d.iconUrl=d.icon&&kt["c"].ui.getIconURLFromHandle(d.icon);if(d.sections){d.sections=s(d.sections,i-1,d)}a++;return d})};this.set({_sections:s(e,this.get("levelsShownByDefault")),sectionsById:t});this.scheduleVirtualRender()},afterCreateUpdate(e){if(this.get("justSelectedNotByClick")){this.publish("scrollMeIntoView",e);this.set("justSelectedNotByClick",false,false)}},selectBySearch(e){const t=this.get("sectionsById");const i=[];for(const n in t){const o=t[n];if(o.title.toLowerCase().includes(e.toLowerCase())){i.push(o)}}this.set({matchingSections:i,selectNextIndex:-1});this.cpi.selectNext()},selectNext(){let{matchingSections:e,selectNextIndex:t}=this.getState();if(!e.length)return;t++;if(t>=e.length)t=0;this._cpi.selectSection(e[t],false,{scrollIntoView:true,initiator:"selectNextPrevious"});this.set("selectNextIndex",t)},selectPrevious(){let{matchingSections:e,selectNextIndex:t}=this.getState();if(!e||!e.length)return;t--;if(t<0)t=e.length-1;this._cpi.selectSection(e[t],false,{scrollIntoView:true,initiator:"selectNextPrevious"});this.set("selectNextIndex",t)}}}));var Mt=n(144);var Dt=n(48);var Nt=n(9);var Ft=n.n(Nt);var Ot=n(72);var Rt=n(137);const Lt=e.builder,Bt=Lt.core,jt=e.utils,Ut=jt.makeXMLDoc,Vt=e.$,Ht=e.events.publish,qt="skuidBuilderNeedSave",zt="<div>";const Wt=new Bt.Builder({id:"model__field",name:"Field",isInToolbar:true,componentRenderer(t){const i=t.get("xmlState"),n=i.attr("type")==="childRelationship",o=i.attr("id"),a=i.attr("name"),s=i.closest("model"),r=s.attr("id"),l=Bt.getFieldInfoFromCache(r,o),d=!l||l.omittable!==false;let c,u;if(l&&l.defer)i.attr("defer",true);t.body.css({padding:"0px",overflow:"visible"});u=Bt.getModelFieldComponentLabel(i);const p=!n?"sk-webicon-ink:edit":"sk-webicon-ink:rules";const f=l||i.parent().is("groupby");c=Vt(zt).addClass("nx-pagebuilder-fieldtag nx-pagebuilder-field nx-pagebuilder-tag").attr({"data-model":r,draggable:"".concat(!!f)}).append(Vt(zt).addClass("nx-pagebuilder-tag-icon").append(e.ui.createIcon(p)),Vt(zt).addClass("nx-pagebuilder-tag-text").html(u.replace(".",".<wbr>"))).appendTo(t.body);if(f){c[0].ondragstart=(t=>{e.builder.dragDrop.standardDragStart(t,u,p,new Ee["c"](new Ee["b"]({builderId:"model__field",model:r,isGlobalComponent:false}),new Ee["a"]({fieldId:o,fieldName:a,isChildRelationship:n})))});c[0].ondragend=(t=>{e.builder.dragDrop.standardDragEnd(t)})}if(d){t.addActionItem("Remove","sk-webicon-ink:delete",function(){const e=i.attr("id"),n=i.attr("name"),o=i.closest("model").attr("id");t.remove(false,true);Ht(qt);Bt.publishStateEvent({type:"model.field.remove",fieldId:e,fieldName:n,modelId:o})})}},propertiesRenderer(e,t){let i=t.get("xmlState"),n;if(i.attr("type")==="childRelationship"){let t=i.closest("model"),o=i.attr("id"),a=Vt(zt),s=t.attr("sobject"),r=t.attr("id"),l,d,c,u;e.header.prepend(a);c=Bt.getDataSourceFromModel(t).getCachedEntityMetadata(s);if(c){u=c.getChildRelationship(o);if(u){l=u.childObject||u.childSObject}}if(l){d=[{rel:l,ref:l,id:r}]}e.setTitle("Child Relationship: "+o);n=[{name:"Fields",customPropFunction(t,i){a.css("visibility","visible");const n=new f["a"]({breadcrumb:d,element:t,showDragHandles:false,headertext:e.headertext,filterboxwrapper:a,isMultiselect:true,isSelected(e){let t=i.children("fields");return t.length&&t.children('[id="'+jt.escapeSelector(e)+'"]').length},onChange(e){let t=e.fieldId,n=e.isChecked,o=i.children("fields");if(!o.length){o=Ut("<fields/>");i.append(o)}let s=o.children('[id="'+jt.escapeSelector(t)+'"]');if(n&&s.length===0){o.append(Wt.getDefaultState({id:t}))}else{s.remove()}a.children("input").first().select();Ht(qt);Bt.publishStateEvent({type:"model.field.remove",parentChildRelationship:i.attr("id"),fieldId:t,modelId:r})}});n.render()}},{name:"Conditions",beforeChange(){a.css("visibility","hidden")},tree:{id:"conditions",label:"Conditions",deleteable:false,icon:"sk-bi-conditions",isChild:true,children:[{id:"condition",labelFunction(e){return Bt.getConditionDisplayString(e)},defaultStateFunction(){return Ut('<condition enclosevalueinquotes="true" operator="="/>')},propsFunction(e){e.isChildRelationshipCondition=true;let t=[Bt.getConditionFieldPropObj(e,{sobject:l,modelName:r,handleChange(){e.rebuildProps()},showUiOnlyFields:false}),Bt.getConditionOperatorPropObj(e,{fieldMetadata:Bt.getMetadataForField(e)})];return t.concat(Bt.getConditionValueProperties(e,{handleRefresh(){e.rebuildProps()},validTypes:["fieldvalue","multiple","blank","userinfo","modelmerge","param"],modelName:r}))}}]}},{name:"Properties",beforeChange(){a.css("visibility","hidden")},props:[{id:"limit",type:"string",label:"Max # of Records (Limit)"},{id:"orderby",type:"string",label:"Fields to Order Records By"}]}]}else{n=Bt.getModelFieldProperties({component:t,propViewer:e})}e.applyPropsWithCategories(n,i)},hideWrapper:true,defaultStateGenerator(e){return Bt.defaultStateGenerators.field(e)}});var Gt=Wt;function Yt(e,t={}){if(e.get("observer"))return;const i=e.cpi.createObserver({node:t.state||e.get("xmlState")[0],observe:{childList:true},callback:()=>{let i=t.getChildComponents?t.getChildComponents():e.getChildComponents();i.forEach(t=>{t!==e.get("_buttonGroup")&&t.unregister()});e.refresh();t.onChange&&t.onChange()}});e.set("observer",i)}function Xt(e){if(!e.get("observer"))return;e.getCPI().unstoreObserver(e.get("observer"));e.get("observer").disconnect();e.unset("observer")}const Kt=e.builder,$t=Kt.core,Qt=e.utils,Jt=Qt.makeXMLDoc,Zt=e.$,ei="<div>",ti="skuidBuilderNeedSave",ii=e.events.publish;const ni={},oi=[{label:"Model saved",value:"models.saved"},{label:"Model requeried",value:"models.loaded"},{label:"Model cancelled",value:"models.cancelled"},{label:"New row created in Model",value:"row.created"},{label:"Row in Model updated",value:"row.updated"},{label:"Row in Model marked for deletion",value:"row.deleted"},{label:"Row in Model un-marked for deletion",value:"row.undeleted"},{label:"Model Condition changed",value:"condition.valueChanged"},{label:"Model Condition activated",value:"condition.activated"},{label:"Model Condition deactivated",value:"condition.deactivated"},{label:"Model Condition reset",value:"condition.reset"}];Zt.each(oi,function(){ni[this.value]=this});var ai=new $t.Builder({id:"actions",name:"Actions",isInToolbar:true,componentRenderer(t){t.body.addClass("nx-pagebuilder-modelactionswrapper").css({overflow:"visible"});let i=Zt(ei).addClass("nx-pagebuilder-modelactionstag nx-pagebuilder-tag").append(Zt(ei).addClass("nx-pagebuilder-tag-icon").append(e.ui.createIcon("sk-webicon-ink:actions")),Zt(ei).addClass("nx-pagebuilder-tag-text").text("Actions"));t.body.append(i);t.isExpanded=false;let n=Zt(ei).addClass("nx-pagebuilder-modelactionschildren").hide();t.modelActionsChildren=n;t.get("xmlState").children().each(function(){let e=$t.componentFactory(Zt(this),si,undefined,undefined,{parentComponent:t});n.append(e.element)});t.addActionItem("Add","sk-webicon-ink:add",function(){Xt(t);let e=si.getDefaultState();t.get("xmlState").append(e);let i=$t.componentFactory(e,si,undefined,undefined,{parentComponent:t});n.append(i.element);Qt.scrollToNative(i.element[0]);t.save();i.select();Yt(t,{onChange:()=>t.modelActionsChildren.show()})});n.sortableComponent({axis:"y",component:t,placeholder:"sk-placeholder"});Yt(t,{onChange:()=>t.modelActionsChildren.show()});t.body.append(n)},propertiesRenderer(e){e.setTitle("Model Actions");e.body.empty().append(Zt(ei).addClass("nx-pagebuilder-infotext").html('Skuid Model Actions allow you to specify actions to perform when certain events are triggered on a given model. For example, use Model Actions to query related models (i.e. an "Action") when the given model is saved (i.e. an "Initiating Event").'))},onSelect(e){if(e.isExpanded&&e.isSelected()){e.modelActionsChildren.hide();e.isExpanded=false}else{e.element.siblings().find(".nx-pagebuilder-groupbyfieldschildren, .nx-pagebuilder-fieldschildren, .nx-pagebuilder-conditionschildren").hide();Qt.niceExpand(e.body,e.modelActionsChildren,0,true);e.isExpanded=true}},hideWrapper:true});let si=new $t.Builder({id:"action",name:"Action",hideFromComponentsList:true,hideWrapper:true,isInToolbar:true,defaultStateGenerator(){return Jt("<action><actions/><events/></action>")},componentRenderer(t){let i=t.body,n=t.get("xmlState"),o=Zt(ei).addClass("nx-pagebuilder-modelactiontag nx-pagebuilder-tag"),a=n.children("events").first().children(),s=n.children("actions").first().children().length,r;if(a.length){r="When "+Zt.map(a,function(e){let t=ni[Zt(e).text()];if(t)return t.label;else return"[Unknown Event]"}).join(" or ")+", then run "+s+" actions"}else{r="(No initiating events specified)"}o.append(Zt(ei).addClass("nx-pagebuilder-tag-icon").append(e.ui.createIcon("sk-webicon-ink:actions")),Zt(ei).addClass("nx-pagebuilder-modelactionlabel nx-pagebuilder-tag-text").text(r));i.append(o);t.addActionItem("Remove this Action","sk-webicon-ink:delete",function(){let e=t.element.parent().parent().parent().data("object");t.remove();e.refresh().select()})},handleStateEvent(e,t,i){let n=false;if(t.type==="model.condition.nameChange"){if(t.modelId===e.closest("model").attr("id")){Zt.each(e.children("conditions").children("condition"),function(){let e=Zt(this);if(e.text()===t.oldName){e.text(t.newName);n=true}})}}if(n){ii(ti);i&&ii("skuidBuilderComponentNeedsRefresh",[i])}return false},propertiesRenderer(e,t){e.setTitle("Model Action Properties");let i=t.get("xmlState"),n={id:"events",location:"node",type:"multipicklist",storeAs:{type:"node",name:"event"},label:"Initiating Event(s)",helptext:"If these Events occur on this Model, then the action items will be run",picklistEntries:oi,noneSelectedText:"Select Events...",onChange(e,n){let o=n&&!Qt.contains(e,"row.updated")&&Qt.contains(n,"row.updated");if(o){i.children("fields").remove()}let a=n&&!Qt.contains(e,"condition.")&&Qt.contains(n,"condition.");if(a){i.children("conditions").remove()}t.save().refresh().rebuildProps()}},o=[n],a=[{name:"Initiating Events",props:o},$t.getActionsCategory({getModelName:()=>i.closest("model").attr("id"),linkedComponent:t,refreshLinkedComponent:true})];if(i.children("events").children('event:contains("row.updated")').length){o.push({id:"fields",type:"multifield",label:"When which Fields(s) are updated?",helptext:"Optionally, choose which fields must be updated in order for actions to be run. By default, if any field is updated, then actions will be run.",modelName:i.closest("model").attr("id"),noneSelectedText:"Any Fields in Model"})}if(i.children("events").children('event:contains("condition")').length){let e,t=$t.getModelFromModelName(i.closest("model").attr("id"));if(t.length){e=Zt.map(t.children("conditions").children("condition"),function(e){let t=Zt(e),i=t.attr("name");if($t.isFilterableCondition(t)){return{value:i,label:i+" ("+t.attr("field")+")"}}})}o.push({id:"conditions",isNew:true,location:"node",type:"multipicklist",storeAs:{type:"node",name:"condition"},label:"When which Condition(s) are changed?",helpText:"Optionally, choose which conditions must be updated in order for actions to be run.",picklistEntries:e||[],noneSelectedText:"Any Filterable Conditions in Model"})}e.applyPropsWithCategories(a,i)}});const ri=e.builder,li=ri.core,di=e.utils,ci=e.$,ui=e.events.publish,pi="skuidBuilderSave",fi="skuidBuilderNeedSave",hi="<div>";var mi=new li.Builder({id:"fields",name:"Fields",isInToolbar:true,componentRenderer(t){t.body.addClass("nx-pagebuilder-fieldswrapper").css({padding:"0px",overflow:"visible"});let i=t.get("xmlState"),n=i.closest("model"),o=n.attr("type")==="aggregate",a=li.getDataSourceTypeFromModel(n),s=a&&a.prop("runtime.metadataSource"),r=s==="local"||s==="hybrid",l=ci(hi).addClass("nx-pagebuilder-fieldstag nx-pagebuilder-tag"),d=ci(hi).addClass("nx-pagebuilder-fieldschildren").hide();l.append(ci(hi).addClass("nx-pagebuilder-tag-icon").append(e.ui.createIcon("sk-webicon-ink:edit-form")),ci(hi).addClass("nx-pagebuilder-tag-text").text(o?"Aggregations":"Fields"));t.body.append(l);t.fieldschildren=d;t.isExpanded=t.get("isExpanded")||false;t.childFieldComponents=[];i.children().each(function(){let e=li.componentFactory(ci(this),Gt,undefined,undefined,{parentComponent:t});d.append(e.element);t.childFieldComponents.push(e)});t.addActionItem("Add "+(!r?"Ui-Only ":"")+"Field","sk-webicon-ink:add",function(){t.get("fieldsObserver").disconnect();let e=Gt.getDefaultState({id:li.getUniqueFieldName("NewField",li.getModelFromModelName(n&&n.attr("id")))});let o;if(!r)e.attr("uionly","true");i.append(e);o=li.componentFactory(e,Gt,undefined,undefined,{parentComponent:t});d.append(o.element);t.childFieldComponents.push(o);di.scrollToNative(o.element[0]);t.save();o.select();t.get("fieldsObserver").observe(i[0],{childList:"true"})});t.body.append(d);if(!t.get("fieldsObserver")){const e=t.cpi.createObserver({node:i[0],observe:{childList:true},callback:()=>{t.childFieldComponents.forEach(e=>e.unregister());t.refresh();t.fieldschildren.show()}});t.set("fieldsObserver",e)}},propertiesRenderer(t,i){let n=i.get("xmlState").closest("model"),o=li.getDataSourceFromModel(n),a=o.getDataSourceType(),s=n.attr("id"),r=n.attr("type")==="aggregate",l=a.prop("isUiOnly")===true,d=ri.pagebuilderui.cproperties.clear(true),c=ci(hi);d.header.prepend(c);let u=function e(o,a,u){const p=new f["a"]({breadcrumb:li.createBreadcrumbForModel(n),element:o,showDragHandles:!r,allowRepeatedSelectionsOfSameField:r,headertext:d.headertext,filterboxwrapper:c,isMultiselect:true,isSelected(e){return r?false:a.children('[id="'+di.escapeSelector(e)+'"]').length},selectedOnly:u==="selectedonly",selectable(e){return e.displaytype!=="OBJECT"&&!l&&e.omittable!==false},childRelationshipsOnly:u==="childonly",onChange(e){let t=e.fieldId,o=e.isChecked,l=e.targetObjects,d=e.isChildRelationship||false,p=a.children('[id="'+di.escapeSelector(t)+'"]'),f=i.body.find(".nx-pagebuilder-fieldschildren");if(r||o&&p.length===0){li.addFieldToModel({fieldId:t,targetObjects:l,model:n,fieldsNode:a,fieldsElement:f,fieldBuilder:Gt,isChildRelationship:d,view:u});ui(pi)}else{const n=e.fieldName;let o;if(r){o=i.childFieldComponents.find(e=>e.get("xmlState").attr("name")===n)}else{o=i.childFieldComponents.find(e=>e.get("xmlState").attr("id")===t)}if(o){o.remove({preventUnselect:true,doNotSave:true,preventSelectNext:true})}ui(fi);li.publishStateEvent({type:"model.field.remove",fieldId:t,fieldName:n,modelId:s})}c.children("input").first().select()},mode:t.mode});p.render()};let p=[{name:"All Fields",customPropFunction(e,t){u(e,t)},afterPropsRendered:()=>di.delay().then(()=>{ci(".nx-pagebuilder-toolbarpanel-headersearch").focus()})}];if(!r&&!l){p.push({name:"Selected Fields",customPropFunction(e,t){u(e,t,"selectedonly")}});if(a&&a.prop("composer.supports.childRelationships")){p.push({name:"Child Relationships",customPropFunction(e,t){u(e,t,"childonly")}})}}let h=function e(){d.applyPropsWithCategories(p,i.get("xmlState"))};h();if(!l){ci('<div class="nx-pagebuilder-toolbarpanel-actions nx-pagebuilder-refresh-icon-wrapper">').append(ci('<div class="ui-button nx-button-secondary" tabindex="-1">').append(e.ui.createIcon("sk-webicon-ink:refresh")).on("click.skuid",function(){ci.blockUI({message:"Refreshing list of Model fields..."});o.getEntityMetadata({entities:o.buildEntityMetadataRequest({model:n}),ignoreCache:true,ignoreMetadataOverrides:true}).then(function(){ci.unblockUI();h()}).catch(function(e){ci.blockUI({message:"There was an error refreshing fields: "+(e&&e.error?e.error:e),timeout:2e3})})}).skootip("Refresh Fields")).insertAfter(ci(".nx-pagebuilder-toolbarpanel-propgroups").first())}},onSelect(e){if(e.isExpanded&&e.isSelected()){e.fieldschildren.hide();e.isExpanded=false}else{e.element.siblings().find(".nx-pagebuilder-conditionschildren, .nx-pagebuilder-groupbyfieldschildren").hide();di.niceExpand(e.body,e.fieldschildren,0,true);e.isExpanded=true}},hideWrapper:true});const gi=e.builder,bi=gi.core,vi=e.utils,yi=e.$,Ci=e.events.publish,_i="skuidBuilderSave",wi="skuidBuilderNeedSave",xi="<div>";var ki=new bi.Builder({id:"groupby",name:"Groupings",isInToolbar:true,componentRenderer(e){e.body.addClass("nx-pagebuilder-fieldswrapper").css("padding","0px").css("overflow","visible");let t=yi(xi).addClass("nx-pagebuilder-fieldstag");t.append(yi(xi).css("float","left").addClass("sk-icon sk-bi-aggmodel-grouping"));t.append(yi(xi).css({"margin-left":"24px","margin-top":"1px"}).text("Groupings"));e.body.append(t);let i=yi(xi).addClass("nx-pagebuilder-groupbyfieldschildren").hide();e.fieldschildren=i;e.isExpanded=false;e.get("xmlState").children().each(function(){let t=bi.componentFactory(yi(this),Gt,undefined,undefined,{parentComponent:e});i.append(t.element)});e.body.append(i);Yt(e,{onChange:()=>e.fieldschildren.show()})},propertiesRenderer(t,i){let n=i.get("xmlState"),o=n.parent(),a=o.attr("sobject"),s=o.attr("datasource"),r=s&&e.dataSource.getDataSource(s),l=r&&r.getDataSourceType(),d=o.attr("id"),c=gi.pagebuilderui.cproperties.clear(true),u=yi(xi),p=yi(xi),h=yi(xi);c.body.append(h,p);c.header.prepend(u);const m=new f["a"]({breadcrumb:[{rel:a,ref:a,id:d}],element:p,showDragHandles:false,headertext:c.headertext,filterboxwrapper:u,isMultiselect:true,allowRepeatedSelectionsOfSameField(e){let t=e.displaytype;return t&&!e.uionly&&(t==="DATETIME"||t==="DATE")},isSelected(e){return n.children('[id="'+vi.escapeSelector(e)+'"]').length},onChange(e){let t=e.fieldId,a=e.isChecked,s=e.displayType,r=e.targetObjects,l=n.children('[id="'+vi.escapeSelector(t)+'"]'),c=i.body.find(".nx-pagebuilder-groupbyfieldschildren");if(a&&(l.length===0||s==="DATE"||s==="DATETIME")){bi.addFieldToModel({fieldId:t,targetObjects:r,model:o,fieldsNode:n,fieldsElement:c,fieldBuilder:Gt});Ci(_i)}else{let n=i.getChildComponents().find(e=>e.get("xmlState").attr("id")===t);if(n){n.getCPI().remove(true,true)}Ci(wi);bi.publishStateEvent({type:"model.field.remove",fieldId:t,fieldName:e.fieldName,modelId:d})}u.children("input").first().select()},filter(e){return e.groupable||e.displaytype==="DATETIME"}});m.render();let g=[{id:"method",type:"picklist",label:"Grouping Method",defaultValue:"simple",picklistEntries:l&&l.getGroupingMethodsPicklistEntries?l.getGroupingMethodsPicklistEntries():[{value:"simple",label:"Simple"}],onChange(){}}];let b=qe(i.get("xmlState"),g);h.empty().append(b)},onSelect(e){if(e.isExpanded&&e.isSelected()){e.fieldschildren.hide();e.isExpanded=false}else{e.element.siblings().find(".nx-pagebuilder-conditionschildren, .nx-pagebuilder-fieldschildren").hide();vi.niceExpand(e.body,e.fieldschildren,0,true);e.isExpanded=true}},hideWrapper:true});const Si=e.builder,Ii=Si.core,Ti=e.utils,Ai=Ti.makeXMLDoc,Pi=e.$,Ei=Ti.mergeArrays,Mi="<div>";let Di=function e(t){return t.attr("type")||"Query"};let Ni=new Ii.Builder({id:"method",name:"Method",isInToolbar:true,componentRenderer(e){e.body.addClass("nx-pagebuilder-labelwrapper").css("padding","0px");let t=Pi(Mi).addClass("nx-pagebuilder-labeltag").append(Pi(Mi).css("float","left").addClass("sk-icon sk-bi-label"),Pi(Mi).css({"margin-left":"24px","margin-top":"1px"}).text(Di(e.get("xmlState"))));e.body.append(t);e.addActionItem("Remove","sk-webicon-ink:delete",function(){e.remove()},null,null,"sk-delete-icon ui-button nx-button-destructive")},propertiesRenderer(e,t){let i=t.get("xmlState"),n=i.closest("model"),o=Ii.getDataSourceTypeFromModel(n),a={onChange(){t.refresh().rebuildProps(e);e.setTitle("Method: "+Di(i))}},s,r=[{id:"type",label:"Type",type:"picklist",defaultValue:"query",picklistEntries:[{value:"query",label:"Query"},{value:"insert",label:"Insert"},{value:"update",label:"Update"},{value:"delete",label:"Delete"}],onChange(e){let n=e&&Pi.inArray(e,["update","delete","insert"])!==-1,o=false,s=i.attr("verb"),r=Pi.map(Ii.getDataSourceAccessMethodProperty({type:e}).picklistEntries,function(e){return e.value});if((e==="query"||e==="delete")&&i.attr("sendchanges")){if(i.attr("sendchanges")!=="custompayloadinbody"){i.attr("sendchanges","");o=true}}else if(e==="update"){i.attr("sendchanges","asjsoninbody");o=true}if(!s||Pi.inArray(s,r)===-1){i.attr("verb",r[0]);o=true}if(n){if(!i.attr("endpoint")&&e!=="insert"){i.attr("endpoint",i.closest("methods").children('[type="'+(e==="update"?"delete":"update")+'"][endpoint]').attr("endpoint"));o=true}if(!i.attr("successif")){i.attr("successif","requestsucceeds");o=true}if(i.closest("model").attr("query")==="true"&&!i.closest("methods").children('[type="query"]').length){i.closest("model").attr("query","false");o=true}}if(o){t.save()}a.onChange()}}];if(o&&o.getMethodProperties){let n=o.getMethodProperties({component:t,propertiesViewer:e,type:i.attr("type"),onChange:a.onChange});if(n&&n.length){if(n[0].props){s=n;Ei(r,s[0].props);s[0].props=r}else{Ei(r,n)}}}if(!s){s=[{name:"Basic",props:r}]}e.setTitle("Method: "+Di(i));e.applyPropsWithCategories(s,i,{mode:e.mode})},defaultStateGenerator(){return Ai('<method type="query" verb="GET"/>')},hideWrapper:true});var Fi=new Ii.Builder({id:"methods",name:"Methods",isInToolbar:true,componentRenderer(e){e.body.addClass("nx-pagebuilder-labelswrapper").css("padding","0px").css("margin-left","24px");e.body.append(Pi(Mi).addClass("nx-pagebuilder-resourcestag").append(Pi(Mi).css("float","left").addClass("sk-icon sk-bi-labels"),Pi(Mi).css({"margin-left":"24px","margin-top":"1px"}).text("Methods")));let t=Pi(Mi).addClass("nx-pagebuilder-labelschildren");e.body.append(t);e.childItems=t;e.get("xmlState").children().each(function(){let i=Ii.componentFactory(Pi(this),Ni,undefined,undefined,{parentComponent:e});t.append(i.element)});e.childItems.sortableComponent({axis:"y",component:e,placeholder:"sk-placeholder"});e.addActionItem("Add","sk-webicon-ink:add",function(){let i=Ni.getDefaultState(),n;e.get("xmlState").append(i);n=Ii.componentFactory(i,Ni,undefined,undefined,{parentComponent:e});t.append(n.element);Ti.scrollToNative(n.element[0]);e.save();n.select()});Yt(e)},propertiesRenderer(e){e.setTitle("Data Access Methods");e.body.empty().append(Pi(Mi).addClass("nx-pagebuilder-infotext").html("Read/Write REST Services must define a Method for each function you want to perform with the Model, including reading, creating, updating, and deleting data."))},hideWrapper:true});const Oi=e.builder,Ri=Oi.core,Li=e.utils,Bi=e.$,ji="<div>";let Ui=Ri.getBuilder("condition");var Vi=new Ri.Builder({id:"conditions",name:"Conditions",isInToolbar:true,componentRenderer(t){let i=t.get("xmlState"),n=Bi(ji).addClass("nx-pagebuilder-conditionschildren"),o=i.closest("model"),a=Ri.getDataSourceFromModel(o),s=a.getDataSourceType(),r;t.isExpanded=true;t.conditionschildren=n;t.body.addClass("nx-pagebuilder-conditionswrapper").css({padding:"0px",overflow:"visible"}).append(Bi(ji).addClass("nx-pagebuilder-conditionstag nx-pagebuilder-tag").append(Bi(ji).addClass("nx-pagebuilder-tag-icon").append(e.ui.createIcon("sk-webicon-ink:rules")),Bi(ji).addClass("nx-pagebuilder-tag-text").text((s?s.prop("composer.modelConditionsLabel"):"")||"Conditions")));r=function e(i){n.append(Ri.componentFactory(i,Ui,undefined,undefined,{parentComponent:t}).element)};i.children().each(function(){let e=Bi(this);if(e.is("conditions")){e.children().each(function(){r(Bi(this))})}else{r(e)}});t.addActionItem("Add","sk-webicon-ink:add",function(){let e=Ui.getDefaultState({model:o});Xt(t);t.get("xmlState").append(e);let i=Ri.componentFactory(e,Ui,undefined,undefined,{parentComponent:t});n.append(i.element);Li.scrollToNative(i.element[0]);t.save();i.select();Yt(t,{onChange:()=>t.conditionschildren.show()})});if(!i.attr("logic")){n.sortableComponent({axis:"y",component:t,placeholder:"sk-placeholder"})}Yt(t,{onChange:()=>t.conditionschildren.show()});t.body.append(n)},propertiesRenderer(e,t){const i=Ri.getConditionsBuilderProperties({propertiesViewer:e,component:t});e.applyProps(i,t.get("xmlState"),{mode:e.mode})},onSelect(e){let t=e.element;if(e.isExpanded&&e.isSelected()){e.conditionschildren.hide();e.isExpanded=false}else{t.siblings().find(".nx-pagebuilder-groupbyfieldschildren, .nx-pagebuilder-fieldschildren").hide();Li.niceExpand(e.body,e.conditionschildren,0,true);e.conditionschildren.find(".nx-pagebuilder-conditionschildren").show();e.isExpanded=true}},hideWrapper:true});const Hi=e.builder,qi=Hi.core,zi=Hi.desktop,Wi=e.utils,Gi=e.$,Yi=Wi.makeXMLDoc,Xi="<div>";const Ki=new qi.Builder({id:"model",name:"Model",icon:"sk-webicon-ink:models",isInToolbar:true,componentRenderer(t){let i=t.get("xmlState"),n=qi.getDataSourceTypeFromModel(i),o=n.name,a=i.attr("id"),s=Gi(Xi).addClass("nx-pagebuilder-modeltag nx-pagebuilder-tag"),r=Gi(Xi).addClass("nx-pagebuilder-modelchildren"),l=i.children("fields"),d,c,u,p,f,h,m,g,b;if(t.getCPI().isSelected()){r.show()}else{r.hide()}t.body.addClass("nx-pagebuilder-modelwrapper");t.modelchildren=r;t.isExpanded=false;if(t.mode==="readonly"){s.addClass("nx-pagebuilder-component-readonly");r.addClass("nx-pagebuilder-component-readonly")}s.data({generateOptions:{modelState:i}}).on("dblclick",t.builderCPI.onDoubleClick).append(Gi(Xi).addClass("nx-pagebuilder-tag-icon").append(e.ui.createIcon("sk-webicon-ink:models")),Gi(Xi).addClass("nx-pagebuilder-tag-text").text(a));t.body.append(s,r);if(o==="REST"&&i.attr("type")==="readwrite"){d=i.children("methods");if(!d.length){d=Yi("<methods/>").append(Yi('<method type="query" verb="GET"/>'));i.append(d)}c=qi.componentFactory(d,Fi,undefined,undefined,{parentComponent:t});r.append(c.element)}if(!l.length){l=Yi("<fields/>");i.append(l)}u=qi.componentFactory(l,mi,undefined,undefined,{parentComponent:t});r.append(u.element);p=i.children("conditions");if(!p.length){p=Yi("<conditions/>");i.append(p)}f=qi.componentFactory(p,Vi,undefined,undefined,{parentComponent:t});r.append(f.element);if(i.attr("type")==="aggregate"){g=i.children("groupby");if(!g.length){g=Yi('<groupby method="simple"/>');i.append(g)}b=qi.componentFactory(g,ki,undefined,undefined,{parentComponent:t});r.append(b.element)}h=i.children("actions");if(!h.length){h=Yi("<actions/>");i.append(h)}m=qi.componentFactory(h,ai,undefined,undefined,{parentComponent:t});r.append(m.element);t.addActionItem("Remove","sk-webicon-ink:delete",function(){let n=e.builder.pagebuilderui.pagecomponent,o=false;if(!o){let e="Are you sure you want to remove this model?\n\nIf you do, any components which reference this model will be removed, including:\n"+"\n -components (or sub-components) with a model attribute set to this model"+"\n -Conditions / Lookup Filters of type 'Field from another Model'";o=window.confirm(e)}if(o){let e=i.attr("id");t.remove(false);qi.publishStateEvent({type:"model.remove",modelId:e});n.refresh()}},null,null,"sk-delete-icon");t.addActionItem("Duplicate","sk-webicon-ink:copy_1",function(){let e=i.clone();e.children("conditions").find("condition[name^='__autofilter__']").remove();e.attr("id",qi.getUniqueModelName(e.attr("id")));qi.createModel(e)});t.cpi.createObserver({node:i[0],observe:{attributes:true},callback:()=>{e.events.publish("skuid.builder.modelPropChanged",[i.attr("id"),i])}});t.cpi.createObserver({node:i[0],observe:{attributes:true,childList:true,subtree:true},callback:e=>{E["e"](i,e)}})},propertiesRenderer(e,t){let i=t.get("xmlState"),n=qi.getDataSourceFromModel(i),o=n&&n.getDataSourceType();e.setTitle("Model - "+i.attr("id"));if(!o||!o.getModelProperties)return;e.applyPropsWithCategories(o.getModelProperties(t,e,n),i)},hideWrapper:true,hideFromComponentsList:true,defaultStateGenerator(){return qi.defaultStateGenerators.model()},onSelect(e){qi.setLastSelectedModelComponent(e);if(e.isExpanded&&e.isSelected()){e.modelchildren.hide();e.isExpanded=false}else{e.isExpanded=true;Array.from(document.querySelectorAll(".nx-pagebuilder-modelchildren")).forEach(t=>t!==e.modelchildren[0]&&Gi(t).hide());Wi.niceExpand(e.body,e.modelchildren,0,true)}},cpi:{onDoubleClick(){let e=this.get("xmlState");zi.showComponentSelectionPopup({onComponentSelection(t){let i=qi.getBuilder(t);let n=qi.createComponentFromModel(e,t);zi.insertComponentAfterSelected(n,{customBuilder:i}).then(e=>E["a"](e,"model"))}})}}});var $i=Ki;let Qi=e.$,Ji=e.constants,Zi=e.utils,en=Zi.makeXMLDoc,tn=e.actionSequences,nn=Zi.rfc4122v4GUID,on="<div>",an=e.builder,sn=an.core,rn=e.platform.hasFeature("Voice"),ln=rn&&sn.voiceCommands||{},dn="newActionSequence",cn=Ji.EVENT_SCOPES,un=Ji.ACTION_SEQUENCE_TYPES,pn=Zi.mergeArrays;function fn(e){return!e||e===un.REUSABLE}function hn(e){return e.get("xmlState").attr("id")}function mn(){an.getBuilder("actionsequences").component.refresh()}function gn(e){sn.getPageXML().children("resources").children("actionsequences").append(e)}function bn(e,t){let i=t.attr("label");let n=t.clone().attr({id:nn(),label:i+" (clone)"});Qi.each(n.find("[uniqueid]"),function(e,t){Qi(t).attr("uniqueid",Zi.generateUniqueId())});gn(n);e.save();mn()}function vn(t){let i=t.linkedComponent;let n=t.onChange;let o=i.get("xmlState");let a=t.propertiesObj;let s=o.attr("type")||un.REUSABLE;let r={type:"template",id:"description",noFieldSelector:true,label:"Description",helptext:"A description of this Sequence's purpose, which will be used elsewhere in the Page Composer when referencing this Sequence.",state:o};let l={type:"string",id:"label",label:"Sequence Name"+(fn(s)?"":" (optional)"),helptext:"A friendly label for this Sequence, used by the Composer when displaying lists of Action Sequences.",onChange(e,t){n&&n(e,t);mn()},state:o};let d=[{value:un.REUSABLE,label:"Reusable Action Sequence"},{value:un.EVENT_TRIGGERED,label:"Event-triggered Sequence"},{value:un.HOTKEY_TRIGGERED,label:"Hotkey-triggered Sequence"}];if(rn&&e.voiceCommands.voiceIsConfigurableForOrg()){d.push({value:un.VOICE_COMMAND,label:"Voice-triggered sequence"})}let c={type:"picklist",id:"type",label:"Type",defaultValue:un.REUSABLE,helptext:'Reusable Sequences can be invoked from any context using the "Run Action Sequence" Action Type. '+"Other Sequence Types will only be invoked when a particular type of trigger occurs, such as an Event being "+"published.",onChange(e,t){n&&n(e,t);i.rebuildProps();mn()},picklistEntries:d,state:o};let u=[c,l];if(s===un.EVENT_TRIGGERED){pn(u,yn(i,n))}else if(rn&&s===un.VOICE_COMMAND){pn(u,ln.getVoiceTriggeredSequenceProperties(i,n))}else{u.push(r)}let p=[sn.getActionsCategory({linkedComponent:i,props:u})];if(fn(s)||s===un.EVENT_TRIGGERED){pn(p,Nn(i))}else if(s===un.HOTKEY_TRIGGERED){p.push(sn.getHotkeysCategory({linkedComponent:i,propViewer:a}))}else if(s===un.VOICE_COMMAND){pn(p,ln.getVoiceTriggeredCategories(i))}return p}function yn(t,i){let n=t.get("xmlState");let o=e.events.get(n.attr("event-name"));let a=o&&o.metadata&&o.metadata.onlyGlobal;let s=[{value:cn.SKUID,label:"All active pages"},{value:cn.COMPONENT,label:"Only this page"}];let r={value:cn.GLOBAL,label:"All active pages and Lightning Components"};let l=Zi.inPlatform([Ji.LIGHTNING,Ji.VISUALFORCE]);if(l){if(a)s=[r];else s.unshift(r)}if(!l&&a)s=[];let d=[{id:"event-name",type:"combobox",label:"Event Name",helptext:'The name of an Event to subscribe to, e.g. "page.rendered", "order.created". When this event is published, this Action Sequence will be run.',entries:sn.getSubscribableEventEntries(),onChange(n,o){let a=e.events.get(n);if(a&&a.getScope&&a.getScope()===cn.GLOBAL){t.get("xmlState").attr("event-scope",cn.GLOBAL)}else{t.get("xmlState").attr("event-scope",cn.COMPONENT)}t.save().rebuildProps();i&&i(n,o);mn()},state:n}];if(s.length){d.push({id:"event-scope",type:"picklist",label:"Listen for Events published from",helptext:"By default, only events published within this Page will invoke this Action Sequence. "+"However, you can also listen for events published within other Skuid Pages "+(l?", or external Lightning Components, ":"")+"to facilitate communication between this Page and other contexts.",defaultValue:a?cn.GLOBAL:cn.COMPONENT,picklistEntries:s,state:n})}d.push({id:"event-channel",type:"template",displayAs:"input",label:"Event Channel",location:"attribute",helptext:"(Optional) A channel on which to listen for this event. If specified, "+"this Action Sequence will only be run when the given event is published on this channel. "+'For example, if channel is "acme" and event is "order.created", '+'this Action Sequence will NOT be run if someone publishes the "order.created" event '+'without also specifying the "acme" channel',state:n});return d}function Cn(e){let t=e||"New Sequence",i=t,n=0;while(wn(i)){n++;i=t+n}return i}function _n(){let e=[sn.getPageXML()],t=sn.getMasterPageXML();if(t)e.push(t);return e}function wn(e){return tn.getSequenceXMLFromId(e,_n())}function xn(){return tn.getAllActionSequencesFromPages(_n())}function kn(e,t){let i=t.get("xmlState");let n=e.attr("type")||"text";let o=e.attr("name");let a=i.children("inputs");let s=a.children();let r={id:"input-"+o,label:o,isStateless:true,onChange(e,r){let l;a=i.children("inputs");if(!a.length){a=en("<inputs/>").appendTo(i)}s=a.children();Qi.each(s,function(e,t){t=Qi(t);if(t.attr("name")===o){l=t;return-1}});if(!(e||e===false||e===0)){l&&l.remove();t.save();return}if(!l){l=en("<input/>").attr({name:o});l.appendTo(a)}l.attr("value",e);t.save();if(n==="model"){if(r===false){t&&t.refresh().rebuildProps()}}},valueFunction(){let e=0;for(;e<s.length;e++){let t=s.eq(e);if(t.attr("name")===o){return t.attr("value")}}}};let l={value:"text",model:"model","model-field":"field","model-condition":"condition"};r.type=l[n];if(n==="model-field"||n==="model-condition"){let t=e.attr("model-source");Qi.each(s,function(e,i){i=Qi(i);if(i.attr("name")===t){r.modelname=r.modelName=i.attr("value");return-1}});if(!r.modelName){r.modelname=r.modelName=sn.getFirstModelOnPage()}}return r}function Sn(e,t,i){let n=xn(),o=t.get("xmlState"),a=o.attr("action-sequence-id"),s,r,l=n.filter(function(e){return fn(e.attr("type"))}).map(function(e){let t=e.attr("id"),i=e.attr("label")||t;return{label:i,value:t}});if(!a){a=l.length&&l[0].value||""}s=sn.actionSequences.getSequenceXMLFromId(a);r=On(s);if(!n||!n.length){e.push({type:"string",label:"Action Sequence Name",value:"No sequences on page",readonly:true,isStateless:true});return}e.push({id:"action-sequence-id",label:"Action Sequence",type:"picklist",picklistEntries:l,onChange(e,i){t.refresh();if(i){t.rebuildProps()}}});if(r){pn(e,Qi.map(r,function(e){return kn(e,t)}))}e.push({mode:"readonly",type:"textarea",label:"Description",id:"description",isStateless:true,valueFunction(){if(!a)return"";if(!s)return"";let e=s.children("description"),t=e.text()||"";if(i){let e=sn.getModelFromModelName(i);if(e){return Zi.mergeAsTextInContext(t,{model:{sobject:e.attr("sobject"),id:e.attr("id"),label:e.attr("label")}})}}return Zi.mergeAsTextInContext(t)}})}function In(e){if(!e)return"Run Action Sequence";let t=e.attr("action-sequence-id"),i;if(t){i=sn.actionSequences.getSequenceXMLFromId(t);t=i&&i.attr("label")||t}return t?"Run: "+t:"Run Action Sequence"}function Tn(e){return[{label:"Break up into individual actions",icon:"sk-webicon-ink:action-sequences",action(){let t=e.get("xmlState").attr("action-sequence-id");let i=wn(t);let n=i&&i.children("actions").children().clone();if(!n.length)return;let o=e.get("xmlState").parent().parents(":not(interactions)").first();e.get("xmlState").before(n);e.get("xmlState").remove();let a=sn.getComponentFromState(o);a&&a.save().refresh().rebuildProps()}}]}function An(){let t=e.$M(dn);if(!t){t=new e.model.Model(""+'<model id="'+dn+'" query="true" createrowifnonefound="true" datasource="Ui-Only">'+"<fields>"+'<field id="label" displaytype="TEXT" label="Display Name" required="true"/>'+'<field id="id" displaytype="TEXT" label="Id" required="true"/>'+'<field id="description" displaytype="TEXTAREA" label="Description" helptext="The description for the action sequence" ogdisplaytype="TEXT" length="2000"/>'+"</fields>"+"<conditions/>"+"<actions/>"+"</model>")}t.initialize().register();return t}function Pn(t){e.actions.runActionNode(en('<action type="showModal">\n\t\t<skuid__modal title="Convert to Action Sequence" width="60em">\n\t\t\t<components>\n\t\t\t\t<skuid__form showSaveCancel="false" model="'.concat(dn,'" uniqueid="').concat(nn(),'" mode="edit">\n\t\t\t\t\t<sections>\n\t\t\t\t\t\t<section title="" showHeading="false">\n\t\t\t\t\t\t\t<rows>\n\t\t\t\t\t\t\t\t<row>\n\t\t\t\t\t\t\t\t\t<fields>\n\t\t\t\t\t\t\t\t\t\t<skuid__field uniqueid="').concat(nn(),'" id="label"/>\n\t\t\t\t\t\t\t\t\t</fields>\n\t\t\t\t\t\t\t\t</row>\n\t\t\t\t\t\t\t\t<row>\n\t\t\t\t\t\t\t\t\t<fields>\n\t\t\t\t\t\t\t\t\t\t<skuid__field uniqueid="').concat(nn(),'" id="description"/>\n\t\t\t\t\t\t\t\t\t</fields>\n\t\t\t\t\t\t\t\t</row>\n\t\t\t\t\t\t\t</rows>\n\t\t\t\t\t\t</section>\n\t\t\t\t\t</sections>\n\t\t\t\t\t<styles>\n\t\t\t\t\t\t<spacing bottom="3"/>\n\t\t\t\t\t</styles>\n\t\t\t\t</skuid__form>\n\t\t\t</components>\n\t\t\t<buttons>\n\t\t\t\t<skuid__button label="Create" uniqueid="').concat(nn(),'" styleSettingsVariant="primary">\n\t\t\t\t\t<actions>\n\t\t\t\t\t\t<action type="custom" snippet="createActionSequence"/>\n\t\t\t\t\t\t<action type="closeTopmostPopup"/>\n\t\t\t\t\t</actions>\n\t\t\t\t\t<enableConditions logictype="and" message="Display Name Needed">\n\t\t\t\t\t\t<condition type="blank" operator="!=" enclosevalueinquotes="false" fieldmodel="').concat(dn,'" sourcetype="fieldvalue" field="label" value="null"/>\n\t\t\t\t\t</enableConditions>\n\t\t\t\t</skuid__button>\n\t\t\t\t<skuid__button label="Cancel" uniqueid="').concat(nn(),'" styleSettingsVariant="default">\n\t\t\t\t\t<actions>\n\t\t\t\t\t\t<action type="closeTopmostPopup"/>\n\t\t\t\t\t</actions>\n\t\t\t\t</skuid__button>\n\t\t\t</buttons>\n\t\t</skuid__modal>\n\t</action>')),t)}function En(t){if(t.get("xmlState").parent("actionsequence").length)return[];return[{label:"Convert to Action Sequence",icon:"sk-webicon-ink:action-sequences",tooltip:"Convert to Action Sequence",action(){let i=t.get("xmlState"),n=An(),o;n.emptyData();o=n.createRow();n.updateRow(o,Mn());e.snippet.register("createActionSequence",function(){let e=Zi.encodeHTML,n=en('\n\t\t\t\t\t\t<actionsequence id="'.concat(o.id,'" label="').concat(e(o.label),'">\n\t\t\t\t\t\t\t<actions></actions>\n\t\t\t\t\t\t\t<description>').concat(e(o.description||""),"</description>\n\t\t\t\t\t\t</actionsequence>")),a;n.children("actions").prepend(i.children().clone());gn(n);a=sn.getComponentFromState(t.get("xmlState").parents(":not(interactions)"));i.empty();i.prepend('<action type="action-sequence" action-sequence-id="'+o.id+'"/>');a&&a.save().refresh().rebuildProps();mn()});Pn(t)}}]}function Mn(){return{id:nn(),label:Cn()}}function Dn(e){let t=e.get("xmlState"),i=t.attr("label"),n=t.attr("type")||un.REUSABLE,o;if(n===un.REUSABLE){return i||hn(e)}if(n===un.EVENT_TRIGGERED){o=t.attr("event-name");return"(Event: "+(o?'"'+sn.getEventLabelByName(o)+'"':"Not specified")+")"+(i?" "+i:"")}if(n===un.VOICE_COMMAND){return ln.getActionSequenceLabel(t,i)}if(n===un.HOTKEY_TRIGGERED){return"(Hotkey): "+(i||hn(e))}}function Nn(e,t){t=t||{};let i=e;let n=t.topLevelProps||[];return[{name:"Inputs",tree:{id:"inputs",label:"Inputs",addtooltip:"Add Input",deleteable:false,icon:"sk-icon-component-pack",isChild:true,linkedComponent:e,props:n,refreshLinkedComponent:false,childrenFunction(e){return[{id:"input",deletetooltip:"Remove Input",deleteable:!t.staticInputs,addable:!t.staticInputs,refreshLinkedComponent:false,linkedComponent:i,indent:0,icon(){return"sk-webicon-ink:actions"},labelFunction(e){return(e.attr("name")||"New Input")+": "+(e.attr("type")||"value")},defaultStateFunction(){return en('<input type="value" name=""/>')},propsFunction(n){let o=n.get("xmlState");let a=o.attr("type");let s=[{value:"value",label:"Value"},{value:"model",label:"Model"},{value:"model-field",label:"Model Field"},{value:"model-condition",label:"Model Condition"}];let r=[{id:"name",label:"Name",type:"string",readonly:t.staticInputs||false,onChange(){e.refresh()}},{id:"type",label:"Type",type:"picklist",picklistEntries:s,onChange(){n.save();n.refresh().rebuildProps()}}];i;if(a==="model-field"||a==="model-condition"){r.push({id:"model-source",label:"Input Model Source",type:"picklist",picklistEntries(){let e=Fn(i.get("xmlState"));let t=[];Qi.each(e,function(e,i){let n=i.attr("name");t.push({label:n,value:n})});return t}})}return r}}]}}}]}function Fn(e){return Qi.map(On(e),function(e){if(e.attr("type")==="model")return e})}function On(e){if(!e)return;let t=e.children("inputs").children();return Qi.map(t,function(e){return Qi(e)})}function Rn(e){if(!e)return;let t=e.parents("actionSequence");if(!t.length)return;return t}function Ln(e,t){return Qi.map(On(e),function(e){if(e.attr("type")!=="model-field"||e.attr("model-source")!==t)return;return e.attr("name")})}function Bn(e,t){return Qi.map(On(e),function(e){if(e.attr("type")!=="model-condition"||e.attr("model-source")!==t)return;return e.attr("name")})}function jn(e,t){t=Hn(t);let i=Ln(e,t);let n=Bn(e,t);return en('<model datasource="Ui-Only">'+"<fields>"+Qi.map(i,function(e){return'<field id="{{$Input.'+e+'}}" label="'+e+'" displaytype="Any Type"/>'}).join(" ")+"</fields>"+"<conditions>"+Qi.map(n,function(e){return"<condition "+'type="fieldvalue" '+'name="{{$Input.'+e+'}}" '+'label="'+e+' (input)"  displaytype="Any Type"/>'}).join(" ")+"</conditions>"+"</model>")}let Un=new sn.Builder({id:"actionsequence",name:"Action Sequence",isInToolbar:true,componentRenderer(t){let i=this,n=Dn(t);t.tagText=n;t.body.addClass("nx-pagebuilder-resourcewrapper").append(Qi(on).addClass("nx-pagebuilder-resourcetag nx-pagebuilder-tag").append(Qi(on).addClass("nx-pagebuilder-tag-icon").append(e.ui.createIcon("sk-webicon-ink:action-sequences")),Qi(on).addClass("nx-pagebuilder-tag-text").text(n)));t.getCPI().addActionItem("Remove Action Sequence","sk-webicon-ink:delete",function(){t.remove()});t.getCPI().addActionItem("Clone Action Sequence","sk-webicon-ink:copy",function(){bn(t,t.get("xmlState"),i)})},propertiesRenderer(e,t){let i={onChange(){t.refresh();e.setTitle("Sequence - "+Dn(t))},propertiesObj:e,linkedComponent:t};let n=vn(i);e.applyPropsWithCategories(n,t.get("xmlState"));e.setTitle("Sequence - "+Dn(t))},defaultStateGenerator(e){let t=Mn(),i=e||t.label;return en("<actionsequence "+'id="'+t.id+'" '+'label="'+i+'">'+"<description/>"+"</actionsequence>")},hideWrapper:true});function Vn(e){return"{{$Input."+e+"}}"}function Hn(e){if(!e)return e;let t="{{$Input.";if(e.indexOf(t)!==0){return e}return e.substring(t.length,e.length-2)}sn.actionSequences={addInputMerge:Vn,appendActionSequenceActionProps:Sn,convertActionsToActionSequenceItem:En,getActionSequenceActionItems:Tn,getActionSequenceFromChildAction:Rn,getAllActionSequences:xn,getInputsCategory:Nn,getLabelForActionSequenceAction:In,getModelXMLForPickerOfInputModel:jn,getModelInputsFromActionSequenceXML:Fn,getSequenceXMLFromId:wn,removeInputMerge:Hn};var qn=Un;const zn=e.builder,Wn=zn.core,Gn=e.$,Yn="<div>",Xn=["Action Sequences allow you to create reusable, named sequences of Actions ","which can be run in response to user interactions, events, hotkeys, or voice commands."].join("");var Kn=new Wn.Builder({id:"actionsequences",name:"Action Sequences",isInToolbar:true,componentRenderer(e){let t=e.childItems=e.body;t.addClass("nx-pagebuilder-component-actionsequences");let i=Wn.masterPageXML&&Wn.masterPageXML.children("resources");if(i){i.children("actionsequences").children("actionsequence").each(function(){let e=Wn.componentFactory(Gn(this),qn);t.append(e.element)})}e.get("xmlState").children().each(function(){let e=Wn.componentFactory(Gn(this),qn);t.append(e.element)});e.childItems.sortableComponent({axis:"y",component:e,placeholder:"sk-placeholder",items:"> :not(.nx-pagebuilder-component-readonly)"});this.component=e;Yt(e)},propertiesRenderer(e){e.setTitle("Action Sequences");e.body.empty().append(Gn(Yn).addClass("nx-pagebuilder-infotext").html(Xn))},hideWrapper:true});const $n=e.builder,Qn=$n.core,Jn=e.utils,Zn=Jn.makeXMLDoc,eo=e.$,to="<div>";var io=new Qn.Builder({id:"javascript",name:"JavaScript",isInToolbar:true,componentRenderer(e){e.body.addClass("nx-pagebuilder-labelswrapper nx-pagebuilder-component-javascripts");let t=e.childItems=e.body;if(Qn.moduleResources&&Qn.moduleResources.js){eo.each(Qn.moduleResources.js,function(){let e=Qn.componentFactory(Zn('<jsitem name="'+this.name+'" namespace="'+this.namespace+'" location="staticresource"/>'),no,{mode:"readonly"});t.append(e.element)})}let i=Qn.masterPageXML&&Qn.masterPageXML.children("resources");if(i){i.children("javascript").children("jsitem").each(function(){let e=Qn.componentFactory(eo(this),no);t.append(e.element)})}e.get("xmlState").children().each(function(){let e=Qn.componentFactory(eo(this),no);t.append(e.element)});e.childItems.sortableComponent({axis:"y",component:e,placeholder:"sk-placeholder",items:"> :not(.nx-pagebuilder-component-readonly)"});this.component=e;Yt(e)},propertiesRenderer(t){let i=this;t.setTitle("Included JavaScript");eo(to).prependTo(t.header);let n=[{name:"Help",customPropFunction(t){t.empty().append(eo(to).addClass("nx-pagebuilder-infotext").html("Skuid allows you to add JavaScript files that will be included with this page."+"<br/><br/>"+'More information: <a href="'+e.platform.getDocsBaseUrl()+'skuid/app-composer.html#additional-resources-in-the-app-elements-pane" target="SkuidBuilderHelp">Including Custom JavaScript in a Skuid Page</a>'))}}];t.applyPropsWithCategories(n,i.component.get("xmlState"))},hideWrapper:true});const no=new Qn.Builder({id:"jsitem",name:"JavaScript Item",isInToolbar:true,componentRenderer(t){let i=t.get("xmlState"),n=Qn.getJSItemLabel(i);t.body.addClass("nx-pagebuilder-resourcewrapper").css("padding","0px");t.tagText=n.name+" "+n.prefix;let o=eo(to).addClass("nx-pagebuilder-resourcetag nx-pagebuilder-tag").append(eo(to).addClass("nx-pagebuilder-tag-icon").append(e.ui.createIcon("sk-webicon-ink:javascript")),eo(to).addClass("nx-pagebuilder-tag-text").text(t.tagText));t.body.append(o);if(Jn.startsWith(i.attr("location"),"inline")){t.body.off("dblclick").on("dblclick",function(){Qn.showCodeEditor({state:i,syntax:"javascript",title:"Edit Inline JavaScript",onClose(){t.rebuildProps()}})})}t.addActionItem("Delete","sk-webicon-ink:delete",function(){t.remove()})},propertiesRenderer(e,t){let i=t.get("xmlState").attr("name");e.setTitle("JavaScript Item "+(i&&"- "+i));e.applyProps(Qn.getJSItemProperties(t),t.get("xmlState"),{mode:e.mode})},defaultStateGenerator(){return Qn.defaultStateGenerators.jsitem()},hideWrapper:true});const oo=e.builder,ao=oo.core,so=oo.desktop,ro=e.$,lo="<div>";var co=new ao.Builder({id:"models",name:"Models",isInToolbar:true,componentRenderer(e){let t=e.body.css("overflow","visible"),i=e.get("xmlState");if(ao.masterPageXML&&ao.masterPageXML.length){if(!e.get("masterModelComponents")){e.set("masterModelComponents",Array.from(ao.masterPageXML.children("models").children("model")).map(t=>{return ao.componentFactory(ro(t),$i,true,undefined,{parentComponent:e})}))}e.get("masterModelComponents").forEach(e=>t.append(e.getElement()))}let n=e.get("modelsAcceptor")||new so.ComponentAcceptor(i,{customBuilder:$i,acceptsBuilderIds:["model"],requiresGlobalComponent:false,mode:e.mode,parentComponent:e});n.setStyle({background:"transparent",border:"none",padding:"0",margin:"0"});e.set({modelsAcceptor:n});t.append(n.element);this.component=e;e.builderCPI.setupChildObserver()},propertiesRenderer(e){e.setTitle("Skuid Models");e.body.empty().append(ro(lo).addClass("nx-pagebuilder-infotext").html("Models connect your components to data sources. Each model "+"is associated with a single object in a data source. "+"Once a model is added, you can select which fields for your "+"model to interact with, as well as add conditions "+"to determine which rows the model should contain. "+"Data-driven components within the page can then select "+"which model(s) they should be connected to.<br/>"+"<h3>Pro tips</h3>"+"<ul>"+"<li>Double-click a model to quickly create a component associated to that model.</li>"+"</ul>"))},cpi:{setupChildObserver(){const e=this.get("masterModelComponents")||[];Yt(this,{getChildComponents:()=>this.getChildComponents().filter(t=>!e.includes(t))})},createModel(e){const t=this,i=this.get("modelsAcceptor"),n=e||$i.getDefaultState();Xt(t);const o=ao.componentFactory(n,$i,true,undefined,{parentComponent:t});i.acceptorComponent.cpi.addComponent(o);o.save();o.select();this.builderCPI.setupChildObserver();E["d"](o);let a=0;let s=setInterval(()=>{if(document.contains(o.getElement())||a===10){clearInterval(s);document.querySelector(".nx-pagebuilder-toolbarpanel-body").scrollTo({top:999999999,behavior:"smooth"})}a++},10);return o},filterComponents(e=""){const t=this.get("modelsAcceptor").acceptorComponent,i=t.getChildComponents();e=e.toLowerCase().replace(" ","");i.forEach(t=>{const i=t.get("xmlState"),n=i.attr("id").toLowerCase().replace(" ","");if(e===""||n.match(e)){t.set("show",true)}else{t.set("show",false)}})}},hideWrapper:true});var uo=n(30);const po=e.$,fo="<div>",ho=e.platform,mo=e.$L,go=e.utils,bo=()=>e.builder,vo=()=>e.builder.core;let yo;function Co(){let e=vo().pageModel,t=vo().pageRow,i=bo().pagebuilderui.cselector,n=ho.getEntityFieldName("page","is_master_page");if(e.getFieldValue(t,n)!==true){i.element.find('div[data-ctype="skuid__pageRegion"]').hide()}}const _o="component-search",wo="model-search",xo="javascript-search",ko="index-search",So="action-sequence-search";class Io{constructor(t){const i=this;i.currentTabLabel=mo("Components");let n=po('<div id="toolbarWrapper">'),o=po(fo).addClass("nx-pagebuilder-toolbarpanel-header"),a=po(fo).addClass("nx-pagebuilder-toolbarpanel-headertext").text("Components").appendTo(o),s=po(fo).addClass("nx-pagebuilder-toolbarpanel-headersearch-wrapper").appendTo(o);const r="index-previous-btn",l="index-next-btn",d="toolbox-search-button-group";const c=e.component.createFromDefinition({componentType:"skuid__grid",divisions:[{maxWidth:"170px",components:[_o,wo,xo,ko,So].map(e=>({uniqueId:e,styleSettingsVariant:"toolbox-search",componentType:"skuid__inputText",buttonIcon:"sk-webicon-ink:search",placeholder:"Search...",autocomplete:false,show:e===_o}))},{components:[{componentType:"skuid__buttonGroup",uniqueId:d,show:false,buttons:[{uniqueId:r,styleSettingsVariant:"toolbox-default-icon",icon:"sk-webicon-ink:arrow-up",disabled:true,onClick(){i.indexComponent.cpi.selectPrevious()},tooltip:'<tooltip text="Previous match (Shift+Enter)" compact="true"/>'},{uniqueId:l,styleSettingsVariant:"toolbox-default-icon",icon:"sk-webicon-ink:arrow-down",disabled:true,onClick(){i.indexComponent.cpi.selectNext()},tooltip:'<tooltip text="Next match (Enter)" compact="true"/>'}],styles:{spacing:{marginLeft:"s2"}}}]}]});let u=this.searchInputComponent=e.component.getById(_o);const p=this.searchComponents={[_o]:e.component.getById(_o),[wo]:e.component.getById(wo),[So]:e.component.getById(So),[xo]:e.component.getById(xo),[ko]:e.component.getById(ko)};this.nextButtonComponent=e.component.getById(r);this.previousButtonComponent=e.component.getById(l);this.searchButtonGroup=e.component.getById(d);s.append(c.getElement());this.toolbarPanelHeaderSearchWrapper=s;this.componentSelector=t;go.eachObject(this.searchComponents,e=>{e.subscribeChange("value",e=>this.onSearchInput(e));e.subscribe("keydown",e=>{if(this.currentTabLabel==="Index"&&e.which===13){if(e.shiftKey){this.indexComponent.cpi.selectPrevious()}else{this.indexComponent.cpi.selectNext()}}});e.get("inputButton").subscribe("click",()=>e.set("value",""))});let f=po('<div id="toolbarPanelWrapper" class="nx-pagebuilder-toolbarpanel-wrapper">'),h=po(fo).addClass("nx-pagebuilder-toolbarpanel-body"),m=po('<ul id="toolbarTabNav" class="nx-pagebuilder-toolbar-tab-nav">'),g="nx-pagebuilder-toolbar-tab",b=e.ui.createIcon("sk-webicon-ink:components"),v=e.ui.createIcon("sk-webicon-ink:models"),y=e.ui.createIcon("sk-webicon-ink:action-sequences"),C=e.ui.createIcon("sk-webicon-ink:javascript"),_=e.ui.createIcon("sk-webicon-ink:index");m.append(po("<li>").addClass(g).attr("data-label",mo("Components")).addClass("nx-pagebuilder-toolbar-tab-selected").prop("title",mo("Components")).attr("id","components-tab").append(b),po("<li>").addClass(g).attr("data-label",mo("Models")).prop("title",mo("Models")).attr("id","models-tab").append(v),po("<li>").addClass(g).attr("data-label","Index").prop("title","Index").attr("id","index-tab").append(_),po("<li>").addClass(g).attr("data-label","Action Sequences").prop("title","Action Sequences").prop("id","action-sequences-tab").append(y),po("<li>").addClass(g).attr("data-label","JavaScript").prop("title","JavaScript").prop("id","javascript-tab").append(C));m.skootip(null,{position:{my:"left center",at:"right+3 center",using:null},show:{delay:0,duration:150},hide:{delay:0,duration:150},open(e,t){let i=po(fo).addClass("sk-hastooltip").css({width:"0",left:"4px",top:"-12px","-webkit-transform":"rotate(90deg)",transform:"rotate(90deg)"});t.tooltip.append(i)}});i.componentstab=po(fo).prop("id","components").append(t.element).css("display","block"),i.modelstab=po(fo).prop("id","models").css("display","none"),i.javascripttab=po(fo).prop("id","resources").css("display","none"),i.actionSequenceTab=po(fo).prop("id","resources").css("display","none"),i.indexTab=po(fo).prop("id","index").css("display","none");n.append(m,f);h.append(i.componentstab,i.modelstab,i.indexTab,i.actionSequenceTab,i.javascripttab);f.append(o,h);m.on("click","li.nx-pagebuilder-toolbar-tab",function(){u.set("value","");let e=po(this),t=e.attr("data-label");if(t===(i.lastItem&&i.lastItem.attr("data-label")))return;i.currentTabLabel=t;i.lastItem=e;E["c"](i);e.addClass("nx-pagebuilder-toolbar-tab-selected");e.siblings(".nx-pagebuilder-toolbar-tab").removeClass("nx-pagebuilder-toolbar-tab-selected");let n=h.children().eq(e.index());i.updatePlusButton();h.children().css("display","none");n.css("display","block");a.empty();a.append(t);i.searchButtonGroup.set("show",t==="Index");const o={Components:_o,JavaScript:xo,Models:wo,Index:ko,"Action Sequences":So};go.eachObject(o,(e,i)=>{p[e].set("show",t===i)});i.searchInputComponent=u=p[o[t]];let s=bo().pagebuilderui.cproperties;s.clear();let r;switch(t){case"Action Sequences":r=i.actionSequencesComponent;break;case"JavaScript":r=i.javascriptComponent;break;case"Models":r=i.pageModelsComponent;break}if(r){if(r.isSelected())r.unselect();r.select({focus:false});i.selectedTabComponent=r}else{if(t==="Index"){s.setTitle("Index");const e="The Index allows builders to view an expandable/collapsible list of each component, and the elements they contain, on the page. \n\t\t\t\t\t\tWhen you click an item in the Index, it's indicated on the page, allowing quick access to page components and elements.\n\t\t\t\t\t\t<br><br>\n\t\t\t\t\t\tFor more information, see the Index topic.";s.applyHtml(e)}else{s.setTitle("Skuid Components");const e='Skuid components are the visual building blocks of a Skuid Page. They define page functionality.\n\t\t\t\t\t\tSome components are purely visual, influencing page layout and appearance, while others can be connected to models that interact with configured data sources.\n\t\t\t\t\t\tA few components (the Tab Set or the Responsive Grid, among others) can contain other components.\n\t\t\t\t\t\t<br><br>\n\t\t\t\t\t\tComponents can be customized by using associated properties or merge syntax, and creating style variants using the <a href="'.concat(ho.getDocsBaseUrl()+"skuid/design-system-studio/",'">Design System Studio</a>.\n\t\t\t\t\t\t<br><br>\n\t\t\t\t\t\tFor more information, see the <a href="').concat(ho.getDocsBaseUrl()+"skuid/components/ink",'">Components introduction</a>.');s.applyHtml(e)}const e=bo().componentRegistry.getSelectedPropertyComponent();e&&e._getCPI().unselect()}u.cpi.focus()});m.removeClass("ui-corner-all");i.element=n;po(document).on("keydown.skuidbuilder",function(e){if(e.metaKey||e.ctrlKey){switch(e.key){case"j":if(e.shiftKey){if(!i.indexComponent.get("selectedSection"))i.indexComponent.cpi.selectBySearch("");m.children('[data-label="Index"]').click();i.indexComponent&&i.indexComponent.cpi.focus();e.preventDefault()}else{i.searchInputComponent.cpi.focus()}break;case"k":bo().pagebuilderui.cproperties.body.find("input, select, textarea").first().focus();break}}});Co()}updateContents(e){const t=this;t.actionSequencesComponent&&t.actionSequencesComponent.unregister();t.javascriptComponent&&t.javascriptComponent.unregister();let i=e.children("resources"),n=e.children("models"),o=i.children("actionsequences"),a=i.children("javascript");const s=t.actionSequencesComponent=vo().componentFactory(o,Kn);const r=t.javascriptComponent=vo().componentFactory(a,io);const l=t.pageModelsComponent=vo().componentFactory(n,co);yo&&yo.unregister();yo=t.indexComponent=Object(uo["a"])();yo.subscribe("scrollMeIntoView",e=>{if(!t.lastItem||t.lastItem.attr("data-label")!=="Index")return;if(!e||!document.contains(e))return;const i=64;const n=document.querySelector(".nx-pagebuilder-toolbarpanel-body");const o=e.getBoundingClientRect().y-n.getBoundingClientRect().y+n.scrollTop;n.scrollTo({top:o-i,behavior:"smooth"})});this.indexTab.empty().append(yo.element);this.modelstab.empty().append(l.element);this.actionSequenceTab.empty().append(s.element);this.javascripttab.empty().append(r.element)}addButtonToLeftHeader(t,i,n,o){let a=po(fo).addClass("nx-pagebuilder-component-headerbuttons ui-button nx-button-secondary"),s=po("<span>").addClass("nx-pagebuilder-component-actionicon").append(e.ui.createIcon(t));a.on("click",function(){n()});a.append(s);if(i!==""){a.skootip(i);a.attr("id",o)}po("#toolbarWrapper .nx-pagebuilder-toolbarpanel-header").append(a)}updatePlusButton(){po("#toolbarWrapper .nx-pagebuilder-toolbarpanel-header .nx-pagebuilder-component-headerbuttons").remove();switch(this.currentTabLabel){case"JavaScript":this.addButtonToLeftHeader("sk-webicon-ink:add","Add JavaScript resource",()=>{const e=no.getDefaultState();this.javascriptComponent.get("xmlState").append(e);let t=vo().componentFactory(e,no);this.javascriptComponent.childItems.append(t.element);go.scrollToNative(t.element[0]);this.javascriptComponent.save();t.select()},"javascript-add");break;case"Models":this.addButtonToLeftHeader("sk-webicon-ink:add","Add Model",()=>{vo().createModel()},"models-add");break;case"Action Sequences":this.addButtonToLeftHeader("sk-webicon-ink:add","Add Action Sequence",()=>{let e=qn.getDefaultState();this.actionSequencesComponent.get("xmlState").append(e);let t=vo().componentFactory(e,qn);this.actionSequencesComponent.body.append(t.element);go.scrollToNative(t.element[0]);this.actionSequencesComponent.save();t.select()},"action-sequences-add");break}}onSearchInput(e){this.searchInputComponent.get("inputButton").set("icon",e?"sk-webicon-ink:close":"sk-webicon-ink:search");this.previousButtonComponent.set("disabled",!e);this.nextButtonComponent.set("disabled",!e);switch(this.currentTabLabel){case mo("Components"):this.componentSelector.filterComponents(e);break;case"Models":this.pageModelsComponent.builderCPI.filterComponents(e);break;case"Index":e&&this.indexComponent.cpi.selectBySearch(e);break;default:To(this.selectedTabComponent,e)}Co()}}function To(e,t){let i=e.body.children(),n;if(t===""){i.show()}else{for(n=0;n<i.length;n++){const e=bo().componentRegistry.getById(i[n].getAttribute("id"));if(!e)return;const o=e.tagText.toLowerCase().split(" ").join("");if(o.match(t.toLowerCase().split(" ").join(""))){po(i[n]).show()}else{po(i[n]).hide()}}}}const{div:Ao,$:Po}=Object(kt["d"])();(function(e){const t=e.builder,i=t.core,n=t.desktop,o=e.utils,a=e.dataSource,s=o.getObjectProperty,r=o.makeXMLDoc,l=e.snippet,d=l.getSnippet,c=l.registerSnippet,u=e.platform,p=kt["b"].SALESFORCE,f=kt["b"].VISUALFORCE,h=kt["b"].LIGHTNING,m="skuidBuilderSave",g="<div>";[$i,qn,Kn].forEach(e=>i.registerBuilder(e));let b=false;function v(){return e.settings.skuidApp&&e.settings.skuidApp("coreMode")==="development"}t.fieldBuilder=Gt;n.fieldbuilder=Gt;let y=new i.Builder({id:"skuid__page",name:"Skuid Page",addChildComponent(e,t){if(!i.masterPage&&e.acceptor.canAcceptComponent(t)){e.acceptor.addComponent(t);return true}else{return false}},componentRenderer(o){let a=t.pagebuilderui,s=o.get("xmlState"),l=s.children("models").first(),d=s.children("resources").first(),c=s.children("components").first(),u=s.children("pageregioncontents").first(),p,f,h="{{"+e.platform.getEntityFieldName("page","name")+"}}";Object(Dt["a"])(o.get("xmlState"),o.body);if(!l.length){l=r("<models/>");s.append(l)}if(!d.length){d=r("<resources/>");s.append(d)}if(!c.length){c=r("<components/>");s.append(c)}if(u.length){p=u.children('pageregioncontent[uniqueid="__header"]').first();if(p.length){i.appendComponents(o.body,p.children("components").first().children())}}if(o.acceptor){o.acceptor.acceptorComponent.unregister()}let m=o.acceptor=new n.ComponentAcceptor(c,{mode:o.mode,parentComponent:o});m.acceptorComponent.cpi.addClass("nx-main-page-acceptor");o.setTitle(a.model.mergeRow(a.row,o.builder.name+" - "+h).text());a.model.subscribe("row.updated",()=>{o.setTitle(a.model.mergeRow(a.row,o.builder.name+" - "+h).text())});o.body.css("padding","0 0 0").append(m.element.css("padding","8px"));if(u.length){f=u.children('pageregioncontent[uniqueid="__footer"]').first();if(f.length){i.appendComponents(o.body,f.children("components").first().children())}}},propertiesRenderer(n,a){n.setTitle("Edit Page Properties");let s=t.pagebuilderui,l=s.model,d=s.row,c=a.get("xmlState"),u=e.platform,p=u.builder,m=u.getEntityFieldNames("page"),b=e.components.config.skuid__pageBuilder.themes,y=Po.map(b||{},e=>e).filter(e=>{return!e.composerTheme&&e.type==="Ink"&&e.active!==false}).map(({label:e,name:t})=>{return{label:e,value:t}}).sort((e,t)=>e.label.localeCompare(t.label)),C=[{label:"Default",value:""}],_,w=p.getProtectedModules(),x=p.getPageModule(l,d),k=p.getModuleEntries(l),S=false,I,T,A,P;Po.each(y,function(e,t){C.push({label:t.label,value:t.value})});Po.each(k,function(){let e=this.value;if(e===undefined)return true;if(e===x&&x!==""){S=true}if(Po.inArray(e,w)!==-1||Po.inArray(e.toLowerCase(),w)!==-1){this.disabled=true}});if(S===false&&x!==""){k.push({value:x,label:x,disabled:false,defaultValue:false})}I=l.getFieldValue(d,m.master_page_id,true);T=[{type:"string",label:"Page Name",id:"pagename",isStateless:true,mode:"edit",valueFunction(){return l.getFieldValue(d,m.name,true)},onChange(e){let t={};t[m.name]=e;l.updateRow(d,t)}},{type:"picklist",label:"Module",id:"module",isStateless:true,required:false,platform:[f,h],disabled:x&&(Po.inArray(x,w)!==-1||Po.inArray(x.toLowerCase(),w)!==-1),mode:"edit",options:k,valueFunction(){return l.getFieldValue(d,m.module)},onChange(e){let t={};t[m.module]=e;if(e!==x){l.updateRow(d,t)}}},{type:"readonly",label:"API Version",isStateless:true,id:"apiversion",readonly:true,mode:"readonly",valueFunction(){return l.getFieldValue(d,m.api_version,true)}},{id:"title",type:"string",label:"Page Title",helptext:"Content of the browser's title bar or tab label",mode:"edit",valueFunction(){return i.getPageXML().attr("title")},onChange(e,t){if(e!==t){if(e!=="")i.getPageXML().attr("title",e);else i.getPageXML().removeAttr("title");a.save()}}},{type:"integer",label:"Max Auto-Saves",id:"maxautosaves",isStateless:true,helptext:l.getField(m.max_auto_saves).inlineHelpText,valueFunction(){return l.getFieldValue(d,m.max_auto_saves)},validator:i.validators.numericOnly,onChange(e,t){let i={};i[m.max_auto_saves]=e;if(e!==t){l.updateRow(d,i)}}},{id:"tabtooverride",type:"string",label:"Tab to Override",platform:[f,h],helptext:"Either the SObject Name (e.g. 'Account', 'skuid__Page__c') of the custom object tab, or the label (e.g. 'Schools' or 'My Timesheets') of the Web/Visualforce tab, that you will be using this page as an override for.",mode:"edit",valueFunction(){return i.getPageXML().attr("tabtooverride")},onChange(e,t){if(e!==t){if(e!=="")i.getPageXML().attr("tabtooverride",e);else i.getPageXML().removeAttr("tabtooverride");a.save()}}},{type:"picklist",label:"Design System",picklistEntries:C,helptext:i.masterPage?'To modify this value, change the "Design System" property on the master page.':"The name of the Design System to use.",mode:"edit",id:"theme",isStateless:true,readonly:!!i.masterPage,valueFunction(){return i.masterPageXML?i.masterPageXML.attr("theme"):i.getPageXML().attr("theme")},onChange(e,t){if(e!==t){if(e!=="")i.getPageXML().attr("theme",e);else i.getPageXML().removeAttr("theme");a.save()}}},{id:"unsavedchangeswarning",type:"picklist",label:"Warn users if page has unsaved changes",picklistEntries:[{label:"No",value:""},{label:"Yes",value:"yes"}],defaultValue:"",helptext:"If a user tries to leave or close this page, and one or more of its Models has unsaved changes, a warning message will be shown before they can leave."},{id:"personalizationmode",type:"picklist",label:"Personalization Mode",picklistEntries:[{label:"Client-Side",value:"client"},{label:"Server-Side",value:"server"}],defaultValue:"server",helptext:"Choose where to store user personalizations, "+'such as remembered table filters. "Client-Side" uses '+'browser session storage and cookies. "Server-Side" uses SObjects.'},{id:"globalfeedbackenabled",type:"boolean",label:"Enable Feedback on this page",platform:[f,h],defaultValue:true,helptext:"By default, Feedback is enabled on all pages. However, you can disable it on a per-page basis."}];if(!I){T.push({type:"boolean",label:"Available as a Master Page",id:"availableasmaster",readonly:d!==undefined&&d.skuid__Pages__r!==undefined&&d.skuid__Pages__r.totalSize>0,valueFunction(){return l.getFieldValue(d,m.is_master_page)},isStateless:true,onChange(e){if(e!==l.getFieldValue(d,m.is_master_page)){let t=true,n=i.pageXML.find("pageregion");if(e===false&&n.length){t=window.confirm("Page Regions are only allowed on Master Pages. Remove all Page Regions from this page?")}let o={};o[m.is_master_page]=e;if(t){l.updateRow(d,o);if(e===true)Po("#components").find('div[data-ctype="skuid__pageRegion"]').show();else{Po("#components").find('div[data-ctype="skuid__pageRegion"]').hide();n.remove();a.element.find(".nx-pagebuilder-region").remove();a.save()}}else{a.rebuildProps()}}}})}else{T.push({id:"masterpage",type:"custom",label:"Master Page",renderProperty(e){let t=l.getFieldValue(d,m.master_page+"."+m.name),i=l.getFieldValue(d,m.master_page+"."+m.module);e.element.addClass("nx-fieldtext nx-pagebuilder-readonly-text").html('<a href="'+u.getPageComposeUrlById(I)+'">'+t+(i?" ("+i+")":"")+"</a>")}})}function E(t,n){let o=c.children("pageregioncontents"),s,l,d,u,p;if(!o.length){o=r("<pageregioncontents/>").appendTo(c)}s=o.children('pageregioncontent[uniqueid="__'+n+'"]');if(t===true){if(!s.length){s=r('<pageregioncontent uniqueid="__'+n+'"/>')}p=s.children("components").first();if(!p.length){p=r("<components/>")}p.appendTo(s);s.appendTo(o);d=e.builder.getBuilder("skuid__layoutRegion");l=d.getDefaultState({isFooter:n==="footer"});p.append(l)}else{if(l&&l.length){u=i.getCanvasComponentFromState(l);u&&u.remove()}if(s&&s.length){s.remove()}if(o.children().length===0){o.remove()}}a.save().refresh();e.events.publish("builder.colorcheck")}function M(t={}){let n="pageregioncontent",o="uniqueid",a=t.pageComponent,s={id:n,labelFunction(e){return e.attr(o)},mode:t.mode||"edit",parentState:t.state,defaultStateFunction(){return r("<"+n+"/>").attr(o,"NewPageRegionContent").append(r("<components/>"))},propsFunction(t){let n,o=t.get("xmlState"),s;s=[i.coreProps.uniqueIdProp({component:t,onChange(){t.refresh()}})];if(!t.contentBuilderPopup){n=e.builder.desktop.makePopupBuilder({title:"Configure Page Region Content",width:"90%",customProps:[],linkedComponent:a});t.contentBuilderPopup=i.componentFactory(o,n,true)}s.push({type:"customaction",label:"Configure Contents",icon:"sk-webicon-ink:open",customAction(){t.contentBuilderPopup.select()}});return s},filterFunction(e){let t=!!i.masterPage,n=!!e.attr("regionid")||e.attr("defaultcontent")==="true",o=/^__(header|footer)/.test(e.attr("uniqueid")),a=t&&n||o;return!a}};return s}function D(){let e=i.getPageXML(),t="pageregioncontents",n=e.children(t),o=a;return{label:"Region Contents",helptext:"Used internally by Skuid to build some of our more advanced pages. This feature is not supported for customer development.",state:n,deleteable:false,childrenFunction(e){let n=[],a=i.getMasterPageXML(),s;if(a){s=a.children(t);n.push(M({mode:"readonly",state:s,component:e,pageComponent:o}))}n.push(M({component:e,pageComponent:o}));return n}}}A=[{name:"Basic",props:T},{name:"Layout",props:[{id:"showheader",type:"boolean",label:"Show Salesforce Header",platform:[f,h],defaultValue:true,helptext:"Show the standard Salesforce page header."},{id:"showsidebar",type:"boolean",label:"Show Salesforce Sidebar",platform:[f,h],defaultValue:true,helptext:"Show the standard Salesforce sidebar."},{type:"boolean",label:"Show Custom Header",id:"showCustomHeader",isStateless:true,valueFunction(){return c.children("pageregioncontents").children('pageregioncontent[uniqueid="__header"]').length},onChange(e){E(e,"header")}},{type:"boolean",label:"Show Custom Footer",id:"showCustomFooter",isStateless:true,valueFunction(){return c.children("pageregioncontents").children('pageregioncontent[uniqueid="__footer"]').length},onChange(e){E(e,"footer")}}]},i.getInteractionsCategory({linkedComponent:a}),e.builder.ink.getInkStylesTab({component:a,propViewer:n,background:true,styleVariants:true})];if(e.utils.inPlatform([e.constants.VISUALFORCE,e.constants.LIGHTNING])){A.push({name:"Labels",tree:{id:"labels",label:"Labels",deleteable:false,state:i.getPageXML().children("resources").children("labels"),icon:"sk-bi-labels",linkedComponent:a,childrenFunction(){function e(e){e=e||{};return{id:"label",addtooltip:"Add Label",mode:e.mode||"edit",deletetooltip:"Remove Label",parentState:e.state,indent:0,icon(){return"sk-bi-labels"},labelFunction(e){return e.attr("id")},defaultStateFunction(){return i.defaultStateGenerators.label("NewLabel")},propsFunction(e){return[{id:"id",label:"Label Id",type:"string",onChange(){e.refresh()}}]}}}let t=[],n=i.getMasterPageXML(),o;if(n){o=n.children("resources").children("labels");t.push(e({mode:"readonly",state:o}))}t.push(e());return t}}})}if(e.platform.hasFeature("Voice")&&e.voiceCommands.voiceIsConfigurableForOrg()){A.push(i.voiceCommands.getVoiceCategory({linkedComponent:a}))}if(e.platform.hasFeature("Native")){A.push(i.native.getNativeCategory())}if(v())A.splice(-1,0,{name:"Region Contents",tree:D()});n.applyPropsWithCategories(A,a.get("xmlState"));_=n.propGroups.children('.nx-pagebuilder-toolbarpanel-propgroup[data-name="Basic"]');if(_){P=function t(){let i=n.body.find(".nx-pagebuilder-propcolumn:first");function a(t){if(t.platform&&!o.inPlatform(t.platform)){return}let i=Po(g).addClass("nx-basicfieldeditor-item nx-pagebuilder-property-item"+(t.fsBlock?" fs-block":"")),n,a,s,r,c,u,p,f,h;if(t.uniqueid){i.attr("id",t.uniqueid)}t.column.append(i);n=Po(g).addClass("nx-basicfieldeditor-item-label").text(t.label||t.field.label);a=t.helptext||t.field.inlineHelpText;if(a){s=Po(g).addClass("sk-icon sk-icon-help inline").css({"vertical-align":"top","margin-left":"4px"});s.skootip(a);n.append(s)}i.append(n);p=Po(g).addClass("nx-field");i.append(p);c={fieldId:t.field.id,mode:t.mode||"edit"};if(t.filters!==undefined){c.filters=t.filters}h=e.component.createFromDefinition(Object.assign({componentType:"skuid__field",model:l,mode:t.mode||"edit",row:d},c,{field:l.getField(t.field.id),id:t.field.id,show:false}));r={id:t.field.id,name:t.field.id,_GUID:o.generateUniqueId(),model:l,row:d,options:c,metadata:l.getField(t.field.id),mode:t.mode||"edit",getReferenceOptions:h._getCPI().getReferenceOptions};if(r.metadata)u=r.metadata.displaytype;f=r.name||r.id?l.getFieldValue(d,r.name||r.id,true):null;r.element=Po("<div>").addClass("nx-field").attr("data-uid",r._GUID);e.ui.fieldRenderers[u][r.mode](r,f,t);if(t.defaultValue!==undefined&&!l.getFieldValue(d,t.field.id)){r.element.find("input").val(t.defaultValue)}p.append(r.element)}a({column:i,field:l.getField("OwnerId"),fsBlock:true,label:"Owner",platform:[f,h],uniqueid:"skuid__page-owner"})};_.on("click",P);P()}},defaultStateGenerator(){const e=o.inPlatform(kt["b"].NATIVE);return r("<skuid__page ".concat(e?"":'showsidebar="true" showheader="true" ','unsavedchangeswarning="yes" personalizationmode="server">\n\t<models/>\n\t<components/>\n\t<resources>\n\t\t<actionsequences/>\n\t\t<javascript/>\n\t\t<labels/>\n\t</resources>\n\t</skuid__page>'))}});kt["a"].register("skuid__pageBuilder",{schema:{},cpi:{afterCreate(e){Po(e).append(this.get("innerElement"))},reRender(){const e=t.pagebuilderui;e.pagecomponent&&e.pagecomponent.unregister();e.pagecomponent=i.componentFactory(i.masterPageXML||e.pageXML,y);e.layoutcontainer.empty().append(e.pagecomponent.element)}},renderVDom(e){const t=e._getCPI();return Ao({key:e.getId(),afterCreate:t.afterCreate})},init(l){const f=Po("<div>");if(b===true){return}else{b=true}l.set("innerElement",f,{renderOnChange:false});let h=f,v,_,w=function e(){return o.getXML(h.pageXML[0])},x=i.getLayoutFields(),k=u.getEntityFieldNames("page");t.pagebuilderui=h;h.cproperties=new n.PropertiesViewer;c("pagepreview",function(){d("skuid.builder.page.preview")({xml:h.pageXML,row:h.row,editor:h.editor,model:h.model})});c("restoreFromSavedVersion",function(t){const i=t.row,n=e.$M("pageBuilder_SelectedVersion"),a=e.platform.getEntityFieldNames("page");let s,r;Po.blockUI({message:"Restoring saved page revision..."});n.setCondition(n.getConditionByName("selectedversionid"),i[a["id"]],false);return n.updateData().then(()=>{let t=n.getFirstRow(),i=a["api_version"],d=h.row[i],c=t[e.platform.getEntityFieldName("page_version","api_version")];r=n.getFieldValues(t,x,true).join(""),s=d!==c;if(s){h.model.updateRow(h.row,i,c)}l.set("xmlFromRevision",true);v({layoutText:r}).then(()=>C(h.pageXML.attr("theme")));h.save();if(s){return h.model.save()}else{return o.delay(200)}}).then(()=>{let t={message:"Restore complete!"};if(s){t.message+=" Reloading Page Composer..."}else{t.timeout=500}e.actions.runAction("closeAllPopups");Po.blockUI(t);if(s){window.location.reload()}}).catch(e=>{Po.blockUI({message:"There was an error while trying to restore the selected page revision:\n\n"+e,timeout:4e3})})});c("addSavedPageVersion",function(t){let n=e.$M("versions"),o,a=t.component,s=e.platform.getEntityFieldName("page","api_version");Po.each(x,function(e,t){if(!n.getField(t)){let e=Po.extend({},h.model.getField(t));n.fields.push(e);n.fieldsMap[t]=e}});o=n.createRow({initiatorId:a&&a.id(),editModeForNewItems:true,additionalConditions:[{field:s,value:h.row[s]}]});i.save(h.pageXML[0],n,o)});h.addClass("nx-editor ui-widget");l.set("toolbarWrapper",Po(g).addClass("nx-pagebuilder-toolbar-wrapper"));h.toolbar=Po(g).addClass("nx-pagebuilder-toolbar").appendTo(l.get("toolbarWrapper"));let S=Po(g).addClass("nx-pagebuilder-drawer-handle"),I=Po('<span class="nx-pagebuilder-drawer-handle-arrow-container up" id="collapse-btn">').append(e.ui.createIcon("sk-webicon-ink:chevron-up")),T=Po('<span class="nx-pagebuilder-drawer-handle-arrow-container down" id="expand-btn">').append(e.ui.createIcon("sk-webicon-ink:chevron-down")),A,P=()=>Po("#toolbar-and-buttons").height();function M(e){let t=Po(e.currentTarget);if(h.collapsed){F()}else if(h.expanded){N()}else if(t.hasClass("up")){F()}else{N()}}function D(){I[h.collapsed?"hide":"show"]();T[h.expanded?"hide":"show"]()}function N(){let t;h.expanded=h.expanded||false;if(h.collapsed){F()}if(h.expanded){Po(".nx-pagebuilder-toolbar, .nx-pagebuilder-toolbarpanel, #toolbarPanelWrapper, #toolbarPanelWrapper .nx-pagebuilder-toolbarpanel-body, #rightPanelWrapper .nx-pagebuilder-toolbarpanel-body").height("");e.events.unsubscribe(A)}else{t=function e(){const t=56;let i=(window.innerHeight-t)*.87;Po(".nx-pagebuilder-toolbar, #toolbarPanelWrapper").height(i+"px");Po(".nx-pagebuilder-toolbarpanel").height(i-2+"px");Po("#toolbarPanelWrapper .nx-pagebuilder-toolbarpanel-body").height(i-66+"px");Po("#rightPanelWrapper .nx-pagebuilder-toolbarpanel-body").height(i-33+"px")},t();A=e.events.subscribe("ui.reflow",t)}if(V){h.layoutcontainer.css("margin-top",P())}h.expanded=!h.expanded;D()}function F(){h.collapsed=h.collapsed||false;if(h.expanded){N()}h.toolbar.toggle();h.layoutcontainer.toggleClass("nx-pagebuilder-layout-collapsed-composer");if(V){h.layoutcontainer.css("margin-top",P())}h.collapsed=!h.collapsed;D()}I.on("click",M);T.on("click",M);e.snippet.register("skuid.pagebuilder.toggleexpand",N);l.get("toolbarWrapper").append(S.append(I,T));h.cselector=new n.ComponentsViewer;let O=Po('<div id="rightPanelWrapper">').append(h.cproperties.element);h.model=i.pageModel=e.$M("page");h.row=i.pageRow=h.model.getFirstRow();const R=new Io(h.cselector);h.toolbar.append(R.element,O);e.component.getByType("pagebuilder__toolbar")[0]._getCPI().setToolbarWrapper(l.get("toolbarWrapper")[0]);h.layoutcontainer=Po(g).addClass("nx-pagebuilder-workspace").hide();let L=false,B=false,j=()=>L&&B&&h.layoutcontainer.show();e.events.subscribeOnce("skuid.builder.themeChanged",()=>{j()});e.events.subscribeOnce("skuid.pageBuilder.complete",()=>{B=true;j()});e.events.subscribe("skuid.builder.themeChanged",()=>{e.component.clearSpoofedComponentsCache();l._cpi.reRender()});let U=Po(window),V=false,H,q=e.$C("header-layout-region");if(!q){o.log("Header layout region does not have appropriate uniqueId");q=e.component.getByType("skuid__layoutRegion")[0]}q&&q.set("sticky",false);U.scroll(function(){const e=Po("#toolbar-and-buttons");let t=window.pageYOffset||document.documentElement.scrollTop,i=P();if(H===undefined)H=e.offset().top;if(t>H){if(!V){e.addClass("nx-pagebuilder-toolbar-wrapper-fixed");h.layoutcontainer.css("margin-top",i);V=true}}else{if(V){e.removeClass("nx-pagebuilder-toolbar-wrapper-fixed");h.layoutcontainer.css("margin-top","");V=false}}});h.model.subscribe("cancelled",()=>{l.set("xmlFromRevision",false);v().then(()=>C(h.pageXML.attr("theme")));h.cproperties.clear();e.events.publish("ui.reflow");if(h.smallNavLinks)h.smallNavLinks.removeClass("disabled")});h.model.subscribe("saved",t=>{l.set("xmlFromRevision",false);if(h.smallNavLinks)h.smallNavLinks.removeClass("disabled");let i=e.model.getModel("versions");if(i){i.cancel();i.updateData()}if(t.messages){e.component.getByType("skuid__page")[0].addProblems(t.messages)}});h.model.subscribe("row.updated",()=>{if(h.smallNavLinks)h.smallNavLinks.addClass("disabled")});h.save=function(){i.save(h.pageXML[0],h.model,h.row);_=w()};e.events.subscribe(m,function(){if(w()!==_){h.save()}});i.masterPage=h.model.getFieldValue(h.row,k.master_page,true);if(i.masterPage){let e=Po.map(x,function(e){return k.master_page+"."+e});i.masterPageXML=r(h.model.getFieldValues(h.row,e,true).join(""))}v=function t(n={}){n=Object.assign({layoutText:h.model.getFieldValues(h.row,x,true).join("")},n);let s,d,c=false,u={},f=n.layoutText,m;if(f.length){m=r(f)}else{c=true;m=y.getDefaultState()}if(!L){return C(m.attr("theme")).then(()=>{L=true;v(n)})}i.pageXML=h.pageXML=m;_=w();if(l.get("themeAttrObserver"))l.get("themeAttrObserver").disconnect();const g=new MutationObserver(()=>C(m.attr("theme")));g.observe(m[0],{attributes:true,attributeFilter:["theme"]});l.set("themeAttrObserver",g);X();s=h.pageXML.children("models");d=i.masterPageXML&&i.masterPageXML.children("models");let b={};let k=[];const S={};const I=[];s&&Po.merge(I,s.children());d&&Po.merge(I,d.children());Po.each(I,function(){let e=Po(this),t=Po(e).attr("id"),n=e.children("fields, groupby").children(),o=i.getDataSourceFromModel(e),a=o.getDataSourceType(),s=o.name,r=a.name,l,d,c,f=e.attr("sobject");if(!s&&r!==p){k.push(e.attr("id"));return true}if(!s&&r===p){s=p}if(a&&o){c=b[s];if(!c)c=b[s]={};d=o.buildEntityMetadataRequest({model:e});d.modelId=e.attr("id");l=a.getEntityMetadataCacheKey(d);if(!c[l]){c[l]=d}}if(n.length){const e={},i=[];n.each(function(){const t=Po(this).attr("id");const n=Po(this).attr("name");const o=n||t;const a=e[o];if(!a)e[o]=1;else{i.push(o)}});if(i.length){u[t]=i}if(f){S[s]=S[s]||{};const e=S[s];e[f]=e[f]||{};const t=e[f];n.each(function(){const e=Po(this).attr("id");const i=Po(this).attr("name");const n=e||i;t[n]={}})}}});if(!Po.isEmptyObject(u)){for(let t in u){e.component.getByType("skuid__page")[0].addProblem(""+'A Model "'+t+'" on this page contains duplicate fields: '+u[t].join(", "))}}Po.blockUI({message:"Loading Model metadata..."});if(k.length>0){let t="The following Models do not have a Data Source selected: "+k.join(", ");e.component.getByType("skuid__page")[0].addProblem(t)}function T(t,i,n){const s=a.getDataSource(i);const r=Po.map(t,function(e){return e});return s.getEntityMetadata({entities:r,ignoreMetadataOverrides:true}).then(e=>{if(!e||!n)return e;if(!Po.isArray(e)){e=[e]}const t={};const a={};let r=false;Po.each(e,(e,i)=>{const l=i.getObjectName();const d=n[l];if(!l||!d){return}const c=o.keyBy(i.getFieldsList(),"rel");const u=Object.keys(d);const f={};const h=u.map(e=>{return o.getUnescapedParts(e)});Po.each(u,e=>{f[h[e][0]]=true});Po.each(f,e=>{const i=c[e];const n=i&&i.referenceTo&&i.referenceTo.length;const o=n&&i.referenceTo.length>1;if(!n){return}const l=o&&s.getDataSourceType().name===p?"Name":i.referenceTo[0].objectName;r=true;a[l]=true;t[l]=t[l]||{};Po.each(h,(i,n)=>{if(n[0]===e){const e=n.slice(1);if(e.length){t[l][e.join(".")]=true}}})})});if(r){return T(Po.map(a,(e,t)=>{return{objectName:t,dataSource:s}}),i,t)}return e}).catch(function(t){let n="Error retrieving metadata for Model(s) associated "+"with Data Source '"+i+"'. Please check Models' properties to ensure they are set correctly.";if(t){let e="";if(t instanceof Array){Po.each(t,function(t,i){e+=i+"\n"})}else if(typeof t==="object"){e=JSON.stringify(t,undefined,3)}else e+=t;if(e){n+="\n"+e}}e.component.getByType("skuid__page")[0].addProblem(n)})}function A(){return(L?o.resolve():e.events.subscribeOnce("skuid.builder.themeChanged")).then(()=>{Po.unblockUI();l._cpi.reRender();let t=h.pageXML.children("resources"),i=t.children("actionsequences"),n=t.children("javascript");if(!i.length){i=r("<actionsequences/>").appendTo(t)}if(!n.length){n=r("<javascript/>").appendTo(t)}h.pagecomponent.select();if(c){h.save()}R.updateContents(h.pageXML);e.events.publish("skuid.pageBuilder.complete")})}return Promise.all(Po.map(b,(e,t)=>{return T(e,t,S[t]||{})})).then(A,A)};v({});if(h.row[k["id"]]){h.smallNavLinks=Po(g).addClass("nx-pagebuilder-smallnavlinks").append(Po("<a>").addClass("nx-pagebuilder-viewxmllink").prop("href",u.getBaseXmlEditorUrl(h.row)).text("View/Edit XML"))}h.append(h.layoutcontainer,h.smallNavLinks);let z="s",W=Po(document),G=false;if(!e.page.disableHotkeys){W.on("keydown.skuidbuilder",null,{keys:z,filterTextInputs:true},function(e){if(Po(e.target).attr("contenteditable")!=="true"){G=true}});W.on("keydown.skuidbuilder",function(e){if(G){switch(e.key){case"e":if(h.collapsed){F()}else if(!h.expanded){N()}break;case"c":if(h.expanded){N()}else if(!h.collapsed){F()}break}}});let a=false,l=e=>{return Po.hotkeys.textAcceptingInputTypes.concat("textarea").includes(e.type)||e.getAttribute&&e.getAttribute("contenteditable")==="true"||Po(e).parents(".nx-pagebuilder-workspace").length===0},d=function t(){return e.$M("page").getRowId(e.$M("page").getRows()[0])},c=function n(r,c){if(s(e,"tour.tourController.Shepherd.activeTour.options.copyPasteEnabled")===false){return}let u=t.componentRegistry.getSelectedComponent();const p=u.get("builder"),f=p&&p.isInToolbar;if(l(document.activeElement))return;let h=o.getXML(u.get("xmlState")[0]).match(/<[a-zA-Z\_]+/);h=h[0]?h[0].substr(1):"";let m=h&&e.builder.getBuilder(h)&&e.builder.getBuilder(h).copyable!==false,g=h==="skuid__page"&&a,b=u.mode=="readonly";if((!m||f||b)&&!g){alert("You cannot "+(c?"cut":"copy")+" this item.");return}let v=r.clipboardData||window.clipboardData;if(!a){v.setData("text/plain",btoa(JSON.stringify({pageId:d(),xml:o.getXML(u.get("xmlState")[0])})))}else{v.setData("text/plain",i.formatXML(o.getXML(u.get("xmlState")[0])))}r.preventDefault();if(c){u.getCPI().remove()}else{const t=e.themeSettings.getThemeSettings().getToken("utility","focusColor");u.getCPI().blinkOutline(t,1)}};document.addEventListener("copy",c);document.addEventListener("cut",function(e){c(e,true)});document.addEventListener("paste",function(e){if(l(document.activeElement))return;document.activeElement&&document.activeElement.blur();e.stopPropagation();e.preventDefault();let t=e.clipboardData||window.clipboardData,i,o;try{i=JSON.parse(atob(t.getData("text/plain"))),o=i.xml}catch(e){return}if(i.pageId!==d()){alert("You cannot copy and paste between pages");return}n.insertComponentAfterSelected(r(o),{nest:false,cleanIds:true}).then(e=>E["a"](e,"paste"))});W.on("keydown.skuidbuilder",function(i){if(l(document.activeElement))return;let s=t.componentRegistry.getSelectedComponent();if(i.keyCode===67&&i.shiftKey&&(i.metaKey||i.ctrlKey)){i.preventDefault();try{a=true;document.execCommand("copy");a=false}catch(e){console.error(e)}}if(i.keyCode===68&&(i.metaKey||i.ctrlKey)){i.preventDefault();if(s){const t=s.get("builder");const i=t&&t.isInToolbar;let l=o.getXML(s.get("xmlState")[0]).match(/<[a-zA-Z\_]+/);l=l[0]?l[0].substr(1):"";let d=l&&e.builder.getBuilder(l)&&e.builder.getBuilder(l).copyable!==false,c=l==="skuid__page"&&a,u=s.mode=="readonly";if((!d||i||u)&&!c){alert("Cannot duplicate this item.");return}n.insertComponentAfterSelected(r(o.getXML(s.get("xmlState")[0])),{cleanIds:true,nest:false}).then(e=>E["a"](e,"clone"))}}});W.on("keyup.skuidbuilder",function(e){if(e.key==="s"){G=false}})}const Y=t.pagebuilderui.cproperties;function X(){const n=e.$M("undo_redo_controller"),o=n.getFirstRow(),a=i.pageXML[0];let r=l.get("undoManager");let d=-1;const c=()=>{n.updateRow(o,{enable_undo:!r.undoStack.atOldestChange(),enable_redo:!r.undoStack.atNewestChange(),enable_save_cancel:l.get("xmlFromRevision")||d!==r.undoStack.index})};if(r){r.connectNewXml(a);r.undoStack.invalidateAll();c();return}h.model.subscribe("cancelled",()=>{r.undoStack.invalidateAll();d=-1;c();E["f"]()});h.model.subscribe("saved",()=>{d=r.undoStack.index;c();E["h"]()});const u=e=>{if(Array.isArray(e)&&e.length){const i=[];e.forEach(e=>{let n;const o=Po(e.target).closest("[uniqueid], [uniqueId]");if(o.length){n=t.componentRegistry.getById(o.attr("uniqueid")||o.attr("uniqueId"))}if(!n){n=t.componentRegistry.getByState(e.target)}if(!n)console.warn("Couldn't update the canvas for undo/redo properly",e.target);if(!n||i.includes(n))return;i.push(n);n.getCPI().refresh()});Y.showCorrectPropertyTabOrTree(e[e.length-1].propConfig)}h.save();c()};r=new Ot["a"](a,{afterUndo:e=>u(e,false),afterRedo:e=>u(e,true),mutationRecordsModifier:e=>{const t=Object.assign({focusedProperty:Y.getFocusedProperty()},Y.propConfig);return e.map(e=>{e.propConfig=t;return e})},afterStackUpdate:c,afterBatchUpdate:()=>{n.updateRow(o,{enable_save_cancel:true})}});l.set("undoManager",r);e.snippet.register("__skuid.pagebuilder.undoManager.disconnect",()=>{r._disconnect();p._disconnect()});e.snippet.register("__skuid.pagebuilder.undoManager.connect",()=>{r._connect();p._connect()});e.snippet.register("skuid.pagebuilder.undo",()=>{if(s(e,"tour.tourController.Shepherd.activeTour.options.copyPasteEnabled")===false){return}r.undo()});e.snippet.register("skuid.pagebuilder.redo",()=>{if(s(e,"tour.tourController.Shepherd.activeTour.options.copyPasteEnabled")===false){return}r.redo()});e.events.subscribe("builder.codeEditorOpened",()=>{r.startBatching()});e.events.subscribe("builder.codeEditorClosed",()=>{r.stopBatching()});const p=new Rt["a"](h.model,{fieldsToIgnore:["content","skuid__Layout__c","skuid__Last_Modified_Date_Check__c"],afterStackUpdate:()=>{const e=Object.assign({focusedProperty:Y.getFocusedProperty()},Y.propConfig);r.customActionPerformed(t=>{if(t){p.redo()}else{p.undo()}Y.showCorrectPropertyTabOrTree(e)})}})}}});function C(n="Ink",o=false){n=i.masterPageXML&&!o?i.masterPageXML.attr("theme")||"Ink":n;return t.core.getThemeResources(n).then(function(t={}){if(!t["skuid_theme.json"]){const t='Error retrieving "'.concat(n,'" design system.');e.page.displayProblem({message:t});if(n==="Ink")throw new Error(t);else return C("Ink",true)}Po("link#stylesheet-icons").remove();let o=t["resources.json"],a=t["skuid_theme.json"],s=a.id,r=Object.assign({},a.themeSettings,{palette:Ft()({},a.themeSettings.palette,o.themeSettings.palette)}),l,d=[];if(o){l=o.fontConfig;e.component.getByType("skuid__pageBuilder")[0].set("iconMappings",t.iconMappings||{})}if(l){Po.each(l,function(e,t){if(t.families){Po.each(t.families,function(e,t){d.push(t.split(":")[0])})}});e.webfonts.load({fontConfig:l})}i.fonts.web=d;i.setActiveThemeSettings(s,r)})}})(kt["c"]);kt["c"].componentType.register("pagebuilder__toolbar",{schema:{},getStyles(){},init(){},getStyleSettings(){},renderVDom(e){return kt["c"].virtualDom.hyperScript("div",{afterCreate:e._getCPI().afterCreate})},cpi:{afterCreate(e){if(this.get("toolbarElement")){e.appendChild(this.get("toolbarElement"))}this.set("element",e,{renderOnChange:false})},setToolbarWrapper(e){this.set("toolbarElement",e,{renderOnChange:false});if(this.get("element")){this.get("element").appendChild(e)}}}});var Eo=n(611);var Mo=n(612);var Do=n(613);var No=n(1);var Fo=n.n(No);var Oo=n(614);var Ro=n(615);var Lo=n(280);var Bo=n(290);var jo=n(291);var Uo=n(617);var Vo=n(620);var Ho=n(621);var qo=n(281);var zo=n(279);var Wo=n(129);var Go=n(622);var Yo=n(299);var Xo=n(623);var Ko=n(624);var $o=n(625);var Qo=n(626);var Jo=n(627);var Zo=n(628);var ea=n(629);var ta=n(630);var ia=n(631);var na=n(632);var oa=n(633);var aa=n(634);var sa=n(635);var ra=n(636);var la=n(637);var da=n(638);var ca=n(639);var ua=n(301);var pa=n(640);var fa=n(302);var ha=n(641);var ma=n(642);Fo.a.widget("ui.dialog",Fo.a.ui.dialog,{_allowInteraction:function(){return true}});(function(e){e.widget("custom.combobox",{options:{parentElem:e("<div>"),source:function(t,i){var n=new RegExp(e.ui.autocomplete.escapeRegex(t.term),"i");i(this.element.children("option").map(function(){var i=e(this).text();if(this.value&&(!t.term||n.test(i)))return{label:i,value:i,option:this}}))},delay:0,searchicon:e("<div>"),menuClass:"ui-combobox"},_create:function(){this.wrapper=this.options.parentElem.addClass("custom-combobox").insertAfter(this.options.parentElem);this.element.hide();this._createAutocomplete();this._createShowAllButton()},_createAutocomplete:function(){var t=this,i=t.element.children(":selected"),n=t.options.value||i.val()&&i.text()||"",o=e('<div class="ui-combobox-container"></div>'),a={delay:t.options.delay,minLength:0,source:t.options.source,select:t.options.onChange,focus:function(i,n){if(t.options.showLabelInTextInput){var o=typeof n.item==="object"?n.item.label:null;if(o)e(this).val(o);return false}}},s;t.options.appendDropdown?e.extend(a,{appendTo:o}):"";t.input=e("<input>").appendTo(t.wrapper).autocomplete(a).val(n);t.input.appendTo(t.wrapper);t.input.focus(function(e){t.options.onFocus&&t.options.onFocus(e)});t.input.blur(function(e){t.options.onBlur&&t.options.onBlur(e)});if(t.options.appendDropdown){o.insertAfter(t.wrapper.children().last());s=o.find("ul.ui-autocomplete")}else s=e("body").find("ul.ui-autocomplete");s.addClass(t.options.menuClass).removeClass("ui-front");if(t.options.parentElem){t.options.parentElem.append(t.options.searchicon);if(t.options.parentElem.is(t.input)){t.input.css("padding-right","22px")}}},_createShowAllButton:function(){var t=this,i=t.input,n=false;e("<a>").attr("tabIndex",-1).tooltip().appendTo(t.wrapper).button({icons:{primary:"fa fa-chevron-down"},text:false}).removeClass("ui-corner-all ui-button ui-widget ui-state-default ui-button-icon-only").addClass("nx-combobox-renderer-button").on("mousedown",function(){n=i.autocomplete("widget").is(":visible")}).on("click",function(){i.trigger("focus");if(n){return}i.autocomplete("search","")})}})})(Fo.a);(function(e){e.fn.setCursorPosition=function(e){this.each(function(t,i){if(i.setSelectionRange){i.setSelectionRange(e,e)}else if(i.createTextRange){var n=i.createTextRange();n.collapse(true);n.moveEnd("character",e);n.moveStart("character",e);n.select()}});return this};e.fn.getCursorPosition=function(){var t=e(this).get(0),i=0;if("selectionStart"in t){i=t.selectionStart}else if("selection"in document){t.focus();var n=document.selection.createRange(),o=document.selection.createRange().text.length;n.moveStart("character",-t.value.length);i=n.text.length-o}return i}})(Fo.a);(function(e){function t(t){this.$textarea=e(t);this._init()}t.prototype={_init:function(){var t=this;this.$textarea.wrap('<div class="flex-text-wrap" />').before("<pre><span /><br /></pre>");this.$span=this.$textarea.prev().find("span");this.$textarea.on("input propertychange keyup change",function(){t._mirror()});e.valHooks.textarea={get:function(e){return e.value.replace(/\r?\n/g,"\r\n")}};this._mirror()},_mirror:function(){this.$span.text(this.$textarea.val())}};e.fn.flexText=function(){return this.each(function(){if(!e.data(this,"flexText")){e.data(this,"flexText",new t(this))}})}})(Fo.a);(function(e,t){var i=0;e.widget("ech.multiselect",{options:{header:true,height:175,minWidth:225,classes:"",checkAllText:"Check all",uncheckAllText:"Uncheck all",noneSelectedText:"Select options",selectedText:"# selected",selectedList:0,show:null,hide:null,autoOpen:false,multiple:true,position:{}},_create:function(){var t=this.element.hide(),i=this.options;this.speed=e.fx.speeds._default;this._isOpen=false;var n=(this.button=e('<div type="button"><span class="ui-icon ui-icon-triangle-2-n-s"></span></div>')).addClass("ui-multiselect ui-widget ui-state-default ui-corner-all").addClass(i.classes).attr({title:t.attr("title"),"aria-haspopup":true,tabIndex:t.attr("tabIndex")}).insertAfter(t),o=(this.buttonlabel=e("<span />")).html(i.noneSelectedText).appendTo(n),a=(this.menu=e("<div />")).addClass("ui-multiselect-menu ui-widget ui-widget-content ui-corner-all").addClass(i.classes).appendTo(document.body),s=(this.header=e("<div />")).addClass("ui-widget-header ui-corner-all ui-multiselect-header ui-helper-clearfix").appendTo(a),r=(this.headerLinkContainer=e("<ul />")).addClass("ui-helper-reset").html(function(){if(i.header===true){return'<li><a class="ui-multiselect-all" href="#"><span class="ui-icon ui-icon-check"></span><span>'+i.checkAllText+'</span></a></li><li><a class="ui-multiselect-none" href="#"><span class="ui-icon ui-icon-closethick"></span><span>'+i.uncheckAllText+"</span></a></li>"}else if(typeof i.header==="string"){return"<li>"+i.header+"</li>"}else{return""}}).append('<li class="ui-multiselect-close"><a href="#" class="ui-multiselect-close"><span class="ui-icon ui-icon-circle-close"></span></a></li>').appendTo(s),l=(this.checkboxContainer=e("<ul />")).addClass("ui-multiselect-checkboxes ui-helper-reset").appendTo(a);this._bindEvents();this.refresh(true);if(!i.multiple){a.addClass("ui-multiselect-single")}},_init:function(){if(this.options.header===false){this.header.hide()}if(!this.options.multiple){this.headerLinkContainer.find(".ui-multiselect-all, .ui-multiselect-none").hide()}if(this.options.autoOpen){this.open()}if(this.element.is(":disabled")){this.disable()}},refresh:function(t){var n=this.element,o=this.options,a=this.menu,s=this.checkboxContainer,r=[],l="",d=n.attr("id")||i++;n.find("option").each(function(t){var i=e(this),n=this.parentNode,a=this.innerHTML,s=this.title,c=this.value,u="ui-multiselect-"+(this.id||d+"-option-"+t),p=this.disabled,f=this.selected,h=["ui-corner-all"],m=(p?"ui-multiselect-disabled ":" ")+this.className,g;if(n.tagName==="OPTGROUP"){g=n.getAttribute("label");if(e.inArray(g,r)===-1){l+='<li class="ui-multiselect-optgroup-label '+n.className+'"><a href="#">'+g+"</a></li>";r.push(g)}}if(p){h.push("ui-state-disabled")}if(f&&!o.multiple){h.push("ui-state-active")}l+='<li class="'+m+'">';l+='<label for="'+u+'" title="'+s+'" class="'+h.join(" ")+'">';l+='<input id="'+u+'" name="multiselect_'+d+'" type="'+(o.multiple?"checkbox":"radio")+'" value="'+c+'" title="'+a+'"';if(f){l+=' checked="checked"';l+=' aria-selected="true"'}if(p){l+=' disabled="disabled"';l+=' aria-disabled="true"'}l+=" /><span>"+a+"</span></label></li>"});s.html(l);this.labels=a.find("label");this.inputs=this.labels.children("input");this._setButtonWidth();this._setMenuWidth();this.button[0].defaultValue=this.update();if(!t){this._trigger("refresh")}},update:function(){var t=this.options,i=this.inputs,n=i.filter(":checked"),o=n.length,a;if(o===0){a=t.noneSelectedText}else{if(e.isFunction(t.selectedText)){a=t.selectedText.call(this,o,i.length,n.get())}else if(/\d/.test(t.selectedList)&&t.selectedList>0&&o<=t.selectedList){a=n.map(function(){return e(this).next().html()}).get().join(", ")}else{a=t.selectedText.replace("#",o).replace("#",i.length)}}this.buttonlabel.html(a);return a},_bindEvents:function(){var t=this,i=this.button;function n(){t[t._isOpen?"close":"open"]();return false}i.find("span").bind("click.multiselect",n);i.bind({click:n,keypress:function(e){switch(e.which){case 27:case 38:case 37:t.close();break;case 39:case 40:t.open();break}},mouseenter:function(){if(!i.hasClass("ui-state-disabled")){e(this).addClass("ui-state-hover")}},mouseleave:function(){e(this).removeClass("ui-state-hover")},focus:function(){if(!i.hasClass("ui-state-disabled")){e(this).addClass("ui-state-focus")}},blur:function(){e(this).removeClass("ui-state-focus")}});this.header.delegate("a","click.multiselect",function(i){if(e(this).hasClass("ui-multiselect-close")){t.close()}else{t[e(this).hasClass("ui-multiselect-all")?"checkAll":"uncheckAll"]()}i.preventDefault()});this.menu.delegate("li.ui-multiselect-optgroup-label a","click.multiselect",function(i){i.preventDefault();var n=e(this),o=n.parent().nextUntil("li.ui-multiselect-optgroup-label").find("input:visible:not(:disabled)"),a=o.get(),s=n.parent().text();if(t._trigger("beforeoptgrouptoggle",i,{inputs:a,label:s})===false){return}t._toggleChecked(o.filter(":checked").length!==o.length,o);t._trigger("optgrouptoggle",i,{inputs:a,label:s,checked:a[0].checked})}).delegate("label","mouseenter.multiselect",function(){if(!e(this).hasClass("ui-state-disabled")){t.labels.removeClass("ui-state-hover");e(this).addClass("ui-state-hover").find("input").focus()}}).delegate("label","keydown.multiselect",function(i){i.preventDefault();switch(i.which){case 9:case 27:t.close();break;case 38:case 40:case 37:case 39:t._traverse(i.which,this);break;case 13:e(this).find("input")[0].click();break}}).delegate('input[type="checkbox"], input[type="radio"]',"click.multiselect",function(i){var n=e(this),o=this.value,a=this.checked,s=t.element.find("option");if(this.disabled||t._trigger("click",i,{value:o,text:this.title,checked:a})===false){i.preventDefault();return}n.focus();n.attr("aria-selected",a);s.each(function(){if(this.value===o){this.selected=a}else if(!t.options.multiple){this.selected=false}});if(!t.options.multiple){t.labels.removeClass("ui-state-active");n.closest("label").toggleClass("ui-state-active",a);t.close()}t.element.trigger("change");setTimeout(e.proxy(t.update,t),10)});e(document).bind("mousedown.multiselect",function(i){if(t._isOpen&&!e.contains(t.menu[0],i.target)&&!e.contains(t.button[0],i.target)&&i.target!==t.button[0]){t.close()}});e(this.element[0].form).bind("reset.multiselect",function(){setTimeout(e.proxy(t.refresh,t),10)})},_setButtonWidth:function(){var e=this.element.outerWidth(),t=this.options;if(/\d/.test(t.minWidth)&&e<t.minWidth){e=t.minWidth}this.button.css("width","100%")},_setMenuWidth:function(){var e=this.menu,t=this.button.outerWidth()-parseInt(e.css("padding-left"),10)-parseInt(e.css("padding-right"),10)-parseInt(e.css("border-right-width"),10)-parseInt(e.css("border-left-width"),10)},_traverse:function(t,i){var n=e(i),o=t===38||t===37,a=n.parent()[o?"prevAll":"nextAll"]("li:not(.ui-multiselect-disabled, .ui-multiselect-optgroup-label)")[o?"last":"first"]();if(!a.length){var s=this.menu.find("ul").last();this.menu.find("label")[o?"last":"first"]().trigger("mouseover");s.scrollTop(o?s.height():0)}else{a.find("label").trigger("mouseover")}},_toggleState:function(e,t){return function(){if(!this.disabled){this[e]=t}if(t){this.setAttribute("aria-selected",true)}else{this.removeAttribute("aria-selected")}}},_toggleChecked:function(t,i){var n=i&&i.length?i:this.inputs,o=this;n.each(this._toggleState("checked",t));n.eq(0).focus();this.update();var a=n.map(function(){return this.value}).get();this.element.find("option").each(function(){if(!this.disabled&&e.inArray(this.value,a)>-1){o._toggleState("selected",t).call(this)}});if(n.length){this.element.trigger("change")}},_toggleDisabled:function(t){this.button.attr({disabled:t,"aria-disabled":t})[t?"addClass":"removeClass"]("ui-state-disabled");var i=this.menu.find("input");var n="ech-multiselect-disabled";if(t){i=i.filter(":enabled").data(n,true)}else{i=i.filter(function(){return e.data(this,n)===true}).removeData(n)}i.attr({disabled:t,"arial-disabled":t}).parent()[t?"addClass":"removeClass"]("ui-state-disabled");this.element.attr({disabled:t,"aria-disabled":t})},open:function(t){var i=this,n=this.button,o=this.menu,a=this.speed,s=this.options,r=[];if(this._trigger("beforeopen")===false||n.hasClass("ui-state-disabled")||this._isOpen){return}var l=o.find("ul").last(),d=s.show,c=n.offset();if(e.isArray(s.show)){d=s.show[0];a=s.show[1]||i.speed}if(d){r=[d,a]}l.scrollTop(0).height(s.height);if(e.ui.position&&!e.isEmptyObject(s.position)){s.position.of=s.position.of||n;o.show().position(s.position).hide()}else{o.css({top:c.top+n.outerHeight(),left:c.left})}e.fn.show.apply(o,r);this.labels.eq(0).trigger("mouseover").trigger("mouseenter").find("input").trigger("focus");n.addClass("ui-state-active");this._isOpen=true;this._trigger("open")},close:function(){if(this._trigger("beforeclose")===false){return}var t=this.options,i=t.hide,n=this.speed,o=[];if(e.isArray(t.hide)){i=t.hide[0];n=t.hide[1]||this.speed}if(i){o=[i,n]}e.fn.hide.apply(this.menu,o);this.button.removeClass("ui-state-active").trigger("blur").trigger("mouseleave");this._isOpen=false;this._trigger("close")},enable:function(){this._toggleDisabled(false)},disable:function(){this._toggleDisabled(true)},checkAll:function(e){this._toggleChecked(true);this._trigger("checkAll")},uncheckAll:function(){this._toggleChecked(false);this._trigger("uncheckAll")},getChecked:function(){return this.menu.find("input").filter(":checked")},destroy:function(){e.Widget.prototype.destroy.call(this);this.button.remove();this.menu.remove();this.element.show();return this},isOpen:function(){return this._isOpen},widget:function(){return this.menu},getButton:function(){return this.button},_setOption:function(t,i){var n=this.menu;switch(t){case"header":n.find("div.ui-multiselect-header")[i?"show":"hide"]();break;case"checkAllText":n.find("a.ui-multiselect-all span").eq(-1).text(i);break;case"uncheckAllText":n.find("a.ui-multiselect-none span").eq(-1).text(i);break;case"height":n.find("ul").last().height(parseInt(i,10));break;case"minWidth":this.options[t]=parseInt(i,10);this._setButtonWidth();this._setMenuWidth();break;case"selectedText":case"selectedList":case"noneSelectedText":this.options[t]=i;this.update();break;case"classes":n.add(this.button).removeClass(this.options.classes).addClass(i);break;case"multiple":n.toggleClass("ui-multiselect-single",!i);this.options.multiple=i;this.element[0].multiple=i;this.refresh()}e.Widget.prototype._setOption.apply(this,arguments)}})})(Fo.a);(function(e){var t=/[\-\[\]{}()*+?.,\\\^$|#\s]/g;function i(e,t,i){var n;return function(){var o=this,a=arguments;var s=function(){n=null;if(!i){e.apply(o,a)}};var r=i&&!n;clearTimeout(n);n=setTimeout(s,t);if(r){e.apply(o,a)}}}e.widget("ech.multiselectfilter",{options:{label:"Filter:",width:null,placeholder:"Enter keywords",autoReset:false,debounceMS:250},_create:function(){var t=this.options;var n=e(this.element);var o=this.instance=n.data("echMultiselect")||n.data("multiselect")||n.data("ech-multiselect");var a=this.header=o.menu.find(".ui-multiselect-header").addClass("ui-multiselect-hasfilter");var s=this.wrapper=e('<div class="ui-multiselect-filter">'+(t.label.length?t.label:"")+'<input placeholder="'+t.placeholder+'" type="search"'+(/\d/.test(t.width)?'style="width:'+t.width+'px"':"")+" /></div>").prependTo(this.header);this.inputs=o.menu.find('input[type="checkbox"], input[type="radio"]');this.input=s.find("input").bind({keydown:function(e){if(e.which===13){e.preventDefault()}},input:e.proxy(i(this._handler,t.debounceMS),this),search:e.proxy(this._handler,this)});this.updateCache();o._toggleChecked=function(e,t){var i=t&&t.length?t:this.labels.find("input");var n=this;var o=n._isOpen?":disabled, :hidden":":disabled";i=i.not(o).each(this._toggleState("checked",e));this.update();var a={};i.each(function(){a[this.value]=true});this.element.find("option").filter(function(){if(!this.disabled&&a[this.value]){n._toggleState("selected",e).call(this)}});if(i.length){this.element.trigger("change")}};var r=e(document).bind("multiselectrefresh."+o._namespaceID,e.proxy(function(){this.updateCache();this._handler()},this));if(this.options.autoReset){r.bind("multiselectclose."+o._namespaceID,e.proxy(this._reset,this))}},_handler:function(i){var n=e.trim(this.input[0].value.toLowerCase()),o=this.rows,a=this.inputs,s=this.cache;if(!n){o.show()}else{o.hide();var r=new RegExp(n.replace(t,"\\$&"),"gi");this._trigger("filter",i,e.map(s,function(e,t){if(e.search(r)!==-1){o.eq(t).css("display","block");return a.get(t)}return null}))}this.instance.menu.find(".ui-multiselect-optgroup-label").each(function(){var t=e(this);var i=t.nextUntil(".ui-multiselect-optgroup-label").filter(function(){return e.css(this,"display")!=="none"}).length;t[i?"show":"hide"]()})},_reset:function(){this.input.val("").trigger("keyup")},updateCache:function(){this.rows=this.instance.menu.find(".ui-multiselect-checkboxes li:not(.ui-multiselect-optgroup-label)");this.cache=this.element.children().map(function(){var t=e(this);if(this.tagName.toLowerCase()==="optgroup"){t=t.children()}return t.map(function(){return this.innerHTML.toLowerCase()}).get()}).get()},widget:function(){return this.wrapper},destroy:function(){e.Widget.prototype.destroy.call(this);this.input.val("").trigger("keyup");this.wrapper.remove()}})})(Fo.a);var ga={getStyleSettingsVariants(){return{default:{header:{backgroundColor:"@palette.primary",textColor:"#4A4A4A",height:"@tk.spacing.s4",padding:"0 @tk.spacing.s1",spacingBetween:"@tk.spacing.s1",fontSize:"@tk.fontSize.body"},toolbarHeader:{padding:"0 @tk.spacing.s1"},body:{border:"@tk.borderSize.primary @tk.borderStyle.primary #D0D3D8",borderHoverSelected:"@tk.borderSize.primary @tk.borderStyle.primary @palette.primary",boxShadowSelectedFrameless:"0 0 0 1px #005CB9 inset",spacing:"@tk.spacing.s1"},propHint:{outlineColor:"@palette.primary.3"}}}},getStyleSettingsVariantsChildren(){return{skuid__button:{"borderless--white":{extends:"borderless",padding:0,color:"@palette.white",hover:{backgroundColor:"@palette.primary.-1",border:"@tk.borderSize.primary @tk.borderStyle.primary @palette.primary.-1"},active:{backgroundColor:"@palette.primary.1",border:"@tk.borderSize.primary @tk.borderStyle.primary @palette.primary.1",boxShadow:"none"}},"borderless--header":{extends:"borderless",padding:"0 @tk.spacing.s1",color:"#2f3239",border:"none",hover:{boxShadow:"none",border:"none"},active:{boxShadow:"none",border:"none"}},"icononly--compact":{padding:"0 @tk.spacing.s1"}}}},getStyles(e){return{"builder-component--readonly":{opacity:"0.75"},header:{position:"relative",display:"flex",alignItems:"center",padding:"16px",background:"#F5F7F8",color:"#4A4A4A",fontWeight:"500",cursor:"pointer",border:e.body.border,borderBottom:"none","&:focus":{outline:"none !important"}},"header--selected":{background:"rgba(208,225,242,0.5)",border:e.body.borderHoverSelected,borderBottom:"none"},header__tab:{backgroundColor:e.header.backgroundColor,height:e.header.height,alignItems:"center",padding:e.header.padding,fontSize:e.header.fontSize,display:"flex"},header__title:{color:e.header.textColor,marginRight:e.header.spacingBetween,fontSize:e.header.fontSize},"header__title--readonly":{color:"#AAA"},header__icon:{marginRight:e.header.spacingBetween},"body-wrapper":{border:e.body.border,borderTop:"none",padding:"0.1px",marginBottom:e.body.spacing,"& :focus":{outline:"none"},"& [data-builder-nointeract]":{position:"relative","&:before":{content:'""',background:"red",opacity:0,position:"absolute",left:0,right:0,top:0,bottom:0,zIndex:5}},"& [data-builder-prophint]":{"&:hover":{cursor:"pointer",outline:"1px dotted ".concat(e.propHint.outlineColor)}}},"body-wrapper--selected":{border:e.body.borderHoverSelected,borderTop:"none"},"body-wrapper--hidden":{padding:"0.1px"},"body-wrapper--hidden--selected":{position:"relative",zIndex:"1",boxShadow:e.body.boxShadowSelectedFrameless},"button-group-wrapper":{position:"absolute",right:"0",top:"9px",padding:e.toolbarHeader.padding},"button-group-wrapper--frameless":{padding:0,zIndex:"2"},"button-group-wrapper--frameless--standard-pos":{top:"8px"},"button-group-wrapper--frameless--alt-pos":{top:"-32px"},"@global":{"@keyframes builderComponent__blink-outline":{"50%":{outline:"3px solid transparent"}}}}}};var ba={attributes:{_body:{},_title:{},_classes:{},_isInToolbar:{type:"boolean",default:false},hideWrapper:{type:"boolean",default:false},_xmlNode:{},_customBuilder:{},_makeDraggable:{},_isGlobalComponent:{},_builderComponent:{},_forceRenderToElement:{},_unselectable:{},_spoofedDefinition:{},_mode:{type:"string"}},nodes:{_optionGroups:{type:"array",childNode:{optionGroup:{attributes:{label:{type:"string"},icon:{type:"string"}},nodes:{options:{type:"array",childNode:{option:{attributes:{label:{type:"string"},value:{type:"string"},icon:{type:"string"},onClick:{}},nodes:{skuid__menu:{type:"node",schema:"skuid__menu"}},properties:{actions:true}}}}}}}}},access:{cpi:{public:["addActionGroup","addNavigationGroup","addActionItem","addClass","blinkOutline","getBuilder","getElement","getIcon","getMode","getName","getSpoofedDefinition","isSelected","parseState","refresh","rebuildProps","remove","save","select","setComponentDefinitionProcessor","setStyle","setTitle","setDragDeployment","setDragManifest","getDragManifest","createObserver","storeObserver","unstoreObserver","getCanvasComponent","updateCanvasComponent","setCanvasComponent"]}}};var va=n(127);const ya=e.$,Ca=e.$L,_a=e.utils,wa=_a.makeXMLDoc,xa=e.events.publish,ka=e.builder,Sa=ka.core,Ia=35,Ta=new e.component._ComponentDefinitionProcessor({logErrors:false,getModel:()=>undefined});const Aa=e.virtualDom.hyperScript;let Pa;const Ea={builderCPI:Symbol("builderCPI"),setupBuilderCPI:Symbol("setupBuilderCPI")};e.componentType.register("skuidbuilder__builderComponent",Object.assign({schema:ba,init(t,i,n){let o=t.shortcut("set"),{_xmlNode:a,_customBuilder:s,_makeDraggable:r,_isGlobalComponent:l,_isInToolbar:d,_optionGroups:c,_title:u,_mode:p}=i,f=a;["getPersonalizationService","save","isSelected","select","unselect","rebuildProps","remove","refresh","setTitle","addChildComponent","addActionGroup","addActionItem","toggleActionItemByLabel","modifyAutoCreatedEditorCondition","updateAutoCreatedEditorCondition"].forEach(e=>this[e]=n[e]);const h=self.body=ya("<div>").addClass("nx-pagebuilder-component-body");let m;this.set("xmlState",f);this.set("_",Object.assign({},this.get("_"),{builderComponent:this}));this.mapDeprecatedPropToState(t,"state","xmlState");this.body=h;this.mode=p;o({_classes:{},_buttonGroup:t.createChildComponent({enableBuilderCanvasMode:false,componentType:"skuid__buttonGroup",buttons:[]})});if(!c){o("_optionGroups",[{options:[]}])}else{n.updateActionGroup()}if(e.utils.isObject(r)){let e=arguments[2];r=e.makeDraggable;l=e.isGlobalComponent;this.mode=e.mode}if(a.length===0){return false}let g=a[0].nodeName,b=a.attr("uniqueid")||a.attr("uniqueId");this.set("key",b||_a.generateUniqueId());if(Sa.isInMasterPage(a)===true){this.mode="readonly"}this.customBuilder=s;this.makeDraggable=r;if(!s){this.builderId=g;this.builder=m=Sa.getBuilder(this.builderId)||new Sa.Builder({id:this.builderId})}else{this.builder=m=s;this.builderId=this.builder.id}if(m){o("_builder",m);if(m.isGlobalComponent!==undefined)l=m.isGlobalComponent;if(m.makeDraggable!==undefined)r=m.makeDraggable;if(m.parseState){n.setComponentDefinitionProcessor(Ta);t.set("_parseState",true);if(_a.isFunction(m.parseState)){t.set("_parseStateFunc",m.parseState)}}}let v=this.builder.hideWrapper;if(typeof v==="function"){v=v(this)}t.set({_title:u||n.getName(),_builderIcon:n.getIcon(),_isInToolbar:!!m.isInToolbar,_hideWrapper:!!v||!!m.isInToolbar,_makeDraggable:r,_mode:this.mode,_isGlobalComponent:l});if(!d){o({_builderIconInstance:this.get("_builderIcon")&&t.createChildComponent({componentType:"skuid__icon",handle:this.get("_builderIcon")})})}if(l){n.addActionItem({tooltip:Ca("Remove"),icon:"sk-webicon-ink:delete",additionalClass:"sk-delete-icon",action(){n.remove()},id:"removeButton"});n.addActionItem({text:Ca("Clone"),additionalClass:"sk-clone-icon",action(){ka.desktop.insertComponentAfterSelected(wa(_a.getXML(f[0])),{cleanIds:true,nest:false}).then(e=>E["a"](e,"clone"))},id:"cloneButton"});n.createObserver({node:f[0],observe:{attributes:true,childList:true,subtree:true},callback:e=>{E["b"](this,e)}})}n[Ea.setupBuilderCPI](m);m.init&&m.init(this);n.setBuilder(m);if(m.isTransparent){let t="nx-pagebuilder-component-transparent",i="nx-pagebuilder-acceptor";let n=ya(h);let o=function e(o){const a=n.find(".".concat(i)).toArray(),s=n.find(".".concat(i," .").concat(i)).toArray();n.removeClass("".concat(t,"-darkbg ").concat(t,"-lightbg ").concat(t,"-mediumbg").concat(t,"-whitebg")).addClass("".concat(t,"-").concat(o,"bg"));const r=ya(a.filter(e=>s.indexOf(e)===-1));r.removeClass("".concat(i,"-darkbg ").concat(i,"-lightbg ").concat(i,"-mediumbg").concat(i,"-whitebg")).addClass("".concat(i,"-").concat(o,"bg"))};let a=function e(){let t=Sa.getClosestBackground(n);if(t&&t!=="initial"){let e=Sa.getColorLightness(t);if(e===255){o("white")}else if(e>150){o("light")}else if(e>60){o("medium")}else{o("dark")}}else{o("white")}};e.events.subscribe("ui.reflow",a);e.events.subscribe("builder.colorcheck",a);_a.delay(1).then(()=>a())}if(m.neededNotices){this.set({_builderNotices:t.createChildComponent({componentType:"skuidbuilder__builderNotices",builder:m,state:f,neededNotices:m.neededNotices})})}t.subscribe("beforeUnregister",()=>{ka.componentRegistry.unregister(this);const t=this.get("_observers");t&&t.forEach(e=>e.disconnect());(this.get("_navGroupSnippets")||[]).forEach(t=>e.snippet.unregister(t))});this.set({_body:h[0],_builderId:m.id,xmlState:f});if(m&&!m.isInPropertiesPane){ka.componentRegistry.register(this)}n.refresh()},renderVDom(t){const i=t.shortcut("getStyledClasses"),{_builder:n,_builderIconInstance:o,_builderId:a,_builderNotices:s,_buttonGroup:r,_classes:l,_customStyles:d,_flashOutlineStyles:c,_hideWrapper:u,_isGlobalComponent:p,_isInToolbar:f,key:h,_menuForButtons:m,_mode:g,_makeDraggable:b,_selected:v,_styleOBj:y,uniqueId:C,_title:_}=t.getState(),w=t._cpi,x=a==="skuid__page",k=a==="skuid__pageRegion",S=g==="readonly",I=b&&!S;return Aa("div",Object.assign({},{key:h,id:t.id(),"data-builder-id":a||"--none--","data-unique-id":C,"data-readonly":!k&&S?"true":"false",classes:Object.assign(i({"builder-component--readonly":!k&&!x&&S}),{"nx-pagebuilder-component":true,"nx-pagebuilder-selected":v,"nx-pagebuilder-component-global":p,"nx-pagebuilder-component-transparent":n&&n.isTransparent},l),afterCreate(e){t.set("_focusElement",e,false);e.ondragend=(e=>{if(!I)return;ka.dragDrop.standardDragEnd(e)});t.get("_menuForButtons")&&t.get("_menuForButtons").cpi.setTarget(e)},afterUpdate:w.afterUpdate,onclick:w.onClick,onmousedown:e=>{e.currentTarget.setAttribute("draggable",I?"true":"false");return w.onMouseDown(e)},onmouseup:e=>{e.currentTarget.setAttribute("draggable","false");return w.onMouseUp(e)},ondragstart:I&&(i=>{const n=t.cpi;e.builder.dragDrop.standardDragStart(i,n.getName(),n.getIcon(),new Ee["c"](n.getDragManifest(),t.get("_dragDeployment")||new Ee["a"]({component:t})));i.stopPropagation()}),styles:Object.assign({},c||{},y||{},d)}),[!u&&Aa("div",{key:"header",classes:i({header:true,"header--selected":v}),tabindex:"-1","data-te":"builder-component-header"},[o&&Aa("span",{key:"header icon",class:i("header__icon")},[o.renderVDom()]),Aa("div",{key:"header title",classes:i({header__title:true,"header__title--readonly":!k&&S})},[_||""]),s&&s.renderVDom()]),v&&r&&!S&&!m&&Aa("div",{key:"button-group-wrapper",classes:i({"button-group-wrapper":true,"button-group-wrapper--frameless":!f&&u,"button-group-wrapper--frameless--standard-pos":!n.alternateFramelessButtons,"button-group-wrapper--frameless--alt-pos":n.alternateFramelessButtons})},[r.renderVDom()]),Aa("div",{key:"body","data-te":"builder-component-body",classes:Object.assign({"body-wrapper-legacy-temp":true},i({"body-wrapper":!f&&!u,"body-wrapper--selected":!f&&!u&&v,"body-wrapper--hidden":!f&&u,"body-wrapper--hidden--selected":!f&&u&&v})),afterCreate:w.afterCreateBody,onmousedown:w.onMouseDownBody},n&&n.renderVDom&&[n.renderVDom(t)])])},cpi:{[Ea.setupBuilderCPI](e){Object.defineProperties(this,{builderCPI:{get(){return this[Ea.builderCPI]}}});const t=e.cpi;if(!t)return;let i;const n=this;if(t){i=e._cpiKeys;if(!i){i=e._cpiKeys=Object.keys(t)}}n[Ea.builderCPI]={};i&&i.forEach(e=>{n[Ea.builderCPI][e]=function(){return t[e].apply(n,arguments)}})},getPersonalizationService(){let e=this.get("personalizationService");if(!e){e=va["a"].createComponentService({});this.set("personalizationService",e)}return e},save(){xa("skuidBuilderSave");return this},afterCreateBody(e){const{_builder:t,_body:i}=this.getState();if(!t||!t.renderVDom){i&&e.appendChild(i)}},onMouseDown(e){if(this.get("_unselectable"))return;if(e!==Pa){this._getCPI().select({focus:true});Pa=e}},onMouseUp(){if(this.get("_unselectable"))return},onMouseDownBody(t){const i=this.get("_builder");if(!i.propHintMap)return;const n=e.$(t.target);let o=n.is("[data-builder-prophint]")?t.target:false;if(!o)o=n.parents("[data-builder-prophint]")[0];if(!o)return;const a=i.propHintMap[o.getAttribute("data-builder-prophint")];if(!a)return;const s=ka.pagebuilderui.cproperties;s.setCategory(a.category||"Basic");a.subcategory&&s.setSubcategory(a.subcategory||"Basic");this.getCPI().select({focus:true});a.prop&&_a.delay(1).then(()=>s.focusPropertyByPropId(a.prop));a.onMouseDown&&a.onMouseDown(t,this);t.stopPropagation()},updateActionGroup(){const{_optionGroups:t,_inInToolbar:i,_buttonGroup:n,_hideWrapper:o,_navItemGroup:a}=this.getState();if(!i){n.set("buttons",(a||[]).concat(t[0].options).map(({label:t,icon:i,iconPosition:n,onClick:a,actions:s,tooltip:r})=>{if(o){r=t;t=""}const l=!t&&i?e.themes.getChildStyleVariantHandle(this,"skuid__button","icononly--compact"):"default";return{icon:i,iconPosition:n,label:t,onClick:a,actions:s,tooltip:r&&'<tooltip text="'.concat(r,'" compact="true"/>'),styleSettingsVariant:l}}))}else{const i=e.themes.getChildStyleVariantHandle(this,"skuid__button","borderless--header");n.set("buttons",t[0].options.map(({label:e,tooltip:t,icon:n,onClick:o})=>({icon:n,onClick:o,tooltip:'<tooltip text="'.concat(t||e,'" compact="true"/>'),styleSettingsVariant:i})))}},_addActionItem(e,t={}){const{_optionGroups:i,_mode:n}=this.getState(),o=this._cpi;if(n==="readonly")return;e.icon=t.icon;e.iconPosition=t.iconPosition;e.tooltip=t.tooltip;let a=o.getOption(e.label,e.icon);if(a){a=Object.assign(a,e)}else{i[0].options.unshift(e)}this.set("_optionGroups",i);o.updateActionGroup()},getActionItemByLabel(e){const t=this.get("_buttonGroup"),i=t.cpi.getButtons();return(i||[]).find(t=>{if(t.definition.label===e)return true;if(t.definition.tooltip&&t.definition.tooltip.attr("text")===e)return true})},toggleActionItemByLabel(e,t){const i=this._cpi.getActionItemByLabel(e);i&&i.set("show",!!t)},isSelected(){return this.get("_selected")===true},select(e){const{_builder:t,xmlState:i,_focusElement:n,_unselectable:o}=this.getState(),a=this._cpi;e=Object.assign({focus:false},e);if(o)return;let s=t.onSelect&&t.onSelect(this);if(s&&s.cancelSelect){return this}if(e.resetPropCategory!==false&&t.isInPropertiesPane!==true){ka.pagebuilderui.cproperties.category=false}if(!a.isSelected()){if(i.parents("pageregioncontents").length&&Sa.isInMasterPage(i)===false){this.unset("_mode")}t.renderProperties(this)}if(t&&!t.isInPropertiesPane){const e=ka.componentRegistry.getSelectedComponent();e&&e!==this&&e.unselect();ka.componentRegistry.setSelectedComponent(this);xa("skuid.pageComposer.canvasComponent.selected",this)}else if(a.getMode()!=="readonly"){const e=ka.componentRegistry.getSelectedPropertyComponent();e&&e!==this&&e.unselect();ka.componentRegistry.setSelectedPropertyComponent(this)}if(this.get("buttonsInMenus")){let e=this.get("_menuForButtons");if(!e){e=_a._floatingComponentFactory.createMenu({menuOnRight:true,menuOnTop:true,styleSettingsVariant:"frameless"},this);e.cpi.setTarget(this.getElement(),false);this.set("_menuForButtons",e)}e.set("components",[this.get("_buttonGroup")]);_a.delay().then(()=>e.cpi.toggle(true))}this.set("_selected",true);xa("skuid.pageComposer.component.selected",this);this.publish("selected");if(e.focus&&n&&!n.contains(document.activeElement)){n.focus({preventScroll:true})}return this},setBuilder(e){this.set({_builder:e})},unselect(){if(!this.registered)return;this.set("_selected",false);this.get("_menuForButtons")&&this.get("_menuForButtons").cpi.toggle(false)},rebuildProps(e={}){const{_builder:t}=this.getState();let i=ka.pagebuilderui.cproperties,n=[{propertiesViewer:i,component:this,builder:t}];if(e&&e.refocus===false)i.unsetFocusedProperty();xa("skuid.pageComposer.propertyPanel.beforeRender",n);t.renderProperties(this);xa("skuid.pageComposer.propertyPanel.afterRender",n);return this},remove(e,t,i){const{_builder:n,xmlState:o}=this.getState();let a;if(arguments.length===1&&_a.isObject(e)){a=arguments[0];e=a.preventUnselect;t=a.doNotSave;i=a.preventSelectNext}let s=o.attr("uniqueid")||o.attr("uniqueId"),r=o.prev().add(o.next()).first(),l,d={component:this,saveChanges:!t};xa("skuid.pageComposer.component.beforeRemove",d);if(s){xa("skuid.pageComposer.component.beforeRemove#"+s,d)}let c=ka.pagebuilderui.cproperties;if(!e){c.clear?c.clear():c.empty()}if(!r.length){r=o.parent()}while(r.length&&!(l=Sa.getCanvasComponentFromState(r))){r=r.parent()}o.remove();if(t!==true){this._cpi.save()}if(n&&n.afterDelete){n.afterDelete(this)}xa("skuid.pageComposer.component.afterRemove",d);if(s){xa("skuid.pageComposer.component.afterRemove#"+s,d)}if(!i){l&&l.select({focus:true})}this.publish("removed");this.unregister();return this},refresh(){const{_builder:e,_body:t,xmlState:i}=this.getState();if(e.renderVDom){if(!this.hasRenderedInitially){this.hasRenderedInitially=true}else{e.refresh&&e.refresh(this);return this}}else{t.innerHTML=""}const n=i.children("styles").first();if(n.length){const e=_a.processStylesNode(n,{whitelist:Sa.builderSafeBackgroundProperties});this.set("_styleObj",e.styleObj);e.asyncStyleObjPromise.then(e=>{this.set("_styleObj",Object.assign(this.get("_styleObj"),e))})}if(!e.renderVDom){e.renderComponent(this,{isRefresh:true})}e&&e.afterAttach&&e.afterAttach(this);this.set({uniqueId:i.attr("uniqueId")||i.attr("uniqueid")});return this},setTitle(e){if(!e&&this.get("builder")){e=this.cpi.getName()}this.set("_title",e);return this},addChildComponent(e){const t=this.get("_builder");if(t.addChildComponent){return!!t.addChildComponent(this,e)}else{return false}},addActionGroup(t,i){const n=e.utils.generateUniqueId();this._cpi._addActionItem({label:i,uniqueId:n,actions:e.utils.makeXMLDoc('\n\t\t\t\t\t<actions>\n\t\t\t\t\t\t<action type="toggleMenu" uniqueId="'.concat(n,'">\n\t\t\t\t\t\t\t<optionGroups>\n\t\t\t\t\t\t\t\t<optionGroup>\n\t\t\t\t\t\t\t\t\t<options>\n\t\t\t\t\t\t\t\t\t\t').concat(t.map((t,i)=>{const o="".concat(n,"--").concat(i);e.snippet.register(o,t.action);return'\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option label="'.concat(t.text,'">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<actions>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<action type="custom" snippet="').concat(o,'"/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</actions>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t\t\t\t\t')}),"\n\t\t\t\t\t\t\t\t\t</options>\n\t\t\t\t\t\t\t\t</optionGroup>\n\t\t\t\t\t\t\t</optionGroups>\n\t\t\t\t\t\t</action>\n\t\t\t\t\t</actions>\n\t\t\t\t\t"))},{icon:"sk-webicon-ink:chevron-small-down",iconPosition:"right"});return this},addNavigationGroup(t,i){(this.get("_navGroupSnippets")||[]).forEach(t=>e.snippet.unregister(t));const n=e.utils.generateUniqueId(),o=[];const a={label:i,uniqueId:n,actions:e.utils.makeXMLDoc('\n\t\t\t\t\t<actions>\n\t\t\t\t\t\t<action type="toggleMenu" uniqueId="'.concat(n,'">\n\t\t\t\t\t\t\t<optionGroups>\n\t\t\t\t\t\t\t\t<optionGroup>\n\t\t\t\t\t\t\t\t\t<options>\n\t\t\t\t\t\t\t\t\t\t').concat(t.map((t,i)=>{const s="".concat(n,"--").concat(i);e.snippet.register(s,()=>{t.action();a.label=t.text;this._cpi.updateActionGroup()});o.push(s);return'\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option label="'.concat(t.text,'">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<actions>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<action type="custom" snippet="').concat(s,'"/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</actions>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t\t\t\t\t')}),"\n\t\t\t\t\t\t\t\t\t</options>\n\t\t\t\t\t\t\t\t</optionGroup>\n\t\t\t\t\t\t\t</optionGroups>\n\t\t\t\t\t\t</action>\n\t\t\t\t\t</actions>\n\t\t\t\t\t")),icon:"sk-webicon-ink:chevron-small-down",iconPosition:"right"};this.set({_navItemGroup:[a],_navGroupSnippets:o});this._cpi.updateActionGroup()},addActionItem(e,t,i,n){if(e&&typeof e==="object"){this._cpi._addActionItem({label:e.text||e.title,onClick:e.action},{tooltip:e.tooltip,icon:e.icon})}else{this._cpi._addActionItem({label:e,onClick:i},{tooltip:n,icon:t})}},_removeActionItems(){const{_isInToolbar:e,_buttonGroup:t}=this.getState();if(e){t.set("buttons",[]);this.set("_optionGroups",[{options:[]}])}},getOption(e,t){const i=this.get("_optionGroups")[0].options;let n,o;return i.find(i=>{n=i.label===e;o=i.icon===t;if(e&&t)return n&&o;else if(t)return o;return n})},modifyAutoCreatedEditorCondition(e,t){const{xmlState:i}=this.getState();if(t){let n=t.attr("model"),o=i.attr("model");if(n&&o){let t=Sa.getModelFromModelName(n),i=Sa.getModelFromModelName(o);if(t&&i){let n=t.attr("sobject"),o=i.attr("sobject");if(n!==o){Sa.getDataSourceFromModel(t).getEntityMetadata({entities:o}).then(function(t){if(t&&t[0])t=t[0];let o="Id";i.children("fields").children().each(function(){let e=ya(this),i=e.attr("id"),a=t.getField(i);if(a&&a.ref){if(a.ref.indexOf(n)!==-1){o=i;return false}}});if(e.attr("field")!==o)e.attr("field",o)});return}}}}if(e.attr("field")!=="Id"){e.attr("field","Id")}},updateAutoCreatedEditorCondition(){let{xmlState:e}=this.getState(),t=e.find('conditions > condition[autocreated="true"]'),i,n,o;if(t.length){i=e.closest('action[type="popup"]');n=e.closest("eventsource");if(i.length&&i.parent().is("rowactions")||n.length&&ya.inArray(n.attr("eventclickhandler"),["custompopup","snippetthencustompopup"])!==-1){o=n.length&&n.first();if(o){this._cpi.modifyAutoCreatedEditorCondition(t,o)}}}},addClass(e){const t=this.get("_classes");e.split(" ").forEach(e=>{t[e]=true});this.set("_classes",t)},setStyle(e,t){let i=this.get("_customStyles")||{};if(_a.isObject(e)){i=Object.assign(i,e)}else{i[e]=t}this.set("_customStyles",i)},blinkOutline(e="#000",t=3){const i=250;this.set("_flashOutlineStyles",{animation:"builderComponent__blink-outline ".concat(i,"ms step-start 0s ").concat(t),outline:"3px dashed ".concat(e)});this.delay(i*t).then(()=>{this.set("_flashOutlineStyles",{outline:""})})},getElement(){return this.get("_element")},getBuilder(){return this.get("_builder")},getSpoofedDefinition(){return this.get("_spoofedDefinition")},setComponentDefinitionProcessor(e){this.set("_componentDefinitionProcessor",e)},parseState(){const{_parseState:e,_parseStateFunc:t,_componentDefinitionProcessor:i,_builder:n,canvasSchema:o}=this.getState();let a={};if(!e)return;if(e){a=Object.assign(i.parseXML(this.get("xmlState")[0],o),{componentType:this.builder.componentType,enableBuilderCanvasMode:true,_themeSettings:Sa.getActiveThemeSettings()});a._=Object.assign(a._,{builderComponent:this,componentDefinitionProcessor:i})}if(t)a=t(this,a);["conditions","enableConditions","hotkeys","interactions","openConditions","projector","renderConditions","renderconditions","styleVariantConditions","tooltip"].forEach(e=>delete a[e]);if(!n||n.id!=="skuid__table")delete a.actions;return a},createObserver(e){const{node:t,observe:i,callback:n,useDebounce:o=true,debounceTime:a=Ia}=e;const s=n||(()=>this.cpi.refresh());const r=o?_a.debounce(s,a):s;const l=new MutationObserver(r);l.observe(t,i);this.cpi.storeObserver(l);return l},storeObserver(e){let t=this.get("_observers");if(!t){t=[];this.set("_observers",t,false)}t.push(e)},unstoreObserver(e){const t=this.get("_observers");if(t){const i=t.indexOf(e);if(i>-1)t.splice(i,1);this.set("_observers",t,false)}},setDragManifest(e){if(!e)throw Error("Drag Manifest cannot be undefined");this.set("_dragManifest",e,false)},setDragDeployment(e){if(!e)throw Error("Drag Deployment cannot be undefined");this.set("_dragDeployment",e,false)},getDragManifest(){const{xmlState:e,_builderId:t,_dragManifest:i,_isGlobalComponent:n}=this.getState();if(i)return i;const o=e.attr("model");return new Ee["b"]({model:o,builderId:t,isGlobalComponent:n})},getMode(){return this.get("_mode")},getCanvasComponent(){return this.get("canvasComponent")},setCanvasComponent(){if(!this.builder.componentType){throw Error('Cannot set canvas component. "componentType" property must be defined on the Builder')}this.set("canvasSchema",e.componentType.get(this.builder.componentType).schema);const t=this.createChildComponent(Object.assign({},this.cpi.parseState()));this.set("canvasComponent",t);return t},updateCanvasComponent(e={},t=(()=>{})){const{canvasComponent:i,canvasSchema:n}=this.getState(),o=this.cpi.parseState();i.set(o);for(let e in n.attributes){if(e!=="projector"&&typeof o[e]==="undefined")i.set(e,undefined)}t();if(e.scheduleRender!==false){this.scheduleVirtualRender()}},getName(){return this.get("_builder").getName(this.get("xmlState"))},getIcon(){return this.get("_builder").getIcon(this.get("xmlState"))}}},ga));var Ma=n(288)},74:function(t,i,n){"use strict";n.d(i,"a",function(){return r});const o=e.utils.camelToTitle,a=e=>typeof e!=="undefined",s={component:Symbol("component")};class r{constructor(e,t,i){this[s.component]=i;this.id=e;this.type=t.type;this.location="attribute";this.label=t.label||o(e);this.rebuildProps=!!t.rebuildBuilderPropsOnChange;if(a(t.helptext)){this.helptext=t.helptext}if(a(t.required)){this.required=t.required}if(a(t.default)){this.defaultValue=t.default}switch(t.type){case"picklist":this.picklistEntries=r.convertPicklist(t.options);break}}get component(){return this[s.component]}onChange(){if(this[s.component]){this[s.component].refresh();this.rebuildProps&&this[s.component].rebuildProps()}}static convertPicklist(e){return(e||[]).map(e=>{if(typeof e==="object")return e;return{label:e,value:e}})}}},75:function(t,i,n){"use strict";n.d(i,"a",function(){return s});const o=e.events.publish;const a=e=>e.getAttribute("uniqueid")||e.getAttribute("uniqueId");class s{constructor(){this.componentCollection={};this.componentsWithoutIds=[]}register(e){const t=a(e.get("xmlState")[0])||e.id();if(t&&e){this.componentCollection[t]=e}else if(!this.componentsWithoutIds.includes(e)){this.componentsWithoutIds.push(e)}o("skuid.pageComposer.component.registered")}unregister(e){const t=a(e.get("xmlState")[0])||e.id();if(t){delete this.componentCollection[t]}const i=this.componentsWithoutIds.indexOf(e);if(i>-1){this.componentsWithoutIds.splice(i,1)}e.get("xmlState")[0].querySelectorAll("[uniqueid], [uniqueId]").forEach(e=>{delete this.componentCollection[a(e)]});o("skuid.pageComposer.component.unregistered")}updateId(e,t){if(!this.componentCollection[e])return;this.componentCollection[t]=this.componentCollection[e];delete this.componentCollection[e]}getComponents(){return this.componentCollection}getComponentsList(){return Object.keys(this.componentCollection).map(e=>this.componentCollection[e]).concat(this.componentsWithoutIds)}getById(e){return this.getComponents()[e]}getByState(e){if(!e)return;let t=this.getById(e.getAttribute("uniqueid")||e.getAttribute("uniqueId"));if(t)return t;for(let t=0;t<this.componentsWithoutIds.length;t++){if(this.componentsWithoutIds[t].get("xmlState")[0]===e){return this.componentsWithoutIds[t]}}for(const t in this.componentCollection){if(this.componentCollection[t].get("xmlState")[0]===e){return this.componentCollection[t]}}}setSelectedComponent(e){this._selectedComponent=e}getSelectedComponent(){return this._selectedComponent}setSelectedPropertyComponent(e){this._selectedPropertyComponent=e}getSelectedPropertyComponent(){return this._selectedPropertyComponent}}},76:function(e,t,i){"use strict";(function(e){var n=i(77);var o=i(78);var a=i(79);t.Buffer=d;t.SlowBuffer=y;t.INSPECT_MAX_BYTES=50;d.TYPED_ARRAY_SUPPORT=e.TYPED_ARRAY_SUPPORT!==undefined?e.TYPED_ARRAY_SUPPORT:s();t.kMaxLength=r();function s(){try{var e=new Uint8Array(1);e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return e.foo()===42&&typeof e.subarray==="function"&&e.subarray(1,1).byteLength===0}catch(e){return false}}function r(){return d.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function l(e,t){if(r()<t){throw new RangeError("Invalid typed array length")}if(d.TYPED_ARRAY_SUPPORT){e=new Uint8Array(t);e.__proto__=d.prototype}else{if(e===null){e=new d(t)}e.length=t}return e}function d(e,t,i){if(!d.TYPED_ARRAY_SUPPORT&&!(this instanceof d)){return new d(e,t,i)}if(typeof e==="number"){if(typeof t==="string"){throw new Error("If encoding is specified then the first argument must be a string")}return f(this,e)}return c(this,e,t,i)}d.poolSize=8192;d._augment=function(e){e.__proto__=d.prototype;return e};function c(e,t,i,n){if(typeof t==="number"){throw new TypeError('"value" argument must not be a number')}if(typeof ArrayBuffer!=="undefined"&&t instanceof ArrayBuffer){return g(e,t,i,n)}if(typeof t==="string"){return h(e,t,i)}return b(e,t)}d.from=function(e,t,i){return c(null,e,t,i)};if(d.TYPED_ARRAY_SUPPORT){d.prototype.__proto__=Uint8Array.prototype;d.__proto__=Uint8Array;if(typeof Symbol!=="undefined"&&Symbol.species&&d[Symbol.species]===d){Object.defineProperty(d,Symbol.species,{value:null,configurable:true})}}function u(e){if(typeof e!=="number"){throw new TypeError('"size" argument must be a number')}else if(e<0){throw new RangeError('"size" argument must not be negative')}}function p(e,t,i,n){u(t);if(t<=0){return l(e,t)}if(i!==undefined){return typeof n==="string"?l(e,t).fill(i,n):l(e,t).fill(i)}return l(e,t)}d.alloc=function(e,t,i){return p(null,e,t,i)};function f(e,t){u(t);e=l(e,t<0?0:v(t)|0);if(!d.TYPED_ARRAY_SUPPORT){for(var i=0;i<t;++i){e[i]=0}}return e}d.allocUnsafe=function(e){return f(null,e)};d.allocUnsafeSlow=function(e){return f(null,e)};function h(e,t,i){if(typeof i!=="string"||i===""){i="utf8"}if(!d.isEncoding(i)){throw new TypeError('"encoding" must be a valid string encoding')}var n=C(t,i)|0;e=l(e,n);var o=e.write(t,i);if(o!==n){e=e.slice(0,o)}return e}function m(e,t){var i=t.length<0?0:v(t.length)|0;e=l(e,i);for(var n=0;n<i;n+=1){e[n]=t[n]&255}return e}function g(e,t,i,n){t.byteLength;if(i<0||t.byteLength<i){throw new RangeError("'offset' is out of bounds")}if(t.byteLength<i+(n||0)){throw new RangeError("'length' is out of bounds")}if(i===undefined&&n===undefined){t=new Uint8Array(t)}else if(n===undefined){t=new Uint8Array(t,i)}else{t=new Uint8Array(t,i,n)}if(d.TYPED_ARRAY_SUPPORT){e=t;e.__proto__=d.prototype}else{e=m(e,t)}return e}function b(e,t){if(d.isBuffer(t)){var i=v(t.length)|0;e=l(e,i);if(e.length===0){return e}t.copy(e,0,0,i);return e}if(t){if(typeof ArrayBuffer!=="undefined"&&t.buffer instanceof ArrayBuffer||"length"in t){if(typeof t.length!=="number"||te(t.length)){return l(e,0)}return m(e,t)}if(t.type==="Buffer"&&a(t.data)){return m(e,t.data)}}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function v(e){if(e>=r()){throw new RangeError("Attempt to allocate Buffer larger than maximum "+"size: 0x"+r().toString(16)+" bytes")}return e|0}function y(e){if(+e!=e){e=0}return d.alloc(+e)}d.isBuffer=function e(t){return!!(t!=null&&t._isBuffer)};d.compare=function e(t,i){if(!d.isBuffer(t)||!d.isBuffer(i)){throw new TypeError("Arguments must be Buffers")}if(t===i)return 0;var n=t.length;var o=i.length;for(var a=0,s=Math.min(n,o);a<s;++a){if(t[a]!==i[a]){n=t[a];o=i[a];break}}if(n<o)return-1;if(o<n)return 1;return 0};d.isEncoding=function e(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return true;default:return false}};d.concat=function e(t,i){if(!a(t)){throw new TypeError('"list" argument must be an Array of Buffers')}if(t.length===0){return d.alloc(0)}var n;if(i===undefined){i=0;for(n=0;n<t.length;++n){i+=t[n].length}}var o=d.allocUnsafe(i);var s=0;for(n=0;n<t.length;++n){var r=t[n];if(!d.isBuffer(r)){throw new TypeError('"list" argument must be an Array of Buffers')}r.copy(o,s);s+=r.length}return o};function C(e,t){if(d.isBuffer(e)){return e.length}if(typeof ArrayBuffer!=="undefined"&&typeof ArrayBuffer.isView==="function"&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer)){return e.byteLength}if(typeof e!=="string"){e=""+e}var i=e.length;if(i===0)return 0;var n=false;for(;;){switch(t){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case undefined:return $(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return i*2;case"hex":return i>>>1;case"base64":return Z(e).length;default:if(n)return $(e).length;t=(""+t).toLowerCase();n=true}}}d.byteLength=C;function _(e,t,i){var n=false;if(t===undefined||t<0){t=0}if(t>this.length){return""}if(i===undefined||i>this.length){i=this.length}if(i<=0){return""}i>>>=0;t>>>=0;if(i<=t){return""}if(!e)e="utf8";while(true){switch(e){case"hex":return L(this,t,i);case"utf8":case"utf-8":return D(this,t,i);case"ascii":return O(this,t,i);case"latin1":case"binary":return R(this,t,i);case"base64":return M(this,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,t,i);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase();n=true}}}d.prototype._isBuffer=true;function w(e,t,i){var n=e[t];e[t]=e[i];e[i]=n}d.prototype.swap16=function e(){var t=this.length;if(t%2!==0){throw new RangeError("Buffer size must be a multiple of 16-bits")}for(var i=0;i<t;i+=2){w(this,i,i+1)}return this};d.prototype.swap32=function e(){var t=this.length;if(t%4!==0){throw new RangeError("Buffer size must be a multiple of 32-bits")}for(var i=0;i<t;i+=4){w(this,i,i+3);w(this,i+1,i+2)}return this};d.prototype.swap64=function e(){var t=this.length;if(t%8!==0){throw new RangeError("Buffer size must be a multiple of 64-bits")}for(var i=0;i<t;i+=8){w(this,i,i+7);w(this,i+1,i+6);w(this,i+2,i+5);w(this,i+3,i+4)}return this};d.prototype.toString=function e(){var t=this.length|0;if(t===0)return"";if(arguments.length===0)return D(this,0,t);return _.apply(this,arguments)};d.prototype.equals=function e(t){if(!d.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(this===t)return true;return d.compare(this,t)===0};d.prototype.inspect=function e(){var i="";var n=t.INSPECT_MAX_BYTES;if(this.length>0){i=this.toString("hex",0,n).match(/.{2}/g).join(" ");if(this.length>n)i+=" ... "}return"<Buffer "+i+">"};d.prototype.compare=function e(t,i,n,o,a){if(!d.isBuffer(t)){throw new TypeError("Argument must be a Buffer")}if(i===undefined){i=0}if(n===undefined){n=t?t.length:0}if(o===undefined){o=0}if(a===undefined){a=this.length}if(i<0||n>t.length||o<0||a>this.length){throw new RangeError("out of range index")}if(o>=a&&i>=n){return 0}if(o>=a){return-1}if(i>=n){return 1}i>>>=0;n>>>=0;o>>>=0;a>>>=0;if(this===t)return 0;var s=a-o;var r=n-i;var l=Math.min(s,r);var c=this.slice(o,a);var u=t.slice(i,n);for(var p=0;p<l;++p){if(c[p]!==u[p]){s=c[p];r=u[p];break}}if(s<r)return-1;if(r<s)return 1;return 0};function x(e,t,i,n,o){if(e.length===0)return-1;if(typeof i==="string"){n=i;i=0}else if(i>2147483647){i=2147483647}else if(i<-2147483648){i=-2147483648}i=+i;if(isNaN(i)){i=o?0:e.length-1}if(i<0)i=e.length+i;if(i>=e.length){if(o)return-1;else i=e.length-1}else if(i<0){if(o)i=0;else return-1}if(typeof t==="string"){t=d.from(t,n)}if(d.isBuffer(t)){if(t.length===0){return-1}return k(e,t,i,n,o)}else if(typeof t==="number"){t=t&255;if(d.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf==="function"){if(o){return Uint8Array.prototype.indexOf.call(e,t,i)}else{return Uint8Array.prototype.lastIndexOf.call(e,t,i)}}return k(e,[t],i,n,o)}throw new TypeError("val must be string, number or Buffer")}function k(e,t,i,n,o){var a=1;var s=e.length;var r=t.length;if(n!==undefined){n=String(n).toLowerCase();if(n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le"){if(e.length<2||t.length<2){return-1}a=2;s/=2;r/=2;i/=2}}function l(e,t){if(a===1){return e[t]}else{return e.readUInt16BE(t*a)}}var d;if(o){var c=-1;for(d=i;d<s;d++){if(l(e,d)===l(t,c===-1?0:d-c)){if(c===-1)c=d;if(d-c+1===r)return c*a}else{if(c!==-1)d-=d-c;c=-1}}}else{if(i+r>s)i=s-r;for(d=i;d>=0;d--){var u=true;for(var p=0;p<r;p++){if(l(e,d+p)!==l(t,p)){u=false;break}}if(u)return d}}return-1}d.prototype.includes=function e(t,i,n){return this.indexOf(t,i,n)!==-1};d.prototype.indexOf=function e(t,i,n){return x(this,t,i,n,true)};d.prototype.lastIndexOf=function e(t,i,n){return x(this,t,i,n,false)};function S(e,t,i,n){i=Number(i)||0;var o=e.length-i;if(!n){n=o}else{n=Number(n);if(n>o){n=o}}var a=t.length;if(a%2!==0)throw new TypeError("Invalid hex string");if(n>a/2){n=a/2}for(var s=0;s<n;++s){var r=parseInt(t.substr(s*2,2),16);if(isNaN(r))return s;e[i+s]=r}return s}function I(e,t,i,n){return ee($(t,e.length-i),e,i,n)}function T(e,t,i,n){return ee(Q(t),e,i,n)}function A(e,t,i,n){return T(e,t,i,n)}function P(e,t,i,n){return ee(Z(t),e,i,n)}function E(e,t,i,n){return ee(J(t,e.length-i),e,i,n)}d.prototype.write=function e(t,i,n,o){if(i===undefined){o="utf8";n=this.length;i=0}else if(n===undefined&&typeof i==="string"){o=i;n=this.length;i=0}else if(isFinite(i)){i=i|0;if(isFinite(n)){n=n|0;if(o===undefined)o="utf8"}else{o=n;n=undefined}}else{throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported")}var a=this.length-i;if(n===undefined||n>a)n=a;if(t.length>0&&(n<0||i<0)||i>this.length){throw new RangeError("Attempt to write outside buffer bounds")}if(!o)o="utf8";var s=false;for(;;){switch(o){case"hex":return S(this,t,i,n);case"utf8":case"utf-8":return I(this,t,i,n);case"ascii":return T(this,t,i,n);case"latin1":case"binary":return A(this,t,i,n);case"base64":return P(this,t,i,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,i,n);default:if(s)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase();s=true}}};d.prototype.toJSON=function e(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function M(e,t,i){if(t===0&&i===e.length){return n.fromByteArray(e)}else{return n.fromByteArray(e.slice(t,i))}}function D(e,t,i){i=Math.min(e.length,i);var n=[];var o=t;while(o<i){var a=e[o];var s=null;var r=a>239?4:a>223?3:a>191?2:1;if(o+r<=i){var l,d,c,u;switch(r){case 1:if(a<128){s=a}break;case 2:l=e[o+1];if((l&192)===128){u=(a&31)<<6|l&63;if(u>127){s=u}}break;case 3:l=e[o+1];d=e[o+2];if((l&192)===128&&(d&192)===128){u=(a&15)<<12|(l&63)<<6|d&63;if(u>2047&&(u<55296||u>57343)){s=u}}break;case 4:l=e[o+1];d=e[o+2];c=e[o+3];if((l&192)===128&&(d&192)===128&&(c&192)===128){u=(a&15)<<18|(l&63)<<12|(d&63)<<6|c&63;if(u>65535&&u<1114112){s=u}}}}if(s===null){s=65533;r=1}else if(s>65535){s-=65536;n.push(s>>>10&1023|55296);s=56320|s&1023}n.push(s);o+=r}return F(n)}var N=4096;function F(e){var t=e.length;if(t<=N){return String.fromCharCode.apply(String,e)}var i="";var n=0;while(n<t){i+=String.fromCharCode.apply(String,e.slice(n,n+=N))}return i}function O(e,t,i){var n="";i=Math.min(e.length,i);for(var o=t;o<i;++o){n+=String.fromCharCode(e[o]&127)}return n}function R(e,t,i){var n="";i=Math.min(e.length,i);for(var o=t;o<i;++o){n+=String.fromCharCode(e[o])}return n}function L(e,t,i){var n=e.length;if(!t||t<0)t=0;if(!i||i<0||i>n)i=n;var o="";for(var a=t;a<i;++a){o+=K(e[a])}return o}function B(e,t,i){var n=e.slice(t,i);var o="";for(var a=0;a<n.length;a+=2){o+=String.fromCharCode(n[a]+n[a+1]*256)}return o}d.prototype.slice=function e(t,i){var n=this.length;t=~~t;i=i===undefined?n:~~i;if(t<0){t+=n;if(t<0)t=0}else if(t>n){t=n}if(i<0){i+=n;if(i<0)i=0}else if(i>n){i=n}if(i<t)i=t;var o;if(d.TYPED_ARRAY_SUPPORT){o=this.subarray(t,i);o.__proto__=d.prototype}else{var a=i-t;o=new d(a,undefined);for(var s=0;s<a;++s){o[s]=this[s+t]}}return o};function j(e,t,i){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>i)throw new RangeError("Trying to access beyond buffer length")}d.prototype.readUIntLE=function e(t,i,n){t=t|0;i=i|0;if(!n)j(t,i,this.length);var o=this[t];var a=1;var s=0;while(++s<i&&(a*=256)){o+=this[t+s]*a}return o};d.prototype.readUIntBE=function e(t,i,n){t=t|0;i=i|0;if(!n){j(t,i,this.length)}var o=this[t+--i];var a=1;while(i>0&&(a*=256)){o+=this[t+--i]*a}return o};d.prototype.readUInt8=function e(t,i){if(!i)j(t,1,this.length);return this[t]};d.prototype.readUInt16LE=function e(t,i){if(!i)j(t,2,this.length);return this[t]|this[t+1]<<8};d.prototype.readUInt16BE=function e(t,i){if(!i)j(t,2,this.length);return this[t]<<8|this[t+1]};d.prototype.readUInt32LE=function e(t,i){if(!i)j(t,4,this.length);return(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};d.prototype.readUInt32BE=function e(t,i){if(!i)j(t,4,this.length);return this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};d.prototype.readIntLE=function e(t,i,n){t=t|0;i=i|0;if(!n)j(t,i,this.length);var o=this[t];var a=1;var s=0;while(++s<i&&(a*=256)){o+=this[t+s]*a}a*=128;if(o>=a)o-=Math.pow(2,8*i);return o};d.prototype.readIntBE=function e(t,i,n){t=t|0;i=i|0;if(!n)j(t,i,this.length);var o=i;var a=1;var s=this[t+--o];while(o>0&&(a*=256)){s+=this[t+--o]*a}a*=128;if(s>=a)s-=Math.pow(2,8*i);return s};d.prototype.readInt8=function e(t,i){if(!i)j(t,1,this.length);if(!(this[t]&128))return this[t];return(255-this[t]+1)*-1};d.prototype.readInt16LE=function e(t,i){if(!i)j(t,2,this.length);var n=this[t]|this[t+1]<<8;return n&32768?n|4294901760:n};d.prototype.readInt16BE=function e(t,i){if(!i)j(t,2,this.length);var n=this[t+1]|this[t]<<8;return n&32768?n|4294901760:n};d.prototype.readInt32LE=function e(t,i){if(!i)j(t,4,this.length);return this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};d.prototype.readInt32BE=function e(t,i){if(!i)j(t,4,this.length);return this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};d.prototype.readFloatLE=function e(t,i){if(!i)j(t,4,this.length);return o.read(this,t,true,23,4)};d.prototype.readFloatBE=function e(t,i){if(!i)j(t,4,this.length);return o.read(this,t,false,23,4)};d.prototype.readDoubleLE=function e(t,i){if(!i)j(t,8,this.length);return o.read(this,t,true,52,8)};d.prototype.readDoubleBE=function e(t,i){if(!i)j(t,8,this.length);return o.read(this,t,false,52,8)};function U(e,t,i,n,o,a){if(!d.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<a)throw new RangeError('"value" argument is out of bounds');if(i+n>e.length)throw new RangeError("Index out of range")}d.prototype.writeUIntLE=function e(t,i,n,o){t=+t;i=i|0;n=n|0;if(!o){var a=Math.pow(2,8*n)-1;U(this,t,i,n,a,0)}var s=1;var r=0;this[i]=t&255;while(++r<n&&(s*=256)){this[i+r]=t/s&255}return i+n};d.prototype.writeUIntBE=function e(t,i,n,o){t=+t;i=i|0;n=n|0;if(!o){var a=Math.pow(2,8*n)-1;U(this,t,i,n,a,0)}var s=n-1;var r=1;this[i+s]=t&255;while(--s>=0&&(r*=256)){this[i+s]=t/r&255}return i+n};d.prototype.writeUInt8=function e(t,i,n){t=+t;i=i|0;if(!n)U(this,t,i,1,255,0);if(!d.TYPED_ARRAY_SUPPORT)t=Math.floor(t);this[i]=t&255;return i+1};function V(e,t,i,n){if(t<0)t=65535+t+1;for(var o=0,a=Math.min(e.length-i,2);o<a;++o){e[i+o]=(t&255<<8*(n?o:1-o))>>>(n?o:1-o)*8}}d.prototype.writeUInt16LE=function e(t,i,n){t=+t;i=i|0;if(!n)U(this,t,i,2,65535,0);if(d.TYPED_ARRAY_SUPPORT){this[i]=t&255;this[i+1]=t>>>8}else{V(this,t,i,true)}return i+2};d.prototype.writeUInt16BE=function e(t,i,n){t=+t;i=i|0;if(!n)U(this,t,i,2,65535,0);if(d.TYPED_ARRAY_SUPPORT){this[i]=t>>>8;this[i+1]=t&255}else{V(this,t,i,false)}return i+2};function H(e,t,i,n){if(t<0)t=4294967295+t+1;for(var o=0,a=Math.min(e.length-i,4);o<a;++o){e[i+o]=t>>>(n?o:3-o)*8&255}}d.prototype.writeUInt32LE=function e(t,i,n){t=+t;i=i|0;if(!n)U(this,t,i,4,4294967295,0);if(d.TYPED_ARRAY_SUPPORT){this[i+3]=t>>>24;this[i+2]=t>>>16;this[i+1]=t>>>8;this[i]=t&255}else{H(this,t,i,true)}return i+4};d.prototype.writeUInt32BE=function e(t,i,n){t=+t;i=i|0;if(!n)U(this,t,i,4,4294967295,0);if(d.TYPED_ARRAY_SUPPORT){this[i]=t>>>24;this[i+1]=t>>>16;this[i+2]=t>>>8;this[i+3]=t&255}else{H(this,t,i,false)}return i+4};d.prototype.writeIntLE=function e(t,i,n,o){t=+t;i=i|0;if(!o){var a=Math.pow(2,8*n-1);U(this,t,i,n,a-1,-a)}var s=0;var r=1;var l=0;this[i]=t&255;while(++s<n&&(r*=256)){if(t<0&&l===0&&this[i+s-1]!==0){l=1}this[i+s]=(t/r>>0)-l&255}return i+n};d.prototype.writeIntBE=function e(t,i,n,o){t=+t;i=i|0;if(!o){var a=Math.pow(2,8*n-1);U(this,t,i,n,a-1,-a)}var s=n-1;var r=1;var l=0;this[i+s]=t&255;while(--s>=0&&(r*=256)){if(t<0&&l===0&&this[i+s+1]!==0){l=1}this[i+s]=(t/r>>0)-l&255}return i+n};d.prototype.writeInt8=function e(t,i,n){t=+t;i=i|0;if(!n)U(this,t,i,1,127,-128);if(!d.TYPED_ARRAY_SUPPORT)t=Math.floor(t);if(t<0)t=255+t+1;this[i]=t&255;return i+1};d.prototype.writeInt16LE=function e(t,i,n){t=+t;i=i|0;if(!n)U(this,t,i,2,32767,-32768);if(d.TYPED_ARRAY_SUPPORT){this[i]=t&255;this[i+1]=t>>>8}else{V(this,t,i,true)}return i+2};d.prototype.writeInt16BE=function e(t,i,n){t=+t;i=i|0;if(!n)U(this,t,i,2,32767,-32768);if(d.TYPED_ARRAY_SUPPORT){this[i]=t>>>8;this[i+1]=t&255}else{V(this,t,i,false)}return i+2};d.prototype.writeInt32LE=function e(t,i,n){t=+t;i=i|0;if(!n)U(this,t,i,4,2147483647,-2147483648);if(d.TYPED_ARRAY_SUPPORT){this[i]=t&255;this[i+1]=t>>>8;this[i+2]=t>>>16;this[i+3]=t>>>24}else{H(this,t,i,true)}return i+4};d.prototype.writeInt32BE=function e(t,i,n){t=+t;i=i|0;if(!n)U(this,t,i,4,2147483647,-2147483648);if(t<0)t=4294967295+t+1;if(d.TYPED_ARRAY_SUPPORT){this[i]=t>>>24;this[i+1]=t>>>16;this[i+2]=t>>>8;this[i+3]=t&255}else{H(this,t,i,false)}return i+4};function q(e,t,i,n,o,a){if(i+n>e.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function z(e,t,i,n,a){if(!a){q(e,t,i,4,3.4028234663852886e38,-3.4028234663852886e38)}o.write(e,t,i,n,23,4);return i+4}d.prototype.writeFloatLE=function e(t,i,n){return z(this,t,i,true,n)};d.prototype.writeFloatBE=function e(t,i,n){return z(this,t,i,false,n)};function W(e,t,i,n,a){if(!a){q(e,t,i,8,1.7976931348623157e308,-1.7976931348623157e308)}o.write(e,t,i,n,52,8);return i+8}d.prototype.writeDoubleLE=function e(t,i,n){return W(this,t,i,true,n)};d.prototype.writeDoubleBE=function e(t,i,n){return W(this,t,i,false,n)};d.prototype.copy=function e(t,i,n,o){if(!n)n=0;if(!o&&o!==0)o=this.length;if(i>=t.length)i=t.length;if(!i)i=0;if(o>0&&o<n)o=n;if(o===n)return 0;if(t.length===0||this.length===0)return 0;if(i<0){throw new RangeError("targetStart out of bounds")}if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(o<0)throw new RangeError("sourceEnd out of bounds");if(o>this.length)o=this.length;if(t.length-i<o-n){o=t.length-i+n}var a=o-n;var s;if(this===t&&n<i&&i<o){for(s=a-1;s>=0;--s){t[s+i]=this[s+n]}}else if(a<1e3||!d.TYPED_ARRAY_SUPPORT){for(s=0;s<a;++s){t[s+i]=this[s+n]}}else{Uint8Array.prototype.set.call(t,this.subarray(n,n+a),i)}return a};d.prototype.fill=function e(t,i,n,o){if(typeof t==="string"){if(typeof i==="string"){o=i;i=0;n=this.length}else if(typeof n==="string"){o=n;n=this.length}if(t.length===1){var a=t.charCodeAt(0);if(a<256){t=a}}if(o!==undefined&&typeof o!=="string"){throw new TypeError("encoding must be a string")}if(typeof o==="string"&&!d.isEncoding(o)){throw new TypeError("Unknown encoding: "+o)}}else if(typeof t==="number"){t=t&255}if(i<0||this.length<i||this.length<n){throw new RangeError("Out of range index")}if(n<=i){return this}i=i>>>0;n=n===undefined?this.length:n>>>0;if(!t)t=0;var s;if(typeof t==="number"){for(s=i;s<n;++s){this[s]=t}}else{var r=d.isBuffer(t)?t:$(new d(t,o).toString());var l=r.length;for(s=0;s<n-i;++s){this[s+i]=r[s%l]}}return this};var G=/[^+\/0-9A-Za-z-_]/g;function Y(e){e=X(e).replace(G,"");if(e.length<2)return"";while(e.length%4!==0){e=e+"="}return e}function X(e){if(e.trim)return e.trim();return e.replace(/^\s+|\s+$/g,"")}function K(e){if(e<16)return"0"+e.toString(16);return e.toString(16)}function $(e,t){t=t||Infinity;var i;var n=e.length;var o=null;var a=[];for(var s=0;s<n;++s){i=e.charCodeAt(s);if(i>55295&&i<57344){if(!o){if(i>56319){if((t-=3)>-1)a.push(239,191,189);continue}else if(s+1===n){if((t-=3)>-1)a.push(239,191,189);continue}o=i;continue}if(i<56320){if((t-=3)>-1)a.push(239,191,189);o=i;continue}i=(o-55296<<10|i-56320)+65536}else if(o){if((t-=3)>-1)a.push(239,191,189)}o=null;if(i<128){if((t-=1)<0)break;a.push(i)}else if(i<2048){if((t-=2)<0)break;a.push(i>>6|192,i&63|128)}else if(i<65536){if((t-=3)<0)break;a.push(i>>12|224,i>>6&63|128,i&63|128)}else if(i<1114112){if((t-=4)<0)break;a.push(i>>18|240,i>>12&63|128,i>>6&63|128,i&63|128)}else{throw new Error("Invalid code point")}}return a}function Q(e){var t=[];for(var i=0;i<e.length;++i){t.push(e.charCodeAt(i)&255)}return t}function J(e,t){var i,n,o;var a=[];for(var s=0;s<e.length;++s){if((t-=2)<0)break;i=e.charCodeAt(s);n=i>>8;o=i%256;a.push(o);a.push(n)}return a}function Z(e){return n.toByteArray(Y(e))}function ee(e,t,i,n){for(var o=0;o<n;++o){if(o+i>=t.length||o>=e.length)break;t[o+i]=e[o]}return o}function te(e){return e!==e}}).call(this,i(17))},77:function(e,t,i){"use strict";t.byteLength=c;t.toByteArray=p;t.fromByteArray=m;var n=[];var o=[];var a=typeof Uint8Array!=="undefined"?Uint8Array:Array;var s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var r=0,l=s.length;r<l;++r){n[r]=s[r];o[s.charCodeAt(r)]=r}o["-".charCodeAt(0)]=62;o["_".charCodeAt(0)]=63;function d(e){var t=e.length;if(t%4>0){throw new Error("Invalid string. Length must be a multiple of 4")}var i=e.indexOf("=");if(i===-1)i=t;var n=i===t?0:4-i%4;return[i,n]}function c(e){var t=d(e);var i=t[0];var n=t[1];return(i+n)*3/4-n}function u(e,t,i){return(t+i)*3/4-i}function p(e){var t;var i=d(e);var n=i[0];var s=i[1];var r=new a(u(e,n,s));var l=0;var c=s>0?n-4:n;for(var p=0;p<c;p+=4){t=o[e.charCodeAt(p)]<<18|o[e.charCodeAt(p+1)]<<12|o[e.charCodeAt(p+2)]<<6|o[e.charCodeAt(p+3)];r[l++]=t>>16&255;r[l++]=t>>8&255;r[l++]=t&255}if(s===2){t=o[e.charCodeAt(p)]<<2|o[e.charCodeAt(p+1)]>>4;r[l++]=t&255}if(s===1){t=o[e.charCodeAt(p)]<<10|o[e.charCodeAt(p+1)]<<4|o[e.charCodeAt(p+2)]>>2;r[l++]=t>>8&255;r[l++]=t&255}return r}function f(e){return n[e>>18&63]+n[e>>12&63]+n[e>>6&63]+n[e&63]}function h(e,t,i){var n;var o=[];for(var a=t;a<i;a+=3){n=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(e[a+2]&255);o.push(f(n))}return o.join("")}function m(e){var t;var i=e.length;var o=i%3;var a=[];var s=16383;for(var r=0,l=i-o;r<l;r+=s){a.push(h(e,r,r+s>l?l:r+s))}if(o===1){t=e[i-1];a.push(n[t>>2]+n[t<<4&63]+"==")}else if(o===2){t=(e[i-2]<<8)+e[i-1];a.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")}return a.join("")}},78:function(e,t){t.read=function(e,t,i,n,o){var a,s;var r=o*8-n-1;var l=(1<<r)-1;var d=l>>1;var c=-7;var u=i?o-1:0;var p=i?-1:1;var f=e[t+u];u+=p;a=f&(1<<-c)-1;f>>=-c;c+=r;for(;c>0;a=a*256+e[t+u],u+=p,c-=8){}s=a&(1<<-c)-1;a>>=-c;c+=n;for(;c>0;s=s*256+e[t+u],u+=p,c-=8){}if(a===0){a=1-d}else if(a===l){return s?NaN:(f?-1:1)*Infinity}else{s=s+Math.pow(2,n);a=a-d}return(f?-1:1)*s*Math.pow(2,a-n)};t.write=function(e,t,i,n,o,a){var s,r,l;var d=a*8-o-1;var c=(1<<d)-1;var u=c>>1;var p=o===23?Math.pow(2,-24)-Math.pow(2,-77):0;var f=n?0:a-1;var h=n?1:-1;var m=t<0||t===0&&1/t<0?1:0;t=Math.abs(t);if(isNaN(t)||t===Infinity){r=isNaN(t)?1:0;s=c}else{s=Math.floor(Math.log(t)/Math.LN2);if(t*(l=Math.pow(2,-s))<1){s--;l*=2}if(s+u>=1){t+=p/l}else{t+=p*Math.pow(2,1-u)}if(t*l>=2){s++;l/=2}if(s+u>=c){r=0;s=c}else if(s+u>=1){r=(t*l-1)*Math.pow(2,o);s=s+u}else{r=t*Math.pow(2,u-1)*Math.pow(2,o);s=0}}for(;o>=8;e[i+f]=r&255,f+=h,r/=256,o-=8){}s=s<<o|r;d+=o;for(;d>0;e[i+f]=s&255,f+=h,s/=256,d-=8){}e[i+f-h]|=m*128}},79:function(e,t){var i={}.toString;e.exports=Array.isArray||function(e){return i.call(e)=="[object Array]"}},80:function(e,t,i){var n,o,a;(function(s){if(true){!(o=[i(1),i(12)],n=s,a=typeof n==="function"?n.apply(t,o):n,a!==undefined&&(e.exports=a))}else{}})(function(e){return e.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}})},81:function(t,i,n){"use strict";n.d(i,"a",function(){return a});function o(e,t){this.perform=e;this.data=t}class a{constructor(e){this.stack=[];this.current=-1;this.self=e}push(e,t){this.current++;this.stack.splice(this.current);this.stack.push(new o(e,t))}undo(){let t;if(this.current>=0){t=this.stack[this.current];t.perform.call(this.self,false,t.data);this.current--;return t.data}e.utils.log("Already at oldest change","warning")}redo(){let t;t=this.stack[this.current+1];if(t){t.perform.call(this.self,true,t.data);this.current++;return t.data}e.utils.log("Already at newest change","warning")}atOldestChange(){return this.current<0}atNewestChange(){return!this.stack[this.current+1]}invalidateAll(){this.stack=[];this.current=-1}get index(){return this.current}}},9:function(e,t,i){"use strict";(function(t){function i(e){return e instanceof t||e instanceof Date||e instanceof RegExp?true:false}function n(e){if(e instanceof t){var i=t.alloc?t.alloc(e.length):new t(e.length);e.copy(i);return i}else if(e instanceof Date){return new Date(e.getTime())}else if(e instanceof RegExp){return new RegExp(e)}else{throw new Error("Unexpected situation")}}function o(e){var t=[];e.forEach(function(e,a){if(typeof e==="object"&&e!==null){if(Array.isArray(e)){t[a]=o(e)}else if(i(e)){t[a]=n(e)}else{t[a]=s({},e)}}else{t[a]=e}});return t}function a(e,t){return t==="__proto__"?undefined:e[t]}var s=e.exports=function(){if(arguments.length<1||typeof arguments[0]!=="object"){return false}if(arguments.length<2){return arguments[0]}var e=arguments[0];var t=Array.prototype.slice.call(arguments,1);var r,l,d;t.forEach(function(t){if(typeof t!=="object"||t===null||Array.isArray(t)){return}Object.keys(t).forEach(function(d){l=a(e,d);r=a(t,d);if(r===e){return}else if(typeof r!=="object"||r===null){e[d]=r;return}else if(Array.isArray(r)){e[d]=o(r);return}else if(i(r)){e[d]=n(r);return}else if(typeof l!=="object"||l===null||Array.isArray(l)){e[d]=s({},r);return}else{e[d]=s(l,r);return}})});return e}}).call(this,i(76).Buffer)}});return t});