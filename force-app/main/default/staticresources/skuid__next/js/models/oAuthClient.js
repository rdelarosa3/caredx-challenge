skuid.runtime.registerApi("v2","models/oAuthClient",function(e){var t=function(e){var t={};function n(i){if(t[i]){return t[i].exports}var o=t[i]={i:i,l:false,exports:{}};e[i].call(o.exports,o,o.exports,n);o.l=true;return o.exports}n.m=e;n.c=t;n.d=function(e,t,i){if(!n.o(e,t)){Object.defineProperty(e,t,{enumerable:true,get:i})}};n.r=function(e){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(e,"__esModule",{value:true})};n.t=function(e,t){if(t&1)e=n(e);if(t&8)return e;if(t&4&&typeof e==="object"&&e&&e.__esModule)return e;var i=Object.create(null);n.r(i);Object.defineProperty(i,"default",{enumerable:true,value:e});if(t&2&&typeof e!="string")for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i};n.n=function(e){var t=e&&e.__esModule?function t(){return e["default"]}:function t(){return e};n.d(t,"a",t);return t};n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};n.p="";return n(n.s=439)}({439:function(t,n){if(e&&!e.platform){e.platform={getOAuthProxyUri:function e(){let t=window.location.origin;return t+(t.indexOf(".lightning.")>-1?"/skuid/oauthproxy.app":"/apex/skuid__oauthproxy")}}}let i=e.oauth=function(e){return i.use(e)};i.utils={extend:function e(t){Array.prototype.slice.call(arguments,1).forEach(function(e){if(Array.isArray(t)&&Array.isArray(e)){Array.prototype.push.apply(t,e)}else if(t&&(t instanceof Object||typeof t==="object")&&e&&(e instanceof Object||typeof e==="object")&&t!==e){for(let n in e){t[n]=i.utils.extend(t[n],e[n])}}else{if(Array.isArray(e)){e=e.slice(0)}t=e}});return t}};i.utils.extend(i,{settings:{redirect_uri:window.location.href.split("#")[0],response_type:"token",display:"popup",state:"",oauth_proxy:e.platform.getOAuthProxyUri(),timeout:2e4,popup:{resizable:1,scrollbars:1,width:500,height:550},scope:["basic"],scope_map:{basic:""},default_service:null,force:null,page_uri:window.location.href},services:{},use:function e(t){let n=Object.create(this);n.settings=Object.create(this.settings);if(t){n.settings.default_service=t}n.utils.Event.call(n);return n},init:function e(t,n){let i=this,o=this.utils;if(!t){return this.services}let r,s,a,l;for(r in t){if(t.hasOwnProperty(r)){s=t[r];a=s.name;l=s.type;if(typeof s!=="object"){t[r]={id:t[r]}}else if(a&&l&&a===r&&i.services[l]){t[r]=o.extend(i.services[l],s)}}}o.extend(this.services,t);if(n){o.extend(this.settings,n);if("redirect_uri"in n){this.settings.redirect_uri=o.url(n.redirect_uri).href}}return this},login:function t(){let n=this;let o=n.utils;let r=o.error;let s=o.Promise();let a=o.args({network:"s",options:"o",callback:"f"},arguments);let l;let u=o.diffKey(a.options,n.settings);let c=a.options=o.merge(n.settings,a.options||{});c.popup=o.merge(n.settings.popup,a.options.popup||{});a.network=a.network||n.settings.default_service;s.proxy.then(a.callback,a.callback);function f(e,t){i.emit(e,t)}let p=self.requestsInProgress;s.proxy.then(f.bind(this,"auth.login auth"),f.bind(this,"auth.failed auth"));if(typeof a.network!=="string"||!(a.network in n.services)){return s.reject(r("invalid_network","The provided network was not recognized"))}else if(p&&p[a.network]){return p[a.network]}let d=n.services[a.network];let h=o.globalEvent(function(e){let t;if(e){if(typeof e==="string"){try{t=JSON.parse(e)}catch(e){}}else if(typeof e==="object"){t=e}}else{t=r("cancelled","The authentication was not completed")}if(!t.error){o.store(t.network,t);s.fulfill({network:t.network,authResponse:t})}else{s.reject(t)}});let m=o.url(c.redirect_uri).href;let g=d.oauth.response_type||c.response_type;if(/\bcode\b/.test(g)&&!d.oauth.grant){g=g.replace(/\bcode\b/,"token")}a.qs=o.merge(u,{client_id:encodeURIComponent(d.id),response_type:encodeURIComponent(g),redirect_uri:encodeURIComponent(m),state:{client_id:d.id,network:a.network,display:c.display,callback:h,state:c.state,redirect_uri:m}});let y=o.store(a.network);let w=/[,\s]+/;let b=n.settings.scope?[n.settings.scope.toString()]:[];let _=o.merge(n.settings.scope_map,d.scope||{});if(c.scope){b.push(c.scope.toString())}if(y&&"scope"in y&&y.scope instanceof String){b.push(y.scope)}b=b.join(",").split(w);b=o.unique(b).filter(k);a.qs.state.scope=b.join(",");b=b.map(function(e){return e in _?_[e]:e});b=b.join(",").split(w);b=o.unique(b).filter(k);a.qs.scope=b.join(d.scope_delim||",");if(c.force===false){if(y&&"access_token"in y&&y.access_token&&"expires"in y&&y.expires>(new Date).getTime()/1e3){let e=o.diff((y.scope||"").split(w),(a.qs.state.scope||"").split(w));if(e.length===0){s.fulfill({unchanged:true,network:a.network,authResponse:y});return s}}}if(c.display==="page"&&c.page_uri){a.qs.state.page_uri=o.url(c.page_uri).href}if("login"in d&&typeof d.login==="function"){d.login(a)}if(!/\btoken\b/.test(g)||parseInt(d.oauth.version,10)<2||c.display==="none"&&d.oauth.grant&&y&&y.refresh_token){a.qs.state.oauth=d.oauth;a.qs.state.oauth_proxy=c.oauth_proxy}a.qs.state=encodeURIComponent(JSON.stringify(a.qs.state));if(parseInt(d.oauth.version,10)===1){l=o.qs(c.oauth_proxy,a.qs,x)}else if(c.display==="none"&&d.oauth.grant&&y&&y.refresh_token){a.qs.refresh_token=y.refresh_token;l=o.qs(c.oauth_proxy,a.qs,x)}else{l=o.qs(d.oauth.auth,a.qs,x)}f("auth.init",a);if(c.display==="none"){o.iframe(l,m)}else if(c.display==="popup"){let t=o.popup(l,m,c.popup);let n=setInterval(function(){if(!t||t.closed){clearInterval(n);if(s.state()==="pending"){let n;if(e&&e.platform.getName()!=="lightning"){n=r("cancelled","Login has been cancelled");n.network=a.network;s.reject(n)}if(!t){n=r("blocked","Popup was blocked");n.network=a.network;s.reject(n)}}}},100)}else{window.location=l}return s.proxy;function x(e){return e}function k(e){return!!e}},logout:function e(){let t=this;let n=t.utils;let o=n.error;let r=n.Promise();let s=n.args({name:"s",options:"o",callback:"f"},arguments);s.options=s.options||{};r.proxy.then(s.callback,s.callback);function a(e,t){i.emit(e,t)}r.proxy.then(a.bind(this,"auth.logout auth"),a.bind(this,"error"));s.name=s.name||this.settings.default_service;s.authResponse=n.store(s.name);if(s.name&&!(s.name in t.services)){r.reject(o("invalid_network","The network was unrecognized"))}else if(s.name&&s.authResponse){let e=function e(t){n.store(s.name,null);r.fulfill(i.utils.merge({network:s.name},t||{}))};let o={};if(s.options.force){let i=t.services[s.name].logout;if(i){if(typeof i==="function"){i=i(e,s)}if(typeof i==="string"){n.iframe(i);o.force=null;o.message="Logout success on providers site was indeterminate"}else if(i===undefined){return r.proxy}}}e(o)}else{r.reject(o("invalid_session","There was no session to remove"))}return r.proxy},getAuthResponse:function e(t){t=t||this.settings.default_service;return this.utils.store(t)||null},isSessionValid:function e(){let t=this.getAuthResponse.apply(this,arguments),n=(new Date).getTime()/1e3;return t&&t.access_token&&t.expires&&t.expires>n},events:{}});i.utils.extend(i.utils,{error:function e(t,n){return{error:{code:t,message:n}}},qs:function e(t,n,i){if(n){i=i||encodeURIComponent;for(let e in n){let o="([\\?\\&])"+e+"=[^\\&]*";let r=new RegExp(o);if(t.match(r)){t=t.replace(r,"$1"+e+"="+i(n[e]));delete n[e]}}}if(!this.isEmpty(n)){return t+(t.indexOf("?")>-1?"&":"?")+this.param(n,i)}return t},param:function e(t,n){let i;let o={};let r;if(typeof t==="string"){n=n||decodeURIComponent;r=t.replace(/^[\#\?]/,"").match(/([^=\/\&]+)=([^\&]+)/g);if(r){for(let e=0;e<r.length;e++){i=r[e].match(/([^=]+)=(.*)/);o[i[1]]=n(i[2])}}return o}else{n=n||encodeURIComponent;let e=t;o=[];for(let t in e){if(e.hasOwnProperty(t)){if(e.hasOwnProperty(t)){o.push([t,e[t]==="?"?"?":n(e[t])].join("="))}}}return o.join("&")}},store:function(){let e=["localStorage","sessionStorage"];let t=-1;let n="skuidOAuth";let i="test";let o;while(e[++t]){try{o=window[e[t]];o.setItem(i+t,t);o.removeItem(i+t);break}catch(e){o=null}}if(!o){let e=null;o={getItem:function t(n){n=n+"=";let i=document.cookie.split(";");for(let e=0;e<i.length;e++){let t=i[e].replace(/(^\s+|\s+$)/,"");if(t&&t.indexOf(n)===0){return t.substr(n.length)}}return e},setItem:function t(n,i){e=i;document.cookie=n+"="+i}};e=o.getItem(n)}function r(){let e={};try{e=JSON.parse(o.getItem(n))||{}}catch(e){}return e}function s(e){o.setItem(n,JSON.stringify(e))}return function(e,t){let n=r();let i=window.sessionStorage.getItem("storedSuccessRecently:"+e);if(window.cordova&&typeof t==="object"){if(!t.error){window.sessionStorage.setItem("storedSuccessRecently:"+e,Date.now()+"")}else{if(i&&Date.now()-Number.parseFloat(i)<60*1e3){return}}}if(e&&t===undefined){return n[e]||null}else if(e&&t===null){try{delete n[e]}catch(t){n[e]=null}}else if(e){n[e]=t}else{return n}s(n);return n||null}}(),append:function e(t,n,i){let o=typeof t==="string"?document.createElement(t):t;if(typeof n==="object"){if("tagName"in n){i=n}else{for(let e in n){if(n.hasOwnProperty(e)){if(typeof n[e]==="object"){for(let t in n[e]){if(n[e].hasOwnProperty(t)){o[e][t]=n[e][t]}}}else if(e==="html"){o.innerHTML=n[e]}else if(!/^on/.test(e)){o.setAttribute(e,n[e])}else{o[e]=n[e]}}}}}if(i==="body"){(function e(){if(document.body){document.body.appendChild(o)}else{setTimeout(e,16)}})()}else if(typeof i==="object"){i.appendChild(o)}else if(typeof i==="string"){document.getElementsByTagName(i)[0].appendChild(o)}return o},iframe:function e(t){this.append("iframe",{src:t,style:{position:"absolute",left:"-1000px",bottom:0,height:"1px",width:"1px"}},"body")},merge:function e(){let t=Array.prototype.slice.call(arguments);t.unshift({});return this.extend.apply(null,t)},args:function e(t,n){let i={};let o=0;let r=null;let s=null;for(s in t){if(t.hasOwnProperty(s)){break}}if(n.length===1&&typeof n[0]==="object"&&t[s]!="o!"){for(s in n[0]){if(t.hasOwnProperty(s)){if(s in t){return n[0]}}}}for(s in t){if(t.hasOwnProperty(s)){r=typeof n[o];if(typeof t[s]==="function"&&t[s].test(n[o])||typeof t[s]==="string"&&(t[s].indexOf("s")>-1&&r==="string"||t[s].indexOf("o")>-1&&r==="object"||t[s].indexOf("i")>-1&&r==="number"||t[s].indexOf("a")>-1&&r==="object"||t[s].indexOf("f")>-1&&r==="function")){i[s]=n[o++]}else if(typeof t[s]==="string"&&t[s].indexOf("!")>-1){return false}}}return i},url:function e(t){if(!t){return window.location}else if(window.URL&&URL instanceof Function&&URL.length!==0){return new URL(t,window.location)}else{let e=document.createElement("a");e.href=t;return e.cloneNode(false)}},diff:function e(t,n){return n.filter(function(e){return t.indexOf(e)===-1})},diffKey:function e(t,n){if(t||!n){let e={};for(let i in t){if(!(i in n)){e[i]=t[i]}}return e}return t},unique:function e(t){if(!Array.isArray(t)){return[]}return t.filter(function(e,n){return t.indexOf(e)===n})},isEmpty:function e(t){if(!t)return true;if(Array.isArray(t)){return!t.length}else if(typeof t==="object"){for(let e in t){if(t.hasOwnProperty(e)){return false}}}return true},Promise:function t(){const n=e.utils.Deferred();n.proxy=n.promise();n.fulfill=n.resolve;return n},Event:function e(){let t=/[\s\,]+/;this.parent={events:this.events,findEvents:this.findEvents,parent:this.parent,utils:this.utils};this.events={};this.on=function(e,n){if(n&&typeof n==="function"){let i=e.split(t);for(let e=0;e<i.length;e++){this.events[i[e]]=[n].concat(this.events[i[e]]||[])}}return this};this.off=function(e,t){this.findEvents(e,function(e,n){if(!t||this.events[e][n]===t){this.events[e][n]=null}});return this};this.emit=function(e){let t=Array.prototype.slice.call(arguments,1);t.push(e);let n=function n(i,o){t[t.length-1]=i==="*"?e:i;this.events[i][o].apply(this,t)};let i=this;while(i&&i.findEvents){i.findEvents(e+",*",n);i=i.parent}return this};this.emitAfter=function(){let e=this;let t=arguments;setTimeout(function(){e.emit.apply(e,t)},0);return this};this.findEvents=function(e,n){let i=e.split(t);for(let e in this.events){if(this.events.hasOwnProperty(e)){if(i.indexOf(e)>-1){for(let t=0;t<this.events[e].length;t++){if(this.events[e][t]){n.call(this,e,t)}}}}}};return this},globalEvent:function e(t,n){n=n||"_hellojs_"+parseInt(Math.random()*1e12,10).toString(36);window[n]=function(){try{if(t.apply(this,arguments)){delete window[n]}}catch(e){console.error(e)}};return n},popup:function e(t,n,i){let o=document.documentElement;if(i.height){let e=window.screenTop!==undefined?window.screenTop:screen.top;let t=screen.height||window.innerHeight||o.clientHeight;i.top=i.top?i.top:parseInt((t-i.height)/2,10)+e}if(i.width){let e=window.screenLeft!==undefined?window.screenLeft:screen.left;let t=screen.width||window.innerWidth||o.clientWidth;i.left=i.left?i.left:parseInt((t-i.width)/2,10)+e}let r=[];Object.keys(i).forEach(function(e){let t=i[e];r.push(e+(t!==null?"="+t:""))});if(navigator.userAgent.indexOf("Safari")!==-1&&navigator.userAgent.indexOf("Chrome")===-1){t=n+"#oauth_redirect="+encodeURIComponent(encodeURIComponent(t))}let e=window.open(t,"_blank",r.join(","));if(e&&e.focus){e.focus()}return e},responseHandler:function e(t,n){let i=this;let o;let r=t.location;o=i.param(r.search);if(o&&o.state&&(o.code||o.oauth_token)){let e=JSON.parse(o.state);o.redirect_uri=e.redirect_uri||r.href.replace(/[\?\#].*$/,"");let t=i.qs(e.oauth_proxy,o);r.assign(t);return}o=i.merge(i.param(r.search||""),i.param(r.hash||""));if(o&&"state"in o){try{let e=JSON.parse(o.state);i.extend(o,e)}catch(e){let t=decodeURIComponent(o.state);try{let e=JSON.parse(t);i.extend(o,e)}catch(e){console.error("Could not decode state parameter")}}if("access_token"in o&&o.access_token&&o.network){if(!o.expires_in||parseInt(o.expires_in,10)===0){o.expires_in=0}o.expires_in=parseInt(o.expires_in,10);o.expires=(new Date).getTime()/1e3+(o.expires_in||60*60*24*365);s(o,t,n)}else if("error"in o&&o.error&&o.network){o.error={code:o.error,message:o.error_message||o.error_description};s(o,t,n)}else if(o.callback&&o.callback in n){let e="result"in o&&o.result?JSON.parse(o.result):false;a(n,o.callback)(e);l()}if(o.page_uri){r.assign(o.page_uri)}}else if("oauth_redirect"in o){r.assign(decodeURIComponent(o.oauth_redirect));return}function s(e,t,n){let o=e.callback;let r=e.network;i.store(r,e);if("display"in e&&e.display==="page"){return}if(n&&o&&o in n){try{delete e.callback}catch(e){}i.store(r,e);let t=JSON.stringify(e);try{a(n,o)(t)}catch(e){}}l()}function a(e,t){if(t.indexOf("_hellojs_")!==0){return function(){throw Error("Could not execute callback "+t)}}return e[t]}function l(){if(t.frameElement){n.document.body.removeChild(t.frameElement)}else{try{t.close()}catch(e){}if(t.addEventListener){t.addEventListener("load",function(){t.close()})}}}}});i.utils.Event.call(i);(function(e){let t={};let n={};e.on("auth.login, auth.logout",function(n){if(n&&typeof n==="object"&&n.network){t[n.network]=e.utils.store(n.network)||{}}});(function i(){let o=(new Date).getTime()/1e3;let r;let s=function t(n){e.emit("auth."+n,{network:name,authResponse:r})};for(let i in e.services){if(e.services.hasOwnProperty(i)){if(!e.services[i].id){continue}r=e.utils.store(i)||{};let a=e.services[i];let l=t[i]||{};if(r&&"callback"in r){let t=r.callback;try{delete r.callback}catch(e){}e.utils.store(i,r);try{window[t](r)}catch(e){}}if(r&&"expires"in r&&r.expires<o){let t=a.refresh||r.refresh_token;if(t&&(!(i in n)||n[i]<o)){e.emit("notice",i+" has expired trying to resignin");e.login(i,{display:"none",force:false});n[i]=o+600}else if(!t&&!(i in n)){s("expired");n[i]=true}continue}else if(l.access_token===r.access_token&&l.expires===r.expires){continue}else if(!r.access_token&&l.access_token){s("logout")}else if(r.access_token&&!l.access_token){s("login")}else if(r.expires!==l.expires){s("update")}t[i]=r;if(i in n){delete n[i]}}}setTimeout(i,1e3)})()})(i);i.api=function(){let e=this;let t=e.utils;let n=t.error;let i=t.Promise();let o=t.args({path:"s!",query:"o",method:"s",data:"o",timeout:"i",callback:"f"},arguments);o.method=(o.method||"get").toLowerCase();o.headers=o.headers||{};o.query=o.query||{};if(o.method==="get"||o.method==="delete"){t.extend(o.query,o.data);o.data={}}let r=o.data=o.data||{};i.then(o.callback,o.callback);if(!o.path){return i.reject(n("invalid_path","Missing the path parameter from the request"))}o.path=o.path.replace(/^\/+/,"");let s=(o.path.split(/[\/\:]/,2)||[])[0].toLowerCase();if(s in e.services){o.network=s;let e=new RegExp("^"+s+":?/?");o.path=o.path.replace(e,"")}o.network=e.settings.default_service=o.network||e.settings.default_service;let a=e.services[o.network];if(!a){return i.reject(n("invalid_network","Could not match the service requested: "+o.network))}if(!(!(o.method in a)||!(o.path in a[o.method])||a[o.method][o.path]!==false)){return i.reject(n("invalid_path","The provided path is not available on the selected network"))}if(!o.oauth_proxy){o.oauth_proxy=e.settings.oauth_proxy}if(!("proxy"in o)){o.proxy=o.oauth_proxy&&a.oauth&&parseInt(a.oauth.version,10)===1}if(!("timeout"in o)){o.timeout=e.settings.timeout}if(!("formatResponse"in o)){o.formatResponse=true}o.authResponse=e.getAuthResponse(o.network);if(o.authResponse&&o.authResponse.access_token){o.query.access_token=o.authResponse.access_token}let l=o.path;let u;o.options=t.clone(o.query);o.data=t.clone(r);let c=a[{delete:"del"}[o.method]||o.method]||{};if(o.method==="get"){let e=l.split(/[\?#]/)[1];if(e){t.extend(o.query,t.param(e));l=l.replace(/\?.*?(#|$)/,"$1")}}if(u=l.match(/#(.+)/,"")){l=l.split("#")[0];o.path=u[1]}else if(l in c){o.path=l;l=c[l]}else if("default"in c){l=c["default"]}o.redirect_uri=e.settings.redirect_uri;o.xhr=a.xhr;o.jsonp=a.jsonp;o.form=a.form;if(typeof l==="function"){l(o,f)}else{f(l)}return i.proxy;function f(e){e=e.replace(/\@\{([a-z\_\-]+)(\|.*?)?\}/gi,function(e,t,r){let s=r?r.replace(/^\|/,""):"";if(t in o.query){s=o.query[t];delete o.query[t]}else if(o.data&&t in o.data){s=o.data[t];delete o.data[t]}else if(!r){i.reject(n("missing_attribute","The attribute "+t+" is missing from the request"))}return s});if(!e.match(/^https?:\/\//)){e=a.base+e}o.url=e;t.request(o,function(e,n){if(!o.formatResponse){if(typeof n==="object"?n.statusCode>=400:typeof e==="object"&&"error"in e){i.reject(e)}else{i.fulfill(e)}return}if(e===true){e={success:true}}else if(!e){e={}}if(o.method==="delete"){e=!e||t.isEmpty(e)?{success:true}:e}if(a.wrap&&(o.path in a.wrap||"default"in a.wrap)){let t=o.path in a.wrap?o.path:"default";let i=a.wrap[t](e,n,o);if(i){e=i}}if(e&&"paging"in e&&e.paging.next){if(e.paging.next[0]==="?"){e.paging.next=o.path+e.paging.next}else{e.paging.next+="#"+o.path}}if(!e||"error"in e){i.reject(e)}else{i.fulfill(e)}})}};i.utils.extend(i.utils,{request:function e(t,n){let i=this;let o=i.error;if(!i.isEmpty(t.data)&&!("FileList"in window)&&i.hasBinary(t.data)){t.xhr=false;t.jsonp=false}let r=this.request_cors(function(){return t.xhr===undefined||t.xhr&&(typeof t.xhr!=="function"||t.xhr(t,t.query))});if(r){a(t,function(e){let o=i.xhr(t.method,e,t.headers,t.data,n);o.onprogress=t.onprogress||null;if(o.upload&&t.onuploadprogress){o.upload.onprogress=t.onuploadprogress}});return}let s=t.query;t.query=i.clone(t.query);t.callbackID=i.globalEvent();if(t.jsonp!==false){t.query.callback=t.callbackID;if(typeof t.jsonp==="function"){t.jsonp(t,t.query)}if(t.method==="get"){a(t,function(e){i.jsonp(e,n,t.callbackID,t.timeout)});return}else{t.query=s}}if(t.form!==false){t.query.redirect_uri=t.redirect_uri;t.query.state=JSON.stringify({callback:t.callbackID});let e;if(typeof t.form==="function"){e=t.form(t,t.query)}if(t.method==="post"&&e!==false){a(t,function(o){i.post(o,t.data,e,n,t.callbackID,t.timeout)});return}}n(o("invalid_request","There was no mechanism for handling this request"));return;function a(e,t){let n;if(e.authResponse&&e.authResponse.oauth&&parseInt(e.authResponse.oauth.version,10)===1){n=e.query.access_token;delete e.query.access_token;e.proxy=true}if(e.data&&(e.method==="get"||e.method==="delete")){i.extend(e.query,e.data);e.data=null}let o=i.qs(e.url,e.query);if(e.proxy){o=i.qs(e.oauth_proxy,{path:o,access_token:n||"",then:e.proxy_response_type||(e.method.toLowerCase()==="get"?"redirect":"proxy"),method:e.method.toLowerCase(),suppress_response_codes:true})}t(o)}},request_cors:function e(t){return"withCredentials"in new XMLHttpRequest&&t()},domInstance:function e(t,n){let i="HTML"+(t||"").replace(/^[a-z]/,function(e){return e.toUpperCase()})+"Element";if(!n){return false}if(window[i]){return n instanceof window[i]}else if(window.Element){return n instanceof window.Element&&(!t||n.tagName&&n.tagName.toLowerCase()===t)}else{return!(n instanceof Object||n instanceof Array||n instanceof String||n instanceof Number)&&n.tagName&&n.tagName.toLowerCase()===t}},clone:function e(t){if(t===null||typeof t!=="object"||t instanceof Date||"nodeName"in t||this.isBinary(t)||typeof FormData==="function"&&t instanceof FormData){return t}if(Array.isArray(t)){return t.map(this.clone.bind(this))}let e={};for(let n in t){e[n]=this.clone(t[n])}return e},xhr:function e(t,n,i,o,r){let s=new XMLHttpRequest;let a=this.error;let l=false;if(t==="blob"){l=t;t="GET"}t=t.toUpperCase();s.onload=function(){let e=s.response;try{e=JSON.parse(s.responseText)}catch(t){if(s.status===401){e=a("access_denied",s.statusText)}}let n=c(s.getAllResponseHeaders());n.statusCode=s.status;r(e||(t==="GET"?a("empty_response","Could not get resource"):{}),n)};s.onerror=function(){let e=s.responseText;try{e=JSON.parse(s.responseText)}catch(e){}r(e||a("access_denied","Could not get resource"))};let u;if(t==="GET"||t==="DELETE"){o=null}i["X-HTTP-Verb"]=t;s.open(t,n,true);if(l){if("responseType"in s){s.responseType=l}else{s.overrideMimeType("text/plain; charset=x-user-defined")}}if(i){for(u in i){s.setRequestHeader(u,i[u])}}s.send(o);return s;function c(e){let t={};let n=/([a-z\-]+):\s?(.*);?/gi;let i;while(i=n.exec(e)){t[i[1]]=i[2]}return t}},jsonp:function e(t,n,i,o){let r=this;let s=r.error;let a=0;let l=document.getElementsByTagName("head")[0];let u;let c=s("server_error","server_error");let f=function e(){if(!a++){window.setTimeout(function(){n(c);l.removeChild(p)},0)}};i=r.globalEvent(function(e){c=e;return true},i);t=t.replace(new RegExp("=\\?(&|$)"),"="+i+"$1");let p=r.append("script",{id:i,name:i,src:t,async:true,onload:f,onerror:f,onreadystatechange:function e(){if(/loaded|complete/i.test(this.readyState)){f()}}});if(window.navigator.userAgent.toLowerCase().indexOf("opera")>-1){u=r.append("script",{text:"document.getElementById('"+i+"').onerror();"});p.async=false}if(o){window.setTimeout(function(){c=s("timeout","timeout");f()},o)}l.appendChild(p);if(u){l.appendChild(u)}},post:function e(t,n,i,o,r,s){let a=this;let l=a.error;let u=document;let c=null;let f=[];let p;let d=0;let h=null;let m=0;let g=function e(t){if(!m++){o(t)}};a.globalEvent(g,r);let y;try{y=u.createElement('<iframe name="'+r+'">')}catch(e){y=u.createElement("iframe")}y.name=r;y.id=r;y.style.display="none";if(i&&i.callbackonload){y.onload=function(){g({response:"posted",message:"Content was posted"})}}if(s){setTimeout(function(){g(l("timeout","The post operation timed out"))},s)}u.body.appendChild(y);if(a.domInstance("form",n)){c=n.form;for(d=0;d<c.elements.length;d++){if(c.elements[d]!==n){c.elements[d].setAttribute("disabled",true)}}n=c}if(a.domInstance("form",n)){c=n;for(d=0;d<c.elements.length;d++){if(!c.elements[d].disabled&&c.elements[d].type==="file"){c.encoding=c.enctype="multipart/form-data";c.elements[d].setAttribute("name","file")}}}else{for(h in n)if(n.hasOwnProperty(h)){if(a.domInstance("input",n[h])&&n[h].type==="file"){c=n[h].form;c.encoding=c.enctype="multipart/form-data"}}if(!c){c=u.createElement("form");u.body.appendChild(c);p=c}let e;for(h in n)if(n.hasOwnProperty(h)){let t=a.domInstance("input",n[h])||a.domInstance("textArea",n[h])||a.domInstance("select",n[h]);if(!t||n[h].form!==c){let i=c.elements[h];if(e){if(!(i instanceof NodeList)){i=[i]}for(d=0;d<i.length;d++){i[d].parentNode.removeChild(i[d])}}e=u.createElement("input");e.setAttribute("type","hidden");e.setAttribute("name",h);if(t){e.value=n[h].value}else if(a.domInstance(null,n[h])){e.value=n[h].innerHTML||n[h].innerText}else{e.value=n[h]}c.appendChild(e)}else if(t&&n[h].name!==h){n[h].setAttribute("name",h);n[h].name=h}}for(d=0;d<c.elements.length;d++){e=c.elements[d];if(!(e.name in n)&&e.getAttribute("disabled")!==true){e.setAttribute("disabled",true);f.push(e)}}}c.setAttribute("method","POST");c.setAttribute("target",r);c.target=r;c.setAttribute("action",t);setTimeout(function(){c.submit();setTimeout(function(){try{if(p){p.parentNode.removeChild(p)}}catch(e){try{console.error("HelloJS: could not remove iframe")}catch(e){}}for(let e=0;e<f.length;e++){if(f[e]){f[e].setAttribute("disabled",false);f[e].disabled=false}}},0)},100)},hasBinary:function e(t){for(let e in t)if(t.hasOwnProperty(e)){if(this.isBinary(t[e])){return true}}return false},isBinary:function e(t){return t instanceof Object&&(this.domInstance("input",t)&&t.type==="file"||"FileList"in window&&t instanceof window.FileList||"File"in window&&t instanceof window.File||"Blob"in window&&t instanceof window.Blob)}});i.utils.responseHandler(window,window.opener||window.parent);(function(){if(!(/^file:\/{3}[^\/]/.test(window.location.href)&&window.cordova)){return}i.utils.iframe=function(e,t){i.utils.popup(e,t,{hidden:"yes"})};let e=i.utils.popup;i.utils.popup=function(t,n,o){let r=e.call(this,t,n,o);try{if(r&&r.addEventListener){let e=i.utils.url(n);let t=e.origin||e.protocol+"//"+e.hostname;r.addEventListener("loadstart",function(e){setTimeout(function(){let n=e.url;if(n.indexOf(t)!==0){return}let o=i.utils.url(n);let s={location:{assign:function e(t){r.executeScript({code:'window.location = "'+t+';"'})},search:o.search,hash:o.hash,href:o.href},close:function e(){if(r.close){r.close();try{r.closed=true}catch(e){}}}};i.utils.responseHandler(s,window)},1500)})}}catch(e){}return r}})();(function(e){e.init({dropbox:{login:function e(t){t.options.window_width=1e3;t.options.window_height=1e3;t.qs.response_type="code"},oauth:{version:2,auth:"https://www.dropbox.com/1/oauth2/authorize",grant:"https://api.dropbox.com/1/oauth2/token"},base:"https://api.dropbox.com/1/",root:"sandbox",form:function e(t,n){delete n.state;delete n.redirect_uri}},facebook:{name:"Facebook",login:function e(t){if(t.options.auth_type){t.qs.auth_type=t.options.auth_type}t.options.window_width=580;t.options.window_height=400},oauth:{version:2,auth:"https://www.facebook.com/dialog/oauth/",grant:"https://graph.facebook.com/oauth/access_token"},refresh:true,logout:function t(n){let i=e.utils.globalEvent(n);let o=encodeURIComponent(e.settings.redirect_uri+"?"+e.utils.param({callback:i,result:JSON.stringify({force:true}),state:"{}"}));let r=(e.utils.store("facebook")||{}).access_token;e.utils.iframe("https://www.facebook.com/logout.php?next="+o+"&access_token="+r);if(!r){return false}},scope:{basic:"public_profile",email:"email",birthday:"user_birthday",events:"user_events",photos:"user_photos,user_videos",videos:"user_photos,user_videos",friends:"user_friends",files:"user_photos,user_videos",publish_files:"user_photos,user_videos,publish_actions",publish:"publish_actions",offline_access:"offline_access"},base:"https://graph.facebook.com/",form:function e(){return{callbackonload:true}}},github:{name:"GitHub",oauth:{version:2,auth:"https://github.com/login/oauth/authorize",grant:"https://github.com/login/oauth/access_token",response_type:"code"},scope:{basic:"",email:"user:email"}},google:{name:"Google Plus",login:function e(t){if(t.qs.response_type==="code"){t.qs.access_type="offline"}},oauth:{version:2,auth:"https://accounts.google.com/o/oauth2/auth",grant:"https://accounts.google.com/o/oauth2/token"},scope:{basic:"https://www.googleapis.com/auth/plus.me profile",email:"email",birthday:"",events:"",photos:"https://picasaweb.google.com/data/",videos:"http://gdata.youtube.com",friends:"https://www.google.com/m8/feeds, https://www.googleapis.com/auth/plus.login",files:"https://www.googleapis.com/auth/drive.readonly",publish:"",publish_files:"https://www.googleapis.com/auth/drive",create_event:"",offline_access:""},scope_delim:" ",base:"https://www.googleapis.com/"},salesforce:{name:"Salesforce",oauth:{version:2,auth:"https://login.salesforce.com/services/oauth2/authorize",grant:"https://login.salesforce.com/services/oauth2/token",response_type:"code"},refresh:true,scope:{basic:""},scope_delim:" "}})})(i)}});return t});