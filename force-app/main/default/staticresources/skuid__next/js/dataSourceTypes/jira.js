skuid.runtime.registerApi("v2","dataSourceTypes/jira",function(e){var t=function(e){var t={};function a(s){if(t[s]){return t[s].exports}var i=t[s]={i:s,l:false,exports:{}};e[s].call(i.exports,i,i.exports,a);i.l=true;return i.exports}a.m=e;a.c=t;a.d=function(e,t,s){if(!a.o(e,t)){Object.defineProperty(e,t,{enumerable:true,get:s})}};a.r=function(e){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(e,"__esModule",{value:true})};a.t=function(e,t){if(t&1)e=a(e);if(t&8)return e;if(t&4&&typeof e==="object"&&e&&e.__esModule)return e;var s=Object.create(null);a.r(s);Object.defineProperty(s,"default",{enumerable:true,value:e});if(t&2&&typeof e!="string")for(var i in e)a.d(s,i,function(t){return e[t]}.bind(null,i));return s};a.n=function(e){var t=e&&e.__esModule?function t(){return e["default"]}:function t(){return e};a.d(t,"a",t);return t};a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};a.p="";return a(a.s=718)}({718:function(t,a){(function(e){let t=e.$,a=e.dataSource,s=e.utils,i=a.utils,l=e.constants,n=l.HTTP_VERBS,r=l.DISPLAY_TYPES,o=l.MIME_TYPES,d="/rest/api/2",u="JIRA",c="x-metadata",y=r.BOOLEAN,p=r.DATETIME,m=r.NUMBER,f=r.STRING,b=r.TEXTAREA,I=r.IMAGE,T=r.COMBOBOX,h=r.RICHTEXT,v=l.DATASOURCE.SEARCH_CONDITION,g=o.JSON,q=n.GET,S=n.PUT,j=n.POST,A=n.DELETE,N="Issue",k=[{id:"id",label:"Id",editable:false,createable:false},{id:"key",label:"Key",editable:false},{id:"assigneeKey",label:"Assignee Key",synonym:"fields.assignee.key"},{id:"assigneeName",label:"Assignee Name",synonym:"fields.assignee.name"},{id:"assigneeEmail",label:"Assignee Email",synonym:"fields.assignee.emailAddress"},{id:"assigneeDisplayName",label:"Assignee Display Name",synonym:"fields.assignee.displayName"},{id:"assigneeActive",label:"Assignee Active",synonym:"fields.assignee.active"},{id:"issueTypeId",label:"Issue Type Id",synonym:"fields.issuetype.id"},{id:"issueTypeName",label:"Issue Type Name",synonym:"fields.issuetype.name",required:true},{id:"issueTypeSubTask",label:"Issue Type Sub Task",displaytype:y,synonym:"fields.issuetype.subtask"},{id:"priorityId",label:"Priority Id",synonym:"fields.priority.id"},{id:"priorityName",label:"Priority Name",synonym:"fields.priority.name"},{id:"projectId",label:"Project Id",synonym:"fields.project.id",required:true},{id:"projectKey",label:"Project Key",synonym:"fields.project.key"},{id:"projectName",label:"Project Name",synonym:"fields.project.name"},{id:"projectAvatar",label:"Project Avatar",displaytype:I,synonym:"fields.project.avatarUrls.48x48"},{id:"reporterKey",label:"Reporter Key",synonym:"fields.reporter.key"},{id:"reporterName",label:"Reporter Name",synonym:"fields.reporter.name"},{id:"reporterEmail",label:"Reporter Email",synonym:"fields.reporter.emailAddress"},{id:"reporterDisplayName",label:"Reporter Display Name",synonym:"fields.reporter.displayName"},{id:"reporterActive",label:"Reporter Active",synonym:"fields.reporter.active"},{id:"statusId",label:"Status Id",synonym:"fields.status.id"},{id:"statusName",label:"Status Name",synonym:"fields.status.name"},{id:"statusDescription",label:"Status Description",synonym:"fields.status.description"},{id:"statusIconUrl",label:"Status Icon Url",displaytype:I,synonym:"fields.status.iconUrl"},{id:"updateStatus",label:"Update Status",displaytype:T}],P={"=":"=","!=":"!=",gt:">",lt:"<",gte:">=",lte:"<=",contains:"~","does not contain":"!~",in:"IN","not in":"NOT IN"},C=function e(t,a,i){i=i||"=";if(!t)return;if(t.indexOf("customfield")>-1){let e=t.split("_");t="cf[".concat(e[1],"]")}if(P[i]){if(i==="in"||i==="not in"){return t+" "+P[i]+" ('"+a.join("','")+"')"}else{return t+" "+P[i]+" "+(s.isString(a)?"'".concat(a,"'"):a)}}},L=function e(t,a){let s=a.model,l=i.getModelMergeConditions(s,a,{urlEncode:false});if(s.objectName==="Component"){if(l["component"]){a.request.url+="/component/"+l["component"]}else a.request.url+="/project/"+l["project"]+"/components"}else if(s.objectName==="Sprint"){if(l["jqlquery"])a.request.url+=" AND "+l["jqlquery"]}else if(s.objectName===N){let e;if(s.paginationToken&&a.addOnly){a.request.url+="&startAt=".concat(s.paginationToken)}if(s.paginationToken&&!a.addOnly){delete s.paginationToken}if(l["jqlquery"])e=l["jqlquery"];else if(!s.conditionLogic)e="";else{s.conditionLogic=s.conditionLogic.replace(/\)AND\(/g,") AND (");s.conditionLogic=s.conditionLogic.replace(/\)OR\(/g,") OR (");let t=s.conditions.find(e=>e.name===v);if(t&&t.value===""){s.conditionLogic=s.conditionLogic.substring(0,s.conditionLogic.lastIndexOf("AND"))}e=s.conditionLogic;l=s.conditions;for(let t=0;t<l.length;t++){if(!l[t].inactive){e=e.replace(t+1,"{{".concat(t+1,"}}"))}else{e=e.replace(t+1,"created != NULL")}}for(let t=0;t<l.length;t++){let a=l[t];if(a.inactive){continue}if(a.name===v){if(a.value==="")continue;a.field="text";a.operator="contains"}let s=C(a.field,a.value||a.values,a.operator);if(s)e=e.replace("{{".concat(t+1,"}}"),s)}}if(e)a.request.url+="&jql="+e}},D=function e(a,i){let l=i.model;if(l.objectName===N){let e=l.fieldsMap,a={};t.each(i.request.data,function(t,i){let l=e[t].synonym;if(e[t].displaytype===m)i=parseInt(i,10);if(l){s.setObjectProperty(a,l,i)}else a[t]=i});if(s.size(a)){i.request.data=a}}else if(l.objectName==="IssueLink"){let e=i.request.data;i.request.data={type:{id:e.createLinkType},inwardIssue:{key:e.createInwardIssue},outwardIssue:{key:e.createOutwardIssue}}}},E=function e(a,i){let l=i.model;if(l.objectName===N){let e=l.fieldsMap,a={};t.each(i.request.data,function(t,i){let l=e[t].synonym;if(e[t].displaytype===m)i=parseInt(i,10);if(l){s.setObjectProperty(a,l,i)}else a[t]=i});if(s.size(a)){i.request.data=a}}};if(a.getDataSourceType(u))return;new a.core.RESTDataSourceTypeBase({name:u,coerceRequest:function e(t){let a=this,s=t.type;t.request.url=d+t.request.url;if(s==="query"||s==="search")L(a,t);if(s==="insert")D(a,t);if(s==="update")E(a,t)},preSaveHook:function e(t){let a=this,i=t.request,l=i.data,n=t.row;if(l&&l.updateStatus){return a.makeRequest(t.model,{type:"update",method:j,model:t.model,request:{url:"".concat(d,"/issue/").concat(n.key,"/transitions"),method:j,contentType:g,headers:{Accept:g},body:{transition:{id:l.updateStatus}}}}).then(function(){if(s.size(l)===1){i.data.fields={summary:n.fields.summary}}delete t.request.data.updateStatus})}else return s.resolve()},getPaginationToken:function e(t,a,s,i){if(i.objectName!==N)return;let l=s.data.length;if(l===50){return i.paginationToken?i.paginationToken+50:51}},parseSuccessfulLoadResponse:i.parseSuccessfulLoadResponseWithSynonyms,queryEntityMetadata:function e(a){const s=this,l=i.queryEntityMetadataStatic.call(s,a),n=a.objectName;if(n!==N)return l;const r=this.getEntityMetadataCacheKey(a),o=this.prop(c)[r],u=o.methods.query,y={url:"".concat(d,"/field"),method:q,contentType:g,headers:{Accept:g}},b={type:"query",method:u,model:a,request:y};return s.makeRequest(a,b).then(function(e){const a=s.parseResponseBodyAsJSON(e.body);t.each(a,function(e,t){let a;if(!t.schema)a=f;else if(t.schema.type==="number")a=m;else if(t.schema.type==="datetime")a=p;else a=f;let s={accessible:true,createable:true,displaytype:a,editable:true,filterable:false,id:t.id,label:t.name,required:false,synonym:"fields.".concat(t.id)};if(t.hasDefaultValue&&t.defaultValue){s.defaultValue=t.defaultValue.id}if(a===m)s.enclosevalueinquotes=false;o.fields.push(s)});return o})},getEntityList:i.getEntityListStatic,getValidPicklistEntries:function e(a){let s=this,{model:i,id:l,row:n}=a.getState();if(l==="updateStatus"){const e=n.transitions;return e&&e.map(e=>({label:e.name,value:e.id}))}else if(l==="createLinkType"){const e={url:"".concat(d,"/issueLinkType"),method:q,contentType:g,headers:{Accept:g}},a={type:"query",method:q,model:i,request:e};return s.makeRequest(i,a).then(function(e){const a=s.parseResponseBodyAsJSON(e.body);return t.map(a.issueLinkTypes,function(e){return{label:"".concat(e.name," (inward: ").concat(e.inward,"/outward: ").concat(e.outward,")"),value:e.id}})})}},getConditionSourceProperties:function t(a,s){let i=e.builder.core,l=a.get("xmlState"),n=l.closest("model");if(n.attr("x-entityname")!==N){return[{label:"URL Merge Parameter",deleteable:false,linkedComponent:a,summaryFunction:function e(t){return i.conditionDescriptionRenderers.parameter(t)},propsFunction:function e(t){return i.getConditionParameterProperties(a,{handleChange:s.handleChange(t),handleRefresh:s.handleRefresh(t)})}}]}},extendedProperties:{composer:{unomittableFields:true,hasEntityOptions:true,validConditionOperators:function e(){return["","=","!=","gt","lt","gte","lte","in","not in","contains","does not contain"]}},runtime:{metadataSource:"hybrid"},canConditionsBeGrouped:function e(t){return t&&t.attr("x-entityname")===N},onlySupportsClientSideFieldConditions:false,hasDefaultSearch:true,canServerSearch:true,"x-metadata":{__skuid_fieldDefaults:{"*":{displaytype:f,editable:true,createable:true,filterable:false,accessible:true}},Comment:{idFields:["id"],label:"Comment",labelPlural:"Comments",fields:[{id:"id",label:"Id",createable:false,editable:false},{id:"authorId",label:"Author ID",synonym:"author.accountId",createable:false,editable:false},{id:"authorName",label:"Author Name",synonym:"author.displayName",createable:false,editable:false},{id:"authorEmail",label:"Author Email",synonym:"author.emailAddress",createable:false,editable:false},{id:"body",label:"Body",displaytype:b},{id:"created",label:"Created",displaytype:p,createable:false,editable:false},{id:"renderedBody",label:"Rendered Body",displaytype:h,createable:false,editable:false}],methods:{query:{url:"/issue/{{issue}}/comment?expand=renderedBody",verb:q,contentType:g,pathToContent:"comments"},insert:{url:"/issue/{{issue}}/comment",verb:j,contentType:g,receiveDataAs:"recordinbody",successIf:"responsefieldexists"},update:{url:"/issue/{{issue}}/comment/{{id}}",verb:S,contentType:g,receiveDataAs:"recordinbody",successIf:"responsefieldexists"},delete:{url:"/issue/{{issue}}/comment/{{id}}",verb:A,contentType:g,successIf:"requestsucceeds"}},defaultConditions:[{sourcetype:"param",sourceparam:"issue",name:"issue",label:"Issue Key",state:"filterablerequired",value:""}]},Component:{idFields:["id"],nameField:"name",label:"Component",labelPlural:"Components",fields:[{id:"id",label:"Id"},{id:"name",label:"Name"},{id:"assigneeType",label:"Assignee Type"},{id:"description",label:"Description"},{id:"isAssigneeTypeValid",label:"Is Assignee Type Valid",displaytype:y},{id:"project",label:"Project"},{id:"projectId",label:"Project Id",displaytype:m},{id:"realAssigneeType",label:"Real Assignee Type"},{id:"leadKey",label:"Lead Key",synonym:"lead.key"},{id:"leadName",label:"Lead Name",synonym:"lead.name"},{id:"leadDisplayName",label:"Lead Display Name",synonym:"lead.displayName"}],methods:{query:{url:"",verb:q,contentType:g}},defaultConditions:[{sourcetype:"param",sourceparam:"project",name:"project",label:"Project Key",state:"filterablerequired",value:""},{sourcetype:"param",sourceparam:"component",name:"component",label:"Component Id",state:"filterablerequired",value:""}]},Issue:{idFields:["id"],nameField:"key",label:N,labelPlural:"Issues",fields:k,methods:{query:{url:"/search?expand=schema,transitions",verb:q,contentType:g,pathToContent:"issues"},insert:{url:"/issue",verb:j,contentType:g,receiveDataAs:"recordinbody",successIf:"responsefieldexists",pathToContent:"issues"},update:{url:"/issue/{{id}}",verb:S,contentType:g,receiveDataAs:"recordinbody",successIf:"responsefieldexists"},search:{url:"/search",verb:q,contentType:g,pathToContent:"issues"}},defaultConditions:[]},IssueLink:{idFields:["id"],label:"IssueLink",labelPlural:"IssueLinks",fields:[{id:"id",label:"Id",createable:false,editable:false},{id:"type",label:"Link Type",synonym:"type.outward",createable:false,editable:false},{id:"issueKey",label:"Issue Key",synonym:"outwardIssue.key",createable:false,editable:false},{id:"issueId",label:"Issue ID",synonym:"outwardIssue.id",createable:false,editable:false},{id:"issueSummary",label:"Issue Summary",synonym:"outwardIssue.fields.summary",createable:false,editable:false},{id:"issueStatusId",label:"Issue Status ID",synonym:"outwardIssue.fields.status.id",createable:false,editable:false},{id:"issueStatus",label:"Issue Status",synonym:"outwardIssue.fields.status.name",createable:false,editable:false},{id:"issuePriority",label:"Issue Priority",synonym:"outwardIssue.fields.priority.name",createable:false,editable:false},{id:"issuePriorityId",label:"Issue Priority ID",synonym:"outwardIssue.fields.priority.id",createable:false,editable:false},{id:"issueType",label:"Issue Type",synonym:"outwardIssue.fields.issuetype.name",createable:false,editable:false},{id:"issueTypeId",label:"Issue Type ID",synonym:"outwardIssue.fields.issuetype.id",createable:false,editable:false},{id:"createLinkType",label:"Create Link Type",displaytype:T,createable:true,editable:false},{id:"createInwardIssue",label:"Create Inward Issue",createable:true,editable:false},{id:"createOutwardIssue",label:"Create Outward Issue",createable:true,editable:false}],methods:{query:{url:"/issue/{{issue}}",verb:q,contentType:g,pathToContent:"fields.issuelinks"},insert:{url:"/issueLink",verb:j,contentType:g,receiveDataAs:"recordinbody",successIf:"responsefieldexists"},delete:{url:"/issueLink/{{id}}",verb:A,contentType:g,successIf:"requestsucceeds"}},defaultConditions:[{sourcetype:"param",sourceparam:"issue",name:"issue",label:"Issue Key",state:"filterablerequired",value:""}]},Sprint:{idFields:["id"],nameField:"key",label:"Sprint",labelPlural:"Sprints",fields:k,methods:{query:{url:'/search?jql=sprint = "{{sprint}}"',verb:q,contentType:g,pathToContent:"issues"},insert:{url:"/issue",verb:j,contentType:g,receiveDataAs:"recordinbody",successIf:"responsefieldexists",pathToContent:"issues"},update:{url:"/issue/{{id}}",verb:S,contentType:g,receiveDataAs:"recordinbody",successIf:"responsefieldexists"},search:{url:'/search?jql=sprint = "{{sprint}}"',verb:q,contentType:g,pathToContent:"issues"}},defaultConditions:[{sourcetype:"param",sourceparam:"sprint",name:"sprint",label:"Sprint",state:"filterablerequired",required:true,value:""},{sourcetype:"param",sourceparam:"jqlquery",name:"jqlquery",label:"JQL Query",state:"filterable",required:false,value:""}]},Project:{idFields:["key"],nameField:"name",label:"Project",labelPlural:"Projects",fields:[{id:"id",label:"Id"},{id:"key",label:"Key"},{id:"description",label:"Description",displaytype:b},{id:"key",label:"Project Key"},{id:"name",label:"Project Name"},{id:"projectTypeKey",label:"Project Type Key"},{id:"avatar",label:"Avatar",synonym:"avatarUrls.48x48",displaytype:I},{id:"leadName",label:"Lead Name",synonym:"lead.displayName"},{id:"leadAvatar",label:"Lead Avatar",synonym:"lead.avatarUrls.48x48"},{id:"leadActive",label:"Lead Active",synonym:"lead.active",displaytype:y}],methods:{query:{url:"/project?expand=description,lead,issueTypes,url,projectKeys",verb:q,scopes:[],contentType:g,pathToContent:""}},defaultConditions:[]},User:{idFields:["key"],nameField:"name",label:"User",labelPlural:"Users",fields:[{id:"key",label:"Id"},{id:"name",label:"Username"},{id:"displayName",label:"Display Name"},{id:"active",label:"Is Active",displaytype:y},{id:"avatar",label:"Avatar",synonym:"avatarUrls.48x48",displaytype:I},{id:"locale",label:"Locale"},{id:"timeZone",label:"Time Zone"}],methods:{query:{url:"/user?username={{username}}&expand=groups,applicationRoles",verb:q,contentType:g}},defaultConditions:[{sourcetype:"param",sourceparam:"username",name:"Username",label:"Username",state:"filterablerequired",type:"fieldvalue",required:true,value:""}]}}}})})(e)}});return t});