skuid.runtime.registerApi("v2","skuidPages/skuidCredentialsManagement",function(e){var t=function(e){var t={};function r(n){if(t[n]){return t[n].exports}var i=t[n]={i:n,l:false,exports:{}};e[n].call(i.exports,i,i.exports,r);i.l=true;return i.exports}r.m=e;r.c=t;r.d=function(e,t,n){if(!r.o(e,t)){Object.defineProperty(e,t,{enumerable:true,get:n})}};r.r=function(e){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(e,"__esModule",{value:true})};r.t=function(e,t){if(t&1)e=r(e);if(t&8)return e;if(t&4&&typeof e==="object"&&e&&e.__esModule)return e;var n=Object.create(null);r.r(n);Object.defineProperty(n,"default",{enumerable:true,value:e});if(t&2&&typeof e!="string")for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n};r.n=function(e){var t=e&&e.__esModule?function t(){return e["default"]}:function t(){return e};r.d(t,"a",t);return t};r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};r.p="";return r(r.s=698)}({698:function(t,r){(function(e){let t=e.$,r=e.$M,n=e.utils,i=e.snippet.register,u=e.platform.getEntityFieldNames,o=u("auth_provider"),a=u("auth_provider_credential"),l;if(n.inPlatform(e.constants.VISUALFORCE)){e.remote.set("skuid.CredentialsManagementController")}t(document.body).one("pageload",function(){if(!d()){c().subscribe("beforeSaveCommitted",p)}});function d(){if(n.isUndefined(l)){l=n.inPlatform(e.constants.NATIVE)}return l}function s(){return r("cm_AuthProviders")}function f(){return r("cm_OAuthCredentials")}function c(){return r("cm_ModelDataSourceCreds")}i("skuid.credentialsManagement.populateDataSourceCredentials",function(){let i=r("cm_ModelDataSources"),u=c(),o=e.utils.userInfo.userId,a=n.keyBy(u.getRows(),"skuid__Service_Name__c");if(i.getRows().length===0)return;t.each(i.getRows(),function(){let e=this,t=i.getFieldValue(e,"Id",true),r=i.getFieldValue(e,"Name",true),n=a[r];if(!n){n=a[r]=u.createRow({doAppend:true,editModeForNewItems:true,additionalConditions:[{field:"Name",value:t+"_"+o},{field:"skuid__Service_Name__c",value:r},{field:"skuid__Applies_To__c",value:o}]})}})});let _;i("skuid.credentialsManagement.populateOAuthCredentials",function(){let r=s(),i=f(),u=e.utils.userInfo.userId,l=n.keyBy(i.getRows(),a.auth_provider_id),d=a.auth_provider_name,c=[];if(_===i.lastLoadTime)return;else _=i.lastLoadTime;t.each(r.getRows(),function(){let e=this,t=r.getFieldValue(e,o.id,true),n=l[t];if(!n){n=l[t]={};n[a.auth_provider_id]=t;n[a.user_id]=u;c.push(n)}});if(c.length){i.adoptRows(c,{notify:false})}i.data.sort(function(e,t){let r=i.getFieldValue(e,d,true),n=i.getFieldValue(t,d,true);return r.localeCompare(n)})});function p(e){let r=e.operation;if(r.type!=="skuid__Model_Service_Credential__c")return;if(r.inserts&&n.size(r.inserts)){t.each(r.inserts,function(e,t){if(!t.skuid__Username__c&&!t.skuid__Password__c){delete t[e]}})}}})(e)}});return t});