!function(e){var t={};function i(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},i.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=76)}({76:function(e,t,i){"use strict";var o,n;o=window.skuid,n=o.$,o.componentType.register("pageXMLEditor",function(e){var t,i=o.$M("page"),r=new o.ui.Editor(e),a=null,s=o.builder.core,l=!1;function d(e){var t="";e=e.replace(/(>)(<)(\/*)/g,"$1\r\n$2$3");var i=0;return n.each(e.split("\r\n"),function(e,o){var n=0;o.match(/.+<\/\w[^>]*>$/)?n=0:o.match(/^<\/\w/)?0!==i&&(i-=1):n=o.match(/^<\w[^>]*[^\/]>.*$/)?1:0;for(var r="",a=0;a<i;a++)r+="\t";t+=r+o+"\r\n",i+=n}),t}function u(){t=i.getFirstRow(),f.prop("href",o.platform.getPageComposeUrlById(t.id)),(a=window.ace.edit("pagexmleditorbox")).setValue(d(i.getFieldValues(t,s.layoutFields,!0).join("")));var e=a.getSession();e.setMode("ace/mode/xml"),e.setUseSoftTabs(!1),e.setTabSize(4),e.getSelection().clearSelection(),p.show(),e.on("change",function(){if(!l){var e;try{e=o.utils.makeXMLDoc(a.getValue().replace(/(>)(\s*)(<)(\/*)/g,"$1$3$4"))}catch(e){return void g.show()}g.hide(),s.save(e[0],i,t)}}),v()}s.layoutFields=o.platform.getLayoutFields(),o.utils.layoutFields=s.layoutFields,i&&r.registerModel(i),r.handleCancel=function(){f.removeClass("disabled"),a&&(l=!0,a.setValue(d(i.getFieldValues(t,s.layoutFields,!0).join(""))),a.getSession().getSelection().clearSelection(),l=!1)},r.handleSave=function(){f.removeClass("disabled")},r.handleChange=function(){f.addClass("disabled")};var c=n('<div id="wrapper">'),p=n('<div id="pagexmleditorbox">').addClass("nx-code-editor"),g=n("<div>Invalid XML</div>").addClass("nx-error").css({position:"absolute",top:"4px",right:"4px"}).hide(),f=n("<a>").addClass("nx-pagebuilder-viewxmllink").text("View/Edit in Page Composer");function v(){var t=window.innerHeight-n(".sk-headerwrapper").outerHeight()-100+"px";c.css("height",t),p.css("height",t),e.css("position","relative").css("height",t),a.resize()}c.append(p),e.append(c,f,g),n(document.body).one("pageload",function(){if(i.getRows().length)u();else var e=o.events.subscribe("models.loaded",function(){o.events.unsubscribe(e),u()})}),n(window).resize(v)})}});